{"version":3,"names":[],"mappings":"","sources":["myLaya.max.js"],"sourcesContent":["var window = window || global;\r\nvar document = document || (window.document = {});\r\n/***********************************/\n/*http://www.layabox.com 2016/11/25*/\n/***********************************/\nvar Laya=window.Laya=(function(window,document){\n\tvar Laya={\n\t\t__internals:[],\n\t\t__packages:{},\n\t\t__classmap:{'Object':Object,'Function':Function,'Array':Array,'String':String},\n\t\t__sysClass:{'object':'Object','array':'Array','string':'String','dictionary':'Dictionary'},\n\t\t__propun:{writable: true,enumerable: false,configurable: true},\n\t\t__presubstr:String.prototype.substr,\n\t\t__substr:function(ofs,sz){return arguments.length==1?Laya.__presubstr.call(this,ofs):Laya.__presubstr.call(this,ofs,sz>0?sz:(this.length+sz));},\n\t\t__init:function(_classs){_classs.forEach(function(o){o.__init$ && o.__init$();});},\n\t\t__isClass:function(o){return o && (o.__isclass || o==Object || o==String || o==Array);},\n\t\t__newvec:function(sz,value){\n\t\t\tvar d=[];\n\t\t\td.length=sz;\n\t\t\tfor(var i=0;i<sz;i++) d[i]=value;\n\t\t\treturn d;\n\t\t},\n\t\t__extend:function(d,b){\n\t\t\tfor (var p in b){\n\t\t\t\tif (!b.hasOwnProperty(p)) continue;\n\t\t\t\tvar gs=Object.getOwnPropertyDescriptor(b, p);\n\t\t\t\tvar g = gs.get, s = gs.set; \n\t\t\t\tif ( g || s ) {\n\t\t\t\t\tif ( g && s)\n\t\t\t\t\t\tObject.defineProperty(d,p,gs);\n\t\t\t\t\telse{\n\t\t\t\t\t\tg && Object.defineProperty(d, p, g);\n\t\t\t\t\t\ts && Object.defineProperty(d, p, s);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse d[p] = b[p];\n\t\t\t}\n\t\t\tfunction __() { Laya.un(this,'constructor',d); }__.prototype=b.prototype;d.prototype=new __();Laya.un(d.prototype,'__imps',Laya.__copy({},b.prototype.__imps));\n\t\t},\n\t\t__copy:function(dec,src){\n\t\t\tif(!src) return null;\n\t\t\tdec=dec||{};\n\t\t\tfor(var i in src) dec[i]=src[i];\n\t\t\treturn dec;\n\t\t},\n\t\t__package:function(name,o){\n\t\t\tif(Laya.__packages[name]) return;\n\t\t\tLaya.__packages[name]=true;\n\t\t\tvar p=window,strs=name.split('.');\n\t\t\tif(strs.length>1){\n\t\t\t\tfor(var i=0,sz=strs.length-1;i<sz;i++){\n\t\t\t\t\tvar c=p[strs[i]];\n\t\t\t\t\tp=c?c:(p[strs[i]]={});\n\t\t\t\t}\n\t\t\t}\n\t\t\tp[strs[strs.length-1]] || (p[strs[strs.length-1]]=o||{});\n\t\t},\n\t\t__hasOwnProperty:function(name,o){\n\t\t\to=o ||this;\n\t\t    function classHas(name,o){\n\t\t\t\tif(Object.hasOwnProperty.call(o.prototype,name)) return true;\n\t\t\t\tvar s=o.prototype.__super;\n\t\t\t\treturn s==null?null:classHas(name,s);\n\t\t\t}\n\t\t\treturn (Object.hasOwnProperty.call(o,name)) || classHas(name,o.__class);\n\t\t},\n\t\t__typeof:function(o,value){\n\t\t\tif(!o || !value) return false;\n\t\t\tif(value===String) return (typeof o==='string');\n\t\t\tif(value===Number) return (typeof o==='number');\n\t\t\tif(value.__interface__) value=value.__interface__;\n\t\t\telse if(typeof value!='string')  return (o instanceof value);\n\t\t\treturn (o.__imps && o.__imps[value]) || (o.__class==value);\n\t\t},\n\t\t__as:function(value,type){\n\t\t\treturn (this.__typeof(value,type))?value:null;\n\t\t},\t\t\n\t\tinterface:function(name,_super){\n\t\t\tLaya.__package(name,{});\n\t\t\tvar ins=Laya.__internals;\n\t\t\tvar a=ins[name]=ins[name] || {self:name};\n\t\t\tif(_super)\n\t\t\t{\n\t\t\t\tvar supers=_super.split(',');\n\t\t\t\ta.extend=[];\n\t\t\t\tfor(var i=0;i<supers.length;i++){\n\t\t\t\t\tvar name=supers[i];\n\t\t\t\t\tins[name]=ins[name] || {self:name};\n\t\t\t\t\ta.extend.push(ins[name]);\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar o=window,words=name.split('.');\n\t\t\tfor(var i=0;i<words.length-1;i++) o=o[words[i]];o[words[words.length-1]]={__interface__:name};\n\t\t},\n\t\tclass:function(o,fullName,_super,miniName){\n\t\t\t_super && Laya.__extend(o,_super);\n\t\t\tif(fullName){\n\t\t\t\tLaya.__package(fullName,o);\n\t\t\t\tLaya.__classmap[fullName]=o;\n\t\t\t\tif(fullName.indexOf('.')>0){\n\t\t\t\t\tif(fullName.indexOf('laya.')==0){\n\t\t\t\t\t\tvar paths=fullName.split('.');\n\t\t\t\t\t\tminiName=miniName || paths[paths.length-1];\n\t\t\t\t\t\tif(Laya[miniName]) console.log(\"Warning!,this class[\"+miniName+\"] already exist:\",Laya[miniName]);\n\t\t\t\t\t\tLaya[miniName]=o;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tif(fullName==\"Main\")\n\t\t\t\t\t\twindow.Main=o;\n\t\t\t\t\telse{\n\t\t\t\t\t\tif(Laya[fullName]){\n\t\t\t\t\t\t\tconsole.log(\"Error!,this class[\"+fullName+\"] already exist:\",Laya[fullName]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tLaya[fullName]=o;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar un=Laya.un,p=o.prototype;\n\t\t\tun(p,'hasOwnProperty',Laya.__hasOwnProperty);\n\t\t\tun(p,'__class',o);\n\t\t\tun(p,'__super',_super);\n\t\t\tun(p,'__className',fullName);\n\t\t\tun(o,'__super',_super);\n\t\t\tun(o,'__className',fullName);\n\t\t\tun(o,'__isclass',true);\n\t\t\tun(o,'super',function(o){this.__super.call(o);});\n\t\t},\n\t\timps:function(dec,src){\n\t\t\tif(!src) return null;\n\t\t\tvar d=dec.__imps|| Laya.un(dec,'__imps',{});\n\t\t\tfunction __(name){\n\t\t\t\tvar c,exs;\n\t\t\t\tif(! (c=Laya.__internals[name]) ) return;\n\t\t\t\td[name]=true;\n\t\t\t\tif(!(exs=c.extend)) return;\n\t\t\t\tfor(var i=0;i<exs.length;i++){\n\t\t\t\t\t__(exs[i].self);\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor(var i in src) __(i);\n\t\t},\n\t\tgetset:function(isStatic,o,name,getfn,setfn){\n\t\t\tif(!isStatic){\n\t\t\t\tgetfn && Laya.un(o,'_$get_'+name,getfn);\n\t\t\t\tsetfn && Laya.un(o,'_$set_'+name,setfn);\n\t\t\t}\n\t\t\telse{\n\t\t\t\tgetfn && (o['_$GET_'+name]=getfn);\n\t\t\t\tsetfn && (o['_$SET_'+name]=setfn);\n\t\t\t}\n\t\t\tif(getfn && setfn) \n\t\t\t\tObject.defineProperty(o,name,{get:getfn,set:setfn,enumerable:false});\n\t\t\telse{\n\t\t\t\tgetfn && Object.defineProperty(o,name,{get:getfn,enumerable:false});\n\t\t\t\tsetfn && Object.defineProperty(o,name,{set:setfn,enumerable:false});\n\t\t\t}\n\t\t},\n\t\tstatic:function(_class,def){\n\t\t\t\tfor(var i=0,sz=def.length;i<sz;i+=2){\n\t\t\t\t\tif(def[i]=='length') \n\t\t\t\t\t\t_class.length=def[i+1].call(_class);\n\t\t\t\t\telse{\n\t\t\t\t\t\tfunction tmp(){\n\t\t\t\t\t\t\tvar name=def[i];\n\t\t\t\t\t\t\tvar getfn=def[i+1];\n\t\t\t\t\t\t\tObject.defineProperty(_class,name,{\n\t\t\t\t\t\t\t\tget:function(){delete this[name];return this[name]=getfn.call(this);},\n\t\t\t\t\t\t\t\tset:function(v){delete this[name];this[name]=v;},enumerable: true,configurable: true});\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttmp();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t},\t\t\n\t\tun:function(obj,name,value){\n\t\t\tvalue || (value=obj[name]);\n\t\t\tLaya.__propun.value=value;\n\t\t\tObject.defineProperty(obj, name, Laya.__propun);\n\t\t\treturn value;\n\t\t},\n\t\tuns:function(obj,names){\n\t\t\tnames.forEach(function(o){Laya.un(obj,o)});\n\t\t}\n\t};\n\n\twindow.console=window.console || ({log:function(){}});\n\twindow.trace=window.console.log;\n\tError.prototype.throwError=function(){throw arguments;};\n\tString.prototype.substr=Laya.__substr;\n\tObject.defineProperty(Array.prototype,'fixed',{enumerable: false});\n\r\n\treturn Laya;\r\n})(window,document);\r\n\r\n(function(window,document,Laya){\r\n\tvar __un=Laya.un,__uns=Laya.uns,__static=Laya.static,__class=Laya.class,__getset=Laya.getset,__newvec=Laya.__newvec;\r\n\tLaya.interface('laya.ui.IItem');\r\n\tLaya.interface('laya.ui.ISelect');\r\n\tLaya.interface('mj.scene.GameScene');\r\n\tLaya.interface('laya.runtime.IMarket');\r\n\tLaya.interface('laya.filters.IFilter');\r\n\tLaya.interface('laya.display.ILayout');\r\n\tLaya.interface('laya.resource.IDispose');\r\n\tLaya.interface('laya.runtime.IConchNode');\r\n\tLaya.interface('laya.webgl.shapes.IShape');\r\n\tLaya.interface('laya.webgl.submit.ISubmit');\r\n\tLaya.interface('com.isnowfox.core.io.Input');\r\n\tLaya.interface('laya.filters.IFilterAction');\r\n\tLaya.interface('mj.ui.dialog.DialogContent');\r\n\tLaya.interface('com.isnowfox.core.io.Output');\r\n\tLaya.interface('laya.webgl.text.ICharSegment');\r\n\tLaya.interface('laya.runtime.ICPlatformClass');\r\n\tLaya.interface('laya.resource.ICreateResource');\r\n\tLaya.interface('laya.webgl.canvas.save.ISaveData');\r\n\tLaya.interface('com.isnowfox.core.io.message.Message');\r\n\tLaya.interface('laya.webgl.resource.IMergeAtlasBitmap');\r\n\tLaya.interface('com.isnowfox.core.io.message.MessageHandler');\r\n\tLaya.interface('com.isnowfox.core.io.message.MessageFactory');\r\n\tLaya.interface('laya.filters.IFilterActionGL','laya.filters.IFilterAction');\r\n\t/**\r\n\t*@private\r\n\t*/\r\n\t//class laya.utils.RunDriver\r\n\tvar RunDriver=(function(){\r\n\t\tfunction RunDriver(){};\r\n\t\t__class(RunDriver,'laya.utils.RunDriver');\r\n\t\tRunDriver.FILTER_ACTIONS=[];\r\n\t\tRunDriver.pixelRatio=-1;\r\n\t\tRunDriver._charSizeTestDiv=null\r\n\t\tRunDriver.now=function(){\r\n\t\t\treturn Date.now();\r\n\t\t}\r\n\r\n\t\tRunDriver.getWindow=function(){\r\n\t\t\treturn window;\r\n\t\t}\r\n\r\n\t\tRunDriver.newWebGLContext=function(canvas,webGLName){\r\n\t\t\treturn canvas.getContext(webGLName,{stencil:true,alpha:Config.isAlpha,antialias:Config.isAntialias,premultipliedAlpha:Config.premultipliedAlpha});\r\n\t\t}\r\n\r\n\t\tRunDriver.getPixelRatio=function(){\r\n\t\t\tif (RunDriver.pixelRatio < 0){\r\n\t\t\t\tvar ctx=Browser.context;\r\n\t\t\t\tvar backingStore=ctx.backingStorePixelRatio || ctx.webkitBackingStorePixelRatio || ctx.mozBackingStorePixelRatio || ctx.msBackingStorePixelRatio || ctx.oBackingStorePixelRatio || ctx.backingStorePixelRatio || 1;\r\n\t\t\t\tRunDriver.pixelRatio=(Browser.window.devicePixelRatio || 1)/ backingStore;\r\n\t\t\t}\r\n\t\t\treturn RunDriver.pixelRatio;\r\n\t\t}\r\n\r\n\t\tRunDriver.getIncludeStr=function(name){\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\tRunDriver.createShaderCondition=function(conditionScript){\r\n\t\t\tvar fn=\"(function() {return \"+conditionScript+\";})\";\r\n\t\t\treturn Browser.window.eval(fn);\r\n\t\t}\r\n\r\n\t\tRunDriver.measureText=function(txt,font){\r\n\t\t\tif (Render.isConchApp){\r\n\t\t\t\tvar ctx=ConchTextCanvas;\r\n\t\t\t\tctx.font=font;\r\n\t\t\t\treturn ctx.measureText(txt);\r\n\t\t\t}\r\n\t\t\tif (RunDriver._charSizeTestDiv==null){\r\n\t\t\t\tRunDriver._charSizeTestDiv=Browser.createElement('div');\r\n\t\t\t\tRunDriver._charSizeTestDiv.style.cssText=\"z-index:10000000;padding:0px;position: absolute;left:0px;visibility:hidden;top:0px;background:white\";\r\n\t\t\t\tBrowser.container.appendChild(RunDriver._charSizeTestDiv);\r\n\t\t\t}\r\n\t\t\tRunDriver._charSizeTestDiv.style.font=font;\r\n\t\t\tRunDriver._charSizeTestDiv.innerText=txt==\" \" ? \"i\" :txt;\r\n\t\t\treturn {width:RunDriver._charSizeTestDiv.offsetWidth,height:RunDriver._charSizeTestDiv.offsetHeight};\r\n\t\t}\r\n\r\n\t\tRunDriver.beginFlush=function(){\r\n\t\t};\r\n\r\n\t\tRunDriver.endFinish=function(){\r\n\t\t};\r\n\r\n\t\tRunDriver.addToAtlas=null\r\n\t\tRunDriver.flashFlushImage=function(atlasWebGLCanvas){\r\n\t\t};\r\n\r\n\t\tRunDriver.drawToCanvas=function(sprite,_renderType,canvasWidth,canvasHeight,offsetX,offsetY){\r\n\t\t\tvar canvas=HTMLCanvas.create(\"2D\");\r\n\t\t\tvar context=new RenderContext(canvasWidth,canvasHeight,canvas);\r\n\t\t\tRenderSprite.renders[_renderType]._fun(sprite,context,offsetX,offsetY);\r\n\t\t\treturn canvas;\r\n\t\t}\r\n\r\n\t\tRunDriver.createParticleTemplate2D=null\r\n\t\tRunDriver.createGLTextur=null;\r\n\t\tRunDriver.createWebGLContext2D=null;\r\n\t\tRunDriver.changeWebGLSize=function(w,h){\r\n\t\t};\r\n\r\n\t\tRunDriver.createRenderSprite=function(type,next){\r\n\t\t\treturn new RenderSprite(type,next);\r\n\t\t}\r\n\r\n\t\tRunDriver.createFilterAction=function(type){\r\n\t\t\treturn new ColorFilterAction();\r\n\t\t}\r\n\r\n\t\tRunDriver.createGraphics=function(){\r\n\t\t\treturn new Graphics();\r\n\t\t}\r\n\r\n\t\tRunDriver.clear=function(value){\r\n\t\t\tRender._context.ctx.clear();\r\n\t\t}\r\n\r\n\t\tRunDriver.clearAtlas=function(value){\r\n\t\t};\r\n\r\n\t\tRunDriver.addTextureToAtlas=function(value){\r\n\t\t};\r\n\r\n\t\tRunDriver.getTexturePixels=function(value,x,y,width,height){\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\tRunDriver.skinAniSprite=function(){\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\treturn RunDriver;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*<code>Laya</code> 是全局对象的引用入口集。\r\n\t*/\r\n\t//class Laya\r\n\tvar ___Laya=(function(){\r\n\t\t//function Laya(){};\r\n\t\t/**\r\n\t\t*表示是否捕获全局错误并弹出提示。\r\n\t\t*/\r\n\t\t__getset(1,Laya,'alertGlobalError',null,function(value){\r\n\t\t\tvar erralert=0;\r\n\t\t\tif (value){\r\n\t\t\t\tBrowser.window.onerror=function (msg,url,line,column,detail){\r\n\t\t\t\t\tif (erralert++< 5 && detail)\r\n\t\t\t\t\t\talert(\"出错啦，请把此信息截图给研发商\\n\"+msg+\"\\n\"+detail.stack);\r\n\t\t\t\t}\r\n\t\t\t\t}else {\r\n\t\t\t\tBrowser.window.onerror=null;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tLaya.init=function(width,height,__plugins){\r\n\t\t\tvar plugins=[];for(var i=2,sz=arguments.length;i<sz;i++)plugins.push(arguments[i]);\r\n\t\t\tif (Laya._isinit)return;\r\n\t\t\tLaya._isinit=true;\r\n\t\t\tBrowser.__init__();\r\n\t\t\tContext.__init__();\r\n\t\t\tGraphics.__init__();\r\n\t\t\tLaya.timer=new Timer();\r\n\t\t\tLaya.loader=new LoaderManager();\r\n\t\t\tfor (var i=0,n=plugins.length;i < n;i++){\r\n\t\t\t\tif (plugins[i].enable)plugins[i].enable();\r\n\t\t\t}\r\n\t\t\tFont.__init__();\r\n\t\t\tStyle.__init__();\r\n\t\t\tResourceManager.__init__();\r\n\t\t\tCacheManger.beginCheck();\r\n\t\t\tLaya.stageBox=Laya.stage=new Stage();\r\n\t\t\tLaya.stage.conchModel&&Laya.stage.conchModel.setRootNode();\r\n\t\t\tvar location=Browser.window.location;\r\n\t\t\tvar pathName=location.pathname;\r\n\t\t\tpathName=pathName.charAt(2)==':' ? pathName.substring(1):pathName;\r\n\t\t\tURL.rootPath=URL.basePath=URL.getPath(location.protocol==\"file:\" ? pathName :location.protocol+\"//\"+location.host+location.pathname);\r\n\t\t\tLaya.render=new Render(0,0);\r\n\t\t\tLaya.stage.size(width,height);\r\n\t\t\tRenderSprite.__init__();\r\n\t\t\tKeyBoardManager.__init__();\r\n\t\t\tMouseManager.instance.__init__(Laya.stage,Render.canvas);\r\n\t\t\tInput.__init__();\r\n\t\t\tSoundManager.autoStopMusic=true;\r\n\t\t\tLocalStorage.__init__();\r\n\t\t\treturn Render.canvas;\r\n\t\t}\r\n\r\n\t\tLaya.stage=null;\r\n\t\tLaya.timer=null;\r\n\t\tLaya.loader=null;\r\n\t\tLaya.render=null\r\n\t\tLaya.version=\"1.6.1Beta\";\r\n\t\tLaya.stageBox=null\r\n\t\tLaya._isinit=false;\r\n\t\t__static(Laya,\r\n\t\t['conchMarket',function(){return this.conchMarket=window.conch?conchMarket:null;},'PlatformClass',function(){return this.PlatformClass=window.PlatformClass;}\r\n\t\t]);\r\n\t\treturn Laya;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*@author zuoge85@gmail.com on 16/9/23.\r\n\t*/\r\n\t//class com.isnowfox.core.console.Console\r\n\tvar Console=(function(){\r\n\t\tfunction Console(){};\r\n\t\t__class(Console,'com.isnowfox.core.console.Console');\r\n\t\tConsole.log=function(format,__args){\r\n\t\t\tvar args=[];for(var i=1,sz=arguments.length;i<sz;i++)args.push(arguments[i]);\r\n\t\t\tvar argArray=[format];\r\n\t\t\targArray.push.apply(argArray,args);\r\n\t\t\tconsole.log(StringUtils.format.apply(null,argArray))\r\n\t\t}\r\n\r\n\t\treturn Console;\r\n\t})()\r\n\r\n\r\n\t//class com.isnowfox.core.io.AbstractInput\r\n\tvar AbstractInput=(function(){\r\n\t\tfunction AbstractInput(in0,charset){\r\n\t\t\tthis.mIn=null;\r\n\t\t\tthis.mCharset=null;\r\n\t\t\tthis.mIn=in0;\r\n\t\t\tthis.mCharset=charset;\r\n\t\t}\r\n\r\n\t\t__class(AbstractInput,'com.isnowfox.core.io.AbstractInput');\r\n\t\tvar __proto=AbstractInput.prototype;\r\n\t\tLaya.imps(__proto,{\"com.isnowfox.core.io.Input\":true})\r\n\t\t__proto.getDataInput=function(){\r\n\t\t\treturn this.mIn;\r\n\t\t}\r\n\r\n\t\t__proto.readBoolean=function(){\r\n\t\t\tthrow new AbstractMethodError();\r\n\t\t}\r\n\r\n\t\t__proto.readInt=function(){\r\n\t\t\tthrow new AbstractMethodError();\r\n\t\t}\r\n\r\n\t\t__proto.readLong=function(){\r\n\t\t\tthrow new AbstractMethodError();\r\n\t\t}\r\n\r\n\t\t__proto.readFloat=function(){\r\n\t\t\tthrow new AbstractMethodError();\r\n\t\t}\r\n\r\n\t\t__proto.readDouble=function(){\r\n\t\t\tthrow new AbstractMethodError();\r\n\t\t}\r\n\r\n\t\t__proto.readString=function(){\r\n\t\t\tthrow new AbstractMethodError();\r\n\t\t}\r\n\r\n\t\t__proto.readBytes=function(){\r\n\t\t\tthrow new AbstractMethodError();\r\n\t\t}\r\n\r\n\t\t__proto.readByteBuf=function(){\r\n\t\t\tthrow new AbstractMethodError();\r\n\t\t}\r\n\r\n\t\t__proto.readBooleanArray=function(){\r\n\t\t\tvar len=this.readInt();\r\n\t\t\tif (len==-1){\r\n\t\t\t\treturn null;\r\n\t\t\t};\r\n\t\t\tvar a=[];\r\n\t\t\tfor (var i=0;i < len;i++){\r\n\t\t\t\ta[i]=this.readBoolean();\r\n\t\t\t}\r\n\t\t\treturn a;\r\n\t\t}\r\n\r\n\t\t__proto.readIntArray=function(){\r\n\t\t\tvar len=this.readInt();\r\n\t\t\tif (len==-1){\r\n\t\t\t\treturn null;\r\n\t\t\t};\r\n\t\t\tvar a=[];\r\n\t\t\tfor (var i=0;i < len;i++){\r\n\t\t\t\ta[i]=this.readInt();\r\n\t\t\t}\r\n\t\t\treturn a;\r\n\t\t}\r\n\r\n\t\t__proto.readLongArray=function(){\r\n\t\t\tvar len=this.readInt();\r\n\t\t\tif (len==-1){\r\n\t\t\t\treturn null;\r\n\t\t\t};\r\n\t\t\tvar a=[];\r\n\t\t\tfor (var i=0;i < len;i++){\r\n\t\t\t\ta[i]=this.readLong();\r\n\t\t\t}\r\n\t\t\treturn a;\r\n\t\t}\r\n\r\n\t\t__proto.readFloatArray=function(){\r\n\t\t\tvar len=this.readInt();\r\n\t\t\tif (len==-1){\r\n\t\t\t\treturn null;\r\n\t\t\t};\r\n\t\t\tvar a=[];\r\n\t\t\tfor (var i=0;i < len;i++){\r\n\t\t\t\ta[i]=this.readFloat();\r\n\t\t\t}\r\n\t\t\treturn a;\r\n\t\t}\r\n\r\n\t\t__proto.readDoubleArray=function(){\r\n\t\t\tvar len=this.readInt();\r\n\t\t\tif (len==-1){\r\n\t\t\t\treturn null;\r\n\t\t\t};\r\n\t\t\tvar a=[];\r\n\t\t\tfor (var i=0;i < len;i++){\r\n\t\t\t\ta[i]=this.readDouble();\r\n\t\t\t}\r\n\t\t\treturn a;\r\n\t\t}\r\n\r\n\t\t__proto.readStringArray=function(){\r\n\t\t\tvar len=this.readInt();\r\n\t\t\tif (len==-1){\r\n\t\t\t\treturn null;\r\n\t\t\t};\r\n\t\t\tvar a=[];\r\n\t\t\tfor (var i=0;i < len;i++){\r\n\t\t\t\ta[i]=this.readString();\r\n\t\t\t}\r\n\t\t\treturn a;\r\n\t\t}\r\n\r\n\t\treturn AbstractInput;\r\n\t})()\r\n\r\n\r\n\t//class com.isnowfox.core.io.AbstractOutput\r\n\tvar AbstractOutput=(function(){\r\n\t\tfunction AbstractOutput(out,charset){\r\n\t\t\tthis.mOut=null;\r\n\t\t\tthis.mCharset=null;\r\n\t\t\tthis.mOut=out;\r\n\t\t\tthis.mCharset=charset;\r\n\t\t}\r\n\r\n\t\t__class(AbstractOutput,'com.isnowfox.core.io.AbstractOutput');\r\n\t\tvar __proto=AbstractOutput.prototype;\r\n\t\tLaya.imps(__proto,{\"com.isnowfox.core.io.Output\":true})\r\n\t\t__proto.writeBoolean=function(v){\r\n\t\t\tthrow new AbstractMethodError();\r\n\t\t}\r\n\r\n\t\t__proto.writeInt=function(v){\r\n\t\t\tthrow new AbstractMethodError();\r\n\t\t}\r\n\r\n\t\t__proto.writeLong=function(v){\r\n\t\t\tthrow new AbstractMethodError();\r\n\t\t}\r\n\r\n\t\t__proto.writeFloat=function(v){\r\n\t\t\tthrow new AbstractMethodError();\r\n\t\t}\r\n\r\n\t\t__proto.writeDouble=function(v){\r\n\t\t\tthrow new AbstractMethodError();\r\n\t\t}\r\n\r\n\t\t__proto.writeString=function(s){\r\n\t\t\tthrow new AbstractMethodError();\r\n\t\t}\r\n\r\n\t\t__proto.writeBytes=function(bs){\r\n\t\t\tthrow new AbstractMethodError();\r\n\t\t}\r\n\r\n\t\t__proto.writeByteBuf=function(bs){\r\n\t\t\tif (bs===null){\r\n\t\t\t\tthis.writeInt(-1);\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tthis.mOut.writeArrayBuffer(bs.buffer,0,bs.length);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__proto.writeBooleanArray=function(v){\r\n\t\t\tif (v==null){\r\n\t\t\t\tthis.writeInt(-1);\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tthis.writeInt(v.length);\r\n\t\t\t\tvar len=v.length;\r\n\t\t\t\tfor (var i=0;i < len;i++){\r\n\t\t\t\t\tthis.writeBoolean(v[i]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__proto.writeIntArray=function(v){\r\n\t\t\tif (v==null){\r\n\t\t\t\tthis.writeInt(-1);\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tthis.writeInt(v.length);\r\n\t\t\t\tvar len=v.length;\r\n\t\t\t\tfor (var i=0;i < len;i++){\r\n\t\t\t\t\tthis.writeInt(v[i]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__proto.writeLongArray=function(v){\r\n\t\t\tif (v==null){\r\n\t\t\t\tthis.writeInt(-1);\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tthis.writeInt(v.length);\r\n\t\t\t\tvar len=v.length;\r\n\t\t\t\tfor (var i=0;i < len;i++){\r\n\t\t\t\t\tthis.writeLong(v[i]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__proto.writeFloatArray=function(v){\r\n\t\t\tif (v==null){\r\n\t\t\t\tthis.writeInt(-1);\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tthis.writeInt(v.length);\r\n\t\t\t\tvar len=v.length;\r\n\t\t\t\tfor (var i=0;i < len;i++){\r\n\t\t\t\t\tthis.writeFloat(v[i]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__proto.writeDoubleArray=function(v){\r\n\t\t\tif (v==null){\r\n\t\t\t\tthis.writeInt(-1);\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tthis.writeInt(v.length);\r\n\t\t\t\tvar len=v.length;\r\n\t\t\t\tfor (var i=0;i < len;i++){\r\n\t\t\t\t\tthis.writeDouble(v[i]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__proto.writeStringArray=function(v){\r\n\t\t\tif (v==null){\r\n\t\t\t\tthis.writeInt(-1);\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tthis.writeInt(v.length);\r\n\t\t\t\tvar len=v.length;\r\n\t\t\t\tfor (var i=0;i < len;i++){\r\n\t\t\t\t\tthis.writeBoolean(v[i]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn AbstractOutput;\r\n\t})()\r\n\r\n\r\n\t//class com.isnowfox.core.io.MarkCompressProtocol\r\n\tvar MarkCompressProtocol=(function(){\r\n\t\tfunction MarkCompressProtocol(){};\r\n\t\t__class(MarkCompressProtocol,'com.isnowfox.core.io.MarkCompressProtocol');\r\n\t\tMarkCompressProtocol.DEFAULT_CHARSET=\"utf-8\";\r\n\t\tMarkCompressProtocol.THREE_MAX=0x7fffff;\r\n\t\tMarkCompressProtocol.THREE_MIN=-8388608;\r\n\t\tMarkCompressProtocol.FIRST_WIDTH=7;\r\n\t\tMarkCompressProtocol.OTHER_WIDTH=8;\r\n\t\tMarkCompressProtocol.TYPE_NULL_OR_ZERO_OR_FALSE=0xFF-1;\r\n\t\tMarkCompressProtocol.TYPE_TRUE=0xFF-2;\r\n\t\tMarkCompressProtocol.TYPE_INT_1BYTE=0xFF-3;\r\n\t\tMarkCompressProtocol.TYPE_INT_2BYTE=0xFF-4;\r\n\t\tMarkCompressProtocol.TYPE_INT_3BYTE=0xFF-5;\r\n\t\tMarkCompressProtocol.TYPE_INT_4BYTE=0xFF-6;\r\n\t\tMarkCompressProtocol.TYPE_INT_5BYTE=0xFF-7;\r\n\t\tMarkCompressProtocol.TYPE_INT_6BYTE=0xFF-8;\r\n\t\tMarkCompressProtocol.TYPE_INT_7BYTE=0xFF-9;\r\n\t\tMarkCompressProtocol.TYPE_INT_8BYTE=0xFF-10;\r\n\t\tMarkCompressProtocol.TYPE_STRING=0xFF-11;\r\n\t\tMarkCompressProtocol.TYPE_BYTES=0xFF-12;\r\n\t\tMarkCompressProtocol.TYPE_MAX=0xFF-14;\r\n\t\tMarkCompressProtocol.TYPE_MIN=0;\r\n\t\tMarkCompressProtocol.TYPE_MINUS=4;\r\n\t\tMarkCompressProtocol.TYPE_ONE_BYTE_MIN=0-4;\r\n\t\t__static(MarkCompressProtocol,\r\n\t\t['TYPE_ONE_BYTE_MAX',function(){return this.TYPE_ONE_BYTE_MAX=MarkCompressProtocol.TYPE_MAX-4;}\r\n\t\t]);\r\n\t\treturn MarkCompressProtocol;\r\n\t})()\r\n\r\n\r\n\t//class com.isnowfox.core.io.message.MessageProtocol\r\n\tvar MessageProtocol=(function(){\r\n\t\tfunction MessageProtocol(){};\r\n\t\t__class(MessageProtocol,'com.isnowfox.core.io.message.MessageProtocol');\r\n\t\tMessageProtocol.MESSAGE_MAX=0xFFFFFF;\r\n\t\tMessageProtocol.LENGTH_BYTE_NUMS=3;\r\n\t\tMessageProtocol.HEAD_LENGTH=3;\r\n\t\tMessageProtocol.TYPE_NORMAL=0;\r\n\t\tMessageProtocol.TYPE_GZIP=1;\r\n\t\tMessageProtocol.EXPAND_MESSAGE_TYPE=0;\r\n\t\t__static(MessageProtocol,\r\n\t\t['TYPE_OR_ID_MAX',function(){return this.TYPE_OR_ID_MAX=MarkCompressProtocol.TYPE_ONE_BYTE_MAX;}\r\n\t\t]);\r\n\t\treturn MessageProtocol;\r\n\t})()\r\n\r\n\r\n\t//class com.isnowfox.core.io.Utils\r\n\tvar Utils=(function(){\r\n\t\tfunction Utils(){};\r\n\t\t__class(Utils,'com.isnowfox.core.io.Utils');\r\n\t\tUtils.putThree=function(out,v){\r\n\t\t\tif (out.endian==\"bigEndian\"){\r\n\t\t\t\tout.writeByte(v >>> 16);\r\n\t\t\t\tout.writeByte((v >>> 8));\r\n\t\t\t\tout.writeByte((v >>> 0));\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tout.writeByte(v >>> 0);\r\n\t\t\t\tout.writeByte((v >>> 8));\r\n\t\t\t\tout.writeByte((v >>> 16));\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tUtils.getThree=function(in0){\r\n\t\t\tvar ch1=0;\r\n\t\t\tvar ch2=0;\r\n\t\t\tvar ch3=0;\r\n\t\t\tif (in0.endian==\"bigEndian\"){\r\n\t\t\t\tch1=in0.getUint8();\r\n\t\t\t\tch2=in0.getUint8();\r\n\t\t\t\tch3=in0.getUint8();\r\n\t\t\t\treturn ((ch1 << 16)+(ch2 << 8)+(ch3 << 0));\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tch1=in0.getUint8();\r\n\t\t\t\tch2=in0.getUint8();\r\n\t\t\t\tch3=in0.getUint8();\r\n\t\t\t\treturn ((ch1 << 0)+(ch2 << 8)+(ch3 << 16));\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn Utils;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*本地化管理器\r\n\t*@auther zuoge85@qq.com\r\n\t*@version Created by：16/5/1 21:18\r\n\t*/\r\n\t//class com.isnowfox.core.locale.Locale\r\n\tvar Locale=(function(){\r\n\t\tfunction Locale(language){\r\n\t\t\tthis.language=null;\r\n\t\t\tthis.dict=new Dictionary();\r\n\t\t\t(language===void 0)&& (language=\"zh-CN\");\r\n\t\t\tthis.language=language;\r\n\t\t}\r\n\r\n\t\t__class(Locale,'com.isnowfox.core.locale.Locale');\r\n\t\tvar __proto=Locale.prototype;\r\n\t\t__proto.init=function(json){\r\n\t\t\tfor (var key in json){\r\n\t\t\t\tthis.dict[key]=json[key];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__proto.get=function(key){\r\n\t\t\treturn this.dict[key];\r\n\t\t}\r\n\r\n\t\t/**Formats a String in .Net-style,with curly braces (\"{0}\"). Does not support any\r\n\t\t*number formatting options yet. */\r\n\t\t__proto.format=function(key,__args){\r\n\t\t\tvar args=[];for(var i=1,sz=arguments.length;i<sz;i++)args.push(arguments[i]);\r\n\t\t\tvar value=this.dict[key];\r\n\t\t\tif (value==null){\r\n\t\t\t\tvalue=key;\r\n\t\t\t\tconsole.log(\"未找到国际化字符串key:\",key,\"直接使用key 作为value\");\r\n\t\t\t}\r\n\t\t\treturn StringUtils.format(value,args);\r\n\t\t}\r\n\r\n\t\treturn Locale;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*@author zuoge85@gmail.com on 16/9/23.\r\n\t*/\r\n\t//class com.isnowfox.core.test.AssertUtils\r\n\tvar AssertUtils=(function(){\r\n\t\tfunction AssertUtils(){};\r\n\t\t__class(AssertUtils,'com.isnowfox.core.test.AssertUtils');\r\n\t\tAssertUtils.assertNotNull=function(obj){\r\n\t\t\tif (obj===null){\r\n\t\t\t\tAssertUtils.fail(\"obj isNull\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tAssertUtils.assertNull=function(obj){\r\n\t\t\tif (obj!==null){\r\n\t\t\t\tAssertUtils.fail(StringUtils.format(\"obj:{0} is not null\",obj));\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tAssertUtils.assertEquals=function(obj0,obj1){\r\n\t\t\tif (obj0 !=obj1 && (!(isNaN(obj0)&& isNaN(obj1)))){\r\n\t\t\t\tAssertUtils.fail(StringUtils.format(\"obj0:{0} is not equal to obj:{1}\",obj0,obj1));\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tAssertUtils.assertNotEquals=function(obj0,obj1){\r\n\t\t\tif (obj0==obj1){\r\n\t\t\t\tAssertUtils.fail(StringUtils.format(\"obj0:{0} is equal to obj:{1}\",obj0,obj1));\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tAssertUtils.assertTrue=function(obj){\r\n\t\t\tif (!obj){\r\n\t\t\t\tAssertUtils.fail(StringUtils.format(\"obj0:{0} is not equal false\",obj));\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tAssertUtils.assertFalse=function(obj){\r\n\t\t\tif (obj){\r\n\t\t\t\tAssertUtils.fail(StringUtils.format(\"obj0:{0} is equal true\",obj));\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tAssertUtils.fail=function(message){\r\n\t\t\tConsole.log(message);\r\n\t\t\tthrow new AssertError(message);\r\n\t\t}\r\n\r\n\t\treturn AssertUtils;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*@author zuoge85@gmail.com on 16/9/23.\r\n\t*/\r\n\t//class com.isnowfox.core.utils.StringUtils\r\n\tvar StringUtils=(function(){\r\n\t\tfunction StringUtils(){};\r\n\t\t__class(StringUtils,'com.isnowfox.core.utils.StringUtils');\r\n\t\tStringUtils.format=function(format,__args){\r\n\t\t\tvar args=[];for(var i=1,sz=arguments.length;i<sz;i++)args.push(arguments[i]);\r\n\t\t\tfor (var i=0;i<args.length;++i)\r\n\t\t\tformat=format.replace(new RegExp(\"\\\\{\"+i+\"\\\\}\",\"g\"),args[i]);\r\n\t\t\treturn format;\r\n\t\t}\r\n\r\n\t\tStringUtils.beginsWith=function(input,prefix){\r\n\t\t\treturn (prefix==input.substring(0,prefix.length));\r\n\t\t}\r\n\r\n\t\treturn StringUtils;\r\n\t})()\r\n\r\n\r\n\t//class GameMain\r\n\tvar GameMain=(function(){\r\n\t\tfunction GameMain(){\r\n\t\t\tthis.isResComplete=false;\r\n\t\t\tthis.isNetComplete=false;\r\n\t\t\tthis.isGeolocationComplete=false;\r\n\t\t\tthis._profile=null;\r\n\t\t\tGameMain.current=this;\r\n\t\t\tLaya.init(Browser.width,Browser.height,WebGL);\r\n\t\t\tconsole.log(\"Browser.clientWidth\",Browser.clientWidth,\"Browser.clientHeight\",Browser.clientHeight);\r\n\t\t\tconsole.log(\"Browser.width\",Browser.width,\"Browser.height\",Browser.height);\r\n\t\t\tconsole.log(\"Browser.pixelRatio\",Browser.pixelRatio);\r\n\t\t\tconsole.log(\"Browser.soundType\",Browser.soundType);\r\n\t\t\tLaya.stage.alignH=\"left\";\r\n\t\t\tLaya.stage.alignV=\"top\";\r\n\t\t\tLaya.stage.scaleMode=\"full\";\r\n\t\t\tLaya.stage.screenMode=\"horizontal\";\r\n\t\t\tView.regComponent(\"Sprite\",Sprite);\r\n\t\t\tvar gameInit=window.gameInit;\r\n\t\t\tif (gameInit){\r\n\t\t\t\tgameInit(this,this.init);\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tthis.init();\r\n\t\t\t}\r\n\t\t\tLaya.stage.on(\"resize\",this,this.onResize);\r\n\t\t}\r\n\r\n\t\t__class(GameMain,'GameMain');\r\n\t\tvar __proto=GameMain.prototype;\r\n\t\t__proto.onResize=function(e){\r\n\t\t\tvar width=Laya.stage.width;\r\n\t\t\tvar height=Laya.stage.height;\r\n\t\t\tConsole.log(\"onResize:{0},{1}\",width,height);\r\n\t\t}\r\n\r\n\t\t__proto.init=function(profile){\r\n\t\t\t(profile===void 0)&& (profile=\"bj\");\r\n\t\t\tthis._profile=profile;\r\n\t\t\tconsole.log(this);\r\n\t\t\tUiManager.instance.init();\r\n\t\t\tGlobalResource.instance.init();\r\n\t\t\tLaya.loader.load([\r\n\t\t\t\"ui/loading/bg.jpg\",\r\n\t\t\t\"ui/loading/progress.png\",\r\n\t\t\t\"ui/loading/progress$bar.png\"],Handler.create(this,this.startGame));\r\n\t\t\tConsole.log(\"init end\");\r\n\t\t}\r\n\r\n\t\t__proto.startGame=function(){\r\n\t\t\tvar _$this=this;\r\n\t\t\tConsole.log(\"startGame\");\r\n\t\t\tthis.isResComplete=false;\r\n\t\t\tthis.isNetComplete=false;\r\n\t\t\tthis.isGeolocationComplete=false;\r\n\t\t\tDialog1.closeAll();\r\n\t\t\tvar serverUrl=window.serverUrl;\r\n\t\t\tif (!serverUrl){\r\n\t\t\t\tserverUrl=\"ws://103.213.249.247:8010/g\";\r\n\t\t\t}\r\n\t\t\tNet.instance.init(serverUrl,function(){\r\n\t\t\t\tConsole.log(\"onConnect\");\r\n\t\t\t\t_$this.onConnect();\r\n\t\t\t});\r\n\t\t\tGlobalResource.instance.initOther(\r\n\t\t\tHandler.create(this,this.onGlobalResourceComplete),\r\n\t\t\tHandler.create(this,this.onGlobalResourceProgress,null,false));\r\n\t\t\tif (navigator&& navigator.geolocation){\r\n\t\t\t\tnavigator.geolocation.getCurrentPosition(this.updateCordovaGeoPosition.bind(this),this.onGeoError.bind(this));\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tGeolocation.enableHighAccuracy=true;\r\n\t\t\t\tvar successHandler=new Handler(this,this.updateGeoPosition);\r\n\t\t\t\tvar errorHandler=new Handler(this,this.onGeoError);\r\n\t\t\t\tGeolocation.getCurrentPosition(successHandler,errorHandler);\r\n\t\t\t}\r\n\t\t\tAudioManager.instance.playStartBgm();\r\n\t\t\tLoading.instance.show();\r\n\t\t\tCordovaManager.instance.init();\r\n\t\t}\r\n\r\n\t\t__proto.onGlobalResourceProgress=function(progress){\r\n\t\t\tConsole.log(\"onGlobalResourceProgress:{0}\",progress);\r\n\t\t\tLoading.instance.progress=progress;\r\n\t\t}\r\n\r\n\t\t__proto.updateCordovaGeoPosition=function(p){\r\n\t\t\tvar geo=new GeolocationInfo();\r\n\t\t\tgeo.setPosition(p);\r\n\t\t\tUserManager.instance.updateGeo(geo);\r\n\t\t}\r\n\r\n\t\t// 更新设备位置\r\n\t\t__proto.updateGeoPosition=function(p){\r\n\t\t\tUserManager.instance.updateGeo(p);\r\n\t\t}\r\n\r\n\t\t// goLoginScene();\r\n\t\t__proto.onGeoError=function(e){\r\n\t\t\tconsole.log('onGeoError code: '+e.code+'\\n'+'message: '+e.message+'\\n');\r\n\t\t\tif (e.code==3){\r\n\t\t\t\tconsole.log(\"GEO:获取位置超时\",e)\r\n\t\t\t}\r\n\t\t\telse if (e.code==2){\r\n\t\t\t\tconsole.log(\"GEO:位置不可用\",e)\r\n\t\t\t}\r\n\t\t\telse if (e.code==1){\r\n\t\t\t\tconsole.log(\"GEO:无权限\",e)\r\n\t\t\t}\r\n\t\t\tDialog.showMessage(\"获取位置失败！请打开位置权限！\");\r\n\t\t}\r\n\r\n\t\t// goLoginScene();\r\n\t\t__proto.onGlobalResourceComplete=function(){\r\n\t\t\tConsole.log(\"onGlobalResourceComplete\");\r\n\t\t\tLoading.instance.progress=1.0;\r\n\t\t\tthis.isResComplete=true;\r\n\t\t\tthis.goLoginScene();\r\n\t\t}\r\n\r\n\t\t__proto.onConnect=function(){\r\n\t\t\tConsole.log(\"onConnect\");\r\n\t\t\tthis.isNetComplete=true;\r\n\t\t\tthis.goLoginScene();\r\n\t\t}\r\n\r\n\t\t// private var uuid:String;\r\n\t\t__proto.goLoginScene=function(){\r\n\t\t\tif (this.isNetComplete && this.isResComplete){\r\n\t\t\t\tUserManager.instance.checkLogin(Handler.create(this,function(success){\r\n\t\t\t\t\tif(!success){\r\n\t\t\t\t\t\tvar res=Laya.loader.getRes(\"res/atlas/base.json\");\r\n\t\t\t\t\t\tvar testLoginScene=new LoginScene();\r\n\t\t\t\t\t\tUiManager.instance.goScene(testLoginScene);\r\n\t\t\t\t\t}\r\n\t\t\t\t}));\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// }\r\n\t\t__proto.restart=function(){\r\n\t\t\tthis.startGame();\r\n\t\t}\r\n\r\n\t\t__proto.quit=function(){\r\n\t\t\tDialog.confirm(\"是否退出游戏\",Handler.create(this,function(){\r\n\t\t\t\tif(navigator && navigator.app){navigator.app.exitApp();}\r\n\t\t\t\t\t}));\r\n\t\t}\r\n\r\n\t\t__getset(0,__proto,'profile',function(){\r\n\t\t\treturn this._profile;\r\n\t\t});\r\n\r\n\t\tGameMain.current=null\r\n\t\treturn GameMain;\r\n\t})()\r\n\r\n\r\n\t//class LayaUISample\r\n\tvar LayaUISample=(function(){\r\n\t\tfunction LayaUISample(){\r\n\t\t\tnew GameMain();\r\n\t\t}\r\n\r\n\t\t__class(LayaUISample,'LayaUISample');\r\n\t\treturn LayaUISample;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*@author zuoge85@gmail.com on 2016/11/24.\r\n\t*/\r\n\t//class mj.GameObserver\r\n\tvar GameObserver=(function(){\r\n\t\tfunction GameObserver(){}\r\n\t\t__class(GameObserver,'mj.GameObserver');\r\n\t\tvar __proto=GameObserver.prototype;\r\n\t\t__proto.onPaiOut=function(sex,pai){\r\n\t\t\tAudioManager.paiOut(sex,pai);\r\n\t\t}\r\n\r\n\t\t__proto.onPaiClick=function(pai){\r\n\t\t\tAudioManager.paiClick();\r\n\t\t}\r\n\r\n\t\t__proto.onGang=function(sex){\r\n\t\t\tAudioManager.gang(sex);\r\n\t\t}\r\n\r\n\t\t__proto.onPeng=function(sex){\r\n\t\t\tAudioManager.peng(sex);\r\n\t\t}\r\n\r\n\t\t__proto.onChi=function(sex){\r\n\t\t\tAudioManager.chi(sex);\r\n\t\t}\r\n\r\n\t\t__proto.onDealCard=function(){\r\n\t\t\tAudioManager.dealCard();\r\n\t\t}\r\n\r\n\t\t__proto.onButtonClick=function(){\r\n\t\t\tAudioManager.buttonClick();\r\n\t\t}\r\n\r\n\t\t__proto.onTimeupAlarm=function(){\r\n\t\t\tAudioManager.timeupAlarm();\r\n\t\t}\r\n\r\n\t\t__proto.onStopTimeupAlarm=function(){\r\n\t\t\tAudioManager.stopTimeupAlarm();\r\n\t\t}\r\n\r\n\t\t__proto.onEnter=function(){\r\n\t\t\tAudioManager.enter();\r\n\t\t}\r\n\r\n\t\treturn GameObserver;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*@author zuoge85@gmail.com on 16/10/5.\r\n\t*/\r\n\t//class mj.GlobalResource\r\n\tvar GlobalResource=(function(){\r\n\t\tfunction GlobalResource(){\r\n\t\t\tthis.locale=new Locale();\r\n\t\t\tif (GlobalResource.instance !=null){\r\n\t\t\t\tthrow new SingletonError(\"UserManager 是单例模式\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__class(GlobalResource,'mj.GlobalResource');\r\n\t\tvar __proto=GlobalResource.prototype;\r\n\t\t__proto.init=function(){\r\n\t\t\tthis.locale.init(GlobalResource.localeJson);\r\n\t\t}\r\n\r\n\t\t__proto.initOther=function(complete,progress){\r\n\t\t\tvar assets=[];\r\n\t\t\tassets.push({\r\n\t\t\t\turl:\"res/atlas/base.json\",\r\n\t\t\t\ttype:\"atlas\"\r\n\t\t\t});\r\n\t\t\tassets.push({\r\n\t\t\t\turl:\"res/atlas/ui/home.json\",\r\n\t\t\t\ttype:\"atlas\"\r\n\t\t\t});\r\n\t\t\tassets.push({\r\n\t\t\t\turl:\"res/atlas/ui/game.json\",\r\n\t\t\t\ttype:\"atlas\"\r\n\t\t\t});\r\n\t\t\tassets.push({\r\n\t\t\t\turl:\"res/atlas/base/number/lost.json\",\r\n\t\t\t\ttype:\"atlas\"\r\n\t\t\t});\r\n\t\t\tassets.push({\r\n\t\t\t\turl:\"res/atlas/base/number/time.json\",\r\n\t\t\t\ttype:\"atlas\"\r\n\t\t\t});\r\n\t\t\tassets.push({\r\n\t\t\t\turl:\"res/atlas/base/number/win.json\",\r\n\t\t\t\ttype:\"atlas\"\r\n\t\t\t});\r\n\t\t\tassets.push({\r\n\t\t\t\turl:\"res/atlas/movie/shazi.json\",\r\n\t\t\t\ttype:\"atlas\"\r\n\t\t\t});\r\n\t\t\tassets.push({\r\n\t\t\t\turl:\"res/atlas/ui/majiang.json\",\r\n\t\t\t\ttype:\"atlas\"\r\n\t\t\t});\r\n\t\t\tassets.push({\r\n\t\t\t\turl:\"res/atlas/movie/wait.json\",\r\n\t\t\t\ttype:\"atlas\"\r\n\t\t\t});\r\n\t\t\tLaya.loader.load(assets,complete,progress);\r\n\t\t}\r\n\r\n\t\t__static(GlobalResource,\r\n\t\t['instance',function(){return this.instance=new GlobalResource();},'localeJson',function(){return this.localeJson={\r\n\t\t\t\t\"room.alreadyCreateRoom\":\"已经创建了房间,请勿重新创建\",\r\n\t\t\t\t\"room.createRoomSuccess\":\"房间创建成功\",\r\n\t\t\t\t\"room.createRoomError\":\"房间创建失败,请重试\",\r\n\t\t\t\t\"room.errorRoomCheckId\":\"不存在的房间!\",\r\n\t\t\t\t\"room.full\":\"房间满了\",\r\n\t\t\t\t\"room.noGold\":\"房卡不够创建房间\",\r\n\t\t\t\t\"room.alreadyExitRoom\":\"已经退出房间!\",\r\n\t\t\t\t\"room.alreadyDelRoom\":\"已经解散房间!\",\r\n\t\t\t\t\"room.delRoom\":\"房间被解散!\",\r\n\t\t\t\t\"room.cannotExitRoom\":\"已经开始，不能退出！!\",\r\n\t\t\t\t\"room.cannotDelRoom\":\"已经开始，不能解散！!\",\r\n\t\t\t\t\"room.notEnoughUser\":\"在线人数不够，不能开始！!\",\r\n\t\t\t\t\"room.endRoom\":\"游戏结束\",\r\n\t\t\t\t\"error\":\"{0}\"\r\n\t\t};}\r\n\r\n\t\t]);\r\n\t\treturn GlobalResource;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*@author zuoge85@gmail.com on 2016/11/24.\r\n\t*/\r\n\t//class mj.manager.AudioManager\r\n\tvar AudioManager=(function(){\r\n\t\tfunction AudioManager(){\r\n\t\t\tthis.bgmSoundChannel=null;\r\n\t\t}\r\n\r\n\t\t__class(AudioManager,'mj.manager.AudioManager');\r\n\t\tvar __proto=AudioManager.prototype;\r\n\t\t__proto.playStartBgm=function(){\r\n\t\t\tif (this.bgmSoundChannel){\r\n\t\t\t\tthis.bgmSoundChannel.stop();\r\n\t\t\t}\r\n\t\t\tthis.bgmSoundChannel=SoundManager.playMusic(\"audio/bgm2\"+\".mp3\",0);\r\n\t\t}\r\n\r\n\t\t__proto.playGame=function(){\r\n\t\t\tif (this.bgmSoundChannel){\r\n\t\t\t\tthis.bgmSoundChannel.stop();\r\n\t\t\t}\r\n\t\t\tthis.bgmSoundChannel=SoundManager.playMusic(\"audio/bgm1\"+\".mp3\",0);\r\n\t\t}\r\n\r\n\t\tAudioManager.getYinxiaoVolume=function(){\r\n\t\t\treturn SoundManager.soundVolume;\r\n\t\t}\r\n\r\n\t\tAudioManager.getYinyueVolume=function(){\r\n\t\t\treturn SoundManager.musicVolume;\r\n\t\t}\r\n\r\n\t\tAudioManager.changeYinxiao=function(number){\r\n\t\t\tSoundManager.soundMuted=true;\r\n\t\t\tSoundManager.soundVolume=number;\r\n\t\t\tSoundManager.soundMuted=false;\r\n\t\t}\r\n\r\n\t\tAudioManager.changeYinyue=function(number){\r\n\t\t\tSoundManager.musicMuted=true;\r\n\t\t\tSoundManager.musicVolume=number;\r\n\t\t\tSoundManager.musicMuted=false;\r\n\t\t}\r\n\r\n\t\tAudioManager.changeYinxiaoMuted=function(selected){\r\n\t\t\tSoundManager.soundMuted=selected;\r\n\t\t}\r\n\r\n\t\tAudioManager.changeYinyueMuted=function(selected){\r\n\t\t\tSoundManager.musicMuted=selected;\r\n\t\t}\r\n\r\n\t\tAudioManager.getYinxiaoMuted=function(){\r\n\t\t\treturn SoundManager.soundMuted;\r\n\t\t}\r\n\r\n\t\tAudioManager.getYinyueMuted=function(){\r\n\t\t\treturn SoundManager.musicMuted;\r\n\t\t}\r\n\r\n\t\tAudioManager.paiOut=function(sex,pai){\r\n\t\t\tvar sexStr=sex==0 ? \"woman\" :\"man\";\r\n\t\t\tAudioManager.play(\"audio/pu_\"+sexStr+\"/pai_\"+pai);\r\n\t\t\tAudioManager.play(\"audio/common/card_out\");\r\n\t\t}\r\n\r\n\t\tAudioManager.paiClick=function(){\r\n\t\t\tAudioManager.play(\"audio/common/card_click\");\r\n\t\t}\r\n\r\n\t\tAudioManager.dealCard=function(){\r\n\t\t\tAudioManager.play(\"audio/common/deal_card\");\r\n\t\t}\r\n\r\n\t\tAudioManager.enter=function(){\r\n\t\t\tAudioManager.play(\"audio/common/enter\");\r\n\t\t}\r\n\r\n\t\tAudioManager.win=function(sex,fangPaoIndex,fan){\r\n\t\t\tAudioManager.play(\"audio/common/win\");\r\n\t\t\tvar sexStr=sex==0 ? \"woman\" :\"man\";\r\n\t\t\tif (fan==1){\r\n\t\t\t\tAudioManager.play(\"audio/pu_\"+sexStr+\"/hu_xiaohu\");\r\n\t\t\t}\r\n\t\t\telse if (fan > 8){\r\n\t\t\t\tAudioManager.play(\"audio/pu_\"+sexStr+\"/hu_da\"+(LayaUtils.random(2)+1));\r\n\t\t\t}\r\n\t\t\telse if (fangPaoIndex !=-1){\r\n\t\t\t\tAudioManager.play(\"audio/pu_\"+sexStr+\"/hu_pao\"+(LayaUtils.random(3)+1));\r\n\t\t\t}\r\n\t\t\telse if (fan > 1 && fangPaoIndex==-1){\r\n\t\t\t\tAudioManager.play(\"audio/pu_\"+sexStr+\"/hu_zimo\"+(LayaUtils.random(2)+1));\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tAudioManager.play(\"audio/pu_\"+sexStr+\"/hu_\"+(LayaUtils.random(3)+1));\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tAudioManager.liuJu=function(){\r\n\t\t\tAudioManager.play(\"audio/common/liuju\");\r\n\t\t}\r\n\r\n\t\tAudioManager.lose=function(){\r\n\t\t\tAudioManager.play(\"audio/common/lose\");\r\n\t\t}\r\n\r\n\t\tAudioManager.stopTimeupAlarm=function(){\r\n\t\t\tif (AudioManager.isTimeupAlarmSoundChannel){\r\n\t\t\t\tAudioManager.isTimeupAlarmSoundChannel.stop();\r\n\t\t\t\tAudioManager.isTimeupAlarmSoundChannel=null;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tAudioManager.timeupAlarm=function(){\r\n\t\t\tif (AudioManager.isTimeupAlarmSoundChannel){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tAudioManager.isTimeupAlarmSoundChannel=AudioManager.play(\"audio/common/timeup_alarm\",Handler.create(null,function(){\r\n\t\t\t\tAudioManager.isTimeupAlarmSoundChannel=null;\r\n\t\t\t}));\r\n\t\t}\r\n\r\n\t\tAudioManager.buttonClick=function(){\r\n\t\t\tAudioManager.play(\"audio/common/button_click\");\r\n\t\t}\r\n\r\n\t\tAudioManager.play=function(url,complete){\r\n\t\t\treturn SoundManager.playSound(url+\".mp3\",1,complete);\r\n\t\t}\r\n\r\n\t\tAudioManager.gang=function(sex){\r\n\t\t\tAudioManager.playOpt(\"gang\",sex,3);\r\n\t\t}\r\n\r\n\t\tAudioManager.peng=function(sex){\r\n\t\t\tAudioManager.playOpt(\"peng\",sex,5);\r\n\t\t}\r\n\r\n\t\tAudioManager.chi=function(sex){\r\n\t\t\tAudioManager.playOpt(\"chi\",sex,4);\r\n\t\t}\r\n\r\n\t\tAudioManager.playOpt=function(type,sex,nums){\r\n\t\t\tvar sexStr=sex==0 ? \"woman\" :\"man\";\r\n\t\t\tAudioManager.play(\"audio/pu_\"+sexStr+\"/\"+type+(LayaUtils.random(nums)+1));\r\n\t\t}\r\n\r\n\t\tAudioManager.TYPE=\".mp3\";\r\n\t\tAudioManager.isTimeupAlarmSoundChannel=null\r\n\t\t__static(AudioManager,\r\n\t\t['instance',function(){return this.instance=new AudioManager();}\r\n\t\t]);\r\n\t\treturn AudioManager;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*@author zuoge85@gmail.com on 2017/1/31.\r\n\t*/\r\n\t//class mj.manager.CordovaManager\r\n\tvar CordovaManager=(function(){\r\n\t\tfunction CordovaManager(){\r\n\t\t\tthis.isAudioMuted=false;\r\n\t\t\tif (CordovaManager.instance !=null){\r\n\t\t\t\tthrow new SingletonError(\"GameManager 是单例模式\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__class(CordovaManager,'mj.manager.CordovaManager');\r\n\t\tvar __proto=CordovaManager.prototype;\r\n\t\t__proto.init=function(){\r\n\t\t\tif (navigator&&navigator.splashscreen){\r\n\t\t\t\tif (StatusBar){\r\n\t\t\t\t\tStatusBar.hide();\r\n\t\t\t\t}\r\n\t\t\t\tthis.initSplash();\r\n\t\t\t\tthis.initCordova();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__proto.initSplash=function(){\r\n\t\t\tLaya.timer.frameOnce(30,this,onLoadingDisplay);\r\n\t\t\tfunction onLoadingDisplay (){\r\n\t\t\t\tnavigator.splashscreen.hide();;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__proto.initCordova=function(){\r\n\t\t\tdocument.addEventListener(\"pause\",this.onPause.bind(this),false);\r\n\t\t\tdocument.addEventListener(\"resume\",this.onResume.bind(this),false);\r\n\t\t\tdocument.addEventListener(\"backbutton\",this.onBackKeyDown.bind(this),false);\r\n\t\t}\r\n\r\n\t\t__proto.onBackKeyDown=function(e){\r\n\t\t\tvar currentScene=UiManager.instance.currentScene;\r\n\t\t\tif (Dialog1.manager.modalLayer.numChildren){\r\n\t\t\t\tDialog1.closeAll();\r\n\t\t\t}\r\n\t\t\telse if (currentScene instanceof GameTableScene){\r\n\t\t\t\t(currentScene).onBack();\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tGameMain.current.quit();\r\n\t\t\t}\r\n\t\t\te.preventDefault();\r\n\t\t}\r\n\r\n\t\t__proto.onPause=function(){\r\n\t\t\tthis.isAudioMuted=SoundManager.muted;\r\n\t\t\tif (!this.isAudioMuted){\r\n\t\t\t\tSoundManager.muted=true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__proto.onResume=function(){\r\n\t\t\tSoundManager.muted=this.isAudioMuted;\r\n\t\t\tSoundManager.musicMuted=!!SoundManager.musicMuted;\r\n\t\t\tSoundManager.soundMuted=!!SoundManager.soundMuted;\r\n\t\t}\r\n\r\n\t\t__static(CordovaManager,\r\n\t\t['instance',function(){return this.instance=new CordovaManager();}\r\n\t\t]);\r\n\t\treturn CordovaManager;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*@author zuoge85@gmail.com on 16/10/3.\r\n\t*/\r\n\t//class mj.manager.GameManager\r\n\tvar GameManager=(function(){\r\n\t\tfunction GameManager(){\r\n\t\t\tthis._gameRoomInfo=null;\r\n\t\t\tthis._gameTableScene=null;\r\n\t\t\tthis._isMyCreate=false;\r\n\t\t\tthis._myLocationIndex=-1;\r\n\t\t\tthis._indexMap=[];\r\n\t\t\tthis._designIndexMap=[];\r\n\t\t\tthis._huiEr=null;\r\n\t\t\tthis.observer=null;\r\n\t\t\tthis.chapter=null;\r\n\t\t\tthis.isOut=false;\r\n\t\t\tthis.isOptOut=false;\r\n\t\t\tif (GameManager.instance !=null){\r\n\t\t\t\tthrow new SingletonError(\"GameManager 是单例模式\");\r\n\t\t\t}\r\n\t\t\tthis.observer=new GameObserver();\r\n\t\t}\r\n\r\n\t\t__class(GameManager,'mj.manager.GameManager');\r\n\t\tvar __proto=GameManager.prototype;\r\n\t\t__proto.isMyCreate=function(){\r\n\t\t\tif(this._gameRoomInfo==null){\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\treturn this._gameRoomInfo.createUserId==UserManager.instance.user.id;\r\n\t\t}\r\n\r\n\t\t__proto.goGame=function(gameRoomInfo){\r\n\t\t\tvar chapter=gameRoomInfo.chapter;\r\n\t\t\tthis.chapter=chapter;\r\n\t\t\tAudioManager.instance.playGame();\r\n\t\t\tthis._gameRoomInfo=gameRoomInfo;\r\n\t\t\tUserManager.instance.joinRoomEnd();\r\n\t\t\tthis._isMyCreate=this.isMyCreate();\r\n\t\t\tthis._gameTableScene=new GameTableScene(this._isMyCreate,this.observer);\r\n\t\t\tUiManager.instance.goScene(this._gameTableScene);\r\n\t\t\tthis._gameTableScene.update(gameRoomInfo);\r\n\t\t\tvar roomCheckId=mj.manager.GameManager.instance.roomInfo().roomCheckId;\r\n\t\t\tif(window.initInviteUser)window.initInviteUser(roomCheckId);;\r\n\t\t\tvar i=0,j=0;\r\n\t\t\tvar userInfo;\r\n\t\t\tfor (i=0;i < gameRoomInfo.sceneUser.length;i++){\r\n\t\t\t\tuserInfo=gameRoomInfo.sceneUser[i];\r\n\t\t\t\tif (userInfo.userId==UserManager.instance.user.id){\r\n\t\t\t\t\tthis._myLocationIndex=userInfo.locationIndex;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.initIndexMap();\r\n\t\t\tfor (i=0;i < gameRoomInfo.sceneUser.length;i++){\r\n\t\t\t\tthis.handlerUserInfo(gameRoomInfo.sceneUser[i]);\r\n\t\t\t}\r\n\t\t\tif (chapter){\r\n\t\t\t\tthis.updateChapter(chapter);\r\n\t\t\t\tthis._gameTableScene.initZhuang(chapter);\r\n\t\t\t\tif (chapter.optCpgh){\r\n\t\t\t\t\tthis.optCPGH(chapter.optCpgh);\r\n\t\t\t\t}\r\n\t\t\t\tif (chapter.optFaPai){\r\n\t\t\t\t\tthis.optFaPai(chapter.optFaPai);\r\n\t\t\t\t}\r\n\t\t\t\tif (chapter.optOut){\r\n\t\t\t\t\tthis.optOut(chapter.optOut);\r\n\t\t\t\t}\r\n\t\t\t\tif (chapter.syncOptTime){\r\n\t\t\t\t\tthis.syncOptTime(chapter.syncOptTime)\r\n\t\t\t\t}\r\n\t\t\t\tif(chapter.gameChapterEnd){\r\n\t\t\t\t\tthis.endChapter(chapter.gameChapterEnd);\r\n\t\t\t\t}\r\n\t\t\t\tif(chapter.tingPai){\r\n\t\t\t\t\tthis.tingPai(chapter.tingPai.pais);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__proto.roomInfo=function(){\r\n\t\t\treturn this._gameRoomInfo;\r\n\t\t}\r\n\r\n\t\t__proto.optCPGH=function(cpgh){\r\n\t\t\tvar pai=cpgh.pai;\r\n\t\t\tvar gang=cpgh.isGang ? pai :PaiUtils.NOT_PAI_INDEX;\r\n\t\t\tvar peng=cpgh.isPeng ? pai :PaiUtils.NOT_PAI_INDEX;\r\n\t\t\tOptDialog.showCPGH(cpgh.isHu,gang,peng,cpgh.chi,\r\n\t\t\tHandler.create(this,function(opt,value){\r\n\t\t\t\tconsole.log(opt,value);\r\n\t\t\t\tOptDialog.close();\r\n\t\t\t\tvar ret=new OperationCPGHRet();\r\n\t\t\t\tif ((value instanceof Array)){\r\n\t\t\t\t\tret.chi=value;\r\n\t\t\t\t}\r\n\t\t\t\tret.opt=opt;\r\n\t\t\t\tNet.instance.write(ret);\r\n\t\t\t},null,true));\r\n\t\t}\r\n\r\n\t\t__proto.optFaPai=function(faPai){\r\n\t\t\tvar _$this=this;\r\n\t\t\tif (faPai.hu || !ArrayUtils.isEmpty(faPai.anGang)|| !ArrayUtils.isEmpty(faPai.mingGang)){\r\n\t\t\t\tOptDialog.showFaPai(faPai.hu,faPai.anGang,faPai.mingGang,\r\n\t\t\t\tHandler.create(this,function(opt,value){\r\n\t\t\t\t\t_$this.observer.onButtonClick();\r\n\t\t\t\t\tconsole.log(opt,value);\r\n\t\t\t\t\tOptDialog.close();\r\n\t\t\t\t\tif (\"GUO\" !=opt){\r\n\t\t\t\t\t\tvar ret=new OperationFaPaiRet();\r\n\t\t\t\t\t\tret.pai=value;\r\n\t\t\t\t\t\tret.opt=opt;\r\n\t\t\t\t\t\tNet.instance.write(ret);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\t_$this.startOut(false);\r\n\t\t\t\t\t}\r\n\t\t\t\t},null,true));\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tthis.startOut(false);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__proto.optOut=function(out){\r\n\t\t\tthis.startOut(true);\r\n\t\t}\r\n\r\n\t\t__proto.startOut=function(isOptOut){\r\n\t\t\tthis.isOptOut=isOptOut;\r\n\t\t\tthis.isOut=true;\r\n\t\t\tthis._gameTableScene.isWaitOut=true;\r\n\t\t}\r\n\r\n\t\t__proto.endOut=function(){\r\n\t\t\tthis.isOut=false;\r\n\t\t\tthis._gameTableScene.isWaitOut=false;\r\n\t\t}\r\n\r\n\t\t__proto.putPai=function(pai){\r\n\t\t\tif (this.isOut){\r\n\t\t\t\tif (this.isOptOut){\r\n\t\t\t\t\tNet.instance.write(OperationOutRet.create(pai));\r\n\t\t\t\t}\r\n\t\t\t\telse{\r\n\t\t\t\t\tNet.instance.write(OperationFaPaiRet.create(\"OUT\",pai));\r\n\t\t\t\t}\r\n\t\t\t\tthis.endOut();\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__proto.startChapter=function(chapter){\r\n\t\t\tthis._huiEr=chapter.huiEr;\r\n\t\t\tthis.chapter=chapter;\r\n\t\t\tthis._gameTableScene.startChapter(chapter);\r\n\t\t}\r\n\r\n\t\t__proto.endChapter=function(msg){\r\n\t\t\tthis._gameTableScene.stopFaPai(this.chapter);\r\n\t\t\tthis._gameRoomInfo.leftChapterNums=(this.chapter.chapterNumsMax-this.chapter.chapterNums)-1;\r\n\t\t\tthis._gameRoomInfo.chapter=null;\r\n\t\t\tChapterResultDialog.showDialog(msg,this._gameRoomInfo,Handler.create(this,function(){\r\n\t\t\t\tChapterResultDialog.close();\r\n\t\t\t}));\r\n\t\t\tthis._gameTableScene.updateEndResult(msg,this._gameRoomInfo);\r\n\t\t}\r\n\r\n\t\t__proto.updateChapter=function(chapter){\r\n\t\t\tthis._huiEr=chapter.huiEr;\r\n\t\t\tthis.chapter=chapter;\r\n\t\t\tthis._gameTableScene.updateChapter(chapter);\r\n\t\t\tthis._gameTableScene.initZhuang(chapter);\r\n\t\t}\r\n\r\n\t\t__proto.syncOpt=function(msg){\r\n\t\t\tvar index=msg.index;\r\n\t\t\tvar userPlace=this.chapter.userPlace[index];\r\n\t\t\tvar sceneUser=this._gameRoomInfo.sceneUser[index];\r\n\t\t\tvar sex=sceneUser==null ? 1 :sceneUser.sex;\r\n\t\t\tvar pai=msg.pai;\r\n\t\t\tthis.endOut();\r\n\t\t\tswitch (msg.opt){\r\n\t\t\t\tcase \"OUT\":{\r\n\t\t\t\t\t\tthis._gameTableScene.hideOutMovie();\r\n\t\t\t\t\t\tthis._gameTableScene.outMovie(this.transformToDesignIndex(index),pai);\r\n\t\t\t\t\t\tGameManager.removeShouPai(userPlace,pai);\r\n\t\t\t\t\t\tthis.observer.onPaiOut(sex,pai);\r\n\t\t\t\t\t\tbreak ;\r\n\t\t\t\t\t}\r\n\t\t\t\tcase \"OUT_OK\":{\r\n\t\t\t\t\t\tuserPlace.outPai.push(pai);\r\n\t\t\t\t\t\tbreak ;\r\n\t\t\t\t\t}\r\n\t\t\t\tcase \"CHI\":{\r\n\t\t\t\t\t\tthis._gameTableScene.hideOutMovie();\r\n\t\t\t\t\t\tthis._gameTableScene.optMovie(this.transformToDesignIndex(index),\"chi\");\r\n\t\t\t\t\t\tuserPlace.chi.push.apply(userPlace.chi,msg.chi);\r\n\t\t\t\t\t\tfor (var i=0;i < msg.chi.length;i++){\r\n\t\t\t\t\t\t\tvar curPai=msg.chi[i];\r\n\t\t\t\t\t\t\tif (curPai !=pai){\r\n\t\t\t\t\t\t\t\tGameManager.removeShouPai(userPlace,curPai);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.observer.onChi(sex);\r\n\t\t\t\t\t\tbreak ;\r\n\t\t\t\t\t}\r\n\t\t\t\tcase \"PENG\":{\r\n\t\t\t\t\t\tthis._gameTableScene.hideOutMovie();\r\n\t\t\t\t\t\tthis._gameTableScene.optMovie(this.transformToDesignIndex(index),\"peng\");\r\n\t\t\t\t\t\tuserPlace.peng.push(pai);\r\n\t\t\t\t\t\tGameManager.removeShouPai(userPlace,pai);\r\n\t\t\t\t\t\tGameManager.removeShouPai(userPlace,pai);\r\n\t\t\t\t\t\tthis.observer.onPeng(sex);\r\n\t\t\t\t\t\tbreak ;\r\n\t\t\t\t\t}\r\n\t\t\t\tcase \"AN_GANG\":{\r\n\t\t\t\t\t\tthis._gameTableScene.hideOutMovie();\r\n\t\t\t\t\t\tthis._gameTableScene.optMovie(this.transformToDesignIndex(index),\"gang\");\r\n\t\t\t\t\t\tuserPlace.anGang.push(pai);\r\n\t\t\t\t\t\tGameManager.removeShouPai(userPlace,pai);\r\n\t\t\t\t\t\tGameManager.removeShouPai(userPlace,pai);\r\n\t\t\t\t\t\tGameManager.removeShouPai(userPlace,pai);\r\n\t\t\t\t\t\tGameManager.removeShouPai(userPlace,pai);\r\n\t\t\t\t\t\tthis.observer.onGang(sex);\r\n\t\t\t\t\t\tbreak ;\r\n\t\t\t\t\t}\r\n\t\t\t\tcase \"XIAO_MING_GANG\":{\r\n\t\t\t\t\t\tthis._gameTableScene.hideOutMovie();\r\n\t\t\t\t\t\tthis._gameTableScene.optMovie(this.transformToDesignIndex(index),\"gang\");\r\n\t\t\t\t\t\tuserPlace.xiaoMingGang.push(pai);\r\n\t\t\t\t\t\tGameManager.removePeng(userPlace,pai);\r\n\t\t\t\t\t\tthis.observer.onGang(sex);\r\n\t\t\t\t\t\tbreak ;\r\n\t\t\t\t\t}\r\n\t\t\t\tcase \"DA_MING_GANG\":{\r\n\t\t\t\t\t\tthis._gameTableScene.hideOutMovie();\r\n\t\t\t\t\t\tthis._gameTableScene.optMovie(this.transformToDesignIndex(index),\"gang\");\r\n\t\t\t\t\t\tuserPlace.daMingGang.push(pai);\r\n\t\t\t\t\t\tGameManager.removeShouPai(userPlace,pai);\r\n\t\t\t\t\t\tGameManager.removeShouPai(userPlace,pai);\r\n\t\t\t\t\t\tGameManager.removeShouPai(userPlace,pai);\r\n\t\t\t\t\t\tthis.observer.onGang(sex);\r\n\t\t\t\t\t\tbreak ;\r\n\t\t\t\t\t}\r\n\t\t\t\tcase \"HU\":{\r\n\t\t\t\t\t\tthis._gameTableScene.hideOutMovie();\r\n\t\t\t\t\t\tthis._gameTableScene.optMovie(this.transformToDesignIndex(index),\"hu\");\r\n\t\t\t\t\t\tbreak ;\r\n\t\t\t\t\t}\r\n\t\t\t\tcase \"FA\":{\r\n\t\t\t\t\t\tthis._gameTableScene.hideOutMovie();\r\n\t\t\t\t\t\tGameManager.addShouPai(userPlace,pai);\r\n\t\t\t\t\t\tthis.chapter.freeLength-=1;\r\n\t\t\t\t\t\tthis.observer.onDealCard();\r\n\t\t\t\t\t\tbreak ;\r\n\t\t\t\t\t}\r\n\t\t\t\tdefault :{\r\n\t\t\t\t\t\tthrow new Error(\"未知操作\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\tif (!this._gameTableScene.isWaitStart()){\r\n\t\t\t\tthis.updateChapter(this.chapter);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__proto.updateUser=function(userInfo){\r\n\t\t\tthis._gameRoomInfo.sceneUser[userInfo.locationIndex]=userInfo;\r\n\t\t\tthis.handlerUserInfo(userInfo);\r\n\t\t}\r\n\r\n\t\t__proto.otherDelRoomRet=function(isEnd,isStart){\r\n\t\t\tif (this._gameTableScene && isStart && isEnd){\r\n\t\t\t\tthis._gameTableScene.gameEnd(isEnd);\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tUiManager.instance.goMain();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__proto.exitUser=function(userId){\r\n\t\t\tfor (var i=0;i < this._gameRoomInfo.sceneUser.length;i++){\r\n\t\t\t\tvar userInfo=this._gameRoomInfo.sceneUser[i];\r\n\t\t\t\tif (userInfo.userId==userId){\r\n\t\t\t\t\tuserInfo[i]=null;\r\n\t\t\t\t\tthis._gameTableScene.delUserInfo(this._indexMap[userInfo.locationIndex]);\r\n\t\t\t\t\tthis.checkFullUser();\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__proto.handlerUserInfo=function(userInfo){\r\n\t\t\tthis._gameTableScene.updateUserInfo(this._indexMap[userInfo.locationIndex],userInfo);\r\n\t\t\tthis.checkFullUser();\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*检查是不是 人到齐了\r\n\t\t*/\r\n\t\t__proto.checkFullUser=function(){\r\n\t\t\tif (this._gameRoomInfo==null || this._gameRoomInfo.sceneUser==null || this._gameRoomInfo.sceneUser.length < 4){\r\n\t\t\t\tthis._gameTableScene.updateFullUser(false,this._isMyCreate);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tfor (var i=0;i < this._gameRoomInfo.sceneUser.length;i++){\r\n\t\t\t\tvar userInfo=this._gameRoomInfo.sceneUser[i];\r\n\t\t\t\tif (!userInfo || !userInfo.online){\r\n\t\t\t\t\tthis._gameTableScene.updateFullUser(false,this._isMyCreate);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis._gameTableScene.updateFullUser(true,this._isMyCreate);\r\n\t\t}\r\n\r\n\t\t__proto.transformToDesignIndex=function(index){\r\n\t\t\treturn this._indexMap[index];\r\n\t\t}\r\n\r\n\t\t__proto.transformToIndex=function(designIndex){\r\n\t\t\treturn this._designIndexMap[designIndex];\r\n\t\t}\r\n\r\n\t\t__proto.initIndexMap=function(){\r\n\t\t\tif (this._myLocationIndex==-1){\r\n\t\t\t\tthrow new Error(\"错误,第一次同步用户信息,却没有自己\");\r\n\t\t\t};\r\n\t\t\tvar i=0,j=0;\r\n\t\t\tfor (i=this._myLocationIndex,j=3;j >-1;i++,j--){\r\n\t\t\t\tif (i > 3){\r\n\t\t\t\t\ti=0;\r\n\t\t\t\t}\r\n\t\t\t\tthis._indexMap[i]=j;\r\n\t\t\t\tthis._designIndexMap[j]=i;\r\n\t\t\t}\r\n\t\t\tif (this._myLocationIndex==0){\r\n\t\t\t\tAssertUtils.assertTrue(this._indexMap[0]==3);\r\n\t\t\t\tAssertUtils.assertTrue(this._indexMap[1]==2);\r\n\t\t\t\tAssertUtils.assertTrue(this._indexMap[2]==1);\r\n\t\t\t\tAssertUtils.assertTrue(this._indexMap[3]==0);\r\n\t\t\t}\r\n\t\t\tif (this._myLocationIndex==3){\r\n\t\t\t\tAssertUtils.assertTrue(this._indexMap[3]==3);\r\n\t\t\t\tAssertUtils.assertTrue(this._indexMap[0]==2);\r\n\t\t\t\tAssertUtils.assertTrue(this._indexMap[1]==1);\r\n\t\t\t\tAssertUtils.assertTrue(this._indexMap[2]==0);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__proto.syncOptTime=function(msg){\r\n\t\t\tthis._gameTableScene.syncOptTime(msg.index,msg.leftTime);\r\n\t\t}\r\n\r\n\t\t__proto.offlineUser=function(index){\r\n\t\t\tif (index >-1 && index < this._gameRoomInfo.sceneUser.length){\r\n\t\t\t\tvar userInfo=this._gameRoomInfo.sceneUser[index];\r\n\t\t\t\tuserInfo.online=false;\r\n\t\t\t\tthis._gameTableScene.offlineUser(this.transformToDesignIndex(index));\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__proto.isStart=function(){\r\n\t\t\treturn this.chapter !=null;\r\n\t\t}\r\n\r\n\t\t__proto.tingPai=function(pais){\r\n\t\t\tif(this._gameTableScene){\r\n\t\t\t\tthis._gameTableScene.updateTingPai(pais);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__getset(0,__proto,'myLocationIndex',function(){\r\n\t\t\treturn this._myLocationIndex;\r\n\t\t});\r\n\r\n\t\t// 下南\r\n\t\t__getset(0,__proto,'huiEr',function(){\r\n\t\t\treturn this._huiEr;\r\n\t\t});\r\n\r\n\t\tGameManager.removePeng=function(userPlace,pai){\r\n\t\t\tvar peng=userPlace.peng;\r\n\t\t\tif (peng && peng.length > 0){\r\n\t\t\t\tvar index=peng.indexOf(pai);\r\n\t\t\t\tpeng.splice(index,1);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tGameManager.addShouPai=function(userPlace,pai){\r\n\t\t\tvar shouPai=userPlace.shouPai;\r\n\t\t\tif (shouPai && shouPai.length > 0){\r\n\t\t\t\tshouPai.push(pai);\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tuserPlace.shouPaiLen++;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tGameManager.removeShouPai=function(userPlace,pai){\r\n\t\t\tvar shouPai=userPlace.shouPai;\r\n\t\t\tif (shouPai && shouPai.length > 0){\r\n\t\t\t\tvar index=shouPai.indexOf(pai);\r\n\t\t\t\tshouPai.splice(index,1);\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tuserPlace.shouPaiLen--;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tGameManager.OPT_OUT=\"OUT\";\r\n\t\tGameManager.OPT_OUT_OK=\"OUT_OK\";\r\n\t\tGameManager.OPT_CHI=\"CHI\";\r\n\t\tGameManager.OPT_PENG=\"PENG\";\r\n\t\tGameManager.OPT_AN_GANG=\"AN_GANG\";\r\n\t\tGameManager.OPT_XIAO_MING_GANG=\"XIAO_MING_GANG\";\r\n\t\tGameManager.OPT_DA_MING_GANG=\"DA_MING_GANG\";\r\n\t\tGameManager.OPT_HU=\"HU\";\r\n\t\tGameManager.OPT_FA=\"FA\";\r\n\t\tGameManager.OPT_GUO=\"GUO\";\r\n\t\tGameManager.MY_INDEX=3;\r\n\t\t__static(GameManager,\r\n\t\t['instance',function(){return this.instance=new GameManager();}\r\n\t\t]);\r\n\t\treturn GameManager;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*ui 管理\r\n\t*@author zuoge85@gmail.com on 16/10/11.\r\n\t*/\r\n\t//class mj.manager.UiManager\r\n\tvar UiManager=(function(){\r\n\t\tfunction UiManager(){\r\n\t\t\tthis._currentScene=null;\r\n\t\t\tthis.topLayer=new Sprite();\r\n\t\t\tthis.dialogLayer=new Sprite();\r\n\t\t\tthis.maskLayer=new Sprite();\r\n\t\t\tthis.sceneLayer=new Sprite();\r\n\t\t\tthis.maskSprite=new Sprite();\r\n\t\t\tthis._sysSetting=SysSetting.create(\"\",\"\",\"\",\"\");\r\n\t\t\tif (UiManager.instance !=null){\r\n\t\t\t\tthrow new SingletonError(\"ResourceManager 是单例模式\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__class(UiManager,'mj.manager.UiManager');\r\n\t\tvar __proto=UiManager.prototype;\r\n\t\t__proto.init=function(){\r\n\t\t\tConsole.log(\"UiManager.init()\");\r\n\t\t\tLaya.stage.addChild(this.sceneLayer);\r\n\t\t\tDialog1.manager;\r\n\t\t\tLaya.stage.addChild(this.maskLayer);\r\n\t\t\tLaya.stage.addChild(this.dialogLayer);\r\n\t\t\tLaya.stage.addChild(this.topLayer);\r\n\t\t\tLaya.stage.on(\"resize\",this,this.onResize);\r\n\t\t\tthis.onResize(null);\r\n\t\t\tthis.maskSprite.on(\"click\",this,function(){\r\n\t\t\t});\r\n\t\t\tthis.maskLayer.mouseThrough=true;\r\n\t\t}\r\n\r\n\t\t__proto.onResize=function(e){\r\n\t\t\tvar width=Laya.stage.width;\r\n\t\t\tvar height=Laya.stage.height;\r\n\t\t\tthis.maskSprite.size(width,height);\r\n\t\t\tthis.maskLayer.size(width,height);\r\n\t\t\tthis.maskSprite.graphics.clear();\r\n\t\t\tthis.maskSprite.graphics.drawRect(0,0,width,height,UIConfig.popupBgColor);\r\n\t\t\tthis.maskSprite.alpha=UIConfig.popupBgAlpha;\r\n\t\t}\r\n\r\n\t\t__proto.showMask=function(){\r\n\t\t\tthis.maskLayer.addChild(this.maskSprite);\r\n\t\t\tthis.maskSprite.mouseEnabled=true;\r\n\t\t\tthis.maskSprite.mouseThrough=false;\r\n\t\t}\r\n\r\n\t\t__proto.hideMask=function(){\r\n\t\t\tthis.maskSprite.removeSelf();\r\n\t\t}\r\n\r\n\t\t__proto.goMain=function(){\r\n\t\t\tvar main=new MainScene();\r\n\t\t\tif (UserManager.instance.user){\r\n\t\t\t\tmain.update(UserManager.instance.user);\r\n\t\t\t}\r\n\t\t\tthis.goScene(main);\r\n\t\t\treturn main;\r\n\t\t}\r\n\r\n\t\t__proto.goScene=function(scene){\r\n\t\t\tLoading.instance.hide();\r\n\t\t\tif (this._currentScene){\r\n\t\t\t\tthis._currentScene.destroy();\r\n\t\t\t\tthis.sceneLayer.removeChild(this._currentScene.getDisplayObject());\r\n\t\t\t}\r\n\t\t\tDialog1.closeAll();\r\n\t\t\tthis._currentScene=scene;\r\n\t\t\tscene.init();\r\n\t\t\tthis.sceneLayer.addChild(scene.getDisplayObject());\r\n\t\t}\r\n\r\n\t\t__proto.changeSysSetting=function(msg){\r\n\t\t\tif (msg==null){\r\n\t\t\t\tmsg=SysSetting.create(\"\",\"\",\"\",\"\");\r\n\t\t\t}\r\n\t\t\tif (msg.payInfo==null){\r\n\t\t\t\tmsg.payInfo=\"暂无\"\r\n\t\t\t}\r\n\t\t\tif (msg.radio==null){\r\n\t\t\t\tmsg.radio=\"暂无\"\r\n\t\t\t}\r\n\t\t\tif (msg.agreement==null){\r\n\t\t\t\tmsg.agreement=\"暂无\"\r\n\t\t\t}\r\n\t\t\tif (msg.notice==null){\r\n\t\t\t\tmsg.notice=\"暂无\"\r\n\t\t\t}\r\n\t\t\tthis._sysSetting=msg;\r\n\t\t\tif (this.currentScene && (this.currentScene instanceof mj.scene.MainScene )){\r\n\t\t\t\t(this.currentScene).changeRadio(msg.radio);\r\n\t\t\t\t(this.currentScene).changeNewNotice();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__proto.changeRadio=function(radio){\r\n\t\t\tif (radio==null){\r\n\t\t\t\tradio=\"\";\r\n\t\t\t}\r\n\t\t\tif (this._sysSetting){\r\n\t\t\t\tthis._sysSetting.radio=radio;\r\n\t\t\t}\r\n\t\t\tif (this.currentScene && (this.currentScene instanceof mj.scene.MainScene )){\r\n\t\t\t\t(this.currentScene).changeRadio(radio);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__getset(0,__proto,'sysSetting',function(){\r\n\t\t\treturn this._sysSetting ? this._sysSetting :SysSetting.create(\"\",\"\",\"\",\"\");\r\n\t\t});\r\n\r\n\t\t__getset(0,__proto,'currentScene',function(){\r\n\t\t\treturn this._currentScene;\r\n\t\t});\r\n\r\n\t\t__static(UiManager,\r\n\t\t['instance',function(){return this.instance=new UiManager();}\r\n\t\t]);\r\n\t\treturn UiManager;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*@author zuoge85@gmail.com on 16/10/3.\r\n\t*/\r\n\t//class mj.manager.UserManager\r\n\tvar UserManager=(function(){\r\n\t\tfunction UserManager(){\r\n\t\t\tthis._user=null;\r\n\t\t\tthis._geolocationInfo=null;\r\n\t\t\tthis.checkLoginHandler=null;\r\n\t\t\tthis.createDialog=null;\r\n\t\t\tthis.joinDialog=null;\r\n\t\t\tif (UserManager.instance !=null){\r\n\t\t\t\tthrow new SingletonError(\"UserManager 是单例模式\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__class(UserManager,'mj.manager.UserManager');\r\n\t\tvar __proto=UserManager.prototype;\r\n\t\t__proto.loginHandler=function(msg){\r\n\t\t\tthis._user=new User(msg);\r\n\t\t\tvar loginToken=msg.loginToken;\r\n\t\t\tthis.setLoginToken(loginToken);\r\n\t\t\tvar mainScene=UiManager.instance.goMain();\r\n\t\t\tmainScene.update(this._user);\r\n\t\t\tif (msg.roomCheckId){\r\n\t\t\t\tthis.joinRoom(msg.roomCheckId);\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tvar roomId=UserManager.getUrlParam(\"roomId\");\r\n\t\t\t\tif (roomId){\r\n\t\t\t\t\tthis.joinRoom(roomId);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (this.checkLoginHandler){\r\n\t\t\t\tthis.checkLoginHandler.runWith([true]);\r\n\t\t\t\tthis.checkLoginHandler=null;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//返回参数值\r\n\t\t__proto.updateGeo=function(geolocationInfo){\r\n\t\t\tconsole.log(\"更新位置:\",geolocationInfo);\r\n\t\t\tthis._geolocationInfo=geolocationInfo;\r\n\t\t\tConsole.log(\"geolocationInfo:\",geolocationInfo);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*\r\n\t\t*@param handler 如果登录失败调用handler\r\n\t\t*/\r\n\t\t__proto.checkLogin=function(handler){\r\n\t\t\tvar userEncrypt=window.userEncrypt;\r\n\t\t\tvar loginToken=this.getLoginToken();\r\n\t\t\tif (loginToken || userEncrypt){\r\n\t\t\t\tvar login=this.crateLogin();\r\n\t\t\t\tif (loginToken){\r\n\t\t\t\t\tlogin.openId=loginToken;\r\n\t\t\t\t\tlogin.type=\"TOKEN\";\r\n\t\t\t\t}\r\n\t\t\t\telse{\r\n\t\t\t\t\tlogin.code=userEncrypt;\r\n\t\t\t\t\tlogin.type=\"WEIXIN\";\r\n\t\t\t\t}\r\n\t\t\t\tWait.show(\"检查登录中！\");\r\n\t\t\t\tNet.instance.write(login);\r\n\t\t\t\tthis.checkLoginHandler=new Handler(this,function(result){\r\n\t\t\t\t\tWait.close();\r\n\t\t\t\t\thandler.runWith([result]);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\thandler.runWith([false])\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__proto.checkUserEncryptLogin=function(userEncrypt,handler){\r\n\t\t\tvar login=this.crateLogin();\r\n\t\t\tlogin.code=userEncrypt;\r\n\t\t\tlogin.type=\"WEIXIN\";\r\n\t\t\tNet.instance.write(login);\r\n\t\t\tconsole.log(\"发送登录消息:\",login);\r\n\t\t\tthis.checkLoginHandler=handler;\r\n\t\t}\r\n\r\n\t\t__proto.checkAnonymousLogin=function(handler){\r\n\t\t\tvar login=this.crateLogin();\r\n\t\t\tlogin.type=\"ANONYMOUS\";\r\n\t\t\tNet.instance.write(login);\r\n\t\t\tconsole.log(\"发送登录消息:\",login);\r\n\t\t\tthis.checkLoginHandler=handler;\r\n\t\t}\r\n\r\n\t\t__proto.checkSmsLogin=function(phone,code,handler){\r\n\t\t\tvar login=this.crateLogin();\r\n\t\t\tlogin.openId=phone;\r\n\t\t\tlogin.code=code;\r\n\t\t\tlogin.type=\"SMS\";\r\n\t\t\tNet.instance.write(login);\r\n\t\t\tthis.checkLoginHandler=handler;\r\n\t\t}\r\n\r\n\t\t__proto.loginError=function(){\r\n\t\t\tif (this.checkLoginHandler){\r\n\t\t\t\tthis.checkLoginHandler.runWith([false]);\r\n\t\t\t\tthis.checkLoginHandler=null;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__proto.showCreateDialog=function(){\r\n\t\t\tthis.createDialog=CreateOptDialog.showDialog(\r\n\t\t\tHandler.create(this,this.onCreateDialog));\r\n\t\t}\r\n\r\n\t\t__proto.onCreateDialog=function(options){\r\n\t\t\tNet.instance.write(CreateRoom.create(GameMain.current.profile,options));\r\n\t\t\tWait.show();\r\n\t\t}\r\n\r\n\t\t__proto.createRet=function(result,roomCheckId){\r\n\t\t\tWait.close();\r\n\t\t\tif (result){\r\n\t\t\t\tthis.createDialog.close();\r\n\t\t\t\tthis.createDialog=null;\r\n\t\t\t\tthis.joinRoom(roomCheckId);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__proto.crateLogin=function(){\r\n\t\t\tvar login=new Login();\r\n\t\t\tif (this.geolocationInfo){\r\n\t\t\t\tlogin.longitude=this.geolocationInfo.longitude.toString();\r\n\t\t\t\tlogin.longitude=this.geolocationInfo.latitude.toString();\r\n\t\t\t}\r\n\t\t\treturn login;\r\n\t\t}\r\n\r\n\t\t__proto.showJoinDialog=function(){\r\n\t\t\tvar _$this=this;\r\n\t\t\tthis.joinDialog=JoinRoomDialog.showDialog(function(roomCheckId){\r\n\t\t\t\t_$this.joinRoom(roomCheckId);\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t__proto.joinRoom=function(roomCheckId){\r\n\t\t\tWait.show(\"等待进入房间!\");\r\n\t\t\tNet.instance.write(JoinRoom.create(roomCheckId));\r\n\t\t}\r\n\r\n\t\t__proto.joinRet=function(result){\r\n\t\t\tif (result){\r\n\t\t\t\tConsole.log(\"等待进入游戏!\");\r\n\t\t\t\tif (this.joinDialog){\r\n\t\t\t\t\tthis.joinDialog.close();\r\n\t\t\t\t\tthis.joinDialog=null;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tWait.close();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__proto.joinRoomEnd=function(){\r\n\t\t\tWait.close();\r\n\t\t}\r\n\r\n\t\t__proto.delRoom=function(){\r\n\t\t\tDialog.confirm(\"是否解散房间？\",Handler.create(this,function(){\r\n\t\t\t\tNet.instance.write(new DelRoom());\r\n\t\t\t\tWait.show();\r\n\t\t\t}));\r\n\t\t}\r\n\r\n\t\t__proto.delVoteRoom=function(){\r\n\t\t\tDialog.confirm(\"是否发起解散房间投票？\",Handler.create(this,function(){\r\n\t\t\t\tNet.instance.write(new VoteDelStart());\r\n\t\t\t}));\r\n\t\t}\r\n\r\n\t\t// }\r\n\t\t__proto.quitRoom=function(){\r\n\t\t\tNet.instance.write(new ExitRoom());\r\n\t\t}\r\n\r\n\t\t// Wait.show();\r\n\t\t__proto.exitRoomRet=function(){\r\n\t\t\tWait.close();\r\n\t\t\tUiManager.instance.goMain();\r\n\t\t}\r\n\r\n\t\t__proto.startChapter=function(){\r\n\t\t\tNet.instance.write(new GameChapterStart());\r\n\t\t\tWait.show();\r\n\t\t}\r\n\r\n\t\t__proto.getLoginToken=function(){\r\n\t\t\tif (UserManager._loginToken !=null){\r\n\t\t\t\treturn UserManager._loginToken;\r\n\t\t\t}\r\n\t\t\treturn LocalStorage.getItem(\"$_loginToken\");\r\n\t\t}\r\n\r\n\t\t__proto.setLoginToken=function(loginToken){\r\n\t\t\tUserManager._loginToken=loginToken;\r\n\t\t\tLocalStorage.setItem(\"$_loginToken\",loginToken);\r\n\t\t}\r\n\r\n\t\t__proto.pay=function(gold){\r\n\t\t\tif (gold > 0){\r\n\t\t\t\tDialog.showMessage(\"你充值 房卡：\"+gold+\" 成功!\");\r\n\t\t\t}\r\n\t\t\tthis._user.gold+=gold;\r\n\t\t\tif (UiManager.instance.currentScene && (UiManager.instance.currentScene instanceof mj.scene.MainScene )){\r\n\t\t\t\tvar mainScene=(UiManager.instance.currentScene)\r\n\t\t\t\tmainScene.updateGold(this._user.gold);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__getset(0,__proto,'user',function(){\r\n\t\t\treturn this._user;\r\n\t\t});\r\n\r\n\t\t__getset(0,__proto,'geolocationInfo',function(){\r\n\t\t\treturn this._geolocationInfo;\r\n\t\t});\r\n\r\n\t\tUserManager.getUrlParam=function(name){\r\n\t\t\tvar reg=new RegExp(\"(^|&)\"+name+\"=([^&]*)(&|$)\");\r\n\t\t\tvar search=window.location.search;\r\n\t\t\tif (!search){\r\n\t\t\t\treturn null;\r\n\t\t\t};\r\n\t\t\tvar r=search.substr(1).match(reg);\r\n\t\t\tif (r !=null){\r\n\t\t\t\treturn unescape(r[2]);\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tUserManager.quitUser=function(){\r\n\t\t\tUserManager.clearLoginToken();\r\n\t\t\tGameMain.current.restart();\r\n\t\t}\r\n\r\n\t\tUserManager.startGame=function(){\r\n\t\t\tConsole.log(\"服务器准备就绪!\");\r\n\t\t\tNet.instance.write(new GameJoinRoom());\r\n\t\t}\r\n\r\n\t\tUserManager.clearLoginToken=function(){\r\n\t\t\tUserManager._loginToken=null;\r\n\t\t\tLocalStorage.clear();\r\n\t\t\twindow.userEncrypt=null;\r\n\t\t}\r\n\r\n\t\tUserManager.LOGIN_TOKEN_NAME=\"$_loginToken\";\r\n\t\tUserManager._loginToken=null\r\n\t\t__static(UserManager,\r\n\t\t['instance',function(){return this.instance=new UserManager();}\r\n\t\t]);\r\n\t\treturn UserManager;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*@author zuoge85@gmail.com on 2016/11/1.\r\n\t*/\r\n\t//class mj.model.PaiUtils\r\n\tvar PaiUtils=(function(){\r\n\t\tfunction PaiUtils(){}\r\n\t\t__class(PaiUtils,'mj.model.PaiUtils');\r\n\t\tPaiUtils.toString=function(pai){\r\n\t\t\tif (pai < 9){\r\n\t\t\t\treturn (pai+1)+\"筒\"\r\n\t\t\t}\r\n\t\t\telse if (pai < 18){\r\n\t\t\t\treturn (pai-8)+\"条\"\r\n\t\t\t}\r\n\t\t\telse if (pai < 27){\r\n\t\t\t\treturn (pai-17)+\"万\"\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tswitch (pai){\r\n\t\t\t\t\tcase 27:\r\n\t\t\t\t\t\treturn \"東\";\r\n\t\t\t\t\tcase 28:\r\n\t\t\t\t\t\treturn \"南\";\r\n\t\t\t\t\tcase 29:\r\n\t\t\t\t\t\treturn \"西\";\r\n\t\t\t\t\tcase 30:\r\n\t\t\t\t\t\treturn \"北\";\r\n\t\t\t\t\tcase 31:\r\n\t\t\t\t\t\treturn \"中\";\r\n\t\t\t\t\tcase 32:\r\n\t\t\t\t\t\treturn \"發\";\r\n\t\t\t\t\tcase 33:\r\n\t\t\t\t\t\treturn \"白\";\r\n\t\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\tPaiUtils.checkIsHuiEr=function(pai){\r\n\t\t\tvar huiEr=GameManager.instance.huiEr;\r\n\t\t\tif (huiEr==null || huiEr.length==0){\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tfor (var i=0;i < huiEr.length;i++){\r\n\t\t\t\tvar huierItem=huiEr[i];\r\n\t\t\t\tif (huierItem==pai){\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tPaiUtils.showPaiIcon=function(paiImage,pai){\r\n\t\t\tif (PaiUtils.checkIsHuiEr(pai)){\r\n\t\t\t\tvar huiErImage=new Image();\r\n\t\t\t\thuiErImage.skin=paiImage.skin.replace(/[0-9]+\\.png/gi,\"hun.png\");\r\n\t\t\t\tpaiImage.addChild(huiErImage);\r\n\t\t\t}\r\n\t\t\tpaiImage.skin=paiImage.skin.replace(/[0-9]+\\.png/gi,pai.toString()+\".png\");\r\n\t\t}\r\n\r\n\t\tPaiUtils.toUserPlace=function(result){\r\n\t\t\tvar m=new UserPlaceMsg();\r\n\t\t\tif (result.queTou !=mj.model.PaiUtils.NOT_PAI_INDEX){\r\n\t\t\t\tvar shouPai=[];\r\n\t\t\t\tvar i=0;\r\n\t\t\t\tvar pai=0;\r\n\t\t\t\tfor (i=0;i < result.shunZi.length;i++){\r\n\t\t\t\t\tpai=result.shunZi[i];\r\n\t\t\t\t\tshouPai.push(pai,pai+1,pai+2);\r\n\t\t\t\t}\r\n\t\t\t\tfor (i=0;i < result.keZi.length;i++){\r\n\t\t\t\t\tpai=result.keZi[i];\r\n\t\t\t\t\tshouPai.push(pai,pai,pai);\r\n\t\t\t\t}\r\n\t\t\t\tshouPai.push(result.queTou,result.queTou);\r\n\t\t\t\tm.shouPai=shouPai;\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tm.shouPai=result.shouPai;\r\n\t\t\t}\r\n\t\t\tm.anGang=result.anGang;\r\n\t\t\tm.daMingGang=result.daMingGang;\r\n\t\t\tm.xiaoMingGang=result.xiaoMingGang;\r\n\t\t\tm.chi=result.chi;\r\n\t\t\tm.peng=result.peng;\r\n\t\t\treturn m;\r\n\t\t}\r\n\r\n\t\tPaiUtils.HAS_PAI_INDEX=-2;\r\n\t\tPaiUtils.NOT_PAI_INDEX=-1;\r\n\t\treturn PaiUtils;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*@author zuoge85@gmail.com on 16/10/3.\r\n\t*/\r\n\t//class mj.model.User\r\n\tvar User=(function(){\r\n\t\tfunction User(ret){\r\n\t\t\tthis._id=0;\r\n\t\t\tthis._name=null;\r\n\t\t\tthis._openId=null;\r\n\t\t\tthis._uuid=null;\r\n\t\t\tthis._avatar=null;\r\n\t\t\tthis._sex=0;\r\n\t\t\tthis._gold=NaN;\r\n\t\t\tthis._ip=null;\r\n\t\t\tthis._avatar=ret.avatar;\r\n\t\t\tthis._id=ret.id;\r\n\t\t\tthis._name=ret.name;\r\n\t\t\tthis._openId=ret.openId;\r\n\t\t\tthis._sex=ret.sex;\r\n\t\t\tthis._uuid=ret.uuid;\r\n\t\t\tthis._gold=ret.gold;\r\n\t\t\tthis._ip=ret.ip;\r\n\t\t}\r\n\r\n\t\t__class(User,'mj.model.User');\r\n\t\tvar __proto=User.prototype;\r\n\t\t__getset(0,__proto,'ip',function(){\r\n\t\t\treturn this._ip;\r\n\t\t\t},function(value){\r\n\t\t\tthis._ip=value;\r\n\t\t});\r\n\r\n\t\t__getset(0,__proto,'gold',function(){\r\n\t\t\treturn this._gold;\r\n\t\t\t},function(value){\r\n\t\t\tthis._gold=value;\r\n\t\t});\r\n\r\n\t\t__getset(0,__proto,'sex',function(){\r\n\t\t\treturn this._sex;\r\n\t\t\t},function(value){\r\n\t\t\tthis._sex=value;\r\n\t\t});\r\n\r\n\t\t__getset(0,__proto,'openId',function(){\r\n\t\t\treturn this._openId;\r\n\t\t\t},function(value){\r\n\t\t\tthis._openId=value;\r\n\t\t});\r\n\r\n\t\t__getset(0,__proto,'name',function(){\r\n\t\t\treturn this._name;\r\n\t\t\t},function(value){\r\n\t\t\tthis._name=value;\r\n\t\t});\r\n\r\n\t\t__getset(0,__proto,'avatar',function(){\r\n\t\t\treturn this._avatar;\r\n\t\t\t},function(value){\r\n\t\t\tthis._avatar=value;\r\n\t\t});\r\n\r\n\t\t__getset(0,__proto,'uuid',function(){\r\n\t\t\treturn this._uuid;\r\n\t\t\t},function(value){\r\n\t\t\tthis._uuid=value;\r\n\t\t});\r\n\r\n\t\t__getset(0,__proto,'id',function(){\r\n\t\t\treturn this._id;\r\n\t\t\t},function(value){\r\n\t\t\tthis._id=value;\r\n\t\t});\r\n\r\n\t\treturn User;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*牌局结束\r\n\t*\r\n\t*消息处理器！\r\n\t*<b>生成器生成代码，生成后不会在覆盖!</b>\r\n\t*@author isnowfox消息生成器\r\n\t*/\r\n\t//class mj.net.handler.game.GameChapterEndHandler\r\n\tvar GameChapterEndHandler=(function(){\r\n\t\tfunction GameChapterEndHandler(){\r\n\t\t\tif(GameChapterEndHandler.instance!=null){\r\n\t\t\t\tthrow new SingletonError(\"ResourceManager 是单例模式\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__class(GameChapterEndHandler,'mj.net.handler.game.GameChapterEndHandler');\r\n\t\tvar __proto=GameChapterEndHandler.prototype;\r\n\t\tLaya.imps(__proto,{\"com.isnowfox.core.io.message.MessageHandler\":true})\r\n\t\t__proto.handler=function(msg){\r\n\t\t\treturn this.inHandler((msg));\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@return 返回true 表示需要脱离缓冲，不然这个消息的内容可能被覆盖\r\n\t\t*/\r\n\t\t__proto.inHandler=function(msg){\r\n\t\t\tGameManager.instance.endChapter(msg);\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\t__static(GameChapterEndHandler,\r\n\t\t['instance',function(){return this.instance=new GameChapterEndHandler();}\r\n\t\t]);\r\n\t\treturn GameChapterEndHandler;\r\n\t})()\r\n\r\n\r\n\t//class mj.net.handler.game.GameChapterStartRetHandler\r\n\tvar GameChapterStartRetHandler=(function(){\r\n\t\tfunction GameChapterStartRetHandler(){\r\n\t\t\tif(GameChapterStartRetHandler.instance!=null){\r\n\t\t\t\tthrow new SingletonError(\"ResourceManager 是单例模式\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__class(GameChapterStartRetHandler,'mj.net.handler.game.GameChapterStartRetHandler');\r\n\t\tvar __proto=GameChapterStartRetHandler.prototype;\r\n\t\tLaya.imps(__proto,{\"com.isnowfox.core.io.message.MessageHandler\":true})\r\n\t\t__proto.handler=function(msg){\r\n\t\t\treturn this.inHandler((msg));\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@return 返回true 表示需要脱离缓冲，不然这个消息的内容可能被覆盖\r\n\t\t*/\r\n\t\t__proto.inHandler=function(msg){\r\n\t\t\tWait.close();\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\t__static(GameChapterStartRetHandler,\r\n\t\t['instance',function(){return this.instance=new GameChapterStartRetHandler();}\r\n\t\t]);\r\n\t\treturn GameChapterStartRetHandler;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*解散了房间，房间被删除\r\n\t*\r\n\t*消息处理器！\r\n\t*<b>生成器生成代码，生成后不会在覆盖!</b>\r\n\t*@author isnowfox消息生成器\r\n\t*/\r\n\t//class mj.net.handler.game.GameDelRoomHandler\r\n\tvar GameDelRoomHandler=(function(){\r\n\t\tfunction GameDelRoomHandler(){\r\n\t\t\tif(GameDelRoomHandler.instance!=null){\r\n\t\t\t\tthrow new SingletonError(\"ResourceManager 是单例模式\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__class(GameDelRoomHandler,'mj.net.handler.game.GameDelRoomHandler');\r\n\t\tvar __proto=GameDelRoomHandler.prototype;\r\n\t\tLaya.imps(__proto,{\"com.isnowfox.core.io.message.MessageHandler\":true})\r\n\t\t__proto.handler=function(msg){\r\n\t\t\treturn this.inHandler((msg));\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@return 返回true 表示需要脱离缓冲，不然这个消息的内容可能被覆盖\r\n\t\t*/\r\n\t\t__proto.inHandler=function(msg){\r\n\t\t\tGameManager.instance.otherDelRoomRet(msg.isEnd,msg.isStart);\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\t__static(GameDelRoomHandler,\r\n\t\t['instance',function(){return this.instance=new GameDelRoomHandler();}\r\n\t\t]);\r\n\t\treturn GameDelRoomHandler;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*用户退出游戏\r\n\t*\r\n\t*消息处理器！\r\n\t*<b>生成器生成代码，生成后不会在覆盖!</b>\r\n\t*@author isnowfox消息生成器\r\n\t*/\r\n\t//class mj.net.handler.game.GameExitUserHandler\r\n\tvar GameExitUserHandler=(function(){\r\n\t\tfunction GameExitUserHandler(){\r\n\t\t\tif(GameExitUserHandler.instance!=null){\r\n\t\t\t\tthrow new SingletonError(\"ResourceManager 是单例模式\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__class(GameExitUserHandler,'mj.net.handler.game.GameExitUserHandler');\r\n\t\tvar __proto=GameExitUserHandler.prototype;\r\n\t\tLaya.imps(__proto,{\"com.isnowfox.core.io.message.MessageHandler\":true})\r\n\t\t__proto.handler=function(msg){\r\n\t\t\treturn this.inHandler((msg));\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@return 返回true 表示需要脱离缓冲，不然这个消息的内容可能被覆盖\r\n\t\t*/\r\n\t\t__proto.inHandler=function(msg){\r\n\t\t\tGameManager.instance.exitUser(msg.userId);\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\t__static(GameExitUserHandler,\r\n\t\t['instance',function(){return this.instance=new GameExitUserHandler();}\r\n\t\t]);\r\n\t\treturn GameExitUserHandler;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*同步游戏信息\r\n\t*\r\n\t*消息处理器！\r\n\t*<b>生成器生成代码，生成后不会在覆盖!</b>\r\n\t*@author isnowfox消息生成器\r\n\t*/\r\n\t//class mj.net.handler.game.GameRoomInfoHandler\r\n\tvar GameRoomInfoHandler=(function(){\r\n\t\tfunction GameRoomInfoHandler(){\r\n\t\t\tif (GameRoomInfoHandler.instance !=null){\r\n\t\t\t\tthrow new SingletonError(\"ResourceManager 是单例模式\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__class(GameRoomInfoHandler,'mj.net.handler.game.GameRoomInfoHandler');\r\n\t\tvar __proto=GameRoomInfoHandler.prototype;\r\n\t\tLaya.imps(__proto,{\"com.isnowfox.core.io.message.MessageHandler\":true})\r\n\t\t__proto.handler=function(msg){\r\n\t\t\treturn this.inHandler((msg));\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@return 返回true 表示需要脱离缓冲，不然这个消息的内容可能被覆盖\r\n\t\t*/\r\n\t\t__proto.inHandler=function(msg){\r\n\t\t\tGameManager.instance.goGame(msg);\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\t__static(GameRoomInfoHandler,\r\n\t\t['instance',function(){return this.instance=new GameRoomInfoHandler();}\r\n\t\t]);\r\n\t\treturn GameRoomInfoHandler;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*同步游戏信息\r\n\t*\r\n\t*消息处理器！\r\n\t*<b>生成器生成代码，生成后不会在覆盖!</b>\r\n\t*@author isnowfox消息生成器\r\n\t*/\r\n\t//class mj.net.handler.game.GameUserInfoHandler\r\n\tvar GameUserInfoHandler=(function(){\r\n\t\tfunction GameUserInfoHandler(){\r\n\t\t\tif(GameUserInfoHandler.instance!=null){\r\n\t\t\t\tthrow new SingletonError(\"ResourceManager 是单例模式\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__class(GameUserInfoHandler,'mj.net.handler.game.GameUserInfoHandler');\r\n\t\tvar __proto=GameUserInfoHandler.prototype;\r\n\t\tLaya.imps(__proto,{\"com.isnowfox.core.io.message.MessageHandler\":true})\r\n\t\t__proto.handler=function(msg){\r\n\t\t\treturn this.inHandler((msg));\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@return 返回true 表示需要脱离缓冲，不然这个消息的内容可能被覆盖\r\n\t\t*/\r\n\t\t__proto.inHandler=function(msg){\r\n\t\t\tGameManager.instance.updateUser(msg);\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\t__static(GameUserInfoHandler,\r\n\t\t['instance',function(){return this.instance=new GameUserInfoHandler();}\r\n\t\t]);\r\n\t\treturn GameUserInfoHandler;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*一局麻将的信息\r\n\t*\r\n\t*消息处理器！\r\n\t*<b>生成器生成代码，生成后不会在覆盖!</b>\r\n\t*@author isnowfox消息生成器\r\n\t*/\r\n\t//class mj.net.handler.game.MajiangChapterMsgHandler\r\n\tvar MajiangChapterMsgHandler=(function(){\r\n\t\tfunction MajiangChapterMsgHandler(){\r\n\t\t\tif (MajiangChapterMsgHandler.instance !=null){\r\n\t\t\t\tthrow new SingletonError(\"ResourceManager 是单例模式\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__class(MajiangChapterMsgHandler,'mj.net.handler.game.MajiangChapterMsgHandler');\r\n\t\tvar __proto=MajiangChapterMsgHandler.prototype;\r\n\t\tLaya.imps(__proto,{\"com.isnowfox.core.io.message.MessageHandler\":true})\r\n\t\t__proto.handler=function(msg){\r\n\t\t\treturn this.inHandler((msg));\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@return 返回true 表示需要脱离缓冲，不然这个消息的内容可能被覆盖\r\n\t\t*/\r\n\t\t__proto.inHandler=function(msg){\r\n\t\t\tGameManager.instance.startChapter(msg);\r\n\t\t\tWait.close();\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\t__static(MajiangChapterMsgHandler,\r\n\t\t['instance',function(){return this.instance=new MajiangChapterMsgHandler();}\r\n\t\t]);\r\n\t\treturn MajiangChapterMsgHandler;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*通知客户端\"吃碰杠胡\"\r\n\t*\r\n\t*消息处理器！\r\n\t*<b>生成器生成代码，生成后不会在覆盖!</b>\r\n\t*@author isnowfox消息生成器\r\n\t*/\r\n\t//class mj.net.handler.game.OperationCPGHHandler\r\n\tvar OperationCPGHHandler=(function(){\r\n\t\tfunction OperationCPGHHandler(){\r\n\t\t\tif(OperationCPGHHandler.instance!=null){\r\n\t\t\t\tthrow new SingletonError(\"ResourceManager 是单例模式\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__class(OperationCPGHHandler,'mj.net.handler.game.OperationCPGHHandler');\r\n\t\tvar __proto=OperationCPGHHandler.prototype;\r\n\t\tLaya.imps(__proto,{\"com.isnowfox.core.io.message.MessageHandler\":true})\r\n\t\t__proto.handler=function(msg){\r\n\t\t\treturn this.inHandler((msg));\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@return 返回true 表示需要脱离缓冲，不然这个消息的内容可能被覆盖\r\n\t\t*/\r\n\t\t__proto.inHandler=function(msg){\r\n\t\t\tGameManager.instance.optCPGH(msg);\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\t__static(OperationCPGHHandler,\r\n\t\t['instance',function(){return this.instance=new OperationCPGHHandler();}\r\n\t\t]);\r\n\t\treturn OperationCPGHHandler;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*一局麻将的信息\r\n\t*\r\n\t*消息处理器！\r\n\t*<b>生成器生成代码，生成后不会在覆盖!</b>\r\n\t*@author isnowfox消息生成器\r\n\t*/\r\n\t//class mj.net.handler.game.OperationFaPaiHandler\r\n\tvar OperationFaPaiHandler=(function(){\r\n\t\tfunction OperationFaPaiHandler(){\r\n\t\t\tif(OperationFaPaiHandler.instance!=null){\r\n\t\t\t\tthrow new SingletonError(\"ResourceManager 是单例模式\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__class(OperationFaPaiHandler,'mj.net.handler.game.OperationFaPaiHandler');\r\n\t\tvar __proto=OperationFaPaiHandler.prototype;\r\n\t\tLaya.imps(__proto,{\"com.isnowfox.core.io.message.MessageHandler\":true})\r\n\t\t__proto.handler=function(msg){\r\n\t\t\treturn this.inHandler((msg));\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@return 返回true 表示需要脱离缓冲，不然这个消息的内容可能被覆盖\r\n\t\t*/\r\n\t\t__proto.inHandler=function(msg){\r\n\t\t\tGameManager.instance.optFaPai(msg);\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\t__static(OperationFaPaiHandler,\r\n\t\t['instance',function(){return this.instance=new OperationFaPaiHandler();}\r\n\t\t]);\r\n\t\treturn OperationFaPaiHandler;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*通知用户出牌\r\n\t*\r\n\t*消息处理器！\r\n\t*<b>生成器生成代码，生成后不会在覆盖!</b>\r\n\t*@author isnowfox消息生成器\r\n\t*/\r\n\t//class mj.net.handler.game.OperationOutHandler\r\n\tvar OperationOutHandler=(function(){\r\n\t\tfunction OperationOutHandler(){\r\n\t\t\tif(OperationOutHandler.instance!=null){\r\n\t\t\t\tthrow new SingletonError(\"ResourceManager 是单例模式\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__class(OperationOutHandler,'mj.net.handler.game.OperationOutHandler');\r\n\t\tvar __proto=OperationOutHandler.prototype;\r\n\t\tLaya.imps(__proto,{\"com.isnowfox.core.io.message.MessageHandler\":true})\r\n\t\t__proto.handler=function(msg){\r\n\t\t\treturn this.inHandler((msg));\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@return 返回true 表示需要脱离缓冲，不然这个消息的内容可能被覆盖\r\n\t\t*/\r\n\t\t__proto.inHandler=function(msg){\r\n\t\t\tGameManager.instance.optOut(msg);\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\t__static(OperationOutHandler,\r\n\t\t['instance',function(){return this.instance=new OperationOutHandler();}\r\n\t\t]);\r\n\t\treturn OperationOutHandler;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*同步操作\r\n\t*OUT:打牌,CHI:吃,PENG:碰,AN_GANG:暗杠牌,XIAO_MING_GANG:暗杠牌,DA_MING_GANG:暗杠牌,HU:胡牌\r\n\t*\r\n\t*消息处理器！\r\n\t*<b>生成器生成代码，生成后不会在覆盖!</b>\r\n\t*@author isnowfox消息生成器\r\n\t*/\r\n\t//class mj.net.handler.game.SyncOptHandler\r\n\tvar SyncOptHandler=(function(){\r\n\t\tfunction SyncOptHandler(){\r\n\t\t\tif(SyncOptHandler.instance!=null){\r\n\t\t\t\tthrow new SingletonError(\"ResourceManager 是单例模式\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__class(SyncOptHandler,'mj.net.handler.game.SyncOptHandler');\r\n\t\tvar __proto=SyncOptHandler.prototype;\r\n\t\tLaya.imps(__proto,{\"com.isnowfox.core.io.message.MessageHandler\":true})\r\n\t\t__proto.handler=function(msg){\r\n\t\t\treturn this.inHandler((msg));\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@return 返回true 表示需要脱离缓冲，不然这个消息的内容可能被覆盖\r\n\t\t*/\r\n\t\t__proto.inHandler=function(msg){\r\n\t\t\tGameManager.instance.syncOpt(msg);\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\t__static(SyncOptHandler,\r\n\t\t['instance',function(){return this.instance=new SyncOptHandler();}\r\n\t\t]);\r\n\t\treturn SyncOptHandler;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*同步操作\r\n\t*\r\n\t*消息处理器！\r\n\t*<b>生成器生成代码，生成后不会在覆盖!</b>\r\n\t*@author isnowfox消息生成器\r\n\t*/\r\n\t//class mj.net.handler.game.SyncOptTimeHandler\r\n\tvar SyncOptTimeHandler=(function(){\r\n\t\tfunction SyncOptTimeHandler(){\r\n\t\t\tif(SyncOptTimeHandler.instance!=null){\r\n\t\t\t\tthrow new SingletonError(\"ResourceManager 是单例模式\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__class(SyncOptTimeHandler,'mj.net.handler.game.SyncOptTimeHandler');\r\n\t\tvar __proto=SyncOptTimeHandler.prototype;\r\n\t\tLaya.imps(__proto,{\"com.isnowfox.core.io.message.MessageHandler\":true})\r\n\t\t__proto.handler=function(msg){\r\n\t\t\treturn this.inHandler((msg));\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@return 返回true 表示需要脱离缓冲，不然这个消息的内容可能被覆盖\r\n\t\t*/\r\n\t\t__proto.inHandler=function(msg){\r\n\t\t\tGameManager.instance.syncOptTime(msg);\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\t__static(SyncOptTimeHandler,\r\n\t\t['instance',function(){return this.instance=new SyncOptTimeHandler();}\r\n\t\t]);\r\n\t\treturn SyncOptTimeHandler;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*通知用户出牌\r\n\t*\r\n\t*消息处理器！\r\n\t*<b>生成器生成代码，生成后不会在覆盖!</b>\r\n\t*@author isnowfox消息生成器\r\n\t*/\r\n\t//class mj.net.handler.game.TingPaiHandler\r\n\tvar TingPaiHandler=(function(){\r\n\t\tfunction TingPaiHandler(){\r\n\t\t\tif(TingPaiHandler.instance!=null){\r\n\t\t\t\tthrow new SingletonError(\"ResourceManager 是单例模式\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__class(TingPaiHandler,'mj.net.handler.game.TingPaiHandler');\r\n\t\tvar __proto=TingPaiHandler.prototype;\r\n\t\tLaya.imps(__proto,{\"com.isnowfox.core.io.message.MessageHandler\":true})\r\n\t\t__proto.handler=function(msg){\r\n\t\t\treturn this.inHandler((msg));\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@return 返回true 表示需要脱离缓冲，不然这个消息的内容可能被覆盖\r\n\t\t*/\r\n\t\t__proto.inHandler=function(msg){\r\n\t\t\tGameManager.instance.tingPai(msg.pais);\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\t__static(TingPaiHandler,\r\n\t\t['instance',function(){return this.instance=new TingPaiHandler();}\r\n\t\t]);\r\n\t\treturn TingPaiHandler;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*用户离线\r\n\t*\r\n\t*消息处理器！\r\n\t*<b>生成器生成代码，生成后不会在覆盖!</b>\r\n\t*@author isnowfox消息生成器\r\n\t*/\r\n\t//class mj.net.handler.game.UserOfflineHandler\r\n\tvar UserOfflineHandler=(function(){\r\n\t\tfunction UserOfflineHandler(){\r\n\t\t\tif(UserOfflineHandler.instance!=null){\r\n\t\t\t\tthrow new SingletonError(\"ResourceManager 是单例模式\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__class(UserOfflineHandler,'mj.net.handler.game.UserOfflineHandler');\r\n\t\tvar __proto=UserOfflineHandler.prototype;\r\n\t\tLaya.imps(__proto,{\"com.isnowfox.core.io.message.MessageHandler\":true})\r\n\t\t__proto.handler=function(msg){\r\n\t\t\treturn this.inHandler((msg));\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@return 返回true 表示需要脱离缓冲，不然这个消息的内容可能被覆盖\r\n\t\t*/\r\n\t\t__proto.inHandler=function(msg){\r\n\t\t\tGameManager.instance.offlineUser(msg.index);\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\t__static(UserOfflineHandler,\r\n\t\t['instance',function(){return this.instance=new UserOfflineHandler();}\r\n\t\t]);\r\n\t\treturn UserOfflineHandler;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*一局麻将的信息\r\n\t*\r\n\t*消息处理器！\r\n\t*<b>生成器生成代码，生成后不会在覆盖!</b>\r\n\t*@author isnowfox消息生成器\r\n\t*/\r\n\t//class mj.net.handler.game.UserPlaceMsgHandler\r\n\tvar UserPlaceMsgHandler=(function(){\r\n\t\tfunction UserPlaceMsgHandler(){\r\n\t\t\tif(UserPlaceMsgHandler.instance!=null){\r\n\t\t\t\tthrow new SingletonError(\"ResourceManager 是单例模式\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__class(UserPlaceMsgHandler,'mj.net.handler.game.UserPlaceMsgHandler');\r\n\t\tvar __proto=UserPlaceMsgHandler.prototype;\r\n\t\tLaya.imps(__proto,{\"com.isnowfox.core.io.message.MessageHandler\":true})\r\n\t\t__proto.handler=function(msg){\r\n\t\t\treturn this.inHandler((msg));\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@return 返回true 表示需要脱离缓冲，不然这个消息的内容可能被覆盖\r\n\t\t*/\r\n\t\t__proto.inHandler=function(msg){\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\t__static(UserPlaceMsgHandler,\r\n\t\t['instance',function(){return this.instance=new UserPlaceMsgHandler();}\r\n\t\t]);\r\n\t\treturn UserPlaceMsgHandler;\r\n\t})()\r\n\r\n\r\n\t//class mj.net.handler.game.VoteDelSelectHandler\r\n\tvar VoteDelSelectHandler=(function(){\r\n\t\tfunction VoteDelSelectHandler(){\r\n\t\t\tif (VoteDelSelectHandler.instance !=null){\r\n\t\t\t\tthrow new SingletonError(\"ResourceManager 是单例模式\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__class(VoteDelSelectHandler,'mj.net.handler.game.VoteDelSelectHandler');\r\n\t\tvar __proto=VoteDelSelectHandler.prototype;\r\n\t\tLaya.imps(__proto,{\"com.isnowfox.core.io.message.MessageHandler\":true})\r\n\t\t__proto.handler=function(msg){\r\n\t\t\treturn this.inHandler((msg));\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@return 返回true 表示需要脱离缓冲，不然这个消息的内容可能被覆盖\r\n\t\t*/\r\n\t\t__proto.inHandler=function(msg){\r\n\t\t\tDialog.confirm(\r\n\t\t\t\"玩家:\"+msg.userName+\"发起解散房间投票\",\r\n\t\t\tHandler.create(null,function(){\r\n\t\t\t\tNet.instance.write(VoteDelSelectRet.create(true,msg.userId));\r\n\t\t\t}),\r\n\t\t\tHandler.create(null,function(){\r\n\t\t\t\tNet.instance.write(VoteDelSelectRet.create(false,msg.userId));\r\n\t\t\t}));\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\t__static(VoteDelSelectHandler,\r\n\t\t['instance',function(){return this.instance=new VoteDelSelectHandler();}\r\n\t\t]);\r\n\t\treturn VoteDelSelectHandler;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*创建房间结果\r\n\t*\r\n\t*消息处理器！\r\n\t*<b>生成器生成代码，生成后不会在覆盖!</b>\r\n\t*@author isnowfox消息生成器\r\n\t*/\r\n\t//class mj.net.handler.login.CreateRoomRetHandler\r\n\tvar CreateRoomRetHandler=(function(){\r\n\t\tfunction CreateRoomRetHandler(){\r\n\t\t\tif(CreateRoomRetHandler.instance!=null){\r\n\t\t\t\tthrow new SingletonError(\"ResourceManager 是单例模式\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__class(CreateRoomRetHandler,'mj.net.handler.login.CreateRoomRetHandler');\r\n\t\tvar __proto=CreateRoomRetHandler.prototype;\r\n\t\tLaya.imps(__proto,{\"com.isnowfox.core.io.message.MessageHandler\":true})\r\n\t\t__proto.handler=function(msg){\r\n\t\t\treturn this.inHandler((msg));\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@return 返回true 表示需要脱离缓冲，不然这个消息的内容可能被覆盖\r\n\t\t*/\r\n\t\t__proto.inHandler=function(msg){\r\n\t\t\tUserManager.instance.createRet(msg.result,msg.roomCheckId);\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\t__static(CreateRoomRetHandler,\r\n\t\t['instance',function(){return this.instance=new CreateRoomRetHandler();}\r\n\t\t]);\r\n\t\treturn CreateRoomRetHandler;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*解散房间结果\r\n\t*\r\n\t*消息处理器！\r\n\t*<b>生成器生成代码，生成后不会在覆盖!</b>\r\n\t*@author isnowfox消息生成器\r\n\t*/\r\n\t//class mj.net.handler.login.DelRoomRetHandler\r\n\tvar DelRoomRetHandler=(function(){\r\n\t\tfunction DelRoomRetHandler(){\r\n\t\t\tif (DelRoomRetHandler.instance !=null){\r\n\t\t\t\tthrow new SingletonError(\"ResourceManager 是单例模式\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__class(DelRoomRetHandler,'mj.net.handler.login.DelRoomRetHandler');\r\n\t\tvar __proto=DelRoomRetHandler.prototype;\r\n\t\tLaya.imps(__proto,{\"com.isnowfox.core.io.message.MessageHandler\":true})\r\n\t\t__proto.handler=function(msg){\r\n\t\t\treturn this.inHandler((msg));\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@return 返回true 表示需要脱离缓冲，不然这个消息的内容可能被覆盖\r\n\t\t*/\r\n\t\t__proto.inHandler=function(msg){\r\n\t\t\tWait.close();\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\t__static(DelRoomRetHandler,\r\n\t\t['instance',function(){return this.instance=new DelRoomRetHandler();}\r\n\t\t]);\r\n\t\treturn DelRoomRetHandler;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*退出房间结果\r\n\t*\r\n\t*消息处理器！\r\n\t*<b>生成器生成代码，生成后不会在覆盖!</b>\r\n\t*@author isnowfox消息生成器\r\n\t*/\r\n\t//class mj.net.handler.login.ExitRoomRetHandler\r\n\tvar ExitRoomRetHandler=(function(){\r\n\t\tfunction ExitRoomRetHandler(){\r\n\t\t\tif(ExitRoomRetHandler.instance!=null){\r\n\t\t\t\tthrow new SingletonError(\"ResourceManager 是单例模式\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__class(ExitRoomRetHandler,'mj.net.handler.login.ExitRoomRetHandler');\r\n\t\tvar __proto=ExitRoomRetHandler.prototype;\r\n\t\tLaya.imps(__proto,{\"com.isnowfox.core.io.message.MessageHandler\":true})\r\n\t\t__proto.handler=function(msg){\r\n\t\t\treturn this.inHandler((msg));\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@return 返回true 表示需要脱离缓冲，不然这个消息的内容可能被覆盖\r\n\t\t*/\r\n\t\t__proto.inHandler=function(msg){\r\n\t\t\tUserManager.instance.exitRoomRet();\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\t__static(ExitRoomRetHandler,\r\n\t\t['instance',function(){return this.instance=new ExitRoomRetHandler();}\r\n\t\t]);\r\n\t\treturn ExitRoomRetHandler;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*进入房间结果信息\r\n\t*\r\n\t*消息处理器！\r\n\t*<b>生成器生成代码，生成后不会在覆盖!</b>\r\n\t*@author isnowfox消息生成器\r\n\t*/\r\n\t//class mj.net.handler.login.JoinRoomRetHandler\r\n\tvar JoinRoomRetHandler=(function(){\r\n\t\tfunction JoinRoomRetHandler(){\r\n\t\t\tif(JoinRoomRetHandler.instance!=null){\r\n\t\t\t\tthrow new SingletonError(\"ResourceManager 是单例模式\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__class(JoinRoomRetHandler,'mj.net.handler.login.JoinRoomRetHandler');\r\n\t\tvar __proto=JoinRoomRetHandler.prototype;\r\n\t\tLaya.imps(__proto,{\"com.isnowfox.core.io.message.MessageHandler\":true})\r\n\t\t__proto.handler=function(msg){\r\n\t\t\treturn this.inHandler((msg));\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@return 返回true 表示需要脱离缓冲，不然这个消息的内容可能被覆盖\r\n\t\t*/\r\n\t\t__proto.inHandler=function(msg){\r\n\t\t\tUserManager.instance.joinRet(msg.result);\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\t__static(JoinRoomRetHandler,\r\n\t\t['instance',function(){return this.instance=new JoinRoomRetHandler();}\r\n\t\t]);\r\n\t\treturn JoinRoomRetHandler;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*登陆错误\r\n\t*\r\n\t*消息处理器！\r\n\t*<b>生成器生成代码，生成后不会在覆盖!</b>\r\n\t*@author isnowfox消息生成器\r\n\t*/\r\n\t//class mj.net.handler.login.LoginErrorHandler\r\n\tvar LoginErrorHandler=(function(){\r\n\t\tfunction LoginErrorHandler(){\r\n\t\t\tif (LoginErrorHandler.instance !=null){\r\n\t\t\t\tthrow new SingletonError(\"ResourceManager 是单例模式\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__class(LoginErrorHandler,'mj.net.handler.login.LoginErrorHandler');\r\n\t\tvar __proto=LoginErrorHandler.prototype;\r\n\t\tLaya.imps(__proto,{\"com.isnowfox.core.io.message.MessageHandler\":true})\r\n\t\t__proto.handler=function(msg){\r\n\t\t\treturn this.inHandler((msg));\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@return 返回true 表示需要脱离缓冲，不然这个消息的内容可能被覆盖\r\n\t\t*/\r\n\t\t__proto.inHandler=function(msg){\r\n\t\t\tvar currentScene=UiManager.instance.currentScene;\r\n\t\t\tUserManager.instance.loginError();\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\t__static(LoginErrorHandler,\r\n\t\t['instance',function(){return this.instance=new LoginErrorHandler();}\r\n\t\t]);\r\n\t\treturn LoginErrorHandler;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*登陆结果\r\n\t*\r\n\t*消息处理器！\r\n\t*<b>生成器生成代码，生成后不会在覆盖!</b>\r\n\t*@author isnowfox消息生成器\r\n\t*/\r\n\t//class mj.net.handler.login.LoginRetHandler\r\n\tvar LoginRetHandler=(function(){\r\n\t\tfunction LoginRetHandler(){\r\n\t\t\tif(LoginRetHandler.instance!=null){\r\n\t\t\t\tthrow new SingletonError(\"ResourceManager 是单例模式\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__class(LoginRetHandler,'mj.net.handler.login.LoginRetHandler');\r\n\t\tvar __proto=LoginRetHandler.prototype;\r\n\t\tLaya.imps(__proto,{\"com.isnowfox.core.io.message.MessageHandler\":true})\r\n\t\t__proto.handler=function(msg){\r\n\t\t\treturn this.inHandler((msg));\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@return 返回true 表示需要脱离缓冲，不然这个消息的内容可能被覆盖\r\n\t\t*/\r\n\t\t__proto.inHandler=function(msg){\r\n\t\t\tUserManager.instance.loginHandler(msg);\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\t__static(LoginRetHandler,\r\n\t\t['instance',function(){return this.instance=new LoginRetHandler();}\r\n\t\t]);\r\n\t\treturn LoginRetHandler;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*通知\r\n\t*\r\n\t*消息处理器！\r\n\t*<b>生成器生成代码，生成后不会在覆盖!</b>\r\n\t*@author isnowfox消息生成器\r\n\t*/\r\n\t//class mj.net.handler.login.NoticeHandler\r\n\tvar NoticeHandler=(function(){\r\n\t\tfunction NoticeHandler(){\r\n\t\t\tif(NoticeHandler.instance!=null){\r\n\t\t\t\tthrow new SingletonError(\"ResourceManager 是单例模式\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__class(NoticeHandler,'mj.net.handler.login.NoticeHandler');\r\n\t\tvar __proto=NoticeHandler.prototype;\r\n\t\tLaya.imps(__proto,{\"com.isnowfox.core.io.message.MessageHandler\":true})\r\n\t\t__proto.handler=function(msg){\r\n\t\t\treturn this.inHandler((msg));\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@return 返回true 表示需要脱离缓冲，不然这个消息的内容可能被覆盖\r\n\t\t*/\r\n\t\t__proto.inHandler=function(msg){\r\n\t\t\tvar message=GlobalResource.instance.locale.format(msg.key,msg.args);\r\n\t\t\tif(msg.key==\"room.notEnoughUser\"){\r\n\t\t\t\tWait.close();\r\n\t\t\t}\r\n\t\t\tDialog.showMessage(message);\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\t__static(NoticeHandler,\r\n\t\t['instance',function(){return this.instance=new NoticeHandler();}\r\n\t\t]);\r\n\t\treturn NoticeHandler;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*pong\r\n\t*\r\n\t*消息处理器！\r\n\t*<b>生成器生成代码，生成后不会在覆盖!</b>\r\n\t*@author isnowfox消息生成器\r\n\t*/\r\n\t//class mj.net.handler.login.PayHandler\r\n\tvar PayHandler=(function(){\r\n\t\tfunction PayHandler(){\r\n\t\t\tif(PayHandler.instance!=null){\r\n\t\t\t\tthrow new SingletonError(\"ResourceManager 是单例模式\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__class(PayHandler,'mj.net.handler.login.PayHandler');\r\n\t\tvar __proto=PayHandler.prototype;\r\n\t\tLaya.imps(__proto,{\"com.isnowfox.core.io.message.MessageHandler\":true})\r\n\t\t__proto.handler=function(msg){\r\n\t\t\treturn this.inHandler((msg));\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@return 返回true 表示需要脱离缓冲，不然这个消息的内容可能被覆盖\r\n\t\t*/\r\n\t\t__proto.inHandler=function(msg){\r\n\t\t\tUserManager.instance.pay(msg.gold);\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\t__static(PayHandler,\r\n\t\t['instance',function(){return this.instance=new PayHandler();}\r\n\t\t]);\r\n\t\treturn PayHandler;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*pong\r\n\t*\r\n\t*消息处理器！\r\n\t*<b>生成器生成代码，生成后不会在覆盖!</b>\r\n\t*@author isnowfox消息生成器\r\n\t*/\r\n\t//class mj.net.handler.login.PongHandler\r\n\tvar PongHandler=(function(){\r\n\t\tfunction PongHandler(){\r\n\t\t\tif(PongHandler.instance!=null){\r\n\t\t\t\tthrow new SingletonError(\"ResourceManager 是单例模式\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__class(PongHandler,'mj.net.handler.login.PongHandler');\r\n\t\tvar __proto=PongHandler.prototype;\r\n\t\tLaya.imps(__proto,{\"com.isnowfox.core.io.message.MessageHandler\":true})\r\n\t\t__proto.handler=function(msg){\r\n\t\t\treturn this.inHandler((msg));\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@return 返回true 表示需要脱离缓冲，不然这个消息的内容可能被覆盖\r\n\t\t*/\r\n\t\t__proto.inHandler=function(msg){\r\n\t\t\tConsole.log(\"ping:{0}\",Laya.timer.currTimer-parseInt(msg.time));\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\t__static(PongHandler,\r\n\t\t['instance',function(){return this.instance=new PongHandler();}\r\n\t\t]);\r\n\t\treturn PongHandler;\r\n\t})()\r\n\r\n\r\n\t//class mj.net.handler.login.RadioHandler\r\n\tvar RadioHandler=(function(){\r\n\t\tfunction RadioHandler(){\r\n\t\t\tif(RadioHandler.instance!=null){\r\n\t\t\t\tthrow new SingletonError(\"ResourceManager 是单例模式\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__class(RadioHandler,'mj.net.handler.login.RadioHandler');\r\n\t\tvar __proto=RadioHandler.prototype;\r\n\t\tLaya.imps(__proto,{\"com.isnowfox.core.io.message.MessageHandler\":true})\r\n\t\t__proto.handler=function(msg){\r\n\t\t\treturn this.inHandler((msg));\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@return 返回true 表示需要脱离缓冲，不然这个消息的内容可能被覆盖\r\n\t\t*/\r\n\t\t__proto.inHandler=function(msg){\r\n\t\t\tUiManager.instance.changeRadio(msg.radio);\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\t__static(RadioHandler,\r\n\t\t['instance',function(){return this.instance=new RadioHandler();}\r\n\t\t]);\r\n\t\treturn RadioHandler;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*登陆结果\r\n\t*\r\n\t*消息处理器！\r\n\t*<b>生成器生成代码，生成后不会在覆盖!</b>\r\n\t*@author isnowfox消息生成器\r\n\t*/\r\n\t//class mj.net.handler.login.RepeatLoginRetHandler\r\n\tvar RepeatLoginRetHandler=(function(){\r\n\t\tfunction RepeatLoginRetHandler(){\r\n\t\t\tif(RepeatLoginRetHandler.instance!=null){\r\n\t\t\t\tthrow new SingletonError(\"ResourceManager 是单例模式\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__class(RepeatLoginRetHandler,'mj.net.handler.login.RepeatLoginRetHandler');\r\n\t\tvar __proto=RepeatLoginRetHandler.prototype;\r\n\t\tLaya.imps(__proto,{\"com.isnowfox.core.io.message.MessageHandler\":true})\r\n\t\t__proto.handler=function(msg){\r\n\t\t\treturn this.inHandler((msg));\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@return 返回true 表示需要脱离缓冲，不然这个消息的内容可能被覆盖\r\n\t\t*/\r\n\t\t__proto.inHandler=function(msg){\r\n\t\t\tNet.instance.setRepeatLogin(true);\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\t__static(RepeatLoginRetHandler,\r\n\t\t['instance',function(){return this.instance=new RepeatLoginRetHandler();}\r\n\t\t]);\r\n\t\treturn RepeatLoginRetHandler;\r\n\t})()\r\n\r\n\r\n\t//class mj.net.handler.login.RoomHistoryListRetHandler\r\n\tvar RoomHistoryListRetHandler=(function(){\r\n\t\tfunction RoomHistoryListRetHandler(){\r\n\t\t\tif(RoomHistoryListRetHandler.instance!=null){\r\n\t\t\t\tthrow new SingletonError(\"ResourceManager 是单例模式\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__class(RoomHistoryListRetHandler,'mj.net.handler.login.RoomHistoryListRetHandler');\r\n\t\tvar __proto=RoomHistoryListRetHandler.prototype;\r\n\t\tLaya.imps(__proto,{\"com.isnowfox.core.io.message.MessageHandler\":true})\r\n\t\t__proto.handler=function(msg){\r\n\t\t\treturn this.inHandler((msg));\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@return 返回true 表示需要脱离缓冲，不然这个消息的内容可能被覆盖\r\n\t\t*/\r\n\t\t__proto.inHandler=function(msg){\r\n\t\t\tWait.close();\r\n\t\t\tRoomHistoryListDialog.showDialog(msg);\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\t__static(RoomHistoryListRetHandler,\r\n\t\t['instance',function(){return this.instance=new RoomHistoryListRetHandler();}\r\n\t\t]);\r\n\t\treturn RoomHistoryListRetHandler;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*发送验证码回执\r\n\t*\r\n\t*消息处理器！\r\n\t*<b>生成器生成代码，生成后不会在覆盖!</b>\r\n\t*@author isnowfox消息生成器\r\n\t*/\r\n\t//class mj.net.handler.login.SendAuthCodeRetHandler\r\n\tvar SendAuthCodeRetHandler=(function(){\r\n\t\tfunction SendAuthCodeRetHandler(){\r\n\t\t\tif(SendAuthCodeRetHandler.instance!=null){\r\n\t\t\t\tthrow new SingletonError(\"ResourceManager 是单例模式\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__class(SendAuthCodeRetHandler,'mj.net.handler.login.SendAuthCodeRetHandler');\r\n\t\tvar __proto=SendAuthCodeRetHandler.prototype;\r\n\t\tLaya.imps(__proto,{\"com.isnowfox.core.io.message.MessageHandler\":true})\r\n\t\t__proto.handler=function(msg){\r\n\t\t\treturn this.inHandler((msg));\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@return 返回true 表示需要脱离缓冲，不然这个消息的内容可能被覆盖\r\n\t\t*/\r\n\t\t__proto.inHandler=function(msg){\r\n\t\t\tif(PhoneDialog.phoneDialog){\r\n\t\t\t\tPhoneDialog.phoneDialog.sendRet(msg.success);\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\t__static(SendAuthCodeRetHandler,\r\n\t\t['instance',function(){return this.instance=new SendAuthCodeRetHandler();}\r\n\t\t]);\r\n\t\treturn SendAuthCodeRetHandler;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*登陆信息\r\n\t*\r\n\t*消息处理器！\r\n\t*<b>生成器生成代码，生成后不会在覆盖!</b>\r\n\t*@author isnowfox消息生成器\r\n\t*/\r\n\t//class mj.net.handler.login.StartGameHandler\r\n\tvar StartGameHandler=(function(){\r\n\t\tfunction StartGameHandler(){\r\n\t\t\tif(StartGameHandler.instance!=null){\r\n\t\t\t\tthrow new SingletonError(\"ResourceManager 是单例模式\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__class(StartGameHandler,'mj.net.handler.login.StartGameHandler');\r\n\t\tvar __proto=StartGameHandler.prototype;\r\n\t\tLaya.imps(__proto,{\"com.isnowfox.core.io.message.MessageHandler\":true})\r\n\t\t__proto.handler=function(msg){\r\n\t\t\treturn this.inHandler((msg));\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@return 返回true 表示需要脱离缓冲，不然这个消息的内容可能被覆盖\r\n\t\t*/\r\n\t\t__proto.inHandler=function(msg){\r\n\t\t\tUserManager.startGame();\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\t__static(StartGameHandler,\r\n\t\t['instance',function(){return this.instance=new StartGameHandler();}\r\n\t\t]);\r\n\t\treturn StartGameHandler;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*pong\r\n\t*\r\n\t*消息处理器！\r\n\t*<b>生成器生成代码，生成后不会在覆盖!</b>\r\n\t*@author isnowfox消息生成器\r\n\t*/\r\n\t//class mj.net.handler.login.SysSettingHandler\r\n\tvar SysSettingHandler=(function(){\r\n\t\tfunction SysSettingHandler(){\r\n\t\t\tif(SysSettingHandler.instance!=null){\r\n\t\t\t\tthrow new SingletonError(\"ResourceManager 是单例模式\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__class(SysSettingHandler,'mj.net.handler.login.SysSettingHandler');\r\n\t\tvar __proto=SysSettingHandler.prototype;\r\n\t\tLaya.imps(__proto,{\"com.isnowfox.core.io.message.MessageHandler\":true})\r\n\t\t__proto.handler=function(msg){\r\n\t\t\treturn this.inHandler((msg));\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@return 返回true 表示需要脱离缓冲，不然这个消息的内容可能被覆盖\r\n\t\t*/\r\n\t\t__proto.inHandler=function(msg){\r\n\t\t\tUiManager.instance.changeSysSetting(msg);\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\t__static(SysSettingHandler,\r\n\t\t['instance',function(){return this.instance=new SysSettingHandler();}\r\n\t\t]);\r\n\t\treturn SysSettingHandler;\r\n\t})()\r\n\r\n\r\n\t//class mj.net.handler.MessageHandlerFactory\r\n\tvar MessageHandlerFactory=(function(){\r\n\t\tfunction MessageHandlerFactory(){\r\n\t\t\tthis.vector=[];\r\n\t\t\tif(MessageHandlerFactory.instance!=null){\r\n\t\t\t\tthrow new SingletonError(\"ResourceManager 是单例模式\");\r\n\t\t\t}\r\n\t\t\tthis.vector[1]=[];\r\n\t\t\tthis.vector[1][0]=GameChapterEndHandler.instance;\r\n\t\t\tthis.vector[1][2]=GameChapterStartRetHandler.instance;\r\n\t\t\tthis.vector[1][3]=GameDelRoomHandler.instance;\r\n\t\t\tthis.vector[1][4]=GameExitUserHandler.instance;\r\n\t\t\tthis.vector[1][7]=GameRoomInfoHandler.instance;\r\n\t\t\tthis.vector[1][8]=GameUserInfoHandler.instance;\r\n\t\t\tthis.vector[1][9]=MajiangChapterMsgHandler.instance;\r\n\t\t\tthis.vector[1][10]=OperationCPGHHandler.instance;\r\n\t\t\tthis.vector[1][12]=OperationFaPaiHandler.instance;\r\n\t\t\tthis.vector[1][14]=OperationOutHandler.instance;\r\n\t\t\tthis.vector[1][16]=SyncOptHandler.instance;\r\n\t\t\tthis.vector[1][17]=SyncOptTimeHandler.instance;\r\n\t\t\tthis.vector[1][18]=TingPaiHandler.instance;\r\n\t\t\tthis.vector[1][19]=UserOfflineHandler.instance;\r\n\t\t\tthis.vector[1][20]=UserPlaceMsgHandler.instance;\r\n\t\t\tthis.vector[1][21]=VoteDelSelectHandler.instance;\r\n\t\t\tthis.vector[7]=[];\r\n\t\t\tthis.vector[7][1]=CreateRoomRetHandler.instance;\r\n\t\t\tthis.vector[7][3]=DelRoomRetHandler.instance;\r\n\t\t\tthis.vector[7][5]=ExitRoomRetHandler.instance;\r\n\t\t\tthis.vector[7][7]=JoinRoomRetHandler.instance;\r\n\t\t\tthis.vector[7][9]=LoginErrorHandler.instance;\r\n\t\t\tthis.vector[7][10]=LoginRetHandler.instance;\r\n\t\t\tthis.vector[7][11]=NoticeHandler.instance;\r\n\t\t\tthis.vector[7][13]=PayHandler.instance;\r\n\t\t\tthis.vector[7][15]=PongHandler.instance;\r\n\t\t\tthis.vector[7][16]=RadioHandler.instance;\r\n\t\t\tthis.vector[7][17]=RepeatLoginRetHandler.instance;\r\n\t\t\tthis.vector[7][20]=RoomHistoryListRetHandler.instance;\r\n\t\t\tthis.vector[7][22]=SendAuthCodeRetHandler.instance;\r\n\t\t\tthis.vector[7][23]=StartGameHandler.instance;\r\n\t\t\tthis.vector[7][24]=SysSettingHandler.instance;\r\n\t\t}\r\n\r\n\t\t__class(MessageHandlerFactory,'mj.net.handler.MessageHandlerFactory');\r\n\t\tvar __proto=MessageHandlerFactory.prototype;\r\n\t\t__proto.getHandler=function(type,id){\r\n\t\t\treturn this.vector[type][id];\r\n\t\t}\r\n\r\n\t\t__static(MessageHandlerFactory,\r\n\t\t['instance',function(){return this.instance=new MessageHandlerFactory();}\r\n\t\t]);\r\n\t\treturn MessageHandlerFactory;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*牌局结束\r\n\t*\r\n\t*<b>生成器生成代码，请勿修改，扩展请继承</b>\r\n\t*@author isnowfox消息生成器\r\n\t*/\r\n\t//class mj.net.message.game.GameChapterEnd\r\n\tvar GameChapterEnd=(function(){\r\n\t\tfunction GameChapterEnd(){\r\n\t\t\tthis._huPaiIndex=0;\r\n\t\t\tthis._fangPaoIndex=0;\r\n\t\t\tthis._zaMaType=0;\r\n\t\t\tthis._zaMaPai=null;\r\n\t\t\tthis._zaMaFan=0;\r\n\t\t\tthis._fanResults=null;\r\n\t\t}\r\n\r\n\t\t__class(GameChapterEnd,'mj.net.message.game.GameChapterEnd');\r\n\t\tvar __proto=GameChapterEnd.prototype;\r\n\t\tLaya.imps(__proto,{\"com.isnowfox.core.io.message.Message\":true})\r\n\t\t__proto.decode=function(in0){\r\n\t\t\tthis._huPaiIndex=in0.readInt();\r\n\t\t\tthis._fangPaoIndex=in0.readInt();\r\n\t\t\tthis._zaMaType=in0.readInt();\r\n\t\t\tthis._zaMaPai=in0.readIntArray();\r\n\t\t\tthis._zaMaFan=in0.readInt();\r\n\t\t\tvar fanResultsLen=in0.readInt();\r\n\t\t\tif(fanResultsLen==-1){\r\n\t\t\t\tthis._fanResults=null;\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tthis._fanResults=[];\r\n\t\t\t\tfor(var fanResultsI=0;fanResultsI < fanResultsLen;fanResultsI++){\r\n\t\t\t\t\tvar fanResultsItem=new GameFanResult();\r\n\t\t\t\t\tfanResultsItem.decode(in0);\r\n\t\t\t\t\tthis._fanResults[fanResultsI]=(fanResultsItem);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__proto.encode=function(out){\r\n\t\t\tout.writeInt(this.huPaiIndex);\r\n\t\t\tout.writeInt(this.fangPaoIndex);\r\n\t\t\tout.writeInt(this.zaMaType);\r\n\t\t\tout.writeIntArray(this.zaMaPai);\r\n\t\t\tout.writeInt(this.zaMaFan);\r\n\t\t\tif(this.fanResults==null){\r\n\t\t\t\tout.writeInt(-1);\r\n\t\t\t\t}else{\r\n\t\t\t\tvar fanResultsLen=this.fanResults.length;\r\n\t\t\t\tout.writeInt(fanResultsLen);\r\n\t\t\t\tfor(var fanResultsI=0;fanResultsI < fanResultsLen;fanResultsI++){\r\n\t\t\t\t\tthis.fanResults[fanResultsI].encode(out);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__proto.toString=function(){\r\n\t\t\treturn \"GameChapterEnd [huPaiIndex=\"+this._huPaiIndex+\",fangPaoIndex=\"+this._fangPaoIndex+\",zaMaType=\"+this._zaMaType+\",zaMaPai=\"+this._zaMaPai+\",zaMaFan=\"+this._zaMaFan+\",fanResults=\"+this._fanResults+\", ]\";\r\n\t\t}\r\n\r\n\t\t__proto.getMessageType=function(){\r\n\t\t\treturn 1;\r\n\t\t}\r\n\r\n\t\t__proto.getMessageId=function(){\r\n\t\t\treturn 0;\r\n\t\t}\r\n\r\n\t\t__getset(0,__proto,'fanResults',function(){\r\n\t\t\treturn this._fanResults;\r\n\t\t\t},function(fanResults){\r\n\t\t\tthis._fanResults=fanResults;\r\n\t\t});\r\n\r\n\t\t__getset(0,__proto,'zaMaFan',function(){\r\n\t\t\treturn this._zaMaFan;\r\n\t\t\t},function(zaMaFan){\r\n\t\t\tthis._zaMaFan=zaMaFan;\r\n\t\t});\r\n\r\n\t\t__getset(0,__proto,'zaMaPai',function(){\r\n\t\t\treturn this._zaMaPai;\r\n\t\t\t},function(zaMaPai){\r\n\t\t\tthis._zaMaPai=zaMaPai;\r\n\t\t});\r\n\r\n\t\t__getset(0,__proto,'zaMaType',function(){\r\n\t\t\treturn this._zaMaType;\r\n\t\t\t},function(zaMaType){\r\n\t\t\tthis._zaMaType=zaMaType;\r\n\t\t});\r\n\r\n\t\t__getset(0,__proto,'fangPaoIndex',function(){\r\n\t\t\treturn this._fangPaoIndex;\r\n\t\t\t},function(fangPaoIndex){\r\n\t\t\tthis._fangPaoIndex=fangPaoIndex;\r\n\t\t});\r\n\r\n\t\t__getset(0,__proto,'huPaiIndex',function(){\r\n\t\t\treturn this._huPaiIndex;\r\n\t\t\t},function(huPaiIndex){\r\n\t\t\tthis._huPaiIndex=huPaiIndex;\r\n\t\t});\r\n\r\n\t\tGameChapterEnd.create=function(huPaiIndex,fangPaoIndex,zaMaType,zaMaPai,zaMaFan,fanResults){\r\n\t\t\tvar gameChapterEnd=new GameChapterEnd();\r\n\t\t\tgameChapterEnd._huPaiIndex=huPaiIndex;\r\n\t\t\tgameChapterEnd._fangPaoIndex=fangPaoIndex;\r\n\t\t\tgameChapterEnd._zaMaType=zaMaType;\r\n\t\t\tgameChapterEnd._zaMaPai=zaMaPai;\r\n\t\t\tgameChapterEnd._zaMaFan=zaMaFan;\r\n\t\t\tgameChapterEnd._fanResults=fanResults;\r\n\t\t\treturn gameChapterEnd;\r\n\t\t}\r\n\r\n\t\tGameChapterEnd.TYPE=1;\r\n\t\tGameChapterEnd.ID=0;\r\n\t\treturn GameChapterEnd;\r\n\t})()\r\n\r\n\r\n\t//class mj.net.message.game.GameChapterStart\r\n\tvar GameChapterStart=(function(){\r\n\t\tfunction GameChapterStart(){}\r\n\t\t__class(GameChapterStart,'mj.net.message.game.GameChapterStart');\r\n\t\tvar __proto=GameChapterStart.prototype;\r\n\t\tLaya.imps(__proto,{\"com.isnowfox.core.io.message.Message\":true})\r\n\t\t__proto.decode=function(in0){}\r\n\t\t__proto.encode=function(out){}\r\n\t\t__proto.toString=function(){\r\n\t\t\treturn \"GameChapterStart [ ]\";\r\n\t\t}\r\n\r\n\t\t__proto.getMessageType=function(){\r\n\t\t\treturn 1;\r\n\t\t}\r\n\r\n\t\t__proto.getMessageId=function(){\r\n\t\t\treturn 1;\r\n\t\t}\r\n\r\n\t\tGameChapterStart.TYPE=1;\r\n\t\tGameChapterStart.ID=1;\r\n\t\treturn GameChapterStart;\r\n\t})()\r\n\r\n\r\n\t//class mj.net.message.game.GameChapterStartRet\r\n\tvar GameChapterStartRet=(function(){\r\n\t\tfunction GameChapterStartRet(){}\r\n\t\t__class(GameChapterStartRet,'mj.net.message.game.GameChapterStartRet');\r\n\t\tvar __proto=GameChapterStartRet.prototype;\r\n\t\tLaya.imps(__proto,{\"com.isnowfox.core.io.message.Message\":true})\r\n\t\t__proto.decode=function(in0){}\r\n\t\t__proto.encode=function(out){}\r\n\t\t__proto.toString=function(){\r\n\t\t\treturn \"GameChapterStartRet [ ]\";\r\n\t\t}\r\n\r\n\t\t__proto.getMessageType=function(){\r\n\t\t\treturn 1;\r\n\t\t}\r\n\r\n\t\t__proto.getMessageId=function(){\r\n\t\t\treturn 2;\r\n\t\t}\r\n\r\n\t\tGameChapterStartRet.TYPE=1;\r\n\t\tGameChapterStartRet.ID=2;\r\n\t\treturn GameChapterStartRet;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*解散了房间，房间被删除\r\n\t*\r\n\t*<b>生成器生成代码，请勿修改，扩展请继承</b>\r\n\t*@author isnowfox消息生成器\r\n\t*/\r\n\t//class mj.net.message.game.GameDelRoom\r\n\tvar GameDelRoom=(function(){\r\n\t\tfunction GameDelRoom(){\r\n\t\t\tthis._isEnd=false;\r\n\t\t\tthis._isStart=false;\r\n\t\t}\r\n\r\n\t\t__class(GameDelRoom,'mj.net.message.game.GameDelRoom');\r\n\t\tvar __proto=GameDelRoom.prototype;\r\n\t\tLaya.imps(__proto,{\"com.isnowfox.core.io.message.Message\":true})\r\n\t\t__proto.decode=function(in0){\r\n\t\t\tthis._isEnd=in0.readBoolean();\r\n\t\t\tthis._isStart=in0.readBoolean();\r\n\t\t}\r\n\r\n\t\t__proto.encode=function(out){\r\n\t\t\tout.writeBoolean(this.isEnd);\r\n\t\t\tout.writeBoolean(this.isStart);\r\n\t\t}\r\n\r\n\t\t__proto.toString=function(){\r\n\t\t\treturn \"GameDelRoom [isEnd=\"+this._isEnd+\",isStart=\"+this._isStart+\", ]\";\r\n\t\t}\r\n\r\n\t\t__proto.getMessageType=function(){\r\n\t\t\treturn 1;\r\n\t\t}\r\n\r\n\t\t__proto.getMessageId=function(){\r\n\t\t\treturn 3;\r\n\t\t}\r\n\r\n\t\t__getset(0,__proto,'isStart',function(){\r\n\t\t\treturn this._isStart;\r\n\t\t\t},function(isStart){\r\n\t\t\tthis._isStart=isStart;\r\n\t\t});\r\n\r\n\t\t__getset(0,__proto,'isEnd',function(){\r\n\t\t\treturn this._isEnd;\r\n\t\t\t},function(isEnd){\r\n\t\t\tthis._isEnd=isEnd;\r\n\t\t});\r\n\r\n\t\tGameDelRoom.create=function(isEnd,isStart){\r\n\t\t\tvar gameDelRoom=new GameDelRoom();\r\n\t\t\tgameDelRoom._isEnd=isEnd;\r\n\t\t\tgameDelRoom._isStart=isStart;\r\n\t\t\treturn gameDelRoom;\r\n\t\t}\r\n\r\n\t\tGameDelRoom.TYPE=1;\r\n\t\tGameDelRoom.ID=3;\r\n\t\treturn GameDelRoom;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*用户退出游戏\r\n\t*\r\n\t*<b>生成器生成代码，请勿修改，扩展请继承</b>\r\n\t*@author isnowfox消息生成器\r\n\t*/\r\n\t//class mj.net.message.game.GameExitUser\r\n\tvar GameExitUser=(function(){\r\n\t\tfunction GameExitUser(){\r\n\t\t\tthis._userId=0;\r\n\t\t}\r\n\r\n\t\t__class(GameExitUser,'mj.net.message.game.GameExitUser');\r\n\t\tvar __proto=GameExitUser.prototype;\r\n\t\tLaya.imps(__proto,{\"com.isnowfox.core.io.message.Message\":true})\r\n\t\t__proto.decode=function(in0){\r\n\t\t\tthis._userId=in0.readInt();\r\n\t\t}\r\n\r\n\t\t__proto.encode=function(out){\r\n\t\t\tout.writeInt(this.userId);\r\n\t\t}\r\n\r\n\t\t__proto.toString=function(){\r\n\t\t\treturn \"GameExitUser [userId=\"+this._userId+\", ]\";\r\n\t\t}\r\n\r\n\t\t__proto.getMessageType=function(){\r\n\t\t\treturn 1;\r\n\t\t}\r\n\r\n\t\t__proto.getMessageId=function(){\r\n\t\t\treturn 4;\r\n\t\t}\r\n\r\n\t\t__getset(0,__proto,'userId',function(){\r\n\t\t\treturn this._userId;\r\n\t\t\t},function(userId){\r\n\t\t\tthis._userId=userId;\r\n\t\t});\r\n\r\n\t\tGameExitUser.create=function(userId){\r\n\t\t\tvar gameExitUser=new GameExitUser();\r\n\t\t\tgameExitUser._userId=userId;\r\n\t\t\treturn gameExitUser;\r\n\t\t}\r\n\r\n\t\tGameExitUser.TYPE=1;\r\n\t\tGameExitUser.ID=4;\r\n\t\treturn GameExitUser;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*牌局结束\r\n\t*\r\n\t*<b>生成器生成代码，请勿修改，扩展请继承</b>\r\n\t*@author isnowfox消息生成器\r\n\t*/\r\n\t//class mj.net.message.game.GameFanResult\r\n\tvar GameFanResult=(function(){\r\n\t\tfunction GameFanResult(){\r\n\t\t\tthis._queTou=0;\r\n\t\t\tthis._shunZi=null;\r\n\t\t\tthis._keZi=null;\r\n\t\t\tthis._shouPai=null;\r\n\t\t\tthis._huiErBian=null;\r\n\t\t\tthis._anGang=null;\r\n\t\t\tthis._xiaoMingGang=null;\r\n\t\t\tthis._daMingGang=null;\r\n\t\t\tthis._peng=null;\r\n\t\t\tthis._chi=null;\r\n\t\t\tthis._baseFanType=null;\r\n\t\t\tthis._fanString=null;\r\n\t\t\tthis._fan=0;\r\n\t\t\tthis._userName=null;\r\n\t\t\tthis._score=0;\r\n\t\t\tthis._guaFengXiaYu=0;\r\n\t\t}\r\n\r\n\t\t__class(GameFanResult,'mj.net.message.game.GameFanResult');\r\n\t\tvar __proto=GameFanResult.prototype;\r\n\t\tLaya.imps(__proto,{\"com.isnowfox.core.io.message.Message\":true})\r\n\t\t__proto.decode=function(in0){\r\n\t\t\tthis._queTou=in0.readInt();\r\n\t\t\tthis._shunZi=in0.readIntArray();\r\n\t\t\tthis._keZi=in0.readIntArray();\r\n\t\t\tthis._shouPai=in0.readIntArray();\r\n\t\t\tthis._huiErBian=in0.readIntArray();\r\n\t\t\tthis._anGang=in0.readIntArray();\r\n\t\t\tthis._xiaoMingGang=in0.readIntArray();\r\n\t\t\tthis._daMingGang=in0.readIntArray();\r\n\t\t\tthis._peng=in0.readIntArray();\r\n\t\t\tthis._chi=in0.readIntArray();\r\n\t\t\tthis._baseFanType=in0.readString();\r\n\t\t\tthis._fanString=in0.readString();\r\n\t\t\tthis._fan=in0.readInt();\r\n\t\t\tthis._userName=in0.readString();\r\n\t\t\tthis._score=in0.readInt();\r\n\t\t\tthis._guaFengXiaYu=in0.readInt();\r\n\t\t}\r\n\r\n\t\t__proto.encode=function(out){\r\n\t\t\tout.writeInt(this.queTou);\r\n\t\t\tout.writeIntArray(this.shunZi);\r\n\t\t\tout.writeIntArray(this.keZi);\r\n\t\t\tout.writeIntArray(this.shouPai);\r\n\t\t\tout.writeIntArray(this.huiErBian);\r\n\t\t\tout.writeIntArray(this.anGang);\r\n\t\t\tout.writeIntArray(this.xiaoMingGang);\r\n\t\t\tout.writeIntArray(this.daMingGang);\r\n\t\t\tout.writeIntArray(this.peng);\r\n\t\t\tout.writeIntArray(this.chi);\r\n\t\t\tout.writeString(this.baseFanType);\r\n\t\t\tout.writeString(this.fanString);\r\n\t\t\tout.writeInt(this.fan);\r\n\t\t\tout.writeString(this.userName);\r\n\t\t\tout.writeInt(this.score);\r\n\t\t\tout.writeInt(this.guaFengXiaYu);\r\n\t\t}\r\n\r\n\t\t__proto.toString=function(){\r\n\t\t\treturn \"GameFanResult [queTou=\"+this._queTou+\",shunZi=\"+this._shunZi+\",keZi=\"+this._keZi+\",shouPai=\"+this._shouPai+\",huiErBian=\"+this._huiErBian+\",anGang=\"+this._anGang+\",xiaoMingGang=\"+this._xiaoMingGang+\",daMingGang=\"+this._daMingGang+\",peng=\"+this._peng+\",chi=\"+this._chi+\",baseFanType=\"+this._baseFanType+\",fanString=\"+this._fanString+\",fan=\"+this._fan+\",userName=\"+this._userName+\",score=\"+this._score+\",guaFengXiaYu=\"+this._guaFengXiaYu+\", ]\";\r\n\t\t}\r\n\r\n\t\t__proto.getMessageType=function(){\r\n\t\t\treturn 1;\r\n\t\t}\r\n\r\n\t\t__proto.getMessageId=function(){\r\n\t\t\treturn 5;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*改变值\r\n\t\t*/\r\n\t\t/**\r\n\t\t*改变值\r\n\t\t*/\r\n\t\t__getset(0,__proto,'score',function(){\r\n\t\t\treturn this._score;\r\n\t\t\t},function(score){\r\n\t\t\tthis._score=score;\r\n\t\t});\r\n\r\n\t\t__getset(0,__proto,'userName',function(){\r\n\t\t\treturn this._userName;\r\n\t\t\t},function(userName){\r\n\t\t\tthis._userName=userName;\r\n\t\t});\r\n\r\n\t\t__getset(0,__proto,'fanString',function(){\r\n\t\t\treturn this._fanString;\r\n\t\t\t},function(fanString){\r\n\t\t\tthis._fanString=fanString;\r\n\t\t});\r\n\r\n\t\t__getset(0,__proto,'guaFengXiaYu',function(){\r\n\t\t\treturn this._guaFengXiaYu;\r\n\t\t\t},function(guaFengXiaYu){\r\n\t\t\tthis._guaFengXiaYu=guaFengXiaYu;\r\n\t\t});\r\n\r\n\t\t__getset(0,__proto,'baseFanType',function(){\r\n\t\t\treturn this._baseFanType;\r\n\t\t\t},function(baseFanType){\r\n\t\t\tthis._baseFanType=baseFanType;\r\n\t\t});\r\n\r\n\t\t__getset(0,__proto,'keZi',function(){\r\n\t\t\treturn this._keZi;\r\n\t\t\t},function(keZi){\r\n\t\t\tthis._keZi=keZi;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*3个一组一组\r\n\t\t*/\r\n\t\t/**\r\n\t\t*3个一组一组\r\n\t\t*/\r\n\t\t__getset(0,__proto,'chi',function(){\r\n\t\t\treturn this._chi;\r\n\t\t\t},function(chi){\r\n\t\t\tthis._chi=chi;\r\n\t\t});\r\n\r\n\t\t__getset(0,__proto,'peng',function(){\r\n\t\t\treturn this._peng;\r\n\t\t\t},function(peng){\r\n\t\t\tthis._peng=peng;\r\n\t\t});\r\n\r\n\t\t__getset(0,__proto,'daMingGang',function(){\r\n\t\t\treturn this._daMingGang;\r\n\t\t\t},function(daMingGang){\r\n\t\t\tthis._daMingGang=daMingGang;\r\n\t\t});\r\n\r\n\t\t__getset(0,__proto,'shunZi',function(){\r\n\t\t\treturn this._shunZi;\r\n\t\t\t},function(shunZi){\r\n\t\t\tthis._shunZi=shunZi;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*已经显示的暗杠，如果是自己的则全部显示,不是自己的且如果还不能显示，那么传递-1\r\n\t\t*/\r\n\t\t/**\r\n\t\t*已经显示的暗杠，如果是自己的则全部显示,不是自己的且如果还不能显示，那么传递-1\r\n\t\t*/\r\n\t\t__getset(0,__proto,'anGang',function(){\r\n\t\t\treturn this._anGang;\r\n\t\t\t},function(anGang){\r\n\t\t\tthis._anGang=anGang;\r\n\t\t});\r\n\r\n\t\t__getset(0,__proto,'queTou',function(){\r\n\t\t\treturn this._queTou;\r\n\t\t\t},function(queTou){\r\n\t\t\tthis._queTou=queTou;\r\n\t\t});\r\n\r\n\t\t__getset(0,__proto,'shouPai',function(){\r\n\t\t\treturn this._shouPai;\r\n\t\t\t},function(shouPai){\r\n\t\t\tthis._shouPai=shouPai;\r\n\t\t});\r\n\r\n\t\t__getset(0,__proto,'fan',function(){\r\n\t\t\treturn this._fan;\r\n\t\t\t},function(fan){\r\n\t\t\tthis._fan=fan;\r\n\t\t});\r\n\r\n\t\t__getset(0,__proto,'xiaoMingGang',function(){\r\n\t\t\treturn this._xiaoMingGang;\r\n\t\t\t},function(xiaoMingGang){\r\n\t\t\tthis._xiaoMingGang=xiaoMingGang;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*会儿变化\r\n\t\t*/\r\n\t\t/**\r\n\t\t*会儿变化\r\n\t\t*/\r\n\t\t__getset(0,__proto,'huiErBian',function(){\r\n\t\t\treturn this._huiErBian;\r\n\t\t\t},function(huiErBian){\r\n\t\t\tthis._huiErBian=huiErBian;\r\n\t\t});\r\n\r\n\t\tGameFanResult.create=function(queTou,shunZi,keZi,shouPai,huiErBian,anGang,xiaoMingGang,daMingGang,peng,chi,baseFanType,fanString,fan,userName,score,guaFengXiaYu){\r\n\t\t\tvar gameFanResult=new GameFanResult();\r\n\t\t\tgameFanResult._queTou=queTou;\r\n\t\t\tgameFanResult._shunZi=shunZi;\r\n\t\t\tgameFanResult._keZi=keZi;\r\n\t\t\tgameFanResult._shouPai=shouPai;\r\n\t\t\tgameFanResult._huiErBian=huiErBian;\r\n\t\t\tgameFanResult._anGang=anGang;\r\n\t\t\tgameFanResult._xiaoMingGang=xiaoMingGang;\r\n\t\t\tgameFanResult._daMingGang=daMingGang;\r\n\t\t\tgameFanResult._peng=peng;\r\n\t\t\tgameFanResult._chi=chi;\r\n\t\t\tgameFanResult._baseFanType=baseFanType;\r\n\t\t\tgameFanResult._fanString=fanString;\r\n\t\t\tgameFanResult._fan=fan;\r\n\t\t\tgameFanResult._userName=userName;\r\n\t\t\tgameFanResult._score=score;\r\n\t\t\tgameFanResult._guaFengXiaYu=guaFengXiaYu;\r\n\t\t\treturn gameFanResult;\r\n\t\t}\r\n\r\n\t\tGameFanResult.TYPE=1;\r\n\t\tGameFanResult.ID=5;\r\n\t\treturn GameFanResult;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*准备就绪,通知服务器可以开始发送房间信息了\r\n\t*\r\n\t*<b>生成器生成代码，请勿修改，扩展请继承</b>\r\n\t*@author isnowfox消息生成器\r\n\t*/\r\n\t//class mj.net.message.game.GameJoinRoom\r\n\tvar GameJoinRoom=(function(){\r\n\t\tfunction GameJoinRoom(){}\r\n\t\t__class(GameJoinRoom,'mj.net.message.game.GameJoinRoom');\r\n\t\tvar __proto=GameJoinRoom.prototype;\r\n\t\tLaya.imps(__proto,{\"com.isnowfox.core.io.message.Message\":true})\r\n\t\t__proto.decode=function(in0){}\r\n\t\t__proto.encode=function(out){}\r\n\t\t__proto.toString=function(){\r\n\t\t\treturn \"GameJoinRoom [ ]\";\r\n\t\t}\r\n\r\n\t\t__proto.getMessageType=function(){\r\n\t\t\treturn 1;\r\n\t\t}\r\n\r\n\t\t__proto.getMessageId=function(){\r\n\t\t\treturn 6;\r\n\t\t}\r\n\r\n\t\tGameJoinRoom.TYPE=1;\r\n\t\tGameJoinRoom.ID=6;\r\n\t\treturn GameJoinRoom;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*同步游戏信息\r\n\t*0东 1南 2西 3北 逆时针顺序\r\n\t*\r\n\t*<b>生成器生成代码，请勿修改，扩展请继承</b>\r\n\t*@author isnowfox消息生成器\r\n\t*/\r\n\t//class mj.net.message.game.GameRoomInfo\r\n\tvar GameRoomInfo=(function(){\r\n\t\tfunction GameRoomInfo(){\r\n\t\t\tthis._sceneUser=null;\r\n\t\t\tthis._start=false;\r\n\t\t\tthis._roomCheckId=null;\r\n\t\t\tthis._leftChapterNums=0;\r\n\t\t\tthis._createUserId=0;\r\n\t\t\tthis._chapter=null;\r\n\t\t}\r\n\r\n\t\t__class(GameRoomInfo,'mj.net.message.game.GameRoomInfo');\r\n\t\tvar __proto=GameRoomInfo.prototype;\r\n\t\tLaya.imps(__proto,{\"com.isnowfox.core.io.message.Message\":true})\r\n\t\t__proto.decode=function(in0){\r\n\t\t\tvar sceneUserLen=in0.readInt();\r\n\t\t\tif(sceneUserLen==-1){\r\n\t\t\t\tthis._sceneUser=null;\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tthis._sceneUser=[];\r\n\t\t\t\tfor(var sceneUserI=0;sceneUserI < sceneUserLen;sceneUserI++){\r\n\t\t\t\t\tvar sceneUserItem=new GameUserInfo();\r\n\t\t\t\t\tsceneUserItem.decode(in0);\r\n\t\t\t\t\tthis._sceneUser[sceneUserI]=(sceneUserItem);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis._start=in0.readBoolean();\r\n\t\t\tthis._roomCheckId=in0.readString();\r\n\t\t\tthis._leftChapterNums=in0.readInt();\r\n\t\t\tthis._createUserId=in0.readInt();\r\n\t\t\tvar chapterIsNotNull=in0.readBoolean();\r\n\t\t\tif(chapterIsNotNull){\r\n\t\t\t\tthis._chapter=new mj.net.message.game.MajiangChapterMsg();\r\n\t\t\t\tthis._chapter.decode(in0);\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tthis._chapter=null;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__proto.encode=function(out){\r\n\t\t\tif(this.sceneUser==null){\r\n\t\t\t\tout.writeInt(-1);\r\n\t\t\t\t}else{\r\n\t\t\t\tvar sceneUserLen=this.sceneUser.length;\r\n\t\t\t\tout.writeInt(sceneUserLen);\r\n\t\t\t\tfor(var sceneUserI=0;sceneUserI < sceneUserLen;sceneUserI++){\r\n\t\t\t\t\tthis.sceneUser[sceneUserI].encode(out);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tout.writeBoolean(this.start);\r\n\t\t\tout.writeString(this.roomCheckId);\r\n\t\t\tout.writeInt(this.leftChapterNums);\r\n\t\t\tout.writeInt(this.createUserId);\r\n\t\t\tif(this.chapter==null){\r\n\t\t\t\tout.writeBoolean(false);\r\n\t\t\t\t}else{\r\n\t\t\t\tout.writeBoolean(true);\r\n\t\t\t\tthis.chapter.encode(out);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__proto.toString=function(){\r\n\t\t\treturn \"GameRoomInfo [sceneUser=\"+this._sceneUser+\",start=\"+this._start+\",roomCheckId=\"+this._roomCheckId+\",leftChapterNums=\"+this._leftChapterNums+\",createUserId=\"+this._createUserId+\",chapter=\"+this._chapter+\", ]\";\r\n\t\t}\r\n\r\n\t\t__proto.getMessageType=function(){\r\n\t\t\treturn 1;\r\n\t\t}\r\n\r\n\t\t__proto.getMessageId=function(){\r\n\t\t\treturn 7;\r\n\t\t}\r\n\r\n\t\t__getset(0,__proto,'roomCheckId',function(){\r\n\t\t\treturn this._roomCheckId;\r\n\t\t\t},function(roomCheckId){\r\n\t\t\tthis._roomCheckId=roomCheckId;\r\n\t\t});\r\n\r\n\t\t__getset(0,__proto,'createUserId',function(){\r\n\t\t\treturn this._createUserId;\r\n\t\t\t},function(createUserId){\r\n\t\t\tthis._createUserId=createUserId;\r\n\t\t});\r\n\r\n\t\t__getset(0,__proto,'leftChapterNums',function(){\r\n\t\t\treturn this._leftChapterNums;\r\n\t\t\t},function(leftChapterNums){\r\n\t\t\tthis._leftChapterNums=leftChapterNums;\r\n\t\t});\r\n\r\n\t\t__getset(0,__proto,'chapter',function(){\r\n\t\t\treturn this._chapter;\r\n\t\t\t},function(chapter){\r\n\t\t\tthis._chapter=chapter;\r\n\t\t});\r\n\r\n\t\t__getset(0,__proto,'start',function(){\r\n\t\t\treturn this._start;\r\n\t\t\t},function(start){\r\n\t\t\tthis._start=start;\r\n\t\t});\r\n\r\n\t\t__getset(0,__proto,'sceneUser',function(){\r\n\t\t\treturn this._sceneUser;\r\n\t\t\t},function(sceneUser){\r\n\t\t\tthis._sceneUser=sceneUser;\r\n\t\t});\r\n\r\n\t\tGameRoomInfo.create=function(sceneUser,start,roomCheckId,leftChapterNums,createUserId,chapter){\r\n\t\t\tvar gameRoomInfo=new GameRoomInfo();\r\n\t\t\tgameRoomInfo._sceneUser=sceneUser;\r\n\t\t\tgameRoomInfo._start=start;\r\n\t\t\tgameRoomInfo._roomCheckId=roomCheckId;\r\n\t\t\tgameRoomInfo._leftChapterNums=leftChapterNums;\r\n\t\t\tgameRoomInfo._createUserId=createUserId;\r\n\t\t\tgameRoomInfo._chapter=chapter;\r\n\t\t\treturn gameRoomInfo;\r\n\t\t}\r\n\r\n\t\tGameRoomInfo.TYPE=1;\r\n\t\tGameRoomInfo.ID=7;\r\n\t\treturn GameRoomInfo;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*同步游戏信息\r\n\t*\r\n\t*<b>生成器生成代码，请勿修改，扩展请继承</b>\r\n\t*@author isnowfox消息生成器\r\n\t*/\r\n\t//class mj.net.message.game.GameUserInfo\r\n\tvar GameUserInfo=(function(){\r\n\t\tfunction GameUserInfo(){\r\n\t\t\tthis._userName=null;\r\n\t\t\tthis._avatar=null;\r\n\t\t\tthis._sex=0;\r\n\t\t\tthis._gold=0;\r\n\t\t\tthis._score=0;\r\n\t\t\tthis._locationIndex=0;\r\n\t\t\tthis._userId=0;\r\n\t\t\tthis._online=false;\r\n\t\t\tthis._ip=null;\r\n\t\t\tthis._user0Distance=null;\r\n\t\t\tthis._user1Distance=null;\r\n\t\t\tthis._user2Distance=null;\r\n\t\t\tthis._user3Distance=null;\r\n\t\t}\r\n\r\n\t\t__class(GameUserInfo,'mj.net.message.game.GameUserInfo');\r\n\t\tvar __proto=GameUserInfo.prototype;\r\n\t\tLaya.imps(__proto,{\"com.isnowfox.core.io.message.Message\":true})\r\n\t\t__proto.decode=function(in0){\r\n\t\t\tthis._userName=in0.readString();\r\n\t\t\tthis._avatar=in0.readString();\r\n\t\t\tthis._sex=in0.readInt();\r\n\t\t\tthis._gold=in0.readInt();\r\n\t\t\tthis._score=in0.readInt();\r\n\t\t\tthis._locationIndex=in0.readInt();\r\n\t\t\tthis._userId=in0.readInt();\r\n\t\t\tthis._online=in0.readBoolean();\r\n\t\t\tthis._ip=in0.readString();\r\n\t\t\tthis._user0Distance=in0.readString();\r\n\t\t\tthis._user1Distance=in0.readString();\r\n\t\t\tthis._user2Distance=in0.readString();\r\n\t\t\tthis._user3Distance=in0.readString();\r\n\t\t}\r\n\r\n\t\t__proto.encode=function(out){\r\n\t\t\tout.writeString(this.userName);\r\n\t\t\tout.writeString(this.avatar);\r\n\t\t\tout.writeInt(this.sex);\r\n\t\t\tout.writeInt(this.gold);\r\n\t\t\tout.writeInt(this.score);\r\n\t\t\tout.writeInt(this.locationIndex);\r\n\t\t\tout.writeInt(this.userId);\r\n\t\t\tout.writeBoolean(this.online);\r\n\t\t\tout.writeString(this.ip);\r\n\t\t\tout.writeString(this.user0Distance);\r\n\t\t\tout.writeString(this.user1Distance);\r\n\t\t\tout.writeString(this.user2Distance);\r\n\t\t\tout.writeString(this.user3Distance);\r\n\t\t}\r\n\r\n\t\t__proto.toString=function(){\r\n\t\t\treturn \"GameUserInfo [userName=\"+this._userName+\",avatar=\"+this._avatar+\",sex=\"+this._sex+\",gold=\"+this._gold+\",score=\"+this._score+\",locationIndex=\"+this._locationIndex+\",userId=\"+this._userId+\",online=\"+this._online+\",ip=\"+this._ip+\",user0Distance=\"+this._user0Distance+\",user1Distance=\"+this._user1Distance+\",user2Distance=\"+this._user2Distance+\",user3Distance=\"+this._user3Distance+\", ]\";\r\n\t\t}\r\n\r\n\t\t__proto.getMessageType=function(){\r\n\t\t\treturn 1;\r\n\t\t}\r\n\r\n\t\t__proto.getMessageId=function(){\r\n\t\t\treturn 8;\r\n\t\t}\r\n\r\n\t\t__getset(0,__proto,'user2Distance',function(){\r\n\t\t\treturn this._user2Distance;\r\n\t\t\t},function(user2Distance){\r\n\t\t\tthis._user2Distance=user2Distance;\r\n\t\t});\r\n\r\n\t\t__getset(0,__proto,'user0Distance',function(){\r\n\t\t\treturn this._user0Distance;\r\n\t\t\t},function(user0Distance){\r\n\t\t\tthis._user0Distance=user0Distance;\r\n\t\t});\r\n\r\n\t\t__getset(0,__proto,'ip',function(){\r\n\t\t\treturn this._ip;\r\n\t\t\t},function(ip){\r\n\t\t\tthis._ip=ip;\r\n\t\t});\r\n\r\n\t\t__getset(0,__proto,'userId',function(){\r\n\t\t\treturn this._userId;\r\n\t\t\t},function(userId){\r\n\t\t\tthis._userId=userId;\r\n\t\t});\r\n\r\n\t\t__getset(0,__proto,'userName',function(){\r\n\t\t\treturn this._userName;\r\n\t\t\t},function(userName){\r\n\t\t\tthis._userName=userName;\r\n\t\t});\r\n\r\n\t\t__getset(0,__proto,'avatar',function(){\r\n\t\t\treturn this._avatar;\r\n\t\t\t},function(avatar){\r\n\t\t\tthis._avatar=avatar;\r\n\t\t});\r\n\r\n\t\t__getset(0,__proto,'user1Distance',function(){\r\n\t\t\treturn this._user1Distance;\r\n\t\t\t},function(user1Distance){\r\n\t\t\tthis._user1Distance=user1Distance;\r\n\t\t});\r\n\r\n\t\t__getset(0,__proto,'user3Distance',function(){\r\n\t\t\treturn this._user3Distance;\r\n\t\t\t},function(user3Distance){\r\n\t\t\tthis._user3Distance=user3Distance;\r\n\t\t});\r\n\r\n\t\t__getset(0,__proto,'locationIndex',function(){\r\n\t\t\treturn this._locationIndex;\r\n\t\t\t},function(locationIndex){\r\n\t\t\tthis._locationIndex=locationIndex;\r\n\t\t});\r\n\r\n\t\t__getset(0,__proto,'score',function(){\r\n\t\t\treturn this._score;\r\n\t\t\t},function(score){\r\n\t\t\tthis._score=score;\r\n\t\t});\r\n\r\n\t\t__getset(0,__proto,'gold',function(){\r\n\t\t\treturn this._gold;\r\n\t\t\t},function(gold){\r\n\t\t\tthis._gold=gold;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*0:女生,1:男生,2:未知\r\n\t\t*/\r\n\t\t/**\r\n\t\t*0:女生,1:男生,2:未知\r\n\t\t*/\r\n\t\t__getset(0,__proto,'sex',function(){\r\n\t\t\treturn this._sex;\r\n\t\t\t},function(sex){\r\n\t\t\tthis._sex=sex;\r\n\t\t});\r\n\r\n\t\t__getset(0,__proto,'online',function(){\r\n\t\t\treturn this._online;\r\n\t\t\t},function(online){\r\n\t\t\tthis._online=online;\r\n\t\t});\r\n\r\n\t\tGameUserInfo.create=function(userName,avatar,sex,gold,score,locationIndex,userId,online,ip,user0Distance,user1Distance,user2Distance,user3Distance){\r\n\t\t\tvar gameUserInfo=new GameUserInfo();\r\n\t\t\tgameUserInfo._userName=userName;\r\n\t\t\tgameUserInfo._avatar=avatar;\r\n\t\t\tgameUserInfo._sex=sex;\r\n\t\t\tgameUserInfo._gold=gold;\r\n\t\t\tgameUserInfo._score=score;\r\n\t\t\tgameUserInfo._locationIndex=locationIndex;\r\n\t\t\tgameUserInfo._userId=userId;\r\n\t\t\tgameUserInfo._online=online;\r\n\t\t\tgameUserInfo._ip=ip;\r\n\t\t\tgameUserInfo._user0Distance=user0Distance;\r\n\t\t\tgameUserInfo._user1Distance=user1Distance;\r\n\t\t\tgameUserInfo._user2Distance=user2Distance;\r\n\t\t\tgameUserInfo._user3Distance=user3Distance;\r\n\t\t\treturn gameUserInfo;\r\n\t\t}\r\n\r\n\t\tGameUserInfo.TYPE=1;\r\n\t\tGameUserInfo.ID=8;\r\n\t\treturn GameUserInfo;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*一局麻将的信息\r\n\t*\r\n\t*<b>生成器生成代码，请勿修改，扩展请继承</b>\r\n\t*@author isnowfox消息生成器\r\n\t*/\r\n\t//class mj.net.message.game.MajiangChapterMsg\r\n\tvar MajiangChapterMsg=(function(){\r\n\t\tfunction MajiangChapterMsg(){\r\n\t\t\tthis._freeLength=0;\r\n\t\t\tthis._baoliuLength=0;\r\n\t\t\tthis._huiEr=null;\r\n\t\t\tthis._bianType=null;\r\n\t\t\tthis._bianSource=0;\r\n\t\t\tthis._userPlace=null;\r\n\t\t\tthis._currentIndex=0;\r\n\t\t\tthis._chapterNums=0;\r\n\t\t\tthis._chapterNumsMax=0;\r\n\t\t\tthis._quanIndex=0;\r\n\t\t\tthis._zhuangIndex=0;\r\n\t\t\tthis._optCpgh=null;\r\n\t\t\tthis._optFaPai=null;\r\n\t\t\tthis._optOut=null;\r\n\t\t\tthis._syncOptTime=null;\r\n\t\t\tthis._gameChapterEnd=null;\r\n\t\t\tthis._tingPai=null;\r\n\t\t}\r\n\r\n\t\t__class(MajiangChapterMsg,'mj.net.message.game.MajiangChapterMsg');\r\n\t\tvar __proto=MajiangChapterMsg.prototype;\r\n\t\tLaya.imps(__proto,{\"com.isnowfox.core.io.message.Message\":true})\r\n\t\t__proto.decode=function(in0){\r\n\t\t\tthis._freeLength=in0.readInt();\r\n\t\t\tthis._baoliuLength=in0.readInt();\r\n\t\t\tthis._huiEr=in0.readIntArray();\r\n\t\t\tthis._bianType=in0.readString();\r\n\t\t\tthis._bianSource=in0.readInt();\r\n\t\t\tvar userPlaceLen=in0.readInt();\r\n\t\t\tif(userPlaceLen==-1){\r\n\t\t\t\tthis._userPlace=null;\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tthis._userPlace=[];\r\n\t\t\t\tfor(var userPlaceI=0;userPlaceI < userPlaceLen;userPlaceI++){\r\n\t\t\t\t\tvar userPlaceItem=new UserPlaceMsg();\r\n\t\t\t\t\tuserPlaceItem.decode(in0);\r\n\t\t\t\t\tthis._userPlace[userPlaceI]=(userPlaceItem);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis._currentIndex=in0.readInt();\r\n\t\t\tthis._chapterNums=in0.readInt();\r\n\t\t\tthis._chapterNumsMax=in0.readInt();\r\n\t\t\tthis._quanIndex=in0.readInt();\r\n\t\t\tthis._zhuangIndex=in0.readInt();\r\n\t\t\tvar optCpghIsNotNull=in0.readBoolean();\r\n\t\t\tif(optCpghIsNotNull){\r\n\t\t\t\tthis._optCpgh=new mj.net.message.game.OperationCPGH();\r\n\t\t\t\tthis._optCpgh.decode(in0);\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tthis._optCpgh=null;\r\n\t\t\t};\r\n\t\t\tvar optFaPaiIsNotNull=in0.readBoolean();\r\n\t\t\tif(optFaPaiIsNotNull){\r\n\t\t\t\tthis._optFaPai=new mj.net.message.game.OperationFaPai();\r\n\t\t\t\tthis._optFaPai.decode(in0);\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tthis._optFaPai=null;\r\n\t\t\t};\r\n\t\t\tvar optOutIsNotNull=in0.readBoolean();\r\n\t\t\tif(optOutIsNotNull){\r\n\t\t\t\tthis._optOut=new mj.net.message.game.OperationOut();\r\n\t\t\t\tthis._optOut.decode(in0);\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tthis._optOut=null;\r\n\t\t\t};\r\n\t\t\tvar syncOptTimeIsNotNull=in0.readBoolean();\r\n\t\t\tif(syncOptTimeIsNotNull){\r\n\t\t\t\tthis._syncOptTime=new mj.net.message.game.SyncOptTime();\r\n\t\t\t\tthis._syncOptTime.decode(in0);\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tthis._syncOptTime=null;\r\n\t\t\t};\r\n\t\t\tvar gameChapterEndIsNotNull=in0.readBoolean();\r\n\t\t\tif(gameChapterEndIsNotNull){\r\n\t\t\t\tthis._gameChapterEnd=new mj.net.message.game.GameChapterEnd();\r\n\t\t\t\tthis._gameChapterEnd.decode(in0);\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tthis._gameChapterEnd=null;\r\n\t\t\t};\r\n\t\t\tvar tingPaiIsNotNull=in0.readBoolean();\r\n\t\t\tif(tingPaiIsNotNull){\r\n\t\t\t\tthis._tingPai=new mj.net.message.game.TingPai();\r\n\t\t\t\tthis._tingPai.decode(in0);\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tthis._tingPai=null;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__proto.encode=function(out){\r\n\t\t\tout.writeInt(this.freeLength);\r\n\t\t\tout.writeInt(this.baoliuLength);\r\n\t\t\tout.writeIntArray(this.huiEr);\r\n\t\t\tout.writeString(this.bianType);\r\n\t\t\tout.writeInt(this.bianSource);\r\n\t\t\tif(this.userPlace==null){\r\n\t\t\t\tout.writeInt(-1);\r\n\t\t\t\t}else{\r\n\t\t\t\tvar userPlaceLen=this.userPlace.length;\r\n\t\t\t\tout.writeInt(userPlaceLen);\r\n\t\t\t\tfor(var userPlaceI=0;userPlaceI < userPlaceLen;userPlaceI++){\r\n\t\t\t\t\tthis.userPlace[userPlaceI].encode(out);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tout.writeInt(this.currentIndex);\r\n\t\t\tout.writeInt(this.chapterNums);\r\n\t\t\tout.writeInt(this.chapterNumsMax);\r\n\t\t\tout.writeInt(this.quanIndex);\r\n\t\t\tout.writeInt(this.zhuangIndex);\r\n\t\t\tif(this.optCpgh==null){\r\n\t\t\t\tout.writeBoolean(false);\r\n\t\t\t\t}else{\r\n\t\t\t\tout.writeBoolean(true);\r\n\t\t\t\tthis.optCpgh.encode(out);\r\n\t\t\t}\r\n\t\t\tif(this.optFaPai==null){\r\n\t\t\t\tout.writeBoolean(false);\r\n\t\t\t\t}else{\r\n\t\t\t\tout.writeBoolean(true);\r\n\t\t\t\tthis.optFaPai.encode(out);\r\n\t\t\t}\r\n\t\t\tif(this.optOut==null){\r\n\t\t\t\tout.writeBoolean(false);\r\n\t\t\t\t}else{\r\n\t\t\t\tout.writeBoolean(true);\r\n\t\t\t\tthis.optOut.encode(out);\r\n\t\t\t}\r\n\t\t\tif(this.syncOptTime==null){\r\n\t\t\t\tout.writeBoolean(false);\r\n\t\t\t\t}else{\r\n\t\t\t\tout.writeBoolean(true);\r\n\t\t\t\tthis.syncOptTime.encode(out);\r\n\t\t\t}\r\n\t\t\tif(this.gameChapterEnd==null){\r\n\t\t\t\tout.writeBoolean(false);\r\n\t\t\t\t}else{\r\n\t\t\t\tout.writeBoolean(true);\r\n\t\t\t\tthis.gameChapterEnd.encode(out);\r\n\t\t\t}\r\n\t\t\tif(this.tingPai==null){\r\n\t\t\t\tout.writeBoolean(false);\r\n\t\t\t\t}else{\r\n\t\t\t\tout.writeBoolean(true);\r\n\t\t\t\tthis.tingPai.encode(out);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__proto.toString=function(){\r\n\t\t\treturn \"MajiangChapterMsg [freeLength=\"+this._freeLength+\",baoliuLength=\"+this._baoliuLength+\",huiEr=\"+this._huiEr+\",bianType=\"+this._bianType+\",bianSource=\"+this._bianSource+\",userPlace=\"+this._userPlace+\",currentIndex=\"+this._currentIndex+\",chapterNums=\"+this._chapterNums+\",chapterNumsMax=\"+this._chapterNumsMax+\",quanIndex=\"+this._quanIndex+\",zhuangIndex=\"+this._zhuangIndex+\",optCpgh=\"+this._optCpgh+\",optFaPai=\"+this._optFaPai+\",optOut=\"+this._optOut+\",syncOptTime=\"+this._syncOptTime+\",gameChapterEnd=\"+this._gameChapterEnd+\",tingPai=\"+this._tingPai+\", ]\";\r\n\t\t}\r\n\r\n\t\t__proto.getMessageType=function(){\r\n\t\t\treturn 1;\r\n\t\t}\r\n\r\n\t\t__proto.getMessageId=function(){\r\n\t\t\treturn 9;\r\n\t\t}\r\n\r\n\t\t__getset(0,__proto,'tingPai',function(){\r\n\t\t\treturn this._tingPai;\r\n\t\t\t},function(tingPai){\r\n\t\t\tthis._tingPai=tingPai;\r\n\t\t});\r\n\r\n\t\t__getset(0,__proto,'syncOptTime',function(){\r\n\t\t\treturn this._syncOptTime;\r\n\t\t\t},function(syncOptTime){\r\n\t\t\tthis._syncOptTime=syncOptTime;\r\n\t\t});\r\n\r\n\t\t__getset(0,__proto,'optFaPai',function(){\r\n\t\t\treturn this._optFaPai;\r\n\t\t\t},function(optFaPai){\r\n\t\t\tthis._optFaPai=optFaPai;\r\n\t\t});\r\n\r\n\t\t__getset(0,__proto,'optCpgh',function(){\r\n\t\t\treturn this._optCpgh;\r\n\t\t\t},function(optCpgh){\r\n\t\t\tthis._optCpgh=optCpgh;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*圈index 0 东 1南 2西 3北 逆时针顺序\r\n\t\t*/\r\n\t\t/**\r\n\t\t*圈index 0 东 1南 2西 3北 逆时针顺序\r\n\t\t*/\r\n\t\t__getset(0,__proto,'quanIndex',function(){\r\n\t\t\treturn this._quanIndex;\r\n\t\t\t},function(quanIndex){\r\n\t\t\tthis._quanIndex=quanIndex;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*局数,0开始\r\n\t\t*/\r\n\t\t/**\r\n\t\t*局数,0开始\r\n\t\t*/\r\n\t\t__getset(0,__proto,'chapterNumsMax',function(){\r\n\t\t\treturn this._chapterNumsMax;\r\n\t\t\t},function(chapterNumsMax){\r\n\t\t\tthis._chapterNumsMax=chapterNumsMax;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*局数,0开始\r\n\t\t*/\r\n\t\t/**\r\n\t\t*局数,0开始\r\n\t\t*/\r\n\t\t__getset(0,__proto,'chapterNums',function(){\r\n\t\t\treturn this._chapterNums;\r\n\t\t\t},function(chapterNums){\r\n\t\t\tthis._chapterNums=chapterNums;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*保留张数\r\n\t\t*/\r\n\t\t/**\r\n\t\t*保留张数\r\n\t\t*/\r\n\t\t__getset(0,__proto,'baoliuLength',function(){\r\n\t\t\treturn this._baoliuLength;\r\n\t\t\t},function(baoliuLength){\r\n\t\t\tthis._baoliuLength=baoliuLength;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*当前操作用户\r\n\t\t*/\r\n\t\t/**\r\n\t\t*当前操作用户\r\n\t\t*/\r\n\t\t__getset(0,__proto,'currentIndex',function(){\r\n\t\t\treturn this._currentIndex;\r\n\t\t\t},function(currentIndex){\r\n\t\t\tthis._currentIndex=currentIndex;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*变化类型！！\r\n\t\t*/\r\n\t\t/**\r\n\t\t*变化类型！！\r\n\t\t*/\r\n\t\t__getset(0,__proto,'bianSource',function(){\r\n\t\t\treturn this._bianSource;\r\n\t\t\t},function(bianSource){\r\n\t\t\tthis._bianSource=bianSource;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*变化类型！！\r\n\t\t*/\r\n\t\t/**\r\n\t\t*变化类型！！\r\n\t\t*/\r\n\t\t__getset(0,__proto,'bianType',function(){\r\n\t\t\treturn this._bianType;\r\n\t\t\t},function(bianType){\r\n\t\t\tthis._bianType=bianType;\r\n\t\t});\r\n\r\n\t\t__getset(0,__proto,'userPlace',function(){\r\n\t\t\treturn this._userPlace;\r\n\t\t\t},function(userPlace){\r\n\t\t\tthis._userPlace=userPlace;\r\n\t\t});\r\n\r\n\t\t__getset(0,__proto,'gameChapterEnd',function(){\r\n\t\t\treturn this._gameChapterEnd;\r\n\t\t\t},function(gameChapterEnd){\r\n\t\t\tthis._gameChapterEnd=gameChapterEnd;\r\n\t\t});\r\n\r\n\t\t__getset(0,__proto,'optOut',function(){\r\n\t\t\treturn this._optOut;\r\n\t\t\t},function(optOut){\r\n\t\t\tthis._optOut=optOut;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*会儿牌\r\n\t\t*/\r\n\t\t/**\r\n\t\t*会儿牌\r\n\t\t*/\r\n\t\t__getset(0,__proto,'huiEr',function(){\r\n\t\t\treturn this._huiEr;\r\n\t\t\t},function(huiEr){\r\n\t\t\tthis._huiEr=huiEr;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*庄index 0 东 1南 2西 3北 逆时针顺序\r\n\t\t*/\r\n\t\t/**\r\n\t\t*庄index 0 东 1南 2西 3北 逆时针顺序\r\n\t\t*/\r\n\t\t__getset(0,__proto,'zhuangIndex',function(){\r\n\t\t\treturn this._zhuangIndex;\r\n\t\t\t},function(zhuangIndex){\r\n\t\t\tthis._zhuangIndex=zhuangIndex;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*剩余张数\r\n\t\t*/\r\n\t\t/**\r\n\t\t*剩余张数\r\n\t\t*/\r\n\t\t__getset(0,__proto,'freeLength',function(){\r\n\t\t\treturn this._freeLength;\r\n\t\t\t},function(freeLength){\r\n\t\t\tthis._freeLength=freeLength;\r\n\t\t});\r\n\r\n\t\tMajiangChapterMsg.create=function(freeLength,baoliuLength,huiEr,bianType,bianSource,userPlace,currentIndex,chapterNums,chapterNumsMax,quanIndex,zhuangIndex,optCpgh,optFaPai,optOut,syncOptTime,gameChapterEnd,tingPai){\r\n\t\t\tvar majiangChapterMsg=new MajiangChapterMsg();\r\n\t\t\tmajiangChapterMsg._freeLength=freeLength;\r\n\t\t\tmajiangChapterMsg._baoliuLength=baoliuLength;\r\n\t\t\tmajiangChapterMsg._huiEr=huiEr;\r\n\t\t\tmajiangChapterMsg._bianType=bianType;\r\n\t\t\tmajiangChapterMsg._bianSource=bianSource;\r\n\t\t\tmajiangChapterMsg._userPlace=userPlace;\r\n\t\t\tmajiangChapterMsg._currentIndex=currentIndex;\r\n\t\t\tmajiangChapterMsg._chapterNums=chapterNums;\r\n\t\t\tmajiangChapterMsg._chapterNumsMax=chapterNumsMax;\r\n\t\t\tmajiangChapterMsg._quanIndex=quanIndex;\r\n\t\t\tmajiangChapterMsg._zhuangIndex=zhuangIndex;\r\n\t\t\tmajiangChapterMsg._optCpgh=optCpgh;\r\n\t\t\tmajiangChapterMsg._optFaPai=optFaPai;\r\n\t\t\tmajiangChapterMsg._optOut=optOut;\r\n\t\t\tmajiangChapterMsg._syncOptTime=syncOptTime;\r\n\t\t\tmajiangChapterMsg._gameChapterEnd=gameChapterEnd;\r\n\t\t\tmajiangChapterMsg._tingPai=tingPai;\r\n\t\t\treturn majiangChapterMsg;\r\n\t\t}\r\n\r\n\t\tMajiangChapterMsg.TYPE=1;\r\n\t\tMajiangChapterMsg.ID=9;\r\n\t\treturn MajiangChapterMsg;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*通知客户端\"吃碰杠胡\"\r\n\t*\r\n\t*<b>生成器生成代码，请勿修改，扩展请继承</b>\r\n\t*@author isnowfox消息生成器\r\n\t*/\r\n\t//class mj.net.message.game.OperationCPGH\r\n\tvar OperationCPGH=(function(){\r\n\t\tfunction OperationCPGH(){\r\n\t\t\tthis._index=0;\r\n\t\t\tthis._chi=null;\r\n\t\t\tthis._isPeng=false;\r\n\t\t\tthis._isGang=false;\r\n\t\t\tthis._isHu=false;\r\n\t\t\tthis._pai=0;\r\n\t\t}\r\n\r\n\t\t__class(OperationCPGH,'mj.net.message.game.OperationCPGH');\r\n\t\tvar __proto=OperationCPGH.prototype;\r\n\t\tLaya.imps(__proto,{\"com.isnowfox.core.io.message.Message\":true})\r\n\t\t__proto.decode=function(in0){\r\n\t\t\tthis._index=in0.readInt();\r\n\t\t\tthis._chi=in0.readIntArray();\r\n\t\t\tthis._isPeng=in0.readBoolean();\r\n\t\t\tthis._isGang=in0.readBoolean();\r\n\t\t\tthis._isHu=in0.readBoolean();\r\n\t\t\tthis._pai=in0.readInt();\r\n\t\t}\r\n\r\n\t\t__proto.encode=function(out){\r\n\t\t\tout.writeInt(this.index);\r\n\t\t\tout.writeIntArray(this.chi);\r\n\t\t\tout.writeBoolean(this.isPeng);\r\n\t\t\tout.writeBoolean(this.isGang);\r\n\t\t\tout.writeBoolean(this.isHu);\r\n\t\t\tout.writeInt(this.pai);\r\n\t\t}\r\n\r\n\t\t__proto.toString=function(){\r\n\t\t\treturn \"OperationCPGH [index=\"+this._index+\",chi=\"+this._chi+\",isPeng=\"+this._isPeng+\",isGang=\"+this._isGang+\",isHu=\"+this._isHu+\",pai=\"+this._pai+\", ]\";\r\n\t\t}\r\n\r\n\t\t__proto.getMessageType=function(){\r\n\t\t\treturn 1;\r\n\t\t}\r\n\r\n\t\t__proto.getMessageId=function(){\r\n\t\t\treturn 10;\r\n\t\t}\r\n\r\n\t\t__getset(0,__proto,'pai',function(){\r\n\t\t\treturn this._pai;\r\n\t\t\t},function(pai){\r\n\t\t\tthis._pai=pai;\r\n\t\t});\r\n\r\n\t\t__getset(0,__proto,'isGang',function(){\r\n\t\t\treturn this._isGang;\r\n\t\t\t},function(isGang){\r\n\t\t\tthis._isGang=isGang;\r\n\t\t});\r\n\r\n\t\t__getset(0,__proto,'isPeng',function(){\r\n\t\t\treturn this._isPeng;\r\n\t\t\t},function(isPeng){\r\n\t\t\tthis._isPeng=isPeng;\r\n\t\t});\r\n\r\n\t\t__getset(0,__proto,'isHu',function(){\r\n\t\t\treturn this._isHu;\r\n\t\t\t},function(isHu){\r\n\t\t\tthis._isHu=isHu;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*3个一组一组\r\n\t\t*/\r\n\t\t/**\r\n\t\t*3个一组一组\r\n\t\t*/\r\n\t\t__getset(0,__proto,'chi',function(){\r\n\t\t\treturn this._chi;\r\n\t\t\t},function(chi){\r\n\t\t\tthis._chi=chi;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*位置\r\n\t\t*/\r\n\t\t/**\r\n\t\t*位置\r\n\t\t*/\r\n\t\t__getset(0,__proto,'index',function(){\r\n\t\t\treturn this._index;\r\n\t\t\t},function(index){\r\n\t\t\tthis._index=index;\r\n\t\t});\r\n\r\n\t\tOperationCPGH.create=function(index,chi,isPeng,isGang,isHu,pai){\r\n\t\t\tvar operationCPGH=new OperationCPGH();\r\n\t\t\toperationCPGH._index=index;\r\n\t\t\toperationCPGH._chi=chi;\r\n\t\t\toperationCPGH._isPeng=isPeng;\r\n\t\t\toperationCPGH._isGang=isGang;\r\n\t\t\toperationCPGH._isHu=isHu;\r\n\t\t\toperationCPGH._pai=pai;\r\n\t\t\treturn operationCPGH;\r\n\t\t}\r\n\r\n\t\tOperationCPGH.TYPE=1;\r\n\t\tOperationCPGH.ID=10;\r\n\t\treturn OperationCPGH;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*通知客户端\"吃碰杠胡\" 回复\r\n\t*\r\n\t*<b>生成器生成代码，请勿修改，扩展请继承</b>\r\n\t*@author isnowfox消息生成器\r\n\t*/\r\n\t//class mj.net.message.game.OperationCPGHRet\r\n\tvar OperationCPGHRet=(function(){\r\n\t\tfunction OperationCPGHRet(){\r\n\t\t\tthis._opt=null;\r\n\t\t\tthis._chi=null;\r\n\t\t}\r\n\r\n\t\t__class(OperationCPGHRet,'mj.net.message.game.OperationCPGHRet');\r\n\t\tvar __proto=OperationCPGHRet.prototype;\r\n\t\tLaya.imps(__proto,{\"com.isnowfox.core.io.message.Message\":true})\r\n\t\t__proto.decode=function(in0){\r\n\t\t\tthis._opt=in0.readString();\r\n\t\t\tthis._chi=in0.readIntArray();\r\n\t\t}\r\n\r\n\t\t__proto.encode=function(out){\r\n\t\t\tout.writeString(this.opt);\r\n\t\t\tout.writeIntArray(this.chi);\r\n\t\t}\r\n\r\n\t\t__proto.toString=function(){\r\n\t\t\treturn \"OperationCPGHRet [opt=\"+this._opt+\",chi=\"+this._chi+\", ]\";\r\n\t\t}\r\n\r\n\t\t__proto.getMessageType=function(){\r\n\t\t\treturn 1;\r\n\t\t}\r\n\r\n\t\t__proto.getMessageId=function(){\r\n\t\t\treturn 11;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*如果是吃牌，回复吃的组合\r\n\t\t*/\r\n\t\t/**\r\n\t\t*如果是吃牌，回复吃的组合\r\n\t\t*/\r\n\t\t__getset(0,__proto,'chi',function(){\r\n\t\t\treturn this._chi;\r\n\t\t\t},function(chi){\r\n\t\t\tthis._chi=chi;\r\n\t\t});\r\n\r\n\t\t__getset(0,__proto,'opt',function(){\r\n\t\t\treturn this._opt;\r\n\t\t\t},function(opt){\r\n\t\t\tthis._opt=opt;\r\n\t\t});\r\n\r\n\t\tOperationCPGHRet.create=function(opt,chi){\r\n\t\t\tvar operationCPGHRet=new OperationCPGHRet();\r\n\t\t\toperationCPGHRet._opt=opt;\r\n\t\t\toperationCPGHRet._chi=chi;\r\n\t\t\treturn operationCPGHRet;\r\n\t\t}\r\n\r\n\t\tOperationCPGHRet.TYPE=1;\r\n\t\tOperationCPGHRet.ID=11;\r\n\t\treturn OperationCPGHRet;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*自己的发牌的信息\r\n\t*\r\n\t*<b>生成器生成代码，请勿修改，扩展请继承</b>\r\n\t*@author isnowfox消息生成器\r\n\t*/\r\n\t//class mj.net.message.game.OperationFaPai\r\n\tvar OperationFaPai=(function(){\r\n\t\tfunction OperationFaPai(){\r\n\t\t\tthis._index=0;\r\n\t\t\tthis._pai=0;\r\n\t\t\tthis._anGang=null;\r\n\t\t\tthis._mingGang=null;\r\n\t\t\tthis._hu=false;\r\n\t\t}\r\n\r\n\t\t__class(OperationFaPai,'mj.net.message.game.OperationFaPai');\r\n\t\tvar __proto=OperationFaPai.prototype;\r\n\t\tLaya.imps(__proto,{\"com.isnowfox.core.io.message.Message\":true})\r\n\t\t__proto.decode=function(in0){\r\n\t\t\tthis._index=in0.readInt();\r\n\t\t\tthis._pai=in0.readInt();\r\n\t\t\tthis._anGang=in0.readIntArray();\r\n\t\t\tthis._mingGang=in0.readIntArray();\r\n\t\t\tthis._hu=in0.readBoolean();\r\n\t\t}\r\n\r\n\t\t__proto.encode=function(out){\r\n\t\t\tout.writeInt(this.index);\r\n\t\t\tout.writeInt(this.pai);\r\n\t\t\tout.writeIntArray(this.anGang);\r\n\t\t\tout.writeIntArray(this.mingGang);\r\n\t\t\tout.writeBoolean(this.hu);\r\n\t\t}\r\n\r\n\t\t__proto.toString=function(){\r\n\t\t\treturn \"OperationFaPai [index=\"+this._index+\",pai=\"+this._pai+\",anGang=\"+this._anGang+\",mingGang=\"+this._mingGang+\",hu=\"+this._hu+\", ]\";\r\n\t\t}\r\n\r\n\t\t__proto.getMessageType=function(){\r\n\t\t\treturn 1;\r\n\t\t}\r\n\r\n\t\t__proto.getMessageId=function(){\r\n\t\t\treturn 12;\r\n\t\t}\r\n\r\n\t\t__getset(0,__proto,'hu',function(){\r\n\t\t\treturn this._hu;\r\n\t\t\t},function(hu){\r\n\t\t\tthis._hu=hu;\r\n\t\t});\r\n\r\n\t\t__getset(0,__proto,'mingGang',function(){\r\n\t\t\treturn this._mingGang;\r\n\t\t\t},function(mingGang){\r\n\t\t\tthis._mingGang=mingGang;\r\n\t\t});\r\n\r\n\t\t__getset(0,__proto,'anGang',function(){\r\n\t\t\treturn this._anGang;\r\n\t\t\t},function(anGang){\r\n\t\t\tthis._anGang=anGang;\r\n\t\t});\r\n\r\n\t\t__getset(0,__proto,'pai',function(){\r\n\t\t\treturn this._pai;\r\n\t\t\t},function(pai){\r\n\t\t\tthis._pai=pai;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*位置\r\n\t\t*/\r\n\t\t/**\r\n\t\t*位置\r\n\t\t*/\r\n\t\t__getset(0,__proto,'index',function(){\r\n\t\t\treturn this._index;\r\n\t\t\t},function(index){\r\n\t\t\tthis._index=index;\r\n\t\t});\r\n\r\n\t\tOperationFaPai.create=function(index,pai,anGang,mingGang,hu){\r\n\t\t\tvar operationFaPai=new OperationFaPai();\r\n\t\t\toperationFaPai._index=index;\r\n\t\t\toperationFaPai._pai=pai;\r\n\t\t\toperationFaPai._anGang=anGang;\r\n\t\t\toperationFaPai._mingGang=mingGang;\r\n\t\t\toperationFaPai._hu=hu;\r\n\t\t\treturn operationFaPai;\r\n\t\t}\r\n\r\n\t\tOperationFaPai.TYPE=1;\r\n\t\tOperationFaPai.ID=12;\r\n\t\treturn OperationFaPai;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*自己的发牌的信息\r\n\t*\r\n\t*<b>生成器生成代码，请勿修改，扩展请继承</b>\r\n\t*@author isnowfox消息生成器\r\n\t*/\r\n\t//class mj.net.message.game.OperationFaPaiRet\r\n\tvar OperationFaPaiRet=(function(){\r\n\t\tfunction OperationFaPaiRet(){\r\n\t\t\tthis._opt=null;\r\n\t\t\tthis._pai=0;\r\n\t\t}\r\n\r\n\t\t__class(OperationFaPaiRet,'mj.net.message.game.OperationFaPaiRet');\r\n\t\tvar __proto=OperationFaPaiRet.prototype;\r\n\t\tLaya.imps(__proto,{\"com.isnowfox.core.io.message.Message\":true})\r\n\t\t__proto.decode=function(in0){\r\n\t\t\tthis._opt=in0.readString();\r\n\t\t\tthis._pai=in0.readInt();\r\n\t\t}\r\n\r\n\t\t__proto.encode=function(out){\r\n\t\t\tout.writeString(this.opt);\r\n\t\t\tout.writeInt(this.pai);\r\n\t\t}\r\n\r\n\t\t__proto.toString=function(){\r\n\t\t\treturn \"OperationFaPaiRet [opt=\"+this._opt+\",pai=\"+this._pai+\", ]\";\r\n\t\t}\r\n\r\n\t\t__proto.getMessageType=function(){\r\n\t\t\treturn 1;\r\n\t\t}\r\n\r\n\t\t__proto.getMessageId=function(){\r\n\t\t\treturn 13;\r\n\t\t}\r\n\r\n\t\t__getset(0,__proto,'pai',function(){\r\n\t\t\treturn this._pai;\r\n\t\t\t},function(pai){\r\n\t\t\tthis._pai=pai;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*OUT:打牌,AN_GANG:暗杠牌,XIAO_MING_GANG:暗杠牌,HU:胡牌\r\n\t\t*/\r\n\t\t/**\r\n\t\t*OUT:打牌,AN_GANG:暗杠牌,XIAO_MING_GANG:暗杠牌,HU:胡牌\r\n\t\t*/\r\n\t\t__getset(0,__proto,'opt',function(){\r\n\t\t\treturn this._opt;\r\n\t\t\t},function(opt){\r\n\t\t\tthis._opt=opt;\r\n\t\t});\r\n\r\n\t\tOperationFaPaiRet.create=function(opt,pai){\r\n\t\t\tvar operationFaPaiRet=new OperationFaPaiRet();\r\n\t\t\toperationFaPaiRet._opt=opt;\r\n\t\t\toperationFaPaiRet._pai=pai;\r\n\t\t\treturn operationFaPaiRet;\r\n\t\t}\r\n\r\n\t\tOperationFaPaiRet.TYPE=1;\r\n\t\tOperationFaPaiRet.ID=13;\r\n\t\treturn OperationFaPaiRet;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*通知用户出牌\r\n\t*\r\n\t*<b>生成器生成代码，请勿修改，扩展请继承</b>\r\n\t*@author isnowfox消息生成器\r\n\t*/\r\n\t//class mj.net.message.game.OperationOut\r\n\tvar OperationOut=(function(){\r\n\t\tfunction OperationOut(){\r\n\t\t\tthis._index=0;\r\n\t\t}\r\n\r\n\t\t__class(OperationOut,'mj.net.message.game.OperationOut');\r\n\t\tvar __proto=OperationOut.prototype;\r\n\t\tLaya.imps(__proto,{\"com.isnowfox.core.io.message.Message\":true})\r\n\t\t__proto.decode=function(in0){\r\n\t\t\tthis._index=in0.readInt();\r\n\t\t}\r\n\r\n\t\t__proto.encode=function(out){\r\n\t\t\tout.writeInt(this.index);\r\n\t\t}\r\n\r\n\t\t__proto.toString=function(){\r\n\t\t\treturn \"OperationOut [index=\"+this._index+\", ]\";\r\n\t\t}\r\n\r\n\t\t__proto.getMessageType=function(){\r\n\t\t\treturn 1;\r\n\t\t}\r\n\r\n\t\t__proto.getMessageId=function(){\r\n\t\t\treturn 14;\r\n\t\t}\r\n\r\n\t\t__getset(0,__proto,'index',function(){\r\n\t\t\treturn this._index;\r\n\t\t\t},function(index){\r\n\t\t\tthis._index=index;\r\n\t\t});\r\n\r\n\t\tOperationOut.create=function(index){\r\n\t\t\tvar operationOut=new OperationOut();\r\n\t\t\toperationOut._index=index;\r\n\t\t\treturn operationOut;\r\n\t\t}\r\n\r\n\t\tOperationOut.TYPE=1;\r\n\t\tOperationOut.ID=14;\r\n\t\treturn OperationOut;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*出牌回复\r\n\t*\r\n\t*<b>生成器生成代码，请勿修改，扩展请继承</b>\r\n\t*@author isnowfox消息生成器\r\n\t*/\r\n\t//class mj.net.message.game.OperationOutRet\r\n\tvar OperationOutRet=(function(){\r\n\t\tfunction OperationOutRet(){\r\n\t\t\tthis._pai=0;\r\n\t\t}\r\n\r\n\t\t__class(OperationOutRet,'mj.net.message.game.OperationOutRet');\r\n\t\tvar __proto=OperationOutRet.prototype;\r\n\t\tLaya.imps(__proto,{\"com.isnowfox.core.io.message.Message\":true})\r\n\t\t__proto.decode=function(in0){\r\n\t\t\tthis._pai=in0.readInt();\r\n\t\t}\r\n\r\n\t\t__proto.encode=function(out){\r\n\t\t\tout.writeInt(this.pai);\r\n\t\t}\r\n\r\n\t\t__proto.toString=function(){\r\n\t\t\treturn \"OperationOutRet [pai=\"+this._pai+\", ]\";\r\n\t\t}\r\n\r\n\t\t__proto.getMessageType=function(){\r\n\t\t\treturn 1;\r\n\t\t}\r\n\r\n\t\t__proto.getMessageId=function(){\r\n\t\t\treturn 15;\r\n\t\t}\r\n\r\n\t\t__getset(0,__proto,'pai',function(){\r\n\t\t\treturn this._pai;\r\n\t\t\t},function(pai){\r\n\t\t\tthis._pai=pai;\r\n\t\t});\r\n\r\n\t\tOperationOutRet.create=function(pai){\r\n\t\t\tvar operationOutRet=new OperationOutRet();\r\n\t\t\toperationOutRet._pai=pai;\r\n\t\t\treturn operationOutRet;\r\n\t\t}\r\n\r\n\t\tOperationOutRet.TYPE=1;\r\n\t\tOperationOutRet.ID=15;\r\n\t\treturn OperationOutRet;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*同步操作\r\n\t*FA:发牌，OUT:打牌,OUT_OK:打牌成功，没人用这个哎,CHI:吃,PENG:碰,AN_GANG:暗杠牌,XIAO_MING_GANG:暗杠牌,DA_MING_GANG:暗杠牌,HU:胡牌\r\n\t*\r\n\t*<b>生成器生成代码，请勿修改，扩展请继承</b>\r\n\t*@author isnowfox消息生成器\r\n\t*/\r\n\t//class mj.net.message.game.SyncOpt\r\n\tvar SyncOpt=(function(){\r\n\t\tfunction SyncOpt(){\r\n\t\t\tthis._opt=null;\r\n\t\t\tthis._index=0;\r\n\t\t\tthis._pai=0;\r\n\t\t\tthis._chi=null;\r\n\t\t}\r\n\r\n\t\t__class(SyncOpt,'mj.net.message.game.SyncOpt');\r\n\t\tvar __proto=SyncOpt.prototype;\r\n\t\tLaya.imps(__proto,{\"com.isnowfox.core.io.message.Message\":true})\r\n\t\t__proto.decode=function(in0){\r\n\t\t\tthis._opt=in0.readString();\r\n\t\t\tthis._index=in0.readInt();\r\n\t\t\tthis._pai=in0.readInt();\r\n\t\t\tthis._chi=in0.readIntArray();\r\n\t\t}\r\n\r\n\t\t__proto.encode=function(out){\r\n\t\t\tout.writeString(this.opt);\r\n\t\t\tout.writeInt(this.index);\r\n\t\t\tout.writeInt(this.pai);\r\n\t\t\tout.writeIntArray(this.chi);\r\n\t\t}\r\n\r\n\t\t__proto.toString=function(){\r\n\t\t\treturn \"SyncOpt [opt=\"+this._opt+\",index=\"+this._index+\",pai=\"+this._pai+\",chi=\"+this._chi+\", ]\";\r\n\t\t}\r\n\r\n\t\t__proto.getMessageType=function(){\r\n\t\t\treturn 1;\r\n\t\t}\r\n\r\n\t\t__proto.getMessageId=function(){\r\n\t\t\treturn 16;\r\n\t\t}\r\n\r\n\t\t__getset(0,__proto,'pai',function(){\r\n\t\t\treturn this._pai;\r\n\t\t\t},function(pai){\r\n\t\t\tthis._pai=pai;\r\n\t\t});\r\n\r\n\t\t__getset(0,__proto,'chi',function(){\r\n\t\t\treturn this._chi;\r\n\t\t\t},function(chi){\r\n\t\t\tthis._chi=chi;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*位置\r\n\t\t*/\r\n\t\t/**\r\n\t\t*位置\r\n\t\t*/\r\n\t\t__getset(0,__proto,'index',function(){\r\n\t\t\treturn this._index;\r\n\t\t\t},function(index){\r\n\t\t\tthis._index=index;\r\n\t\t});\r\n\r\n\t\t__getset(0,__proto,'opt',function(){\r\n\t\t\treturn this._opt;\r\n\t\t\t},function(opt){\r\n\t\t\tthis._opt=opt;\r\n\t\t});\r\n\r\n\t\tSyncOpt.create=function(opt,index,pai,chi){\r\n\t\t\tvar syncOpt=new SyncOpt();\r\n\t\t\tsyncOpt._opt=opt;\r\n\t\t\tsyncOpt._index=index;\r\n\t\t\tsyncOpt._pai=pai;\r\n\t\t\tsyncOpt._chi=chi;\r\n\t\t\treturn syncOpt;\r\n\t\t}\r\n\r\n\t\tSyncOpt.TYPE=1;\r\n\t\tSyncOpt.ID=16;\r\n\t\treturn SyncOpt;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*同步操作\r\n\t*\r\n\t*<b>生成器生成代码，请勿修改，扩展请继承</b>\r\n\t*@author isnowfox消息生成器\r\n\t*/\r\n\t//class mj.net.message.game.SyncOptTime\r\n\tvar SyncOptTime=(function(){\r\n\t\tfunction SyncOptTime(){\r\n\t\t\tthis._index=0;\r\n\t\t\tthis._leftTime=0;\r\n\t\t}\r\n\r\n\t\t__class(SyncOptTime,'mj.net.message.game.SyncOptTime');\r\n\t\tvar __proto=SyncOptTime.prototype;\r\n\t\tLaya.imps(__proto,{\"com.isnowfox.core.io.message.Message\":true})\r\n\t\t__proto.decode=function(in0){\r\n\t\t\tthis._index=in0.readInt();\r\n\t\t\tthis._leftTime=in0.readInt();\r\n\t\t}\r\n\r\n\t\t__proto.encode=function(out){\r\n\t\t\tout.writeInt(this.index);\r\n\t\t\tout.writeInt(this.leftTime);\r\n\t\t}\r\n\r\n\t\t__proto.toString=function(){\r\n\t\t\treturn \"SyncOptTime [index=\"+this._index+\",leftTime=\"+this._leftTime+\", ]\";\r\n\t\t}\r\n\r\n\t\t__proto.getMessageType=function(){\r\n\t\t\treturn 1;\r\n\t\t}\r\n\r\n\t\t__proto.getMessageId=function(){\r\n\t\t\treturn 17;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*毫秒\r\n\t\t*/\r\n\t\t/**\r\n\t\t*毫秒\r\n\t\t*/\r\n\t\t__getset(0,__proto,'leftTime',function(){\r\n\t\t\treturn this._leftTime;\r\n\t\t\t},function(leftTime){\r\n\t\t\tthis._leftTime=leftTime;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*位置\r\n\t\t*/\r\n\t\t/**\r\n\t\t*位置\r\n\t\t*/\r\n\t\t__getset(0,__proto,'index',function(){\r\n\t\t\treturn this._index;\r\n\t\t\t},function(index){\r\n\t\t\tthis._index=index;\r\n\t\t});\r\n\r\n\t\tSyncOptTime.create=function(index,leftTime){\r\n\t\t\tvar syncOptTime=new SyncOptTime();\r\n\t\t\tsyncOptTime._index=index;\r\n\t\t\tsyncOptTime._leftTime=leftTime;\r\n\t\t\treturn syncOptTime;\r\n\t\t}\r\n\r\n\t\tSyncOptTime.TYPE=1;\r\n\t\tSyncOptTime.ID=17;\r\n\t\treturn SyncOptTime;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*通知用户出牌\r\n\t*\r\n\t*<b>生成器生成代码，请勿修改，扩展请继承</b>\r\n\t*@author isnowfox消息生成器\r\n\t*/\r\n\t//class mj.net.message.game.TingPai\r\n\tvar TingPai=(function(){\r\n\t\tfunction TingPai(){\r\n\t\t\tthis._pais=null;\r\n\t\t}\r\n\r\n\t\t__class(TingPai,'mj.net.message.game.TingPai');\r\n\t\tvar __proto=TingPai.prototype;\r\n\t\tLaya.imps(__proto,{\"com.isnowfox.core.io.message.Message\":true})\r\n\t\t__proto.decode=function(in0){\r\n\t\t\tthis._pais=in0.readIntArray();\r\n\t\t}\r\n\r\n\t\t__proto.encode=function(out){\r\n\t\t\tout.writeIntArray(this.pais);\r\n\t\t}\r\n\r\n\t\t__proto.toString=function(){\r\n\t\t\treturn \"TingPai [pais=\"+this._pais+\", ]\";\r\n\t\t}\r\n\r\n\t\t__proto.getMessageType=function(){\r\n\t\t\treturn 1;\r\n\t\t}\r\n\r\n\t\t__proto.getMessageId=function(){\r\n\t\t\treturn 18;\r\n\t\t}\r\n\r\n\t\t__getset(0,__proto,'pais',function(){\r\n\t\t\treturn this._pais;\r\n\t\t\t},function(pais){\r\n\t\t\tthis._pais=pais;\r\n\t\t});\r\n\r\n\t\tTingPai.create=function(pais){\r\n\t\t\tvar tingPai=new TingPai();\r\n\t\t\ttingPai._pais=pais;\r\n\t\t\treturn tingPai;\r\n\t\t}\r\n\r\n\t\tTingPai.TYPE=1;\r\n\t\tTingPai.ID=18;\r\n\t\treturn TingPai;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*用户离线\r\n\t*\r\n\t*<b>生成器生成代码，请勿修改，扩展请继承</b>\r\n\t*@author isnowfox消息生成器\r\n\t*/\r\n\t//class mj.net.message.game.UserOffline\r\n\tvar UserOffline=(function(){\r\n\t\tfunction UserOffline(){\r\n\t\t\tthis._index=0;\r\n\t\t}\r\n\r\n\t\t__class(UserOffline,'mj.net.message.game.UserOffline');\r\n\t\tvar __proto=UserOffline.prototype;\r\n\t\tLaya.imps(__proto,{\"com.isnowfox.core.io.message.Message\":true})\r\n\t\t__proto.decode=function(in0){\r\n\t\t\tthis._index=in0.readInt();\r\n\t\t}\r\n\r\n\t\t__proto.encode=function(out){\r\n\t\t\tout.writeInt(this.index);\r\n\t\t}\r\n\r\n\t\t__proto.toString=function(){\r\n\t\t\treturn \"UserOffline [index=\"+this._index+\", ]\";\r\n\t\t}\r\n\r\n\t\t__proto.getMessageType=function(){\r\n\t\t\treturn 1;\r\n\t\t}\r\n\r\n\t\t__proto.getMessageId=function(){\r\n\t\t\treturn 19;\r\n\t\t}\r\n\r\n\t\t__getset(0,__proto,'index',function(){\r\n\t\t\treturn this._index;\r\n\t\t\t},function(index){\r\n\t\t\tthis._index=index;\r\n\t\t});\r\n\r\n\t\tUserOffline.create=function(index){\r\n\t\t\tvar userOffline=new UserOffline();\r\n\t\t\tuserOffline._index=index;\r\n\t\t\treturn userOffline;\r\n\t\t}\r\n\r\n\t\tUserOffline.TYPE=1;\r\n\t\tUserOffline.ID=19;\r\n\t\treturn UserOffline;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*一局麻将的信息\r\n\t*\r\n\t*<b>生成器生成代码，请勿修改，扩展请继承</b>\r\n\t*@author isnowfox消息生成器\r\n\t*/\r\n\t//class mj.net.message.game.UserPlaceMsg\r\n\tvar UserPlaceMsg=(function(){\r\n\t\tfunction UserPlaceMsg(){\r\n\t\t\tthis._shouPai=null;\r\n\t\t\tthis._shouPaiLen=0;\r\n\t\t\tthis._anGang=null;\r\n\t\t\tthis._xiaoMingGang=null;\r\n\t\t\tthis._daMingGang=null;\r\n\t\t\tthis._peng=null;\r\n\t\t\tthis._chi=null;\r\n\t\t\tthis._outPai=null;\r\n\t\t}\r\n\r\n\t\t__class(UserPlaceMsg,'mj.net.message.game.UserPlaceMsg');\r\n\t\tvar __proto=UserPlaceMsg.prototype;\r\n\t\tLaya.imps(__proto,{\"com.isnowfox.core.io.message.Message\":true})\r\n\t\t__proto.decode=function(in0){\r\n\t\t\tthis._shouPai=in0.readIntArray();\r\n\t\t\tthis._shouPaiLen=in0.readInt();\r\n\t\t\tthis._anGang=in0.readIntArray();\r\n\t\t\tthis._xiaoMingGang=in0.readIntArray();\r\n\t\t\tthis._daMingGang=in0.readIntArray();\r\n\t\t\tthis._peng=in0.readIntArray();\r\n\t\t\tthis._chi=in0.readIntArray();\r\n\t\t\tthis._outPai=in0.readIntArray();\r\n\t\t}\r\n\r\n\t\t__proto.encode=function(out){\r\n\t\t\tout.writeIntArray(this.shouPai);\r\n\t\t\tout.writeInt(this.shouPaiLen);\r\n\t\t\tout.writeIntArray(this.anGang);\r\n\t\t\tout.writeIntArray(this.xiaoMingGang);\r\n\t\t\tout.writeIntArray(this.daMingGang);\r\n\t\t\tout.writeIntArray(this.peng);\r\n\t\t\tout.writeIntArray(this.chi);\r\n\t\t\tout.writeIntArray(this.outPai);\r\n\t\t}\r\n\r\n\t\t__proto.toString=function(){\r\n\t\t\treturn \"UserPlaceMsg [shouPai=\"+this._shouPai+\",shouPaiLen=\"+this._shouPaiLen+\",anGang=\"+this._anGang+\",xiaoMingGang=\"+this._xiaoMingGang+\",daMingGang=\"+this._daMingGang+\",peng=\"+this._peng+\",chi=\"+this._chi+\",outPai=\"+this._outPai+\", ]\";\r\n\t\t}\r\n\r\n\t\t__proto.getMessageType=function(){\r\n\t\t\treturn 1;\r\n\t\t}\r\n\r\n\t\t__proto.getMessageId=function(){\r\n\t\t\treturn 20;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*3个一组一组\r\n\t\t*/\r\n\t\t/**\r\n\t\t*3个一组一组\r\n\t\t*/\r\n\t\t__getset(0,__proto,'chi',function(){\r\n\t\t\treturn this._chi;\r\n\t\t\t},function(chi){\r\n\t\t\tthis._chi=chi;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*打出的牌\r\n\t\t*/\r\n\t\t/**\r\n\t\t*打出的牌\r\n\t\t*/\r\n\t\t__getset(0,__proto,'outPai',function(){\r\n\t\t\treturn this._outPai;\r\n\t\t\t},function(outPai){\r\n\t\t\tthis._outPai=outPai;\r\n\t\t});\r\n\r\n\t\t__getset(0,__proto,'peng',function(){\r\n\t\t\treturn this._peng;\r\n\t\t\t},function(peng){\r\n\t\t\tthis._peng=peng;\r\n\t\t});\r\n\r\n\t\t__getset(0,__proto,'daMingGang',function(){\r\n\t\t\treturn this._daMingGang;\r\n\t\t\t},function(daMingGang){\r\n\t\t\tthis._daMingGang=daMingGang;\r\n\t\t});\r\n\r\n\t\t__getset(0,__proto,'xiaoMingGang',function(){\r\n\t\t\treturn this._xiaoMingGang;\r\n\t\t\t},function(xiaoMingGang){\r\n\t\t\tthis._xiaoMingGang=xiaoMingGang;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*已经显示的暗杠，如果是自己的则全部显示,不是自己的且如果还不能显示，那么传递-1\r\n\t\t*/\r\n\t\t/**\r\n\t\t*已经显示的暗杠，如果是自己的则全部显示,不是自己的且如果还不能显示，那么传递-1\r\n\t\t*/\r\n\t\t__getset(0,__proto,'anGang',function(){\r\n\t\t\treturn this._anGang;\r\n\t\t\t},function(anGang){\r\n\t\t\tthis._anGang=anGang;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*别人的信息只显示手牌数量\r\n\t\t*/\r\n\t\t/**\r\n\t\t*别人的信息只显示手牌数量\r\n\t\t*/\r\n\t\t__getset(0,__proto,'shouPaiLen',function(){\r\n\t\t\treturn this._shouPaiLen;\r\n\t\t\t},function(shouPaiLen){\r\n\t\t\tthis._shouPaiLen=shouPaiLen;\r\n\t\t});\r\n\r\n\t\t__getset(0,__proto,'shouPai',function(){\r\n\t\t\treturn this._shouPai;\r\n\t\t\t},function(shouPai){\r\n\t\t\tthis._shouPai=shouPai;\r\n\t\t});\r\n\r\n\t\tUserPlaceMsg.create=function(shouPai,shouPaiLen,anGang,xiaoMingGang,daMingGang,peng,chi,outPai){\r\n\t\t\tvar userPlaceMsg=new UserPlaceMsg();\r\n\t\t\tuserPlaceMsg._shouPai=shouPai;\r\n\t\t\tuserPlaceMsg._shouPaiLen=shouPaiLen;\r\n\t\t\tuserPlaceMsg._anGang=anGang;\r\n\t\t\tuserPlaceMsg._xiaoMingGang=xiaoMingGang;\r\n\t\t\tuserPlaceMsg._daMingGang=daMingGang;\r\n\t\t\tuserPlaceMsg._peng=peng;\r\n\t\t\tuserPlaceMsg._chi=chi;\r\n\t\t\tuserPlaceMsg._outPai=outPai;\r\n\t\t\treturn userPlaceMsg;\r\n\t\t}\r\n\r\n\t\tUserPlaceMsg.TYPE=1;\r\n\t\tUserPlaceMsg.ID=20;\r\n\t\treturn UserPlaceMsg;\r\n\t})()\r\n\r\n\r\n\t//class mj.net.message.game.VoteDelSelect\r\n\tvar VoteDelSelect=(function(){\r\n\t\tfunction VoteDelSelect(){\r\n\t\t\tthis._userId=0;\r\n\t\t\tthis._userName=null;\r\n\t\t}\r\n\r\n\t\t__class(VoteDelSelect,'mj.net.message.game.VoteDelSelect');\r\n\t\tvar __proto=VoteDelSelect.prototype;\r\n\t\tLaya.imps(__proto,{\"com.isnowfox.core.io.message.Message\":true})\r\n\t\t__proto.decode=function(in0){\r\n\t\t\tthis._userId=in0.readInt();\r\n\t\t\tthis._userName=in0.readString();\r\n\t\t}\r\n\r\n\t\t__proto.encode=function(out){\r\n\t\t\tout.writeInt(this.userId);\r\n\t\t\tout.writeString(this.userName);\r\n\t\t}\r\n\r\n\t\t__proto.toString=function(){\r\n\t\t\treturn \"VoteDelSelect [userId=\"+this._userId+\",userName=\"+this._userName+\", ]\";\r\n\t\t}\r\n\r\n\t\t__proto.getMessageType=function(){\r\n\t\t\treturn 1;\r\n\t\t}\r\n\r\n\t\t__proto.getMessageId=function(){\r\n\t\t\treturn 21;\r\n\t\t}\r\n\r\n\t\t__getset(0,__proto,'userName',function(){\r\n\t\t\treturn this._userName;\r\n\t\t\t},function(userName){\r\n\t\t\tthis._userName=userName;\r\n\t\t});\r\n\r\n\t\t__getset(0,__proto,'userId',function(){\r\n\t\t\treturn this._userId;\r\n\t\t\t},function(userId){\r\n\t\t\tthis._userId=userId;\r\n\t\t});\r\n\r\n\t\tVoteDelSelect.create=function(userId,userName){\r\n\t\t\tvar voteDelSelect=new VoteDelSelect();\r\n\t\t\tvoteDelSelect._userId=userId;\r\n\t\t\tvoteDelSelect._userName=userName;\r\n\t\t\treturn voteDelSelect;\r\n\t\t}\r\n\r\n\t\tVoteDelSelect.TYPE=1;\r\n\t\tVoteDelSelect.ID=21;\r\n\t\treturn VoteDelSelect;\r\n\t})()\r\n\r\n\r\n\t//class mj.net.message.game.VoteDelSelectRet\r\n\tvar VoteDelSelectRet=(function(){\r\n\t\tfunction VoteDelSelectRet(){\r\n\t\t\tthis._result=false;\r\n\t\t\tthis._userId=0;\r\n\t\t}\r\n\r\n\t\t__class(VoteDelSelectRet,'mj.net.message.game.VoteDelSelectRet');\r\n\t\tvar __proto=VoteDelSelectRet.prototype;\r\n\t\tLaya.imps(__proto,{\"com.isnowfox.core.io.message.Message\":true})\r\n\t\t__proto.decode=function(in0){\r\n\t\t\tthis._result=in0.readBoolean();\r\n\t\t\tthis._userId=in0.readInt();\r\n\t\t}\r\n\r\n\t\t__proto.encode=function(out){\r\n\t\t\tout.writeBoolean(this.result);\r\n\t\t\tout.writeInt(this.userId);\r\n\t\t}\r\n\r\n\t\t__proto.toString=function(){\r\n\t\t\treturn \"VoteDelSelectRet [result=\"+this._result+\",userId=\"+this._userId+\", ]\";\r\n\t\t}\r\n\r\n\t\t__proto.getMessageType=function(){\r\n\t\t\treturn 1;\r\n\t\t}\r\n\r\n\t\t__proto.getMessageId=function(){\r\n\t\t\treturn 22;\r\n\t\t}\r\n\r\n\t\t__getset(0,__proto,'userId',function(){\r\n\t\t\treturn this._userId;\r\n\t\t\t},function(userId){\r\n\t\t\tthis._userId=userId;\r\n\t\t});\r\n\r\n\t\t__getset(0,__proto,'result',function(){\r\n\t\t\treturn this._result;\r\n\t\t\t},function(result){\r\n\t\t\tthis._result=result;\r\n\t\t});\r\n\r\n\t\tVoteDelSelectRet.create=function(result,userId){\r\n\t\t\tvar voteDelSelectRet=new VoteDelSelectRet();\r\n\t\t\tvoteDelSelectRet._result=result;\r\n\t\t\tvoteDelSelectRet._userId=userId;\r\n\t\t\treturn voteDelSelectRet;\r\n\t\t}\r\n\r\n\t\tVoteDelSelectRet.TYPE=1;\r\n\t\tVoteDelSelectRet.ID=22;\r\n\t\treturn VoteDelSelectRet;\r\n\t})()\r\n\r\n\r\n\t//class mj.net.message.game.VoteDelStart\r\n\tvar VoteDelStart=(function(){\r\n\t\tfunction VoteDelStart(){}\r\n\t\t__class(VoteDelStart,'mj.net.message.game.VoteDelStart');\r\n\t\tvar __proto=VoteDelStart.prototype;\r\n\t\tLaya.imps(__proto,{\"com.isnowfox.core.io.message.Message\":true})\r\n\t\t__proto.decode=function(in0){}\r\n\t\t__proto.encode=function(out){}\r\n\t\t__proto.toString=function(){\r\n\t\t\treturn \"VoteDelStart [ ]\";\r\n\t\t}\r\n\r\n\t\t__proto.getMessageType=function(){\r\n\t\t\treturn 1;\r\n\t\t}\r\n\r\n\t\t__proto.getMessageId=function(){\r\n\t\t\treturn 23;\r\n\t\t}\r\n\r\n\t\tVoteDelStart.TYPE=1;\r\n\t\tVoteDelStart.ID=23;\r\n\t\treturn VoteDelStart;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*创建房间\r\n\t*\r\n\t*<b>生成器生成代码，请勿修改，扩展请继承</b>\r\n\t*@author isnowfox消息生成器\r\n\t*/\r\n\t//class mj.net.message.login.CreateRoom\r\n\tvar CreateRoom=(function(){\r\n\t\tfunction CreateRoom(){\r\n\t\t\tthis._profile=null;\r\n\t\t\tthis._options=null;\r\n\t\t}\r\n\r\n\t\t__class(CreateRoom,'mj.net.message.login.CreateRoom');\r\n\t\tvar __proto=CreateRoom.prototype;\r\n\t\tLaya.imps(__proto,{\"com.isnowfox.core.io.message.Message\":true})\r\n\t\t__proto.decode=function(in0){\r\n\t\t\tthis._profile=in0.readString();\r\n\t\t\tvar optionsLen=in0.readInt();\r\n\t\t\tif(optionsLen==-1){\r\n\t\t\t\tthis._options=null;\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tthis._options=[];\r\n\t\t\t\tfor(var optionsI=0;optionsI < optionsLen;optionsI++){\r\n\t\t\t\t\tvar optionsItem=new OptionEntry();\r\n\t\t\t\t\toptionsItem.decode(in0);\r\n\t\t\t\t\tthis._options[optionsI]=(optionsItem);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__proto.encode=function(out){\r\n\t\t\tout.writeString(this.profile);\r\n\t\t\tif(this.options==null){\r\n\t\t\t\tout.writeInt(-1);\r\n\t\t\t\t}else{\r\n\t\t\t\tvar optionsLen=this.options.length;\r\n\t\t\t\tout.writeInt(optionsLen);\r\n\t\t\t\tfor(var optionsI=0;optionsI < optionsLen;optionsI++){\r\n\t\t\t\t\tthis.options[optionsI].encode(out);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__proto.toString=function(){\r\n\t\t\treturn \"CreateRoom [profile=\"+this._profile+\",options=\"+this._options+\", ]\";\r\n\t\t}\r\n\r\n\t\t__proto.getMessageType=function(){\r\n\t\t\treturn 7;\r\n\t\t}\r\n\r\n\t\t__proto.getMessageId=function(){\r\n\t\t\treturn 0;\r\n\t\t}\r\n\r\n\t\t__getset(0,__proto,'options',function(){\r\n\t\t\treturn this._options;\r\n\t\t\t},function(options){\r\n\t\t\tthis._options=options;\r\n\t\t});\r\n\r\n\t\t__getset(0,__proto,'profile',function(){\r\n\t\t\treturn this._profile;\r\n\t\t\t},function(profile){\r\n\t\t\tthis._profile=profile;\r\n\t\t});\r\n\r\n\t\tCreateRoom.create=function(profile,options){\r\n\t\t\tvar createRoom=new CreateRoom();\r\n\t\t\tcreateRoom._profile=profile;\r\n\t\t\tcreateRoom._options=options;\r\n\t\t\treturn createRoom;\r\n\t\t}\r\n\r\n\t\tCreateRoom.TYPE=7;\r\n\t\tCreateRoom.ID=0;\r\n\t\treturn CreateRoom;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*创建房间结果\r\n\t*\r\n\t*<b>生成器生成代码，请勿修改，扩展请继承</b>\r\n\t*@author isnowfox消息生成器\r\n\t*/\r\n\t//class mj.net.message.login.CreateRoomRet\r\n\tvar CreateRoomRet=(function(){\r\n\t\tfunction CreateRoomRet(){\r\n\t\t\tthis._result=false;\r\n\t\t\tthis._roomCheckId=null;\r\n\t\t}\r\n\r\n\t\t__class(CreateRoomRet,'mj.net.message.login.CreateRoomRet');\r\n\t\tvar __proto=CreateRoomRet.prototype;\r\n\t\tLaya.imps(__proto,{\"com.isnowfox.core.io.message.Message\":true})\r\n\t\t__proto.decode=function(in0){\r\n\t\t\tthis._result=in0.readBoolean();\r\n\t\t\tthis._roomCheckId=in0.readString();\r\n\t\t}\r\n\r\n\t\t__proto.encode=function(out){\r\n\t\t\tout.writeBoolean(this.result);\r\n\t\t\tout.writeString(this.roomCheckId);\r\n\t\t}\r\n\r\n\t\t__proto.toString=function(){\r\n\t\t\treturn \"CreateRoomRet [result=\"+this._result+\",roomCheckId=\"+this._roomCheckId+\", ]\";\r\n\t\t}\r\n\r\n\t\t__proto.getMessageType=function(){\r\n\t\t\treturn 7;\r\n\t\t}\r\n\r\n\t\t__proto.getMessageId=function(){\r\n\t\t\treturn 1;\r\n\t\t}\r\n\r\n\t\t__getset(0,__proto,'roomCheckId',function(){\r\n\t\t\treturn this._roomCheckId;\r\n\t\t\t},function(roomCheckId){\r\n\t\t\tthis._roomCheckId=roomCheckId;\r\n\t\t});\r\n\r\n\t\t__getset(0,__proto,'result',function(){\r\n\t\t\treturn this._result;\r\n\t\t\t},function(result){\r\n\t\t\tthis._result=result;\r\n\t\t});\r\n\r\n\t\tCreateRoomRet.create=function(result,roomCheckId){\r\n\t\t\tvar createRoomRet=new CreateRoomRet();\r\n\t\t\tcreateRoomRet._result=result;\r\n\t\t\tcreateRoomRet._roomCheckId=roomCheckId;\r\n\t\t\treturn createRoomRet;\r\n\t\t}\r\n\r\n\t\tCreateRoomRet.TYPE=7;\r\n\t\tCreateRoomRet.ID=1;\r\n\t\treturn CreateRoomRet;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*解散房间\r\n\t*\r\n\t*<b>生成器生成代码，请勿修改，扩展请继承</b>\r\n\t*@author isnowfox消息生成器\r\n\t*/\r\n\t//class mj.net.message.login.DelRoom\r\n\tvar DelRoom=(function(){\r\n\t\tfunction DelRoom(){}\r\n\t\t__class(DelRoom,'mj.net.message.login.DelRoom');\r\n\t\tvar __proto=DelRoom.prototype;\r\n\t\tLaya.imps(__proto,{\"com.isnowfox.core.io.message.Message\":true})\r\n\t\t__proto.decode=function(in0){}\r\n\t\t__proto.encode=function(out){}\r\n\t\t__proto.toString=function(){\r\n\t\t\treturn \"DelRoom [ ]\";\r\n\t\t}\r\n\r\n\t\t__proto.getMessageType=function(){\r\n\t\t\treturn 7;\r\n\t\t}\r\n\r\n\t\t__proto.getMessageId=function(){\r\n\t\t\treturn 2;\r\n\t\t}\r\n\r\n\t\tDelRoom.TYPE=7;\r\n\t\tDelRoom.ID=2;\r\n\t\treturn DelRoom;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*解散房间结果\r\n\t*\r\n\t*<b>生成器生成代码，请勿修改，扩展请继承</b>\r\n\t*@author isnowfox消息生成器\r\n\t*/\r\n\t//class mj.net.message.login.DelRoomRet\r\n\tvar DelRoomRet=(function(){\r\n\t\tfunction DelRoomRet(){\r\n\t\t\tthis._result=false;\r\n\t\t}\r\n\r\n\t\t__class(DelRoomRet,'mj.net.message.login.DelRoomRet');\r\n\t\tvar __proto=DelRoomRet.prototype;\r\n\t\tLaya.imps(__proto,{\"com.isnowfox.core.io.message.Message\":true})\r\n\t\t__proto.decode=function(in0){\r\n\t\t\tthis._result=in0.readBoolean();\r\n\t\t}\r\n\r\n\t\t__proto.encode=function(out){\r\n\t\t\tout.writeBoolean(this.result);\r\n\t\t}\r\n\r\n\t\t__proto.toString=function(){\r\n\t\t\treturn \"DelRoomRet [result=\"+this._result+\", ]\";\r\n\t\t}\r\n\r\n\t\t__proto.getMessageType=function(){\r\n\t\t\treturn 7;\r\n\t\t}\r\n\r\n\t\t__proto.getMessageId=function(){\r\n\t\t\treturn 3;\r\n\t\t}\r\n\r\n\t\t__getset(0,__proto,'result',function(){\r\n\t\t\treturn this._result;\r\n\t\t\t},function(result){\r\n\t\t\tthis._result=result;\r\n\t\t});\r\n\r\n\t\tDelRoomRet.create=function(result){\r\n\t\t\tvar delRoomRet=new DelRoomRet();\r\n\t\t\tdelRoomRet._result=result;\r\n\t\t\treturn delRoomRet;\r\n\t\t}\r\n\r\n\t\tDelRoomRet.TYPE=7;\r\n\t\tDelRoomRet.ID=3;\r\n\t\treturn DelRoomRet;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*退出房间\r\n\t*\r\n\t*<b>生成器生成代码，请勿修改，扩展请继承</b>\r\n\t*@author isnowfox消息生成器\r\n\t*/\r\n\t//class mj.net.message.login.ExitRoom\r\n\tvar ExitRoom=(function(){\r\n\t\tfunction ExitRoom(){}\r\n\t\t__class(ExitRoom,'mj.net.message.login.ExitRoom');\r\n\t\tvar __proto=ExitRoom.prototype;\r\n\t\tLaya.imps(__proto,{\"com.isnowfox.core.io.message.Message\":true})\r\n\t\t__proto.decode=function(in0){}\r\n\t\t__proto.encode=function(out){}\r\n\t\t__proto.toString=function(){\r\n\t\t\treturn \"ExitRoom [ ]\";\r\n\t\t}\r\n\r\n\t\t__proto.getMessageType=function(){\r\n\t\t\treturn 7;\r\n\t\t}\r\n\r\n\t\t__proto.getMessageId=function(){\r\n\t\t\treturn 4;\r\n\t\t}\r\n\r\n\t\tExitRoom.TYPE=7;\r\n\t\tExitRoom.ID=4;\r\n\t\treturn ExitRoom;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*退出房间结果\r\n\t*\r\n\t*<b>生成器生成代码，请勿修改，扩展请继承</b>\r\n\t*@author isnowfox消息生成器\r\n\t*/\r\n\t//class mj.net.message.login.ExitRoomRet\r\n\tvar ExitRoomRet=(function(){\r\n\t\tfunction ExitRoomRet(){}\r\n\t\t__class(ExitRoomRet,'mj.net.message.login.ExitRoomRet');\r\n\t\tvar __proto=ExitRoomRet.prototype;\r\n\t\tLaya.imps(__proto,{\"com.isnowfox.core.io.message.Message\":true})\r\n\t\t__proto.decode=function(in0){}\r\n\t\t__proto.encode=function(out){}\r\n\t\t__proto.toString=function(){\r\n\t\t\treturn \"ExitRoomRet [ ]\";\r\n\t\t}\r\n\r\n\t\t__proto.getMessageType=function(){\r\n\t\t\treturn 7;\r\n\t\t}\r\n\r\n\t\t__proto.getMessageId=function(){\r\n\t\t\treturn 5;\r\n\t\t}\r\n\r\n\t\tExitRoomRet.TYPE=7;\r\n\t\tExitRoomRet.ID=5;\r\n\t\treturn ExitRoomRet;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*创建房间\r\n\t*\r\n\t*<b>生成器生成代码，请勿修改，扩展请继承</b>\r\n\t*@author isnowfox消息生成器\r\n\t*/\r\n\t//class mj.net.message.login.JoinRoom\r\n\tvar JoinRoom=(function(){\r\n\t\tfunction JoinRoom(){\r\n\t\t\tthis._roomCheckId=null;\r\n\t\t}\r\n\r\n\t\t__class(JoinRoom,'mj.net.message.login.JoinRoom');\r\n\t\tvar __proto=JoinRoom.prototype;\r\n\t\tLaya.imps(__proto,{\"com.isnowfox.core.io.message.Message\":true})\r\n\t\t__proto.decode=function(in0){\r\n\t\t\tthis._roomCheckId=in0.readString();\r\n\t\t}\r\n\r\n\t\t__proto.encode=function(out){\r\n\t\t\tout.writeString(this.roomCheckId);\r\n\t\t}\r\n\r\n\t\t__proto.toString=function(){\r\n\t\t\treturn \"JoinRoom [roomCheckId=\"+this._roomCheckId+\", ]\";\r\n\t\t}\r\n\r\n\t\t__proto.getMessageType=function(){\r\n\t\t\treturn 7;\r\n\t\t}\r\n\r\n\t\t__proto.getMessageId=function(){\r\n\t\t\treturn 6;\r\n\t\t}\r\n\r\n\t\t__getset(0,__proto,'roomCheckId',function(){\r\n\t\t\treturn this._roomCheckId;\r\n\t\t\t},function(roomCheckId){\r\n\t\t\tthis._roomCheckId=roomCheckId;\r\n\t\t});\r\n\r\n\t\tJoinRoom.create=function(roomCheckId){\r\n\t\t\tvar joinRoom=new JoinRoom();\r\n\t\t\tjoinRoom._roomCheckId=roomCheckId;\r\n\t\t\treturn joinRoom;\r\n\t\t}\r\n\r\n\t\tJoinRoom.TYPE=7;\r\n\t\tJoinRoom.ID=6;\r\n\t\treturn JoinRoom;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*进入房间结果信息\r\n\t*\r\n\t*<b>生成器生成代码，请勿修改，扩展请继承</b>\r\n\t*@author isnowfox消息生成器\r\n\t*/\r\n\t//class mj.net.message.login.JoinRoomRet\r\n\tvar JoinRoomRet=(function(){\r\n\t\tfunction JoinRoomRet(){\r\n\t\t\tthis._result=false;\r\n\t\t}\r\n\r\n\t\t__class(JoinRoomRet,'mj.net.message.login.JoinRoomRet');\r\n\t\tvar __proto=JoinRoomRet.prototype;\r\n\t\tLaya.imps(__proto,{\"com.isnowfox.core.io.message.Message\":true})\r\n\t\t__proto.decode=function(in0){\r\n\t\t\tthis._result=in0.readBoolean();\r\n\t\t}\r\n\r\n\t\t__proto.encode=function(out){\r\n\t\t\tout.writeBoolean(this.result);\r\n\t\t}\r\n\r\n\t\t__proto.toString=function(){\r\n\t\t\treturn \"JoinRoomRet [result=\"+this._result+\", ]\";\r\n\t\t}\r\n\r\n\t\t__proto.getMessageType=function(){\r\n\t\t\treturn 7;\r\n\t\t}\r\n\r\n\t\t__proto.getMessageId=function(){\r\n\t\t\treturn 7;\r\n\t\t}\r\n\r\n\t\t__getset(0,__proto,'result',function(){\r\n\t\t\treturn this._result;\r\n\t\t\t},function(result){\r\n\t\t\tthis._result=result;\r\n\t\t});\r\n\r\n\t\tJoinRoomRet.create=function(result){\r\n\t\t\tvar joinRoomRet=new JoinRoomRet();\r\n\t\t\tjoinRoomRet._result=result;\r\n\t\t\treturn joinRoomRet;\r\n\t\t}\r\n\r\n\t\tJoinRoomRet.TYPE=7;\r\n\t\tJoinRoomRet.ID=7;\r\n\t\treturn JoinRoomRet;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*登陆信息\r\n\t*\r\n\t*<b>生成器生成代码，请勿修改，扩展请继承</b>\r\n\t*@author isnowfox消息生成器\r\n\t*/\r\n\t//class mj.net.message.login.Login\r\n\tvar Login=(function(){\r\n\t\tfunction Login(){\r\n\t\t\tthis._type=null;\r\n\t\t\tthis._openId=null;\r\n\t\t\tthis._code=null;\r\n\t\t\tthis._longitude=null;\r\n\t\t\tthis._latitude=null;\r\n\t\t}\r\n\r\n\t\t__class(Login,'mj.net.message.login.Login');\r\n\t\tvar __proto=Login.prototype;\r\n\t\tLaya.imps(__proto,{\"com.isnowfox.core.io.message.Message\":true})\r\n\t\t__proto.decode=function(in0){\r\n\t\t\tthis._type=in0.readString();\r\n\t\t\tthis._openId=in0.readString();\r\n\t\t\tthis._code=in0.readString();\r\n\t\t\tthis._longitude=in0.readString();\r\n\t\t\tthis._latitude=in0.readString();\r\n\t\t}\r\n\r\n\t\t__proto.encode=function(out){\r\n\t\t\tout.writeString(this.type);\r\n\t\t\tout.writeString(this.openId);\r\n\t\t\tout.writeString(this.code);\r\n\t\t\tout.writeString(this.longitude);\r\n\t\t\tout.writeString(this.latitude);\r\n\t\t}\r\n\r\n\t\t__proto.toString=function(){\r\n\t\t\treturn \"Login [type=\"+this._type+\",openId=\"+this._openId+\",code=\"+this._code+\",longitude=\"+this._longitude+\",latitude=\"+this._latitude+\", ]\";\r\n\t\t}\r\n\r\n\t\t__proto.getMessageType=function(){\r\n\t\t\treturn 7;\r\n\t\t}\r\n\r\n\t\t__proto.getMessageId=function(){\r\n\t\t\treturn 8;\r\n\t\t}\r\n\r\n\t\t__getset(0,__proto,'code',function(){\r\n\t\t\treturn this._code;\r\n\t\t\t},function(code){\r\n\t\t\tthis._code=code;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*经度\r\n\t\t*/\r\n\t\t/**\r\n\t\t*经度\r\n\t\t*/\r\n\t\t__getset(0,__proto,'longitude',function(){\r\n\t\t\treturn this._longitude;\r\n\t\t\t},function(longitude){\r\n\t\t\tthis._longitude=longitude;\r\n\t\t});\r\n\r\n\t\t__getset(0,__proto,'openId',function(){\r\n\t\t\treturn this._openId;\r\n\t\t\t},function(openId){\r\n\t\t\tthis._openId=openId;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*纬度\r\n\t\t*/\r\n\t\t/**\r\n\t\t*纬度\r\n\t\t*/\r\n\t\t__getset(0,__proto,'latitude',function(){\r\n\t\t\treturn this._latitude;\r\n\t\t\t},function(latitude){\r\n\t\t\tthis._latitude=latitude;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*SMS 短信登录，WEIXIN_CLIENT 微信客户端，TOKEN token登录\r\n\t\t*/\r\n\t\t/**\r\n\t\t*SMS 短信登录，WEIXIN_CLIENT 微信客户端，TOKEN token登录\r\n\t\t*/\r\n\t\t__getset(0,__proto,'type',function(){\r\n\t\t\treturn this._type;\r\n\t\t\t},function(type){\r\n\t\t\tthis._type=type;\r\n\t\t});\r\n\r\n\t\tLogin.create=function(type,openId,code,longitude,latitude){\r\n\t\t\tvar login=new Login();\r\n\t\t\tlogin._type=type;\r\n\t\t\tlogin._openId=openId;\r\n\t\t\tlogin._code=code;\r\n\t\t\tlogin._longitude=longitude;\r\n\t\t\tlogin._latitude=latitude;\r\n\t\t\treturn login;\r\n\t\t}\r\n\r\n\t\tLogin.TYPE=7;\r\n\t\tLogin.ID=8;\r\n\t\treturn Login;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*登陆错误\r\n\t*\r\n\t*<b>生成器生成代码，请勿修改，扩展请继承</b>\r\n\t*@author isnowfox消息生成器\r\n\t*/\r\n\t//class mj.net.message.login.LoginError\r\n\tvar LoginError=(function(){\r\n\t\tfunction LoginError(){}\r\n\t\t__class(LoginError,'mj.net.message.login.LoginError');\r\n\t\tvar __proto=LoginError.prototype;\r\n\t\tLaya.imps(__proto,{\"com.isnowfox.core.io.message.Message\":true})\r\n\t\t__proto.decode=function(in0){}\r\n\t\t__proto.encode=function(out){}\r\n\t\t__proto.toString=function(){\r\n\t\t\treturn \"LoginError [ ]\";\r\n\t\t}\r\n\r\n\t\t__proto.getMessageType=function(){\r\n\t\t\treturn 7;\r\n\t\t}\r\n\r\n\t\t__proto.getMessageId=function(){\r\n\t\t\treturn 9;\r\n\t\t}\r\n\r\n\t\tLoginError.TYPE=7;\r\n\t\tLoginError.ID=9;\r\n\t\treturn LoginError;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*登陆结果\r\n\t*\r\n\t*<b>生成器生成代码，请勿修改，扩展请继承</b>\r\n\t*@author isnowfox消息生成器\r\n\t*/\r\n\t//class mj.net.message.login.LoginRet\r\n\tvar LoginRet=(function(){\r\n\t\tfunction LoginRet(){\r\n\t\t\tthis._id=0;\r\n\t\t\tthis._name=null;\r\n\t\t\tthis._openId=null;\r\n\t\t\tthis._uuid=null;\r\n\t\t\tthis._avatar=null;\r\n\t\t\tthis._sex=0;\r\n\t\t\tthis._roomCheckId=null;\r\n\t\t\tthis._gold=0;\r\n\t\t\tthis._loginToken=null;\r\n\t\t\tthis._ip=null;\r\n\t\t}\r\n\r\n\t\t__class(LoginRet,'mj.net.message.login.LoginRet');\r\n\t\tvar __proto=LoginRet.prototype;\r\n\t\tLaya.imps(__proto,{\"com.isnowfox.core.io.message.Message\":true})\r\n\t\t__proto.decode=function(in0){\r\n\t\t\tthis._id=in0.readInt();\r\n\t\t\tthis._name=in0.readString();\r\n\t\t\tthis._openId=in0.readString();\r\n\t\t\tthis._uuid=in0.readString();\r\n\t\t\tthis._avatar=in0.readString();\r\n\t\t\tthis._sex=in0.readInt();\r\n\t\t\tthis._roomCheckId=in0.readString();\r\n\t\t\tthis._gold=in0.readInt();\r\n\t\t\tthis._loginToken=in0.readString();\r\n\t\t\tthis._ip=in0.readString();\r\n\t\t}\r\n\r\n\t\t__proto.encode=function(out){\r\n\t\t\tout.writeInt(this.id);\r\n\t\t\tout.writeString(this.name);\r\n\t\t\tout.writeString(this.openId);\r\n\t\t\tout.writeString(this.uuid);\r\n\t\t\tout.writeString(this.avatar);\r\n\t\t\tout.writeInt(this.sex);\r\n\t\t\tout.writeString(this.roomCheckId);\r\n\t\t\tout.writeInt(this.gold);\r\n\t\t\tout.writeString(this.loginToken);\r\n\t\t\tout.writeString(this.ip);\r\n\t\t}\r\n\r\n\t\t__proto.toString=function(){\r\n\t\t\treturn \"LoginRet [id=\"+this._id+\",name=\"+this._name+\",openId=\"+this._openId+\",uuid=\"+this._uuid+\",avatar=\"+this._avatar+\",sex=\"+this._sex+\",roomCheckId=\"+this._roomCheckId+\",gold=\"+this._gold+\",loginToken=\"+this._loginToken+\",ip=\"+this._ip+\", ]\";\r\n\t\t}\r\n\r\n\t\t__proto.getMessageType=function(){\r\n\t\t\treturn 7;\r\n\t\t}\r\n\r\n\t\t__proto.getMessageId=function(){\r\n\t\t\treturn 10;\r\n\t\t}\r\n\r\n\t\t__getset(0,__proto,'ip',function(){\r\n\t\t\treturn this._ip;\r\n\t\t\t},function(ip){\r\n\t\t\tthis._ip=ip;\r\n\t\t});\r\n\r\n\t\t__getset(0,__proto,'loginToken',function(){\r\n\t\t\treturn this._loginToken;\r\n\t\t\t},function(loginToken){\r\n\t\t\tthis._loginToken=loginToken;\r\n\t\t});\r\n\r\n\t\t__getset(0,__proto,'gold',function(){\r\n\t\t\treturn this._gold;\r\n\t\t\t},function(gold){\r\n\t\t\tthis._gold=gold;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*0:女生,1:男生,2:未知\r\n\t\t*/\r\n\t\t/**\r\n\t\t*0:女生,1:男生,2:未知\r\n\t\t*/\r\n\t\t__getset(0,__proto,'sex',function(){\r\n\t\t\treturn this._sex;\r\n\t\t\t},function(sex){\r\n\t\t\tthis._sex=sex;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*昵称\r\n\t\t*/\r\n\t\t/**\r\n\t\t*昵称\r\n\t\t*/\r\n\t\t__getset(0,__proto,'openId',function(){\r\n\t\t\treturn this._openId;\r\n\t\t\t},function(openId){\r\n\t\t\tthis._openId=openId;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*昵称\r\n\t\t*/\r\n\t\t/**\r\n\t\t*昵称\r\n\t\t*/\r\n\t\t__getset(0,__proto,'name',function(){\r\n\t\t\treturn this._name;\r\n\t\t\t},function(name){\r\n\t\t\tthis._name=name;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*如果用户进入过房间,未主动退出房间id\r\n\t\t*/\r\n\t\t/**\r\n\t\t*如果用户进入过房间,未主动退出房间id\r\n\t\t*/\r\n\t\t__getset(0,__proto,'roomCheckId',function(){\r\n\t\t\treturn this._roomCheckId;\r\n\t\t\t},function(roomCheckId){\r\n\t\t\tthis._roomCheckId=roomCheckId;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*头像\r\n\t\t*/\r\n\t\t/**\r\n\t\t*头像\r\n\t\t*/\r\n\t\t__getset(0,__proto,'avatar',function(){\r\n\t\t\treturn this._avatar;\r\n\t\t\t},function(avatar){\r\n\t\t\tthis._avatar=avatar;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*uuid\r\n\t\t*/\r\n\t\t/**\r\n\t\t*uuid\r\n\t\t*/\r\n\t\t__getset(0,__proto,'uuid',function(){\r\n\t\t\treturn this._uuid;\r\n\t\t\t},function(uuid){\r\n\t\t\tthis._uuid=uuid;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*id\r\n\t\t*/\r\n\t\t/**\r\n\t\t*id\r\n\t\t*/\r\n\t\t__getset(0,__proto,'id',function(){\r\n\t\t\treturn this._id;\r\n\t\t\t},function(id){\r\n\t\t\tthis._id=id;\r\n\t\t});\r\n\r\n\t\tLoginRet.create=function(id,name,openId,uuid,avatar,sex,roomCheckId,gold,loginToken,ip){\r\n\t\t\tvar loginRet=new LoginRet();\r\n\t\t\tloginRet._id=id;\r\n\t\t\tloginRet._name=name;\r\n\t\t\tloginRet._openId=openId;\r\n\t\t\tloginRet._uuid=uuid;\r\n\t\t\tloginRet._avatar=avatar;\r\n\t\t\tloginRet._sex=sex;\r\n\t\t\tloginRet._roomCheckId=roomCheckId;\r\n\t\t\tloginRet._gold=gold;\r\n\t\t\tloginRet._loginToken=loginToken;\r\n\t\t\tloginRet._ip=ip;\r\n\t\t\treturn loginRet;\r\n\t\t}\r\n\r\n\t\tLoginRet.TYPE=7;\r\n\t\tLoginRet.ID=10;\r\n\t\treturn LoginRet;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*通知\r\n\t*\r\n\t*<b>生成器生成代码，请勿修改，扩展请继承</b>\r\n\t*@author isnowfox消息生成器\r\n\t*/\r\n\t//class mj.net.message.login.Notice\r\n\tvar Notice=(function(){\r\n\t\tfunction Notice(){\r\n\t\t\tthis._key=null;\r\n\t\t\tthis._args=null;\r\n\t\t\tthis._type=0;\r\n\t\t\tthis._reboot=false;\r\n\t\t}\r\n\r\n\t\t__class(Notice,'mj.net.message.login.Notice');\r\n\t\tvar __proto=Notice.prototype;\r\n\t\tLaya.imps(__proto,{\"com.isnowfox.core.io.message.Message\":true})\r\n\t\t__proto.decode=function(in0){\r\n\t\t\tthis._key=in0.readString();\r\n\t\t\tthis._args=in0.readStringArray();\r\n\t\t\tthis._type=in0.readInt();\r\n\t\t\tthis._reboot=in0.readBoolean();\r\n\t\t}\r\n\r\n\t\t__proto.encode=function(out){\r\n\t\t\tout.writeString(this.key);\r\n\t\t\tout.writeStringArray(this.args);\r\n\t\t\tout.writeInt(this.type);\r\n\t\t\tout.writeBoolean(this.reboot);\r\n\t\t}\r\n\r\n\t\t__proto.toString=function(){\r\n\t\t\treturn \"Notice [key=\"+this._key+\",args=\"+this._args+\",type=\"+this._type+\",reboot=\"+this._reboot+\", ]\";\r\n\t\t}\r\n\r\n\t\t__proto.getMessageType=function(){\r\n\t\t\treturn 7;\r\n\t\t}\r\n\r\n\t\t__proto.getMessageId=function(){\r\n\t\t\treturn 11;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*是否需要重新启动游戏\r\n\t\t*/\r\n\t\t/**\r\n\t\t*是否需要重新启动游戏\r\n\t\t*/\r\n\t\t__getset(0,__proto,'reboot',function(){\r\n\t\t\treturn this._reboot;\r\n\t\t\t},function(reboot){\r\n\t\t\tthis._reboot=reboot;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*0:横屏实时通知,1:悬停错误提示\r\n\t\t*/\r\n\t\t/**\r\n\t\t*0:横屏实时通知,1:悬停错误提示\r\n\t\t*/\r\n\t\t__getset(0,__proto,'type',function(){\r\n\t\t\treturn this._type;\r\n\t\t\t},function(type){\r\n\t\t\tthis._type=type;\r\n\t\t});\r\n\r\n\t\t__getset(0,__proto,'args',function(){\r\n\t\t\treturn this._args;\r\n\t\t\t},function(args){\r\n\t\t\tthis._args=args;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*语言文件的key,或者内容字符串\r\n\t\t*/\r\n\t\t/**\r\n\t\t*语言文件的key,或者内容字符串\r\n\t\t*/\r\n\t\t__getset(0,__proto,'key',function(){\r\n\t\t\treturn this._key;\r\n\t\t\t},function(key){\r\n\t\t\tthis._key=key;\r\n\t\t});\r\n\r\n\t\tNotice.create=function(key,args,type,reboot){\r\n\t\t\tvar notice=new Notice();\r\n\t\t\tnotice._key=key;\r\n\t\t\tnotice._args=args;\r\n\t\t\tnotice._type=type;\r\n\t\t\tnotice._reboot=reboot;\r\n\t\t\treturn notice;\r\n\t\t}\r\n\r\n\t\tNotice.TYPE=7;\r\n\t\tNotice.ID=11;\r\n\t\treturn Notice;\r\n\t})()\r\n\r\n\r\n\t//class mj.net.message.login.OptionEntry\r\n\tvar OptionEntry=(function(){\r\n\t\tfunction OptionEntry(){\r\n\t\t\tthis._key=null;\r\n\t\t\tthis._value=null;\r\n\t\t}\r\n\r\n\t\t__class(OptionEntry,'mj.net.message.login.OptionEntry');\r\n\t\tvar __proto=OptionEntry.prototype;\r\n\t\tLaya.imps(__proto,{\"com.isnowfox.core.io.message.Message\":true})\r\n\t\t__proto.decode=function(in0){\r\n\t\t\tthis._key=in0.readString();\r\n\t\t\tthis._value=in0.readString();\r\n\t\t}\r\n\r\n\t\t__proto.encode=function(out){\r\n\t\t\tout.writeString(this.key);\r\n\t\t\tout.writeString(this.value);\r\n\t\t}\r\n\r\n\t\t__proto.toString=function(){\r\n\t\t\treturn \"OptionEntry [key=\"+this._key+\",value=\"+this._value+\", ]\";\r\n\t\t}\r\n\r\n\t\t__proto.getMessageType=function(){\r\n\t\t\treturn 7;\r\n\t\t}\r\n\r\n\t\t__proto.getMessageId=function(){\r\n\t\t\treturn 12;\r\n\t\t}\r\n\r\n\t\t__getset(0,__proto,'value',function(){\r\n\t\t\treturn this._value;\r\n\t\t\t},function(value){\r\n\t\t\tthis._value=value;\r\n\t\t});\r\n\r\n\t\t__getset(0,__proto,'key',function(){\r\n\t\t\treturn this._key;\r\n\t\t\t},function(key){\r\n\t\t\tthis._key=key;\r\n\t\t});\r\n\r\n\t\tOptionEntry.create=function(key,value){\r\n\t\t\tvar optionEntry=new OptionEntry();\r\n\t\t\toptionEntry._key=key;\r\n\t\t\toptionEntry._value=value;\r\n\t\t\treturn optionEntry;\r\n\t\t}\r\n\r\n\t\tOptionEntry.TYPE=7;\r\n\t\tOptionEntry.ID=12;\r\n\t\treturn OptionEntry;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*pong\r\n\t*\r\n\t*<b>生成器生成代码，请勿修改，扩展请继承</b>\r\n\t*@author isnowfox消息生成器\r\n\t*/\r\n\t//class mj.net.message.login.Pay\r\n\tvar Pay=(function(){\r\n\t\tfunction Pay(){\r\n\t\t\tthis._gold=0;\r\n\t\t}\r\n\r\n\t\t__class(Pay,'mj.net.message.login.Pay');\r\n\t\tvar __proto=Pay.prototype;\r\n\t\tLaya.imps(__proto,{\"com.isnowfox.core.io.message.Message\":true})\r\n\t\t__proto.decode=function(in0){\r\n\t\t\tthis._gold=in0.readInt();\r\n\t\t}\r\n\r\n\t\t__proto.encode=function(out){\r\n\t\t\tout.writeInt(this.gold);\r\n\t\t}\r\n\r\n\t\t__proto.toString=function(){\r\n\t\t\treturn \"Pay [gold=\"+this._gold+\", ]\";\r\n\t\t}\r\n\r\n\t\t__proto.getMessageType=function(){\r\n\t\t\treturn 7;\r\n\t\t}\r\n\r\n\t\t__proto.getMessageId=function(){\r\n\t\t\treturn 13;\r\n\t\t}\r\n\r\n\t\t__getset(0,__proto,'gold',function(){\r\n\t\t\treturn this._gold;\r\n\t\t\t},function(gold){\r\n\t\t\tthis._gold=gold;\r\n\t\t});\r\n\r\n\t\tPay.create=function(gold){\r\n\t\t\tvar pay=new Pay();\r\n\t\t\tpay._gold=gold;\r\n\t\t\treturn pay;\r\n\t\t}\r\n\r\n\t\tPay.TYPE=7;\r\n\t\tPay.ID=13;\r\n\t\treturn Pay;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*ping\r\n\t*\r\n\t*<b>生成器生成代码，请勿修改，扩展请继承</b>\r\n\t*@author isnowfox消息生成器\r\n\t*/\r\n\t//class mj.net.message.login.Ping\r\n\tvar Ping=(function(){\r\n\t\tfunction Ping(){\r\n\t\t\tthis._time=null;\r\n\t\t}\r\n\r\n\t\t__class(Ping,'mj.net.message.login.Ping');\r\n\t\tvar __proto=Ping.prototype;\r\n\t\tLaya.imps(__proto,{\"com.isnowfox.core.io.message.Message\":true})\r\n\t\t__proto.decode=function(in0){\r\n\t\t\tthis._time=in0.readString();\r\n\t\t}\r\n\r\n\t\t__proto.encode=function(out){\r\n\t\t\tout.writeString(this.time);\r\n\t\t}\r\n\r\n\t\t__proto.toString=function(){\r\n\t\t\treturn \"Ping [time=\"+this._time+\", ]\";\r\n\t\t}\r\n\r\n\t\t__proto.getMessageType=function(){\r\n\t\t\treturn 7;\r\n\t\t}\r\n\r\n\t\t__proto.getMessageId=function(){\r\n\t\t\treturn 14;\r\n\t\t}\r\n\r\n\t\t__getset(0,__proto,'time',function(){\r\n\t\t\treturn this._time;\r\n\t\t\t},function(time){\r\n\t\t\tthis._time=time;\r\n\t\t});\r\n\r\n\t\tPing.create=function(time){\r\n\t\t\tvar ping=new Ping();\r\n\t\t\tping._time=time;\r\n\t\t\treturn ping;\r\n\t\t}\r\n\r\n\t\tPing.TYPE=7;\r\n\t\tPing.ID=14;\r\n\t\treturn Ping;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*pong\r\n\t*\r\n\t*<b>生成器生成代码，请勿修改，扩展请继承</b>\r\n\t*@author isnowfox消息生成器\r\n\t*/\r\n\t//class mj.net.message.login.Pong\r\n\tvar Pong=(function(){\r\n\t\tfunction Pong(){\r\n\t\t\tthis._time=null;\r\n\t\t}\r\n\r\n\t\t__class(Pong,'mj.net.message.login.Pong');\r\n\t\tvar __proto=Pong.prototype;\r\n\t\tLaya.imps(__proto,{\"com.isnowfox.core.io.message.Message\":true})\r\n\t\t__proto.decode=function(in0){\r\n\t\t\tthis._time=in0.readString();\r\n\t\t}\r\n\r\n\t\t__proto.encode=function(out){\r\n\t\t\tout.writeString(this.time);\r\n\t\t}\r\n\r\n\t\t__proto.toString=function(){\r\n\t\t\treturn \"Pong [time=\"+this._time+\", ]\";\r\n\t\t}\r\n\r\n\t\t__proto.getMessageType=function(){\r\n\t\t\treturn 7;\r\n\t\t}\r\n\r\n\t\t__proto.getMessageId=function(){\r\n\t\t\treturn 15;\r\n\t\t}\r\n\r\n\t\t__getset(0,__proto,'time',function(){\r\n\t\t\treturn this._time;\r\n\t\t\t},function(time){\r\n\t\t\tthis._time=time;\r\n\t\t});\r\n\r\n\t\tPong.create=function(time){\r\n\t\t\tvar pong=new Pong();\r\n\t\t\tpong._time=time;\r\n\t\t\treturn pong;\r\n\t\t}\r\n\r\n\t\tPong.TYPE=7;\r\n\t\tPong.ID=15;\r\n\t\treturn Pong;\r\n\t})()\r\n\r\n\r\n\t//class mj.net.message.login.Radio\r\n\tvar Radio=(function(){\r\n\t\tfunction Radio(){\r\n\t\t\tthis._radio=null;\r\n\t\t}\r\n\r\n\t\t__class(Radio,'mj.net.message.login.Radio');\r\n\t\tvar __proto=Radio.prototype;\r\n\t\tLaya.imps(__proto,{\"com.isnowfox.core.io.message.Message\":true})\r\n\t\t__proto.decode=function(in0){\r\n\t\t\tthis._radio=in0.readString();\r\n\t\t}\r\n\r\n\t\t__proto.encode=function(out){\r\n\t\t\tout.writeString(this.radio);\r\n\t\t}\r\n\r\n\t\t__proto.toString=function(){\r\n\t\t\treturn \"Radio [radio=\"+this._radio+\", ]\";\r\n\t\t}\r\n\r\n\t\t__proto.getMessageType=function(){\r\n\t\t\treturn 7;\r\n\t\t}\r\n\r\n\t\t__proto.getMessageId=function(){\r\n\t\t\treturn 16;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*广播（跑马灯）\r\n\t\t*/\r\n\t\t/**\r\n\t\t*广播（跑马灯）\r\n\t\t*/\r\n\t\t__getset(0,__proto,'radio',function(){\r\n\t\t\treturn this._radio;\r\n\t\t\t},function(radio){\r\n\t\t\tthis._radio=radio;\r\n\t\t});\r\n\r\n\t\tRadio.create=function(radio){\r\n\t\t\tvar radio=new Radio();\r\n\t\t\tradio._radio=radio;\r\n\t\t\treturn radio;\r\n\t\t}\r\n\r\n\t\tRadio.TYPE=7;\r\n\t\tRadio.ID=16;\r\n\t\treturn Radio;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*登陆结果\r\n\t*\r\n\t*<b>生成器生成代码，请勿修改，扩展请继承</b>\r\n\t*@author isnowfox消息生成器\r\n\t*/\r\n\t//class mj.net.message.login.RepeatLoginRet\r\n\tvar RepeatLoginRet=(function(){\r\n\t\tfunction RepeatLoginRet(){}\r\n\t\t__class(RepeatLoginRet,'mj.net.message.login.RepeatLoginRet');\r\n\t\tvar __proto=RepeatLoginRet.prototype;\r\n\t\tLaya.imps(__proto,{\"com.isnowfox.core.io.message.Message\":true})\r\n\t\t__proto.decode=function(in0){}\r\n\t\t__proto.encode=function(out){}\r\n\t\t__proto.toString=function(){\r\n\t\t\treturn \"RepeatLoginRet [ ]\";\r\n\t\t}\r\n\r\n\t\t__proto.getMessageType=function(){\r\n\t\t\treturn 7;\r\n\t\t}\r\n\r\n\t\t__proto.getMessageId=function(){\r\n\t\t\treturn 17;\r\n\t\t}\r\n\r\n\t\tRepeatLoginRet.TYPE=7;\r\n\t\tRepeatLoginRet.ID=17;\r\n\t\treturn RepeatLoginRet;\r\n\t})()\r\n\r\n\r\n\t//class mj.net.message.login.RoomHistory\r\n\tvar RoomHistory=(function(){\r\n\t\tfunction RoomHistory(){\r\n\t\t\tthis._roomCheckId=null;\r\n\t\t\tthis._startDate=null;\r\n\t\t\tthis._chapterNums=0;\r\n\t\t\tthis._userNames=null;\r\n\t\t\tthis._scores=null;\r\n\t\t}\r\n\r\n\t\t__class(RoomHistory,'mj.net.message.login.RoomHistory');\r\n\t\tvar __proto=RoomHistory.prototype;\r\n\t\tLaya.imps(__proto,{\"com.isnowfox.core.io.message.Message\":true})\r\n\t\t__proto.decode=function(in0){\r\n\t\t\tthis._roomCheckId=in0.readString();\r\n\t\t\tthis._startDate=in0.readString();\r\n\t\t\tthis._chapterNums=in0.readInt();\r\n\t\t\tthis._userNames=in0.readStringArray();\r\n\t\t\tthis._scores=in0.readIntArray();\r\n\t\t}\r\n\r\n\t\t__proto.encode=function(out){\r\n\t\t\tout.writeString(this.roomCheckId);\r\n\t\t\tout.writeString(this.startDate);\r\n\t\t\tout.writeInt(this.chapterNums);\r\n\t\t\tout.writeStringArray(this.userNames);\r\n\t\t\tout.writeIntArray(this.scores);\r\n\t\t}\r\n\r\n\t\t__proto.toString=function(){\r\n\t\t\treturn \"RoomHistory [roomCheckId=\"+this._roomCheckId+\",startDate=\"+this._startDate+\",chapterNums=\"+this._chapterNums+\",userNames=\"+this._userNames+\",scores=\"+this._scores+\", ]\";\r\n\t\t}\r\n\r\n\t\t__proto.getMessageType=function(){\r\n\t\t\treturn 7;\r\n\t\t}\r\n\r\n\t\t__proto.getMessageId=function(){\r\n\t\t\treturn 18;\r\n\t\t}\r\n\r\n\t\t__getset(0,__proto,'userNames',function(){\r\n\t\t\treturn this._userNames;\r\n\t\t\t},function(userNames){\r\n\t\t\tthis._userNames=userNames;\r\n\t\t});\r\n\r\n\t\t__getset(0,__proto,'scores',function(){\r\n\t\t\treturn this._scores;\r\n\t\t\t},function(scores){\r\n\t\t\tthis._scores=scores;\r\n\t\t});\r\n\r\n\t\t__getset(0,__proto,'chapterNums',function(){\r\n\t\t\treturn this._chapterNums;\r\n\t\t\t},function(chapterNums){\r\n\t\t\tthis._chapterNums=chapterNums;\r\n\t\t});\r\n\r\n\t\t__getset(0,__proto,'startDate',function(){\r\n\t\t\treturn this._startDate;\r\n\t\t\t},function(startDate){\r\n\t\t\tthis._startDate=startDate;\r\n\t\t});\r\n\r\n\t\t__getset(0,__proto,'roomCheckId',function(){\r\n\t\t\treturn this._roomCheckId;\r\n\t\t\t},function(roomCheckId){\r\n\t\t\tthis._roomCheckId=roomCheckId;\r\n\t\t});\r\n\r\n\t\tRoomHistory.create=function(roomCheckId,startDate,chapterNums,userNames,scores){\r\n\t\t\tvar roomHistory=new RoomHistory();\r\n\t\t\troomHistory._roomCheckId=roomCheckId;\r\n\t\t\troomHistory._startDate=startDate;\r\n\t\t\troomHistory._chapterNums=chapterNums;\r\n\t\t\troomHistory._userNames=userNames;\r\n\t\t\troomHistory._scores=scores;\r\n\t\t\treturn roomHistory;\r\n\t\t}\r\n\r\n\t\tRoomHistory.TYPE=7;\r\n\t\tRoomHistory.ID=18;\r\n\t\treturn RoomHistory;\r\n\t})()\r\n\r\n\r\n\t//class mj.net.message.login.RoomHistoryList\r\n\tvar RoomHistoryList=(function(){\r\n\t\tfunction RoomHistoryList(){}\r\n\t\t__class(RoomHistoryList,'mj.net.message.login.RoomHistoryList');\r\n\t\tvar __proto=RoomHistoryList.prototype;\r\n\t\tLaya.imps(__proto,{\"com.isnowfox.core.io.message.Message\":true})\r\n\t\t__proto.decode=function(in0){}\r\n\t\t__proto.encode=function(out){}\r\n\t\t__proto.toString=function(){\r\n\t\t\treturn \"RoomHistoryList [ ]\";\r\n\t\t}\r\n\r\n\t\t__proto.getMessageType=function(){\r\n\t\t\treturn 7;\r\n\t\t}\r\n\r\n\t\t__proto.getMessageId=function(){\r\n\t\t\treturn 19;\r\n\t\t}\r\n\r\n\t\tRoomHistoryList.TYPE=7;\r\n\t\tRoomHistoryList.ID=19;\r\n\t\treturn RoomHistoryList;\r\n\t})()\r\n\r\n\r\n\t//class mj.net.message.login.RoomHistoryListRet\r\n\tvar RoomHistoryListRet=(function(){\r\n\t\tfunction RoomHistoryListRet(){\r\n\t\t\tthis._list=null;\r\n\t\t}\r\n\r\n\t\t__class(RoomHistoryListRet,'mj.net.message.login.RoomHistoryListRet');\r\n\t\tvar __proto=RoomHistoryListRet.prototype;\r\n\t\tLaya.imps(__proto,{\"com.isnowfox.core.io.message.Message\":true})\r\n\t\t__proto.decode=function(in0){\r\n\t\t\tvar listLen=in0.readInt();\r\n\t\t\tif(listLen==-1){\r\n\t\t\t\tthis._list=null;\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tthis._list=[];\r\n\t\t\t\tfor(var listI=0;listI < listLen;listI++){\r\n\t\t\t\t\tvar listItem=new RoomHistory();\r\n\t\t\t\t\tlistItem.decode(in0);\r\n\t\t\t\t\tthis._list[listI]=(listItem);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__proto.encode=function(out){\r\n\t\t\tif(this.list==null){\r\n\t\t\t\tout.writeInt(-1);\r\n\t\t\t\t}else{\r\n\t\t\t\tvar listLen=this.list.length;\r\n\t\t\t\tout.writeInt(listLen);\r\n\t\t\t\tfor(var listI=0;listI < listLen;listI++){\r\n\t\t\t\t\tthis.list[listI].encode(out);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__proto.toString=function(){\r\n\t\t\treturn \"RoomHistoryListRet [list=\"+this._list+\", ]\";\r\n\t\t}\r\n\r\n\t\t__proto.getMessageType=function(){\r\n\t\t\treturn 7;\r\n\t\t}\r\n\r\n\t\t__proto.getMessageId=function(){\r\n\t\t\treturn 20;\r\n\t\t}\r\n\r\n\t\t__getset(0,__proto,'list',function(){\r\n\t\t\treturn this._list;\r\n\t\t\t},function(list){\r\n\t\t\tthis._list=list;\r\n\t\t});\r\n\r\n\t\tRoomHistoryListRet.create=function(list){\r\n\t\t\tvar roomHistoryListRet=new RoomHistoryListRet();\r\n\t\t\troomHistoryListRet._list=list;\r\n\t\t\treturn roomHistoryListRet;\r\n\t\t}\r\n\r\n\t\tRoomHistoryListRet.TYPE=7;\r\n\t\tRoomHistoryListRet.ID=20;\r\n\t\treturn RoomHistoryListRet;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*发送验证码\r\n\t*\r\n\t*<b>生成器生成代码，请勿修改，扩展请继承</b>\r\n\t*@author isnowfox消息生成器\r\n\t*/\r\n\t//class mj.net.message.login.SendAuthCode\r\n\tvar SendAuthCode=(function(){\r\n\t\tfunction SendAuthCode(){\r\n\t\t\tthis._phone=null;\r\n\t\t}\r\n\r\n\t\t__class(SendAuthCode,'mj.net.message.login.SendAuthCode');\r\n\t\tvar __proto=SendAuthCode.prototype;\r\n\t\tLaya.imps(__proto,{\"com.isnowfox.core.io.message.Message\":true})\r\n\t\t__proto.decode=function(in0){\r\n\t\t\tthis._phone=in0.readString();\r\n\t\t}\r\n\r\n\t\t__proto.encode=function(out){\r\n\t\t\tout.writeString(this.phone);\r\n\t\t}\r\n\r\n\t\t__proto.toString=function(){\r\n\t\t\treturn \"SendAuthCode [phone=\"+this._phone+\", ]\";\r\n\t\t}\r\n\r\n\t\t__proto.getMessageType=function(){\r\n\t\t\treturn 7;\r\n\t\t}\r\n\r\n\t\t__proto.getMessageId=function(){\r\n\t\t\treturn 21;\r\n\t\t}\r\n\r\n\t\t__getset(0,__proto,'phone',function(){\r\n\t\t\treturn this._phone;\r\n\t\t\t},function(phone){\r\n\t\t\tthis._phone=phone;\r\n\t\t});\r\n\r\n\t\tSendAuthCode.create=function(phone){\r\n\t\t\tvar sendAuthCode=new SendAuthCode();\r\n\t\t\tsendAuthCode._phone=phone;\r\n\t\t\treturn sendAuthCode;\r\n\t\t}\r\n\r\n\t\tSendAuthCode.TYPE=7;\r\n\t\tSendAuthCode.ID=21;\r\n\t\treturn SendAuthCode;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*发送验证码回执\r\n\t*\r\n\t*<b>生成器生成代码，请勿修改，扩展请继承</b>\r\n\t*@author isnowfox消息生成器\r\n\t*/\r\n\t//class mj.net.message.login.SendAuthCodeRet\r\n\tvar SendAuthCodeRet=(function(){\r\n\t\tfunction SendAuthCodeRet(){\r\n\t\t\tthis._success=false;\r\n\t\t}\r\n\r\n\t\t__class(SendAuthCodeRet,'mj.net.message.login.SendAuthCodeRet');\r\n\t\tvar __proto=SendAuthCodeRet.prototype;\r\n\t\tLaya.imps(__proto,{\"com.isnowfox.core.io.message.Message\":true})\r\n\t\t__proto.decode=function(in0){\r\n\t\t\tthis._success=in0.readBoolean();\r\n\t\t}\r\n\r\n\t\t__proto.encode=function(out){\r\n\t\t\tout.writeBoolean(this.success);\r\n\t\t}\r\n\r\n\t\t__proto.toString=function(){\r\n\t\t\treturn \"SendAuthCodeRet [success=\"+this._success+\", ]\";\r\n\t\t}\r\n\r\n\t\t__proto.getMessageType=function(){\r\n\t\t\treturn 7;\r\n\t\t}\r\n\r\n\t\t__proto.getMessageId=function(){\r\n\t\t\treturn 22;\r\n\t\t}\r\n\r\n\t\t__getset(0,__proto,'success',function(){\r\n\t\t\treturn this._success;\r\n\t\t\t},function(success){\r\n\t\t\tthis._success=success;\r\n\t\t});\r\n\r\n\t\tSendAuthCodeRet.create=function(success){\r\n\t\t\tvar sendAuthCodeRet=new SendAuthCodeRet();\r\n\t\t\tsendAuthCodeRet._success=success;\r\n\t\t\treturn sendAuthCodeRet;\r\n\t\t}\r\n\r\n\t\tSendAuthCodeRet.TYPE=7;\r\n\t\tSendAuthCodeRet.ID=22;\r\n\t\treturn SendAuthCodeRet;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*进入房间成功,游戏开始\r\n\t*前端收到这个消息开始发送命令加载 游戏信息,\r\n\t*\r\n\t*<b>生成器生成代码，请勿修改，扩展请继承</b>\r\n\t*@author isnowfox消息生成器\r\n\t*/\r\n\t//class mj.net.message.login.StartGame\r\n\tvar StartGame=(function(){\r\n\t\tfunction StartGame(){}\r\n\t\t__class(StartGame,'mj.net.message.login.StartGame');\r\n\t\tvar __proto=StartGame.prototype;\r\n\t\tLaya.imps(__proto,{\"com.isnowfox.core.io.message.Message\":true})\r\n\t\t__proto.decode=function(in0){}\r\n\t\t__proto.encode=function(out){}\r\n\t\t__proto.toString=function(){\r\n\t\t\treturn \"StartGame [ ]\";\r\n\t\t}\r\n\r\n\t\t__proto.getMessageType=function(){\r\n\t\t\treturn 7;\r\n\t\t}\r\n\r\n\t\t__proto.getMessageId=function(){\r\n\t\t\treturn 23;\r\n\t\t}\r\n\r\n\t\tStartGame.TYPE=7;\r\n\t\tStartGame.ID=23;\r\n\t\treturn StartGame;\r\n\t})()\r\n\r\n\r\n\t//class mj.net.message.login.SysSetting\r\n\tvar SysSetting=(function(){\r\n\t\tfunction SysSetting(){\r\n\t\t\tthis._radio=null;\r\n\t\t\tthis._notice=null;\r\n\t\t\tthis._payInfo=null;\r\n\t\t\tthis._agreement=null;\r\n\t\t}\r\n\r\n\t\t__class(SysSetting,'mj.net.message.login.SysSetting');\r\n\t\tvar __proto=SysSetting.prototype;\r\n\t\tLaya.imps(__proto,{\"com.isnowfox.core.io.message.Message\":true})\r\n\t\t__proto.decode=function(in0){\r\n\t\t\tthis._radio=in0.readString();\r\n\t\t\tthis._notice=in0.readString();\r\n\t\t\tthis._payInfo=in0.readString();\r\n\t\t\tthis._agreement=in0.readString();\r\n\t\t}\r\n\r\n\t\t__proto.encode=function(out){\r\n\t\t\tout.writeString(this.radio);\r\n\t\t\tout.writeString(this.notice);\r\n\t\t\tout.writeString(this.payInfo);\r\n\t\t\tout.writeString(this.agreement);\r\n\t\t}\r\n\r\n\t\t__proto.toString=function(){\r\n\t\t\treturn \"SysSetting [radio=\"+this._radio+\",notice=\"+this._notice+\",payInfo=\"+this._payInfo+\",agreement=\"+this._agreement+\", ]\";\r\n\t\t}\r\n\r\n\t\t__proto.getMessageType=function(){\r\n\t\t\treturn 7;\r\n\t\t}\r\n\r\n\t\t__proto.getMessageId=function(){\r\n\t\t\treturn 24;\r\n\t\t}\r\n\r\n\t\t__getset(0,__proto,'agreement',function(){\r\n\t\t\treturn this._agreement;\r\n\t\t\t},function(agreement){\r\n\t\t\tthis._agreement=agreement;\r\n\t\t});\r\n\r\n\t\t__getset(0,__proto,'notice',function(){\r\n\t\t\treturn this._notice;\r\n\t\t\t},function(notice){\r\n\t\t\tthis._notice=notice;\r\n\t\t});\r\n\r\n\t\t__getset(0,__proto,'payInfo',function(){\r\n\t\t\treturn this._payInfo;\r\n\t\t\t},function(payInfo){\r\n\t\t\tthis._payInfo=payInfo;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*广播（跑马灯）\r\n\t\t*/\r\n\t\t/**\r\n\t\t*广播（跑马灯）\r\n\t\t*/\r\n\t\t__getset(0,__proto,'radio',function(){\r\n\t\t\treturn this._radio;\r\n\t\t\t},function(radio){\r\n\t\t\tthis._radio=radio;\r\n\t\t});\r\n\r\n\t\tSysSetting.create=function(radio,notice,payInfo,agreement){\r\n\t\t\tvar sysSetting=new SysSetting();\r\n\t\t\tsysSetting._radio=radio;\r\n\t\t\tsysSetting._notice=notice;\r\n\t\t\tsysSetting._payInfo=payInfo;\r\n\t\t\tsysSetting._agreement=agreement;\r\n\t\t\treturn sysSetting;\r\n\t\t}\r\n\r\n\t\tSysSetting.TYPE=7;\r\n\t\tSysSetting.ID=24;\r\n\t\treturn SysSetting;\r\n\t})()\r\n\r\n\r\n\t//class mj.net.message.MessageFactoryImpi\r\n\tvar MessageFactoryImpi=(function(){\r\n\t\tfunction MessageFactoryImpi(){\r\n\t\t\tthis.vector=[];\r\n\t\t\tif(MessageFactoryImpi.instance!=null){\r\n\t\t\t\tthrow new SingletonError(\"ResourceManager 是单例模式\");\r\n\t\t\t}\r\n\t\t\tthis.vector[1]=[];\r\n\t\t\tthis.vector[1][0]=mj.net.message.game.GameChapterEnd;\r\n\t\t\tthis.vector[1][1]=mj.net.message.game.GameChapterStart;\r\n\t\t\tthis.vector[1][2]=mj.net.message.game.GameChapterStartRet;\r\n\t\t\tthis.vector[1][3]=mj.net.message.game.GameDelRoom;\r\n\t\t\tthis.vector[1][4]=mj.net.message.game.GameExitUser;\r\n\t\t\tthis.vector[1][5]=mj.net.message.game.GameFanResult;\r\n\t\t\tthis.vector[1][6]=mj.net.message.game.GameJoinRoom;\r\n\t\t\tthis.vector[1][7]=mj.net.message.game.GameRoomInfo;\r\n\t\t\tthis.vector[1][8]=mj.net.message.game.GameUserInfo;\r\n\t\t\tthis.vector[1][9]=mj.net.message.game.MajiangChapterMsg;\r\n\t\t\tthis.vector[1][10]=mj.net.message.game.OperationCPGH;\r\n\t\t\tthis.vector[1][11]=mj.net.message.game.OperationCPGHRet;\r\n\t\t\tthis.vector[1][12]=mj.net.message.game.OperationFaPai;\r\n\t\t\tthis.vector[1][13]=mj.net.message.game.OperationFaPaiRet;\r\n\t\t\tthis.vector[1][14]=mj.net.message.game.OperationOut;\r\n\t\t\tthis.vector[1][15]=mj.net.message.game.OperationOutRet;\r\n\t\t\tthis.vector[1][16]=mj.net.message.game.SyncOpt;\r\n\t\t\tthis.vector[1][17]=mj.net.message.game.SyncOptTime;\r\n\t\t\tthis.vector[1][18]=mj.net.message.game.TingPai;\r\n\t\t\tthis.vector[1][19]=mj.net.message.game.UserOffline;\r\n\t\t\tthis.vector[1][20]=mj.net.message.game.UserPlaceMsg;\r\n\t\t\tthis.vector[1][21]=mj.net.message.game.VoteDelSelect;\r\n\t\t\tthis.vector[1][22]=mj.net.message.game.VoteDelSelectRet;\r\n\t\t\tthis.vector[1][23]=mj.net.message.game.VoteDelStart;\r\n\t\t\tthis.vector[7]=[];\r\n\t\t\tthis.vector[7][0]=mj.net.message.login.CreateRoom;\r\n\t\t\tthis.vector[7][1]=mj.net.message.login.CreateRoomRet;\r\n\t\t\tthis.vector[7][2]=mj.net.message.login.DelRoom;\r\n\t\t\tthis.vector[7][3]=mj.net.message.login.DelRoomRet;\r\n\t\t\tthis.vector[7][4]=mj.net.message.login.ExitRoom;\r\n\t\t\tthis.vector[7][5]=mj.net.message.login.ExitRoomRet;\r\n\t\t\tthis.vector[7][6]=mj.net.message.login.JoinRoom;\r\n\t\t\tthis.vector[7][7]=mj.net.message.login.JoinRoomRet;\r\n\t\t\tthis.vector[7][8]=mj.net.message.login.Login;\r\n\t\t\tthis.vector[7][9]=mj.net.message.login.LoginError;\r\n\t\t\tthis.vector[7][10]=mj.net.message.login.LoginRet;\r\n\t\t\tthis.vector[7][11]=mj.net.message.login.Notice;\r\n\t\t\tthis.vector[7][12]=mj.net.message.login.OptionEntry;\r\n\t\t\tthis.vector[7][13]=mj.net.message.login.Pay;\r\n\t\t\tthis.vector[7][14]=mj.net.message.login.Ping;\r\n\t\t\tthis.vector[7][15]=mj.net.message.login.Pong;\r\n\t\t\tthis.vector[7][16]=mj.net.message.login.Radio;\r\n\t\t\tthis.vector[7][17]=mj.net.message.login.RepeatLoginRet;\r\n\t\t\tthis.vector[7][18]=mj.net.message.login.RoomHistory;\r\n\t\t\tthis.vector[7][19]=mj.net.message.login.RoomHistoryList;\r\n\t\t\tthis.vector[7][20]=mj.net.message.login.RoomHistoryListRet;\r\n\t\t\tthis.vector[7][21]=mj.net.message.login.SendAuthCode;\r\n\t\t\tthis.vector[7][22]=mj.net.message.login.SendAuthCodeRet;\r\n\t\t\tthis.vector[7][23]=mj.net.message.login.StartGame;\r\n\t\t\tthis.vector[7][24]=mj.net.message.login.SysSetting;\r\n\t\t}\r\n\r\n\t\t__class(MessageFactoryImpi,'mj.net.message.MessageFactoryImpi');\r\n\t\tvar __proto=MessageFactoryImpi.prototype;\r\n\t\tLaya.imps(__proto,{\"com.isnowfox.core.io.message.MessageFactory\":true})\r\n\t\t__proto.getMessage=function(type,id){\r\n\t\t\treturn new this.vector[type][id];\r\n\t\t}\r\n\r\n\t\t__proto.getMessageClass=function(type,id){\r\n\t\t\treturn this.vector[type][id];\r\n\t\t}\r\n\r\n\t\t__static(MessageFactoryImpi,\r\n\t\t['instance',function(){return this.instance=new MessageFactoryImpi();}\r\n\t\t]);\r\n\t\treturn MessageFactoryImpi;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*\r\n\t*@author zuoge85\r\n\t*/\r\n\t//class mj.net.Net\r\n\tvar Net=(function(){\r\n\t\tfunction Net(){\r\n\t\t\tthis.socket=null;\r\n\t\t\tthis.connectCallback=null;\r\n\t\t\tthis.repeatLogin=false;\r\n\t\t\tthis.buffer=new Byte();\r\n\t\t\tthis.msgFactory=MessageFactoryImpi.instance;\r\n\t\t\tthis.msgHandler=MessageHandlerFactory.instance;\r\n\t\t\tif (Net.instance !=null){\r\n\t\t\t\tthrow new SingletonError(\"ResourceManager 是单例模式\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__class(Net,'mj.net.Net');\r\n\t\tvar __proto=Net.prototype;\r\n\t\t__proto.init=function(url,connectCallback){\r\n\t\t\tConsole.log(\"准备连接服务器！{0}\",url)\r\n\t\t\tif (this.socket){\r\n\t\t\t\tthis.socket.offAll();\r\n\t\t\t\tthis.socket.close();\r\n\t\t\t}\r\n\t\t\tthis.socket=new Socket();\r\n\t\t\tthis.socket.connectByUrl(url);\r\n\t\t\tthis.socket.on(\"open\",this,this.connectHandler);\r\n\t\t\tthis.socket.on(\"close\",this,this.closeHandler);\r\n\t\t\tthis.socket.on(\"message\",this,this.socketDataHandler);\r\n\t\t\tthis.socket.on(\"error\",this,this.ioErrorHandler);\r\n\t\t\tthis.connectCallback=connectCallback;\r\n\t\t}\r\n\r\n\t\t// }\r\n\t\t__proto.closeHandler=function(event){\r\n\t\t\tConsole.log(\"closeHandler:\",event);\r\n\t\t\tvar msg=this.repeatLogin ? \"你在其他地方登录？被挤掉线！\\n如果不是本人请联系客服！\" :\"服务器断开连接！\";\r\n\t\t\tDialog.showMessage(\"服务器断开连接！\",\r\n\t\t\tHandler.create(this,function(){\r\n\t\t\t\tGameMain.current.restart()\r\n\t\t\t}));\r\n\t\t\tLaya.timer.clearAll(this);\r\n\t\t}\r\n\r\n\t\t// PromptMessageManager.instance.showPromptMessage(\"服务器断开连接，如果不刷新肯定不正常！\\n\");\r\n\t\t__proto.connectHandler=function(event){\r\n\t\t\tConsole.log(\"connectHandler:\",event);\r\n\t\t\tthis.repeatLogin=false;\r\n\t\t\tthis.connectCallback();\r\n\t\t\tLaya.timer.loop(10 *1000,this,function(){\r\n\t\t\t\tthis.write(Ping.create(Laya.timer.currTimer.toString()))\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t__proto.ioErrorHandler=function(event){\r\n\t\t\tConsole.log(\"ioErrorHandler:\",event);\r\n\t\t\tDialog.showMessage(\"连接服务器,网络错误！\\n\"+event.text,\r\n\t\t\tHandler.create(this,function(){\r\n\t\t\t\tGameMain.current.restart()\r\n\t\t\t}));\r\n\t\t}\r\n\r\n\t\t// errorCallback();\r\n\t\t__proto.socketDataHandler=function(message){\r\n\t\t\tif ((message instanceof ArrayBuffer)){\r\n\t\t\t\tvar readBuffer=new Byte(message);\r\n\t\t\t\treadBuffer.endian=\"bigEndian\";\r\n\t\t\t\treadBuffer.pos=0;\r\n\t\t\t\tvar in0=MarkCompressInput.create(readBuffer);\r\n\t\t\t\tvar type=in0.readInt();\r\n\t\t\t\tvar id=in0.readInt();\r\n\t\t\t\tvar msg=this.msgFactory.getMessage(type,id);\r\n\t\t\t\tmsg.decode(in0);\r\n\t\t\t\tConsole.log(\r\n\t\t\t\t\"收到消息[type:{0},id:{1},msg:{2}]\",\r\n\t\t\t\tmsg.getMessageType(),msg.getMessageId(),\r\n\t\t\t\tmsg);\r\n\t\t\t\tvar handler=this.msgHandler.getHandler(type,id);\r\n\t\t\t\thandler.handler(msg);\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tthrow new Error(\"错误的类型,message\"+message);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*\r\n\t\t*@param msg\r\n\t\t*@throws ProtocolException\r\n\t\t*/\r\n\t\t__proto.write=function(msg){\r\n\t\t\tvar cls=MessageFactoryImpi.instance.getMessageClass(msg.getMessageType(),msg.getMessageId());\r\n\t\t\tif (cls==null){\r\n\t\t\t\tthrow Error(\"未知消息！\");\r\n\t\t\t}\r\n\t\t\tif (!(Laya.__typeof(msg,cls))){\r\n\t\t\t\tthrow Error(\"错误的类型！\"+cls);\r\n\t\t\t};\r\n\t\t\tvar buffer=this.buffer;\r\n\t\t\tbuffer.endian=\"bigEndian\";\r\n\t\t\tbuffer.length=0;\r\n\t\t\tbuffer.pos=0;\r\n\t\t\tvar out=MarkCompressOutput.create(buffer);\r\n\t\t\tout.writeInt(msg.getMessageType());\r\n\t\t\tout.writeInt(msg.getMessageId());\r\n\t\t\tmsg.encode(out);\r\n\t\t\tif (buffer.length > 0xFFFFFF){\r\n\t\t\t\tthrow new ProtocolException(\"严重错误，消息长度超过最大值:\"+0xFFFFFF);\r\n\t\t\t}\r\n\t\t\tbuffer.pos=0;\r\n\t\t\tthis.socket.send(buffer.buffer);\r\n\t\t\tConsole.log(\r\n\t\t\t\"发送消息[type:{0},id:{1},len:{2}] msg:{3}\",\r\n\t\t\tmsg.getMessageType(),msg.getMessageId(),\r\n\t\t\tbuffer.length,msg);\r\n\t\t}\r\n\r\n\t\t__proto.setRepeatLogin=function(b){\r\n\t\t\tthis.repeatLogin=b;\r\n\t\t}\r\n\r\n\t\t__getset(0,__proto,'connected',function(){\r\n\t\t\treturn this.socket !=null && this.socket.connected;\r\n\t\t});\r\n\r\n\t\tNet.debug=function(buffer){\r\n\t\t\tvar string=\"\";\r\n\t\t\tbuffer.pos=0;\r\n\t\t\tfor (var i=0;i < buffer.length;i++){\r\n\t\t\t\tvar b=buffer.getByte();\r\n\t\t\t\tstring+=Net.HEX_CHARS[b >> 8 & 0x0F];\r\n\t\t\t\tstring+=Net.HEX_CHARS[b & 0x0F];\r\n\t\t\t}\r\n\t\t\treturn string;\r\n\t\t}\r\n\r\n\t\t__static(Net,\r\n\t\t['instance',function(){return this.instance=new Net();},'HEX_CHARS',function(){return this.HEX_CHARS=[\"0\",\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\"A\",\"B\",\"C\",\"D\",\"E\",\"F\"];}\r\n\t\t]);\r\n\t\treturn Net;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*<code>EventDispatcher</code> 类是可调度事件的所有类的基类。\r\n\t*/\r\n\t//class laya.events.EventDispatcher\r\n\tvar EventDispatcher=(function(){\r\n\t\tvar EventHandler;\r\n\t\tfunction EventDispatcher(){\r\n\t\t\tthis._events=null;\r\n\t\t\tObject.defineProperty(this,\"_events\",{enumerable:false});\r\n\t\t}\r\n\r\n\t\t__class(EventDispatcher,'laya.events.EventDispatcher');\r\n\t\tvar __proto=EventDispatcher.prototype;\r\n\t\t/**\r\n\t\t*检查 EventDispatcher 对象是否为特定事件类型注册了任何侦听器。\r\n\t\t*@param type 事件的类型。\r\n\t\t*@return 如果指定类型的侦听器已注册，则值为 true；否则，值为 false。\r\n\t\t*/\r\n\t\t__proto.hasListener=function(type){\r\n\t\t\tvar listener=this._events && this._events[type];\r\n\t\t\treturn !!listener;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*派发事件。\r\n\t\t*@param type 事件类型。\r\n\t\t*@param data 回调数据。\r\n\t\t*<b>注意：</b>如果是需要传递多个参数 p1,p2,p3,...可以使用数组结构如：[p1,p2,p3,...] ；如果需要回调单个参数 p 是一个数组，则需要使用结构如：[p]，其他的单个参数 p ，可以直接传入参数 p。\r\n\t\t*@return 此事件类型是否有侦听者，如果有侦听者则值为 true，否则值为 false。\r\n\t\t*/\r\n\t\t__proto.event=function(type,data){\r\n\t\t\tif (!this._events || !this._events[type])return false;\r\n\t\t\tvar listeners=this._events[type];\r\n\t\t\tif (listeners.run){\r\n\t\t\t\tif (listeners.once)delete this._events[type];\r\n\t\t\t\tdata !=null ? listeners.runWith(data):listeners.run();\r\n\t\t\t\t}else {\r\n\t\t\t\tfor (var i=0,n=listeners.length;i < n;i++){\r\n\t\t\t\t\tvar listener=listeners[i];\r\n\t\t\t\t\tif (listener){\r\n\t\t\t\t\t\t(data !=null)? listener.runWith(data):listener.run();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!listener || listener.once){\r\n\t\t\t\t\t\tlisteners.splice(i,1);\r\n\t\t\t\t\t\ti--;\r\n\t\t\t\t\t\tn--;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (listeners.length===0)delete this._events[type];\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*使用 EventDispatcher 对象注册指定类型的事件侦听器对象，以使侦听器能够接收事件通知。\r\n\t\t*@param type 事件的类型。\r\n\t\t*@param caller 事件侦听函数的执行域。\r\n\t\t*@param listener 事件侦听函数。\r\n\t\t*@param args 事件侦听函数的回调参数。\r\n\t\t*@return 此 EventDispatcher 对象。\r\n\t\t*/\r\n\t\t__proto.on=function(type,caller,listener,args){\r\n\t\t\treturn this._createListener(type,caller,listener,args,false);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*使用 EventDispatcher 对象注册指定类型的事件侦听器对象，以使侦听器能够接收事件通知，此侦听事件响应一次后自动移除。\r\n\t\t*@param type 事件的类型。\r\n\t\t*@param caller 事件侦听函数的执行域。\r\n\t\t*@param listener 事件侦听函数。\r\n\t\t*@param args 事件侦听函数的回调参数。\r\n\t\t*@return 此 EventDispatcher 对象。\r\n\t\t*/\r\n\t\t__proto.once=function(type,caller,listener,args){\r\n\t\t\treturn this._createListener(type,caller,listener,args,true);\r\n\t\t}\r\n\r\n\t\t/**@private */\r\n\t\t__proto._createListener=function(type,caller,listener,args,once,offBefore){\r\n\t\t\t(offBefore===void 0)&& (offBefore=true);\r\n\t\t\toffBefore && this.off(type,caller,listener,once);\r\n\t\t\tvar handler=EventHandler.create(caller || this,listener,args,once);\r\n\t\t\tthis._events || (this._events={});\r\n\t\t\tvar events=this._events;\r\n\t\t\tif (!events[type])events[type]=handler;\r\n\t\t\telse {\r\n\t\t\t\tif (!events[type].run)events[type].push(handler);\r\n\t\t\t\telse events[type]=[events[type],handler];\r\n\t\t\t}\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*从 EventDispatcher 对象中删除侦听器。\r\n\t\t*@param type 事件的类型。\r\n\t\t*@param caller 事件侦听函数的执行域。\r\n\t\t*@param listener 事件侦听函数。\r\n\t\t*@param onceOnly 如果值为 true ,则只移除通过 once 方法添加的侦听器。\r\n\t\t*@return 此 EventDispatcher 对象。\r\n\t\t*/\r\n\t\t__proto.off=function(type,caller,listener,onceOnly){\r\n\t\t\t(onceOnly===void 0)&& (onceOnly=false);\r\n\t\t\tif (!this._events || !this._events[type])return this;\r\n\t\t\tvar listeners=this._events[type];\r\n\t\t\tif (listener !=null){\r\n\t\t\t\tif (listeners.run){\r\n\t\t\t\t\tif ((!caller || listeners.caller===caller)&& listeners.method===listener && (!onceOnly || listeners.once)){\r\n\t\t\t\t\t\tdelete this._events[type];\r\n\t\t\t\t\t\tlisteners.recover();\r\n\t\t\t\t\t}\r\n\t\t\t\t\t}else {\r\n\t\t\t\t\tvar count=0;\r\n\t\t\t\t\tfor (var i=0,n=listeners.length;i < n;i++){\r\n\t\t\t\t\t\tvar item=listeners[i];\r\n\t\t\t\t\t\tif (item && (!caller || item.caller===caller)&& item.method===listener && (!onceOnly || item.once)){\r\n\t\t\t\t\t\t\tcount++;\r\n\t\t\t\t\t\t\tlisteners[i]=null;\r\n\t\t\t\t\t\t\titem.recover();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (count===n)delete this._events[type];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*从 EventDispatcher 对象中删除指定事件类型的所有侦听器。\r\n\t\t*@param type 事件类型，如果值为 null，则移除本对象所有类型的侦听器。\r\n\t\t*@return 此 EventDispatcher 对象。\r\n\t\t*/\r\n\t\t__proto.offAll=function(type){\r\n\t\t\tvar events=this._events;\r\n\t\t\tif (!events)return this;\r\n\t\t\tif (type){\r\n\t\t\t\tthis._recoverHandlers(events[type]);\r\n\t\t\t\tdelete events[type];\r\n\t\t\t\t}else {\r\n\t\t\t\tfor (var name in events){\r\n\t\t\t\t\tthis._recoverHandlers(events[name]);\r\n\t\t\t\t}\r\n\t\t\t\tthis._events=null;\r\n\t\t\t}\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\t\t__proto._recoverHandlers=function(arr){\r\n\t\t\tif (!arr)return;\r\n\t\t\tif (arr.run){\r\n\t\t\t\tarr.recover();\r\n\t\t\t\t}else {\r\n\t\t\t\tfor (var i=arr.length-1;i >-1;i--){\r\n\t\t\t\t\tif (arr[i]){\r\n\t\t\t\t\t\tarr[i].recover();\r\n\t\t\t\t\t\tarr[i]=null;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*检测指定事件类型是否是鼠标事件。\r\n\t\t*@param type 事件的类型。\r\n\t\t*@return 如果是鼠标事件，则值为 true;否则，值为 false。\r\n\t\t*/\r\n\t\t__proto.isMouseEvent=function(type){\r\n\t\t\treturn EventDispatcher.MOUSE_EVENTS[type];\r\n\t\t}\r\n\r\n\t\tEventDispatcher.MOUSE_EVENTS={\"rightmousedown\":true,\"rightmouseup\":true,\"rightclick\":true,\"mousedown\":true,\"mouseup\":true,\"mousemove\":true,\"mouseover\":true,\"mouseout\":true,\"click\":true,\"doubleclick\":true};\r\n\t\tEventDispatcher.__init$=function(){\r\n\t\t\t/**@private */\r\n\t\t\t//class EventHandler extends laya.utils.Handler\r\n\t\t\tEventHandler=(function(_super){\r\n\t\t\t\tfunction EventHandler(caller,method,args,once){\r\n\t\t\t\t\tEventHandler.__super.call(this,caller,method,args,once);\r\n\t\t\t\t}\r\n\t\t\t\t__class(EventHandler,'',_super);\r\n\t\t\t\tvar __proto=EventHandler.prototype;\r\n\t\t\t\t__proto.recover=function(){\r\n\t\t\t\t\tif (this._id > 0){\r\n\t\t\t\t\t\tthis._id=0;\r\n\t\t\t\t\t\tEventHandler._pool.push(this.clear());\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tEventHandler.create=function(caller,method,args,once){\r\n\t\t\t\t\t(once===void 0)&& (once=true);\r\n\t\t\t\t\tif (EventHandler._pool.length)return EventHandler._pool.pop().setTo(caller,method,args,once);\r\n\t\t\t\t\treturn new EventHandler(caller,method,args,once);\r\n\t\t\t\t}\r\n\t\t\t\tEventHandler._pool=[];\r\n\t\t\t\treturn EventHandler;\r\n\t\t\t})(Handler)\r\n\t\t}\r\n\r\n\t\treturn EventDispatcher;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*<p><code>Handler</code> 是事件处理器类。</p>\r\n\t*<p>推荐使用 Handler.create()方法从对象池创建，减少对象创建消耗。</p>\r\n\t*<p><b>注意：</b>由于鼠标事件也用本对象池，不正确的回收及调用，可能会影响鼠标事件的执行。</p>\r\n\t*/\r\n\t//class laya.utils.Handler\r\n\tvar Handler=(function(){\r\n\t\tfunction Handler(caller,method,args,once){\r\n\t\t\t//this.caller=null;\r\n\t\t\t//this.method=null;\r\n\t\t\t//this.args=null;\r\n\t\t\tthis.once=false;\r\n\t\t\tthis._id=0;\r\n\t\t\t(once===void 0)&& (once=false);\r\n\t\t\tthis.setTo(caller,method,args,once);\r\n\t\t}\r\n\r\n\t\t__class(Handler,'laya.utils.Handler');\r\n\t\tvar __proto=Handler.prototype;\r\n\t\t/**\r\n\t\t*设置此对象的指定属性值。\r\n\t\t*@param caller 执行域(this)。\r\n\t\t*@param method 回调方法。\r\n\t\t*@param args 携带的参数。\r\n\t\t*@param once 是否只执行一次，如果为true，执行后执行recover()进行回收。\r\n\t\t*@return 返回 handler 本身。\r\n\t\t*/\r\n\t\t__proto.setTo=function(caller,method,args,once){\r\n\t\t\tthis._id=Handler._gid++;\r\n\t\t\tthis.caller=caller;\r\n\t\t\tthis.method=method;\r\n\t\t\tthis.args=args;\r\n\t\t\tthis.once=once;\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*执行处理器。\r\n\t\t*/\r\n\t\t__proto.run=function(){\r\n\t\t\tif (this.method==null)return null;\r\n\t\t\tvar id=this._id;\r\n\t\t\tvar result=this.method.apply(this.caller,this.args);\r\n\t\t\tthis._id===id && this.once && this.recover();\r\n\t\t\treturn result;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*执行处理器，携带额外数据。\r\n\t\t*@param data 附加的回调数据，可以是单数据或者Array(作为多参)。\r\n\t\t*/\r\n\t\t__proto.runWith=function(data){\r\n\t\t\tif (this.method==null)return null;\r\n\t\t\tvar id=this._id;\r\n\t\t\tif (data==null)\r\n\t\t\t\tvar result=this.method.apply(this.caller,this.args);\r\n\t\t\telse if (!this.args && !data.unshift)result=this.method.call(this.caller,data);\r\n\t\t\telse if (this.args)result=this.method.apply(this.caller,this.args.concat(data));\r\n\t\t\telse result=this.method.apply(this.caller,data);\r\n\t\t\tthis._id===id && this.once && this.recover();\r\n\t\t\treturn result;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*清理对象引用。\r\n\t\t*/\r\n\t\t__proto.clear=function(){\r\n\t\t\tthis.caller=null;\r\n\t\t\tthis.method=null;\r\n\t\t\tthis.args=null;\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*清理并回收到 Handler 对象池内。\r\n\t\t*/\r\n\t\t__proto.recover=function(){\r\n\t\t\tif (this._id > 0){\r\n\t\t\t\tthis._id=0;\r\n\t\t\t\tHandler._pool.push(this.clear());\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tHandler.create=function(caller,method,args,once){\r\n\t\t\t(once===void 0)&& (once=true);\r\n\t\t\tif (Handler._pool.length)return Handler._pool.pop().setTo(caller,method,args,once);\r\n\t\t\treturn new Handler(caller,method,args,once);\r\n\t\t}\r\n\r\n\t\tHandler._pool=[];\r\n\t\tHandler._gid=1;\r\n\t\treturn Handler;\r\n\t})()\r\n\r\n\r\n\t//class mj.ui.dialog.DialogSize\r\n\tvar DialogSize=(function(){\r\n\t\tfunction DialogSize(){};\r\n\t\t__class(DialogSize,'mj.ui.dialog.DialogSize');\r\n\t\tDialogSize.LARGE=\"LARGE\";\r\n\t\tDialogSize.MEDIUM=\"MEDIUM\";\r\n\t\tDialogSize.SMALL=\"SMALL\";\r\n\t\tDialogSize.AUTO=\"AUTO\";\r\n\t\treturn DialogSize;\r\n\t})()\r\n\r\n\r\n\t//class mj.ui.UiHelps\r\n\tvar UiHelps=(function(){\r\n\t\tfunction UiHelps(){};\r\n\t\t__class(UiHelps,'mj.ui.UiHelps');\r\n\t\tUiHelps.onResize=function(){\r\n\t\t\tUiHelps.ratio=Math.min(Math.max(Browser.width / 1902,0.3),10);\r\n\t\t\tUiHelps.gameRatio=Math.min(Math.max(Browser.width / 1902,0),10);\r\n\t\t\tUiHelps.gameRatioX=Math.min(Math.max(Browser.width / 1902,0),10);\r\n\t\t\tUiHelps.gameRatioY=Math.min(Math.max(Browser.height / 1080,0),10);\r\n\t\t}\r\n\r\n\t\tUiHelps.getRatio=function(){\r\n\t\t\tif (UiHelps.ratio==0){\r\n\t\t\t\tUiHelps.init();\r\n\t\t\t}\r\n\t\t\treturn UiHelps.ratio;\r\n\t\t}\r\n\r\n\t\tUiHelps.getGameRatio=function(){\r\n\t\t\tif (UiHelps.gameRatio==0){\r\n\t\t\t\tUiHelps.init();\r\n\t\t\t}\r\n\t\t\treturn UiHelps.gameRatio;\r\n\t\t}\r\n\r\n\t\tUiHelps.getGameRatioX=function(){\r\n\t\t\tif (UiHelps.gameRatioX==0){\r\n\t\t\t\tUiHelps.init();\r\n\t\t\t}\r\n\t\t\treturn UiHelps.gameRatioX;\r\n\t\t}\r\n\r\n\t\tUiHelps.getGameRatioY=function(){\r\n\t\t\tif (UiHelps.gameRatioY==0){\r\n\t\t\t\tUiHelps.init();\r\n\t\t\t}\r\n\t\t\treturn UiHelps.gameRatioY;\r\n\t\t}\r\n\r\n\t\tUiHelps.init=function(){\r\n\t\t\tLaya.stage.on(\"resize\",null,UiHelps.onResize);\r\n\t\t\tUiHelps.onResize();\r\n\t\t}\r\n\r\n\t\tUiHelps.DESIGN_WIDTH=1902;\r\n\t\tUiHelps.DESIGN_HEIGHT=1080;\r\n\t\tUiHelps.ratio=0;\r\n\t\tUiHelps.gameRatio=0;\r\n\t\tUiHelps.gameRatioX=0;\r\n\t\tUiHelps.gameRatioY=0;\r\n\t\treturn UiHelps;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*@author zuoge85@gmail.com on 2016/11/1.\r\n\t*/\r\n\t//class mj.utils.ArrayUtils\r\n\tvar ArrayUtils=(function(){\r\n\t\tfunction ArrayUtils(){}\r\n\t\t__class(ArrayUtils,'mj.utils.ArrayUtils');\r\n\t\tArrayUtils.isEmpty=function(array){\r\n\t\t\treturn array===null ? true :array.length===0;\r\n\t\t}\r\n\r\n\t\treturn ArrayUtils;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*@author zuoge85@gmail.com on 2016/10/28.\r\n\t*/\r\n\t//class mj.utils.LayaUtils\r\n\tvar LayaUtils=(function(){\r\n\t\tfunction LayaUtils(){}\r\n\t\t__class(LayaUtils,'mj.utils.LayaUtils');\r\n\t\tLayaUtils.clone=function(node){\r\n\t\t\tvar i=0;\r\n\t\t\tif ((node instanceof laya.ui.Image )){\r\n\t\t\t\tvar image=(node);\r\n\t\t\t\tvar distImage=new Image();\r\n\t\t\t\tLayaUtils.copyAttri(distImage,image);\r\n\t\t\t\tdistImage.skin=image.skin;\r\n\t\t\t\tdistImage.sizeGrid=image.sizeGrid;\r\n\t\t\t\tfor (i=0;i < image.numChildren;i++){\r\n\t\t\t\t\tdistImage.addChild(LayaUtils.clone(image.getChildAt(i)));\r\n\t\t\t\t}\r\n\t\t\t\treturn distImage;\r\n\t\t\t}\r\n\t\t\telse if ((node instanceof laya.display.Sprite )){\r\n\t\t\t\tvar sprite=(node);\r\n\t\t\t\tvar distSprite=new Sprite();\r\n\t\t\t\tLayaUtils.copyAttri(distSprite,sprite);\r\n\t\t\t\tfor (i=0;i < node.numChildren;i++){\r\n\t\t\t\t\tdistSprite.addChild(LayaUtils.clone(node.getChildAt(i)));\r\n\t\t\t\t}\r\n\t\t\t\treturn distSprite;\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tthrow new Error(\"不支持的类型:\"+typeof(node));\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tLayaUtils.copyAttri=function(dist,sprite){\r\n\t\t\tdist.pos(sprite.x,sprite.y);\r\n\t\t\tdist.size(sprite.width,sprite.height);\r\n\t\t\tdist.scale(sprite.scaleX,sprite.scaleY);\r\n\t\t\tdist.pivot(sprite.pivotX,sprite.pivotY);\r\n\t\t\tdist.skew(sprite.skewX,sprite.skewY);\r\n\t\t}\r\n\r\n\t\tLayaUtils.handlerButton=function(btn){\r\n\t\t\tbtn.pivot(btn.width / 2,btn.height / 2);\r\n\t\t\tbtn.pos(btn.x+btn.width / 2,btn.y+btn.height / 2);\r\n\t\t\tbtn.on(\"mousedown\",btn,function(){\r\n\t\t\t\tbtn.scale(0.85,0.85);\r\n\t\t\t});\r\n\t\t\tbtn.on(\"mouseup\",btn,function(){\r\n\t\t\t\tbtn.scale(1,1);\r\n\t\t\t});\r\n\t\t\tbtn.on(\"mouseout\",btn,function(){\r\n\t\t\t\tbtn.scale(1,1);\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tLayaUtils.random=function(max){\r\n\t\t\treturn Math.floor(Math.random()*max);\r\n\t\t}\r\n\r\n\t\treturn LayaUtils;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*@author zuoge85@gmail.com on 2016/12/29.\r\n\t*/\r\n\t//class mj.utils.TweenTargetPoll\r\n\tvar TweenTargetPoll=(function(){\r\n\t\tfunction TweenTargetPoll(){\r\n\t\t\tthis.tweenTargetDict=new Dictionary();\r\n\t\t}\r\n\r\n\t\t__class(TweenTargetPoll,'mj.utils.TweenTargetPoll');\r\n\t\tvar __proto=TweenTargetPoll.prototype;\r\n\t\t__proto.add=function(target){\r\n\t\t\tthis.tweenTargetDict.set(target,this);\r\n\t\t}\r\n\r\n\t\t__proto.remove=function(obj){\r\n\t\t\tthis.tweenTargetDict.remove(obj);\r\n\t\t}\r\n\r\n\t\t__proto.clear=function(){\r\n\t\t\tvar values=this.tweenTargetDict.values;\r\n\t\t\tfor (var i=0;i < values.length;i++){\r\n\t\t\t\tvar object=values[i];\r\n\t\t\t\tTween.clearAll(object);\r\n\t\t\t}\r\n\t\t\tthis.tweenTargetDict.clear();\r\n\t\t}\r\n\r\n\t\treturn TweenTargetPoll;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*Config 用于配置一些全局参数。\r\n\t*/\r\n\t//class Config\r\n\tvar Config=(function(){\r\n\t\tfunction Config(){};\r\n\t\t__class(Config,'Config');\r\n\t\tConfig.WebGLTextCacheCount=500;\r\n\t\tConfig.atlasEnable=false;\r\n\t\tConfig.showCanvasMark=false;\r\n\t\tConfig.CPUMemoryLimit=120 *1024 *1024;\r\n\t\tConfig.GPUMemoryLimit=160 *1024 *1024;\r\n\t\tConfig.animationInterval=50;\r\n\t\tConfig.isAntialias=false;\r\n\t\tConfig.isAlpha=false;\r\n\t\tConfig.premultipliedAlpha=false;\r\n\t\treturn Config;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*<code>Graphics</code> 类用于创建绘图显示对象。\r\n\t*@see laya.display.Sprite#graphics\r\n\t*/\r\n\t//class laya.display.Graphics\r\n\tvar Graphics=(function(){\r\n\t\tfunction Graphics(){\r\n\t\t\t//this._sp=null;\r\n\t\t\tthis._one=null;\r\n\t\t\tthis._cmds=null;\r\n\t\t\t//this._temp=null;\r\n\t\t\t//this._bounds=null;\r\n\t\t\t//this._rstBoundPoints=null;\r\n\t\t\t//this._vectorgraphArray=null;\r\n\t\t\tthis._render=this._renderEmpty;\r\n\t\t\tthis._render=this._renderEmpty;\r\n\t\t\tif (Render.isConchNode){\r\n\t\t\t\tthis._nativeObj=new _conchGraphics();;\r\n\t\t\t\tthis.id=this._nativeObj.conchID;;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__class(Graphics,'laya.display.Graphics');\r\n\t\tvar __proto=Graphics.prototype;\r\n\t\t/**\r\n\t\t*<p>销毁此对象。</p>\r\n\t\t*/\r\n\t\t__proto.destroy=function(){\r\n\t\t\tthis.clear();\r\n\t\t\tthis._temp=null;\r\n\t\t\tthis._bounds=null;\r\n\t\t\tthis._rstBoundPoints=null;\r\n\t\t\tthis._sp && (this._sp._renderType=0);\r\n\t\t\tthis._sp=null;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*<p>清空绘制命令。</p>\r\n\t\t*/\r\n\t\t__proto.clear=function(){\r\n\t\t\tthis._one=null;\r\n\t\t\tthis._render=this._renderEmpty;\r\n\t\t\tthis._cmds=null;\r\n\t\t\tthis._temp && (this._temp.length=0);\r\n\t\t\tthis._sp && (this._sp._renderType &=~0x01);\r\n\t\t\tthis._sp && (this._sp._renderType &=~0x200);\r\n\t\t\tthis._repaint();\r\n\t\t\tif (this._vectorgraphArray){\r\n\t\t\t\tfor (var i=0,n=this._vectorgraphArray.length;i < n;i++){\r\n\t\t\t\t\tVectorGraphManager.getInstance().deleteShape(this._vectorgraphArray[i]);\r\n\t\t\t\t}\r\n\t\t\t\tthis._vectorgraphArray.length=0;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*重绘此对象。\r\n\t\t*/\r\n\t\t__proto._repaint=function(){\r\n\t\t\tthis._temp && (this._temp.length=0);\r\n\t\t\tthis._sp && this._sp.repaint();\r\n\t\t}\r\n\r\n\t\t/**@private */\r\n\t\t__proto._isOnlyOne=function(){\r\n\t\t\treturn !this._cmds || this._cmds.length===0;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*获取位置及宽高信息矩阵(比较耗，尽量少用)。\r\n\t\t*@return 位置与宽高组成的 一个 Rectangle 对象。\r\n\t\t*/\r\n\t\t__proto.getBounds=function(){\r\n\t\t\tif (!this._bounds || !this._temp || this._temp.length < 1){\r\n\t\t\t\tthis._bounds=Rectangle._getWrapRec(this.getBoundPoints(),this._bounds)\r\n\t\t\t}\r\n\t\t\treturn this._bounds;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*获取端点列表。\r\n\t\t*/\r\n\t\t__proto.getBoundPoints=function(){\r\n\t\t\tif (!this._temp || this._temp.length < 1)\r\n\t\t\t\tthis._temp=this._getCmdPoints();\r\n\t\t\treturn this._rstBoundPoints=Utils1.copyArray(this._rstBoundPoints,this._temp);\r\n\t\t}\r\n\r\n\t\t__proto._addCmd=function(a){\r\n\t\t\tthis._cmds=this._cmds || [];\r\n\t\t\ta.callee=a.shift();\r\n\t\t\tthis._cmds.push(a);\r\n\t\t}\r\n\r\n\t\t__proto._getCmdPoints=function(){\r\n\t\t\tvar context=Render._context;\r\n\t\t\tvar cmds=this._cmds;\r\n\t\t\tvar rst;\r\n\t\t\trst=this._temp || (this._temp=[]);\r\n\t\t\trst.length=0;\r\n\t\t\tif (!cmds && this._one !=null){\r\n\t\t\t\tGraphics._tempCmds.length=0;\r\n\t\t\t\tGraphics._tempCmds.push(this._one);\r\n\t\t\t\tcmds=Graphics._tempCmds;\r\n\t\t\t}\r\n\t\t\tif (!cmds)\r\n\t\t\t\treturn rst;\r\n\t\t\tvar matrixs;\r\n\t\t\tmatrixs=Graphics._tempMatrixArrays;\r\n\t\t\tmatrixs.length=0;\r\n\t\t\tvar tMatrix=Graphics._initMatrix;\r\n\t\t\ttMatrix.identity();\r\n\t\t\tvar tempMatrix=Graphics._tempMatrix;\r\n\t\t\tvar cmd;\r\n\t\t\tfor (var i=0,n=cmds.length;i < n;i++){\r\n\t\t\t\tcmd=cmds[i];\r\n\t\t\t\tswitch (cmd.callee){\r\n\t\t\t\t\tcase context._save:\r\n\t\t\t\t\tcase 7:\r\n\t\t\t\t\t\tmatrixs.push(tMatrix);\r\n\t\t\t\t\t\ttMatrix=tMatrix.clone();\r\n\t\t\t\t\t\tbreak ;\r\n\t\t\t\t\tcase context._restore:\r\n\t\t\t\t\tcase 8:\r\n\t\t\t\t\t\ttMatrix=matrixs.pop();\r\n\t\t\t\t\t\tbreak ;\r\n\t\t\t\t\tcase context._scale:\r\n\t\t\t\t\tcase 5:\r\n\t\t\t\t\t\ttempMatrix.identity();\r\n\t\t\t\t\t\ttempMatrix.translate(-cmd[2],-cmd[3]);\r\n\t\t\t\t\t\ttempMatrix.scale(cmd[0],cmd[1]);\r\n\t\t\t\t\t\ttempMatrix.translate(cmd[2],cmd[3]);\r\n\t\t\t\t\t\tthis._switchMatrix(tMatrix,tempMatrix);\r\n\t\t\t\t\t\tbreak ;\r\n\t\t\t\t\tcase context._rotate:\r\n\t\t\t\t\tcase 3:\r\n\t\t\t\t\t\ttempMatrix.identity();\r\n\t\t\t\t\t\ttempMatrix.translate(-cmd[1],-cmd[2]);\r\n\t\t\t\t\t\ttempMatrix.rotate(cmd[0]);\r\n\t\t\t\t\t\ttempMatrix.translate(cmd[1],cmd[2]);\r\n\t\t\t\t\t\tthis._switchMatrix(tMatrix,tempMatrix);\r\n\t\t\t\t\t\tbreak ;\r\n\t\t\t\t\tcase context._translate:\r\n\t\t\t\t\tcase 6:\r\n\t\t\t\t\t\ttempMatrix.identity();\r\n\t\t\t\t\t\ttempMatrix.translate(cmd[0],cmd[1]);\r\n\t\t\t\t\t\tthis._switchMatrix(tMatrix,tempMatrix);\r\n\t\t\t\t\t\tbreak ;\r\n\t\t\t\t\tcase context._transform:\r\n\t\t\t\t\tcase 4:\r\n\t\t\t\t\t\ttempMatrix.identity();\r\n\t\t\t\t\t\ttempMatrix.translate(-cmd[1],-cmd[2]);\r\n\t\t\t\t\t\ttempMatrix.concat(cmd[0]);\r\n\t\t\t\t\t\ttempMatrix.translate(cmd[1],cmd[2]);\r\n\t\t\t\t\t\tthis._switchMatrix(tMatrix,tempMatrix);\r\n\t\t\t\t\t\tbreak ;\r\n\t\t\t\t\tcase 16:\r\n\t\t\t\t\tcase 24:\r\n\t\t\t\t\t\tGraphics._addPointArrToRst(rst,Rectangle._getBoundPointS(cmd[0],cmd[1],cmd[2],cmd[3]),tMatrix);\r\n\t\t\t\t\t\tbreak ;\r\n\t\t\t\t\tcase 17:\r\n\t\t\t\t\t\ttMatrix.copyTo(tempMatrix);\r\n\t\t\t\t\t\ttempMatrix.concat(cmd[4]);\r\n\t\t\t\t\t\tGraphics._addPointArrToRst(rst,Rectangle._getBoundPointS(cmd[0],cmd[1],cmd[2],cmd[3]),tempMatrix);\r\n\t\t\t\t\t\tbreak ;\r\n\t\t\t\t\tcase context._drawTexture:\r\n\t\t\t\t\tcase context._fillTexture:\r\n\t\t\t\t\t\tif (cmd[3] && cmd[4]){\r\n\t\t\t\t\t\t\tGraphics._addPointArrToRst(rst,Rectangle._getBoundPointS(cmd[1],cmd[2],cmd[3],cmd[4]),tMatrix);\r\n\t\t\t\t\t\t\t}else {\r\n\t\t\t\t\t\t\tvar tex=cmd[0];\r\n\t\t\t\t\t\t\tGraphics._addPointArrToRst(rst,Rectangle._getBoundPointS(cmd[1],cmd[2],tex.width,tex.height),tMatrix);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak ;\r\n\t\t\t\t\tcase context._drawTextureWithTransform:;\r\n\t\t\t\t\t\tvar drawMatrix;\r\n\t\t\t\t\t\tif (cmd[5]){\r\n\t\t\t\t\t\t\ttMatrix.copyTo(tempMatrix);\r\n\t\t\t\t\t\t\ttempMatrix.concat(cmd[5]);\r\n\t\t\t\t\t\t\tdrawMatrix=tempMatrix;\r\n\t\t\t\t\t\t\t}else {\r\n\t\t\t\t\t\t\tdrawMatrix=tMatrix;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (cmd[3] && cmd[4]){\r\n\t\t\t\t\t\t\tGraphics._addPointArrToRst(rst,Rectangle._getBoundPointS(cmd[1],cmd[2],cmd[3],cmd[4]),drawMatrix);\r\n\t\t\t\t\t\t\t}else {\r\n\t\t\t\t\t\t\ttex=cmd[0];\r\n\t\t\t\t\t\t\tGraphics._addPointArrToRst(rst,Rectangle._getBoundPointS(cmd[1],cmd[2],tex.width,tex.height),drawMatrix);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak ;\r\n\t\t\t\t\tcase context._drawRect:\r\n\t\t\t\t\tcase 13:\r\n\t\t\t\t\t\tGraphics._addPointArrToRst(rst,Rectangle._getBoundPointS(cmd[0],cmd[1],cmd[2],cmd[3]),tMatrix);\r\n\t\t\t\t\t\tbreak ;\r\n\t\t\t\t\tcase context._drawCircle:\r\n\t\t\t\t\tcase context._fillCircle:\r\n\t\t\t\t\tcase 14:\r\n\t\t\t\t\t\tGraphics._addPointArrToRst(rst,Rectangle._getBoundPointS(cmd[0]-cmd[2],cmd[1]-cmd[2],cmd[2]+cmd[2],cmd[2]+cmd[2]),tMatrix);\r\n\t\t\t\t\t\tbreak ;\r\n\t\t\t\t\tcase context._drawLine:\r\n\t\t\t\t\tcase 20:\r\n\t\t\t\t\t\tGraphics._tempPoints.length=0;\r\n\t\t\t\t\t\tvar lineWidth=NaN;\r\n\t\t\t\t\t\tlineWidth=cmd[5] *0.5;\r\n\t\t\t\t\t\tif (cmd[0]==cmd[2]){\r\n\t\t\t\t\t\t\tGraphics._tempPoints.push(cmd[0]+lineWidth,cmd[1],cmd[2]+lineWidth,cmd[3],cmd[0]-lineWidth,cmd[1],cmd[2]-lineWidth,cmd[3]);\r\n\t\t\t\t\t\t\t}else if (cmd[1]==cmd[3]){\r\n\t\t\t\t\t\t\tGraphics._tempPoints.push(cmd[0],cmd[1]+lineWidth,cmd[2],cmd[3]+lineWidth,cmd[0],cmd[1]-lineWidth,cmd[2],cmd[3]-lineWidth);\r\n\t\t\t\t\t\t\t}else {\r\n\t\t\t\t\t\t\tGraphics._tempPoints.push(cmd[0],cmd[1],cmd[2],cmd[3]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tGraphics._addPointArrToRst(rst,Graphics._tempPoints,tMatrix);\r\n\t\t\t\t\t\tbreak ;\r\n\t\t\t\t\tcase context._drawCurves:\r\n\t\t\t\t\tcase 22:\r\n\t\t\t\t\t\tGraphics._addPointArrToRst(rst,Bezier.I.getBezierPoints(cmd[2]),tMatrix,cmd[0],cmd[1]);\r\n\t\t\t\t\t\tbreak ;\r\n\t\t\t\t\tcase context._drawPoly:\r\n\t\t\t\t\tcase context._drawLines:\r\n\t\t\t\t\tcase 18:\r\n\t\t\t\t\t\tGraphics._addPointArrToRst(rst,cmd[2],tMatrix,cmd[0],cmd[1]);\r\n\t\t\t\t\t\tbreak ;\r\n\t\t\t\t\tcase context._drawPath:\r\n\t\t\t\t\tcase 19:\r\n\t\t\t\t\t\tGraphics._addPointArrToRst(rst,this._getPathPoints(cmd[2]),tMatrix,cmd[0],cmd[1]);\r\n\t\t\t\t\t\tbreak ;\r\n\t\t\t\t\tcase context._drawPie:\r\n\t\t\t\t\tcase 15:\r\n\t\t\t\t\t\tGraphics._addPointArrToRst(rst,this._getPiePoints(cmd[0],cmd[1],cmd[2],cmd[3],cmd[4]),tMatrix);\r\n\t\t\t\t\t\tbreak ;\r\n\t\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (rst.length > 200){\r\n\t\t\t\trst=Utils1.copyArray(rst,Rectangle._getWrapRec(rst)._getBoundPoints());\r\n\t\t\t}else if (rst.length > 8)\r\n\t\t\trst=GrahamScan.scanPList(rst);\r\n\t\t\treturn rst;\r\n\t\t}\r\n\r\n\t\t__proto._switchMatrix=function(tMatix,tempMatrix){\r\n\t\t\ttempMatrix.concat(tMatix);\r\n\t\t\ttempMatrix.copyTo(tMatix);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*绘制纹理。\r\n\t\t*@param tex 纹理。\r\n\t\t*@param x X 轴偏移量。\r\n\t\t*@param y Y 轴偏移量。\r\n\t\t*@param width 宽度。\r\n\t\t*@param height 高度。\r\n\t\t*@param m 矩阵信息。\r\n\t\t*/\r\n\t\t__proto.drawTexture=function(tex,x,y,width,height,m,alpha){\r\n\t\t\t(x===void 0)&& (x=0);\r\n\t\t\t(y===void 0)&& (y=0);\r\n\t\t\t(width===void 0)&& (width=0);\r\n\t\t\t(height===void 0)&& (height=0);\r\n\t\t\t(alpha===void 0)&& (alpha=1);\r\n\t\t\tif (!tex)return;\r\n\t\t\tif (!width)width=tex.sourceWidth;\r\n\t\t\tif (!height)height=tex.sourceHeight;\r\n\t\t\twidth=width-tex.sourceWidth+tex.width;\r\n\t\t\theight=height-tex.sourceHeight+tex.height;\r\n\t\t\tif (tex.loaded && (width <=0 || height <=0))return;\r\n\t\t\tx+=tex.offsetX;\r\n\t\t\ty+=tex.offsetY;\r\n\t\t\tthis._sp && (this._sp._renderType |=0x200);\r\n\t\t\tvar args=[tex,x,y,width,height,m,alpha];\r\n\t\t\targs.callee=(m || alpha !=1)? Render._context._drawTextureWithTransform :Render._context._drawTexture;\r\n\t\t\tif (this._one==null && !m && alpha==1){\r\n\t\t\t\tthis._one=args;\r\n\t\t\t\tthis._render=this._renderOneImg;\r\n\t\t\t\t}else {\r\n\t\t\t\tthis._saveToCmd(args.callee,args);\r\n\t\t\t}\r\n\t\t\tif (!tex.loaded){\r\n\t\t\t\ttex.once(\"loaded\",this,this._textureLoaded,[tex,args]);\r\n\t\t\t}\r\n\t\t\tthis._repaint();\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private 清理贴图并替换为最新的\r\n\t\t*@param tex\r\n\t\t*/\r\n\t\t__proto.cleanByTexture=function(tex,x,y,width,height){\r\n\t\t\t(width===void 0)&& (width=0);\r\n\t\t\t(height===void 0)&& (height=0);\r\n\t\t\tif (!tex)return this.clear();\r\n\t\t\tif (this._one && this._render===this._renderOneImg){\r\n\t\t\t\tif (!width)width=tex.sourceWidth;\r\n\t\t\t\tif (!height)height=tex.sourceHeight;\r\n\t\t\t\twidth=width-tex.sourceWidth+tex.width;\r\n\t\t\t\theight=height-tex.sourceHeight+tex.height;\r\n\t\t\t\tx+=tex.offsetX;\r\n\t\t\t\ty+=tex.offsetY;\r\n\t\t\t\tthis._one[0]=tex;\r\n\t\t\t\tthis._one[1]=x;\r\n\t\t\t\tthis._one[2]=y;\r\n\t\t\t\tthis._one[3]=width;\r\n\t\t\t\tthis._one[4]=height;\r\n\t\t\t\t}else {\r\n\t\t\t\tthis.clear();\r\n\t\t\t\ttex && this.drawTexture(tex,x,y,width,height);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*批量绘制同样纹理。\r\n\t\t*@param tex 纹理。\r\n\t\t*@param pos 绘制次数和坐标。\r\n\t\t*/\r\n\t\t__proto.drawTextures=function(tex,pos){\r\n\t\t\tif (!tex)return;\r\n\t\t\tthis._saveToCmd(Render._context._drawTextures,[tex,pos]);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*用texture填充\r\n\t\t*@param tex 纹理。\r\n\t\t*@param x X 轴偏移量。\r\n\t\t*@param y Y 轴偏移量。\r\n\t\t*@param width 宽度。\r\n\t\t*@param height 高度。\r\n\t\t*@param type 填充类型 repeat|repeat-x|repeat-y|no-repeat\r\n\t\t*@param offset 贴图纹理偏移\r\n\t\t*\r\n\t\t*/\r\n\t\t__proto.fillTexture=function(tex,x,y,width,height,type,offset){\r\n\t\t\t(width===void 0)&& (width=0);\r\n\t\t\t(height===void 0)&& (height=0);\r\n\t\t\t(type===void 0)&& (type=\"repeat\");\r\n\t\t\tif (!tex)return;\r\n\t\t\tvar args=[tex,x,y,width,height,type,offset || Point.EMPTY,{}];\r\n\t\t\tif (!tex.loaded){\r\n\t\t\t\ttex.once(\"loaded\",this,this._textureLoaded,[tex,args]);\r\n\t\t\t}\r\n\t\t\tthis._saveToCmd(Render._context._fillTexture,args);\r\n\t\t}\r\n\r\n\t\t__proto._textureLoaded=function(tex,param){\r\n\t\t\tparam[3]=param[3] || tex.width;\r\n\t\t\tparam[4]=param[4] || tex.height;\r\n\t\t\tthis._repaint();\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*保存到命令流。\r\n\t\t*/\r\n\t\t__proto._saveToCmd=function(fun,args){\r\n\t\t\tthis._sp && (this._sp._renderType |=0x200);\r\n\t\t\tif (this._one==null){\r\n\t\t\t\tthis._one=args;\r\n\t\t\t\tthis._render=this._renderOne;\r\n\t\t\t\t}else {\r\n\t\t\t\tthis._sp && (this._sp._renderType &=~0x01);\r\n\t\t\t\tthis._render=this._renderAll;\r\n\t\t\t\t(this._cmds || (this._cmds=[])).length===0 && this._cmds.push(this._one);\r\n\t\t\t\tthis._cmds.push(args);\r\n\t\t\t}\r\n\t\t\targs.callee=fun;\r\n\t\t\tthis._temp && (this._temp.length=0);\r\n\t\t\tthis._repaint();\r\n\t\t\treturn args;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*设置剪裁区域，超出剪裁区域的坐标不显示。\r\n\t\t*@param x X 轴偏移量。\r\n\t\t*@param y Y 轴偏移量。\r\n\t\t*@param width 宽度。\r\n\t\t*@param height 高度。\r\n\t\t*/\r\n\t\t__proto.clipRect=function(x,y,width,height){\r\n\t\t\tthis._saveToCmd(Render._context._clipRect,[x,y,width,height]);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*在画布上绘制文本。\r\n\t\t*@param text 在画布上输出的文本。\r\n\t\t*@param x 开始绘制文本的 x 坐标位置（相对于画布）。\r\n\t\t*@param y 开始绘制文本的 y 坐标位置（相对于画布）。\r\n\t\t*@param font 定义字号和字体，比如\"20px Arial\"。\r\n\t\t*@param color 定义文本颜色，比如\"#ff0000\"。\r\n\t\t*@param textAlign 文本对齐方式，可选值：\"left\"，\"center\"，\"right\"。\r\n\t\t*/\r\n\t\t__proto.fillText=function(text,x,y,font,color,textAlign){\r\n\t\t\tthis._saveToCmd(Render._context._fillText,[text,x,y,font || Font.defaultFont,color,textAlign]);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*在画布上绘制“被填充且镶边的”文本。\r\n\t\t*@param text 在画布上输出的文本。\r\n\t\t*@param x 开始绘制文本的 x 坐标位置（相对于画布）。\r\n\t\t*@param y 开始绘制文本的 y 坐标位置（相对于画布）。\r\n\t\t*@param font 定义字体和字号，比如\"20px Arial\"。\r\n\t\t*@param fillColor 定义文本颜色，比如\"#ff0000\"。\r\n\t\t*@param borderColor 定义镶边文本颜色。\r\n\t\t*@param lineWidth 镶边线条宽度。\r\n\t\t*@param textAlign 文本对齐方式，可选值：\"left\"，\"center\"，\"right\"。\r\n\t\t*/\r\n\t\t__proto.fillBorderText=function(text,x,y,font,fillColor,borderColor,lineWidth,textAlign){\r\n\t\t\tthis._saveToCmd(Render._context._fillBorderText,[text,x,y,font || Font.defaultFont,fillColor,borderColor,lineWidth,textAlign]);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*在画布上绘制文本（没有填色）。文本的默认颜色是黑色。\r\n\t\t*@param text 在画布上输出的文本。\r\n\t\t*@param x 开始绘制文本的 x 坐标位置（相对于画布）。\r\n\t\t*@param y 开始绘制文本的 y 坐标位置（相对于画布）。\r\n\t\t*@param font 定义字体和字号，比如\"20px Arial\"。\r\n\t\t*@param color 定义文本颜色，比如\"#ff0000\"。\r\n\t\t*@param lineWidth 线条宽度。\r\n\t\t*@param textAlign 文本对齐方式，可选值：\"left\"，\"center\"，\"right\"。\r\n\t\t*/\r\n\t\t__proto.strokeText=function(text,x,y,font,color,lineWidth,textAlign){\r\n\t\t\tthis._saveToCmd(Render._context._strokeText,[text,x,y,font || Font.defaultFont,color,lineWidth,textAlign]);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*设置透明度。\r\n\t\t*@param value 透明度。\r\n\t\t*/\r\n\t\t__proto.alpha=function(value){\r\n\t\t\tthis._saveToCmd(Render._context._alpha,[value]);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*替换绘图的当前转换矩阵。\r\n\t\t*@param mat 矩阵。\r\n\t\t*@param pivotX 水平方向轴心点坐标。\r\n\t\t*@param pivotY 垂直方向轴心点坐标。\r\n\t\t*/\r\n\t\t__proto.transform=function(matrix,pivotX,pivotY){\r\n\t\t\t(pivotX===void 0)&& (pivotX=0);\r\n\t\t\t(pivotY===void 0)&& (pivotY=0);\r\n\t\t\tthis._saveToCmd(Render._context._transform,[matrix,pivotX,pivotY]);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*旋转当前绘图。(推荐使用transform，性能更高)\r\n\t\t*@param angle 旋转角度，以弧度计。\r\n\t\t*@param pivotX 水平方向轴心点坐标。\r\n\t\t*@param pivotY 垂直方向轴心点坐标。\r\n\t\t*/\r\n\t\t__proto.rotate=function(angle,pivotX,pivotY){\r\n\t\t\t(pivotX===void 0)&& (pivotX=0);\r\n\t\t\t(pivotY===void 0)&& (pivotY=0);\r\n\t\t\tthis._saveToCmd(Render._context._rotate,[angle,pivotX,pivotY]);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*缩放当前绘图至更大或更小。(推荐使用transform，性能更高)\r\n\t\t*@param scaleX 水平方向缩放值。\r\n\t\t*@param scaleY 垂直方向缩放值。\r\n\t\t*@param pivotX 水平方向轴心点坐标。\r\n\t\t*@param pivotY 垂直方向轴心点坐标。\r\n\t\t*/\r\n\t\t__proto.scale=function(scaleX,scaleY,pivotX,pivotY){\r\n\t\t\t(pivotX===void 0)&& (pivotX=0);\r\n\t\t\t(pivotY===void 0)&& (pivotY=0);\r\n\t\t\tthis._saveToCmd(Render._context._scale,[scaleX,scaleY,pivotX,pivotY]);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*重新映射画布上的 (0,0)位置。\r\n\t\t*@param x 添加到水平坐标（x）上的值。\r\n\t\t*@param y 添加到垂直坐标（y）上的值。\r\n\t\t*/\r\n\t\t__proto.translate=function(x,y){\r\n\t\t\tthis._saveToCmd(Render._context._translate,[x,y]);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*保存当前环境的状态。\r\n\t\t*/\r\n\t\t__proto.save=function(){\r\n\t\t\tthis._saveToCmd(Render._context._save,[]);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*返回之前保存过的路径状态和属性。\r\n\t\t*/\r\n\t\t__proto.restore=function(){\r\n\t\t\tthis._saveToCmd(Render._context._restore,[]);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*替换文本内容。\r\n\t\t*@param text 文本内容。\r\n\t\t*@return 替换成功则值为true，否则值为flase。\r\n\t\t*/\r\n\t\t__proto.replaceText=function(text){\r\n\t\t\tthis._repaint();\r\n\t\t\tvar cmds=this._cmds;\r\n\t\t\tif (!cmds){\r\n\t\t\t\tif (this._one && this._isTextCmd(this._one.callee)){\r\n\t\t\t\t\tif (this._one[0].toUpperCase)this._one[0]=text;\r\n\t\t\t\t\telse this._one[0].setText(text);\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t\t}else {\r\n\t\t\t\tfor (var i=cmds.length-1;i >-1;i--){\r\n\t\t\t\t\tif (this._isTextCmd(cmds[i].callee)){\r\n\t\t\t\t\t\tif (cmds[i][0].toUpperCase)cmds[i][0]=text;\r\n\t\t\t\t\t\telse cmds[i][0].setText(text);\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\t/**@private */\r\n\t\t__proto._isTextCmd=function(fun){\r\n\t\t\treturn fun===Render._context._fillText || fun===Render._context._fillBorderText || fun===Render._context._strokeText;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*替换文本颜色。\r\n\t\t*@param color 颜色。\r\n\t\t*/\r\n\t\t__proto.replaceTextColor=function(color){\r\n\t\t\tthis._repaint();\r\n\t\t\tvar cmds=this._cmds;\r\n\t\t\tif (!cmds){\r\n\t\t\t\tif (this._one && this._isTextCmd(this._one.callee)){\r\n\t\t\t\t\tthis._one[4]=color;\r\n\t\t\t\t\tif (!this._one[0].toUpperCase)this._one[0].changed=true;\r\n\t\t\t\t}\r\n\t\t\t\t}else {\r\n\t\t\t\tfor (var i=cmds.length-1;i >-1;i--){\r\n\t\t\t\t\tif (this._isTextCmd(cmds[i].callee)){\r\n\t\t\t\t\t\tcmds[i][4]=color;\r\n\t\t\t\t\t\tif (!cmds[i][0].toUpperCase)cmds[i][0].changed=true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*加载并显示一个图片。\r\n\t\t*@param url 图片地址。\r\n\t\t*@param x 显示图片的x位置。\r\n\t\t*@param y 显示图片的y位置。\r\n\t\t*@param width 显示图片的宽度，设置为0表示使用图片默认宽度。\r\n\t\t*@param height 显示图片的高度，设置为0表示使用图片默认高度。\r\n\t\t*@param complete 加载完成回调。\r\n\t\t*/\r\n\t\t__proto.loadImage=function(url,x,y,width,height,complete){\r\n\t\t\tvar _$this=this;\r\n\t\t\t(x===void 0)&& (x=0);\r\n\t\t\t(y===void 0)&& (y=0);\r\n\t\t\t(width===void 0)&& (width=0);\r\n\t\t\t(height===void 0)&& (height=0);\r\n\t\t\tvar tex=Loader.getRes(url);\r\n\t\t\tif (tex)onloaded(tex);\r\n\t\t\telse Laya.loader.load(url,Handler.create(null,onloaded),null,\"image\");\r\n\t\t\tfunction onloaded (tex){\r\n\t\t\t\tif (tex){\r\n\t\t\t\t\t_$this.drawTexture(tex,x,y,width,height);\r\n\t\t\t\t\tif (complete !=null)complete.call(_$this._sp,tex);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*/\r\n\t\t__proto._renderEmpty=function(sprite,context,x,y){}\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*/\r\n\t\t__proto._renderAll=function(sprite,context,x,y){\r\n\t\t\tvar cmds=this._cmds,cmd;\r\n\t\t\tfor (var i=0,n=cmds.length;i < n;i++){\r\n\t\t\t\t(cmd=cmds[i]).callee.call(context,x,y,cmd);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*/\r\n\t\t__proto._renderOne=function(sprite,context,x,y){\r\n\t\t\tthis._one.callee.call(context,x,y,this._one);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*/\r\n\t\t__proto._renderOneImg=function(sprite,context,x,y){\r\n\t\t\tthis._one.callee.call(context,x,y,this._one);\r\n\t\t\tif (sprite._renderType!==2305){\r\n\t\t\t\tsprite._renderType |=0x01;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*绘制一条线。\r\n\t\t*@param fromX X 轴开始位置。\r\n\t\t*@param fromY Y 轴开始位置。\r\n\t\t*@param toX X 轴结束位置。\r\n\t\t*@param toY Y 轴结束位置。\r\n\t\t*@param lineColor 颜色。\r\n\t\t*@param lineWidth 线条宽度。\r\n\t\t*/\r\n\t\t__proto.drawLine=function(fromX,fromY,toX,toY,lineColor,lineWidth){\r\n\t\t\t(lineWidth===void 0)&& (lineWidth=1);\r\n\t\t\tvar tId=0;\r\n\t\t\tif (Render.isWebGL){\r\n\t\t\t\ttId=VectorGraphManager.getInstance().getId();\r\n\t\t\t\tif (this._vectorgraphArray==null)this._vectorgraphArray=[];\r\n\t\t\t\tthis._vectorgraphArray.push(tId);\r\n\t\t\t};\r\n\t\t\tvar offset=lineWidth % 2===0 ? 0 :0.5;\r\n\t\t\tvar arr=[fromX+offset,fromY+offset,toX+offset,toY+offset,lineColor,lineWidth,tId];\r\n\t\t\tthis._saveToCmd(Render._context._drawLine,arr);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*绘制一系列线段。\r\n\t\t*@param x 开始绘制的 X 轴位置。\r\n\t\t*@param y 开始绘制的 Y 轴位置。\r\n\t\t*@param points 线段的点集合。格式:[x1,y1,x2,y2,x3,y3...]。\r\n\t\t*@param lineColor 线段颜色，或者填充绘图的渐变对象。\r\n\t\t*@param lineWidth 线段宽度。\r\n\t\t*/\r\n\t\t__proto.drawLines=function(x,y,points,lineColor,lineWidth){\r\n\t\t\t(lineWidth===void 0)&& (lineWidth=1);\r\n\t\t\tvar tId=0;\r\n\t\t\tif (Render.isWebGL){\r\n\t\t\t\ttId=VectorGraphManager.getInstance().getId();\r\n\t\t\t\tif (this._vectorgraphArray==null)this._vectorgraphArray=[];\r\n\t\t\t\tthis._vectorgraphArray.push(tId);\r\n\t\t\t};\r\n\t\t\tvar offset=lineWidth % 2===0 ? 0 :0.5;\r\n\t\t\tvar arr=[x+offset,y+offset,points,lineColor,lineWidth,tId];\r\n\t\t\tthis._saveToCmd(Render._context._drawLines,arr);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*绘制一系列曲线。\r\n\t\t*@param x 开始绘制的 X 轴位置。\r\n\t\t*@param y 开始绘制的 Y 轴位置。\r\n\t\t*@param points 线段的点集合，格式[startx,starty,ctrx,ctry,startx,starty...]。\r\n\t\t*@param lineColor 线段颜色，或者填充绘图的渐变对象。\r\n\t\t*@param lineWidth 线段宽度。\r\n\t\t*/\r\n\t\t__proto.drawCurves=function(x,y,points,lineColor,lineWidth){\r\n\t\t\t(lineWidth===void 0)&& (lineWidth=1);\r\n\t\t\tvar arr=[x,y,points,lineColor,lineWidth];\r\n\t\t\tthis._saveToCmd(Render._context._drawCurves,arr);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*绘制矩形。\r\n\t\t*@param x 开始绘制的 X 轴位置。\r\n\t\t*@param y 开始绘制的 Y 轴位置。\r\n\t\t*@param width 矩形宽度。\r\n\t\t*@param height 矩形高度。\r\n\t\t*@param fillColor 填充颜色，或者填充绘图的渐变对象。\r\n\t\t*@param lineColor 边框颜色，或者填充绘图的渐变对象。\r\n\t\t*@param lineWidth 边框宽度。\r\n\t\t*/\r\n\t\t__proto.drawRect=function(x,y,width,height,fillColor,lineColor,lineWidth){\r\n\t\t\t(lineWidth===void 0)&& (lineWidth=1);\r\n\t\t\tvar offset=lineColor ? lineWidth / 2 :0;\r\n\t\t\tvar lineOffset=lineColor ? lineWidth :0;\r\n\t\t\tvar arr=[x+offset,y+offset,width-lineOffset,height-lineOffset,fillColor,lineColor,lineWidth];\r\n\t\t\tthis._saveToCmd(Render._context._drawRect,arr);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*绘制圆形。\r\n\t\t*@param x 圆点X 轴位置。\r\n\t\t*@param y 圆点Y 轴位置。\r\n\t\t*@param radius 半径。\r\n\t\t*@param fillColor 填充颜色，或者填充绘图的渐变对象。\r\n\t\t*@param lineColor 边框颜色，或者填充绘图的渐变对象。\r\n\t\t*@param lineWidth 边框宽度。\r\n\t\t*/\r\n\t\t__proto.drawCircle=function(x,y,radius,fillColor,lineColor,lineWidth){\r\n\t\t\t(lineWidth===void 0)&& (lineWidth=1);\r\n\t\t\tvar offset=lineColor ? lineWidth / 2 :0;\r\n\t\t\tvar tId=0;\r\n\t\t\tif (Render.isWebGL){\r\n\t\t\t\ttId=VectorGraphManager.getInstance().getId();\r\n\t\t\t\tif (this._vectorgraphArray==null)this._vectorgraphArray=[];\r\n\t\t\t\tthis._vectorgraphArray.push(tId);\r\n\t\t\t};\r\n\t\t\tvar arr=[x,y,radius-offset,fillColor,lineColor,lineWidth,tId];\r\n\t\t\tthis._saveToCmd(Render._context._drawCircle,arr);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*绘制扇形。\r\n\t\t*@param x 开始绘制的 X 轴位置。\r\n\t\t*@param y 开始绘制的 Y 轴位置。\r\n\t\t*@param radius 扇形半径。\r\n\t\t*@param startAngle 开始角度。\r\n\t\t*@param endAngle 结束角度。\r\n\t\t*@param fillColor 填充颜色，或者填充绘图的渐变对象。\r\n\t\t*@param lineColor 边框颜色，或者填充绘图的渐变对象。\r\n\t\t*@param lineWidth 边框宽度。\r\n\t\t*/\r\n\t\t__proto.drawPie=function(x,y,radius,startAngle,endAngle,fillColor,lineColor,lineWidth){\r\n\t\t\t(lineWidth===void 0)&& (lineWidth=1);\r\n\t\t\tvar offset=lineColor ? lineWidth / 2 :0;\r\n\t\t\tvar lineOffset=lineColor ? lineWidth :0;\r\n\t\t\tvar tId=0;\r\n\t\t\tif (Render.isWebGL){\r\n\t\t\t\ttId=VectorGraphManager.getInstance().getId();\r\n\t\t\t\tif (this._vectorgraphArray==null)this._vectorgraphArray=[];\r\n\t\t\t\tthis._vectorgraphArray.push(tId);\r\n\t\t\t};\r\n\t\t\tvar arr=[x+offset,y+offset,radius-lineOffset,startAngle,endAngle,fillColor,lineColor,lineWidth,tId];\r\n\t\t\tarr[3]=Utils1.toRadian(startAngle);\r\n\t\t\tarr[4]=Utils1.toRadian(endAngle);\r\n\t\t\tthis._saveToCmd(Render._context._drawPie,arr);\r\n\t\t}\r\n\r\n\t\t__proto._getPiePoints=function(x,y,radius,startAngle,endAngle){\r\n\t\t\tvar rst=Graphics._tempPoints;\r\n\t\t\tGraphics._tempPoints.length=0;\r\n\t\t\trst.push(x,y);\r\n\t\t\tvar dP=Math.PI / 10;\r\n\t\t\tvar i=NaN;\r\n\t\t\tfor (i=startAngle;i < endAngle;i+=dP){\r\n\t\t\t\trst.push(x+radius *Math.cos(i),y+radius *Math.sin(i));\r\n\t\t\t}\r\n\t\t\tif (endAngle !=i){\r\n\t\t\t\trst.push(x+radius *Math.cos(endAngle),y+radius *Math.sin(endAngle));\r\n\t\t\t}\r\n\t\t\treturn rst;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*绘制多边形。\r\n\t\t*@param x 开始绘制的 X 轴位置。\r\n\t\t*@param y 开始绘制的 Y 轴位置。\r\n\t\t*@param points 多边形的点集合。\r\n\t\t*@param fillColor 填充颜色，或者填充绘图的渐变对象。\r\n\t\t*@param lineColor 边框颜色，或者填充绘图的渐变对象。\r\n\t\t*@param lineWidth 边框宽度。\r\n\t\t*/\r\n\t\t__proto.drawPoly=function(x,y,points,fillColor,lineColor,lineWidth){\r\n\t\t\t(lineWidth===void 0)&& (lineWidth=1);\r\n\t\t\tvar tId=0;\r\n\t\t\tif (Render.isWebGL){\r\n\t\t\t\ttId=VectorGraphManager.getInstance().getId();\r\n\t\t\t\tif (this._vectorgraphArray==null)this._vectorgraphArray=[];\r\n\t\t\t\tthis._vectorgraphArray.push(tId);\r\n\t\t\t\tvar tIsConvexPolygon=false;\r\n\t\t\t\tif (points.length > 6){\r\n\t\t\t\t\ttIsConvexPolygon=false;\r\n\t\t\t\t\t}else {\r\n\t\t\t\t\ttIsConvexPolygon=true;\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\tvar offset=lineColor ? (lineWidth % 2===0 ? 0 :0.5):0;\r\n\t\t\tvar arr=[x+offset,y+offset,points,fillColor,lineColor,lineWidth,tId,tIsConvexPolygon];\r\n\t\t\tthis._saveToCmd(Render._context._drawPoly,arr);\r\n\t\t}\r\n\r\n\t\t__proto._getPathPoints=function(paths){\r\n\t\t\tvar i=0,len=0;\r\n\t\t\tvar rst=Graphics._tempPoints;\r\n\t\t\trst.length=0;\r\n\t\t\tlen=paths.length;\r\n\t\t\tvar tCMD;\r\n\t\t\tfor (i=0;i < len;i++){\r\n\t\t\t\ttCMD=paths[i];\r\n\t\t\t\tif (tCMD.length > 1){\r\n\t\t\t\t\trst.push(tCMD[1],tCMD[2]);\r\n\t\t\t\t\tif (tCMD.length > 3){\r\n\t\t\t\t\t\trst.push(tCMD[3],tCMD[4]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn rst;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*绘制路径。\r\n\t\t*@param x 开始绘制的 X 轴位置。\r\n\t\t*@param y 开始绘制的 Y 轴位置。\r\n\t\t*@param paths 路径集合，路径支持以下格式：[[\"moveTo\",x,y],[\"lineTo\",x,y,x,y,x,y],[\"arcTo\",x1,y1,x2,y2,r],[\"closePath\"]]。\r\n\t\t*@param brush 刷子定义，支持以下设置{fillStyle}。\r\n\t\t*@param pen 画笔定义，支持以下设置{strokeStyle,lineWidth,lineJoin,lineCap,miterLimit}。\r\n\t\t*/\r\n\t\t__proto.drawPath=function(x,y,paths,brush,pen){\r\n\t\t\tvar arr=[x,y,paths,brush,pen];\r\n\t\t\tthis._saveToCmd(Render._context._drawPath,arr);\r\n\t\t}\r\n\r\n\t\t/**@private */\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*命令流。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'cmds',function(){\r\n\t\t\treturn this._cmds;\r\n\t\t\t},function(value){\r\n\t\t\tthis._sp && (this._sp._renderType |=0x200);\r\n\t\t\tthis._cmds=value;\r\n\t\t\tthis._render=this._renderAll;\r\n\t\t\tthis._repaint();\r\n\t\t});\r\n\r\n\t\tGraphics.__init__=function(){\r\n\t\t\tif (Render.isConchNode){\r\n\t\t\t\tvar from=laya.display.Graphics.prototype;\r\n\t\t\t\tvar to=ConchGraphics.prototype;\r\n\t\t\t\tvar list=[\"clear\",\"destroy\",\"alpha\",\"rotate\",\"transform\",\"scale\",\"translate\",\"save\",\"restore\",\"clipRect\",\"blendMode\",\"fillText\",\"fillBorderText\",\"_fands\",\"drawRect\",\"drawCircle\",\"drawPie\",\"drawPoly\",\"drawPath\",\"drawImageM\",\"drawLine\",\"drawLines\",\"_drawPs\",\"drawCurves\",\"replaceText\",\"replaceTextColor\",\"_fillImage\",\"fillTexture\",\"setSkinMesh\",\"drawParticle\",\"drawImageS\"];\r\n\t\t\t\tfor (var i=0,len=list.length;i <=len;i++){\r\n\t\t\t\t\tvar temp=list[i];\r\n\t\t\t\t\tfrom[temp]=to[temp];\r\n\t\t\t\t}\r\n\t\t\t\tfrom._saveToCmd=null;\r\n\t\t\t\tif (to.drawImageS){\r\n\t\t\t\t\tfrom.drawTextures=function (tex,pos){\r\n\t\t\t\t\t\tif (!tex)return;\r\n\t\t\t\t\t\tif (!(tex.loaded && tex.bitmap && tex.source)){\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tvar uv=tex.uv,w=tex.bitmap.width,h=tex.bitmap.height;\r\n\t\t\t\t\t\tthis.drawImageS(tex.bitmap.source,uv[0] *w,uv[1] *h,(uv[2]-uv[0])*w,(uv[5]-uv[3])*h,tex.offsetX,tex.offsetY,tex.width,tex.height,pos);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tfrom.drawTexture=function (tex,x,y,width,height,m){\r\n\t\t\t\t\t(x===void 0)&& (x=0);\r\n\t\t\t\t\t(y===void 0)&& (y=0);\r\n\t\t\t\t\t(width===void 0)&& (width=0);\r\n\t\t\t\t\t(height===void 0)&& (height=0);\r\n\t\t\t\t\tif (!tex)return;\r\n\t\t\t\t\tif (!(tex.loaded && tex.bitmap && tex.source)){\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!width)width=tex.sourceWidth;\r\n\t\t\t\t\tif (!height)height=tex.sourceHeight;\r\n\t\t\t\t\twidth=width-tex.sourceWidth+tex.width;\r\n\t\t\t\t\theight=height-tex.sourceHeight+tex.height;\r\n\t\t\t\t\tif (width <=0 || height <=0)return;\r\n\t\t\t\t\tx+=tex.offsetX;\r\n\t\t\t\t\ty+=tex.offsetY;\r\n\t\t\t\t\tvar uv=tex.uv,w=tex.bitmap.width,h=tex.bitmap.height;\r\n\t\t\t\t\tthis.drawImageM(tex.bitmap.source,uv[0] *w,uv[1] *h,(uv[2]-uv[0])*w,(uv[5]-uv[3])*h,x,y,width,height,m);\r\n\t\t\t\t\tthis._repaint();\r\n\t\t\t\t}\r\n\t\t\t\tfrom.fillTexture=function (tex,x,y,width,height,type,offset){\r\n\t\t\t\t\t(width===void 0)&& (width=0);\r\n\t\t\t\t\t(height===void 0)&& (height=0);\r\n\t\t\t\t\t(type===void 0)&& (type=\"repeat\");\r\n\t\t\t\t\tif (!tex)return;\r\n\t\t\t\t\tif (tex.loaded){\r\n\t\t\t\t\t\tvar ctxi=Render._context.ctx;\r\n\t\t\t\t\t\tvar w=tex.bitmap.width,h=tex.bitmap.height,uv=tex.uv;\r\n\t\t\t\t\t\tvar pat;\r\n\t\t\t\t\t\tif (tex.uv !=Texture.DEF_UV){\r\n\t\t\t\t\t\t\tpat=ctxi.createPattern(tex.bitmap.source,type,uv[0] *w,uv[1] *h,(uv[2]-uv[0])*w,(uv[5]-uv[3])*h);\r\n\t\t\t\t\t\t\t}else {\r\n\t\t\t\t\t\t\tpat=ctxi.createPattern(tex.bitmap.source,type);\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tvar sX=0,sY=0;\r\n\t\t\t\t\t\tif (offset){\r\n\t\t\t\t\t\t\tx+=offset.x % tex.width;\r\n\t\t\t\t\t\t\ty+=offset.y % tex.height;\r\n\t\t\t\t\t\t\tsX-=offset.x % tex.width;\r\n\t\t\t\t\t\t\tsY-=offset.y % tex.height;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis._fillImage(pat,x,y,sX,sY,width,height);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tGraphics._addPointArrToRst=function(rst,points,matrix,dx,dy){\r\n\t\t\t(dx===void 0)&& (dx=0);\r\n\t\t\t(dy===void 0)&& (dy=0);\r\n\t\t\tvar i=0,len=0;\r\n\t\t\tlen=points.length;\r\n\t\t\tfor (i=0;i < len;i+=2){\r\n\t\t\t\tGraphics._addPointToRst(rst,points[i]+dx,points[i+1]+dy,matrix);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tGraphics._addPointToRst=function(rst,x,y,matrix){\r\n\t\t\tvar _tempPoint=Point.TEMP;\r\n\t\t\t_tempPoint.setTo(x ? x :0,y ? y :0);\r\n\t\t\tmatrix.transformPoint(_tempPoint);\r\n\t\t\trst.push(_tempPoint.x,_tempPoint.y);\r\n\t\t}\r\n\r\n\t\tGraphics._tempPoints=[];\r\n\t\tGraphics._tempMatrixArrays=[];\r\n\t\tGraphics._tempCmds=[];\r\n\t\t__static(Graphics,\r\n\t\t['_tempMatrix',function(){return this._tempMatrix=new Matrix();},'_initMatrix',function(){return this._initMatrix=new Matrix();}\r\n\t\t]);\r\n\t\treturn Graphics;\r\n\t})()\r\n\r\n\r\n\t//class laya.webgl.shader.ShaderDefines\r\n\tvar ShaderDefines=(function(){\r\n\t\tfunction ShaderDefines(name2int,int2name,int2nameMap){\r\n\t\t\tthis._value=0;\r\n\t\t\t//this._name2int=null;\r\n\t\t\t//this._int2name=null;\r\n\t\t\t//this._int2nameMap=null;\r\n\t\t\tthis._name2int=name2int;\r\n\t\t\tthis._int2name=int2name;\r\n\t\t\tthis._int2nameMap=int2nameMap;\r\n\t\t}\r\n\r\n\t\t__class(ShaderDefines,'laya.webgl.shader.ShaderDefines');\r\n\t\tvar __proto=ShaderDefines.prototype;\r\n\t\t__proto.add=function(value){\r\n\t\t\tif ((typeof value=='string'))value=this._name2int[value];\r\n\t\t\tthis._value |=value;\r\n\t\t\treturn this._value;\r\n\t\t}\r\n\r\n\t\t__proto.addInt=function(value){\r\n\t\t\tthis._value |=value;\r\n\t\t\treturn this._value;\r\n\t\t}\r\n\r\n\t\t__proto.remove=function(value){\r\n\t\t\tif ((typeof value=='string'))value=this._name2int[value];\r\n\t\t\tthis._value &=(~value);\r\n\t\t\treturn this._value;\r\n\t\t}\r\n\r\n\t\t__proto.isDefine=function(def){\r\n\t\t\treturn (this._value & def)===def;\r\n\t\t}\r\n\r\n\t\t__proto.getValue=function(){\r\n\t\t\treturn this._value;\r\n\t\t}\r\n\r\n\t\t__proto.setValue=function(value){\r\n\t\t\tthis._value=value;\r\n\t\t}\r\n\r\n\t\t__proto.toNameDic=function(){\r\n\t\t\tvar r=this._int2nameMap[this._value];\r\n\t\t\treturn r ? r :ShaderDefines._toText(this._value,this._int2name,this._int2nameMap);\r\n\t\t}\r\n\r\n\t\tShaderDefines._reg=function(name,value,_name2int,_int2name){\r\n\t\t\t_name2int[name]=value;\r\n\t\t\t_int2name[value]=name;\r\n\t\t}\r\n\r\n\t\tShaderDefines._toText=function(value,_int2name,_int2nameMap){\r\n\t\t\tvar r=_int2nameMap[value];\r\n\t\t\tif (r)return r;\r\n\t\t\tvar o={};\r\n\t\t\tvar d=1;\r\n\t\t\tfor (var i=0;i < 32;i++){\r\n\t\t\t\td=1 << i;\r\n\t\t\t\tif (d > value)break ;\r\n\t\t\t\tif (value & d){\r\n\t\t\t\t\tvar name=_int2name[d];\r\n\t\t\t\t\tname && (o[name]=\"\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t_int2nameMap[value]=o;\r\n\t\t\treturn o;\r\n\t\t}\r\n\r\n\t\tShaderDefines._toInt=function(names,_name2int){\r\n\t\t\tvar words=names.split('.');\r\n\t\t\tvar num=0;\r\n\t\t\tfor (var i=0,n=words.length;i < n;i++){\r\n\t\t\t\tvar value=_name2int[words[i]];\r\n\t\t\t\tif (!value)throw new Error(\"Defines to int err:\"+names+\"/\"+words[i]);\r\n\t\t\t\tnum |=value;\r\n\t\t\t}\r\n\t\t\treturn num;\r\n\t\t}\r\n\r\n\t\treturn ShaderDefines;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*使用前可用<code>supported</code>查看浏览器支持。\r\n\t*/\r\n\t//class laya.device.geolocation.Geolocation\r\n\tvar Geolocation=(function(){\r\n\t\tfunction Geolocation(){}\r\n\t\t__class(Geolocation,'laya.device.geolocation.Geolocation');\r\n\t\tGeolocation.getCurrentPosition=function(onSuccess,onError){\r\n\t\t\tGeolocation.navigator.geolocation.getCurrentPosition(function(pos){\r\n\t\t\t\tGeolocation.position.setPosition(pos);\r\n\t\t\t\tonSuccess.runWith(Geolocation.position);\r\n\t\t\t},\r\n\t\t\tfunction(error){\r\n\t\t\t\tonError.runWith(error);\r\n\t\t\t\t},{\r\n\t\t\t\tenableHighAccuracy :laya.device.geolocation.Geolocation.enableHighAccuracy,\r\n\t\t\t\ttimeout :laya.device.geolocation.Geolocation.timeout,\r\n\t\t\t\tmaximumAge :laya.device.geolocation.Geolocation.maximumAge\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tGeolocation.watchPosition=function(onSuccess,onError){\r\n\t\t\treturn Geolocation.navigator.geolocation.watchPosition(function(pos){\r\n\t\t\t\tGeolocation.position.setPosition(pos);\r\n\t\t\t\tonSuccess.runWith(Geolocation.position);\r\n\t\t\t},\r\n\t\t\tfunction(error){\r\n\t\t\t\tonError.runWith(error);\r\n\t\t\t\t},{\r\n\t\t\t\tenableHighAccuracy :Geolocation.enableHighAccuracy,\r\n\t\t\t\ttimeout :Geolocation.timeout,\r\n\t\t\t\tmaximumAge :Geolocation.maximumAge\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tGeolocation.clearWatch=function(id){\r\n\t\t\tGeolocation.navigator.geolocation.clearWatch(id);\r\n\t\t}\r\n\r\n\t\tGeolocation.PERMISSION_DENIED=1;\r\n\t\tGeolocation.POSITION_UNAVAILABLE=2;\r\n\t\tGeolocation.TIMEOUT=3;\r\n\t\tGeolocation.enableHighAccuracy=false;\r\n\t\tGeolocation.maximumAge=0;\r\n\t\t__static(Geolocation,\r\n\t\t['navigator',function(){return this.navigator=Browser.window.navigator;},'position',function(){return this.position=new GeolocationInfo();},'supported',function(){return this.supported=!!Geolocation.navigator.geolocation;},'timeout',function(){return this.timeout=1E10;}\r\n\t\t]);\r\n\t\treturn Geolocation;\r\n\t})()\r\n\r\n\r\n\t//class laya.device.geolocation.GeolocationInfo\r\n\tvar GeolocationInfo=(function(){\r\n\t\tfunction GeolocationInfo(){\r\n\t\t\tthis.pos=null;\r\n\t\t\tthis.coords=null;\r\n\t\t}\r\n\r\n\t\t__class(GeolocationInfo,'laya.device.geolocation.GeolocationInfo');\r\n\t\tvar __proto=GeolocationInfo.prototype;\r\n\t\t__proto.setPosition=function(pos){\r\n\t\t\tthis.pos=pos;\r\n\t\t\tthis.coords=pos.coords;\r\n\t\t}\r\n\r\n\t\t__getset(0,__proto,'timestamp',function(){\r\n\t\t\treturn this.pos.timestamp;\r\n\t\t});\r\n\r\n\t\t__getset(0,__proto,'heading',function(){\r\n\t\t\treturn this.coords.heading;\r\n\t\t});\r\n\r\n\t\t__getset(0,__proto,'latitude',function(){\r\n\t\t\treturn this.coords.latitude;\r\n\t\t});\r\n\r\n\t\t__getset(0,__proto,'altitudeAccuracy',function(){\r\n\t\t\treturn this.coords.altitudeAccuracy;\r\n\t\t});\r\n\r\n\t\t__getset(0,__proto,'accuracy',function(){\r\n\t\t\treturn this.coords.accuracy;\r\n\t\t});\r\n\r\n\t\t__getset(0,__proto,'altitude',function(){\r\n\t\t\treturn this.coords.altitude;\r\n\t\t});\r\n\r\n\t\t__getset(0,__proto,'speed',function(){\r\n\t\t\treturn this.coords.speed;\r\n\t\t});\r\n\r\n\t\t__getset(0,__proto,'longitude',function(){\r\n\t\t\treturn this.coords.longitude;\r\n\t\t});\r\n\r\n\t\treturn GeolocationInfo;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*<code>BitmapFont</code> 是位图字体类，用于定义位图字体信息。\r\n\t*/\r\n\t//class laya.display.BitmapFont\r\n\tvar BitmapFont=(function(){\r\n\t\tfunction BitmapFont(){\r\n\t\t\tthis._texture=null;\r\n\t\t\tthis._fontCharDic={};\r\n\t\t\tthis._fontWidthMap={};\r\n\t\t\tthis._complete=null;\r\n\t\t\tthis._path=null;\r\n\t\t\tthis._maxWidth=0;\r\n\t\t\tthis._spaceWidth=10;\r\n\t\t\tthis._padding=null;\r\n\t\t\tthis.fontSize=12;\r\n\t\t\tthis.autoScaleSize=false;\r\n\t\t\tthis.letterSpacing=0;\r\n\t\t}\r\n\r\n\t\t__class(BitmapFont,'laya.display.BitmapFont');\r\n\t\tvar __proto=BitmapFont.prototype;\r\n\t\t/**\r\n\t\t*通过指定位图字体文件路径，加载位图字体文件。\r\n\t\t*@param path 位图字体文件的路径。\r\n\t\t*@param complete 加载完成的回调，通知上层字体文件已经完成加载并解析。\r\n\t\t*/\r\n\t\t__proto.loadFont=function(path,complete){\r\n\t\t\tthis._path=path;\r\n\t\t\tthis._complete=complete;\r\n\t\t\tLaya.loader.load([{url:this._path,type:\"xml\"},{url:this._path.replace(\".fnt\",\".png\"),type:\"image\"}],Handler.create(this,this.onLoaded));\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*/\r\n\t\t__proto.onLoaded=function(){\r\n\t\t\tthis.parseFont(Loader.getRes(this._path),Loader.getRes(this._path.replace(\".fnt\",\".png\")));\r\n\t\t\tthis._complete && this._complete.run();\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*解析字体文件。\r\n\t\t*@param xml 字体文件XML。\r\n\t\t*@param texture 字体的纹理。\r\n\t\t*/\r\n\t\t__proto.parseFont=function(xml,texture){\r\n\t\t\tif (xml==null || texture==null)return;\r\n\t\t\tthis._texture=texture;\r\n\t\t\tvar tX=0;\r\n\t\t\tvar tScale=1;\r\n\t\t\tvar tInfo=xml.getElementsByTagName(\"info\");\r\n\t\t\tthis.fontSize=parseInt(tInfo[0].attributes[\"size\"].nodeValue);\r\n\t\t\tvar tPadding=tInfo[0].attributes[\"padding\"].nodeValue;\r\n\t\t\tvar tPaddingArray=tPadding.split(\",\");\r\n\t\t\tthis._padding=[parseInt(tPaddingArray[0]),parseInt(tPaddingArray[1]),parseInt(tPaddingArray[2]),parseInt(tPaddingArray[3])];\r\n\t\t\tvar chars=xml.getElementsByTagName(\"char\");\r\n\t\t\tvar i=0;\r\n\t\t\tfor (i=0;i < chars.length;i++){\r\n\t\t\t\tvar tAttribute=chars[i].attributes;\r\n\t\t\t\tvar tId=parseInt(tAttribute[\"id\"].nodeValue);\r\n\t\t\t\tvar xOffset=parseInt(tAttribute[\"xoffset\"].nodeValue)/ tScale;\r\n\t\t\t\tvar yOffset=parseInt(tAttribute[\"yoffset\"].nodeValue)/ tScale;\r\n\t\t\t\tvar xAdvance=parseInt(tAttribute[\"xadvance\"].nodeValue)/ tScale;\r\n\t\t\t\tvar region=new Rectangle();\r\n\t\t\t\tregion.x=parseInt(tAttribute[\"x\"].nodeValue);\r\n\t\t\t\tregion.y=parseInt(tAttribute[\"y\"].nodeValue);\r\n\t\t\t\tregion.width=parseInt(tAttribute[\"width\"].nodeValue);\r\n\t\t\t\tregion.height=parseInt(tAttribute[\"height\"].nodeValue);\r\n\t\t\t\tvar tTexture=Texture.create(texture,region.x,region.y,region.width,region.height,xOffset,yOffset);\r\n\t\t\t\tthis._maxWidth=Math.max(this._maxWidth,xAdvance+this.letterSpacing);\r\n\t\t\t\tthis._fontCharDic[tId]=tTexture;\r\n\t\t\t\tthis._fontWidthMap[tId]=xAdvance;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*获取指定字符的字体纹理对象。\r\n\t\t*@param char 字符。\r\n\t\t*@return 指定的字体纹理对象。\r\n\t\t*/\r\n\t\t__proto.getCharTexture=function(char){\r\n\t\t\treturn this._fontCharDic[char.charCodeAt(0)];\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*销毁位图字体，调用Text.unregisterBitmapFont 时，默认会销毁。\r\n\t\t*/\r\n\t\t__proto.destroy=function(){\r\n\t\t\tif (this._texture){\r\n\t\t\t\tfor (var p in this._fontCharDic){\r\n\t\t\t\t\tvar tTexture=this._fontCharDic[p];\r\n\t\t\t\t\tif (tTexture)tTexture.destroy();\r\n\t\t\t\t}\r\n\t\t\t\tthis._texture.destroy();\r\n\t\t\t\tthis._fontCharDic=null;\r\n\t\t\t\tthis._fontWidthMap=null;\r\n\t\t\t\tthis._texture=null;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*设置空格的宽（如果字体库有空格，这里就可以不用设置了）。\r\n\t\t*@param spaceWidth 宽度，单位为像素。\r\n\t\t*/\r\n\t\t__proto.setSpaceWidth=function(spaceWidth){\r\n\t\t\tthis._spaceWidth=spaceWidth;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*获取指定字符的宽度。\r\n\t\t*@param char 字符。\r\n\t\t*@return 宽度。\r\n\t\t*/\r\n\t\t__proto.getCharWidth=function(char){\r\n\t\t\tvar code=char.charCodeAt(0);\r\n\t\t\tif (this._fontWidthMap[code])return this._fontWidthMap[code]+this.letterSpacing;\r\n\t\t\tif (char==\" \")return this._spaceWidth+this.letterSpacing;\r\n\t\t\treturn 0;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*获取指定文本内容的宽度。\r\n\t\t*@param text 文本内容。\r\n\t\t*@return 宽度。\r\n\t\t*/\r\n\t\t__proto.getTextWidth=function(text){\r\n\t\t\tvar tWidth=0;\r\n\t\t\tfor (var i=0,n=text.length;i < n;i++){\r\n\t\t\t\ttWidth+=this.getCharWidth(text.charAt(i));\r\n\t\t\t}\r\n\t\t\treturn tWidth;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*获取最大字符宽度。\r\n\t\t*/\r\n\t\t__proto.getMaxWidth=function(){\r\n\t\t\treturn this._maxWidth;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*获取最大字符高度。\r\n\t\t*/\r\n\t\t__proto.getMaxHeight=function(){\r\n\t\t\treturn this._padding[0]+this._padding[2]+this.fontSize;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*将指定的文本绘制到指定的显示对象上。\r\n\t\t*/\r\n\t\t__proto.drawText=function(text,sprite,drawX,drawY,align,width){\r\n\t\t\tvar tWidth=this.getTextWidth(text);\r\n\t\t\tvar tTexture;\r\n\t\t\tvar dx=0;\r\n\t\t\talign===\"center\" && (dx=(width-tWidth)/ 2);\r\n\t\t\talign===\"right\" && (dx=(width-tWidth));\r\n\t\t\tvar tX=0;\r\n\t\t\tfor (var i=0,n=text.length;i < n;i++){\r\n\t\t\t\ttTexture=this.getCharTexture(text.charAt(i));\r\n\t\t\t\tif (tTexture){\r\n\t\t\t\t\tsprite.graphics.drawTexture(tTexture,drawX+tX+dx,drawY+this._padding[0]);\r\n\t\t\t\t\ttX+=this.getCharWidth(text.charAt(i));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn BitmapFont;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*@private\r\n\t*<code>Style</code> 类是元素样式定义类。\r\n\t*/\r\n\t//class laya.display.css.Style\r\n\tvar Style=(function(){\r\n\t\tfunction Style(){\r\n\t\t\tthis.alpha=1;\r\n\t\t\tthis.visible=true;\r\n\t\t\tthis.scrollRect=null;\r\n\t\t\tthis.blendMode=null;\r\n\t\t\tthis._type=0;\r\n\t\t\tthis._tf=Style._TF_EMPTY;\r\n\t\t}\r\n\r\n\t\t__class(Style,'laya.display.css.Style');\r\n\t\tvar __proto=Style.prototype;\r\n\t\t__proto.getTransform=function(){\r\n\t\t\treturn this._tf;\r\n\t\t}\r\n\r\n\t\t__proto.setTransform=function(value){\r\n\t\t\tthis._tf=value==='none' || !value ? Style._TF_EMPTY :value;\r\n\t\t}\r\n\r\n\t\t__proto.setTranslateX=function(value){\r\n\t\t\tthis._tf===Style._TF_EMPTY && (this._tf=new TransformInfo());\r\n\t\t\tthis._tf.translateX=value;\r\n\t\t}\r\n\r\n\t\t__proto.setTranslateY=function(value){\r\n\t\t\tthis._tf===Style._TF_EMPTY && (this._tf=new TransformInfo());\r\n\t\t\tthis._tf.translateY=value;\r\n\t\t}\r\n\r\n\t\t__proto.setScaleX=function(value){\r\n\t\t\tthis._tf===Style._TF_EMPTY && (this._tf=new TransformInfo());\r\n\t\t\tthis._tf.scaleX=value;\r\n\t\t}\r\n\r\n\t\t__proto.setScaleY=function(value){\r\n\t\t\tthis._tf===Style._TF_EMPTY && (this._tf=new TransformInfo());\r\n\t\t\tthis._tf.scaleY=value;\r\n\t\t}\r\n\r\n\t\t__proto.setRotate=function(value){\r\n\t\t\tthis._tf===Style._TF_EMPTY && (this._tf=new TransformInfo());\r\n\t\t\tthis._tf.rotate=value;\r\n\t\t}\r\n\r\n\t\t__proto.setSkewX=function(value){\r\n\t\t\tthis._tf===Style._TF_EMPTY && (this._tf=new TransformInfo());\r\n\t\t\tthis._tf.skewX=value;\r\n\t\t}\r\n\r\n\t\t__proto.setSkewY=function(value){\r\n\t\t\tthis._tf===Style._TF_EMPTY && (this._tf=new TransformInfo());\r\n\t\t\tthis._tf.skewY=value;\r\n\t\t}\r\n\r\n\t\t/**销毁此对象。*/\r\n\t\t__proto.destroy=function(){\r\n\t\t\tthis.scrollRect=null;\r\n\t\t}\r\n\r\n\t\t/**@private */\r\n\t\t__proto.render=function(sprite,context,x,y){}\r\n\t\t/**@private */\r\n\t\t__proto.getCSSStyle=function(){\r\n\t\t\treturn CSSStyle.EMPTY;\r\n\t\t}\r\n\r\n\t\t/**@private */\r\n\t\t__proto._enableLayout=function(){\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\t/**是否为绝对定位。*/\r\n\t\t__getset(0,__proto,'absolute',function(){\r\n\t\t\treturn true;\r\n\t\t});\r\n\r\n\t\t/**表示元素是否显示为块级元素。*/\r\n\t\t__getset(0,__proto,'block',function(){\r\n\t\t\treturn (this._type & 0x1)!=0;\r\n\t\t});\r\n\r\n\t\t/**X 轴缩放值。*/\r\n\t\t__getset(0,__proto,'scaleX',function(){\r\n\t\t\treturn this._tf.scaleX;\r\n\t\t\t},function(value){\r\n\t\t\tthis.setScaleX(value);\r\n\t\t});\r\n\r\n\t\t/**定义沿着 Y 轴的 2D 倾斜转换。*/\r\n\t\t__getset(0,__proto,'skewY',function(){\r\n\t\t\treturn this._tf.skewY;\r\n\t\t\t},function(value){\r\n\t\t\tthis.setSkewY(value);\r\n\t\t});\r\n\r\n\t\t/**定义沿着 X 轴的 2D 倾斜转换。*/\r\n\t\t__getset(0,__proto,'skewX',function(){\r\n\t\t\treturn this._tf.skewX;\r\n\t\t\t},function(value){\r\n\t\t\tthis.setSkewX(value);\r\n\t\t});\r\n\r\n\t\t/**定义旋转角度。*/\r\n\t\t__getset(0,__proto,'rotate',function(){\r\n\t\t\treturn this._tf.rotate;\r\n\t\t\t},function(value){\r\n\t\t\tthis.setRotate(value);\r\n\t\t});\r\n\r\n\t\t/**元素应用的 2D 或 3D 转换的值。该属性允许我们对元素进行旋转、缩放、移动或倾斜。*/\r\n\t\t__getset(0,__proto,'transform',function(){\r\n\t\t\treturn this.getTransform();\r\n\t\t\t},function(value){\r\n\t\t\tthis.setTransform(value);\r\n\t\t});\r\n\r\n\t\t/**Y 轴缩放值。*/\r\n\t\t__getset(0,__proto,'scaleY',function(){\r\n\t\t\treturn this._tf.scaleY;\r\n\t\t\t},function(value){\r\n\t\t\tthis.setScaleY(value);\r\n\t\t});\r\n\r\n\t\t/**表示元素的上内边距。*/\r\n\t\t__getset(0,__proto,'paddingTop',function(){\r\n\t\t\treturn 0;\r\n\t\t});\r\n\r\n\t\t/**定义转换，只是用 Y 轴的值。*/\r\n\t\t__getset(0,__proto,'translateY',function(){\r\n\t\t\treturn this._tf.translateY;\r\n\t\t\t},function(value){\r\n\t\t\tthis.setTranslateY(value);\r\n\t\t});\r\n\r\n\t\t/**定义转换，只是用 X 轴的值。*/\r\n\t\t__getset(0,__proto,'translateX',function(){\r\n\t\t\treturn this._tf.translateX;\r\n\t\t\t},function(value){\r\n\t\t\tthis.setTranslateX(value);\r\n\t\t});\r\n\r\n\t\t/**表示元素的左内边距。*/\r\n\t\t__getset(0,__proto,'paddingLeft',function(){\r\n\t\t\treturn 0;\r\n\t\t});\r\n\r\n\t\tStyle.__init__=function(){\r\n\t\t\tStyle._TF_EMPTY=new TransformInfo();\r\n\t\t\tStyle.EMPTY=new Style();\r\n\t\t}\r\n\r\n\t\tStyle.EMPTY=null\r\n\t\tStyle._TF_EMPTY=null\r\n\t\treturn Style;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*@private\r\n\t*<code>Font</code> 类是字体显示定义类。\r\n\t*/\r\n\t//class laya.display.css.Font\r\n\tvar Font=(function(){\r\n\t\tfunction Font(src){\r\n\t\t\tthis._type=0;\r\n\t\t\tthis._weight=0;\r\n\t\t\tthis._decoration=null;\r\n\t\t\tthis._text=null;\r\n\t\t\tthis.indent=0;\r\n\t\t\tthis._color=Color.create(Font.defaultColor);\r\n\t\t\tthis.family=Font.defaultFamily;\r\n\t\t\tthis.stroke=Font._STROKE;\r\n\t\t\tthis.size=Font.defaultSize;\r\n\t\t\tsrc && src!==Font.EMPTY && src.copyTo(this);\r\n\t\t}\r\n\r\n\t\t__class(Font,'laya.display.css.Font');\r\n\t\tvar __proto=Font.prototype;\r\n\t\t/**\r\n\t\t*字体样式字符串。\r\n\t\t*/\r\n\t\t__proto.set=function(value){\r\n\t\t\tthis._text=null;\r\n\t\t\tvar strs=value.split(' ');\r\n\t\t\tfor (var i=0,n=strs.length;i < n;i++){\r\n\t\t\t\tvar str=strs[i];\r\n\t\t\t\tswitch (str){\r\n\t\t\t\t\tcase 'italic':\r\n\t\t\t\t\t\tthis.italic=true;\r\n\t\t\t\t\t\tcontinue ;\r\n\t\t\t\t\tcase 'bold':\r\n\t\t\t\t\t\tthis.bold=true;\r\n\t\t\t\t\t\tcontinue ;\r\n\t\t\t\t\t}\r\n\t\t\t\tif (str.indexOf('px')> 0){\r\n\t\t\t\t\tthis.size=parseInt(str);\r\n\t\t\t\t\tthis.family=strs[i+1];\r\n\t\t\t\t\ti++;\r\n\t\t\t\t\tcontinue ;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*返回字体样式字符串。\r\n\t\t*@return 字体样式字符串。\r\n\t\t*/\r\n\t\t__proto.toString=function(){\r\n\t\t\tthis._text=\"\"\r\n\t\t\tthis.italic && (this._text+=\"italic \");\r\n\t\t\tthis.bold && (this._text+=\"bold \");\r\n\t\t\treturn this._text+=this.size+\"px \"+this.family;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*将当前的属性值复制到传入的 <code>Font</code> 对象。\r\n\t\t*@param dec 一个 Font 对象。\r\n\t\t*/\r\n\t\t__proto.copyTo=function(dec){\r\n\t\t\tdec._type=this._type;\r\n\t\t\tdec._text=this._text;\r\n\t\t\tdec._weight=this._weight;\r\n\t\t\tdec._color=this._color;\r\n\t\t\tdec.family=this.family;\r\n\t\t\tdec.stroke=this.stroke !=Font._STROKE ? this.stroke.slice():Font._STROKE;\r\n\t\t\tdec.indent=this.indent;\r\n\t\t\tdec.size=this.size;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*规定添加到文本的修饰。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'decoration',function(){\r\n\t\t\treturn this._decoration ? this._decoration.value :\"none\";\r\n\t\t\t},function(value){\r\n\t\t\tvar strs=value.split(' ');\r\n\t\t\tthis._decoration || (this._decoration={});\r\n\t\t\tswitch (strs[0]){\r\n\t\t\t\tcase '_':\r\n\t\t\t\t\tthis._decoration.type='underline'\r\n\t\t\t\t\tbreak ;\r\n\t\t\t\tcase '-':\r\n\t\t\t\t\tthis._decoration.type='line-through'\r\n\t\t\t\t\tbreak ;\r\n\t\t\t\tcase 'overline':\r\n\t\t\t\t\tthis._decoration.type='overline'\r\n\t\t\t\t\tbreak ;\r\n\t\t\t\tdefault :\r\n\t\t\t\t\tthis._decoration.type=strs[0];\r\n\t\t\t\t}\r\n\t\t\tstrs[1] && (this._decoration.color=Color.create(strs));\r\n\t\t\tthis._decoration.value=value;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*文本的粗细。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'weight',function(){\r\n\t\t\treturn \"\"+this._weight;\r\n\t\t\t},function(value){\r\n\t\t\tvar weight=0;\r\n\t\t\tswitch (value){\r\n\t\t\t\tcase 'normal':\r\n\t\t\t\t\tbreak ;\r\n\t\t\t\tcase 'bold':\r\n\t\t\t\t\tthis.bold=true;\r\n\t\t\t\t\tweight=700;\r\n\t\t\t\t\tbreak ;\r\n\t\t\t\tcase 'bolder':\r\n\t\t\t\t\tweight=800;\r\n\t\t\t\t\tbreak ;\r\n\t\t\t\tcase 'lighter':\r\n\t\t\t\t\tweight=100;\r\n\t\t\t\t\tbreak ;\r\n\t\t\t\tdefault :\r\n\t\t\t\t\tweight=parseInt(value);\r\n\t\t\t\t}\r\n\t\t\tthis._weight=weight;\r\n\t\t\tthis._text=null;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*表示颜色字符串。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'color',function(){\r\n\t\t\treturn this._color.strColor;\r\n\t\t\t},function(value){\r\n\t\t\tthis._color=Color.create(value);\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*表示是否为粗体。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'bold',function(){\r\n\t\t\treturn (this._type & 0x800)!==0;\r\n\t\t\t},function(value){\r\n\t\t\tvalue ? (this._type |=0x800):(this._type &=~0x800);\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*表示是否为斜体。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'italic',function(){\r\n\t\t\treturn (this._type & 0x200)!==0;\r\n\t\t\t},function(value){\r\n\t\t\tvalue ? (this._type |=0x200):(this._type &=~0x200);\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*表示是否为密码格式。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'password',function(){\r\n\t\t\treturn (this._type & 0x400)!==0;\r\n\t\t\t},function(value){\r\n\t\t\tvalue ? (this._type |=0x400):(this._type &=~0x400);\r\n\t\t});\r\n\r\n\t\tFont.__init__=function(){\r\n\t\t\tFont.EMPTY=new Font(null);\r\n\t\t}\r\n\r\n\t\tFont.EMPTY=null\r\n\t\tFont.defaultColor=\"#000000\";\r\n\t\tFont.defaultSize=12;\r\n\t\tFont.defaultFamily=\"Arial\";\r\n\t\tFont.defaultFont=\"12px Arial\";\r\n\t\tFont._STROKE=[0,\"#000000\"];\r\n\t\tFont._ITALIC=0x200;\r\n\t\tFont._PASSWORD=0x400;\r\n\t\tFont._BOLD=0x800;\r\n\t\treturn Font;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*@private\r\n\t*/\r\n\t//class laya.display.css.TransformInfo\r\n\tvar TransformInfo=(function(){\r\n\t\tfunction TransformInfo(){\r\n\t\t\tthis.translateX=0;\r\n\t\t\tthis.translateY=0;\r\n\t\t\tthis.scaleX=1;\r\n\t\t\tthis.scaleY=1;\r\n\t\t\tthis.rotate=0;\r\n\t\t\tthis.skewX=0;\r\n\t\t\tthis.skewY=0;\r\n\t\t}\r\n\r\n\t\t__class(TransformInfo,'laya.display.css.TransformInfo');\r\n\t\treturn TransformInfo;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*<code>Event</code> 是事件类型的集合。\r\n\t*/\r\n\t//class laya.events.Event\r\n\tvar Event=(function(){\r\n\t\tfunction Event(){\r\n\t\t\t//this.type=null;\r\n\t\t\t//this.nativeEvent=null;\r\n\t\t\t//this.target=null;\r\n\t\t\t//this.currentTarget=null;\r\n\t\t\t//this._stoped=false;\r\n\t\t\t//this.touchId=0;\r\n\t\t\t//this.keyCode=0;\r\n\t\t}\r\n\r\n\t\t__class(Event,'laya.events.Event');\r\n\t\tvar __proto=Event.prototype;\r\n\t\t/**\r\n\t\t*设置事件数据。\r\n\t\t*@param type 事件类型。\r\n\t\t*@param currentTarget 事件目标触发对象。\r\n\t\t*@param target 事件当前冒泡对象。\r\n\t\t*@return 返回当前 Event 对象。\r\n\t\t*/\r\n\t\t__proto.setTo=function(type,currentTarget,target){\r\n\t\t\tthis.type=type;\r\n\t\t\tthis.currentTarget=currentTarget;\r\n\t\t\tthis.target=target;\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*防止对事件流中当前节点的后续节点中的所有事件侦听器进行处理。\r\n\t\t*/\r\n\t\t__proto.stopPropagation=function(){\r\n\t\t\tthis._stoped=true;\r\n\t\t}\r\n\r\n\t\t/**鼠标在 Stage 上的 Y 轴坐标*/\r\n\t\t__getset(0,__proto,'stageY',function(){\r\n\t\t\treturn Laya.stage.mouseY;\r\n\t\t});\r\n\r\n\t\t/**鼠标在 Stage 上的 X 轴坐标*/\r\n\t\t__getset(0,__proto,'stageX',function(){\r\n\t\t\treturn Laya.stage.mouseX;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*表示键在键盘上的位置。这对于区分在键盘上多次出现的键非常有用。<br>\r\n\t\t*例如，您可以根据此属性的值来区分左 Shift 键和右 Shift 键：左 Shift 键的值为 KeyLocation.LEFT，右 Shift 键的值为 KeyLocation.RIGHT。另一个示例是区分标准键盘 (KeyLocation.STANDARD)与数字键盘 (KeyLocation.NUM_PAD)上按下的数字键。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'keyLocation',function(){\r\n\t\t\treturn this.nativeEvent.keyLocation;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*包含按下或释放的键的字符代码值。字符代码值为英文键盘值。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'charCode',function(){\r\n\t\t\treturn this.nativeEvent.charCode;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*表示 Shift 键是处于活动状态 (true)还是非活动状态 (false)。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'shiftKey',function(){\r\n\t\t\treturn this.nativeEvent.shiftKey;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*表示 Ctrl 键是处于活动状态 (true)还是非活动状态 (false)。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'ctrlKey',function(){\r\n\t\t\treturn this.nativeEvent.ctrlKey;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*表示 Alt 键是处于活动状态 (true)还是非活动状态 (false)。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'altKey',function(){\r\n\t\t\treturn this.nativeEvent.altKey;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*触摸点列表。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'touches',function(){\r\n\t\t\tvar arr=this.nativeEvent.touches;\r\n\t\t\tif (arr){\r\n\t\t\t\tvar stage=Laya.stage;\r\n\t\t\t\tfor (var i=0,n=arr.length;i < n;i++){\r\n\t\t\t\t\tvar e=arr[i];\r\n\t\t\t\t\tvar point=Point.TEMP;\r\n\t\t\t\t\tpoint.setTo(e.clientX,e.clientY);\r\n\t\t\t\t\tstage._canvasTransform.invertTransformPoint(point);\r\n\t\t\t\t\tstage.transform.invertTransformPoint(point);\r\n\t\t\t\t\te.stageX=point.x;\r\n\t\t\t\t\te.stageY=point.y;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn arr;\r\n\t\t});\r\n\r\n\t\tEvent.EMPTY=new Event();\r\n\t\tEvent.MOUSE_DOWN=\"mousedown\";\r\n\t\tEvent.MOUSE_UP=\"mouseup\";\r\n\t\tEvent.CLICK=\"click\";\r\n\t\tEvent.RIGHT_MOUSE_DOWN=\"rightmousedown\";\r\n\t\tEvent.RIGHT_MOUSE_UP=\"rightmouseup\";\r\n\t\tEvent.RIGHT_CLICK=\"rightclick\";\r\n\t\tEvent.MOUSE_MOVE=\"mousemove\";\r\n\t\tEvent.MOUSE_OVER=\"mouseover\";\r\n\t\tEvent.MOUSE_OUT=\"mouseout\";\r\n\t\tEvent.MOUSE_WHEEL=\"mousewheel\";\r\n\t\tEvent.ROLL_OVER=\"mouseover\";\r\n\t\tEvent.ROLL_OUT=\"mouseout\";\r\n\t\tEvent.DOUBLE_CLICK=\"doubleclick\";\r\n\t\tEvent.CHANGE=\"change\";\r\n\t\tEvent.CHANGED=\"changed\";\r\n\t\tEvent.RESIZE=\"resize\";\r\n\t\tEvent.ADDED=\"added\";\r\n\t\tEvent.REMOVED=\"removed\";\r\n\t\tEvent.DISPLAY=\"display\";\r\n\t\tEvent.UNDISPLAY=\"undisplay\";\r\n\t\tEvent.ERROR=\"error\";\r\n\t\tEvent.COMPLETE=\"complete\";\r\n\t\tEvent.LOADED=\"loaded\";\r\n\t\tEvent.PROGRESS=\"progress\";\r\n\t\tEvent.INPUT=\"input\";\r\n\t\tEvent.RENDER=\"render\";\r\n\t\tEvent.OPEN=\"open\";\r\n\t\tEvent.MESSAGE=\"message\";\r\n\t\tEvent.CLOSE=\"close\";\r\n\t\tEvent.KEY_DOWN=\"keydown\";\r\n\t\tEvent.KEY_PRESS=\"keypress\";\r\n\t\tEvent.KEY_UP=\"keyup\";\r\n\t\tEvent.FRAME=\"enterframe\";\r\n\t\tEvent.DRAG_START=\"dragstart\";\r\n\t\tEvent.DRAG_MOVE=\"dragmove\";\r\n\t\tEvent.DRAG_END=\"dragend\";\r\n\t\tEvent.ENTER=\"enter\";\r\n\t\tEvent.SELECT=\"select\";\r\n\t\tEvent.BLUR=\"blur\";\r\n\t\tEvent.FOCUS=\"focus\";\r\n\t\tEvent.VISIBILITY_CHANGE=\"visibilitychange\";\r\n\t\tEvent.FOCUS_CHANGE=\"focuschange\";\r\n\t\tEvent.PLAYED=\"played\";\r\n\t\tEvent.PAUSED=\"paused\";\r\n\t\tEvent.STOPPED=\"stopped\";\r\n\t\tEvent.START=\"start\";\r\n\t\tEvent.END=\"end\";\r\n\t\tEvent.ENABLED_CHANGED=\"enabledchanged\";\r\n\t\tEvent.COMPONENT_ADDED=\"componentadded\";\r\n\t\tEvent.COMPONENT_REMOVED=\"componentremoved\";\r\n\t\tEvent.ACTIVE_CHANGED=\"activechanged\";\r\n\t\tEvent.LAYER_CHANGED=\"layerchanged\";\r\n\t\tEvent.HIERARCHY_LOADED=\"hierarchyloaded\";\r\n\t\tEvent.RECOVERING=\"recovering\";\r\n\t\tEvent.RECOVERED=\"recovered\";\r\n\t\tEvent.RELEASED=\"released\";\r\n\t\tEvent.LINK=\"link\";\r\n\t\tEvent.LABEL=\"label\";\r\n\t\tEvent.FULL_SCREEN_CHANGE=\"fullscreenchange\";\r\n\t\tEvent.DEVICE_LOST=\"devicelost\";\r\n\t\tEvent.MESH_CHANGED=\"meshchanged\";\r\n\t\tEvent.MATERIAL_CHANGED=\"materialchanged\";\r\n\t\tEvent.RENDERQUEUE_CHANGED=\"renderqueuechanged\";\r\n\t\tEvent.WORLDMATRIX_NEEDCHANGE=\"worldmatrixneedchanged\";\r\n\t\tEvent.ANIMATION_CHANGED=\"animationchanged\";\r\n\t\treturn Event;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*<p><code>KeyBoardManager</code> 是键盘事件管理类。</p>\r\n\t*<p>该类从浏览器中接收键盘事件，并派发该事件。\r\n\t*派发事件时若 Stage.focus 为空则只从 Stage 上派发该事件，否则将从 Stage.focus 对象开始一直冒泡派发该事件。\r\n\t*所以在 Laya.stage 上监听键盘事件一定能够收到，如果在其他地方监听，则必须处在Stage.focus的冒泡链上才能收到该事件。</p>\r\n\t*<p>用户可以通过代码 Laya.stage.focus=someNode 的方式来设置focus对象。</p>\r\n\t*<p>用户可统一的根据事件对象中 e.keyCode 来判断按键类型，该属性兼容了不同浏览器的实现。</p>\r\n\t*/\r\n\t//class laya.events.KeyBoardManager\r\n\tvar KeyBoardManager=(function(){\r\n\t\tfunction KeyBoardManager(){};\r\n\t\t__class(KeyBoardManager,'laya.events.KeyBoardManager');\r\n\t\tKeyBoardManager.__init__=function(){\r\n\t\t\tKeyBoardManager._addEvent(\"keydown\");\r\n\t\t\tKeyBoardManager._addEvent(\"keypress\");\r\n\t\t\tKeyBoardManager._addEvent(\"keyup\");\r\n\t\t}\r\n\r\n\t\tKeyBoardManager._addEvent=function(type){\r\n\t\t\tBrowser.document.addEventListener(type,function(e){\r\n\t\t\t\tlaya.events.KeyBoardManager._dispatch(e,type);\r\n\t\t\t},true);\r\n\t\t}\r\n\r\n\t\tKeyBoardManager._dispatch=function(e,type){\r\n\t\t\tif (!KeyBoardManager.enabled)return;\r\n\t\t\tKeyBoardManager._event._stoped=false;\r\n\t\t\tKeyBoardManager._event.nativeEvent=e;\r\n\t\t\tKeyBoardManager._event.keyCode=e.keyCode || e.which || e.charCode;\r\n\t\t\tif (type===\"keydown\")KeyBoardManager._pressKeys[KeyBoardManager._event.keyCode]=true;\r\n\t\t\telse if (type===\"keyup\")KeyBoardManager._pressKeys[KeyBoardManager._event.keyCode]=null;\r\n\t\t\tvar target=(Laya.stage.focus && (Laya.stage.focus.event !=null))? Laya.stage.focus :Laya.stage;\r\n\t\t\tvar ct=target;\r\n\t\t\twhile (ct){\r\n\t\t\t\tct.event(type,KeyBoardManager._event.setTo(type,ct,target));\r\n\t\t\t\tct=ct.parent;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tKeyBoardManager.hasKeyDown=function(key){\r\n\t\t\treturn KeyBoardManager._pressKeys[key];\r\n\t\t}\r\n\r\n\t\tKeyBoardManager._pressKeys={};\r\n\t\tKeyBoardManager.enabled=true;\r\n\t\t__static(KeyBoardManager,\r\n\t\t['_event',function(){return this._event=new Event();}\r\n\t\t]);\r\n\t\treturn KeyBoardManager;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*<code>MouseManager</code> 是鼠标、触摸交互管理器。\r\n\t*/\r\n\t//class laya.events.MouseManager\r\n\tvar MouseManager=(function(){\r\n\t\tfunction MouseManager(){\r\n\t\t\tthis.mouseX=0;\r\n\t\t\tthis.mouseY=0;\r\n\t\t\tthis.disableMouseEvent=false;\r\n\t\t\tthis.mouseDownTime=0;\r\n\t\t\tthis.mouseMoveAccuracy=2;\r\n\t\t\tthis._stage=null;\r\n\t\t\tthis._target=null;\r\n\t\t\tthis._lastOvers=[];\r\n\t\t\tthis._currOvers=[];\r\n\t\t\tthis._lastClickTimer=0;\r\n\t\t\tthis._lastMoveTimer=0;\r\n\t\t\tthis._isDoubleClick=false;\r\n\t\t\tthis._isLeftMouse=false;\r\n\t\t\tthis._eventList=[];\r\n\t\t\tthis._touchIDs={};\r\n\t\t\tthis._id=1;\r\n\t\t\tthis._event=new Event();\r\n\t\t\tthis._matrix=new Matrix();\r\n\t\t\tthis._point=new Point();\r\n\t\t\tthis._rect=new Rectangle();\r\n\t\t\tthis._prePoint=new Point();\r\n\t\t}\r\n\r\n\t\t__class(MouseManager,'laya.events.MouseManager');\r\n\t\tvar __proto=MouseManager.prototype;\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*初始化。\r\n\t\t*/\r\n\t\t__proto.__init__=function(stage,canvas){\r\n\t\t\tvar _$this=this;\r\n\t\t\tthis._stage=stage;\r\n\t\t\tvar _this=this;\r\n\t\t\tvar list=this._eventList;\r\n\t\t\tcanvas.oncontextmenu=function (e){\r\n\t\t\t\tif (MouseManager.enabled)return false;\r\n\t\t\t}\r\n\t\t\tcanvas.addEventListener('mousedown',function(e){\r\n\t\t\t\tif (MouseManager.enabled){\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\tlist.push(e);\r\n\t\t\t\t\t_this.mouseDownTime=Browser.now();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tcanvas.addEventListener('mouseup',function(e){\r\n\t\t\t\tif (MouseManager.enabled){\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\tlist.push(e);\r\n\t\t\t\t\t_this.mouseDownTime=-Browser.now();\r\n\t\t\t\t}\r\n\t\t\t},true);\r\n\t\t\tcanvas.addEventListener('mousemove',function(e){\r\n\t\t\t\tif (MouseManager.enabled){\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\tvar now=Browser.now();\r\n\t\t\t\t\tif (now-_this._lastMoveTimer < 10)return;\r\n\t\t\t\t\t_this._lastMoveTimer=now;\r\n\t\t\t\t\tlist.push(e);\r\n\t\t\t\t}\r\n\t\t\t},true);\r\n\t\t\tcanvas.addEventListener(\"mouseout\",function(e){\r\n\t\t\t\tif (MouseManager.enabled)list.push(e);\r\n\t\t\t})\r\n\t\t\tcanvas.addEventListener(\"mouseover\",function(e){\r\n\t\t\t\tif (MouseManager.enabled)list.push(e);\r\n\t\t\t})\r\n\t\t\tcanvas.addEventListener(\"touchstart\",function(e){\r\n\t\t\t\tif (MouseManager.enabled){\r\n\t\t\t\t\tlist.push(e);\r\n\t\t\t\t\t_$this.runEvent();\r\n\t\t\t\t\tif (!Input.isInputting)e.preventDefault();\r\n\t\t\t\t\t_this.mouseDownTime=Browser.now();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tcanvas.addEventListener(\"touchend\",function(e){\r\n\t\t\t\tif (MouseManager.enabled){\r\n\t\t\t\t\tif (!Input.isInputting)e.preventDefault();\r\n\t\t\t\t\tlist.push(e);\r\n\t\t\t\t\t_this.mouseDownTime=-Browser.now();\r\n\t\t\t\t}\r\n\t\t\t},true);\r\n\t\t\tcanvas.addEventListener(\"touchmove\",function(e){\r\n\t\t\t\tif (MouseManager.enabled){\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\tlist.push(e);\r\n\t\t\t\t}\r\n\t\t\t},true);\r\n\t\t\tcanvas.addEventListener('mousewheel',function(e){\r\n\t\t\t\tif (MouseManager.enabled)list.push(e);\r\n\t\t\t});\r\n\t\t\tcanvas.addEventListener('DOMMouseScroll',function(e){\r\n\t\t\t\tif (MouseManager.enabled)list.push(e);\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t__proto.initEvent=function(e,nativeEvent){\r\n\t\t\tvar _this=this;\r\n\t\t\t_this._event._stoped=false;\r\n\t\t\t_this._event.nativeEvent=nativeEvent || e;\r\n\t\t\t_this._target=null;\r\n\t\t\tthis._point.setTo(e.clientX,e.clientY);\r\n\t\t\tthis._stage._canvasTransform.invertTransformPoint(this._point);\r\n\t\t\t_this.mouseX=this._point.x;\r\n\t\t\t_this.mouseY=this._point.y;\r\n\t\t\t_this._event.touchId=e.identifier || 0;\r\n\t\t}\r\n\r\n\t\t__proto.checkMouseWheel=function(e){\r\n\t\t\tthis._event.delta=e.wheelDelta ? e.wheelDelta *0.025 :-e.detail;\r\n\t\t\tfor (var i=0,n=this._lastOvers.length;i < n;i++){\r\n\t\t\t\tvar ele=this._lastOvers[i];\r\n\t\t\t\tele.event(\"mousewheel\",this._event.setTo(\"mousewheel\",ele,this._target));\r\n\t\t\t}\r\n\t\t\tthis._stage.event(\"mousewheel\",this._event.setTo(\"mousewheel\",this._stage,this._target));\r\n\t\t}\r\n\r\n\t\t__proto.checkMouseOut=function(){\r\n\t\t\tif (this.disableMouseEvent)return;\r\n\t\t\tfor (var i=0,n=this._lastOvers.length;i < n;i++){\r\n\t\t\t\tvar ele=this._lastOvers[i];\r\n\t\t\t\tif (!ele.destroyed && this._currOvers.indexOf(ele)< 0){\r\n\t\t\t\t\tele._set$P(\"$_MOUSEOVER\",false);\r\n\t\t\t\t\tele.event(\"mouseout\",this._event.setTo(\"mouseout\",ele,ele));\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\tvar temp=this._lastOvers;\r\n\t\t\tthis._lastOvers=this._currOvers;\r\n\t\t\tthis._currOvers=temp;\r\n\t\t\tthis._currOvers.length=0;\r\n\t\t}\r\n\r\n\t\t__proto.onMouseMove=function(ele){\r\n\t\t\tthis.sendMouseMove(ele);\r\n\t\t\tthis._event._stoped=false;\r\n\t\t\tthis.sendMouseOver(this._target);\r\n\t\t}\r\n\r\n\t\t__proto.sendMouseMove=function(ele){\r\n\t\t\tele.event(\"mousemove\",this._event.setTo(\"mousemove\",ele,this._target));\r\n\t\t\t!this._event._stoped && ele.parent && this.sendMouseMove(ele.parent);\r\n\t\t}\r\n\r\n\t\t__proto.sendMouseOver=function(ele){\r\n\t\t\tif (ele.parent || ele===this._stage){\r\n\t\t\t\tif (!ele._get$P(\"$_MOUSEOVER\")){\r\n\t\t\t\t\tele._set$P(\"$_MOUSEOVER\",true);\r\n\t\t\t\t\tele.event(\"mouseover\",this._event.setTo(\"mouseover\",ele,this._target));\r\n\t\t\t\t}\r\n\t\t\t\tthis._currOvers.push(ele);\r\n\t\t\t}\r\n\t\t\t!this._event._stoped && ele.parent && this.sendMouseOver(ele.parent);\r\n\t\t}\r\n\r\n\t\t__proto.onMouseDown=function(ele){\r\n\t\t\tif (Input.isInputting && Laya.stage.focus && Laya.stage.focus[\"focus\"] && !Laya.stage.focus.contains(this._target)){\r\n\t\t\t\tLaya.stage.focus[\"focus\"]=false;\r\n\t\t\t}\r\n\t\t\tthis._onMouseDown(ele);\r\n\t\t}\r\n\r\n\t\t__proto._onMouseDown=function(ele){\r\n\t\t\tif (this._isLeftMouse){\r\n\t\t\t\tele._set$P(\"$_MOUSEDOWN\",this._touchIDs[this._event.touchId]);\r\n\t\t\t\tele.event(\"mousedown\",this._event.setTo(\"mousedown\",ele,this._target));\r\n\t\t\t\t}else {\r\n\t\t\t\tele._set$P(\"$_RIGHTMOUSEDOWN\",this._touchIDs[this._event.touchId]);\r\n\t\t\t\tele.event(\"rightmousedown\",this._event.setTo(\"rightmousedown\",ele,this._target));\r\n\t\t\t}\r\n\t\t\t!this._event._stoped && ele.parent && this.onMouseDown(ele.parent);\r\n\t\t}\r\n\r\n\t\t__proto.onMouseUp=function(ele){\r\n\t\t\tvar type=this._isLeftMouse ? \"mouseup\" :\"rightmouseup\";\r\n\t\t\tthis.sendMouseUp(ele,type);\r\n\t\t\tthis._event._stoped=false;\r\n\t\t\tthis.sendClick(this._target,type);\r\n\t\t}\r\n\r\n\t\t__proto.sendMouseUp=function(ele,type){\r\n\t\t\tele.event(type,this._event.setTo(type,ele,this._target));\r\n\t\t\t!this._event._stoped && ele.parent && this.sendMouseUp(ele.parent,type);\r\n\t\t}\r\n\r\n\t\t__proto.sendClick=function(ele,type){\r\n\t\t\tif (ele.destroyed)return;\r\n\t\t\tif (type===\"mouseup\" && ele._get$P(\"$_MOUSEDOWN\")===this._touchIDs[this._event.touchId]){\r\n\t\t\t\tele._set$P(\"$_MOUSEDOWN\",-1);\r\n\t\t\t\tele.event(\"click\",this._event.setTo(\"click\",ele,this._target));\r\n\t\t\t\tthis._isDoubleClick && ele.event(\"doubleclick\",this._event.setTo(\"doubleclick\",ele,this._target));\r\n\t\t\t\t}else if (type===\"rightmouseup\" && ele._get$P(\"$_RIGHTMOUSEDOWN\")===this._touchIDs[this._event.touchId]){\r\n\t\t\t\tele._set$P(\"$_RIGHTMOUSEDOWN\",-1);\r\n\t\t\t\tele.event(\"rightclick\",this._event.setTo(\"rightclick\",ele,this._target));\r\n\t\t\t}\r\n\t\t\t!this._event._stoped && ele.parent && this.sendClick(ele.parent,type);\r\n\t\t}\r\n\r\n\t\t__proto.check=function(sp,mouseX,mouseY,callBack){\r\n\t\t\tvar transform=sp.transform || this._matrix;\r\n\t\t\tvar pivotX=sp.pivotX;\r\n\t\t\tvar pivotY=sp.pivotY;\r\n\t\t\tif (pivotX===0 && pivotY===0){\r\n\t\t\t\ttransform.setTranslate(sp.x,sp.y);\r\n\t\t\t\t}else {\r\n\t\t\t\tif (transform===this._matrix){\r\n\t\t\t\t\ttransform.setTranslate(sp.x-pivotX,sp.y-pivotY);\r\n\t\t\t\t\t}else {\r\n\t\t\t\t\tvar cos=transform.cos;\r\n\t\t\t\t\tvar sin=transform.sin;\r\n\t\t\t\t\ttransform.setTranslate(sp.x-(pivotX *cos-pivotY *sin)*sp.scaleX,sp.y-(pivotX *sin+pivotY *cos)*sp.scaleY);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\ttransform.invertTransformPoint(this._point.setTo(mouseX,mouseY));\r\n\t\t\ttransform.setTranslate(0,0);\r\n\t\t\tmouseX=this._point.x;\r\n\t\t\tmouseY=this._point.y;\r\n\t\t\tvar scrollRect=sp.scrollRect;\r\n\t\t\tif (scrollRect){\r\n\t\t\t\tthis._rect.setTo(0,0,scrollRect.width,scrollRect.height);\r\n\t\t\t\tvar isHit=this._rect.contains(mouseX,mouseY);\r\n\t\t\t\tif (!isHit)return false;\r\n\t\t\t}\r\n\t\t\tif (!this.disableMouseEvent){\r\n\t\t\t\tvar flag=false;\r\n\t\t\t\tif (sp.hitTestPrior && !sp.mouseThrough && !this.hitTest(sp,mouseX,mouseY)){\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tfor (var i=sp._childs.length-1;i >-1;i--){\r\n\t\t\t\t\tvar child=sp._childs[i];\r\n\t\t\t\t\tif (!child.destroyed && child.mouseEnabled && child.visible){\r\n\t\t\t\t\t\tflag=this.check(child,mouseX+(scrollRect ? scrollRect.x :0),mouseY+(scrollRect ? scrollRect.y :0),callBack);\r\n\t\t\t\t\t\tif (flag)return true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tisHit=this.hitTest(sp,mouseX,mouseY);\r\n\t\t\tif (isHit){\r\n\t\t\t\tthis._target=sp;\r\n\t\t\t\tcallBack.call(this,sp);\r\n\t\t\t\t}else if (callBack===this.onMouseUp && sp===this._stage){\r\n\t\t\t\tthis._target=this._stage;\r\n\t\t\t\tcallBack.call(this,this._target);\r\n\t\t\t}\r\n\t\t\treturn isHit;\r\n\t\t}\r\n\r\n\t\t__proto.hitTest=function(sp,mouseX,mouseY){\r\n\t\t\tvar isHit=false;\r\n\t\t\tif ((sp.hitArea instanceof laya.utils.HitArea )){\r\n\t\t\t\treturn sp.hitArea.isHit(mouseX,mouseY);\r\n\t\t\t}\r\n\t\t\tif (sp.width > 0 && sp.height > 0 || sp.mouseThrough || sp.hitArea){\r\n\t\t\t\tvar hitRect=this._rect;\r\n\t\t\t\tif (!sp.mouseThrough){\r\n\t\t\t\t\tif (sp.hitArea)hitRect=sp.hitArea;\r\n\t\t\t\t\telse hitRect.setTo(0,0,sp.width,sp.height);\r\n\t\t\t\t\tisHit=hitRect.contains(mouseX,mouseY);\r\n\t\t\t\t\t}else {\r\n\t\t\t\t\tisHit=sp.getGraphicBounds().contains(mouseX,mouseY);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn isHit;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*执行事件处理。\r\n\t\t*/\r\n\t\t__proto.runEvent=function(){\r\n\t\t\tvar len=this._eventList.length;\r\n\t\t\tif (!len)return;\r\n\t\t\tvar _this=this;\r\n\t\t\tvar i=0;\r\n\t\t\twhile (i < len){\r\n\t\t\t\tvar evt=this._eventList[i];\r\n\t\t\t\tif (evt.type!=='mousemove')this._prePoint.x=this._prePoint.y=-1000000;\r\n\t\t\t\tswitch (evt.type){\r\n\t\t\t\t\tcase 'mousedown':\r\n\t\t\t\t\t\tthis._touchIDs[0]=this._id++;\r\n\t\t\t\t\t\tif (!MouseManager._isTouchRespond){\r\n\t\t\t\t\t\t\t_this._isLeftMouse=evt.button===0;\r\n\t\t\t\t\t\t\t_this.initEvent(evt);\r\n\t\t\t\t\t\t\t_this.check(_this._stage,_this.mouseX,_this.mouseY,_this.onMouseDown);\r\n\t\t\t\t\t\t}else\r\n\t\t\t\t\t\tMouseManager._isTouchRespond=false;\r\n\t\t\t\t\t\tbreak ;\r\n\t\t\t\t\tcase 'mouseup':\r\n\t\t\t\t\t\t_this._isLeftMouse=evt.button===0;\r\n\t\t\t\t\t\tvar now=Browser.now();\r\n\t\t\t\t\t\t_this._isDoubleClick=(now-_this._lastClickTimer)< 300;\r\n\t\t\t\t\t\t_this._lastClickTimer=now;\r\n\t\t\t\t\t\t_this.initEvent(evt);\r\n\t\t\t\t\t\t_this.check(_this._stage,_this.mouseX,_this.mouseY,_this.onMouseUp);\r\n\t\t\t\t\t\tbreak ;\r\n\t\t\t\t\tcase 'mousemove':\r\n\t\t\t\t\t\tif ((Math.abs(this._prePoint.x-evt.clientX)+Math.abs(this._prePoint.y-evt.clientY))>=this.mouseMoveAccuracy){\r\n\t\t\t\t\t\t\tthis._prePoint.x=evt.clientX;\r\n\t\t\t\t\t\t\tthis._prePoint.y=evt.clientY;\r\n\t\t\t\t\t\t\t_this.initEvent(evt);\r\n\t\t\t\t\t\t\t_this.check(_this._stage,_this.mouseX,_this.mouseY,_this.onMouseMove);\r\n\t\t\t\t\t\t\t_this.checkMouseOut();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak ;\r\n\t\t\t\t\tcase \"touchstart\":\r\n\t\t\t\t\t\tMouseManager._isTouchRespond=true;\r\n\t\t\t\t\t\t_this._isLeftMouse=true;\r\n\t\t\t\t\t\tvar touches=evt.changedTouches;\r\n\t\t\t\t\t\tfor (var j=0,n=touches.length;j < n;j++){\r\n\t\t\t\t\t\t\tvar touch=touches[j];\r\n\t\t\t\t\t\t\tif (this._id % 200===0)this._touchIDs={};\r\n\t\t\t\t\t\t\tthis._touchIDs[touch.identifier]=this._id++;\r\n\t\t\t\t\t\t\t_this.initEvent(touch,evt);\r\n\t\t\t\t\t\t\t_this.check(_this._stage,_this.mouseX,_this.mouseY,_this.onMouseDown);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak ;\r\n\t\t\t\t\tcase \"touchend\":\r\n\t\t\t\t\t\tMouseManager._isTouchRespond=true;\r\n\t\t\t\t\t\t_this._isLeftMouse=true;\r\n\t\t\t\t\t\tnow=Browser.now();\r\n\t\t\t\t\t\t_this._isDoubleClick=(now-_this._lastClickTimer)< 300;\r\n\t\t\t\t\t\t_this._lastClickTimer=now;\r\n\t\t\t\t\t\tvar touchends=evt.changedTouches;\r\n\t\t\t\t\t\tfor (j=0,n=touchends.length;j < n;j++){\r\n\t\t\t\t\t\t\t_this.initEvent(touchends[j],evt);\r\n\t\t\t\t\t\t\t_this.check(_this._stage,_this.mouseX,_this.mouseY,_this.onMouseUp);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak ;\r\n\t\t\t\t\tcase \"touchmove\":;\r\n\t\t\t\t\t\tvar touchemoves=evt.changedTouches;\r\n\t\t\t\t\t\tfor (j=0,n=touchemoves.length;j < n;j++){\r\n\t\t\t\t\t\t\t_this.initEvent(touchemoves[j],evt);\r\n\t\t\t\t\t\t\t_this.check(_this._stage,_this.mouseX,_this.mouseY,_this.onMouseMove);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t_this.checkMouseOut();\r\n\t\t\t\t\t\tbreak ;\r\n\t\t\t\t\tcase \"wheel\":\r\n\t\t\t\t\tcase \"mousewheel\":\r\n\t\t\t\t\tcase \"DOMMouseScroll\":\r\n\t\t\t\t\t\t_this.checkMouseWheel(evt);\r\n\t\t\t\t\t\tbreak ;\r\n\t\t\t\t\tcase \"mouseout\":\r\n\t\t\t\t\t\t_this._stage.event(\"mouseout\",_this._event.setTo(\"mouseout\",_this._stage,_this._stage));\r\n\t\t\t\t\t\tbreak ;\r\n\t\t\t\t\tcase \"mouseover\":\r\n\t\t\t\t\t\t_this._stage.event(\"mouseover\",_this._event.setTo(\"mouseover\",_this._stage,_this._stage));\r\n\t\t\t\t\t\tbreak ;\r\n\t\t\t\t\t}\r\n\t\t\t\ti++;\r\n\t\t\t}\r\n\t\t\tthis._eventList.length=0;\r\n\t\t}\r\n\r\n\t\tMouseManager.enabled=true;\r\n\t\tMouseManager._isTouchRespond=false;\r\n\t\t__static(MouseManager,\r\n\t\t['instance',function(){return this.instance=new MouseManager();}\r\n\t\t]);\r\n\t\treturn MouseManager;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*<code>Filter</code> 是滤镜基类。\r\n\t*/\r\n\t//class laya.filters.Filter\r\n\tvar Filter=(function(){\r\n\t\tfunction Filter(){\r\n\t\t\tthis._action=null;\r\n\t\t}\r\n\r\n\t\t__class(Filter,'laya.filters.Filter');\r\n\t\tvar __proto=Filter.prototype;\r\n\t\tLaya.imps(__proto,{\"laya.filters.IFilter\":true})\r\n\t\t/**@private */\r\n\t\t__proto.callNative=function(sp){}\r\n\t\t/**@private 滤镜动作。*/\r\n\t\t__getset(0,__proto,'action',function(){return this._action });\r\n\t\t/**@private 滤镜类型。*/\r\n\t\t__getset(0,__proto,'type',function(){return-1});\r\n\t\tFilter.BLUR=0x10;\r\n\t\tFilter.COLOR=0x20;\r\n\t\tFilter.GLOW=0x08;\r\n\t\tFilter._filterStart=null\r\n\t\tFilter._filterEnd=null\r\n\t\tFilter._EndTarget=null\r\n\t\tFilter._recycleScope=null\r\n\t\tFilter._filter=null\r\n\t\tFilter._useSrc=null\r\n\t\tFilter._endSrc=null\r\n\t\tFilter._useOut=null\r\n\t\tFilter._endOut=null\r\n\t\treturn Filter;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*<code>ColorFilterAction</code> 是一个颜色滤镜应用类。\r\n\t*/\r\n\t//class laya.filters.ColorFilterAction\r\n\tvar ColorFilterAction=(function(){\r\n\t\tfunction ColorFilterAction(){\r\n\t\t\tthis.data=null;\r\n\t\t}\r\n\r\n\t\t__class(ColorFilterAction,'laya.filters.ColorFilterAction');\r\n\t\tvar __proto=ColorFilterAction.prototype;\r\n\t\tLaya.imps(__proto,{\"laya.filters.IFilterAction\":true})\r\n\t\t/**\r\n\t\t*给指定的对象应用颜色滤镜。\r\n\t\t*@param srcCanvas 需要应用画布对象。\r\n\t\t*@return 应用了滤镜后的画布对象。\r\n\t\t*/\r\n\t\t__proto.apply=function(srcCanvas){\r\n\t\t\tvar ctx=srcCanvas.ctx.ctx;\r\n\t\t\tvar canvas=srcCanvas.ctx.ctx.canvas;\r\n\t\t\tif (canvas.width==0 || canvas.height==0)return canvas;\r\n\t\t\tvar imgdata=ctx.getImageData(0,0,canvas.width,canvas.height);\r\n\t\t\tvar data=imgdata.data;\r\n\t\t\tvar nData;\r\n\t\t\tfor (var i=0,n=data.length;i < n;i+=4){\r\n\t\t\t\tnData=this.getColor(data[i],data[i+1],data[i+2],data[i+3]);\r\n\t\t\t\tif (data[i+3]==0)continue ;\r\n\t\t\t\tdata[i]=nData[0];\r\n\t\t\t\tdata[i+1]=nData[1];\r\n\t\t\t\tdata[i+2]=nData[2];\r\n\t\t\t\tdata[i+3]=nData[3];\r\n\t\t\t}\r\n\t\t\tctx.putImageData(imgdata,0,0);\r\n\t\t\treturn srcCanvas;\r\n\t\t}\r\n\r\n\t\t__proto.getColor=function(red,green,blue,alpha){\r\n\t\t\tvar rst=[];\r\n\t\t\tif (this.data._mat && this.data._alpha){\r\n\t\t\t\tvar mat=this.data._mat;\r\n\t\t\t\tvar tempAlpha=this.data._alpha;\r\n\t\t\t\trst[0]=mat[0] *red+mat[1] *green+mat[2] *blue+mat[3] *alpha+tempAlpha[0];\r\n\t\t\t\trst[1]=mat[4] *red+mat[5] *green+mat[6] *blue+mat[7] *alpha+tempAlpha[1];\r\n\t\t\t\trst[2]=mat[8] *red+mat[9] *green+mat[10] *blue+mat[11] *alpha+tempAlpha[2];\r\n\t\t\t\trst[3]=mat[12] *red+mat[13] *green+mat[14] *blue+mat[15] *alpha+tempAlpha[3];\r\n\t\t\t}\r\n\t\t\treturn rst;\r\n\t\t}\r\n\r\n\t\treturn ColorFilterAction;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*默认的FILTER,什么都不做\r\n\t*@private\r\n\t*/\r\n\t//class laya.filters.FilterAction\r\n\tvar FilterAction=(function(){\r\n\t\tfunction FilterAction(){\r\n\t\t\tthis.data=null;\r\n\t\t}\r\n\r\n\t\t__class(FilterAction,'laya.filters.FilterAction');\r\n\t\tvar __proto=FilterAction.prototype;\r\n\t\tLaya.imps(__proto,{\"laya.filters.IFilterAction\":true})\r\n\t\t__proto.apply=function(data){\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\treturn FilterAction;\r\n\t})()\r\n\r\n\r\n\t//class laya.filters.webgl.FilterActionGL\r\n\tvar FilterActionGL=(function(){\r\n\t\tfunction FilterActionGL(){}\r\n\t\t__class(FilterActionGL,'laya.filters.webgl.FilterActionGL');\r\n\t\tvar __proto=FilterActionGL.prototype;\r\n\t\tLaya.imps(__proto,{\"laya.filters.IFilterActionGL\":true})\r\n\t\t__proto.setValue=function(shader){}\r\n\t\t__proto.setValueMix=function(shader){}\r\n\t\t__proto.apply3d=function(scope,sprite,context,x,y){return null;}\r\n\t\t__proto.apply=function(srcCanvas){return null;}\r\n\t\t__getset(0,__proto,'typeMix',function(){\r\n\t\t\treturn 0;\r\n\t\t});\r\n\r\n\t\treturn FilterActionGL;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*@private\r\n\t*/\r\n\t//class laya.filters.WebGLFilter\r\n\tvar WebGLFilter=(function(){\r\n\t\tfunction WebGLFilter(){};\r\n\t\t__class(WebGLFilter,'laya.filters.WebGLFilter');\r\n\t\tWebGLFilter.enable=function(){\r\n\t\t\tif (WebGLFilter.isInit)return;\r\n\t\t\tWebGLFilter.isInit=true;\r\n\t\t\tif (!Render.isWebGL)return;\r\n\t\t\tRunDriver.createFilterAction=function (type){\r\n\t\t\t\tvar action;\r\n\t\t\t\tswitch (type){\r\n\t\t\t\t\tcase 0x20:\r\n\t\t\t\t\t\taction=new ColorFilterActionGL();\r\n\t\t\t\t\t\tbreak ;\r\n\t\t\t\t\tcase 0x10:\r\n\t\t\t\t\t\taction=new BlurFilterActionGL();\r\n\t\t\t\t\t\tbreak ;\r\n\t\t\t\t\tcase 0x08:\r\n\t\t\t\t\t\taction=new GlowFilterActionGL();\r\n\t\t\t\t\t\tbreak ;\r\n\t\t\t\t\t}\r\n\t\t\t\treturn action;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tWebGLFilter.isInit=false;\r\n\t\tWebGLFilter.__init$=function(){\r\n\t\t\tBlurFilterActionGL;\r\n\t\t\tColorFilterActionGL;\r\n\t\t\tGlowFilterActionGL;\r\n\t\t\tRender;\r\n\t\t\tRunDriver;{\r\n\t\t\t\tRunDriver.createFilterAction=function (type){\r\n\t\t\t\t\tvar action;\r\n\t\t\t\t\tswitch (type){\r\n\t\t\t\t\t\tcase 0x10:\r\n\t\t\t\t\t\t\taction=new FilterAction();\r\n\t\t\t\t\t\t\tbreak ;\r\n\t\t\t\t\t\tcase 0x08:\r\n\t\t\t\t\t\t\taction=new FilterAction();\r\n\t\t\t\t\t\t\tbreak ;\r\n\t\t\t\t\t\tcase 0x20:\r\n\t\t\t\t\t\t\taction=new ColorFilterAction();\r\n\t\t\t\t\t\t\tbreak ;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\treturn action;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn WebGLFilter;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*@private\r\n\t*/\r\n\t//class laya.maths.Arith\r\n\tvar Arith=(function(){\r\n\t\tfunction Arith(){};\r\n\t\t__class(Arith,'laya.maths.Arith');\r\n\t\tArith.formatR=function(r){\r\n\t\t\tif (r > Math.PI)r-=Math.PI *2;\r\n\t\t\tif (r <-Math.PI)r+=Math.PI *2;\r\n\t\t\treturn r;\r\n\t\t}\r\n\r\n\t\tArith.isPOT=function(w,h){\r\n\t\t\treturn (w > 0 && (w & (w-1))===0 && h > 0 && (h & (h-1))===0);\r\n\t\t}\r\n\r\n\t\tArith.setMatToArray=function(mat,array){\r\n\t\t\tmat.a,mat.b,0,0,mat.c,mat.d,0,0,0,0,1,0,mat.tx+20,mat.ty+20,0,1\r\n\t\t\tarray[0]=mat.a;\r\n\t\t\tarray[1]=mat.b;\r\n\t\t\tarray[4]=mat.c;\r\n\t\t\tarray[5]=mat.d;\r\n\t\t\tarray[12]=mat.tx;\r\n\t\t\tarray[13]=mat.ty;\r\n\t\t}\r\n\r\n\t\treturn Arith;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*@private\r\n\t*计算贝塞尔曲线的工具类。\r\n\t*/\r\n\t//class laya.maths.Bezier\r\n\tvar Bezier=(function(){\r\n\t\tfunction Bezier(){\r\n\t\t\tthis._controlPoints=[new Point(),new Point(),new Point()];\r\n\t\t\tthis._calFun=this.getPoint2;\r\n\t\t}\r\n\r\n\t\t__class(Bezier,'laya.maths.Bezier');\r\n\t\tvar __proto=Bezier.prototype;\r\n\t\t/**@private */\r\n\t\t__proto._switchPoint=function(x,y){\r\n\t\t\tvar tPoint=this._controlPoints.shift();\r\n\t\t\ttPoint.setTo(x,y);\r\n\t\t\tthis._controlPoints.push(tPoint);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*计算二次贝塞尔点。\r\n\t\t*@param t\r\n\t\t*@param rst\r\n\t\t*\r\n\t\t*/\r\n\t\t__proto.getPoint2=function(t,rst){\r\n\t\t\tvar p1=this._controlPoints[0];\r\n\t\t\tvar p2=this._controlPoints[1];\r\n\t\t\tvar p3=this._controlPoints[2];\r\n\t\t\tvar lineX=Math.pow((1-t),2)*p1.x+2 *t *(1-t)*p2.x+Math.pow(t,2)*p3.x;\r\n\t\t\tvar lineY=Math.pow((1-t),2)*p1.y+2 *t *(1-t)*p2.y+Math.pow(t,2)*p3.y;\r\n\t\t\trst.push(lineX,lineY);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*计算三次贝塞尔点\r\n\t\t*@param t\r\n\t\t*@param rst\r\n\t\t*\r\n\t\t*/\r\n\t\t__proto.getPoint3=function(t,rst){\r\n\t\t\tvar p1=this._controlPoints[0];\r\n\t\t\tvar p2=this._controlPoints[1];\r\n\t\t\tvar p3=this._controlPoints[2];\r\n\t\t\tvar p4=this._controlPoints[3];\r\n\t\t\tvar lineX=Math.pow((1-t),3)*p1.x+3 *p2.x *t *(1-t)*(1-t)+3 *p3.x *t *t *(1-t)+p4.x *Math.pow(t,3);\r\n\t\t\tvar lineY=Math.pow((1-t),3)*p1.y+3 *p2.y *t *(1-t)*(1-t)+3 *p3.y *t *t *(1-t)+p4.y *Math.pow(t,3);\r\n\t\t\trst.push(lineX,lineY);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*计算贝塞尔点序列\r\n\t\t*@param count\r\n\t\t*@param rst\r\n\t\t*\r\n\t\t*/\r\n\t\t__proto.insertPoints=function(count,rst){\r\n\t\t\tvar i=NaN;\r\n\t\t\tcount=count > 0 ? count :5;\r\n\t\t\tvar dLen=NaN;\r\n\t\t\tdLen=1 / count;\r\n\t\t\tfor (i=0;i <=1;i+=dLen){\r\n\t\t\t\tthis._calFun(i,rst);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*获取贝塞尔曲线上的点。\r\n\t\t*@param pList 控制点[x0,y0,x1,y1...]\r\n\t\t*@param inSertCount 每次曲线的插值数量\r\n\t\t*@return\r\n\t\t*\r\n\t\t*/\r\n\t\t__proto.getBezierPoints=function(pList,inSertCount,count){\r\n\t\t\t(inSertCount===void 0)&& (inSertCount=5);\r\n\t\t\t(count===void 0)&& (count=2);\r\n\t\t\tvar i=0,len=0;\r\n\t\t\tlen=pList.length;\r\n\t\t\tif (len < (count+1)*2)return [];\r\n\t\t\tvar rst;\r\n\t\t\trst=[];\r\n\t\t\tswitch (count){\r\n\t\t\t\tcase 2:\r\n\t\t\t\t\tthis._calFun=this.getPoint2;\r\n\t\t\t\t\tbreak ;\r\n\t\t\t\tcase 3:\r\n\t\t\t\t\tthis._calFun=this.getPoint3;\r\n\t\t\t\t\tbreak ;\r\n\t\t\t\tdefault :\r\n\t\t\t\t\treturn [];\r\n\t\t\t\t}\r\n\t\t\twhile(this._controlPoints.length<=count){\r\n\t\t\t\tthis._controlPoints.push(new Point());\r\n\t\t\t}\r\n\t\t\tfor (i=0;i < count *2;i+=2){\r\n\t\t\t\tthis._switchPoint(pList[i],pList[i+1]);\r\n\t\t\t}\r\n\t\t\tfor (i=count *2;i < len;i+=2){\r\n\t\t\t\tthis._switchPoint(pList[i],pList[i+1]);\r\n\t\t\t\tif ((i / 2)% count==0)\r\n\t\t\t\t\tthis.insertPoints(inSertCount,rst);\r\n\t\t\t}\r\n\t\t\treturn rst;\r\n\t\t}\r\n\r\n\t\t__static(Bezier,\r\n\t\t['I',function(){return this.I=new Bezier();}\r\n\t\t]);\r\n\t\treturn Bezier;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*@private\r\n\t*凸包算法。\r\n\t*/\r\n\t//class laya.maths.GrahamScan\r\n\tvar GrahamScan=(function(){\r\n\t\tfunction GrahamScan(){};\r\n\t\t__class(GrahamScan,'laya.maths.GrahamScan');\r\n\t\tGrahamScan.multiply=function(p1,p2,p0){\r\n\t\t\treturn ((p1.x-p0.x)*(p2.y-p0.y)-(p2.x-p0.x)*(p1.y-p0.y));\r\n\t\t}\r\n\r\n\t\tGrahamScan.dis=function(p1,p2){\r\n\t\t\treturn (p1.x-p2.x)*(p1.x-p2.x)+(p1.y-p2.y)*(p1.y-p2.y);\r\n\t\t}\r\n\r\n\t\tGrahamScan._getPoints=function(count,tempUse,rst){\r\n\t\t\t(tempUse===void 0)&& (tempUse=false);\r\n\t\t\tif (!GrahamScan._mPointList)GrahamScan._mPointList=[];\r\n\t\t\twhile (GrahamScan._mPointList.length < count)GrahamScan._mPointList.push(new Point());\r\n\t\t\tif (!rst)rst=[];\r\n\t\t\trst.length=0;\r\n\t\t\tif (tempUse){\r\n\t\t\t\tGrahamScan.getFrom(rst,GrahamScan._mPointList,count);\r\n\t\t\t\t}else {\r\n\t\t\t\tGrahamScan.getFromR(rst,GrahamScan._mPointList,count);\r\n\t\t\t}\r\n\t\t\treturn rst;\r\n\t\t}\r\n\r\n\t\tGrahamScan.getFrom=function(rst,src,count){\r\n\t\t\tvar i=0;\r\n\t\t\tfor (i=0;i < count;i++){\r\n\t\t\t\trst.push(src[i]);\r\n\t\t\t}\r\n\t\t\treturn rst;\r\n\t\t}\r\n\r\n\t\tGrahamScan.getFromR=function(rst,src,count){\r\n\t\t\tvar i=0;\r\n\t\t\tfor (i=0;i < count;i++){\r\n\t\t\t\trst.push(src.pop());\r\n\t\t\t}\r\n\t\t\treturn rst;\r\n\t\t}\r\n\r\n\t\tGrahamScan.pListToPointList=function(pList,tempUse){\r\n\t\t\t(tempUse===void 0)&& (tempUse=false);\r\n\t\t\tvar i=0,len=pList.length / 2,rst=GrahamScan._getPoints(len,tempUse,GrahamScan._tempPointList);\r\n\t\t\tfor (i=0;i < len;i++){\r\n\t\t\t\trst[i].setTo(pList[i+i],pList[i+i+1]);\r\n\t\t\t}\r\n\t\t\treturn rst;\r\n\t\t}\r\n\r\n\t\tGrahamScan.pointListToPlist=function(pointList){\r\n\t\t\tvar i=0,len=pointList.length,rst=GrahamScan._temPList,tPoint;\r\n\t\t\trst.length=0;\r\n\t\t\tfor (i=0;i < len;i++){\r\n\t\t\t\ttPoint=pointList[i];\r\n\t\t\t\trst.push(tPoint.x,tPoint.y);\r\n\t\t\t}\r\n\t\t\treturn rst;\r\n\t\t}\r\n\r\n\t\tGrahamScan.scanPList=function(pList){\r\n\t\t\treturn Utils1.copyArray(pList,GrahamScan.pointListToPlist(GrahamScan.scan(GrahamScan.pListToPointList(pList,true))));\r\n\t\t}\r\n\r\n\t\tGrahamScan.scan=function(PointSet){\r\n\t\t\tvar i=0,j=0,k=0,top=2,tmp,n=PointSet.length,ch;\r\n\t\t\tvar _tmpDic={};\r\n\t\t\tvar key;\r\n\t\t\tch=GrahamScan._temArr;\r\n\t\t\tch.length=0;\r\n\t\t\tn=PointSet.length;\r\n\t\t\tfor (i=n-1;i >=0;i--){\r\n\t\t\t\ttmp=PointSet[i];\r\n\t\t\t\tkey=tmp.x+\"_\"+tmp.y;\r\n\t\t\t\tif (!_tmpDic.hasOwnProperty(key)){\r\n\t\t\t\t\t_tmpDic[key]=true;\r\n\t\t\t\t\tch.push(tmp);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tn=ch.length;\r\n\t\t\tUtils1.copyArray(PointSet,ch);\r\n\t\t\tfor (i=1;i < n;i++)\r\n\t\t\tif ((PointSet[i].y < PointSet[k].y)|| ((PointSet[i].y==PointSet[k].y)&& (PointSet[i].x < PointSet[k].x)))\r\n\t\t\t\tk=i;\r\n\t\t\ttmp=PointSet[0];\r\n\t\t\tPointSet[0]=PointSet[k];\r\n\t\t\tPointSet[k]=tmp;\r\n\t\t\tfor (i=1;i < n-1;i++){\r\n\t\t\t\tk=i;\r\n\t\t\t\tfor (j=i+1;j < n;j++)\r\n\t\t\t\tif ((GrahamScan.multiply(PointSet[j],PointSet[k],PointSet[0])> 0)|| ((GrahamScan.multiply(PointSet[j],PointSet[k],PointSet[0])==0)&& (GrahamScan.dis(PointSet[0],PointSet[j])< GrahamScan.dis(PointSet[0],PointSet[k]))))\r\n\t\t\t\t\tk=j;\r\n\t\t\t\ttmp=PointSet[i];\r\n\t\t\t\tPointSet[i]=PointSet[k];\r\n\t\t\t\tPointSet[k]=tmp;\r\n\t\t\t}\r\n\t\t\tch=GrahamScan._temArr;\r\n\t\t\tch.length=0;\r\n\t\t\tif (PointSet.length < 3){\r\n\t\t\t\treturn Utils1.copyArray(ch,PointSet);\r\n\t\t\t}\r\n\t\t\tch.push(PointSet[0],PointSet[1],PointSet[2]);\r\n\t\t\tfor (i=3;i < n;i++){\r\n\t\t\t\twhile (ch.length >=2 && GrahamScan.multiply(PointSet[i],ch[ch.length-1],ch[ch.length-2])>=0)ch.pop();\r\n\t\t\t\tPointSet[i] && ch.push(PointSet[i]);\r\n\t\t\t}\r\n\t\t\treturn ch;\r\n\t\t}\r\n\r\n\t\tGrahamScan._mPointList=null\r\n\t\tGrahamScan._tempPointList=[];\r\n\t\tGrahamScan._temPList=[];\r\n\t\tGrahamScan._temArr=[];\r\n\t\treturn GrahamScan;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*@private\r\n\t*<code>MathUtil</code> 是一个数据处理工具类。\r\n\t*/\r\n\t//class laya.maths.MathUtil\r\n\tvar MathUtil=(function(){\r\n\t\tfunction MathUtil(){};\r\n\t\t__class(MathUtil,'laya.maths.MathUtil');\r\n\t\tMathUtil.subtractVector3=function(l,r,o){\r\n\t\t\to[0]=l[0]-r[0];\r\n\t\t\to[1]=l[1]-r[1];\r\n\t\t\to[2]=l[2]-r[2];\r\n\t\t}\r\n\r\n\t\tMathUtil.lerp=function(left,right,amount){\r\n\t\t\treturn left *(1-amount)+right *amount;\r\n\t\t}\r\n\r\n\t\tMathUtil.scaleVector3=function(f,b,e){\r\n\t\t\te[0]=f[0] *b;\r\n\t\t\te[1]=f[1] *b;\r\n\t\t\te[2]=f[2] *b;\r\n\t\t}\r\n\r\n\t\tMathUtil.lerpVector3=function(l,r,t,o){\r\n\t\t\tvar ax=l[0],ay=l[1],az=l[2];\r\n\t\t\to[0]=ax+t *(r[0]-ax);\r\n\t\t\to[1]=ay+t *(r[1]-ay);\r\n\t\t\to[2]=az+t *(r[2]-az);\r\n\t\t}\r\n\r\n\t\tMathUtil.lerpVector4=function(l,r,t,o){\r\n\t\t\tvar ax=l[0],ay=l[1],az=l[2],aw=l[3];\r\n\t\t\to[0]=ax+t *(r[0]-ax);\r\n\t\t\to[1]=ay+t *(r[1]-ay);\r\n\t\t\to[2]=az+t *(r[2]-az);\r\n\t\t\to[3]=aw+t *(r[3]-aw);\r\n\t\t}\r\n\r\n\t\tMathUtil.slerpQuaternionArray=function(a,Offset1,b,Offset2,t,out,Offset3){\r\n\t\t\tvar ax=a[Offset1+0],ay=a[Offset1+1],az=a[Offset1+2],aw=a[Offset1+3],bx=b[Offset2+0],by=b[Offset2+1],bz=b[Offset2+2],bw=b[Offset2+3];\r\n\t\t\tvar omega,cosom,sinom,scale0,scale1;\r\n\t\t\tcosom=ax *bx+ay *by+az *bz+aw *bw;\r\n\t\t\tif (cosom < 0.0){\r\n\t\t\t\tcosom=-cosom;\r\n\t\t\t\tbx=-bx;\r\n\t\t\t\tby=-by;\r\n\t\t\t\tbz=-bz;\r\n\t\t\t\tbw=-bw;\r\n\t\t\t}\r\n\t\t\tif ((1.0-cosom)> 0.000001){\r\n\t\t\t\tomega=Math.acos(cosom);\r\n\t\t\t\tsinom=Math.sin(omega);\r\n\t\t\t\tscale0=Math.sin((1.0-t)*omega)/ sinom;\r\n\t\t\t\tscale1=Math.sin(t *omega)/ sinom;\r\n\t\t\t\t}else {\r\n\t\t\t\tscale0=1.0-t;\r\n\t\t\t\tscale1=t;\r\n\t\t\t}\r\n\t\t\tout[Offset3+0]=scale0 *ax+scale1 *bx;\r\n\t\t\tout[Offset3+1]=scale0 *ay+scale1 *by;\r\n\t\t\tout[Offset3+2]=scale0 *az+scale1 *bz;\r\n\t\t\tout[Offset3+3]=scale0 *aw+scale1 *bw;\r\n\t\t\treturn out;\r\n\t\t}\r\n\r\n\t\tMathUtil.getRotation=function(x0,y0,x1,y1){\r\n\t\t\treturn Math.atan2(y1-y0,x1-x0)/ Math.PI *180;\r\n\t\t}\r\n\r\n\t\tMathUtil.sortBigFirst=function(a,b){\r\n\t\t\tif (a==b)\r\n\t\t\t\treturn 0;\r\n\t\t\treturn b > a ? 1 :-1;\r\n\t\t}\r\n\r\n\t\tMathUtil.sortSmallFirst=function(a,b){\r\n\t\t\tif (a==b)\r\n\t\t\t\treturn 0;\r\n\t\t\treturn b > a ?-1 :1;\r\n\t\t}\r\n\r\n\t\tMathUtil.sortNumBigFirst=function(a,b){\r\n\t\t\treturn parseFloat(b)-parseFloat(a);\r\n\t\t}\r\n\r\n\t\tMathUtil.sortNumSmallFirst=function(a,b){\r\n\t\t\treturn parseFloat(a)-parseFloat(b);\r\n\t\t}\r\n\r\n\t\tMathUtil.sortByKey=function(key,bigFirst,forceNum){\r\n\t\t\t(bigFirst===void 0)&& (bigFirst=false);\r\n\t\t\t(forceNum===void 0)&& (forceNum=true);\r\n\t\t\tvar _sortFun;\r\n\t\t\tif (bigFirst){\r\n\t\t\t\t_sortFun=forceNum ? MathUtil.sortNumBigFirst :MathUtil.sortBigFirst;\r\n\t\t\t\t}else {\r\n\t\t\t\t_sortFun=forceNum ? MathUtil.sortNumSmallFirst :MathUtil.sortSmallFirst;\r\n\t\t\t}\r\n\t\t\treturn function (a,b){\r\n\t\t\t\treturn _sortFun(a[key],b[key]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn MathUtil;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*<code>Matrix</code> 类表示一个转换矩阵，它确定如何将点从一个坐标空间映射到另一个坐标空间。\r\n\t*/\r\n\t//class laya.maths.Matrix\r\n\tvar Matrix=(function(){\r\n\t\tfunction Matrix(a,b,c,d,tx,ty){\r\n\t\t\tthis.cos=1;\r\n\t\t\tthis.sin=0;\r\n\t\t\t//this.a=NaN;\r\n\t\t\t//this.b=NaN;\r\n\t\t\t//this.c=NaN;\r\n\t\t\t//this.d=NaN;\r\n\t\t\t//this.tx=NaN;\r\n\t\t\t//this.ty=NaN;\r\n\t\t\tthis.inPool=false;\r\n\t\t\tthis.bTransform=false;\r\n\t\t\t(a===void 0)&& (a=1);\r\n\t\t\t(b===void 0)&& (b=0);\r\n\t\t\t(c===void 0)&& (c=0);\r\n\t\t\t(d===void 0)&& (d=1);\r\n\t\t\t(tx===void 0)&& (tx=0);\r\n\t\t\t(ty===void 0)&& (ty=0);\r\n\t\t\tthis.a=a;\r\n\t\t\tthis.b=b;\r\n\t\t\tthis.c=c;\r\n\t\t\tthis.d=d;\r\n\t\t\tthis.tx=tx;\r\n\t\t\tthis.ty=ty;\r\n\t\t\tthis._checkTransform();\r\n\t\t}\r\n\r\n\t\t__class(Matrix,'laya.maths.Matrix');\r\n\t\tvar __proto=Matrix.prototype;\r\n\t\t/**\r\n\t\t*为每个矩阵属性设置一个值。\r\n\t\t*@return 返回当前矩形。\r\n\t\t*/\r\n\t\t__proto.identity=function(){\r\n\t\t\tthis.a=this.d=1;\r\n\t\t\tthis.b=this.tx=this.ty=this.c=0;\r\n\t\t\tthis.bTransform=false;\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\t\t/**@private*/\r\n\t\t__proto._checkTransform=function(){\r\n\t\t\treturn this.bTransform=(this.a!==1 || this.b!==0 || this.c!==0 || this.d!==1);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*设置沿 x 、y 轴平移每个点的距离。\r\n\t\t*@param x 沿 x 轴平移每个点的距离。\r\n\t\t*@param y 沿 y 轴平移每个点的距离。\r\n\t\t*@return 返回对象本身\r\n\t\t*/\r\n\t\t__proto.setTranslate=function(x,y){\r\n\t\t\tthis.tx=x;\r\n\t\t\tthis.ty=y;\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*沿 x 和 y 轴平移矩阵，由 x 和 y 参数指定。\r\n\t\t*@param x 沿 x 轴向右移动的量（以像素为单位）。\r\n\t\t*@param y 沿 y 轴向下移动的量（以像素为单位）。\r\n\t\t*@return 返回此矩形。\r\n\t\t*/\r\n\t\t__proto.translate=function(x,y){\r\n\t\t\tthis.tx+=x;\r\n\t\t\tthis.ty+=y;\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*对矩阵应用缩放转换。\r\n\t\t*@param x 用于沿 x 轴缩放对象的乘数。\r\n\t\t*@param y 用于沿 y 轴缩放对象的乘数。\r\n\t\t*/\r\n\t\t__proto.scale=function(x,y){\r\n\t\t\tthis.a *=x;\r\n\t\t\tthis.d *=y;\r\n\t\t\tthis.c *=x;\r\n\t\t\tthis.b *=y;\r\n\t\t\tthis.tx *=x;\r\n\t\t\tthis.ty *=y;\r\n\t\t\tthis.bTransform=true;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*对 Matrix 对象应用旋转转换。\r\n\t\t*@param angle 以弧度为单位的旋转角度。\r\n\t\t*/\r\n\t\t__proto.rotate=function(angle){\r\n\t\t\tvar cos=this.cos=Math.cos(angle);\r\n\t\t\tvar sin=this.sin=Math.sin(angle);\r\n\t\t\tvar a1=this.a;\r\n\t\t\tvar c1=this.c;\r\n\t\t\tvar tx1=this.tx;\r\n\t\t\tthis.a=a1 *cos-this.b *sin;\r\n\t\t\tthis.b=a1 *sin+this.b *cos;\r\n\t\t\tthis.c=c1 *cos-this.d *sin;\r\n\t\t\tthis.d=c1 *sin+this.d *cos;\r\n\t\t\tthis.tx=tx1 *cos-this.ty *sin;\r\n\t\t\tthis.ty=tx1 *sin+this.ty *cos;\r\n\t\t\tthis.bTransform=true;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*对 Matrix 对象应用倾斜转换。\r\n\t\t*@param x 沿着 X 轴的 2D 倾斜弧度。\r\n\t\t*@param y 沿着 Y 轴的 2D 倾斜弧度。\r\n\t\t*@return 当前 Matrix 对象。\r\n\t\t*/\r\n\t\t__proto.skew=function(x,y){\r\n\t\t\tvar tanX=Math.tan(x);\r\n\t\t\tvar tanY=Math.tan(y);\r\n\t\t\tvar a1=this.a;\r\n\t\t\tvar b1=this.b;\r\n\t\t\tthis.a+=tanY *this.c;\r\n\t\t\tthis.b+=tanY *this.d;\r\n\t\t\tthis.c+=tanX *a1;\r\n\t\t\tthis.d+=tanX *b1;\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*对指定的点应用当前矩阵的逆转化并返回此点。\r\n\t\t*@param out 待转化的点 Point 对象。\r\n\t\t*@return 返回out\r\n\t\t*/\r\n\t\t__proto.invertTransformPoint=function(out){\r\n\t\t\tvar a1=this.a;\r\n\t\t\tvar b1=this.b;\r\n\t\t\tvar c1=this.c;\r\n\t\t\tvar d1=this.d;\r\n\t\t\tvar tx1=this.tx;\r\n\t\t\tvar n=a1 *d1-b1 *c1;\r\n\t\t\tvar a2=d1 / n;\r\n\t\t\tvar b2=-b1 / n;\r\n\t\t\tvar c2=-c1 / n;\r\n\t\t\tvar d2=a1 / n;\r\n\t\t\tvar tx2=(c1 *this.ty-d1 *tx1)/ n;\r\n\t\t\tvar ty2=-(a1 *this.ty-b1 *tx1)/ n;\r\n\t\t\treturn out.setTo(a2 *out.x+c2 *out.y+tx2,b2 *out.x+d2 *out.y+ty2);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*将 Matrix 对象表示的几何转换应用于指定点。\r\n\t\t*@param out 用来设定输出结果的点。\r\n\t\t*@return 返回out\r\n\t\t*/\r\n\t\t__proto.transformPoint=function(out){\r\n\t\t\treturn out.setTo(this.a *out.x+this.c *out.y+this.tx,this.b *out.x+this.d *out.y+this.ty);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*将 Matrix 对象表示的几何转换应用于指定点。\r\n\t\t*@param data 点集合。\r\n\t\t*@param out 存储应用转化的点的列表。\r\n\t\t*@return 返回out数组\r\n\t\t*/\r\n\t\t__proto.transformPointArray=function(data,out){\r\n\t\t\tvar len=data.length;\r\n\t\t\tfor (var i=0;i < len;i+=2){\r\n\t\t\t\tvar x=data[i],y=data[i+1];\r\n\t\t\t\tout[i]=this.a *x+this.c *y+this.tx;\r\n\t\t\t\tout[i+1]=this.b *x+this.d *y+this.ty;\r\n\t\t\t}\r\n\t\t\treturn out;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*将 Matrix 对象表示的几何缩放转换应用于指定点。\r\n\t\t*@param data 点集合。\r\n\t\t*@param out 存储应用转化的点的列表。\r\n\t\t*@return 返回out数组\r\n\t\t*/\r\n\t\t__proto.transformPointArrayScale=function(data,out){\r\n\t\t\tvar len=data.length;\r\n\t\t\tfor (var i=0;i < len;i+=2){\r\n\t\t\t\tvar x=data[i],y=data[i+1];\r\n\t\t\t\tout[i]=this.a *x+this.c *y;\r\n\t\t\t\tout[i+1]=this.b *x+this.d *y;\r\n\t\t\t}\r\n\t\t\treturn out;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*获取 X 轴缩放值。\r\n\t\t*@return X 轴缩放值。\r\n\t\t*/\r\n\t\t__proto.getScaleX=function(){\r\n\t\t\treturn this.b===0 ? this.a :Math.sqrt(this.a *this.a+this.b *this.b);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*获取 Y 轴缩放值。\r\n\t\t*@return Y 轴缩放值。\r\n\t\t*/\r\n\t\t__proto.getScaleY=function(){\r\n\t\t\treturn this.c===0 ? this.d :Math.sqrt(this.c *this.c+this.d *this.d);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*执行原始矩阵的逆转换。\r\n\t\t*@return 当前矩阵对象。\r\n\t\t*/\r\n\t\t__proto.invert=function(){\r\n\t\t\tvar a1=this.a;\r\n\t\t\tvar b1=this.b;\r\n\t\t\tvar c1=this.c;\r\n\t\t\tvar d1=this.d;\r\n\t\t\tvar tx1=this.tx;\r\n\t\t\tvar n=a1 *d1-b1 *c1;\r\n\t\t\tthis.a=d1 / n;\r\n\t\t\tthis.b=-b1 / n;\r\n\t\t\tthis.c=-c1 / n;\r\n\t\t\tthis.d=a1 / n;\r\n\t\t\tthis.tx=(c1 *this.ty-d1 *tx1)/ n;\r\n\t\t\tthis.ty=-(a1 *this.ty-b1 *tx1)/ n;\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*将 Matrix 的成员设置为指定值。\r\n\t\t*@param a 缩放或旋转图像时影响像素沿 x 轴定位的值。\r\n\t\t*@param b 旋转或倾斜图像时影响像素沿 y 轴定位的值。\r\n\t\t*@param c 旋转或倾斜图像时影响像素沿 x 轴定位的值。\r\n\t\t*@param d 缩放或旋转图像时影响像素沿 y 轴定位的值。\r\n\t\t*@param tx 沿 x 轴平移每个点的距离。\r\n\t\t*@param ty 沿 y 轴平移每个点的距离。\r\n\t\t*@return 当前矩阵对象。\r\n\t\t*/\r\n\t\t__proto.setTo=function(a,b,c,d,tx,ty){\r\n\t\t\tthis.a=a,this.b=b,this.c=c,this.d=d,this.tx=tx,this.ty=ty;\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*将指定矩阵与当前矩阵连接，从而将这两个矩阵的几何效果有效地结合在一起。\r\n\t\t*@param matrix 要连接到源矩阵的矩阵。\r\n\t\t*@return 当前矩阵。\r\n\t\t*/\r\n\t\t__proto.concat=function(matrix){\r\n\t\t\tvar a=this.a;\r\n\t\t\tvar c=this.c;\r\n\t\t\tvar tx=this.tx;\r\n\t\t\tthis.a=a *matrix.a+this.b *matrix.c;\r\n\t\t\tthis.b=a *matrix.b+this.b *matrix.d;\r\n\t\t\tthis.c=c *matrix.a+this.d *matrix.c;\r\n\t\t\tthis.d=c *matrix.b+this.d *matrix.d;\r\n\t\t\tthis.tx=tx *matrix.a+this.ty *matrix.c+matrix.tx;\r\n\t\t\tthis.ty=tx *matrix.b+this.ty *matrix.d+matrix.ty;\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*对矩阵应用缩放转换。反向相乘\r\n\t\t*@param x 用于沿 x 轴缩放对象的乘数。\r\n\t\t*@param y 用于沿 y 轴缩放对象的乘数。\r\n\t\t*/\r\n\t\t__proto.scaleEx=function(x,y){\r\n\t\t\tvar ba=this.a,bb=this.b,bc=this.c,bd=this.d;\r\n\t\t\tif (bb!==0 || bc!==0){\r\n\t\t\t\tthis.a=x *ba;\r\n\t\t\t\tthis.b=x *bb;\r\n\t\t\t\tthis.c=y *bc;\r\n\t\t\t\tthis.d=y *bd;\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tthis.a=x *ba;\r\n\t\t\t\tthis.b=0 *bd;\r\n\t\t\t\tthis.c=0 *ba;\r\n\t\t\t\tthis.d=y *bd;\r\n\t\t\t}\r\n\t\t\tthis.bTransform=true;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*对 Matrix 对象应用旋转转换。反向相乘\r\n\t\t*@param angle 以弧度为单位的旋转角度。\r\n\t\t*/\r\n\t\t__proto.rotateEx=function(angle){\r\n\t\t\tvar cos=Math.cos(angle);\r\n\t\t\tvar sin=Math.sin(angle);\r\n\t\t\tvar ba=this.a,bb=this.b,bc=this.c,bd=this.d;\r\n\t\t\tif (bb!==0 || bc!==0){\r\n\t\t\t\tthis.a=cos *ba+sin *bc;\r\n\t\t\t\tthis.b=cos *bb+sin *bd;\r\n\t\t\t\tthis.c=-sin *ba+cos *bc;\r\n\t\t\t\tthis.d=-sin *bb+cos *bd;\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tthis.a=cos *ba;\r\n\t\t\t\tthis.b=sin *bd;\r\n\t\t\t\tthis.c=-sin *ba;\r\n\t\t\t\tthis.d=cos *bd;\r\n\t\t\t}\r\n\t\t\tthis.bTransform=true;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*返回一个新的 Matrix 对象，它是此矩阵的克隆，带有与所含对象完全相同的副本。\r\n\t\t*@return 一个 Matrix 对象。\r\n\t\t*/\r\n\t\t__proto.clone=function(){\r\n\t\t\tvar no=Matrix._cache;\r\n\t\t\tvar dec=!no._length ? (new Matrix()):no[--no._length];\r\n\t\t\tdec.a=this.a;\r\n\t\t\tdec.b=this.b;\r\n\t\t\tdec.c=this.c;\r\n\t\t\tdec.d=this.d;\r\n\t\t\tdec.tx=this.tx;\r\n\t\t\tdec.ty=this.ty;\r\n\t\t\tdec.bTransform=this.bTransform;\r\n\t\t\treturn dec;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*将当前 Matrix 对象中的所有矩阵数据复制到指定的 Matrix 对象中。\r\n\t\t*@param dec 要复制当前矩阵数据的 Matrix 对象。\r\n\t\t*@return 已复制当前矩阵数据的 Matrix 对象。\r\n\t\t*/\r\n\t\t__proto.copyTo=function(dec){\r\n\t\t\tdec.a=this.a;\r\n\t\t\tdec.b=this.b;\r\n\t\t\tdec.c=this.c;\r\n\t\t\tdec.d=this.d;\r\n\t\t\tdec.tx=this.tx;\r\n\t\t\tdec.ty=this.ty;\r\n\t\t\tdec.bTransform=this.bTransform;\r\n\t\t\treturn dec;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*返回列出该 Matrix 对象属性的文本值。\r\n\t\t*@return 一个字符串，它包含 Matrix 对象的属性值：a、b、c、d、tx 和 ty。\r\n\t\t*/\r\n\t\t__proto.toString=function(){\r\n\t\t\treturn this.a+\",\"+this.b+\",\"+this.c+\",\"+this.d+\",\"+this.tx+\",\"+this.ty;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*销毁此对象。\r\n\t\t*/\r\n\t\t__proto.destroy=function(){\r\n\t\t\tif (this.inPool)return;\r\n\t\t\tvar cache=Matrix._cache;\r\n\t\t\tthis.inPool=true;\r\n\t\t\tcache._length || (cache._length=0);\r\n\t\t\tcache[cache._length++]=this;\r\n\t\t\tthis.a=this.d=1;\r\n\t\t\tthis.b=this.c=this.tx=this.ty=0;\r\n\t\t\tthis.bTransform=false;\r\n\t\t}\r\n\r\n\t\tMatrix.mul=function(m1,m2,out){\r\n\t\t\tvar aa=m1.a,ab=m1.b,ac=m1.c,ad=m1.d,atx=m1.tx,aty=m1.ty;\r\n\t\t\tvar ba=m2.a,bb=m2.b,bc=m2.c,bd=m2.d,btx=m2.tx,bty=m2.ty;\r\n\t\t\tif (bb!==0 || bc!==0){\r\n\t\t\t\tout.a=aa *ba+ab *bc;\r\n\t\t\t\tout.b=aa *bb+ab *bd;\r\n\t\t\t\tout.c=ac *ba+ad *bc;\r\n\t\t\t\tout.d=ac *bb+ad *bd;\r\n\t\t\t\tout.tx=ba *atx+bc *aty+btx;\r\n\t\t\t\tout.ty=bb *atx+bd *aty+bty;\r\n\t\t\t\t}else {\r\n\t\t\t\tout.a=aa *ba;\r\n\t\t\t\tout.b=ab *bd;\r\n\t\t\t\tout.c=ac *ba;\r\n\t\t\t\tout.d=ad *bd;\r\n\t\t\t\tout.tx=ba *atx+btx;\r\n\t\t\t\tout.ty=bd *aty+bty;\r\n\t\t\t}\r\n\t\t\treturn out;\r\n\t\t}\r\n\r\n\t\tMatrix.mul16=function(m1,m2,out){\r\n\t\t\tvar aa=m1.a,ab=m1.b,ac=m1.c,ad=m1.d,atx=m1.tx,aty=m1.ty;\r\n\t\t\tvar ba=m2.a,bb=m2.b,bc=m2.c,bd=m2.d,btx=m2.tx,bty=m2.ty;\r\n\t\t\tif (bb!==0 || bc!==0){\r\n\t\t\t\tout[0]=aa *ba+ab *bc;\r\n\t\t\t\tout[1]=aa *bb+ab *bd;\r\n\t\t\t\tout[4]=ac *ba+ad *bc;\r\n\t\t\t\tout[5]=ac *bb+ad *bd;\r\n\t\t\t\tout[12]=ba *atx+bc *aty+btx;\r\n\t\t\t\tout[13]=bb *atx+bd *aty+bty;\r\n\t\t\t\t}else {\r\n\t\t\t\tout[0]=aa *ba;\r\n\t\t\t\tout[1]=ab *bd;\r\n\t\t\t\tout[4]=ac *ba;\r\n\t\t\t\tout[5]=ad *bd;\r\n\t\t\t\tout[12]=ba *atx+btx;\r\n\t\t\t\tout[13]=bd *aty+bty;\r\n\t\t\t}\r\n\t\t\treturn out;\r\n\t\t}\r\n\r\n\t\tMatrix.mulPre=function(m1,ba,bb,bc,bd,btx,bty,out){\r\n\t\t\tvar aa=m1.a,ab=m1.b,ac=m1.c,ad=m1.d,atx=m1.tx,aty=m1.ty;\r\n\t\t\tif (bb!==0 || bc!==0){\r\n\t\t\t\tout.a=aa *ba+ab *bc;\r\n\t\t\t\tout.b=aa *bb+ab *bd;\r\n\t\t\t\tout.c=ac *ba+ad *bc;\r\n\t\t\t\tout.d=ac *bb+ad *bd;\r\n\t\t\t\tout.tx=ba *atx+bc *aty+btx;\r\n\t\t\t\tout.ty=bb *atx+bd *aty+bty;\r\n\t\t\t\t}else {\r\n\t\t\t\tout.a=aa *ba;\r\n\t\t\t\tout.b=ab *bd;\r\n\t\t\t\tout.c=ac *ba;\r\n\t\t\t\tout.d=ad *bd;\r\n\t\t\t\tout.tx=ba *atx+btx;\r\n\t\t\t\tout.ty=bd *aty+bty;\r\n\t\t\t}\r\n\t\t\treturn out;\r\n\t\t}\r\n\r\n\t\tMatrix.mulPos=function(m1,aa,ab,ac,ad,atx,aty,out){\r\n\t\t\tvar ba=m1.a,bb=m1.b,bc=m1.c,bd=m1.d,btx=m1.tx,bty=m1.ty;\r\n\t\t\tif (bb!==0 || bc!==0){\r\n\t\t\t\tout.a=aa *ba+ab *bc;\r\n\t\t\t\tout.b=aa *bb+ab *bd;\r\n\t\t\t\tout.c=ac *ba+ad *bc;\r\n\t\t\t\tout.d=ac *bb+ad *bd;\r\n\t\t\t\tout.tx=ba *atx+bc *aty+btx;\r\n\t\t\t\tout.ty=bb *atx+bd *aty+bty;\r\n\t\t\t\t}else {\r\n\t\t\t\tout.a=aa *ba;\r\n\t\t\t\tout.b=ab *bd;\r\n\t\t\t\tout.c=ac *ba;\r\n\t\t\t\tout.d=ad *bd;\r\n\t\t\t\tout.tx=ba *atx+btx;\r\n\t\t\t\tout.ty=bd *aty+bty;\r\n\t\t\t}\r\n\t\t\treturn out;\r\n\t\t}\r\n\r\n\t\tMatrix.preMul=function(parent,self,out){\r\n\t\t\tvar pa=parent.a,pb=parent.b,pc=parent.c,pd=parent.d;\r\n\t\t\tvar na=self.a,nb=self.b,nc=self.c,nd=self.d,ntx=self.tx,nty=self.ty;\r\n\t\t\tout.a=na *pa;\r\n\t\t\tout.b=out.c=0;\r\n\t\t\tout.d=nd *pd;\r\n\t\t\tout.tx=ntx *pa+parent.tx;\r\n\t\t\tout.ty=nty *pd+parent.ty;\r\n\t\t\tif (nb!==0 || nc!==0 || pb!==0 || pc!==0){\r\n\t\t\t\tout.a+=nb *pc;\r\n\t\t\t\tout.d+=nc *pb;\r\n\t\t\t\tout.b+=na *pb+nb *pd;\r\n\t\t\t\tout.c+=nc *pa+nd *pc;\r\n\t\t\t\tout.tx+=nty *pc;\r\n\t\t\t\tout.ty+=ntx *pb;\r\n\t\t\t}\r\n\t\t\treturn out;\r\n\t\t}\r\n\r\n\t\tMatrix.preMulXY=function(parent,x,y,out){\r\n\t\t\tvar pa=parent.a,pb=parent.b,pc=parent.c,pd=parent.d;\r\n\t\t\tout.a=pa;\r\n\t\t\tout.b=pb;\r\n\t\t\tout.c=pc;\r\n\t\t\tout.d=pd;\r\n\t\t\tout.tx=x *pa+parent.tx+y *pc;\r\n\t\t\tout.ty=y *pd+parent.ty+x *pb;\r\n\t\t\treturn out;\r\n\t\t}\r\n\r\n\t\tMatrix.create=function(){\r\n\t\t\tvar cache=Matrix._cache;\r\n\t\t\tvar mat=!cache._length ? (new Matrix()):cache[--cache._length];\r\n\t\t\tmat.inPool=false;\r\n\t\t\treturn mat;\r\n\t\t}\r\n\r\n\t\tMatrix.EMPTY=new Matrix();\r\n\t\tMatrix.TEMP=new Matrix();\r\n\t\tMatrix._cache=[];\r\n\t\treturn Matrix;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*<code>Point</code> 对象表示二维坐标系统中的某个位置，其中 x 表示水平轴，y 表示垂直轴。\r\n\t*/\r\n\t//class laya.maths.Point\r\n\tvar Point=(function(){\r\n\t\tfunction Point(x,y){\r\n\t\t\t//this.x=NaN;\r\n\t\t\t//this.y=NaN;\r\n\t\t\t(x===void 0)&& (x=0);\r\n\t\t\t(y===void 0)&& (y=0);\r\n\t\t\tthis.x=x;\r\n\t\t\tthis.y=y;\r\n\t\t}\r\n\r\n\t\t__class(Point,'laya.maths.Point');\r\n\t\tvar __proto=Point.prototype;\r\n\t\t/**\r\n\t\t*将 <code>Point</code> 的成员设置为指定值。\r\n\t\t*@param x 水平坐标。\r\n\t\t*@param y 垂直坐标。\r\n\t\t*@return 当前 Point 对象。\r\n\t\t*/\r\n\t\t__proto.setTo=function(x,y){\r\n\t\t\tthis.x=x;\r\n\t\t\tthis.y=y;\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*计算当前点和目标x，y点的距离\r\n\t\t*@param x 水平坐标。\r\n\t\t*@param y 垂直坐标。\r\n\t\t*@return 返回之间的距离\r\n\t\t*/\r\n\t\t__proto.distance=function(x,y){\r\n\t\t\treturn Math.sqrt((this.x-x)*(this.x-x)+(this.y-y)*(this.y-y));\r\n\t\t}\r\n\r\n\t\t/**返回包含 x 和 y 坐标的值的字符串。*/\r\n\t\t__proto.toString=function(){\r\n\t\t\treturn this.x+\",\"+this.y;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*标准化向量\r\n\t\t*/\r\n\t\t__proto.normalize=function(){\r\n\t\t\tvar d=Math.sqrt(this.x *this.x+this.y *this.y);\r\n\t\t\tif (d > 0){\r\n\t\t\t\tvar id=1.0 / d;\r\n\t\t\t\tthis.x *=id;\r\n\t\t\t\tthis.y *=id;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tPoint.TEMP=new Point();\r\n\t\tPoint.EMPTY=new Point();\r\n\t\treturn Point;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*<code>Rectangle</code> 对象是按其位置（由它左上角的点 (x,y)确定）以及宽度和高度定义的区域。\r\n\t*/\r\n\t//class laya.maths.Rectangle\r\n\tvar Rectangle=(function(){\r\n\t\tfunction Rectangle(x,y,width,height){\r\n\t\t\t//this.x=NaN;\r\n\t\t\t//this.y=NaN;\r\n\t\t\t//this.width=NaN;\r\n\t\t\t//this.height=NaN;\r\n\t\t\t(x===void 0)&& (x=0);\r\n\t\t\t(y===void 0)&& (y=0);\r\n\t\t\t(width===void 0)&& (width=0);\r\n\t\t\t(height===void 0)&& (height=0);\r\n\t\t\tthis.x=x;\r\n\t\t\tthis.y=y;\r\n\t\t\tthis.width=width;\r\n\t\t\tthis.height=height;\r\n\t\t}\r\n\r\n\t\t__class(Rectangle,'laya.maths.Rectangle');\r\n\t\tvar __proto=Rectangle.prototype;\r\n\t\t/**\r\n\t\t*将 Rectangle 的属性设置为指定值。\r\n\t\t*@param x x 矩形左上角的 X 轴坐标。\r\n\t\t*@param y x 矩形左上角的 Y 轴坐标。\r\n\t\t*@param width 矩形的宽度。\r\n\t\t*@param height 矩形的高。\r\n\t\t*@return 返回属性值修改后的矩形对象本身。\r\n\t\t*/\r\n\t\t__proto.setTo=function(x,y,width,height){\r\n\t\t\tthis.x=x;\r\n\t\t\tthis.y=y;\r\n\t\t\tthis.width=width;\r\n\t\t\tthis.height=height;\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*复制 source 对象的属性值到此矩形对象中。\r\n\t\t*@param sourceRect 源 Rectangle 对象。\r\n\t\t*@return 返回属性值修改后的矩形对象本身。\r\n\t\t*/\r\n\t\t__proto.copyFrom=function(source){\r\n\t\t\tthis.x=source.x;\r\n\t\t\tthis.y=source.y;\r\n\t\t\tthis.width=source.width;\r\n\t\t\tthis.height=source.height;\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*检测此矩形对象是否包含指定的点。\r\n\t\t*@param x 点的 X 轴坐标值（水平位置）。\r\n\t\t*@param y 点的 Y 轴坐标值（垂直位置）。\r\n\t\t*@return 如果 Rectangle 对象包含指定的点，则值为 true；否则为 false。\r\n\t\t*/\r\n\t\t__proto.contains=function(x,y){\r\n\t\t\tif (this.width <=0 || this.height <=0)return false;\r\n\t\t\tif (x >=this.x && x < this.right){\r\n\t\t\t\tif (y >=this.y && y < this.bottom){\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*检测传入的矩形对象是否与此对象相交。\r\n\t\t*@param rect Rectangle 对象。\r\n\t\t*@return 如果传入的矩形对象与此对象相交，则返回 true 值，否则返回 false。\r\n\t\t*/\r\n\t\t__proto.intersects=function(rect){\r\n\t\t\treturn !(rect.x > (this.x+this.width)|| (rect.x+rect.width)< this.x || rect.y > (this.y+this.height)|| (rect.y+rect.height)< this.y);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*获取此对象与传入的矩形对象的相交区域。并将相交区域赋值给传入的输出矩形对象。\r\n\t\t*@param rect 待比较的矩形区域。\r\n\t\t*@param out 待输出的矩形区域。建议：尽量用此对象复用对象，减少对象创建消耗。\r\n\t\t*@return 返回相交的矩形区域对象。\r\n\t\t*/\r\n\t\t__proto.intersection=function(rect,out){\r\n\t\t\tif (!this.intersects(rect))return null;\r\n\t\t\tout || (out=new Rectangle());\r\n\t\t\tout.x=Math.max(this.x,rect.x);\r\n\t\t\tout.y=Math.max(this.y,rect.y);\r\n\t\t\tout.width=Math.min(this.right,rect.right)-out.x;\r\n\t\t\tout.height=Math.min(this.bottom,rect.bottom)-out.y;\r\n\t\t\treturn out;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*矩形联合，通过填充两个矩形之间的水平和垂直空间，将这两个矩形组合在一起以创建一个新的 Rectangle 对象。\r\n\t\t*@param 目标矩形对象。\r\n\t\t*@param out 待输出结果的矩形对象。建议：尽量用此对象复用对象，减少对象创建消耗。\r\n\t\t*@return 两个矩形后联合的 Rectangle 对象 out 。\r\n\t\t*/\r\n\t\t__proto.union=function(source,out){\r\n\t\t\tout || (out=new Rectangle());\r\n\t\t\tthis.clone(out);\r\n\t\t\tif (source.width <=0 || source.height <=0)return out;\r\n\t\t\tout.addPoint(source.x,source.y);\r\n\t\t\tout.addPoint(source.right,source.bottom);\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*返回一个 Rectangle 对象，其 x、y、width 和 height 属性的值与当前 Rectangle 对象的对应值相同。\r\n\t\t*@param out 待输出的矩形对象。建议：尽量用此对象复用对象，减少对象创建消耗。\r\n\t\t*@return Rectangle 对象 out ，其 x、y、width 和 height 属性的值与当前 Rectangle 对象的对应值相同。\r\n\t\t*/\r\n\t\t__proto.clone=function(out){\r\n\t\t\tout || (out=new Rectangle());\r\n\t\t\tout.x=this.x;\r\n\t\t\tout.y=this.y;\r\n\t\t\tout.width=this.width;\r\n\t\t\tout.height=this.height;\r\n\t\t\treturn out;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*当前 Rectangle 对象的水平位置 x 和垂直位置 y 以及高度 width 和宽度 height 以逗号连接成的字符串。\r\n\t\t*/\r\n\t\t__proto.toString=function(){\r\n\t\t\treturn this.x+\",\"+this.y+\",\"+this.width+\",\"+this.height;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*检测传入的 Rectangle 对象的属性是否与当前 Rectangle 对象的属性 x、y、width、height 属性值都相等。\r\n\t\t*@param rect 待比较的 Rectangle 对象。\r\n\t\t*@return 如果判断的属性都相等，则返回 true ,否则返回 false。\r\n\t\t*/\r\n\t\t__proto.equals=function(rect){\r\n\t\t\tif (!rect || rect.x!==this.x || rect.y!==this.y || rect.width!==this.width || rect.height!==this.height)return false;\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*在当前矩形区域中加一个点。\r\n\t\t*@param x 点的 X 坐标。\r\n\t\t*@param y 点的 Y 坐标。\r\n\t\t*@return 返回此 Rectangle 对象。\r\n\t\t*/\r\n\t\t__proto.addPoint=function(x,y){\r\n\t\t\tthis.x > x && (this.width+=this.x-x,this.x=x);\r\n\t\t\tthis.y > y && (this.height+=this.y-y,this.y=y);\r\n\t\t\tif (this.width < x-this.x)this.width=x-this.x;\r\n\t\t\tif (this.height < y-this.y)this.height=y-this.y;\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*返回代表当前矩形的顶点数据。\r\n\t\t*@return 顶点数据。\r\n\t\t*/\r\n\t\t__proto._getBoundPoints=function(){\r\n\t\t\tvar rst=Rectangle._temB;\r\n\t\t\trst.length=0;\r\n\t\t\tif (this.width==0 || this.height==0)return rst;\r\n\t\t\trst.push(this.x,this.y,this.x+this.width,this.y,this.x,this.y+this.height,this.x+this.width,this.y+this.height);\r\n\t\t\treturn rst;\r\n\t\t}\r\n\r\n\t\t/**确定此 Rectangle 对象是否为空。*/\r\n\t\t__proto.isEmpty=function(){\r\n\t\t\tif (this.width <=0 || this.height <=0)return true;\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\t/**此矩形的底边距。y 和 height 属性的和。*/\r\n\t\t__getset(0,__proto,'bottom',function(){\r\n\t\t\treturn this.y+this.height;\r\n\t\t});\r\n\r\n\t\t/**此矩形的右边距。 x 和 width 属性的和。*/\r\n\t\t__getset(0,__proto,'right',function(){\r\n\t\t\treturn this.x+this.width;\r\n\t\t});\r\n\r\n\t\tRectangle._getBoundPointS=function(x,y,width,height){\r\n\t\t\tvar rst=Rectangle._temA;\r\n\t\t\trst.length=0;\r\n\t\t\tif (width==0 || height==0)return rst;\r\n\t\t\trst.push(x,y,x+width,y,x,y+height,x+width,y+height);\r\n\t\t\treturn rst;\r\n\t\t}\r\n\r\n\t\tRectangle._getWrapRec=function(pointList,rst){\r\n\t\t\tif (!pointList || pointList.length < 1)return rst ? rst.setTo(0,0,0,0):Rectangle.TEMP.setTo(0,0,0,0);\r\n\t\t\trst=rst ? rst :new Rectangle();\r\n\t\t\tvar i,len=pointList.length,minX,maxX,minY,maxY,tPoint=Point.TEMP;\r\n\t\t\tminX=minY=99999;\r\n\t\t\tmaxX=maxY=-minX;\r\n\t\t\tfor (i=0;i < len;i+=2){\r\n\t\t\t\ttPoint.x=pointList[i];\r\n\t\t\t\ttPoint.y=pointList[i+1];\r\n\t\t\t\tminX=minX < tPoint.x ? minX :tPoint.x;\r\n\t\t\t\tminY=minY < tPoint.y ? minY :tPoint.y;\r\n\t\t\t\tmaxX=maxX > tPoint.x ? maxX :tPoint.x;\r\n\t\t\t\tmaxY=maxY > tPoint.y ? maxY :tPoint.y;\r\n\t\t\t}\r\n\t\t\treturn rst.setTo(minX,minY,maxX-minX,maxY-minY);\r\n\t\t}\r\n\r\n\t\tRectangle.EMPTY=new Rectangle();\r\n\t\tRectangle.TEMP=new Rectangle();\r\n\t\tRectangle._temB=[];\r\n\t\tRectangle._temA=[];\r\n\t\treturn Rectangle;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*<code>SoundManager</code> 是一个声音管理类。\r\n\t*/\r\n\t//class laya.media.SoundManager\r\n\tvar SoundManager=(function(){\r\n\t\tfunction SoundManager(){};\r\n\t\t__class(SoundManager,'laya.media.SoundManager');\r\n\t\t/**表示是否使背景音乐静音。*/\r\n\t\t__getset(1,SoundManager,'musicMuted',function(){\r\n\t\t\treturn SoundManager._musicMuted;\r\n\t\t\t},function(value){\r\n\t\t\tif (value){\r\n\t\t\t\tif (SoundManager._tMusic)\r\n\t\t\t\t\tSoundManager.stopSound(SoundManager._tMusic);\r\n\t\t\t\tSoundManager._musicMuted=value;\r\n\t\t\t\t}else {\r\n\t\t\t\tSoundManager._musicMuted=value;\r\n\t\t\t\tif (SoundManager._tMusic){\r\n\t\t\t\t\tSoundManager.playMusic(SoundManager._tMusic);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t/**表示是否使音效静音。*/\r\n\t\t__getset(1,SoundManager,'soundMuted',function(){\r\n\t\t\treturn SoundManager._soundMuted;\r\n\t\t\t},function(value){\r\n\t\t\tSoundManager._soundMuted=value;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*表示是否静音。\r\n\t\t*/\r\n\t\t__getset(1,SoundManager,'muted',function(){\r\n\t\t\treturn SoundManager._muted;\r\n\t\t\t},function(value){\r\n\t\t\tif (value){\r\n\t\t\t\tSoundManager.stopAll();\r\n\t\t\t}\r\n\t\t\tSoundManager._muted=value;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*设置是否失去焦点后自动停止背景音乐。\r\n\t\t*@param v Boolean 值。\r\n\t\t*\r\n\t\t*/\r\n\t\t/**\r\n\t\t*表示是否失去焦点后自动停止背景音乐。\r\n\t\t*@return\r\n\t\t*/\r\n\t\t__getset(1,SoundManager,'autoStopMusic',function(){\r\n\t\t\treturn SoundManager._autoStopMusic;\r\n\t\t\t},function(v){\r\n\t\t\tLaya.stage.off(\"blur\",null,SoundManager._stageOnBlur);\r\n\t\t\tLaya.stage.off(\"focus\",null,SoundManager._stageOnFocus);\r\n\t\t\tSoundManager._autoStopMusic=v;\r\n\t\t\tif (v){\r\n\t\t\t\tLaya.stage.on(\"blur\",null,SoundManager._stageOnBlur);\r\n\t\t\t\tLaya.stage.on(\"focus\",null,SoundManager._stageOnFocus);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tSoundManager.addChannel=function(channel){\r\n\t\t\tif (SoundManager._channels.indexOf(channel)>=0)return;\r\n\t\t\tSoundManager._channels.push(channel);\r\n\t\t}\r\n\r\n\t\tSoundManager.removeChannel=function(channel){\r\n\t\t\tvar i=0;\r\n\t\t\tfor (i=SoundManager._channels.length-1;i >=0;i--){\r\n\t\t\t\tif (SoundManager._channels[i]==channel){\r\n\t\t\t\t\tSoundManager._channels.splice(i,1);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tSoundManager._stageOnBlur=function(){\r\n\t\t\tif (SoundManager._musicChannel){\r\n\t\t\t\tif (!SoundManager._musicChannel.isStopped){\r\n\t\t\t\t\tSoundManager._blurPaused=true;\r\n\t\t\t\t\tSoundManager._musicLoops=SoundManager._musicChannel.loops;\r\n\t\t\t\t\tSoundManager._musicCompleteHandler=SoundManager._musicChannel.completeHandler;\r\n\t\t\t\t\tSoundManager._musicPosition=SoundManager._musicChannel.position;\r\n\t\t\t\t\tSoundManager._musicChannel.stop();\r\n\t\t\t\t\tLaya.stage.once(\"mousedown\",null,SoundManager._stageOnFocus);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tSoundManager._stageOnFocus=function(){\r\n\t\t\tLaya.stage.off(\"mousedown\",null,SoundManager._stageOnFocus);\r\n\t\t\tif (SoundManager._blurPaused){\r\n\t\t\t\tSoundManager.playMusic(SoundManager._tMusic,SoundManager._musicLoops,SoundManager._musicCompleteHandler,SoundManager._musicPosition);\r\n\t\t\t\tSoundManager._blurPaused=false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tSoundManager.playSound=function(url,loops,complete,soundClass,startTime){\r\n\t\t\t(loops===void 0)&& (loops=1);\r\n\t\t\t(startTime===void 0)&& (startTime=0);\r\n\t\t\tif (SoundManager._muted)\r\n\t\t\t\treturn null;\r\n\t\t\turl=URL.formatURL(url);\r\n\t\t\tif (url==SoundManager._tMusic){\r\n\t\t\t\tif (SoundManager._musicMuted)return null;\r\n\t\t\t\t}else {\r\n\t\t\t\tif (SoundManager._soundMuted)return null;\r\n\t\t\t};\r\n\t\t\tvar tSound=Laya.loader.getRes(url);\r\n\t\t\tif (!soundClass)soundClass=SoundManager._soundClass;\r\n\t\t\tif (!tSound){\r\n\t\t\t\ttSound=new soundClass();\r\n\t\t\t\ttSound.load(url);\r\n\t\t\t\tLoader.cacheRes(url,tSound);\r\n\t\t\t};\r\n\t\t\tvar channel;\r\n\t\t\tchannel=tSound.play(startTime,loops);\r\n\t\t\tchannel.url=url;\r\n\t\t\tchannel.volume=(url==SoundManager._tMusic)? SoundManager.musicVolume :SoundManager.soundVolume;\r\n\t\t\tchannel.completeHandler=complete;\r\n\t\t\treturn channel;\r\n\t\t}\r\n\r\n\t\tSoundManager.destroySound=function(url){\r\n\t\t\tvar tSound=Laya.loader.getRes(url);\r\n\t\t\tif (tSound){\r\n\t\t\t\tLoader.clearRes(url);\r\n\t\t\t\ttSound.dispose();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tSoundManager.playMusic=function(url,loops,complete,startTime){\r\n\t\t\t(loops===void 0)&& (loops=0);\r\n\t\t\t(startTime===void 0)&& (startTime=0);\r\n\t\t\turl=URL.formatURL(url);\r\n\t\t\tSoundManager._tMusic=url;\r\n\t\t\tif (SoundManager._musicChannel)\r\n\t\t\t\tSoundManager._musicChannel.stop();\r\n\t\t\treturn SoundManager._musicChannel=SoundManager.playSound(url,loops,complete,null,startTime);\r\n\t\t}\r\n\r\n\t\tSoundManager.stopSound=function(url){\r\n\t\t\turl=URL.formatURL(url);\r\n\t\t\tvar i=0;\r\n\t\t\tvar channel;\r\n\t\t\tfor (i=SoundManager._channels.length-1;i >=0;i--){\r\n\t\t\t\tchannel=SoundManager._channels[i];\r\n\t\t\t\tif (channel.url==url){\r\n\t\t\t\t\tchannel.stop();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tSoundManager.stopAll=function(){\r\n\t\t\tvar i=0;\r\n\t\t\tvar channel;\r\n\t\t\tfor (i=SoundManager._channels.length-1;i >=0;i--){\r\n\t\t\t\tchannel=SoundManager._channels[i];\r\n\t\t\t\tchannel.stop();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tSoundManager.stopAllSound=function(){\r\n\t\t\tvar i=0;\r\n\t\t\tvar channel;\r\n\t\t\tfor (i=SoundManager._channels.length-1;i >=0;i--){\r\n\t\t\t\tchannel=SoundManager._channels[i];\r\n\t\t\t\tif (channel.url !=SoundManager._tMusic){\r\n\t\t\t\t\tchannel.stop();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tSoundManager.stopMusic=function(){\r\n\t\t\tif (SoundManager._musicChannel)\r\n\t\t\t\tSoundManager._musicChannel.stop();\r\n\t\t}\r\n\r\n\t\tSoundManager.setSoundVolume=function(volume,url){\r\n\t\t\tif (url){\r\n\t\t\t\turl=URL.formatURL(url);\r\n\t\t\t\tSoundManager._setVolume(url,volume);\r\n\t\t\t\t}else {\r\n\t\t\t\tSoundManager.soundVolume=volume;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tSoundManager.setMusicVolume=function(volume){\r\n\t\t\tSoundManager.musicVolume=volume;\r\n\t\t\tSoundManager._setVolume(SoundManager._tMusic,volume);\r\n\t\t}\r\n\r\n\t\tSoundManager._setVolume=function(url,volume){\r\n\t\t\tvar i=0;\r\n\t\t\tvar channel;\r\n\t\t\tfor (i=SoundManager._channels.length-1;i >=0;i--){\r\n\t\t\t\tchannel=SoundManager._channels[i];\r\n\t\t\t\tif (channel.url==url){\r\n\t\t\t\t\tchannel.volume=volume;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tSoundManager.musicVolume=1;\r\n\t\tSoundManager.soundVolume=1;\r\n\t\tSoundManager.playbackRate=1;\r\n\t\tSoundManager._muted=false;\r\n\t\tSoundManager._soundMuted=false;\r\n\t\tSoundManager._musicMuted=false;\r\n\t\tSoundManager._tMusic=null;\r\n\t\tSoundManager._musicChannel=null;\r\n\t\tSoundManager._channels=[];\r\n\t\tSoundManager._autoStopMusic=false;\r\n\t\tSoundManager._blurPaused=false;\r\n\t\tSoundManager._musicLoops=0;\r\n\t\tSoundManager._musicPosition=0;\r\n\t\tSoundManager._musicCompleteHandler=null;\r\n\t\tSoundManager._soundClass=null\r\n\t\treturn SoundManager;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*<p> <code>LocalStorage</code> 类用于没有时间限制的数据存储。</p>\r\n\t*/\r\n\t//class laya.net.LocalStorage\r\n\tvar LocalStorage=(function(){\r\n\t\tvar Storage;\r\n\t\tfunction LocalStorage(){};\r\n\t\t__class(LocalStorage,'laya.net.LocalStorage');\r\n\t\tLocalStorage.__init__=function(){\r\n\t\t\tif (!LocalStorage._baseClass){\r\n\t\t\t\tLocalStorage._baseClass=Storage;\r\n\t\t\t\tStorage.init();\r\n\t\t\t}\r\n\t\t\tLocalStorage.items=LocalStorage._baseClass.items;\r\n\t\t\tLocalStorage.support=LocalStorage._baseClass.support;\r\n\t\t}\r\n\r\n\t\tLocalStorage.setItem=function(key,value){\r\n\t\t\tLocalStorage._baseClass.setItem(key,value);\r\n\t\t}\r\n\r\n\t\tLocalStorage.getItem=function(key){\r\n\t\t\treturn LocalStorage._baseClass.getItem(key);\r\n\t\t}\r\n\r\n\t\tLocalStorage.setJSON=function(key,value){\r\n\t\t\tLocalStorage._baseClass.setJSON(key,value);\r\n\t\t}\r\n\r\n\t\tLocalStorage.getJSON=function(key){\r\n\t\t\treturn LocalStorage._baseClass.getJSON(key);\r\n\t\t}\r\n\r\n\t\tLocalStorage.removeItem=function(key){\r\n\t\t\tLocalStorage._baseClass.removeItem(key);\r\n\t\t}\r\n\r\n\t\tLocalStorage.clear=function(){\r\n\t\t\tLocalStorage._baseClass.clear();\r\n\t\t}\r\n\r\n\t\tLocalStorage._baseClass=null\r\n\t\tLocalStorage.items=null\r\n\t\tLocalStorage.support=false;\r\n\t\tLocalStorage.__init$=function(){\r\n\t\t\t//class Storage\r\n\t\t\tStorage=(function(){\r\n\t\t\t\tfunction Storage(){};\r\n\t\t\t\t__class(Storage,'');\r\n\t\t\t\tStorage.init=function(){\r\n\t\t\t\t\ttry{Storage.items=window.localStorage;Storage.setItem('laya','1');Storage.removeItem('laya');Storage.support=true;}catch(e){}if(!Storage.support)console.log('LocalStorage is not supprot or browser is private mode.');\r\n\t\t\t\t}\r\n\t\t\t\tStorage.setItem=function(key,value){\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tStorage.support && Storage.items.setItem(key,value);\r\n\t\t\t\t\t\t}catch (e){\r\n\t\t\t\t\t\tconsole.log(\"set localStorage failed\",e);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tStorage.getItem=function(key){\r\n\t\t\t\t\treturn Storage.support ? Storage.items.getItem(key):null;\r\n\t\t\t\t}\r\n\t\t\t\tStorage.setJSON=function(key,value){\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tStorage.support && Storage.items.setItem(key,JSON.stringify(value));\r\n\t\t\t\t\t\t}catch (e){\r\n\t\t\t\t\t\tconsole.log(\"set localStorage failed\",e);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tStorage.getJSON=function(key){\r\n\t\t\t\t\treturn JSON.parse(Storage.support ? Storage.items.getItem(key):null);\r\n\t\t\t\t}\r\n\t\t\t\tStorage.removeItem=function(key){\r\n\t\t\t\t\tStorage.support && Storage.items.removeItem(key);\r\n\t\t\t\t}\r\n\t\t\t\tStorage.clear=function(){\r\n\t\t\t\t\tStorage.support && Storage.items.clear();\r\n\t\t\t\t}\r\n\t\t\t\tStorage.items=null\r\n\t\t\t\tStorage.support=true;\r\n\t\t\t\treturn Storage;\r\n\t\t\t})()\r\n\t\t}\r\n\r\n\t\treturn LocalStorage;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*<p> <code>URL</code> 类用于定义地址信息。</p>\r\n\t*/\r\n\t//class laya.net.URL\r\n\tvar URL=(function(){\r\n\t\tfunction URL(url){\r\n\t\t\tthis._url=null;\r\n\t\t\tthis._path=null;\r\n\t\t\tthis._url=URL.formatURL(url);\r\n\t\t\tthis._path=URL.getPath(url);\r\n\t\t}\r\n\r\n\t\t__class(URL,'laya.net.URL');\r\n\t\tvar __proto=URL.prototype;\r\n\t\t/**地址的路径。*/\r\n\t\t__getset(0,__proto,'path',function(){\r\n\t\t\treturn this._path;\r\n\t\t});\r\n\r\n\t\t/**格式化后的地址。*/\r\n\t\t__getset(0,__proto,'url',function(){\r\n\t\t\treturn this._url;\r\n\t\t});\r\n\r\n\t\tURL.formatURL=function(url,base){\r\n\t\t\tif (URL.customFormat !=null)url=URL.customFormat(url,base);\r\n\t\t\tif (!url)return \"null path\";\r\n\t\t\tif (url.indexOf(\"data:image\")===0)return url;\r\n\t\t\tif (Render.isConchApp==false){\r\n\t\t\t\tURL.version[url] && (url+=\"?v=\"+URL.version[url]);\r\n\t\t\t}\r\n\t\t\tif (url.charAt(0)=='~')return URL.rootPath+url.substring(1);\r\n\t\t\tif (URL.isAbsolute(url))return url;\r\n\t\t\tvar retVal=(base || URL.basePath)+url;\r\n\t\t\treturn URL.formatRelativePath(retVal);\r\n\t\t}\r\n\r\n\t\tURL.formatRelativePath=function(value){\r\n\t\t\tif (value.indexOf(\"../\")>-1){\r\n\t\t\t\tvar parts=value.split(\"/\");\r\n\t\t\t\tfor (var i=0,len=parts.length;i < len;i++){\r\n\t\t\t\t\tif (parts[i]=='..'){\r\n\t\t\t\t\t\tparts.splice(i-1,2);\r\n\t\t\t\t\t\ti-=2;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn parts.join('/');\r\n\t\t\t}\r\n\t\t\treturn value;\r\n\t\t}\r\n\r\n\t\tURL.isAbsolute=function(url){\r\n\t\t\treturn url.indexOf(\":\")> 0 || url.charAt(0)=='/';\r\n\t\t}\r\n\r\n\t\tURL.getPath=function(url){\r\n\t\t\tvar ofs=url.lastIndexOf('/');\r\n\t\t\treturn ofs > 0 ? url.substr(0,ofs+1):\"\";\r\n\t\t}\r\n\r\n\t\tURL.getFileName=function(url){\r\n\t\t\tvar ofs=url.lastIndexOf('/');\r\n\t\t\treturn ofs > 0 ? url.substr(ofs+1):url;\r\n\t\t}\r\n\r\n\t\tURL.version={};\r\n\t\tURL.basePath=\"\";\r\n\t\tURL.rootPath=\"\";\r\n\t\tURL.customFormat=null\r\n\t\treturn URL;\r\n\t})()\r\n\r\n\r\n\t//class laya.webgl.shader.ShaderValue\r\n\tvar ShaderValue=(function(){\r\n\t\tfunction ShaderValue(){}\r\n\t\t__class(ShaderValue,'laya.webgl.shader.ShaderValue');\r\n\t\treturn ShaderValue;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*@private\r\n\t*<code>Render</code> 是渲染管理类。它是一个单例，可以使用 Laya.render 访问。\r\n\t*/\r\n\t//class laya.renders.Render\r\n\tvar Render=(function(){\r\n\t\tfunction Render(width,height){\r\n\t\t\tthis._timeId=0;\r\n\t\t\tvar style=Render._mainCanvas.source.style;\r\n\t\t\tstyle.position='absolute';\r\n\t\t\tstyle.top=style.left=\"0px\";\r\n\t\t\tstyle.background=\"#000000\";\r\n\t\t\tRender._mainCanvas.source.id=Render._mainCanvas.source.id || \"layaCanvas\";\r\n\t\t\tvar isWebGl=laya.renders.Render.isWebGL;\r\n\t\t\tisWebGl && Render.WebGL.init(Render._mainCanvas,width,height);\r\n\t\t\tif (Render._mainCanvas.source.nodeName || laya.renders.Render.isConchApp){\r\n\t\t\t\tBrowser.container.appendChild(Render._mainCanvas.source);\r\n\t\t\t}\r\n\t\t\tRender._context=new RenderContext(width,height,isWebGl ? null :Render._mainCanvas);\r\n\t\t\tRender._context.ctx.setIsMainContext();\r\n\t\t\tBrowser.window.requestAnimationFrame(loop);\r\n\t\t\tfunction loop (){\r\n\t\t\t\tLaya.stage._loop();\r\n\t\t\t\tBrowser.window.requestAnimationFrame(loop);\r\n\t\t\t}\r\n\t\t\tLaya.stage.on(\"blur\",this,this._onBlur);\r\n\t\t\tLaya.stage.on(\"focus\",this,this._onFocus);\r\n\t\t}\r\n\r\n\t\t__class(Render,'laya.renders.Render');\r\n\t\tvar __proto=Render.prototype;\r\n\t\t/**@private */\r\n\t\t__proto._onFocus=function(){\r\n\t\t\tBrowser.window.clearInterval(this._timeId);\r\n\t\t}\r\n\r\n\t\t/**@private */\r\n\t\t__proto._onBlur=function(){\r\n\t\t\tthis._timeId=Browser.window.setInterval(this._enterFrame,1000);\r\n\t\t}\r\n\r\n\t\t/**@private */\r\n\t\t__proto._enterFrame=function(e){\r\n\t\t\tLaya.stage._loop();\r\n\t\t}\r\n\r\n\t\t/**目前使用的渲染器。*/\r\n\t\t__getset(1,Render,'context',function(){\r\n\t\t\treturn Render._context;\r\n\t\t});\r\n\r\n\t\t/**加速器模式下设置是否是WebGL模式*/\r\n\t\t__getset(1,Render,'isConchWebGL',function(){\r\n\t\t\treturn window.ConchRenderType==6;\r\n\t\t\t},function(b){\r\n\t\t\tif (b){\r\n\t\t\t\tRender.isConchNode=false;\r\n\t\t\t\twindow.ConchRenderType |=0x02;\r\n\t\t\t\t}else {\r\n\t\t\t\twindow.ConchRenderType &=~ 0x02;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t/**加速器模式下设置是否是节点模式 如果是否就是非节点模式 默认为canvas模式 如果设置了isConchWebGL则是webGL模式*/\r\n\t\t__getset(1,Render,'isConchNode',function(){\r\n\t\t\treturn (window.ConchRenderType & 5)==5;\r\n\t\t\t},function(b){\r\n\t\t\tif (b){\r\n\t\t\t\twindow.ConchRenderType |=0x01;\r\n\t\t\t\t}else {\r\n\t\t\t\twindow.ConchRenderType &=~ 0x01;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t/**渲染使用的原生画布引用。 */\r\n\t\t__getset(1,Render,'canvas',function(){\r\n\t\t\treturn Render._mainCanvas.source;\r\n\t\t});\r\n\r\n\t\t/**是否是加速器 只读*/\r\n\t\t__getset(1,Render,'isConchApp',function(){\r\n\t\t\treturn (window.ConchRenderType & 0x04)==0x04;\r\n\t\t});\r\n\r\n\t\tRender._context=null\r\n\t\tRender._mainCanvas=null\r\n\t\tRender.WebGL=null\r\n\t\tRender.NODE=0x01;\r\n\t\tRender.WEBGL=0x02;\r\n\t\tRender.CONCH=0x04;\r\n\t\tRender.isWebGL=false;\r\n\t\tRender.is3DMode=false;\r\n\t\tRender.optimizeTextureMemory=function(url,texture){\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\tRender.__init$=function(){\r\n\t\t\twindow.ConchRenderType=window.ConchRenderType||1;;\r\n\t\t\twindow.ConchRenderType|=(!window.conch?0:0x04);;;\r\n\t\t}\r\n\r\n\t\treturn Render;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*@private\r\n\t*渲染环境\r\n\t*/\r\n\t//class laya.renders.RenderContext\r\n\tvar RenderContext=(function(){\r\n\t\tfunction RenderContext(width,height,canvas){\r\n\t\t\tthis.x=0;\r\n\t\t\tthis.y=0;\r\n\t\t\t//this.canvas=null;\r\n\t\t\t//this.ctx=null;\r\n\t\t\tthis._drawTexture=function(x,y,args){\r\n\t\t\t\tif (args[0].loaded)this.ctx.drawTexture(args[0],args[1],args[2],args[3],args[4],x,y);\r\n\t\t\t}\r\n\t\t\tthis._fillTexture=function(x,y,args){\r\n\t\t\t\tif (args[0].loaded)this.ctx.fillTexture(args[0],args[1]+x,args[2]+y,args[3],args[4],args[5],args[6],args[7]);\r\n\t\t\t}\r\n\t\t\tthis._drawTextureWithTransform=function(x,y,args){\r\n\t\t\t\tif (args[0].loaded)this.ctx.drawTextureWithTransform(args[0],args[1],args[2],args[3],args[4],args[5],x,y,args[6]);\r\n\t\t\t}\r\n\t\t\tthis._fillQuadrangle=function(x,y,args){\r\n\t\t\t\tthis.ctx.fillQuadrangle(args[0],args[1],args[2],args[3],args[4]);\r\n\t\t\t}\r\n\t\t\tthis._drawRect=function(x,y,args){\r\n\t\t\t\tvar ctx=this.ctx;\r\n\t\t\t\tif (args[4] !=null){\r\n\t\t\t\t\tctx.fillStyle=args[4];\r\n\t\t\t\t\tctx.fillRect(x+args[0],y+args[1],args[2],args[3],null);\r\n\t\t\t\t}\r\n\t\t\t\tif (args[5] !=null){\r\n\t\t\t\t\tctx.strokeStyle=args[5];\r\n\t\t\t\t\tctx.lineWidth=args[6];\r\n\t\t\t\t\tctx.strokeRect(x+args[0],y+args[1],args[2],args[3],args[6]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis._drawPie=function(x,y,args){\r\n\t\t\t\tvar ctx=this.ctx;\r\n\t\t\t\tRender.isWebGL && ctx.setPathId(args[8]);\r\n\t\t\t\tctx.beginPath();\r\n\t\t\t\tif (Render.isWebGL){\r\n\t\t\t\t\tctx.movePath(args[0]+x,args[1]+y);\r\n\t\t\t\t\tctx.moveTo(0,0);\r\n\t\t\t\t\t}else {\r\n\t\t\t\t\tctx.moveTo(x+args[0],y+args[1]);\r\n\t\t\t\t}\r\n\t\t\t\tctx.arc(x+args[0],y+args[1],args[2],args[3],args[4]);\r\n\t\t\t\tctx.closePath();\r\n\t\t\t\tthis._fillAndStroke(args[5],args[6],args[7],true);\r\n\t\t\t}\r\n\t\t\tthis._clipRect=function(x,y,args){\r\n\t\t\t\tthis.ctx.clipRect(x+args[0],y+args[1],args[2],args[3]);\r\n\t\t\t}\r\n\t\t\tthis._fillRect=function(x,y,args){\r\n\t\t\t\tthis.ctx.fillRect(x+args[0],y+args[1],args[2],args[3],args[4]);\r\n\t\t\t}\r\n\t\t\tthis._drawCircle=function(x,y,args){\r\n\t\t\t\tvar ctx=this.ctx;\r\n\t\t\t\tRender.isWebGL && ctx.setPathId(args[6]);\r\n\t\t\t\tStat.drawCall++;\r\n\t\t\t\tctx.beginPath();\r\n\t\t\t\tRender.isWebGL && ctx.movePath(args[0]+x,args[1]+y);\r\n\t\t\t\tctx.arc(args[0]+x,args[1]+y,args[2],0,RenderContext.PI2);\r\n\t\t\t\tctx.closePath();\r\n\t\t\t\tthis._fillAndStroke(args[3],args[4],args[5],true);\r\n\t\t\t}\r\n\t\t\tthis._fillCircle=function(x,y,args){\r\n\t\t\t\tStat.drawCall++;\r\n\t\t\t\tvar ctx=this.ctx;\r\n\t\t\t\tctx.beginPath();\r\n\t\t\t\tctx.fillStyle=args[3];\r\n\t\t\t\tctx.arc(args[0]+x,args[1]+y,args[2],0,RenderContext.PI2);\r\n\t\t\t\tctx.fill();\r\n\t\t\t}\r\n\t\t\tthis._setShader=function(x,y,args){\r\n\t\t\t\tthis.ctx.setShader(args[0]);\r\n\t\t\t}\r\n\t\t\tthis._drawLine=function(x,y,args){\r\n\t\t\t\tvar ctx=this.ctx;\r\n\t\t\t\tRender.isWebGL && ctx.setPathId(args[6]);\r\n\t\t\t\tctx.beginPath();\r\n\t\t\t\tctx.strokeStyle=args[4];\r\n\t\t\t\tctx.lineWidth=args[5];\r\n\t\t\t\tif (Render.isWebGL){\r\n\t\t\t\t\tctx.movePath(x,y);\r\n\t\t\t\t\tctx.moveTo(args[0],args[1]);\r\n\t\t\t\t\tctx.lineTo(args[2],args[3]);\r\n\t\t\t\t\t}else {\r\n\t\t\t\t\tctx.moveTo(x+args[0],y+args[1]);\r\n\t\t\t\t\tctx.lineTo(x+args[2],y+args[3]);\r\n\t\t\t\t}\r\n\t\t\t\tctx.stroke();\r\n\t\t\t}\r\n\t\t\tthis._drawLines=function(x,y,args){\r\n\t\t\t\tvar ctx=this.ctx;\r\n\t\t\t\tRender.isWebGL && ctx.setPathId(args[5]);\r\n\t\t\t\tctx.beginPath();\r\n\t\t\t\tx+=args[0],y+=args[1];\r\n\t\t\t\tRender.isWebGL && ctx.movePath(x,y);\r\n\t\t\t\tctx.strokeStyle=args[3];\r\n\t\t\t\tctx.lineWidth=args[4];\r\n\t\t\t\tvar points=args[2];\r\n\t\t\t\tvar i=2,n=points.length;\r\n\t\t\t\tif (Render.isWebGL){\r\n\t\t\t\t\tctx.moveTo(points[0],points[1]);\r\n\t\t\t\t\twhile (i < n){\r\n\t\t\t\t\t\tctx.lineTo(points[i++],points[i++]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t}else {\r\n\t\t\t\t\tctx.moveTo(x+points[0],y+points[1]);\r\n\t\t\t\t\twhile (i < n){\r\n\t\t\t\t\t\tctx.lineTo(x+points[i++],y+points[i++]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tctx.stroke();\r\n\t\t\t}\r\n\t\t\tthis._drawLinesWebGL=function(x,y,args){\r\n\t\t\t\tthis.ctx.drawLines(x+this.x+args[0],y+this.y+args[1],args[2],args[3],args[4]);\r\n\t\t\t}\r\n\t\t\tthis._drawCurves=function(x,y,args){\r\n\t\t\t\tthis.ctx.drawCurves(x,y,args);\r\n\t\t\t}\r\n\t\t\tthis._draw=function(x,y,args){\r\n\t\t\t\targs[0].call(null,this,x,y);\r\n\t\t\t}\r\n\t\t\tthis._transformByMatrix=function(x,y,args){\r\n\t\t\t\tthis.ctx.transformByMatrix(args[0]);\r\n\t\t\t}\r\n\t\t\tthis._setTransform=function(x,y,args){\r\n\t\t\t\tthis.ctx.setTransform(args[0],args[1],args[2],args[3],args[4],args[5]);\r\n\t\t\t}\r\n\t\t\tthis._setTransformByMatrix=function(x,y,args){\r\n\t\t\t\tthis.ctx.setTransformByMatrix(args[0]);\r\n\t\t\t}\r\n\t\t\tthis._save=function(x,y,args){\r\n\t\t\t\tthis.ctx.save();\r\n\t\t\t}\r\n\t\t\tthis._restore=function(x,y,args){\r\n\t\t\t\tthis.ctx.restore();\r\n\t\t\t}\r\n\t\t\tthis._translate=function(x,y,args){\r\n\t\t\t\tthis.ctx.translate(args[0],args[1]);\r\n\t\t\t}\r\n\t\t\tthis._transform=function(x,y,args){\r\n\t\t\t\tthis.ctx.translate(args[1]+x,args[2]+y);\r\n\t\t\t\tvar mat=args[0];\r\n\t\t\t\tthis.ctx.transform(mat.a,mat.b,mat.c,mat.d,mat.tx,mat.ty);\r\n\t\t\t\tthis.ctx.translate(-x-args[1],-y-args[2]);\r\n\t\t\t}\r\n\t\t\tthis._rotate=function(x,y,args){\r\n\t\t\t\tthis.ctx.translate(args[1]+x,args[2]+y);\r\n\t\t\t\tthis.ctx.rotate(args[0]);\r\n\t\t\t\tthis.ctx.translate(-x-args[1],-y-args[2]);\r\n\t\t\t}\r\n\t\t\tthis._scale=function(x,y,args){\r\n\t\t\t\tthis.ctx.translate(args[2]+x,args[3]+y);\r\n\t\t\t\tthis.ctx.scale(args[0],args[1]);\r\n\t\t\t\tthis.ctx.translate(-x-args[2],-y-args[3]);\r\n\t\t\t}\r\n\t\t\tthis._alpha=function(x,y,args){\r\n\t\t\t\tthis.ctx.globalAlpha *=args[0];\r\n\t\t\t}\r\n\t\t\tthis._setAlpha=function(x,y,args){\r\n\t\t\t\tthis.ctx.globalAlpha=args[0];\r\n\t\t\t}\r\n\t\t\tthis._fillText=function(x,y,args){\r\n\t\t\t\tthis.ctx.fillText(args[0],args[1]+x,args[2]+y,args[3],args[4],args[5]);\r\n\t\t\t}\r\n\t\t\tthis._strokeText=function(x,y,args){\r\n\t\t\t\tthis.ctx.strokeText(args[0],args[1]+x,args[2]+y,args[3],args[4],args[5],args[6]);\r\n\t\t\t}\r\n\t\t\tthis._fillBorderText=function(x,y,args){\r\n\t\t\t\tthis.ctx.fillBorderText(args[0],args[1]+x,args[2]+y,args[3],args[4],args[5],args[6],args[7]);\r\n\t\t\t}\r\n\t\t\tthis._blendMode=function(x,y,args){\r\n\t\t\t\tthis.ctx.globalCompositeOperation=args[0];\r\n\t\t\t}\r\n\t\t\tthis._beginClip=function(x,y,args){\r\n\t\t\t\tthis.ctx.beginClip && this.ctx.beginClip(x+args[0],y+args[1],args[2],args[3]);\r\n\t\t\t}\r\n\t\t\tthis._setIBVB=function(x,y,args){\r\n\t\t\t\tthis.ctx.setIBVB(args[0]+x,args[1]+y,args[2],args[3],args[4],args[5],args[6],args[7]);\r\n\t\t\t}\r\n\t\t\tthis._fillTrangles=function(x,y,args){\r\n\t\t\t\tthis.ctx.fillTrangles(args[0],args[1]+x,args[2]+y,args[3],args[4]);\r\n\t\t\t}\r\n\t\t\tthis._drawPath=function(x,y,args){\r\n\t\t\t\tvar ctx=this.ctx;\r\n\t\t\t\tRender.isWebGL && ctx.setPathId(-1);\r\n\t\t\t\tctx.beginPath();\r\n\t\t\t\tx+=args[0],y+=args[1];\r\n\t\t\t\tvar paths=args[2];\r\n\t\t\t\tfor (var i=0,n=paths.length;i < n;i++){\r\n\t\t\t\t\tvar path=paths[i];\r\n\t\t\t\t\tswitch (path[0]){\r\n\t\t\t\t\t\tcase \"moveTo\":\r\n\t\t\t\t\t\t\tctx.moveTo(x+path[1],y+path[2]);\r\n\t\t\t\t\t\t\tbreak ;\r\n\t\t\t\t\t\tcase \"lineTo\":\r\n\t\t\t\t\t\t\tctx.lineTo(x+path[1],y+path[2]);\r\n\t\t\t\t\t\t\tbreak ;\r\n\t\t\t\t\t\tcase \"arcTo\":\r\n\t\t\t\t\t\t\tctx.arcTo(x+path[1],y+path[2],x+path[3],y+path[4],path[5]);\r\n\t\t\t\t\t\t\tbreak ;\r\n\t\t\t\t\t\tcase \"closePath\":\r\n\t\t\t\t\t\t\tctx.closePath();\r\n\t\t\t\t\t\t\tbreak ;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t\tvar brush=args[3];\r\n\t\t\t\tif (brush !=null){\r\n\t\t\t\t\tctx.fillStyle=brush.fillStyle;\r\n\t\t\t\t\tctx.fill();\r\n\t\t\t\t};\r\n\t\t\t\tvar pen=args[4];\r\n\t\t\t\tif (pen !=null){\r\n\t\t\t\t\tctx.strokeStyle=pen.strokeStyle;\r\n\t\t\t\t\tctx.lineWidth=pen.lineWidth || 1;\r\n\t\t\t\t\tctx.lineJoin=pen.lineJoin;\r\n\t\t\t\t\tctx.lineCap=pen.lineCap;\r\n\t\t\t\t\tctx.miterLimit=pen.miterLimit;\r\n\t\t\t\t\tctx.stroke();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.drawPoly=function(x,y,args){\r\n\t\t\t\tthis.ctx.drawPoly(x+this.x+args[0],y+this.y+args[1],args[2],args[3],args[4],args[5],args[6]);\r\n\t\t\t}\r\n\t\t\tthis._drawPoly=function(x,y,args){\r\n\t\t\t\tvar ctx=this.ctx;\r\n\t\t\t\tvar points=args[2];\r\n\t\t\t\tvar i=2,n=points.length;\r\n\t\t\t\tif (Render.isWebGL){\r\n\t\t\t\t\tctx.setPathId(args[6]);\r\n\t\t\t\t\tctx.beginPath();\r\n\t\t\t\t\tx+=args[0],y+=args[1];\r\n\t\t\t\t\tctx.movePath(x,y);\r\n\t\t\t\t\tctx.moveTo(points[0],points[1]);\r\n\t\t\t\t\twhile (i < n){\r\n\t\t\t\t\t\tctx.lineTo(points[i++],points[i++]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t}else {\r\n\t\t\t\t\tctx.beginPath();\r\n\t\t\t\t\tx+=args[0],y+=args[1];\r\n\t\t\t\t\tctx.moveTo(x+points[0],y+points[1]);\r\n\t\t\t\t\twhile (i < n){\r\n\t\t\t\t\t\tctx.lineTo(x+points[i++],y+points[i++]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tctx.closePath();\r\n\t\t\t\tthis._fillAndStroke(args[3],args[4],args[5],args[7]);\r\n\t\t\t}\r\n\t\t\tthis._drawSkin=function(x,y,args){\r\n\t\t\t\tvar tSprite=args[0];\r\n\t\t\t\tif (tSprite){\r\n\t\t\t\t\tvar ctx=this.ctx;\r\n\t\t\t\t\ttSprite.render(ctx,x,y);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis._drawParticle=function(x,y,args){\r\n\t\t\t\tthis.ctx.drawParticle(x+this.x,y+this.y,args[0]);\r\n\t\t\t}\r\n\t\t\tif (canvas){\r\n\t\t\t\tthis.ctx=canvas.getContext('2d');\r\n\t\t\t\t}else {\r\n\t\t\t\tcanvas=HTMLCanvas.create(\"3D\");\r\n\t\t\t\tthis.ctx=RunDriver.createWebGLContext2D(canvas);\r\n\t\t\t\tcanvas._setContext(this.ctx);\r\n\t\t\t}\r\n\t\t\tcanvas.size(width,height);\r\n\t\t\tthis.canvas=canvas;\r\n\t\t}\r\n\r\n\t\t__class(RenderContext,'laya.renders.RenderContext');\r\n\t\tvar __proto=RenderContext.prototype;\r\n\t\t/**销毁当前渲染环境*/\r\n\t\t__proto.destroy=function(){\r\n\t\t\tif (this.canvas){\r\n\t\t\t\tthis.canvas.destroy();\r\n\t\t\t\tthis.canvas=null;\r\n\t\t\t}\r\n\t\t\tif (this.ctx){\r\n\t\t\t\tthis.ctx.destroy();\r\n\t\t\t\tthis.ctx=null;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__proto.drawTexture=function(tex,x,y,width,height){\r\n\t\t\tif (tex.loaded)this.ctx.drawTexture(tex,x,y,width,height,this.x,this.y);\r\n\t\t}\r\n\r\n\t\t__proto._drawTextures=function(x,y,args){\r\n\t\t\tif (args[0].loaded)this.ctx.drawTextures(args[0],args[1],x+this.x,y+this.y);\r\n\t\t}\r\n\r\n\t\t__proto.drawTextureWithTransform=function(tex,x,y,width,height,m,alpha){\r\n\t\t\tif (tex.loaded)this.ctx.drawTextureWithTransform(tex,x,y,width,height,m,this.x,this.y,alpha);\r\n\t\t}\r\n\r\n\t\t__proto.fillQuadrangle=function(tex,x,y,point4,m){\r\n\t\t\tthis.ctx.fillQuadrangle(tex,x,y,point4,m);\r\n\t\t}\r\n\r\n\t\t__proto.drawCanvas=function(canvas,x,y,width,height){\r\n\t\t\tthis.ctx.drawCanvas(canvas,x+this.x,y+this.y,width,height);\r\n\t\t}\r\n\r\n\t\t__proto.drawRect=function(x,y,width,height,color,lineWidth){\r\n\t\t\t(lineWidth===void 0)&& (lineWidth=1);\r\n\t\t\tvar ctx=this.ctx;\r\n\t\t\tctx.strokeStyle=color;\r\n\t\t\tctx.lineWidth=lineWidth;\r\n\t\t\tctx.strokeRect(x+this.x,y+this.y,width,height,lineWidth);\r\n\t\t}\r\n\r\n\t\t__proto._fillAndStroke=function(fillColor,strokeColor,lineWidth,isConvexPolygon){\r\n\t\t\t(isConvexPolygon===void 0)&& (isConvexPolygon=false);\r\n\t\t\tvar ctx=this.ctx;\r\n\t\t\tif (fillColor !=null){\r\n\t\t\t\tctx.fillStyle=fillColor;\r\n\t\t\t\tif (Render.isWebGL){\r\n\t\t\t\t\tctx.fill(isConvexPolygon);\r\n\t\t\t\t\t}else {\r\n\t\t\t\t\tctx.fill();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (strokeColor !=null && lineWidth > 0){\r\n\t\t\t\tctx.strokeStyle=strokeColor;\r\n\t\t\t\tctx.lineWidth=lineWidth;\r\n\t\t\t\tctx.stroke();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//ctx.translate(-x-args[0],-y-args[1]);\r\n\t\t__proto.clipRect=function(x,y,width,height){\r\n\t\t\tthis.ctx.clipRect(x+this.x,y+this.y,width,height);\r\n\t\t}\r\n\r\n\t\t__proto.fillRect=function(x,y,width,height,fillStyle){\r\n\t\t\tthis.ctx.fillRect(x+this.x,y+this.y,width,height,fillStyle);\r\n\t\t}\r\n\r\n\t\t__proto.drawCircle=function(x,y,radius,color,lineWidth){\r\n\t\t\t(lineWidth===void 0)&& (lineWidth=1);\r\n\t\t\tStat.drawCall++;\r\n\t\t\tvar ctx=this.ctx;\r\n\t\t\tctx.beginPath();\r\n\t\t\tctx.strokeStyle=color;\r\n\t\t\tctx.lineWidth=lineWidth;\r\n\t\t\tctx.arc(x+this.x,y+this.y,radius,0,RenderContext.PI2);\r\n\t\t\tctx.stroke();\r\n\t\t}\r\n\r\n\t\t__proto.fillCircle=function(x,y,radius,color){\r\n\t\t\tStat.drawCall++;\r\n\t\t\tvar ctx=this.ctx;\r\n\t\t\tctx.beginPath();\r\n\t\t\tctx.fillStyle=color;\r\n\t\t\tctx.arc(x+this.x,y+this.y,radius,0,RenderContext.PI2);\r\n\t\t\tctx.fill();\r\n\t\t}\r\n\r\n\t\t__proto.setShader=function(shader){\r\n\t\t\tthis.ctx.setShader(shader);\r\n\t\t}\r\n\r\n\t\t__proto.drawLine=function(fromX,fromY,toX,toY,color,lineWidth){\r\n\t\t\t(lineWidth===void 0)&& (lineWidth=1);\r\n\t\t\tvar ctx=this.ctx;\r\n\t\t\tctx.beginPath();\r\n\t\t\tctx.strokeStyle=color;\r\n\t\t\tctx.lineWidth=lineWidth;\r\n\t\t\tctx.moveTo(this.x+fromX,this.y+fromY);\r\n\t\t\tctx.lineTo(this.x+toX,this.y+toY);\r\n\t\t\tctx.stroke();\r\n\t\t}\r\n\r\n\t\t__proto.clear=function(){\r\n\t\t\tthis.ctx.clear();\r\n\t\t}\r\n\r\n\t\t__proto.transformByMatrix=function(value){\r\n\t\t\tthis.ctx.transformByMatrix(value);\r\n\t\t}\r\n\r\n\t\t__proto.setTransform=function(a,b,c,d,tx,ty){\r\n\t\t\tthis.ctx.setTransform(a,b,c,d,tx,ty);\r\n\t\t}\r\n\r\n\t\t__proto.setTransformByMatrix=function(value){\r\n\t\t\tthis.ctx.setTransformByMatrix(value);\r\n\t\t}\r\n\r\n\t\t__proto.save=function(){\r\n\t\t\tthis.ctx.save();\r\n\t\t}\r\n\r\n\t\t__proto.restore=function(){\r\n\t\t\tthis.ctx.restore();\r\n\t\t}\r\n\r\n\t\t__proto.translate=function(x,y){\r\n\t\t\tthis.ctx.translate(x,y);\r\n\t\t}\r\n\r\n\t\t__proto.transform=function(a,b,c,d,tx,ty){\r\n\t\t\tthis.ctx.transform(a,b,c,d,tx,ty);\r\n\t\t}\r\n\r\n\t\t__proto.rotate=function(angle){\r\n\t\t\tthis.ctx.rotate(angle);\r\n\t\t}\r\n\r\n\t\t__proto.scale=function(scaleX,scaleY){\r\n\t\t\tthis.ctx.scale(scaleX,scaleY);\r\n\t\t}\r\n\r\n\t\t__proto.alpha=function(value){\r\n\t\t\tthis.ctx.globalAlpha *=value;\r\n\t\t}\r\n\r\n\t\t__proto.setAlpha=function(value){\r\n\t\t\tthis.ctx.globalAlpha=value;\r\n\t\t}\r\n\r\n\t\t__proto.fillWords=function(words,x,y,font,color){\r\n\t\t\tthis.ctx.fillWords(words,x,y,font,color);\r\n\t\t}\r\n\r\n\t\t__proto.fillText=function(text,x,y,font,color,textAlign){\r\n\t\t\tthis.ctx.fillText(text,x+this.x,y+this.y,font,color,textAlign);\r\n\t\t}\r\n\r\n\t\t__proto.strokeText=function(text,x,y,font,color,lineWidth,textAlign){\r\n\t\t\tthis.ctx.strokeText(text,x+this.x,y+this.y,font,color,lineWidth,textAlign);\r\n\t\t}\r\n\r\n\t\t__proto.blendMode=function(type){\r\n\t\t\tthis.ctx.globalCompositeOperation=type;\r\n\t\t}\r\n\r\n\t\t__proto.flush=function(){\r\n\t\t\tthis.ctx.flush && this.ctx.flush();\r\n\t\t}\r\n\r\n\t\t__proto.addRenderObject=function(o){\r\n\t\t\tthis.ctx.addRenderObject(o);\r\n\t\t}\r\n\r\n\t\t__proto.beginClip=function(x,y,w,h){\r\n\t\t\tthis.ctx.beginClip && this.ctx.beginClip(x,y,w,h);\r\n\t\t}\r\n\r\n\t\t__proto.endClip=function(){\r\n\t\t\tthis.ctx.endClip && this.ctx.endClip();\r\n\t\t}\r\n\r\n\t\t__proto.fillTrangles=function(x,y,args){\r\n\t\t\tthis.ctx.fillTrangles(args[0],args[1],args[2],args[3],args.length > 4 ? args[4] :null);\r\n\t\t}\r\n\r\n\t\tRenderContext.PI2=2 *Math.PI;\r\n\t\treturn RenderContext;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*@private\r\n\t*精灵渲染器\r\n\t*/\r\n\t//class laya.renders.RenderSprite\r\n\tvar RenderSprite=(function(){\r\n\t\tfunction RenderSprite(type,next){\r\n\t\t\t//this._next=null;\r\n\t\t\t//this._fun=null;\r\n\t\t\tthis._next=next || RenderSprite.NORENDER;\r\n\t\t\tswitch (type){\r\n\t\t\t\tcase 0:\r\n\t\t\t\t\tthis._fun=this._no;\r\n\t\t\t\t\treturn;\r\n\t\t\t\tcase 0x01:\r\n\t\t\t\t\tthis._fun=this._image;\r\n\t\t\t\t\treturn;\r\n\t\t\t\tcase 0x02:\r\n\t\t\t\t\tthis._fun=this._alpha;\r\n\t\t\t\t\treturn;\r\n\t\t\t\tcase 0x04:\r\n\t\t\t\t\tthis._fun=this._transform;\r\n\t\t\t\t\treturn;\r\n\t\t\t\tcase 0x08:\r\n\t\t\t\t\tthis._fun=this._blend;\r\n\t\t\t\t\treturn;\r\n\t\t\t\tcase 0x10:\r\n\t\t\t\t\tthis._fun=this._canvas;\r\n\t\t\t\t\treturn;\r\n\t\t\t\tcase 0x40:\r\n\t\t\t\t\tthis._fun=this._mask;\r\n\t\t\t\t\treturn;\r\n\t\t\t\tcase 0x80:\r\n\t\t\t\t\tthis._fun=this._clip;\r\n\t\t\t\t\treturn;\r\n\t\t\t\tcase 0x100:\r\n\t\t\t\t\tthis._fun=this._style;\r\n\t\t\t\t\treturn;\r\n\t\t\t\tcase 0x200:\r\n\t\t\t\t\tthis._fun=this._graphics;\r\n\t\t\t\t\treturn;\r\n\t\t\t\tcase 0x800:\r\n\t\t\t\t\tthis._fun=this._childs;\r\n\t\t\t\t\treturn;\r\n\t\t\t\tcase 0x400:\r\n\t\t\t\t\tthis._fun=this._custom;\r\n\t\t\t\t\treturn;\r\n\t\t\t\tcase 0x01 | 0x200:\r\n\t\t\t\t\tthis._fun=this._image2;\r\n\t\t\t\t\treturn;\r\n\t\t\t\tcase 0x01 | 0x04 | 0x200:\r\n\t\t\t\t\tthis._fun=this._image2;\r\n\t\t\t\t\treturn;\r\n\t\t\t\tcase 0x20:\r\n\t\t\t\t\tthis._fun=Filter._filter;\r\n\t\t\t\t\treturn;\r\n\t\t\t\tcase 0x11111:\r\n\t\t\t\t\tthis._fun=RenderSprite._initRenderFun;\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\tthis.onCreate(type);\r\n\t\t}\r\n\r\n\t\t__class(RenderSprite,'laya.renders.RenderSprite');\r\n\t\tvar __proto=RenderSprite.prototype;\r\n\t\t__proto.onCreate=function(type){}\r\n\t\t__proto._style=function(sprite,context,x,y){\r\n\t\t\tsprite._style.render(sprite,context,x,y);\r\n\t\t\tvar next=this._next;\r\n\t\t\tnext._fun.call(next,sprite,context,x,y);\r\n\t\t}\r\n\r\n\t\t__proto._no=function(sprite,context,x,y){}\r\n\t\t__proto._custom=function(sprite,context,x,y){\r\n\t\t\tsprite.customRender(context,x,y);\r\n\t\t\tvar tf=sprite._style._tf;\r\n\t\t\tthis._next._fun.call(this._next,sprite,context,x-tf.translateX,y-tf.translateY);\r\n\t\t}\r\n\r\n\t\t__proto._clip=function(sprite,context,x,y){\r\n\t\t\tvar next=this._next;\r\n\t\t\tif (next==RenderSprite.NORENDER)return;\r\n\t\t\tvar r=sprite._style.scrollRect;\r\n\t\t\tcontext.ctx.save();\r\n\t\t\tcontext.ctx.clipRect(x,y,r.width,r.height);\r\n\t\t\tnext._fun.call(next,sprite,context,x-r.x,y-r.y);\r\n\t\t\tcontext.ctx.restore();\r\n\t\t}\r\n\r\n\t\t__proto._blend=function(sprite,context,x,y){\r\n\t\t\tvar style=sprite._style;\r\n\t\t\tif (style.blendMode){\r\n\t\t\t\tcontext.ctx.globalCompositeOperation=style.blendMode;\r\n\t\t\t};\r\n\t\t\tvar next=this._next;\r\n\t\t\tnext._fun.call(next,sprite,context,x,y);\r\n\t\t\tcontext.ctx.globalCompositeOperation=\"source-over\";\r\n\t\t}\r\n\r\n\t\t__proto._mask=function(sprite,context,x,y){\r\n\t\t\tvar next=this._next;\r\n\t\t\tnext._fun.call(next,sprite,context,x,y);\r\n\t\t\tvar mask=sprite.mask;\r\n\t\t\tif (mask){\r\n\t\t\t\tcontext.ctx.globalCompositeOperation=\"destination-in\";\r\n\t\t\t\tif (mask.numChildren > 0 || !mask.graphics._isOnlyOne()){\r\n\t\t\t\t\tmask.cacheAsBitmap=true;\r\n\t\t\t\t}\r\n\t\t\t\tmask.render(context,x,y);\r\n\t\t\t}\r\n\t\t\tcontext.ctx.globalCompositeOperation=\"source-over\";\r\n\t\t}\r\n\r\n\t\t__proto._graphics=function(sprite,context,x,y){\r\n\t\t\tvar tf=sprite._style._tf;\r\n\t\t\tsprite._graphics && sprite._graphics._render(sprite,context,x-tf.translateX,y-tf.translateY);\r\n\t\t\tvar next=this._next;\r\n\t\t\tnext._fun.call(next,sprite,context,x,y);\r\n\t\t}\r\n\r\n\t\t__proto._image=function(sprite,context,x,y){\r\n\t\t\tvar style=sprite._style;\r\n\t\t\tcontext.ctx.drawTexture2(x,y,style._tf.translateX,style._tf.translateY,sprite.transform,style.alpha,style.blendMode,sprite._graphics._one);\r\n\t\t}\r\n\r\n\t\t__proto._image2=function(sprite,context,x,y){\r\n\t\t\tvar tf=sprite._style._tf;\r\n\t\t\tcontext.ctx.drawTexture2(x,y,tf.translateX,tf.translateY,sprite.transform,1,null,sprite._graphics._one);\r\n\t\t}\r\n\r\n\t\t__proto._alpha=function(sprite,context,x,y){\r\n\t\t\tvar style=sprite._style;\r\n\t\t\tvar alpha;\r\n\t\t\tif ((alpha=style.alpha)> 0.01){\r\n\t\t\t\tvar temp=context.ctx.globalAlpha;\r\n\t\t\t\tcontext.ctx.globalAlpha *=alpha;\r\n\t\t\t\tvar next=this._next;\r\n\t\t\t\tnext._fun.call(next,sprite,context,x,y);\r\n\t\t\t\tcontext.ctx.globalAlpha=temp;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__proto._transform=function(sprite,context,x,y){\r\n\t\t\tvar transform=sprite.transform,_next=this._next;\r\n\t\t\tif (transform && _next !=RenderSprite.NORENDER){\r\n\t\t\t\tcontext.save();\r\n\t\t\t\tcontext.transform(transform.a,transform.b,transform.c,transform.d,transform.tx+x,transform.ty+y);\r\n\t\t\t\t_next._fun.call(_next,sprite,context,0,0);\r\n\t\t\t\tcontext.restore();\r\n\t\t\t}else\r\n\t\t\t_next._fun.call(_next,sprite,context,x,y);\r\n\t\t}\r\n\r\n\t\t__proto._childs=function(sprite,context,x,y){\r\n\t\t\tvar style=sprite._style;\r\n\t\t\tx+=-style._tf.translateX+style.paddingLeft;\r\n\t\t\ty+=-style._tf.translateY+style.paddingTop;\r\n\t\t\tif (style._calculation){\r\n\t\t\t\tvar words=sprite._getWords();\r\n\t\t\t\twords && context.fillWords(words,x,y,(style).font,(style).color);\r\n\t\t\t};\r\n\t\t\tvar childs=sprite._childs,n=childs.length,ele;\r\n\t\t\tif (sprite.viewport || (sprite.optimizeScrollRect && sprite._style.scrollRect)){\r\n\t\t\t\tvar rect=sprite.viewport || sprite._style.scrollRect;\r\n\t\t\t\tvar left=rect.x;\r\n\t\t\t\tvar top=rect.y;\r\n\t\t\t\tvar right=rect.right;\r\n\t\t\t\tvar bottom=rect.bottom;\r\n\t\t\t\tvar _x=NaN,_y=NaN;\r\n\t\t\t\tfor (i=0;i < n;++i){\r\n\t\t\t\t\tif ((ele=childs [i]).visible && ((_x=ele._x)< right && (_x+ele.width)> left && (_y=ele._y)< bottom && (_y+ele.height)> top)){\r\n\t\t\t\t\t\tele.render(context,x,y);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t}else {\r\n\t\t\t\tfor (var i=0;i < n;++i)\r\n\t\t\t\t(ele=(childs [i]))._style.visible && ele.render(context,x,y);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__proto._canvas=function(sprite,context,x,y){\r\n\t\t\tvar _cacheCanvas=sprite._$P.cacheCanvas;\r\n\t\t\tvar _next=this._next;\r\n\t\t\tif (!_cacheCanvas){\r\n\t\t\t\t_next._fun.call(_next,sprite,tx,x,y);\r\n\t\t\t\treturn;\r\n\t\t\t};\r\n\t\t\tvar tx=_cacheCanvas.ctx;\r\n\t\t\tvar _repaint=sprite._needRepaint()|| (!tx);\r\n\t\t\tvar canvas;\r\n\t\t\tvar left;\r\n\t\t\tvar top;\r\n\t\t\tvar tRec;\r\n\t\t\t_cacheCanvas.type==='bitmap' ? (Stat.canvasBitmap++):(Stat.canvasNormal++);\r\n\t\t\tif (_repaint){\r\n\t\t\t\tif (!_cacheCanvas._cacheRec)\r\n\t\t\t\t\t_cacheCanvas._cacheRec=new Rectangle();\r\n\t\t\t\tvar w,h;\r\n\t\t\t\ttRec=sprite.getSelfBounds();\r\n\t\t\t\ttRec.x-=sprite.pivotX;\r\n\t\t\t\ttRec.y-=sprite.pivotY;\r\n\t\t\t\ttRec.x-=16;\r\n\t\t\t\ttRec.y-=16;\r\n\t\t\t\ttRec.width+=32;\r\n\t\t\t\ttRec.height+=32;\r\n\t\t\t\ttRec.x=Math.floor(tRec.x+x)-x;\r\n\t\t\t\ttRec.y=Math.floor(tRec.y+y)-y;\r\n\t\t\t\ttRec.width=Math.floor(tRec.width);\r\n\t\t\t\ttRec.height=Math.floor(tRec.height);\r\n\t\t\t\t_cacheCanvas._cacheRec.copyFrom(tRec);\r\n\t\t\t\ttRec=_cacheCanvas._cacheRec;\r\n\t\t\t\tvar scaleX=Render.isWebGL ? 1 :Browser.pixelRatio *Laya.stage.clientScaleX;\r\n\t\t\t\tvar scaleY=Render.isWebGL ? 1 :Browser.pixelRatio *Laya.stage.clientScaleY;\r\n\t\t\t\tif (!Render.isWebGL){\r\n\t\t\t\t\tvar chainScaleX=1;\r\n\t\t\t\t\tvar chainScaleY=1;\r\n\t\t\t\t\tvar tar;\r\n\t\t\t\t\ttar=sprite;\r\n\t\t\t\t\twhile (tar && tar !=Laya.stage){\r\n\t\t\t\t\t\tchainScaleX *=tar.scaleX;\r\n\t\t\t\t\t\tchainScaleY *=tar.scaleY;\r\n\t\t\t\t\t\ttar=tar.parent;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (Render.isWebGL){\r\n\t\t\t\t\t\tif (chainScaleX < 1)scaleX *=chainScaleX;\r\n\t\t\t\t\t\tif (chainScaleY < 1)scaleY *=chainScaleY;\r\n\t\t\t\t\t\t}else {\r\n\t\t\t\t\t\tif (chainScaleX > 1)scaleX *=chainScaleX;\r\n\t\t\t\t\t\tif (chainScaleY > 1)scaleY *=chainScaleY;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tw=tRec.width *scaleX;\r\n\t\t\t\th=tRec.height *scaleY;\r\n\t\t\t\tleft=tRec.x;\r\n\t\t\t\ttop=tRec.y;\r\n\t\t\t\tif (Render.isWebGL && _cacheCanvas.type==='bitmap' && (w > 2048 || h > 2048)){\r\n\t\t\t\t\tconsole.log(\"cache bitmap size larger than 2048,cache ignored\");\r\n\t\t\t\t\tif (_cacheCanvas.ctx){\r\n\t\t\t\t\t\tPool.recover(\"RenderContext\",_cacheCanvas.ctx);\r\n\t\t\t\t\t\t_cacheCanvas.ctx=null;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t_next._fun.call(_next,sprite,context,x,y);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (!tx){\r\n\t\t\t\t\ttx=_cacheCanvas.ctx=Pool.getItem(\"RenderContext\")|| new RenderContext(w,h,HTMLCanvas.create(\"AUTO\"));\r\n\t\t\t\t\ttx.ctx.sprite=sprite;\r\n\t\t\t\t}\r\n\t\t\t\tcanvas=tx.canvas;\r\n\t\t\t\tif (_cacheCanvas.type==='bitmap')canvas.context.asBitmap=true;\r\n\t\t\t\tcanvas.clear();\r\n\t\t\t\t(canvas.width !=w || canvas.height !=h)&& canvas.size(w,h);\r\n\t\t\t\tvar t;\r\n\t\t\t\tif (scaleX !=1 || scaleY !=1){\r\n\t\t\t\t\tvar ctx=(tx).ctx;\r\n\t\t\t\t\tctx.save();\r\n\t\t\t\t\tctx.scale(scaleX,scaleY);\r\n\t\t\t\t\tif (!Render.isConchWebGL && Render.isConchApp){\r\n\t\t\t\t\t\tt=sprite._$P.cf;\r\n\t\t\t\t\t\tt && ctx.setFilterMatrix && ctx.setFilterMatrix(t._mat,t._alpha);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t_next._fun.call(_next,sprite,tx,-left,-top);\r\n\t\t\t\t\tctx.restore();\r\n\t\t\t\t\tif (!Render.isConchApp || Render.isConchWebGL)sprite._applyFilters();\r\n\t\t\t\t\t}else {\r\n\t\t\t\t\tctx=(tx).ctx;\r\n\t\t\t\t\tif (!Render.isConchWebGL && Render.isConchApp){\r\n\t\t\t\t\t\tt=sprite._$P.cf;\r\n\t\t\t\t\t\tt && ctx.setFilterMatrix && ctx.setFilterMatrix(t._mat,t._alpha);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t_next._fun.call(_next,sprite,tx,-left,-top);\r\n\t\t\t\t\tif (!Render.isConchApp || Render.isConchWebGL)sprite._applyFilters();\r\n\t\t\t\t}\r\n\t\t\t\tif (sprite._$P.staticCache)_cacheCanvas.reCache=false;\r\n\t\t\t\tStat.canvasReCache++;\r\n\t\t\t\t}else {\r\n\t\t\t\ttRec=_cacheCanvas._cacheRec;\r\n\t\t\t\tleft=tRec.x;\r\n\t\t\t\ttop=tRec.y;\r\n\t\t\t\tcanvas=tx.canvas;\r\n\t\t\t}\r\n\t\t\tcontext.drawCanvas(canvas,x+left,y+top,tRec.width,tRec.height);\r\n\t\t}\r\n\r\n\t\tRenderSprite.__init__=function(){\r\n\t\t\tvar i=0,len=0;\r\n\t\t\tvar initRender;\r\n\t\t\tinitRender=RunDriver.createRenderSprite(0x11111,null);\r\n\t\t\tlen=RenderSprite.renders.length=0x800 *2;\r\n\t\t\tfor (i=0;i < len;i++)\r\n\t\t\tRenderSprite.renders[i]=initRender;\r\n\t\t\tRenderSprite.renders[0]=RunDriver.createRenderSprite(0,null);\r\n\t\t\tfunction _initSame (value,o){\r\n\t\t\t\tvar n=0;\r\n\t\t\t\tfor (var i=0;i < value.length;i++){\r\n\t\t\t\t\tn |=value[i];\r\n\t\t\t\t\tRenderSprite.renders[n]=o;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t_initSame([0x01,0x200,0x04,0x02],new RenderSprite(0x01,null));\r\n\t\t\tRenderSprite.renders[0x01 | 0x200]=RunDriver.createRenderSprite(0x01 | 0x200,null);\r\n\t\t\tRenderSprite.renders[0x01 | 0x04 | 0x200]=new RenderSprite(0x01 | 0x04 | 0x200,null);\r\n\t\t}\r\n\r\n\t\tRenderSprite._initRenderFun=function(sprite,context,x,y){\r\n\t\t\tvar type=sprite._renderType;\r\n\t\t\tvar r=RenderSprite.renders[type]=RenderSprite._getTypeRender(type);\r\n\t\t\tr._fun(sprite,context,x,y);\r\n\t\t}\r\n\r\n\t\tRenderSprite._getTypeRender=function(type){\r\n\t\t\tvar rst=null;\r\n\t\t\tvar tType=0x800;\r\n\t\t\twhile (tType > 1){\r\n\t\t\t\tif (tType & type)\r\n\t\t\t\t\trst=RunDriver.createRenderSprite(tType,rst);\r\n\t\t\t\ttType=tType >> 1;\r\n\t\t\t}\r\n\t\t\treturn rst;\r\n\t\t}\r\n\r\n\t\tRenderSprite.IMAGE=0x01;\r\n\t\tRenderSprite.ALPHA=0x02;\r\n\t\tRenderSprite.TRANSFORM=0x04;\r\n\t\tRenderSprite.BLEND=0x08;\r\n\t\tRenderSprite.CANVAS=0x10;\r\n\t\tRenderSprite.FILTERS=0x20;\r\n\t\tRenderSprite.MASK=0x40;\r\n\t\tRenderSprite.CLIP=0x80;\r\n\t\tRenderSprite.STYLE=0x100;\r\n\t\tRenderSprite.GRAPHICS=0x200;\r\n\t\tRenderSprite.CUSTOM=0x400;\r\n\t\tRenderSprite.CHILDS=0x800;\r\n\t\tRenderSprite.INIT=0x11111;\r\n\t\tRenderSprite.renders=[];\r\n\t\tRenderSprite.NORENDER=new RenderSprite(0,null);\r\n\t\treturn RenderSprite;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*@private\r\n\t*Context扩展类\r\n\t*/\r\n\t//class laya.resource.Context\r\n\tvar Context=(function(){\r\n\t\tfunction Context(){\r\n\t\t\t//this._canvas=null;\r\n\t\t\tthis._repaint=false;\r\n\t\t}\r\n\r\n\t\t__class(Context,'laya.resource.Context');\r\n\t\tvar __proto=Context.prototype;\r\n\t\t__proto.setIsMainContext=function(){}\r\n\t\t__proto.drawTextures=function(tex,pos,tx,ty){\r\n\t\t\tStat.drawCall+=pos.length / 2;\r\n\t\t\tvar w=tex.bitmap.width;\r\n\t\t\tvar h=tex.bitmap.height;\r\n\t\t\tfor (var i=0,sz=pos.length;i < sz;i+=2){\r\n\t\t\t\tthis.drawTexture(tex,pos[i],pos[i+1],w,h,tx,ty);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/***@private */\r\n\t\t__proto.drawCanvas=function(canvas,x,y,width,height){\r\n\t\t\tStat.drawCall++;\r\n\t\t\tthis.drawImage(canvas.source,x,y,width,height);\r\n\t\t}\r\n\r\n\t\t/***@private */\r\n\t\t__proto.fillRect=function(x,y,width,height,style){\r\n\t\t\tStat.drawCall++;\r\n\t\t\tstyle && (this.fillStyle=style);\r\n\t\t\tthis.__fillRect(x,y,width,height);\r\n\t\t}\r\n\r\n\t\t/***@private */\r\n\t\t__proto.fillText=function(text,x,y,font,color,textAlign){\r\n\t\t\tStat.drawCall++;\r\n\t\t\tif (arguments.length > 3 && font !=null){\r\n\t\t\t\tthis.font=font;\r\n\t\t\t\tthis.fillStyle=color;\r\n\t\t\t\tthis.textAlign=textAlign;\r\n\t\t\t\tthis.textBaseline=\"top\";\r\n\t\t\t}\r\n\t\t\tthis.__fillText(text,x,y);\r\n\t\t}\r\n\r\n\t\t/***@private */\r\n\t\t__proto.fillBorderText=function(text,x,y,font,fillColor,borderColor,lineWidth,textAlign){\r\n\t\t\tStat.drawCall++;\r\n\t\t\tthis.font=font;\r\n\t\t\tthis.fillStyle=fillColor;\r\n\t\t\tthis.textBaseline=\"top\";\r\n\t\t\tthis.strokeStyle=borderColor;\r\n\t\t\tthis.lineWidth=lineWidth;\r\n\t\t\tthis.textAlign=textAlign;\r\n\t\t\tthis.__strokeText(text,x,y);\r\n\t\t\tthis.__fillText(text,x,y);\r\n\t\t}\r\n\r\n\t\t/***@private */\r\n\t\t__proto.strokeText=function(text,x,y,font,color,lineWidth,textAlign){\r\n\t\t\tStat.drawCall++;\r\n\t\t\tif (arguments.length > 3 && font !=null){\r\n\t\t\t\tthis.font=font;\r\n\t\t\t\tthis.strokeStyle=color;\r\n\t\t\t\tthis.lineWidth=lineWidth;\r\n\t\t\t\tthis.textAlign=textAlign;\r\n\t\t\t\tthis.textBaseline=\"top\";\r\n\t\t\t}\r\n\t\t\tthis.__strokeText(text,x,y);\r\n\t\t}\r\n\r\n\t\t/***@private */\r\n\t\t__proto.transformByMatrix=function(value){\r\n\t\t\tthis.transform(value.a,value.b,value.c,value.d,value.tx,value.ty);\r\n\t\t}\r\n\r\n\t\t/***@private */\r\n\t\t__proto.setTransformByMatrix=function(value){\r\n\t\t\tthis.setTransform(value.a,value.b,value.c,value.d,value.tx,value.ty);\r\n\t\t}\r\n\r\n\t\t/***@private */\r\n\t\t__proto.clipRect=function(x,y,width,height){\r\n\t\t\tStat.drawCall++;\r\n\t\t\tthis.beginPath();\r\n\t\t\tthis.rect(x,y,width,height);\r\n\t\t\tthis.clip();\r\n\t\t}\r\n\r\n\t\t/***@private */\r\n\t\t__proto.drawTexture=function(tex,x,y,width,height,tx,ty){\r\n\t\t\tStat.drawCall++;\r\n\t\t\tvar uv=tex.uv,w=tex.bitmap.width,h=tex.bitmap.height;\r\n\t\t\tthis.drawImage(tex.source,uv[0] *w,uv[1] *h,(uv[2]-uv[0])*w,(uv[5]-uv[3])*h,x+tx,y+ty,width,height);\r\n\t\t}\r\n\r\n\t\t/***@private */\r\n\t\t__proto.drawTextureWithTransform=function(tex,x,y,width,height,m,tx,ty,alpha){\r\n\t\t\tStat.drawCall++;\r\n\t\t\tvar uv=tex.uv,w=tex.bitmap.width,h=tex.bitmap.height;\r\n\t\t\tthis.save();\r\n\t\t\talpha !=1 && (this.globalAlpha *=alpha);\r\n\t\t\tif (m){\r\n\t\t\t\tthis.transform(m.a,m.b,m.c,m.d,m.tx+tx,m.ty+ty);\r\n\t\t\t\tthis.drawImage(tex.source,uv[0] *w,uv[1] *h,(uv[2]-uv[0])*w,(uv[5]-uv[3])*h,x ,y,width,height);\r\n\t\t\t\t}else {\r\n\t\t\t\tthis.drawImage(tex.source,uv[0] *w,uv[1] *h,(uv[2]-uv[0])*w,(uv[5]-uv[3])*h,x+tx ,y+ty,width,height);\r\n\t\t\t}\r\n\t\t\tthis.restore();\r\n\t\t}\r\n\r\n\t\t/***@private */\r\n\t\t__proto.drawTexture2=function(x,y,pivotX,pivotY,m,alpha,blendMode,args2){\r\n\t\t\t'use strict';\r\n\t\t\tvar tex=args2[0];\r\n\t\t\tif (!(tex.loaded && tex.bitmap && tex.source)){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tStat.drawCall++;\r\n\t\t\tvar alphaChanged=alpha!==1;\r\n\t\t\tif (alphaChanged){\r\n\t\t\t\tvar temp=this.globalAlpha;\r\n\t\t\t\tthis.globalAlpha *=alpha;\r\n\t\t\t};\r\n\t\t\tvar uv=tex.uv,w=tex.bitmap.width,h=tex.bitmap.height;\r\n\t\t\tif (m){\r\n\t\t\t\tthis.save();\r\n\t\t\t\tthis.transform(m.a,m.b,m.c,m.d,m.tx+x,m.ty+y);\r\n\t\t\t\tthis.drawImage(tex.source,uv[0] *w,uv[1] *h,(uv[2]-uv[0])*w,(uv[5]-uv[3])*h,args2[1]-pivotX ,args2[2]-pivotY,args2[3],args2[4]);\r\n\t\t\t\tthis.restore();\r\n\t\t\t\t}else {\r\n\t\t\t\tthis.drawImage(tex.source,uv[0] *w,uv[1] *h,(uv[2]-uv[0])*w,(uv[5]-uv[3])*h,args2[1]-pivotX+x ,args2[2]-pivotY+y,args2[3],args2[4]);\r\n\t\t\t}\r\n\t\t\tif (alphaChanged)this.globalAlpha=temp;\r\n\t\t}\r\n\r\n\t\t__proto.fillTexture=function(texture,x,y,width,height,type,offset,other){\r\n\t\t\tif (!other.pat){\r\n\t\t\t\tif (texture.uv !=Texture.DEF_UV){\r\n\t\t\t\t\tvar canvas=new HTMLCanvas(\"2D\");\r\n\t\t\t\t\tcanvas.getContext('2d');\r\n\t\t\t\t\tcanvas.size(texture.width,texture.height);\r\n\t\t\t\t\tcanvas.context.drawTexture(texture,0,0,texture.width,texture.height,0,0);\r\n\t\t\t\t\ttexture=new Texture(canvas);\r\n\t\t\t\t}\r\n\t\t\t\tother.pat=this.createPattern(texture.bitmap.source,type);\r\n\t\t\t};\r\n\t\t\tvar oX=x,oY=y;\r\n\t\t\tvar sX=0,sY=0;\r\n\t\t\tif (offset){\r\n\t\t\t\toX+=offset.x % texture.width;\r\n\t\t\t\toY+=offset.y % texture.height;\r\n\t\t\t\tsX-=offset.x % texture.width;\r\n\t\t\t\tsY-=offset.y % texture.height;\r\n\t\t\t}\r\n\t\t\tthis.translate(oX,oY);\r\n\t\t\tthis.fillRect(sX,sY,width,height,other.pat);\r\n\t\t\tthis.translate(-oX,-oY);\r\n\t\t}\r\n\r\n\t\t/***@private */\r\n\t\t__proto.flush=function(){\r\n\t\t\treturn 0;\r\n\t\t}\r\n\r\n\t\t/***@private */\r\n\t\t__proto.fillWords=function(words,x,y,font,color){\r\n\t\t\tfont && (this.font=font);\r\n\t\t\tcolor && (this.fillStyle=color);\r\n\t\t\tvar _this=this;\r\n\t\t\tthis.textBaseline=\"top\";\r\n\t\t\tthis.textAlign='left';\r\n\t\t\tfor (var i=0,n=words.length;i < n;i++){\r\n\t\t\t\tvar a=words[i];\r\n\t\t\t\tthis.__fillText(a.char,a.x+x,a.y+y);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/***@private */\r\n\t\t__proto.destroy=function(){\r\n\t\t\tthis.canvas.width=this.canvas.height=0;\r\n\t\t}\r\n\r\n\t\t/***@private */\r\n\t\t__proto.clear=function(){\r\n\t\t\tthis.clearRect(0,0,this._canvas.width,this._canvas.height);\r\n\t\t\tthis._repaint=false;\r\n\t\t}\r\n\r\n\t\t__proto.drawCurves=function(x,y,args){\r\n\t\t\tthis.beginPath();\r\n\t\t\tthis.strokeStyle=args[3];\r\n\t\t\tthis.lineWidth=args[4];\r\n\t\t\tvar points=args[2];\r\n\t\t\tx+=args[0],y+=args[1];\r\n\t\t\tthis.moveTo(x+points[0],y+points[1]);\r\n\t\t\tvar i=2,n=points.length;\r\n\t\t\twhile (i < n){\r\n\t\t\t\tthis.quadraticCurveTo(x+points[i++],y+points[i++],x+points[i++],y+points[i++]);\r\n\t\t\t}\r\n\t\t\tthis.stroke();\r\n\t\t}\r\n\r\n\t\tContext.__init__=function(to){\r\n\t\t\tvar from=laya.resource.Context.prototype;\r\n\t\t\tto=to || CanvasRenderingContext2D.prototype;\r\n\t\t\tto.__fillText=to.fillText;\r\n\t\t\tto.__fillRect=to.fillRect;\r\n\t\t\tto.__strokeText=to.strokeText;\r\n\t\t\tvar funs=['drawTextures','fillWords','setIsMainContext','fillRect','strokeText','fillTexture','fillText','transformByMatrix','setTransformByMatrix','clipRect','drawTexture','drawTexture2','drawTextureWithTransform','flush','clear','destroy','drawCanvas','fillBorderText','drawCurves'];\r\n\t\t\tfuns.forEach(function(i){\r\n\t\t\t\tto[i]=from[i] || to[i];\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tContext._default=new Context();\r\n\t\treturn Context;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*<code>ResourceManager</code> 是资源管理类。它用于资源的载入、获取、销毁。\r\n\t*/\r\n\t//class laya.resource.ResourceManager\r\n\tvar ResourceManager=(function(){\r\n\t\tfunction ResourceManager(){\r\n\t\t\tthis._id=0;\r\n\t\t\tthis._name=null;\r\n\t\t\tthis._resources=null;\r\n\t\t\tthis._memorySize=0;\r\n\t\t\tthis._garbageCollectionRate=NaN;\r\n\t\t\tthis._isOverflow=false;\r\n\t\t\tthis.autoRelease=false;\r\n\t\t\tthis.autoReleaseMaxSize=0;\r\n\t\t\tthis._id=++ResourceManager._uniqueIDCounter;\r\n\t\t\tthis._name=\"Content Manager\";\r\n\t\t\tResourceManager._isResourceManagersSorted=false;\r\n\t\t\tthis._memorySize=0;\r\n\t\t\tthis._isOverflow=false;\r\n\t\t\tthis.autoRelease=false;\r\n\t\t\tthis.autoReleaseMaxSize=1024 *1024 *512;\r\n\t\t\tthis._garbageCollectionRate=0.2;\r\n\t\t\tResourceManager._resourceManagers.push(this);\r\n\t\t\tthis._resources=[];\r\n\t\t}\r\n\r\n\t\t__class(ResourceManager,'laya.resource.ResourceManager');\r\n\t\tvar __proto=ResourceManager.prototype;\r\n\t\tLaya.imps(__proto,{\"laya.resource.IDispose\":true})\r\n\t\t/**\r\n\t\t*获取指定索引的资源 Resource 对象。\r\n\t\t*@param 索引。\r\n\t\t*@return 资源 Resource 对象。\r\n\t\t*/\r\n\t\t__proto.getResourceByIndex=function(index){\r\n\t\t\treturn this._resources[index];\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*获取此管理器所管理的资源个数。\r\n\t\t*@return 资源个数。\r\n\t\t*/\r\n\t\t__proto.getResourcesLength=function(){\r\n\t\t\treturn this._resources.length;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*添加指定资源。\r\n\t\t*@param resource 需要添加的资源 Resource 对象。\r\n\t\t*@return 是否添加成功。\r\n\t\t*/\r\n\t\t__proto.addResource=function(resource){\r\n\t\t\tif (resource.resourceManager)\r\n\t\t\t\tresource.resourceManager.removeResource(resource);\r\n\t\t\tvar index=this._resources.indexOf(resource);\r\n\t\t\tif (index===-1){\r\n\t\t\t\tresource._resourceManager=this;\r\n\t\t\t\tthis._resources.push(resource);\r\n\t\t\t\tthis.addSize(resource.memorySize);\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*移除指定资源。\r\n\t\t*@param resource 需要移除的资源 Resource 对象\r\n\t\t*@return 是否移除成功。\r\n\t\t*/\r\n\t\t__proto.removeResource=function(resource){\r\n\t\t\tvar index=this._resources.indexOf(resource);\r\n\t\t\tif (index!==-1){\r\n\t\t\t\tthis._resources.splice(index,1);\r\n\t\t\t\tresource._resourceManager=null;\r\n\t\t\t\tthis._memorySize-=resource.memorySize;\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*卸载此资源管理器载入的资源。\r\n\t\t*/\r\n\t\t__proto.unload=function(){\r\n\t\t\tvar tempResources=this._resources.slice(0,this._resources.length);\r\n\t\t\tfor (var i=0;i < tempResources.length;i++){\r\n\t\t\t\tvar resource=tempResources[i];\r\n\t\t\t\tresource.dispose();\r\n\t\t\t}\r\n\t\t\ttempResources.length=0;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*设置唯一名字。\r\n\t\t*@param newName 名字，如果名字重复则自动加上“-copy”。\r\n\t\t*/\r\n\t\t__proto.setUniqueName=function(newName){\r\n\t\t\tvar isUnique=true;\r\n\t\t\tfor (var i=0;i < ResourceManager._resourceManagers.length;i++){\r\n\t\t\t\tif (ResourceManager._resourceManagers[i]._name!==newName || ResourceManager._resourceManagers[i]===this)\r\n\t\t\t\t\tcontinue ;\r\n\t\t\t\tisUnique=false;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (isUnique){\r\n\t\t\t\tif (this.name !=newName){\r\n\t\t\t\t\tthis.name=newName;\r\n\t\t\t\t\tResourceManager._isResourceManagersSorted=false;\r\n\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\tthis.setUniqueName(newName.concat(\"-copy\"));\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**释放资源。*/\r\n\t\t__proto.dispose=function(){\r\n\t\t\tif (this===ResourceManager._systemResourceManager)\r\n\t\t\t\tthrow new Error(\"systemResourceManager不能被释放！\");\r\n\t\t\tResourceManager._resourceManagers.splice(ResourceManager._resourceManagers.indexOf(this),1);\r\n\t\t\tResourceManager._isResourceManagersSorted=false;\r\n\t\t\tvar tempResources=this._resources.slice(0,this._resources.length);\r\n\t\t\tfor (var i=0;i < tempResources.length;i++){\r\n\t\t\t\tvar resource=tempResources[i];\r\n\t\t\t\tresource.resourceManager.removeResource(resource);\r\n\t\t\t\tresource.dispose();\r\n\t\t\t}\r\n\t\t\ttempResources.length=0;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*增加内存。\r\n\t\t*@param add 需要增加的内存大小。\r\n\t\t*/\r\n\t\t__proto.addSize=function(add){\r\n\t\t\tif (add){\r\n\t\t\t\tif (this.autoRelease && add > 0)\r\n\t\t\t\t\t((this._memorySize+add)> this.autoReleaseMaxSize)&& (this.garbageCollection((1-this._garbageCollectionRate)*this.autoReleaseMaxSize));\r\n\t\t\t\tthis._memorySize+=add;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*垃圾回收。\r\n\t\t*@param reserveSize 保留尺寸。\r\n\t\t*/\r\n\t\t__proto.garbageCollection=function(reserveSize){\r\n\t\t\tvar all=this._resources;\r\n\t\t\tall=all.slice();\r\n\t\t\tall.sort(function(a,b){\r\n\t\t\t\tif (!a || !b)\r\n\t\t\t\t\tthrow new Error(\"a或b不能为空！\");\r\n\t\t\t\tif (a.released && b.released)\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\telse if (a.released)\r\n\t\t\t\treturn 1;\r\n\t\t\t\telse if (b.released)\r\n\t\t\t\treturn-1;\r\n\t\t\t\treturn a.lastUseFrameCount-b.lastUseFrameCount;\r\n\t\t\t});\r\n\t\t\tvar currentFrameCount=Stat.loopCount;\r\n\t\t\tfor (var i=0,n=all.length;i < n;i++){\r\n\t\t\t\tvar resou=all[i];\r\n\t\t\t\tif (currentFrameCount-resou.lastUseFrameCount > 1){\r\n\t\t\t\t\tresou.releaseResource();\r\n\t\t\t\t\t}else {\r\n\t\t\t\t\tif (this._memorySize >=reserveSize)\r\n\t\t\t\t\t\tthis._isOverflow=true;\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (this._memorySize < reserveSize){\r\n\t\t\t\t\tthis._isOverflow=false;\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*此管理器所管理资源的累计内存，以字节为单位。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'memorySize',function(){\r\n\t\t\treturn this._memorySize;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*名字。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'name',function(){\r\n\t\t\treturn this._name;\r\n\t\t\t},function(value){\r\n\t\t\tif ((value || value!==\"\")&& this._name!==value){\r\n\t\t\t\tthis._name=value;\r\n\t\t\t\tResourceManager._isResourceManagersSorted=false;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*唯一标识 ID 。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'id',function(){\r\n\t\t\treturn this._id;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*排序后的资源管理器列表。\r\n\t\t*/\r\n\t\t__getset(1,ResourceManager,'sortedResourceManagersByName',function(){\r\n\t\t\tif (!ResourceManager._isResourceManagersSorted){\r\n\t\t\t\tResourceManager._isResourceManagersSorted=true;\r\n\t\t\t\tResourceManager._resourceManagers.sort(ResourceManager.compareResourceManagersByName);\r\n\t\t\t}\r\n\t\t\treturn ResourceManager._resourceManagers;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*系统资源管理器。\r\n\t\t*/\r\n\t\t__getset(1,ResourceManager,'systemResourceManager',function(){\r\n\t\t\t(ResourceManager._systemResourceManager===null)&& (ResourceManager._systemResourceManager=new ResourceManager(),ResourceManager._systemResourceManager._name=\"System Resource Manager\");\r\n\t\t\treturn ResourceManager._systemResourceManager;\r\n\t\t});\r\n\r\n\t\tResourceManager.__init__=function(){\r\n\t\t\tResourceManager.currentResourceManager=ResourceManager.systemResourceManager;\r\n\t\t}\r\n\r\n\t\tResourceManager.getLoadedResourceManagerByIndex=function(index){\r\n\t\t\treturn ResourceManager._resourceManagers[index];\r\n\t\t}\r\n\r\n\t\tResourceManager.getLoadedResourceManagersCount=function(){\r\n\t\t\treturn ResourceManager._resourceManagers.length;\r\n\t\t}\r\n\r\n\t\tResourceManager.recreateContentManagers=function(force){\r\n\t\t\t(force===void 0)&& (force=false);\r\n\t\t\tvar temp=ResourceManager.currentResourceManager;\r\n\t\t\tfor (var i=0;i < ResourceManager._resourceManagers.length;i++){\r\n\t\t\t\tResourceManager.currentResourceManager=ResourceManager._resourceManagers[i];\r\n\t\t\t\tfor (var j=0;j < ResourceManager.currentResourceManager._resources.length;j++){\r\n\t\t\t\t\tResourceManager.currentResourceManager._resources[j].releaseResource(force);\r\n\t\t\t\t\tResourceManager.currentResourceManager._resources[j].activeResource(force);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tResourceManager.currentResourceManager=temp;\r\n\t\t}\r\n\r\n\t\tResourceManager.releaseContentManagers=function(force){\r\n\t\t\t(force===void 0)&& (force=false);\r\n\t\t\tvar temp=ResourceManager.currentResourceManager;\r\n\t\t\tfor (var i=0;i < ResourceManager._resourceManagers.length;i++){\r\n\t\t\t\tResourceManager.currentResourceManager=ResourceManager._resourceManagers[i];\r\n\t\t\t\tfor (var j=0;j < ResourceManager.currentResourceManager._resources.length;j++){\r\n\t\t\t\t\tvar resource=ResourceManager.currentResourceManager._resources[j];\r\n\t\t\t\t\t(!resource.released)&& (resource.releaseResource(force));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tResourceManager.currentResourceManager=temp;\r\n\t\t}\r\n\r\n\t\tResourceManager.compareResourceManagersByName=function(left,right){\r\n\t\t\tif (left==right)\r\n\t\t\t\treturn 0;\r\n\t\t\tvar x=left._name;\r\n\t\t\tvar y=right._name;\r\n\t\t\tif (x==null){\r\n\t\t\t\tif (y==null)\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\telse\r\n\t\t\t\treturn-1;\r\n\t\t\t\t}else {\r\n\t\t\t\tif (y==null)\r\n\t\t\t\t\treturn 1;\r\n\t\t\t\telse {\r\n\t\t\t\t\tvar retval=x.localeCompare(y);\r\n\t\t\t\t\tif (retval !=0)\r\n\t\t\t\t\t\treturn retval;\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tright.setUniqueName(y);\r\n\t\t\t\t\t\ty=right._name;\r\n\t\t\t\t\t\treturn x.localeCompare(y);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tResourceManager._uniqueIDCounter=0;\r\n\t\tResourceManager._systemResourceManager=null\r\n\t\tResourceManager._isResourceManagersSorted=false;\r\n\t\tResourceManager._resourceManagers=[];\r\n\t\tResourceManager.currentResourceManager=null\r\n\t\treturn ResourceManager;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*@private\r\n\t*/\r\n\t//class laya.resource.WXCanvas\r\n\tvar WXCanvas=(function(){\r\n\t\tfunction WXCanvas(id){\r\n\t\t\tthis._ctx=null;\r\n\t\t\tthis._id=null;\r\n\t\t\tthis.style={};\r\n\t\t\tthis._id=id;\r\n\t\t}\r\n\r\n\t\t__class(WXCanvas,'laya.resource.WXCanvas');\r\n\t\tvar __proto=WXCanvas.prototype;\r\n\t\t__proto.getContext=function(){\r\n\t\t\tvar wx=laya.resource.WXCanvas.wx;\r\n\t\t\tvar ctx=wx.createContext();\r\n\t\t\tctx.id=this._id;\r\n\t\t\tctx.fillRect=function (x,y,w,h){\r\n\t\t\t\tthis.rect(x,y,w,h);\r\n\t\t\t\tthis.fill();\r\n\t\t\t}\r\n\t\t\tctx.strokeRect=function (x,y,w,h){\r\n\t\t\t\tthis.rect(x,y,w,h);\r\n\t\t\t\tthis.stroke();\r\n\t\t\t}\r\n\t\t\tctx.___drawImage=ctx.drawImage;\r\n\t\t\tctx.drawImage=function (){\r\n\t\t\t\tvar img=arguments[0].tempFilePath;\r\n\t\t\t\tif (img==null)return;\r\n\t\t\t\tswitch(arguments.length){\r\n\t\t\t\t\tcase 3:\r\n\t\t\t\t\t\tthis.___drawImage(img,arguments[1],arguments[2],arguments[0].width,arguments[0].height);\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\tcase 5:\r\n\t\t\t\t\t\tthis.___drawImage(img,arguments[1],arguments[2],arguments[3],arguments[4]);\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\tcase 9:\r\n\t\t\t\t\t\tthis.___drawImage(img,arguments[5],arguments[6],arguments[7],arguments[8]);\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tObject.defineProperty(ctx,\"strokeStyle\",{set:function (value){this.setStrokeStyle(value)},enumerable:false });\r\n\t\t\tObject.defineProperty(ctx,\"fillStyle\",{set:function (value){this.setFillStyle(value)},enumerable:false });\r\n\t\t\tObject.defineProperty(ctx,\"fontSize\",{set:function (value){this.setFontSize(value)},enumerable:false });\r\n\t\t\tObject.defineProperty(ctx,\"lineWidth\",{set:function (value){this.setLineWidth(value)},enumerable:false });\r\n\t\t\tContext.__init__(ctx);\r\n\t\t\tctx.flush=function (){\r\n\t\t\t\twx.drawCanvas({canvasId:this.id,actions:this.getActions()});\r\n\t\t\t}\r\n\t\t\treturn ctx;\r\n\t\t}\r\n\r\n\t\t__proto.oncontextmenu=function(e){}\r\n\t\t__proto.addEventListener=function(){}\r\n\t\t__getset(0,__proto,'id',function(){\r\n\t\t\treturn this._id;\r\n\t\t\t},function(value){\r\n\t\t\tthis._id=value;\r\n\t\t});\r\n\r\n\t\tWXCanvas.wx=null;\r\n\t\treturn WXCanvas;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*@private\r\n\t*/\r\n\t//class laya.system.System\r\n\tvar System=(function(){\r\n\t\tfunction System(){};\r\n\t\t__class(System,'laya.system.System');\r\n\t\tSystem.changeDefinition=function(name,classObj){\r\n\t\t\tLaya[name]=classObj;\r\n\t\t\tvar str=name+\"=classObj\";\r\n\t\t\teval(str);\r\n\t\t}\r\n\r\n\t\tSystem.__init__=function(){\r\n\t\t\tif (Render.isConchApp){\r\n\t\t\t\tconch.disableConchResManager();\r\n\t\t\t\tconch.disableConchAutoRestoreLostedDevice();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn System;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*<code>LayoutStyle</code> 是一个布局样式类。\r\n\t*/\r\n\t//class laya.ui.LayoutStyle\r\n\tvar LayoutStyle=(function(){\r\n\t\tfunction LayoutStyle(){\r\n\t\t\tthis.enable=false;\r\n\t\t\tthis.top=NaN;\r\n\t\t\tthis.bottom=NaN;\r\n\t\t\tthis.left=NaN;\r\n\t\t\tthis.right=NaN;\r\n\t\t\tthis.centerX=NaN;\r\n\t\t\tthis.centerY=NaN;\r\n\t\t\tthis.anchorX=NaN;\r\n\t\t\tthis.anchorY=NaN;\r\n\t\t}\r\n\r\n\t\t__class(LayoutStyle,'laya.ui.LayoutStyle');\r\n\t\t__static(LayoutStyle,\r\n\t\t['EMPTY',function(){return this.EMPTY=new LayoutStyle();}\r\n\t\t]);\r\n\t\treturn LayoutStyle;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*<code>Styles</code> 定义了组件常用的样式属性。\r\n\t*/\r\n\t//class laya.ui.Styles\r\n\tvar Styles=(function(){\r\n\t\tfunction Styles(){};\r\n\t\t__class(Styles,'laya.ui.Styles');\r\n\t\tStyles.labelColor=\"#000000\";\r\n\t\tStyles.buttonStateNum=3;\r\n\t\tStyles.scrollBarMinNum=15;\r\n\t\tStyles.scrollBarDelayTime=500;\r\n\t\t__static(Styles,\r\n\t\t['defaultSizeGrid',function(){return this.defaultSizeGrid=[4,4,4,4,0];},'labelPadding',function(){return this.labelPadding=[2,2,2,2];},'inputLabelPadding',function(){return this.inputLabelPadding=[1,1,1,3];},'buttonLabelColors',function(){return this.buttonLabelColors=[\"#32556b\",\"#32cc6b\",\"#ff0000\",\"#C0C0C0\"];},'comboBoxItemColors',function(){return this.comboBoxItemColors=[\"#5e95b6\",\"#ffffff\",\"#000000\",\"#8fa4b1\",\"#ffffff\"];}\r\n\t\t]);\r\n\t\treturn Styles;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*<code>UIUtils</code> 是文本工具集。\r\n\t*/\r\n\t//class laya.ui.UIUtils\r\n\tvar UIUtils=(function(){\r\n\t\tfunction UIUtils(){};\r\n\t\t__class(UIUtils,'laya.ui.UIUtils');\r\n\t\tUIUtils.fillArray=function(arr,str,type){\r\n\t\t\tvar temp=arr.concat();\r\n\t\t\tif (str){\r\n\t\t\t\tvar a=str.split(\",\");\r\n\t\t\t\tfor (var i=0,n=Math.min(temp.length,a.length);i < n;i++){\r\n\t\t\t\t\tvar value=a[i];\r\n\t\t\t\t\ttemp[i]=(value==\"true\" ? true :(value==\"false\" ? false :value));\r\n\t\t\t\t\tif (type !=null)temp[i]=type(value);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn temp;\r\n\t\t}\r\n\r\n\t\tUIUtils.toColor=function(color){\r\n\t\t\treturn Utils1.toHexColor(color);\r\n\t\t}\r\n\r\n\t\tUIUtils.gray=function(traget,isGray){\r\n\t\t\t(isGray===void 0)&& (isGray=true);\r\n\t\t\tif (isGray){\r\n\t\t\t\tUIUtils.addFilter(traget,UIUtils.grayFilter);\r\n\t\t\t\t}else {\r\n\t\t\t\tUIUtils.clearFilter(traget,ColorFilter);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tUIUtils.addFilter=function(target,filter){\r\n\t\t\tvar filters=target.filters || [];\r\n\t\t\tfilters.push(filter);\r\n\t\t\ttarget.filters=filters;\r\n\t\t}\r\n\r\n\t\tUIUtils.clearFilter=function(target,filterType){\r\n\t\t\tvar filters=target.filters;\r\n\t\t\tif (filters !=null && filters.length > 0){\r\n\t\t\t\tfor (var i=filters.length-1;i >-1;i--){\r\n\t\t\t\t\tvar filter=filters[i];\r\n\t\t\t\t\tif (Laya.__typeof(filter,filterType))filters.splice(i,1);\r\n\t\t\t\t}\r\n\t\t\t\ttarget.filters=filters;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__static(UIUtils,\r\n\t\t['grayFilter',function(){return this.grayFilter=new ColorFilter([0.3086,0.6094,0.082,0,0,0.3086,0.6094,0.082,0,0,0.3086,0.6094,0.082,0,0,0,0,0,1,0]);}\r\n\t\t]);\r\n\t\treturn UIUtils;\r\n\t})()\r\n\r\n\r\n\tSoundManager;\r\n\t/**\r\n\t*<code>Browser</code> 是浏览器代理类。封装浏览器及原生 js 提供的一些功能。\r\n\t*/\r\n\t//class laya.utils.Browser\r\n\tvar Browser=(function(){\r\n\t\tfunction Browser(){};\r\n\t\t__class(Browser,'laya.utils.Browser');\r\n\t\t/**画布容器，用来盛放画布的容器。方便对画布进行控制*/\r\n\t\t__getset(1,Browser,'container',function(){\r\n\t\t\tBrowser.__init__();\r\n\t\t\tif (!Browser._container){\r\n\t\t\t\tBrowser._container=Browser.createElement(\"div\");\r\n\t\t\t\tBrowser._container.id=\"layaContainer\";\r\n\t\t\t\tBrowser.document.body.appendChild(Browser._container);\r\n\t\t\t}\r\n\t\t\treturn Browser._container;\r\n\t\t\t},function(value){\r\n\t\t\tBrowser._container=value;\r\n\t\t});\r\n\r\n\t\t/**设备像素比。*/\r\n\t\t__getset(1,Browser,'pixelRatio',function(){\r\n\t\t\tBrowser.__init__();\r\n\t\t\treturn RunDriver.getPixelRatio();\r\n\t\t});\r\n\r\n\t\t/**浏览器原生 document 对象的引用。*/\r\n\t\t__getset(1,Browser,'document',function(){\r\n\t\t\tBrowser.__init__();\r\n\t\t\treturn Browser._document;\r\n\t\t});\r\n\r\n\t\t/**浏览器可视高度。*/\r\n\t\t__getset(1,Browser,'clientHeight',function(){\r\n\t\t\tBrowser.__init__();\r\n\t\t\treturn Browser.window.innerHeight || Browser.document.body.clientHeight || Browser.document.documentElement.clientHeight;\r\n\t\t});\r\n\r\n\t\t/**浏览器原生 window 对象的引用。*/\r\n\t\t__getset(1,Browser,'window',function(){\r\n\t\t\tBrowser.__init__();\r\n\t\t\treturn Browser._window;\r\n\t\t});\r\n\r\n\t\t/**浏览器物理高度。*/\r\n\t\t__getset(1,Browser,'height',function(){\r\n\t\t\tBrowser.__init__();\r\n\t\t\treturn ((Laya.stage && Laya.stage.canvasRotation)? Browser.clientWidth :Browser.clientHeight)*Browser.pixelRatio;\r\n\t\t});\r\n\r\n\t\t/**浏览器物理宽度，。*/\r\n\t\t__getset(1,Browser,'width',function(){\r\n\t\t\tBrowser.__init__();\r\n\t\t\treturn ((Laya.stage && Laya.stage.canvasRotation)? Browser.clientHeight :Browser.clientWidth)*Browser.pixelRatio;\r\n\t\t});\r\n\r\n\t\t/**浏览器可视宽度。*/\r\n\t\t__getset(1,Browser,'clientWidth',function(){\r\n\t\t\tBrowser.__init__();\r\n\t\t\treturn Browser.window.innerWidth || Browser.document.body.clientWidth;\r\n\t\t});\r\n\r\n\t\tBrowser.__init__=function(){\r\n\t\t\tSoundManager;\r\n\t\t\tif (Browser._window)return;\r\n\t\t\tBrowser._window=RunDriver.getWindow();\r\n\t\t\tBrowser._document=Browser.window.document;\r\n\t\t\tBrowser._window.addEventListener('message',function(e){\r\n\t\t\t\tlaya.utils.Browser._onMessage(e);\r\n\t\t\t},false);\r\n\t\t\tBrowser.document.__createElement=Browser.document.createElement;\r\n\t\t\twindow.requestAnimationFrame=(function(){return window.requestAnimationFrame || window.webkitRequestAnimationFrame ||window.mozRequestAnimationFrame || window.oRequestAnimationFrame ||function (c){return window.setTimeout(c,1000 / 60);};})();\r\n\t\t\tvar $BS=window.document.body.style;$BS.margin=0;$BS.overflow='hidden';;\r\n\t\t\tvar metas=window.document.getElementsByTagName('meta');;\r\n\t\t\tvar i=0,flag=false,content='width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no';;\r\n\t\t\twhile(i<metas.length){var meta=metas[i];if(meta.name=='viewport'){meta.content=content;flag=true;break;}i++;};\r\n\t\t\tif(!flag){meta=document.createElement('meta');meta.name='viewport',meta.content=content;document.getElementsByTagName('head')[0].appendChild(meta);};\r\n\t\t\tBrowser.userAgent=/*[SAFE]*/ Browser.window.navigator.userAgent;\r\n\t\t\tBrowser.u=/*[SAFE]*/ Browser.userAgent;\r\n\t\t\tBrowser.onIOS=/*[SAFE]*/ !!Browser.u.match(/\\(i[^;]+;(U;)? CPU.+Mac OS X/);\r\n\t\t\tBrowser.onMobile=/*[SAFE]*/ Browser.u.indexOf(\"Mobile\")>-1;\r\n\t\t\tBrowser.onIPhone=/*[SAFE]*/ Browser.u.indexOf(\"iPhone\")>-1;\r\n\t\t\tBrowser.onIPad=/*[SAFE]*/ Browser.u.indexOf(\"iPad\")>-1;\r\n\t\t\tBrowser.onAndriod=/*[SAFE]*/ Browser.u.indexOf('Android')>-1 || Browser.u.indexOf('Adr')>-1;\r\n\t\t\tBrowser.onWP=/*[SAFE]*/ Browser.u.indexOf(\"Windows Phone\")>-1;\r\n\t\t\tBrowser.onQQBrowser=/*[SAFE]*/ Browser.u.indexOf(\"QQBrowser\")>-1;\r\n\t\t\tBrowser.onMQQBrowser=/*[SAFE]*/ Browser.u.indexOf(\"MQQBrowser\")>-1;\r\n\t\t\tBrowser.onWeiXin=/*[SAFE]*/ Browser.u.indexOf('MicroMessenger')>-1;\r\n\t\t\tBrowser.onPC=/*[SAFE]*/ !Browser.onMobile;\r\n\t\t\tBrowser.onSafari=/*[SAFE]*/ !!Browser.u.match(/Version\\/\\d+\\.\\d\\x20Mobile\\/\\S+\\x20Safari/);\r\n\t\t\tBrowser.httpProtocol=/*[SAFE]*/ Browser.window.location.protocol==\"http:\";\r\n\t\t\tBrowser.webAudioEnabled=/*[SAFE]*/ Browser.window[\"AudioContext\"] || Browser.window[\"webkitAudioContext\"] || Browser.window[\"mozAudioContext\"] ? true :false;\r\n\t\t\tBrowser.soundType=/*[SAFE]*/ Browser.webAudioEnabled ? \"WEBAUDIOSOUND\" :\"AUDIOSOUND\";\r\n\t\t\tSound=Browser.webAudioEnabled?WebAudioSound:AudioSound;;\r\n\t\t\tif (Browser.webAudioEnabled)WebAudioSound.initWebAudio();;\r\n\t\t\tBrowser.enableTouch=(('ontouchstart' in window)|| window.DocumentTouch && document instanceof DocumentTouch);\r\n\t\t\twindow.focus();\r\n\t\t\tSoundManager._soundClass=Sound;;\r\n\t\t\tvar MainCanvas=null;\r\n\t\t\tif (Browser.window.MainCanvasID){\r\n\t\t\t\tvar _wx=wx;\r\n\t\t\t\tif (_wx && !_wx.createContext)_wx=null;\r\n\t\t\t\tif ((WXCanvas.wx=_wx)!=null){\r\n\t\t\t\t\tMainCanvas=new WXCanvas(Browser.window.MainCanvasID);\r\n\t\t\t\t\tvar from=Context.prototype;\r\n\t\t\t\t\tfrom.flush=null;\r\n\t\t\t\t\tBrowser.window.Image=function (){\r\n\t\t\t\t\t\tthis.setSrc=function (url){\r\n\t\t\t\t\t\t\tthis.__src=url;\r\n\t\t\t\t\t\t\tvar _this=this;\r\n\t\t\t\t\t\t\tthis.success();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.success=function (res){\r\n\t\t\t\t\t\t\tthis.width=200;\r\n\t\t\t\t\t\t\tthis.height=200;\r\n\t\t\t\t\t\t\tthis.tempFilePath=res ? res.tempFilePath :this.__src;\r\n\t\t\t\t\t\t\tthis.onload && this.onload();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.getSrc=function (){\r\n\t\t\t\t\t\t\treturn this.__src;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tObject.defineProperty(this,\"src\",{get:this.getSrc,set:this.setSrc,enumerable:false });\r\n\t\t\t\t\t}\r\n\t\t\t\t\t}else {\r\n\t\t\t\t\tMainCanvas=Browser.document.getElementById(Browser.window.MainCanvasID);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tRender._mainCanvas=Render._mainCanvas || HTMLCanvas.create('2D',MainCanvas);\r\n\t\t\tif (Browser.canvas)return;\r\n\t\t\tBrowser.canvas=HTMLCanvas.create('2D');\r\n\t\t\tBrowser.context=Browser.canvas.getContext('2d');\r\n\t\t}\r\n\r\n\t\tBrowser._onMessage=function(e){\r\n\t\t\tif (!e.data)return;\r\n\t\t\tif (e.data.name==\"size\"){\r\n\t\t\t\tBrowser.window.innerWidth=e.data.width;\r\n\t\t\t\tBrowser.window.innerHeight=e.data.height;\r\n\t\t\t\tBrowser.window.__innerHeight=e.data.clientHeight;\r\n\t\t\t\tif (!Browser.document.createEvent){\r\n\t\t\t\t\tconsole.log(\"no document.createEvent\");\r\n\t\t\t\t\treturn;\r\n\t\t\t\t};\r\n\t\t\t\tvar evt=Browser.document.createEvent(\"HTMLEvents\");\r\n\t\t\t\tevt.initEvent(\"resize\",false,false);\r\n\t\t\t\tBrowser.window.dispatchEvent(evt);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tBrowser.createElement=function(type){\r\n\t\t\tBrowser.__init__();\r\n\t\t\treturn Browser.document.__createElement(type);\r\n\t\t}\r\n\r\n\t\tBrowser.getElementById=function(type){\r\n\t\t\tBrowser.__init__();\r\n\t\t\treturn Browser.document.getElementById(type);\r\n\t\t}\r\n\r\n\t\tBrowser.removeElement=function(ele){\r\n\t\t\tif (ele && ele.parentNode)ele.parentNode.removeChild(ele);\r\n\t\t}\r\n\r\n\t\tBrowser.now=function(){\r\n\t\t\treturn RunDriver.now();\r\n\t\t}\r\n\r\n\t\tBrowser._window=null\r\n\t\tBrowser._document=null\r\n\t\tBrowser._container=null\r\n\t\tBrowser.userAgent=null\r\n\t\tBrowser.u=null\r\n\t\tBrowser.onIOS=false;\r\n\t\tBrowser.onMobile=false;\r\n\t\tBrowser.onIPhone=false;\r\n\t\tBrowser.onIPad=false;\r\n\t\tBrowser.onAndriod=false;\r\n\t\tBrowser.onWP=false;\r\n\t\tBrowser.onQQBrowser=false;\r\n\t\tBrowser.onMQQBrowser=false;\r\n\t\tBrowser.onSafari=false;\r\n\t\tBrowser.onWeiXin=false;\r\n\t\tBrowser.onPC=false;\r\n\t\tBrowser.httpProtocol=false;\r\n\t\tBrowser.webAudioEnabled=false;\r\n\t\tBrowser.soundType=null\r\n\t\tBrowser.enableTouch=false;\r\n\t\tBrowser.canvas=null\r\n\t\tBrowser.context=null\r\n\t\tBrowser.__init$=function(){\r\n\t\t\tAudioSound;\r\n\t\t\tWebAudioSound;\r\n\t\t}\r\n\r\n\t\treturn Browser;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*\r\n\t*<code>Byte</code> 类提供用于优化读取、写入以及处理二进制数据的方法和属性。\r\n\t*/\r\n\t//class laya.utils.Byte\r\n\tvar Byte=(function(){\r\n\t\tfunction Byte(data){\r\n\t\t\tthis._xd_=true;\r\n\t\t\tthis._allocated_=8;\r\n\t\t\t//this._d_=null;\r\n\t\t\t//this._u8d_=null;\r\n\t\t\tthis._pos_=0;\r\n\t\t\tthis._length=0;\r\n\t\t\tif (data){\r\n\t\t\t\tthis._u8d_=new Uint8Array(data);\r\n\t\t\t\tthis._d_=new DataView(this._u8d_.buffer);\r\n\t\t\t\tthis._length=this._d_.byteLength;\r\n\t\t\t\t}else {\r\n\t\t\t\tthis.___resizeBuffer(this._allocated_);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__class(Byte,'laya.utils.Byte');\r\n\t\tvar __proto=Byte.prototype;\r\n\t\t/**@private */\r\n\t\t__proto.___resizeBuffer=function(len){\r\n\t\t\ttry {\r\n\t\t\t\tvar newByteView=new Uint8Array(len);\r\n\t\t\t\tif (this._u8d_ !=null){\r\n\t\t\t\t\tif (this._u8d_.length <=len)newByteView.set(this._u8d_);\r\n\t\t\t\t\telse newByteView.set(this._u8d_.subarray(0,len));\r\n\t\t\t\t}\r\n\t\t\t\tthis._u8d_=newByteView;\r\n\t\t\t\tthis._d_=new DataView(newByteView.buffer);\r\n\t\t\t\t}catch (err){\r\n\t\t\t\tthrow \"___resizeBuffer err:\"+len;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*读取字符型值。\r\n\t\t*@return\r\n\t\t*/\r\n\t\t__proto.getString=function(){\r\n\t\t\treturn this.rUTF(this.getUint16());\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*从指定的位置读取指定长度的数据用于创建一个 Float32Array 对象并返回此对象。\r\n\t\t*@param start 开始位置。\r\n\t\t*@param len 需要读取的字节长度。\r\n\t\t*@return 读出的 Float32Array 对象。\r\n\t\t*/\r\n\t\t__proto.getFloat32Array=function(start,len){\r\n\t\t\tvar v=new Float32Array(this._d_.buffer.slice(start,start+len));\r\n\t\t\tthis._pos_+=len;\r\n\t\t\treturn v;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*从指定的位置读取指定长度的数据用于创建一个 Uint8Array 对象并返回此对象。\r\n\t\t*@param start 开始位置。\r\n\t\t*@param len 需要读取的字节长度。\r\n\t\t*@return 读出的 Uint8Array 对象。\r\n\t\t*/\r\n\t\t__proto.getUint8Array=function(start,len){\r\n\t\t\tvar v=new Uint8Array(this._d_.buffer.slice(start,start+len));\r\n\t\t\tthis._pos_+=len;\r\n\t\t\treturn v;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*从指定的位置读取指定长度的数据用于创建一个 Int16Array 对象并返回此对象。\r\n\t\t*@param start 开始位置。\r\n\t\t*@param len 需要读取的字节长度。\r\n\t\t*@return 读出的 Uint8Array 对象。\r\n\t\t*/\r\n\t\t__proto.getInt16Array=function(start,len){\r\n\t\t\tvar v=new Int16Array(this._d_.buffer.slice(start,start+len));\r\n\t\t\tthis._pos_+=len;\r\n\t\t\treturn v;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*在指定字节偏移量位置处读取 Float32 值。\r\n\t\t*@return Float32 值。\r\n\t\t*/\r\n\t\t__proto.getFloat32=function(){\r\n\t\t\tvar v=this._d_.getFloat32(this._pos_,this._xd_);\r\n\t\t\tthis._pos_+=4;\r\n\t\t\treturn v;\r\n\t\t}\r\n\r\n\t\t__proto.getFloat64=function(){\r\n\t\t\tvar v=this._d_.getFloat64(this._pos_,this._xd_);\r\n\t\t\tthis._pos_+=8;\r\n\t\t\treturn v;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*在当前字节偏移量位置处写入 Float32 值。\r\n\t\t*@param value 需要写入的 Float32 值。\r\n\t\t*/\r\n\t\t__proto.writeFloat32=function(value){\r\n\t\t\tthis.ensureWrite(this._pos_+4);\r\n\t\t\tthis._d_.setFloat32(this._pos_,value,this._xd_);\r\n\t\t\tthis._pos_+=4;\r\n\t\t}\r\n\r\n\t\t__proto.writeFloat64=function(value){\r\n\t\t\tthis.ensureWrite(this._pos_+8);\r\n\t\t\tthis._d_.setFloat64(this._pos_,value,this._xd_);\r\n\t\t\tthis._pos_+=8;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*在当前字节偏移量位置处读取 Int32 值。\r\n\t\t*@return Int32 值。\r\n\t\t*/\r\n\t\t__proto.getInt32=function(){\r\n\t\t\tvar float=this._d_.getInt32(this._pos_,this._xd_);\r\n\t\t\tthis._pos_+=4;\r\n\t\t\treturn float;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*在当前字节偏移量位置处读取 Uint32 值。\r\n\t\t*@return Uint32 值。\r\n\t\t*/\r\n\t\t__proto.getUint32=function(){\r\n\t\t\tvar v=this._d_.getUint32(this._pos_,this._xd_);\r\n\t\t\tthis._pos_+=4;\r\n\t\t\treturn v;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*在当前字节偏移量位置处写入 Int32 值。\r\n\t\t*@param value 需要写入的 Int32 值。\r\n\t\t*/\r\n\t\t__proto.writeInt32=function(value){\r\n\t\t\tthis.ensureWrite(this._pos_+4);\r\n\t\t\tthis._d_.setInt32(this._pos_,value,this._xd_);\r\n\t\t\tthis._pos_+=4;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*在当前字节偏移量位置处写入 Uint32 值。\r\n\t\t*@param value 需要写入的 Uint32 值。\r\n\t\t*/\r\n\t\t__proto.writeUint32=function(value){\r\n\t\t\tthis.ensureWrite(this._pos_+4);\r\n\t\t\tthis._d_.setUint32(this._pos_,value,this._xd_);\r\n\t\t\tthis._pos_+=4;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*在当前字节偏移量位置处读取 Int16 值。\r\n\t\t*@return Int16 值。\r\n\t\t*/\r\n\t\t__proto.getInt16=function(){\r\n\t\t\tvar us=this._d_.getInt16(this._pos_,this._xd_);\r\n\t\t\tthis._pos_+=2;\r\n\t\t\treturn us;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*在当前字节偏移量位置处读取 Uint16 值。\r\n\t\t*@return Uint16 值。\r\n\t\t*/\r\n\t\t__proto.getUint16=function(){\r\n\t\t\tvar us=this._d_.getUint16(this._pos_,this._xd_);\r\n\t\t\tthis._pos_+=2;\r\n\t\t\treturn us;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*在当前字节偏移量位置处写入 Uint16 值。\r\n\t\t*@param value 需要写入的Uint16 值。\r\n\t\t*/\r\n\t\t__proto.writeUint16=function(value){\r\n\t\t\tthis.ensureWrite(this._pos_+2);\r\n\t\t\tthis._d_.setUint16(this._pos_,value,this._xd_);\r\n\t\t\tthis._pos_+=2;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*在当前字节偏移量位置处写入 Int16 值。\r\n\t\t*@param value 需要写入的 Int16 值。\r\n\t\t*/\r\n\t\t__proto.writeInt16=function(value){\r\n\t\t\tthis.ensureWrite(this._pos_+2);\r\n\t\t\tthis._d_.setInt16(this._pos_,value,this._xd_);\r\n\t\t\tthis._pos_+=2;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*在当前字节偏移量位置处读取 Uint8 值。\r\n\t\t*@return Uint8 值。\r\n\t\t*/\r\n\t\t__proto.getUint8=function(){\r\n\t\t\treturn this._d_.getUint8(this._pos_++);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*在当前字节偏移量位置处写入 Uint8 值。\r\n\t\t*@param value 需要写入的 Uint8 值。\r\n\t\t*/\r\n\t\t__proto.writeUint8=function(value){\r\n\t\t\tthis.ensureWrite(this._pos_+1);\r\n\t\t\tthis._d_.setUint8(this._pos_,value,this._xd_);\r\n\t\t\tthis._pos_++;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*在指定位置处读取 Uint8 值。\r\n\t\t*@param pos 字节读取位置。\r\n\t\t*@return Uint8 值。\r\n\t\t*/\r\n\t\t__proto._getUInt8=function(pos){\r\n\t\t\treturn this._d_.getUint8(pos);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*在指定位置处读取 Uint16 值。\r\n\t\t*@param pos 字节读取位置。\r\n\t\t*@return Uint16 值。\r\n\t\t*/\r\n\t\t__proto._getUint16=function(pos){\r\n\t\t\treturn this._d_.getUint16(pos,this._xd_);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*使用 getFloat32()读取6个值，用于创建并返回一个 Matrix 对象。\r\n\t\t*@return Matrix 对象。\r\n\t\t*/\r\n\t\t__proto._getMatrix=function(){\r\n\t\t\tvar rst=new Matrix(this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32());\r\n\t\t\treturn rst;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*读取指定长度的 UTF 型字符串。\r\n\t\t*@param len 需要读取的长度。\r\n\t\t*@return 读出的字符串。\r\n\t\t*/\r\n\t\t__proto.rUTF=function(len){\r\n\t\t\tvar v=\"\",max=this._pos_+len,c=0,c2=0,c3=0,f=String.fromCharCode;\r\n\t\t\tvar u=this._u8d_,i=0;\r\n\t\t\twhile (this._pos_ < max){\r\n\t\t\t\tc=u[this._pos_++];\r\n\t\t\t\tif (c < 0x80){\r\n\t\t\t\t\tif (c !=0){\r\n\t\t\t\t\t\tv+=f(c);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t}else if (c < 0xE0){\r\n\t\t\t\t\tv+=f(((c & 0x3F)<< 6)| (u[this._pos_++] & 0x7F));\r\n\t\t\t\t\t}else if (c < 0xF0){\r\n\t\t\t\t\tc2=u[this._pos_++];\r\n\t\t\t\t\tv+=f(((c & 0x1F)<< 12)| ((c2 & 0x7F)<< 6)| (u[this._pos_++] & 0x7F));\r\n\t\t\t\t\t}else {\r\n\t\t\t\t\tc2=u[this._pos_++];\r\n\t\t\t\t\tc3=u[this._pos_++];\r\n\t\t\t\t\tv+=f(((c & 0x0F)<< 18)| ((c2 & 0x7F)<< 12)| ((c3 << 6)& 0x7F)| (u[this._pos_++] & 0x7F));\r\n\t\t\t\t}\r\n\t\t\t\ti++;\r\n\t\t\t}\r\n\t\t\treturn v;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*字符串读取。\r\n\t\t*@param len\r\n\t\t*@return\r\n\t\t*/\r\n\t\t__proto.getCustomString=function(len){\r\n\t\t\tvar v=\"\",ulen=0,c=0,c2=0,f=String.fromCharCode;\r\n\t\t\tvar u=this._u8d_,i=0;\r\n\t\t\twhile (len > 0){\r\n\t\t\t\tc=u[this._pos_];\r\n\t\t\t\tif (c < 0x80){\r\n\t\t\t\t\tv+=f(c);\r\n\t\t\t\t\tthis._pos_++;\r\n\t\t\t\t\tlen--;\r\n\t\t\t\t\t}else {\r\n\t\t\t\t\tulen=c-0x80;\r\n\t\t\t\t\tthis._pos_++;\r\n\t\t\t\t\tlen-=ulen;\r\n\t\t\t\t\twhile (ulen > 0){\r\n\t\t\t\t\t\tc=u[this._pos_++];\r\n\t\t\t\t\t\tc2=u[this._pos_++];\r\n\t\t\t\t\t\tv+=f((c2 << 8)| c);\r\n\t\t\t\t\t\tulen--;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn v;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*清除数据。\r\n\t\t*/\r\n\t\t__proto.clear=function(){\r\n\t\t\tthis._pos_=0;\r\n\t\t\tthis.length=0;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*获取此对象的 ArrayBuffer 引用。\r\n\t\t*@return\r\n\t\t*/\r\n\t\t__proto.__getBuffer=function(){\r\n\t\t\treturn this._d_.buffer;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*写入字符串，该方法写的字符串要使用 readUTFBytes 方法读取。\r\n\t\t*@param value 要写入的字符串。\r\n\t\t*/\r\n\t\t__proto.writeUTFBytes=function(value){\r\n\t\t\tvalue=value+\"\";\r\n\t\t\tfor (var i=0,sz=value.length;i < sz;i++){\r\n\t\t\t\tvar c=value.charCodeAt(i);\r\n\t\t\t\tif (c <=0x7F){\r\n\t\t\t\t\tthis.writeByte(c);\r\n\t\t\t\t\t}else if (c <=0x7FF){\r\n\t\t\t\t\tthis.writeByte(0xC0 | (c >> 6));\r\n\t\t\t\t\tthis.writeByte(0x80 | (c & 63));\r\n\t\t\t\t\t}else if (c <=0xFFFF){\r\n\t\t\t\t\tthis.writeByte(0xE0 | (c >> 12));\r\n\t\t\t\t\tthis.writeByte(0x80 | ((c >> 6)& 63));\r\n\t\t\t\t\tthis.writeByte(0x80 | (c & 63));\r\n\t\t\t\t\t}else {\r\n\t\t\t\t\tthis.writeByte(0xF0 | (c >> 18));\r\n\t\t\t\t\tthis.writeByte(0x80 | ((c >> 12)& 63));\r\n\t\t\t\t\tthis.writeByte(0x80 | ((c >> 6)& 63));\r\n\t\t\t\t\tthis.writeByte(0x80 | (c & 63));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*将 UTF-8 字符串写入字节流。\r\n\t\t*@param value 要写入的字符串值。\r\n\t\t*/\r\n\t\t__proto.writeUTFString=function(value){\r\n\t\t\tvar tPos=0;\r\n\t\t\ttPos=this.pos;\r\n\t\t\tthis.writeUint16(1);\r\n\t\t\tthis.writeUTFBytes(value);\r\n\t\t\tvar dPos=0;\r\n\t\t\tdPos=this.pos-tPos-2;\r\n\t\t\tthis._d_.setUint16(tPos,dPos,this._xd_);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*读取 UTF-8 字符串。\r\n\t\t*@return 读出的字符串。\r\n\t\t*/\r\n\t\t__proto.readUTFString=function(){\r\n\t\t\tvar tPos=0;\r\n\t\t\ttPos=this.pos;\r\n\t\t\tvar len=0;\r\n\t\t\tlen=this.getUint16();\r\n\t\t\treturn this.readUTFBytes(len);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*读取 UTF-8 字符串。\r\n\t\t*@return 读出的字符串。\r\n\t\t*/\r\n\t\t__proto.getUTFString=function(){\r\n\t\t\treturn this.readUTFString();\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*读字符串，必须是 writeUTFBytes 方法写入的字符串。\r\n\t\t*@param len 要读的buffer长度,默认将读取缓冲区全部数据。\r\n\t\t*@return 读取的字符串。\r\n\t\t*/\r\n\t\t__proto.readUTFBytes=function(len){\r\n\t\t\t(len===void 0)&& (len=-1);\r\n\t\t\tif(len==0)return \"\";\r\n\t\t\tlen=len > 0 ? len :this.bytesAvailable;\r\n\t\t\treturn this.rUTF(len);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*读字符串，必须是 writeUTFBytes 方法写入的字符串。\r\n\t\t*@param len 要读的buffer长度,默认将读取缓冲区全部数据。\r\n\t\t*@return 读取的字符串。\r\n\t\t*/\r\n\t\t__proto.getUTFBytes=function(len){\r\n\t\t\t(len===void 0)&& (len=-1);\r\n\t\t\treturn this.readUTFBytes(len);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*在字节流中写入一个字节。\r\n\t\t*@param value\r\n\t\t*/\r\n\t\t__proto.writeByte=function(value){\r\n\t\t\tthis.ensureWrite(this._pos_+1);\r\n\t\t\tthis._d_.setInt8(this._pos_,value);\r\n\t\t\tthis._pos_+=1;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*在字节流中读一个字节。\r\n\t\t*/\r\n\t\t__proto.readByte=function(){\r\n\t\t\treturn this._d_.getInt8(this._pos_++);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*在字节流中读一个字节。\r\n\t\t*/\r\n\t\t__proto.getByte=function(){\r\n\t\t\treturn this.readByte();\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*指定该字节流的长度。\r\n\t\t*@param lengthToEnsure 指定的长度。\r\n\t\t*/\r\n\t\t__proto.ensureWrite=function(lengthToEnsure){\r\n\t\t\tif (this._length < lengthToEnsure)this._length=lengthToEnsure;\r\n\t\t\tif (this._allocated_ < lengthToEnsure)this.length=lengthToEnsure;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*写入指定的 Arraybuffer 对象。\r\n\t\t*@param arraybuffer 需要写入的 Arraybuffer 对象。\r\n\t\t*@param offset 偏移量（以字节为单位）\r\n\t\t*@param length 长度（以字节为单位）\r\n\t\t*/\r\n\t\t__proto.writeArrayBuffer=function(arraybuffer,offset,length){\r\n\t\t\t(offset===void 0)&& (offset=0);\r\n\t\t\t(length===void 0)&& (length=0);\r\n\t\t\tif (offset < 0 || length < 0)throw \"writeArrayBuffer error - Out of bounds\";\r\n\t\t\tif (length==0)length=arraybuffer.byteLength-offset;\r\n\t\t\tthis.ensureWrite(this._pos_+length);\r\n\t\t\tvar uint8array=new Uint8Array(arraybuffer);\r\n\t\t\tthis._u8d_.set(uint8array.subarray(offset,offset+length),this._pos_);\r\n\t\t\tthis._pos_+=length;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*当前读取到的位置。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'pos',function(){\r\n\t\t\treturn this._pos_;\r\n\t\t\t},function(value){\r\n\t\t\tthis._pos_=value;\r\n\t\t\tthis._d_.byteOffset=value;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*可从字节流的当前位置到末尾读取的数据的字节数。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'bytesAvailable',function(){\r\n\t\t\treturn this.length-this._pos_;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*字节长度。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'length',function(){\r\n\t\t\treturn this._length;\r\n\t\t\t},function(value){\r\n\t\t\tif (this._allocated_ < value)\r\n\t\t\t\tthis.___resizeBuffer(this._allocated_=Math.floor(Math.max(value,this._allocated_ *2)));\r\n\t\t\telse if (this._allocated_ > value)\r\n\t\t\tthis.___resizeBuffer(this._allocated_=value);\r\n\t\t\tthis._length=value;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*字节顺序。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'endian',function(){\r\n\t\t\treturn this._xd_ ? \"littleEndian\" :\"bigEndian\";\r\n\t\t\t},function(endianStr){\r\n\t\t\tthis._xd_=(endianStr==\"littleEndian\");\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*获取此对象的 ArrayBuffer数据,数据只包含有效数据部分 。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'buffer',function(){\r\n\t\t\tvar rstBuffer=this._d_.buffer;\r\n\t\t\tif (rstBuffer.byteLength==this.length)return rstBuffer;\r\n\t\t\treturn rstBuffer.slice(0,this.length);\r\n\t\t});\r\n\r\n\t\tByte.getSystemEndian=function(){\r\n\t\t\tif (!Byte._sysEndian){\r\n\t\t\t\tvar buffer=new ArrayBuffer(2);\r\n\t\t\t\tnew DataView(buffer).setInt16(0,256,true);\r\n\t\t\t\tByte._sysEndian=(new Int16Array(buffer))[0]===256 ? \"littleEndian\" :\"bigEndian\";\r\n\t\t\t}\r\n\t\t\treturn Byte._sysEndian;\r\n\t\t}\r\n\r\n\t\tByte.BIG_ENDIAN=\"bigEndian\";\r\n\t\tByte.LITTLE_ENDIAN=\"littleEndian\";\r\n\t\tByte._sysEndian=null;\r\n\t\treturn Byte;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*对象缓存统一管理类\r\n\t*/\r\n\t//class laya.utils.CacheManger\r\n\tvar CacheManger=(function(){\r\n\t\tfunction CacheManger(){}\r\n\t\t__class(CacheManger,'laya.utils.CacheManger');\r\n\t\tCacheManger.regCacheByFunction=function(disposeFunction,getCacheListFunction){\r\n\t\t\tCacheManger.unRegCacheByFunction(disposeFunction,getCacheListFunction);\r\n\t\t\tvar cache;\r\n\t\t\tcache={\r\n\t\t\t\ttryDispose:disposeFunction,\r\n\t\t\t\tgetCacheList:getCacheListFunction\r\n\t\t\t};\r\n\t\t\tCacheManger._cacheList.push(cache);\r\n\t\t}\r\n\r\n\t\tCacheManger.unRegCacheByFunction=function(disposeFunction,getCacheListFunction){\r\n\t\t\tvar i=0,len=0;\r\n\t\t\tlen=CacheManger._cacheList.length;\r\n\t\t\tfor (i=0;i < len;i++){\r\n\t\t\t\tif (CacheManger._cacheList[i].tryDispose==disposeFunction && CacheManger._cacheList[i].getCacheList==getCacheListFunction){\r\n\t\t\t\t\tCacheManger._cacheList.splice(i,1);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tCacheManger.forceDispose=function(){\r\n\t\t\tvar i=0,len=CacheManger._cacheList.length;\r\n\t\t\tfor(i=0;i<len;i++){\r\n\t\t\t\tCacheManger._cacheList[i].tryDispose(true);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tCacheManger.beginCheck=function(waitTime){\r\n\t\t\t(waitTime===void 0)&& (waitTime=15000);\r\n\t\t\tLaya.timer.loop(waitTime,null,CacheManger._checkLoop);\r\n\t\t}\r\n\r\n\t\tCacheManger.stopCheck=function(){\r\n\t\t\tLaya.timer.clear(null,CacheManger._checkLoop);\r\n\t\t}\r\n\r\n\t\tCacheManger._checkLoop=function(){\r\n\t\t\tvar cacheList=CacheManger._cacheList;\r\n\t\t\tif (cacheList.length < 1)return;\r\n\t\t\tvar tTime=Browser.now();\r\n\t\t\tvar count=0;\r\n\t\t\tvar len=0;\r\n\t\t\tlen=count=cacheList.length;\r\n\t\t\twhile (count > 0){\r\n\t\t\t\tCacheManger._index++;\r\n\t\t\t\tCacheManger._index=CacheManger._index % len;\r\n\t\t\t\tcacheList[CacheManger._index].tryDispose(false);\r\n\t\t\t\tif (Browser.now()-tTime > CacheManger.loopTimeLimit)break ;\r\n\t\t\t\tcount--;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tCacheManger.loopTimeLimit=2;\r\n\t\tCacheManger._cacheList=[];\r\n\t\tCacheManger._index=0;\r\n\t\treturn CacheManger;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*<code>ClassUtils</code> 是一个类工具类。\r\n\t*/\r\n\t//class laya.utils.ClassUtils\r\n\tvar ClassUtils=(function(){\r\n\t\tfunction ClassUtils(){};\r\n\t\t__class(ClassUtils,'laya.utils.ClassUtils');\r\n\t\tClassUtils.regClass=function(className,classDef){\r\n\t\t\tClassUtils._classMap[className]=classDef;\r\n\t\t}\r\n\r\n\t\tClassUtils.getRegClass=function(className){\r\n\t\t\treturn ClassUtils._classMap[className];\r\n\t\t}\r\n\r\n\t\tClassUtils.getInstance=function(className){\r\n\t\t\tvar compClass=ClassUtils.getClass(className);\r\n\t\t\tif (compClass)\r\n\t\t\t\treturn new compClass();\r\n\t\t\telse\r\n\t\t\tconsole.log(\"[error] Undefined class:\",className);\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\tClassUtils.createByJson=function(json,node,root,customHandler,instanceHandler){\r\n\t\t\tif ((typeof json=='string'))\r\n\t\t\t\tjson=JSON.parse(json);\r\n\t\t\tvar props=json.props;\r\n\t\t\tif (!node){\r\n\t\t\t\tnode=instanceHandler ? instanceHandler.runWith(json):ClassUtils.getInstance(props.runtime || json.type);\r\n\t\t\t\tif (!node)\r\n\t\t\t\t\treturn null;\r\n\t\t\t};\r\n\t\t\tvar child=json.child;\r\n\t\t\tif (child){\r\n\t\t\t\tfor (var i=0,n=child.length;i < n;i++){\r\n\t\t\t\t\tvar data=child[i];\r\n\t\t\t\t\tif ((data.props.name===\"render\" || data.props.renderType===\"render\")&& node[\"_$set_itemRender\"])\r\n\t\t\t\t\t\tnode.itemRender=data;\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tif (data.type==\"Graphic\"){\r\n\t\t\t\t\t\t\tClassUtils.addGraphicsToSprite(data,node);\r\n\t\t\t\t\t\t\t}else if (ClassUtils.isDrawType(data.type)){\r\n\t\t\t\t\t\t\tClassUtils.addGraphicToSprite(data,node,true);\r\n\t\t\t\t\t\t\t}else {\r\n\t\t\t\t\t\t\tvar tChild=ClassUtils.createByJson(data,null,root,customHandler,instanceHandler)\r\n\t\t\t\t\t\t\tif (data.type==\"Script\"){\r\n\t\t\t\t\t\t\t\ttChild[\"owner\"]=node;\r\n\t\t\t\t\t\t\t\t}else if (data.props.renderType==\"mask\"){\r\n\t\t\t\t\t\t\t\tnode.mask=tChild;\r\n\t\t\t\t\t\t\t\t}else {\r\n\t\t\t\t\t\t\t\tnode.addChild(tChild);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (props){\r\n\t\t\t\tfor (var prop in props){\r\n\t\t\t\t\tvar value=props[prop];\r\n\t\t\t\t\tif (prop===\"var\" && root){\r\n\t\t\t\t\t\troot[value]=node;\r\n\t\t\t\t\t\t}else if ((value instanceof Array)&& (typeof (node[prop])=='function')){\r\n\t\t\t\t\t\tnode[prop].apply(node,value);\r\n\t\t\t\t\t\t}else {\r\n\t\t\t\t\t\tnode[prop]=value;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (customHandler && json.customProps){\r\n\t\t\t\tcustomHandler.runWith([node,json]);\r\n\t\t\t}\r\n\t\t\tif (node[\"created\"])\r\n\t\t\t\tnode.created();\r\n\t\t\treturn node;\r\n\t\t}\r\n\r\n\t\tClassUtils.addGraphicsToSprite=function(graphicO,sprite){\r\n\t\t\tvar graphics;\r\n\t\t\tgraphics=graphicO.child;\r\n\t\t\tif (!graphics || graphics.length < 1)\r\n\t\t\t\treturn;\r\n\t\t\tvar g;\r\n\t\t\tg=ClassUtils._getGraphicsFromSprite(graphicO,sprite);\r\n\t\t\tvar ox=0;\r\n\t\t\tvar oy=0;\r\n\t\t\tif (graphicO.props){\r\n\t\t\t\tox=ClassUtils._getObjVar(graphicO.props,\"x\",0);\r\n\t\t\t\toy=ClassUtils._getObjVar(graphicO.props,\"y\",0);\r\n\t\t\t}\r\n\t\t\tif (ox !=0 && oy !=0){\r\n\t\t\t\tg.translate(ox,oy);\r\n\t\t\t};\r\n\t\t\tvar i=0,len=0;\r\n\t\t\tlen=graphics.length;\r\n\t\t\tfor (i=0;i < len;i++){\r\n\t\t\t\tClassUtils._addGraphicToGraphics(graphics[i],g);\r\n\t\t\t}\r\n\t\t\tif (ox !=0 && oy !=0){\r\n\t\t\t\tg.translate(-ox,-oy);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tClassUtils.addGraphicToSprite=function(graphicO,sprite,isChild){\r\n\t\t\t(isChild===void 0)&& (isChild=false);\r\n\t\t\tvar g;\r\n\t\t\tg=isChild ? ClassUtils._getGraphicsFromSprite(graphicO,sprite):sprite.graphics;\r\n\t\t\tClassUtils._addGraphicToGraphics(graphicO,g);\r\n\t\t}\r\n\r\n\t\tClassUtils._getGraphicsFromSprite=function(dataO,sprite){\r\n\t\t\tvar g;\r\n\t\t\tif (!dataO || !dataO.props)\r\n\t\t\t\treturn sprite.graphics;\r\n\t\t\tvar propsName;\r\n\t\t\tpropsName=dataO.props.renderType;\r\n\t\t\tswitch (propsName){\r\n\t\t\t\tcase \"hit\":\r\n\t\t\t\tcase \"unHit\":;\r\n\t\t\t\t\tvar hitArea;\r\n\t\t\t\t\tif (!sprite.hitArea){\r\n\t\t\t\t\t\tsprite.hitArea=new HitArea();\r\n\t\t\t\t\t}\r\n\t\t\t\t\thitArea=sprite.hitArea;\r\n\t\t\t\t\tif (!hitArea[propsName]){\r\n\t\t\t\t\t\thitArea[propsName]=new Graphics();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tg=hitArea[propsName];\r\n\t\t\t\t\tbreak ;\r\n\t\t\t\tdefault :\r\n\t\t\t\t}\r\n\t\t\tif (!g)\r\n\t\t\t\tg=sprite.graphics;\r\n\t\t\treturn g;\r\n\t\t}\r\n\r\n\t\tClassUtils._getTransformData=function(propsO){\r\n\t\t\tvar m;\r\n\t\t\tif (propsO.hasOwnProperty(\"pivotX\")|| propsO.hasOwnProperty(\"pivotY\")){\r\n\t\t\t\tm=m || new Matrix();\r\n\t\t\t\tm.translate(-ClassUtils._getObjVar(propsO,\"pivotX\",0),-ClassUtils._getObjVar(propsO,\"pivotY\",0));\r\n\t\t\t};\r\n\t\t\tvar sx=ClassUtils._getObjVar(propsO,\"scaleX\",1),sy=ClassUtils._getObjVar(propsO,\"scaleY\",1);\r\n\t\t\tvar rotate=ClassUtils._getObjVar(propsO,\"rotation\",0);\r\n\t\t\tvar skewX=ClassUtils._getObjVar(propsO,\"skewX\",0);\r\n\t\t\tvar skewY=ClassUtils._getObjVar(propsO,\"skewY\",0);\r\n\t\t\tif (sx !=1 || sy !=1 || rotate !=0){\r\n\t\t\t\tm=m || new Matrix();\r\n\t\t\t\tm.scale(sx,sy);\r\n\t\t\t\tm.rotate(rotate *0.0174532922222222);\r\n\t\t\t}\r\n\t\t\treturn m;\r\n\t\t}\r\n\r\n\t\tClassUtils._addGraphicToGraphics=function(graphicO,graphic){\r\n\t\t\tvar propsO;\r\n\t\t\tpropsO=graphicO.props;\r\n\t\t\tif (!propsO)\r\n\t\t\t\treturn;\r\n\t\t\tvar drawConfig;\r\n\t\t\tdrawConfig=ClassUtils.DrawTypeDic[graphicO.type];\r\n\t\t\tif (!drawConfig)\r\n\t\t\t\treturn;\r\n\t\t\tvar g;\r\n\t\t\tg=graphic;\r\n\t\t\tvar m;\r\n\t\t\tvar params=ClassUtils._getParams(propsO,drawConfig[1],drawConfig[2],drawConfig[3]);\r\n\t\t\tm=ClassUtils._tM;\r\n\t\t\tif (m || ClassUtils._alpha !=1){\r\n\t\t\t\tg.save();\r\n\t\t\t\tif (m)\r\n\t\t\t\t\tg.transform(m);\r\n\t\t\t\tif (ClassUtils._alpha !=1)\r\n\t\t\t\t\tg.alpha(ClassUtils._alpha);\r\n\t\t\t}\r\n\t\t\tg[drawConfig[0]].apply(g,params);\r\n\t\t\tif (m || ClassUtils._alpha !=1){\r\n\t\t\t\tg.restore();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tClassUtils._adptLineData=function(params){\r\n\t\t\tparams[2]=parseFloat(params[0])+parseFloat(params[2]);\r\n\t\t\tparams[3]=parseFloat(params[1])+parseFloat(params[3]);\r\n\t\t\treturn params;\r\n\t\t}\r\n\r\n\t\tClassUtils._adptTextureData=function(params){\r\n\t\t\tparams[0]=Loader.getRes(params[0]);\r\n\t\t\treturn params;\r\n\t\t}\r\n\r\n\t\tClassUtils._adptLinesData=function(params){\r\n\t\t\tparams[2]=ClassUtils._getPointListByStr(params[2]);\r\n\t\t\treturn params;\r\n\t\t}\r\n\r\n\t\tClassUtils.isDrawType=function(type){\r\n\t\t\tif (type==\"Image\")\r\n\t\t\t\treturn false;\r\n\t\t\treturn ClassUtils.DrawTypeDic.hasOwnProperty(type);\r\n\t\t}\r\n\r\n\t\tClassUtils._getParams=function(obj,params,xPos,adptFun){\r\n\t\t\t(xPos===void 0)&& (xPos=0);\r\n\t\t\tvar rst;\r\n\t\t\trst=ClassUtils._temParam;\r\n\t\t\trst.length=params.length;\r\n\t\t\tvar i=0,len=0;\r\n\t\t\tlen=params.length;\r\n\t\t\tfor (i=0;i < len;i++){\r\n\t\t\t\trst[i]=ClassUtils._getObjVar(obj,params[i][0],params[i][1]);\r\n\t\t\t}\r\n\t\t\tClassUtils._alpha=ClassUtils._getObjVar(obj,\"alpha\",1);\r\n\t\t\tvar m;\r\n\t\t\tm=ClassUtils._getTransformData(obj);\r\n\t\t\tif (m){\r\n\t\t\t\tif (!xPos)xPos=0;\r\n\t\t\t\tm.translate(rst[xPos],rst[xPos+1]);\r\n\t\t\t\trst[xPos]=rst[xPos+1]=0;\r\n\t\t\t\tClassUtils._tM=m;\r\n\t\t\t\t}else {\r\n\t\t\t\tClassUtils._tM=null;\r\n\t\t\t}\r\n\t\t\tif (adptFun && ClassUtils[adptFun]){\r\n\t\t\t\trst=ClassUtils[adptFun](rst);\r\n\t\t\t}\r\n\t\t\treturn rst;\r\n\t\t}\r\n\r\n\t\tClassUtils._getPointListByStr=function(str){\r\n\t\t\tvar pointArr;\r\n\t\t\tpointArr=str.split(\",\");\r\n\t\t\tvar i=0,len=0;\r\n\t\t\tlen=pointArr.length;\r\n\t\t\tfor (i=0;i < len;i++){\r\n\t\t\t\tpointArr[i]=parseFloat(pointArr[i]);\r\n\t\t\t}\r\n\t\t\treturn pointArr;\r\n\t\t}\r\n\r\n\t\tClassUtils._getObjVar=function(obj,key,noValue){\r\n\t\t\tif (obj.hasOwnProperty(key)){\r\n\t\t\t\treturn obj[key];\r\n\t\t\t}\r\n\t\t\treturn noValue;\r\n\t\t}\r\n\r\n\t\tClassUtils._temParam=[];\r\n\t\tClassUtils._classMap={'Sprite':'laya.display.Sprite','Text':'laya.display.Text','Animation':'laya.display.Animation','Skeleton':'laya.ani.bone.Skeleton','Particle2D':'laya.particle.Particle2D','div':'laya.html.dom.HTMLDivElement','p':'laya.html.dom.HTMLElement','img':'laya.html.dom.HTMLImageElement','span':'laya.html.dom.HTMLElement','br':'laya.html.dom.HTMLBrElement','style':'laya.html.dom.HTMLStyleElement','font':'laya.html.dom.HTMLElement','a':'laya.html.dom.HTMLElement','#text':'laya.html.dom.HTMLElement'};\r\n\t\tClassUtils.getClass=function(className){\r\n\t\t\tvar classObject=ClassUtils._classMap[className] || className;\r\n\t\t\tif ((typeof classObject=='string'))\r\n\t\t\t\treturn Laya[\"__classmap\"][classObject];\r\n\t\t\treturn classObject;\r\n\t\t}\r\n\r\n\t\tClassUtils._tM=null\r\n\t\tClassUtils._alpha=NaN\r\n\t\t__static(ClassUtils,\r\n\t\t['DrawTypeDic',function(){return this.DrawTypeDic={\"Rect\":[\"drawRect\",[[\"x\",0],[\"y\",0],[\"width\",0],[\"height\",0],[\"fillColor\",null],[\"lineColor\",null],[\"lineWidth\",1]]],\"Circle\":[\"drawCircle\",[[\"x\",0],[\"y\",0],[\"radius\",0],[\"fillColor\",null],[\"lineColor\",null],[\"lineWidth\",1]]],\"Pie\":[\"drawPie\",[[\"x\",0],[\"y\",0],[\"radius\",0],[\"startAngle\",0],[\"endAngle\",0],[\"fillColor\",null],[\"lineColor\",null],[\"lineWidth\",1]]],\"Image\":[\"drawTexture\",[[\"x\",0],[\"y\",0],[\"width\",0],[\"height\",0]]],\"Texture\":[\"drawTexture\",[[\"skin\",null],[\"x\",0],[\"y\",0],[\"width\",0],[\"height\",0]],1,\"_adptTextureData\"],\"FillTexture\":[\"fillTexture\",[[\"skin\",null],[\"x\",0],[\"y\",0],[\"width\",0],[\"height\",0],[\"repeat\",null]],1,\"_adptTextureData\"],\"FillText\":[\"fillText\",[[\"text\",\"\"],[\"x\",0],[\"y\",0],[\"font\",null],[\"color\",null],[\"textAlign\",null]],1],\"Line\":[\"drawLine\",[[\"x\",0],[\"y\",0],[\"toX\",0],[\"toY\",0],[\"lineColor\",null],[\"lineWidth\",0]],0,\"_adptLineData\"],\"Lines\":[\"drawLines\",[[\"x\",0],[\"y\",0],[\"points\",\"\"],[\"lineColor\",null],[\"lineWidth\",0]],0,\"_adptLinesData\"],\"Curves\":[\"drawCurves\",[[\"x\",0],[\"y\",0],[\"points\",\"\"],[\"lineColor\",null],[\"lineWidth\",0]],0,\"_adptLinesData\"],\"Poly\":[\"drawPoly\",[[\"x\",0],[\"y\",0],[\"points\",\"\"],[\"fillColor\",null],[\"lineColor\",null],[\"lineWidth\",1]],0,\"_adptLinesData\"]};}\r\n\t\t]);\r\n\t\treturn ClassUtils;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*<code>Color</code> 是一个颜色值处理类。\r\n\t*/\r\n\t//class laya.utils.Color\r\n\tvar Color=(function(){\r\n\t\tfunction Color(str){\r\n\t\t\tthis._color=[];\r\n\t\t\t//this.strColor=null;\r\n\t\t\t//this.numColor=0;\r\n\t\t\t//this._drawStyle=null;\r\n\t\t\tif ((typeof str=='string')){\r\n\t\t\t\tthis.strColor=str;\r\n\t\t\t\tif (str===null)str=\"#000000\";\r\n\t\t\t\tstr.charAt(0)=='#' && (str=str.substr(1));\r\n\t\t\t\tvar color=this.numColor=parseInt(str,16);\r\n\t\t\t\tvar flag=(str.length==8);\r\n\t\t\t\tif (flag){\r\n\t\t\t\t\tthis._color=[parseInt(str.substr(0,2),16)/ 255,((0x00FF0000 & color)>> 16)/ 255,((0x0000FF00 & color)>> 8)/ 255,(0x000000FF & color)/ 255];\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t}else {\r\n\t\t\t\tcolor=this.numColor=str;\r\n\t\t\t\tthis.strColor=Utils1.toHexColor(color);\r\n\t\t\t}\r\n\t\t\tthis._color=[((0xFF0000 & color)>> 16)/ 255,((0xFF00 & color)>> 8)/ 255,(0xFF & color)/ 255,1];\r\n\t\t\t(this._color).__id=++Color._COLODID;\r\n\t\t}\r\n\r\n\t\t__class(Color,'laya.utils.Color');\r\n\t\tColor._initDefault=function(){\r\n\t\t\tColor._DEFAULT={};\r\n\t\t\tfor (var i in Color._COLOR_MAP)Color._SAVE[i]=Color._DEFAULT[i]=new Color(Color._COLOR_MAP[i]);\r\n\t\t\treturn Color._DEFAULT;\r\n\t\t}\r\n\r\n\t\tColor._initSaveMap=function(){\r\n\t\t\tColor._SAVE_SIZE=0;\r\n\t\t\tColor._SAVE={};\r\n\t\t\tfor (var i in Color._DEFAULT)Color._SAVE[i]=Color._DEFAULT[i];\r\n\t\t}\r\n\r\n\t\tColor.create=function(str){\r\n\t\t\tvar color=Color._SAVE[str+\"\"];\r\n\t\t\tif (color !=null)return color;\r\n\t\t\t(Color._SAVE_SIZE < 1000)|| Color._initSaveMap();\r\n\t\t\treturn Color._SAVE[str+\"\"]=new Color(str);\r\n\t\t}\r\n\r\n\t\tColor._SAVE={};\r\n\t\tColor._SAVE_SIZE=0;\r\n\t\tColor._COLOR_MAP={\"white\":'#FFFFFF',\"red\":'#FF0000',\"green\":'#00FF00',\"blue\":'#0000FF',\"black\":'#000000',\"yellow\":'#FFFF00','gray':'#AAAAAA'};\r\n\t\tColor._DEFAULT=Color._initDefault();\r\n\t\tColor._COLODID=1;\r\n\t\treturn Color;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*<code>Dictionary</code> 是一个字典型的数据存取类。\r\n\t*/\r\n\t//class laya.utils.Dictionary\r\n\tvar Dictionary=(function(){\r\n\t\tfunction Dictionary(){\r\n\t\t\tthis._values=[];\r\n\t\t\tthis._keys=[];\r\n\t\t}\r\n\r\n\t\t__class(Dictionary,'laya.utils.Dictionary');\r\n\t\tvar __proto=Dictionary.prototype;\r\n\t\t/**\r\n\t\t*给指定的键名设置值。\r\n\t\t*@param key 键名。\r\n\t\t*@param value 值。\r\n\t\t*/\r\n\t\t__proto.set=function(key,value){\r\n\t\t\tvar index=this.indexOf(key);\r\n\t\t\tif (index >=0){\r\n\t\t\t\tthis._values[index]=value;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis._keys.push(key);\r\n\t\t\tthis._values.push(value);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*获取指定对象的键名索引。\r\n\t\t*@param key 键名对象。\r\n\t\t*@return 键名索引。\r\n\t\t*/\r\n\t\t__proto.indexOf=function(key){\r\n\t\t\tvar index=this._keys.indexOf(key);\r\n\t\t\tif (index >=0)return index;\r\n\t\t\tkey=((typeof key=='string'))? Number(key):(((typeof key=='number'))? key.toString():key);\r\n\t\t\treturn this._keys.indexOf(key);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*返回指定键名的值。\r\n\t\t*@param key 键名对象。\r\n\t\t*@return 指定键名的值。\r\n\t\t*/\r\n\t\t__proto.get=function(key){\r\n\t\t\tvar index=this.indexOf(key);\r\n\t\t\treturn index < 0 ? null :this._values[index];\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*移除指定键名的值。\r\n\t\t*@param key 键名对象。\r\n\t\t*@return 是否成功移除。\r\n\t\t*/\r\n\t\t__proto.remove=function(key){\r\n\t\t\tvar index=this.indexOf(key);\r\n\t\t\tif (index >=0){\r\n\t\t\t\tthis._keys.splice(index,1);\r\n\t\t\t\tthis._values.splice(index,1);\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*清除此对象的键名列表和键值列表。\r\n\t\t*/\r\n\t\t__proto.clear=function(){\r\n\t\t\tthis._values.length=0;\r\n\t\t\tthis._keys.length=0;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*获取所有的子元素键名列表。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'keys',function(){\r\n\t\t\treturn this._keys;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*获取所有的子元素列表。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'values',function(){\r\n\t\t\treturn this._values;\r\n\t\t});\r\n\r\n\t\treturn Dictionary;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*<code>Dragging</code> 类是触摸滑动控件。\r\n\t*/\r\n\t//class laya.utils.Dragging\r\n\tvar Dragging=(function(){\r\n\t\tfunction Dragging(){\r\n\t\t\t//this.target=null;\r\n\t\t\tthis.ratio=0.92;\r\n\t\t\tthis.maxOffset=60;\r\n\t\t\t//this.area=null;\r\n\t\t\t//this.hasInertia=false;\r\n\t\t\t//this.elasticDistance=NaN;\r\n\t\t\t//this.elasticBackTime=NaN;\r\n\t\t\t//this.data=null;\r\n\t\t\tthis._dragging=false;\r\n\t\t\tthis._clickOnly=true;\r\n\t\t\t//this._elasticRateX=NaN;\r\n\t\t\t//this._elasticRateY=NaN;\r\n\t\t\t//this._lastX=NaN;\r\n\t\t\t//this._lastY=NaN;\r\n\t\t\t//this._offsetX=NaN;\r\n\t\t\t//this._offsetY=NaN;\r\n\t\t\t//this._offsets=null;\r\n\t\t\t//this._disableMouseEvent=false;\r\n\t\t\t//this._tween=null;\r\n\t\t\t//this._parent=null;\r\n\t\t}\r\n\r\n\t\t__class(Dragging,'laya.utils.Dragging');\r\n\t\tvar __proto=Dragging.prototype;\r\n\t\t/**\r\n\t\t*开始拖拽。\r\n\t\t*@param target 待拖拽的 <code>Sprite</code> 对象。\r\n\t\t*@param area 滑动范围。\r\n\t\t*@param hasInertia 拖动是否有惯性。\r\n\t\t*@param elasticDistance 橡皮筋最大值。\r\n\t\t*@param elasticBackTime 橡皮筋回弹时间，单位为毫秒。\r\n\t\t*@param data 事件携带数据。\r\n\t\t*@param disableMouseEvent 鼠标事件是否有效。\r\n\t\t*@param ratio 惯性阻尼系数\r\n\t\t*/\r\n\t\t__proto.start=function(target,area,hasInertia,elasticDistance,elasticBackTime,data,disableMouseEvent,ratio){\r\n\t\t\t(ratio===void 0)&& (ratio=0.92);\r\n\t\t\tthis.clearTimer();\r\n\t\t\tthis.target=target;\r\n\t\t\tthis.area=area;\r\n\t\t\tthis.hasInertia=hasInertia;\r\n\t\t\tthis.elasticDistance=area ? elasticDistance :0;\r\n\t\t\tthis.elasticBackTime=elasticBackTime;\r\n\t\t\tthis.data=data;\r\n\t\t\tthis._disableMouseEvent=disableMouseEvent;\r\n\t\t\tthis.ratio=ratio;\r\n\t\t\tif (target.globalScaleX !=1 || target.globalScaleY !=1){\r\n\t\t\t\tthis._parent=target.parent;\r\n\t\t\t\t}else {\r\n\t\t\t\tthis._parent=Laya.stage;\r\n\t\t\t}\r\n\t\t\tthis._clickOnly=true;\r\n\t\t\tthis._dragging=true;\r\n\t\t\tthis._elasticRateX=this._elasticRateY=1;\r\n\t\t\tthis._lastX=this._parent.mouseX;\r\n\t\t\tthis._lastY=this._parent.mouseY;\r\n\t\t\tLaya.stage.on(\"mouseup\",this,this.onStageMouseUp);\r\n\t\t\tLaya.stage.on(\"mouseout\",this,this.onStageMouseUp);\r\n\t\t\tLaya.timer.frameLoop(1,this,this.loop);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*清除计时器。\r\n\t\t*/\r\n\t\t__proto.clearTimer=function(){\r\n\t\t\tLaya.timer.clear(this,this.loop);\r\n\t\t\tLaya.timer.clear(this,this.tweenMove);\r\n\t\t\tif (this._tween){\r\n\t\t\t\tthis._tween.recover();\r\n\t\t\t\tthis._tween=null;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*停止拖拽。\r\n\t\t*/\r\n\t\t__proto.stop=function(){\r\n\t\t\tif (this._dragging){\r\n\t\t\t\tMouseManager.instance.disableMouseEvent=false;\r\n\t\t\t\tLaya.stage.off(\"mouseup\",this,this.onStageMouseUp);\r\n\t\t\t\tLaya.stage.off(\"mouseout\",this,this.onStageMouseUp);\r\n\t\t\t\tthis._dragging=false;\r\n\t\t\t\tthis.target && this.area && this.backToArea();\r\n\t\t\t\tthis.clear();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*拖拽的循环处理函数。\r\n\t\t*/\r\n\t\t__proto.loop=function(){\r\n\t\t\tvar point=this._parent.getMousePoint();\r\n\t\t\tvar mouseX=point.x;\r\n\t\t\tvar mouseY=point.y;\r\n\t\t\tvar offsetX=mouseX-this._lastX;\r\n\t\t\tvar offsetY=mouseY-this._lastY;\r\n\t\t\tif (this._clickOnly){\r\n\t\t\t\tif (Math.abs(offsetX *Laya.stage._canvasTransform.getScaleX())> 1 || Math.abs(offsetY *Laya.stage._canvasTransform.getScaleY())> 1){\r\n\t\t\t\t\tthis._clickOnly=false;\r\n\t\t\t\t\tthis._offsets || (this._offsets=[]);\r\n\t\t\t\t\tthis._offsets.length=0;\r\n\t\t\t\t\tthis.target.event(\"dragstart\",this.data);\r\n\t\t\t\t\tMouseManager.instance.disableMouseEvent=this._disableMouseEvent;\r\n\t\t\t\t\tthis.target._set$P(\"$_MOUSEDOWN\",false);\r\n\t\t\t\t}else return;\r\n\t\t\t\t}else {\r\n\t\t\t\tthis._offsets.push(offsetX,offsetY);\r\n\t\t\t}\r\n\t\t\tif (offsetX===0 && offsetY===0)return;\r\n\t\t\tthis._lastX=mouseX;\r\n\t\t\tthis._lastY=mouseY;\r\n\t\t\tthis.target.x+=offsetX *this._elasticRateX;\r\n\t\t\tthis.target.y+=offsetY *this._elasticRateY;\r\n\t\t\tthis.area && this.checkArea();\r\n\t\t\tthis.target.event(\"dragmove\",this.data);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*拖拽区域检测。\r\n\t\t*/\r\n\t\t__proto.checkArea=function(){\r\n\t\t\tif (this.elasticDistance <=0){\r\n\t\t\t\tthis.backToArea();\r\n\t\t\t\t}else {\r\n\t\t\t\tif (this.target.x < this.area.x){\r\n\t\t\t\t\tvar offsetX=this.area.x-this.target.x;\r\n\t\t\t\t\t}else if (this.target.x > this.area.x+this.area.width){\r\n\t\t\t\t\toffsetX=this.target.x-this.area.x-this.area.width;\r\n\t\t\t\t\t}else {\r\n\t\t\t\t\toffsetX=0;\r\n\t\t\t\t}\r\n\t\t\t\tthis._elasticRateX=Math.max(0,1-(offsetX / this.elasticDistance));\r\n\t\t\t\tif (this.target.y < this.area.y){\r\n\t\t\t\t\tvar offsetY=this.area.y-this.target.y;\r\n\t\t\t\t\t}else if (this.target.y > this.area.y+this.area.height){\r\n\t\t\t\t\toffsetY=this.target.y-this.area.y-this.area.height;\r\n\t\t\t\t\t}else {\r\n\t\t\t\t\toffsetY=0;\r\n\t\t\t\t}\r\n\t\t\t\tthis._elasticRateY=Math.max(0,1-(offsetY / this.elasticDistance));\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*移动至设定的拖拽区域。\r\n\t\t*/\r\n\t\t__proto.backToArea=function(){\r\n\t\t\tthis.target.x=Math.min(Math.max(this.target.x,this.area.x),this.area.x+this.area.width);\r\n\t\t\tthis.target.y=Math.min(Math.max(this.target.y,this.area.y),this.area.y+this.area.height);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*舞台的抬起事件侦听函数。\r\n\t\t*@param e Event 对象。\r\n\t\t*/\r\n\t\t__proto.onStageMouseUp=function(e){\r\n\t\t\tMouseManager.instance.disableMouseEvent=false;\r\n\t\t\tLaya.stage.off(\"mouseup\",this,this.onStageMouseUp);\r\n\t\t\tLaya.stage.off(\"mouseout\",this,this.onStageMouseUp);\r\n\t\t\tLaya.timer.clear(this,this.loop);\r\n\t\t\tif (this._clickOnly || !this.target)return;\r\n\t\t\tif (this.hasInertia){\r\n\t\t\t\tif (this._offsets.length < 1){\r\n\t\t\t\t\tthis._offsets.push(this._parent.mouseX-this._lastX,this._parent.mouseY-this._lastY);\r\n\t\t\t\t}\r\n\t\t\t\tthis._offsetX=this._offsetY=0;\r\n\t\t\t\tvar len=this._offsets.length;\r\n\t\t\t\tvar n=Math.min(len,6);\r\n\t\t\t\tvar m=this._offsets.length-n;\r\n\t\t\t\tfor (var i=len-1;i > m;i--){\r\n\t\t\t\t\tthis._offsetY+=this._offsets[i--];\r\n\t\t\t\t\tthis._offsetX+=this._offsets[i];\r\n\t\t\t\t}\r\n\t\t\t\tthis._offsetX=this._offsetX / n *2;\r\n\t\t\t\tthis._offsetY=this._offsetY / n *2;\r\n\t\t\t\tif (Math.abs(this._offsetX)> this.maxOffset)this._offsetX=this._offsetX > 0 ? this.maxOffset :-this.maxOffset;\r\n\t\t\t\tif (Math.abs(this._offsetY)> this.maxOffset)this._offsetY=this._offsetY > 0 ? this.maxOffset :-this.maxOffset;\r\n\t\t\t\tLaya.timer.frameLoop(1,this,this.tweenMove);\r\n\t\t\t\t}else if (this.elasticDistance > 0){\r\n\t\t\t\tthis.checkElastic();\r\n\t\t\t\t}else {\r\n\t\t\t\tthis.clear();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*橡皮筋效果检测。\r\n\t\t*/\r\n\t\t__proto.checkElastic=function(){\r\n\t\t\tvar tx=NaN;\r\n\t\t\tvar ty=NaN;\r\n\t\t\tif (this.target.x < this.area.x)tx=this.area.x;\r\n\t\t\telse if (this.target.x > this.area.x+this.area.width)tx=this.area.x+this.area.width;\r\n\t\t\tif (this.target.y < this.area.y)ty=this.area.y;\r\n\t\t\telse if (this.target.y > this.area.y+this.area.height)ty=this.area.y+this.area.height;\r\n\t\t\tif (!isNaN(tx)|| !isNaN(ty)){\r\n\t\t\t\tvar obj={};\r\n\t\t\t\tif (!isNaN(tx))obj.x=tx;\r\n\t\t\t\tif (!isNaN(ty))obj.y=ty;\r\n\t\t\t\tthis._tween=Tween.to(this.target,obj,this.elasticBackTime,Ease.sineOut,Handler.create(this,this.clear),0,false,false);\r\n\t\t\t\t}else {\r\n\t\t\t\tthis.clear();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*移动。\r\n\t\t*/\r\n\t\t__proto.tweenMove=function(){\r\n\t\t\tthis._offsetX *=this.ratio *this._elasticRateX;\r\n\t\t\tthis._offsetY *=this.ratio *this._elasticRateY;\r\n\t\t\tthis.target.x+=this._offsetX;\r\n\t\t\tthis.target.y+=this._offsetY;\r\n\t\t\tthis.area && this.checkArea();\r\n\t\t\tthis.target.event(\"dragmove\",this.data);\r\n\t\t\tif ((Math.abs(this._offsetX)< 1 && Math.abs(this._offsetY)< 1)|| this._elasticRateX < 0.5 || this._elasticRateY < 0.5){\r\n\t\t\t\tLaya.timer.clear(this,this.tweenMove);\r\n\t\t\t\tif (this.elasticDistance > 0)this.checkElastic();\r\n\t\t\t\telse this.clear();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*结束拖拽。\r\n\t\t*/\r\n\t\t__proto.clear=function(){\r\n\t\t\tif (this.target){\r\n\t\t\t\tthis.clearTimer();\r\n\t\t\t\tvar sp=this.target;\r\n\t\t\t\tthis.target=null;\r\n\t\t\t\tthis._parent=null;\r\n\t\t\t\tsp.event(\"dragend\",this.data);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn Dragging;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*<code>Ease</code> 类定义了缓动函数，以便实现 <code>Tween</code> 动画的缓动效果。\r\n\t*/\r\n\t//class laya.utils.Ease\r\n\tvar Ease=(function(){\r\n\t\tfunction Ease(){};\r\n\t\t__class(Ease,'laya.utils.Ease');\r\n\t\tEase.linearNone=function(t,b,c,d){\r\n\t\t\treturn c *t / d+b;\r\n\t\t}\r\n\r\n\t\tEase.linearIn=function(t,b,c,d){\r\n\t\t\treturn c *t / d+b;\r\n\t\t}\r\n\r\n\t\tEase.linearInOut=function(t,b,c,d){\r\n\t\t\treturn c *t / d+b;\r\n\t\t}\r\n\r\n\t\tEase.linearOut=function(t,b,c,d){\r\n\t\t\treturn c *t / d+b;\r\n\t\t}\r\n\r\n\t\tEase.bounceIn=function(t,b,c,d){\r\n\t\t\treturn c-Ease.bounceOut(d-t,0,c,d)+b;\r\n\t\t}\r\n\r\n\t\tEase.bounceInOut=function(t,b,c,d){\r\n\t\t\tif (t < d *0.5)return Ease.bounceIn(t *2,0,c,d)*.5+b;\r\n\t\t\telse return Ease.bounceOut(t *2-d,0,c,d)*.5+c *.5+b;\r\n\t\t}\r\n\r\n\t\tEase.bounceOut=function(t,b,c,d){\r\n\t\t\tif ((t /=d)< (1 / 2.75))return c *(7.5625 *t *t)+b;\r\n\t\t\telse if (t < (2 / 2.75))return c *(7.5625 *(t-=(1.5 / 2.75))*t+.75)+b;\r\n\t\t\telse if (t < (2.5 / 2.75))return c *(7.5625 *(t-=(2.25 / 2.75))*t+.9375)+b;\r\n\t\t\telse return c *(7.5625 *(t-=(2.625 / 2.75))*t+.984375)+b;\r\n\t\t}\r\n\r\n\t\tEase.backIn=function(t,b,c,d,s){\r\n\t\t\t(s===void 0)&& (s=1.70158);\r\n\t\t\treturn c *(t /=d)*t *((s+1)*t-s)+b;\r\n\t\t}\r\n\r\n\t\tEase.backInOut=function(t,b,c,d,s){\r\n\t\t\t(s===void 0)&& (s=1.70158);\r\n\t\t\tif ((t /=d *0.5)< 1)return c *0.5 *(t *t *(((s *=(1.525))+1)*t-s))+b;\r\n\t\t\treturn c / 2 *((t-=2)*t *(((s *=(1.525))+1)*t+s)+2)+b;\r\n\t\t}\r\n\r\n\t\tEase.backOut=function(t,b,c,d,s){\r\n\t\t\t(s===void 0)&& (s=1.70158);\r\n\t\t\treturn c *((t=t / d-1)*t *((s+1)*t+s)+1)+b;\r\n\t\t}\r\n\r\n\t\tEase.elasticIn=function(t,b,c,d,a,p){\r\n\t\t\t(a===void 0)&& (a=0);\r\n\t\t\t(p===void 0)&& (p=0);\r\n\t\t\tvar s;\r\n\t\t\tif (t==0)return b;\r\n\t\t\tif ((t /=d)==1)return b+c;\r\n\t\t\tif (!p)p=d *.3;\r\n\t\t\tif (!a || (c > 0 && a < c)|| (c < 0 && a <-c)){\r\n\t\t\t\ta=c;\r\n\t\t\t\ts=p / 4;\r\n\t\t\t}else s=p / Ease.PI2 *Math.asin(c / a);\r\n\t\t\treturn-(a *Math.pow(2,10 *(t-=1))*Math.sin((t *d-s)*Ease.PI2 / p))+b;\r\n\t\t}\r\n\r\n\t\tEase.elasticInOut=function(t,b,c,d,a,p){\r\n\t\t\t(a===void 0)&& (a=0);\r\n\t\t\t(p===void 0)&& (p=0);\r\n\t\t\tvar s;\r\n\t\t\tif (t==0)return b;\r\n\t\t\tif ((t /=d *0.5)==2)return b+c;\r\n\t\t\tif (!p)p=d *(.3 *1.5);\r\n\t\t\tif (!a || (c > 0 && a < c)|| (c < 0 && a <-c)){\r\n\t\t\t\ta=c;\r\n\t\t\t\ts=p / 4;\r\n\t\t\t}else s=p / Ease.PI2 *Math.asin(c / a);\r\n\t\t\tif (t < 1)return-.5 *(a *Math.pow(2,10 *(t-=1))*Math.sin((t *d-s)*Ease.PI2 / p))+b;\r\n\t\t\treturn a *Math.pow(2,-10 *(t-=1))*Math.sin((t *d-s)*Ease.PI2 / p)*.5+c+b;\r\n\t\t}\r\n\r\n\t\tEase.elasticOut=function(t,b,c,d,a,p){\r\n\t\t\t(a===void 0)&& (a=0);\r\n\t\t\t(p===void 0)&& (p=0);\r\n\t\t\tvar s;\r\n\t\t\tif (t==0)return b;\r\n\t\t\tif ((t /=d)==1)return b+c;\r\n\t\t\tif (!p)p=d *.3;\r\n\t\t\tif (!a || (c > 0 && a < c)|| (c < 0 && a <-c)){\r\n\t\t\t\ta=c;\r\n\t\t\t\ts=p / 4;\r\n\t\t\t}else s=p / Ease.PI2 *Math.asin(c / a);\r\n\t\t\treturn (a *Math.pow(2,-10 *t)*Math.sin((t *d-s)*Ease.PI2 / p)+c+b);\r\n\t\t}\r\n\r\n\t\tEase.strongIn=function(t,b,c,d){\r\n\t\t\treturn c *(t /=d)*t *t *t *t+b;\r\n\t\t}\r\n\r\n\t\tEase.strongInOut=function(t,b,c,d){\r\n\t\t\tif ((t /=d *0.5)< 1)return c *0.5 *t *t *t *t *t+b;\r\n\t\t\treturn c *0.5 *((t-=2)*t *t *t *t+2)+b;\r\n\t\t}\r\n\r\n\t\tEase.strongOut=function(t,b,c,d){\r\n\t\t\treturn c *((t=t / d-1)*t *t *t *t+1)+b;\r\n\t\t}\r\n\r\n\t\tEase.sineInOut=function(t,b,c,d){\r\n\t\t\treturn-c *0.5 *(Math.cos(Math.PI *t / d)-1)+b;\r\n\t\t}\r\n\r\n\t\tEase.sineIn=function(t,b,c,d){\r\n\t\t\treturn-c *Math.cos(t / d *Ease.HALF_PI)+c+b;\r\n\t\t}\r\n\r\n\t\tEase.sineOut=function(t,b,c,d){\r\n\t\t\treturn c *Math.sin(t / d *Ease.HALF_PI)+b;\r\n\t\t}\r\n\r\n\t\tEase.quintIn=function(t,b,c,d){\r\n\t\t\treturn c *(t /=d)*t *t *t *t+b;\r\n\t\t}\r\n\r\n\t\tEase.quintInOut=function(t,b,c,d){\r\n\t\t\tif ((t /=d *0.5)< 1)return c *0.5 *t *t *t *t *t+b;\r\n\t\t\treturn c *0.5 *((t-=2)*t *t *t *t+2)+b;\r\n\t\t}\r\n\r\n\t\tEase.quintOut=function(t,b,c,d){\r\n\t\t\treturn c *((t=t / d-1)*t *t *t *t+1)+b;\r\n\t\t}\r\n\r\n\t\tEase.quartIn=function(t,b,c,d){\r\n\t\t\treturn c *(t /=d)*t *t *t+b;\r\n\t\t}\r\n\r\n\t\tEase.quartInOut=function(t,b,c,d){\r\n\t\t\tif ((t /=d *0.5)< 1)return c *0.5 *t *t *t *t+b;\r\n\t\t\treturn-c *0.5 *((t-=2)*t *t *t-2)+b;\r\n\t\t}\r\n\r\n\t\tEase.quartOut=function(t,b,c,d){\r\n\t\t\treturn-c *((t=t / d-1)*t *t *t-1)+b;\r\n\t\t}\r\n\r\n\t\tEase.cubicIn=function(t,b,c,d){\r\n\t\t\treturn c *(t /=d)*t *t+b;\r\n\t\t}\r\n\r\n\t\tEase.cubicInOut=function(t,b,c,d){\r\n\t\t\tif ((t /=d *0.5)< 1)return c *0.5 *t *t *t+b;\r\n\t\t\treturn c *0.5 *((t-=2)*t *t+2)+b;\r\n\t\t}\r\n\r\n\t\tEase.cubicOut=function(t,b,c,d){\r\n\t\t\treturn c *((t=t / d-1)*t *t+1)+b;\r\n\t\t}\r\n\r\n\t\tEase.quadIn=function(t,b,c,d){\r\n\t\t\treturn c *(t /=d)*t+b;\r\n\t\t}\r\n\r\n\t\tEase.quadInOut=function(t,b,c,d){\r\n\t\t\tif ((t /=d *0.5)< 1)return c *0.5 *t *t+b;\r\n\t\t\treturn-c *0.5 *((--t)*(t-2)-1)+b;\r\n\t\t}\r\n\r\n\t\tEase.quadOut=function(t,b,c,d){\r\n\t\t\treturn-c *(t /=d)*(t-2)+b;\r\n\t\t}\r\n\r\n\t\tEase.expoIn=function(t,b,c,d){\r\n\t\t\treturn (t==0)? b :c *Math.pow(2,10 *(t / d-1))+b-c *0.001;\r\n\t\t}\r\n\r\n\t\tEase.expoInOut=function(t,b,c,d){\r\n\t\t\tif (t==0)return b;\r\n\t\t\tif (t==d)return b+c;\r\n\t\t\tif ((t /=d *0.5)< 1)return c *0.5 *Math.pow(2,10 *(t-1))+b;\r\n\t\t\treturn c *0.5 *(-Math.pow(2,-10 *--t)+2)+b;\r\n\t\t}\r\n\r\n\t\tEase.expoOut=function(t,b,c,d){\r\n\t\t\treturn (t==d)? b+c :c *(-Math.pow(2,-10 *t / d)+1)+b;\r\n\t\t}\r\n\r\n\t\tEase.circIn=function(t,b,c,d){\r\n\t\t\treturn-c *(Math.sqrt(1-(t /=d)*t)-1)+b;\r\n\t\t}\r\n\r\n\t\tEase.circInOut=function(t,b,c,d){\r\n\t\t\tif ((t /=d *0.5)< 1)return-c *0.5 *(Math.sqrt(1-t *t)-1)+b;\r\n\t\t\treturn c *0.5 *(Math.sqrt(1-(t-=2)*t)+1)+b;\r\n\t\t}\r\n\r\n\t\tEase.circOut=function(t,b,c,d){\r\n\t\t\treturn c *Math.sqrt(1-(t=t / d-1)*t)+b;\r\n\t\t}\r\n\r\n\t\tEase.HALF_PI=Math.PI *0.5;\r\n\t\tEase.PI2=Math.PI *2;\r\n\t\treturn Ease;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*鼠标点击区域，可以设置绘制一系列矢量图作为点击区域和非点击区域（目前只支持圆形，矩形，多边形）\r\n\t*/\r\n\t//class laya.utils.HitArea\r\n\tvar HitArea=(function(){\r\n\t\tfunction HitArea(){\r\n\t\t\tthis._hit=null;\r\n\t\t\tthis._unHit=null;\r\n\t\t}\r\n\r\n\t\t__class(HitArea,'laya.utils.HitArea');\r\n\t\tvar __proto=HitArea.prototype;\r\n\t\t/**\r\n\t\t*是否包含某个点\r\n\t\t*@param x x坐标\r\n\t\t*@param y y坐标\r\n\t\t*@return 是否点击到\r\n\t\t*/\r\n\t\t__proto.isHit=function(x,y){\r\n\t\t\tif (!HitArea.isHitGraphic(x,y,this.hit))return false;\r\n\t\t\treturn !HitArea.isHitGraphic(x,y,this.unHit);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*检测对象是否包含指定的点。\r\n\t\t*@param x 点的 X 轴坐标值（水平位置）。\r\n\t\t*@param y 点的 Y 轴坐标值（垂直位置）。\r\n\t\t*@return 如果包含指定的点，则值为 true；否则为 false。\r\n\t\t*/\r\n\t\t__proto.contains=function(x,y){\r\n\t\t\treturn this.isHit(x,y);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*不可点击区域，可以设置绘制一系列矢量图作为非点击区域（目前只支持圆形，矩形，多边形）\r\n\t\t*/\r\n\t\t__getset(0,__proto,'unHit',function(){\r\n\t\t\tif (!this._unHit)this._unHit=new Graphics();\r\n\t\t\treturn this._unHit;\r\n\t\t\t},function(value){\r\n\t\t\tthis._unHit=value;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*可点击区域，可以设置绘制一系列矢量图作为点击区域（目前只支持圆形，矩形，多边形）\r\n\t\t*/\r\n\t\t__getset(0,__proto,'hit',function(){\r\n\t\t\tif (!this._hit)this._hit=new Graphics();\r\n\t\t\treturn this._hit;\r\n\t\t\t},function(value){\r\n\t\t\tthis._hit=value;\r\n\t\t});\r\n\r\n\t\tHitArea.isHitGraphic=function(x,y,graphic){\r\n\t\t\tif (!graphic)return false;\r\n\t\t\tvar cmds;\r\n\t\t\tcmds=graphic.cmds;\r\n\t\t\tif (!cmds && graphic._one){\r\n\t\t\t\tcmds=HitArea._cmds;\r\n\t\t\t\tcmds.length=1;\r\n\t\t\t\tcmds[0]=graphic._one;\r\n\t\t\t}\r\n\t\t\tif (!cmds)return false;\r\n\t\t\tvar i=0,len=0;\r\n\t\t\tlen=cmds.length;\r\n\t\t\tvar cmd;\r\n\t\t\tfor (i=0;i < len;i++){\r\n\t\t\t\tcmd=cmds[i];\r\n\t\t\t\tif (!cmd)continue ;\r\n\t\t\t\tvar context=Render._context;\r\n\t\t\t\tswitch (cmd.callee){\r\n\t\t\t\t\tcase context._translate:\r\n\t\t\t\t\tcase 6:\r\n\t\t\t\t\t\tx-=cmd[0];\r\n\t\t\t\t\t\ty-=cmd[1];\r\n\t\t\t\t\tdefault :\r\n\t\t\t\t\t}\r\n\t\t\t\tif (HitArea.isHitCmd(x,y,cmd))return true;\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tHitArea.isHitCmd=function(x,y,cmd){\r\n\t\t\tif (!cmd)return false;\r\n\t\t\tvar context=Render._context;\r\n\t\t\tvar rst=false;\r\n\t\t\tswitch (cmd[\"callee\"]){\r\n\t\t\t\tcase context._drawRect:\r\n\t\t\t\tcase 13:\r\n\t\t\t\t\tHitArea._rec.setTo(cmd[0],cmd[1],cmd[2],cmd[3]);\r\n\t\t\t\t\trst=HitArea._rec.contains(x,y);\r\n\t\t\t\t\tbreak ;\r\n\t\t\t\tcase context._drawCircle:\r\n\t\t\t\tcase context._fillCircle:\r\n\t\t\t\tcase 14:;\r\n\t\t\t\t\tvar d=NaN;\r\n\t\t\t\t\tx-=cmd[0];\r\n\t\t\t\t\ty-=cmd[1];\r\n\t\t\t\t\td=x *x+y *y;\r\n\t\t\t\t\trst=d < cmd[2] *cmd[2];\r\n\t\t\t\t\tbreak ;\r\n\t\t\t\tcase context._drawPoly:\r\n\t\t\t\tcase 18:\r\n\t\t\t\t\tx-=cmd[0];\r\n\t\t\t\t\ty-=cmd[1];\r\n\t\t\t\t\trst=HitArea.ptInPolygon(x,y,cmd[2]);\r\n\t\t\t\t\tbreak ;\r\n\t\t\t\tdefault :\r\n\t\t\t\t\tbreak ;\r\n\t\t\t\t}\r\n\t\t\treturn rst;\r\n\t\t}\r\n\r\n\t\tHitArea.ptInPolygon=function(x,y,areaPoints){\r\n\t\t\tvar p;\r\n\t\t\tp=HitArea._ptPoint;\r\n\t\t\tp.setTo(x,y);\r\n\t\t\tvar nCross=0;\r\n\t\t\tvar p1x=NaN,p1y=NaN,p2x=NaN,p2y=NaN;\r\n\t\t\tvar len=0;\r\n\t\t\tlen=areaPoints.length;\r\n\t\t\tfor (var i=0;i < len;i+=2){\r\n\t\t\t\tp1x=areaPoints[i];\r\n\t\t\t\tp1y=areaPoints[i+1];\r\n\t\t\t\tp2x=areaPoints[(i+2)% len];\r\n\t\t\t\tp2y=areaPoints[(i+3)% len];\r\n\t\t\t\tif (p1y==p2y)\r\n\t\t\t\t\tcontinue ;\r\n\t\t\t\tif (p.y < Math.min(p1y,p2y))\r\n\t\t\t\t\tcontinue ;\r\n\t\t\t\tif (p.y >=Math.max(p1y,p2y))\r\n\t\t\t\t\tcontinue ;\r\n\t\t\t\tvar tx=(p.y-p1y)*(p2x-p1x)/ (p2y-p1y)+p1x;\r\n\t\t\t\tif (tx > p.x){\r\n\t\t\t\t\tnCross++;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn (nCross % 2==1);\r\n\t\t}\r\n\r\n\t\tHitArea._cmds=[];\r\n\t\t__static(HitArea,\r\n\t\t['_rec',function(){return this._rec=new Rectangle();},'_ptPoint',function(){return this._ptPoint=new Point();}\r\n\t\t]);\r\n\t\treturn HitArea;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*<code>HTMLChar</code> 是一个 HTML 字符类。\r\n\t*/\r\n\t//class laya.utils.HTMLChar\r\n\tvar HTMLChar=(function(){\r\n\t\tfunction HTMLChar(char,w,h,style){\r\n\t\t\t//this._sprite=null;\r\n\t\t\t//this._x=NaN;\r\n\t\t\t//this._y=NaN;\r\n\t\t\t//this._w=NaN;\r\n\t\t\t//this._h=NaN;\r\n\t\t\t//this.isWord=false;\r\n\t\t\t//this.char=null;\r\n\t\t\t//this.charNum=NaN;\r\n\t\t\t//this.style=null;\r\n\t\t\tthis.char=char;\r\n\t\t\tthis.charNum=char.charCodeAt(0);\r\n\t\t\tthis._x=this._y=0;\r\n\t\t\tthis.width=w;\r\n\t\t\tthis.height=h;\r\n\t\t\tthis.style=style;\r\n\t\t\tthis.isWord=!HTMLChar._isWordRegExp.test(char);\r\n\t\t}\r\n\r\n\t\t__class(HTMLChar,'laya.utils.HTMLChar');\r\n\t\tvar __proto=HTMLChar.prototype;\r\n\t\tLaya.imps(__proto,{\"laya.display.ILayout\":true})\r\n\t\t/**\r\n\t\t*设置与此对象绑定的显示对象 <code>Sprite</code> 。\r\n\t\t*@param sprite 显示对象 <code>Sprite</code> 。\r\n\t\t*/\r\n\t\t__proto.setSprite=function(sprite){\r\n\t\t\tthis._sprite=sprite;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*获取与此对象绑定的显示对象 <code>Sprite</code>。\r\n\t\t*@return\r\n\t\t*/\r\n\t\t__proto.getSprite=function(){\r\n\t\t\treturn this._sprite;\r\n\t\t}\r\n\r\n\t\t/**@private */\r\n\t\t__proto._isChar=function(){\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\t/**@private */\r\n\t\t__proto._getCSSStyle=function(){\r\n\t\t\treturn this.style;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*高度。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'height',function(){\r\n\t\t\treturn this._h;\r\n\t\t\t},function(value){\r\n\t\t\tthis._h=value;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*宽度。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'width',function(){\r\n\t\t\treturn this._w;\r\n\t\t\t},function(value){\r\n\t\t\tthis._w=value;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*此对象存储的 Y 轴坐标值。\r\n\t\t*当设置此值时，如果此对象有绑定的 Sprite 对象，则改变 Sprite 对象的属性 y 的值。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'y',function(){\r\n\t\t\treturn this._y;\r\n\t\t\t},function(value){\r\n\t\t\tif (this._sprite){\r\n\t\t\t\tthis._sprite.y=value;\r\n\t\t\t}\r\n\t\t\tthis._y=value;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*此对象存储的 X 轴坐标值。\r\n\t\t*当设置此值时，如果此对象有绑定的 Sprite 对象，则改变 Sprite 对象的属性 x 的值。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'x',function(){\r\n\t\t\treturn this._x;\r\n\t\t\t},function(value){\r\n\t\t\tif (this._sprite){\r\n\t\t\t\tthis._sprite.x=value;\r\n\t\t\t}\r\n\t\t\tthis._x=value;\r\n\t\t});\r\n\r\n\t\tHTMLChar._isWordRegExp=new RegExp(\"[\\\\w\\.]\",\"\");\r\n\t\treturn HTMLChar;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*<code>Log</code> 类用于在界面内显示日志记录信息。\r\n\t*/\r\n\t//class laya.utils.Log\r\n\tvar Log=(function(){\r\n\t\tfunction Log(){};\r\n\t\t__class(Log,'laya.utils.Log');\r\n\t\tLog.enable=function(){\r\n\t\t\tif (!Log._logdiv){\r\n\t\t\t\tLog._logdiv=Browser.window.document.createElement('div');\r\n\t\t\t\tBrowser.window.document.body.appendChild(Log._logdiv);\r\n\t\t\t\tLog._logdiv.style.cssText=\"pointer-events:none;border:white;overflow:hidden;z-index:1000000;background:rgba(100,100,100,0.6);color:white;position: absolute;left:0px;top:0px;width:50%;height:50%;\";\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tLog.toggle=function(){\r\n\t\t\tvar style=Log._logdiv.style;\r\n\t\t\tif (style.width==\"1px\"){\r\n\t\t\t\tstyle.width=style.height=\"50%\";\r\n\t\t\t\t}else {\r\n\t\t\t\tstyle.width=style.height=\"1px\";\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tLog.print=function(value){\r\n\t\t\tif (Log._logdiv){\r\n\t\t\t\tif (Log._count >=Log.maxCount)Log.clear();\r\n\t\t\t\tLog._count++;\r\n\t\t\t\tLog._logdiv.innerText+=value+\"\\n\";\r\n\t\t\t\tLog._logdiv.scrollTop=Log._logdiv.scrollHeight;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tLog.clear=function(){\r\n\t\t\tLog._logdiv.innerText=\"\";\r\n\t\t\tLog._count=0;\r\n\t\t}\r\n\r\n\t\tLog._logdiv=null\r\n\t\tLog._count=0;\r\n\t\tLog.maxCount=20;\r\n\t\treturn Log;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*<code>Pool</code> 是对象池类，用于对象的存贮、重复使用。\r\n\t*/\r\n\t//class laya.utils.Pool\r\n\tvar Pool=(function(){\r\n\t\tfunction Pool(){};\r\n\t\t__class(Pool,'laya.utils.Pool');\r\n\t\tPool.getPoolBySign=function(sign){\r\n\t\t\treturn Pool._poolDic[sign] || (Pool._poolDic[sign]=[]);\r\n\t\t}\r\n\r\n\t\tPool.clearBySign=function(sign){\r\n\t\t\tif (Pool._poolDic[sign])Pool._poolDic[sign].length=0;\r\n\t\t}\r\n\r\n\t\tPool.recover=function(sign,item){\r\n\t\t\tif (item[\"__InPool\"])return;\r\n\t\t\titem[\"__InPool\"]=true;\r\n\t\t\tPool.getPoolBySign(sign).push(item);\r\n\t\t}\r\n\r\n\t\tPool.getItemByClass=function(sign,cls){\r\n\t\t\tvar pool=Pool.getPoolBySign(sign);\r\n\t\t\tvar rst=pool.length ? pool.pop():new cls();\r\n\t\t\trst[\"__InPool\"]=false;\r\n\t\t\treturn rst;\r\n\t\t}\r\n\r\n\t\tPool.getItemByCreateFun=function(sign,createFun){\r\n\t\t\tvar pool=Pool.getPoolBySign(sign);\r\n\t\t\tvar rst=pool.length ? pool.pop():createFun();\r\n\t\t\trst[\"__InPool\"]=false;\r\n\t\t\treturn rst;\r\n\t\t}\r\n\r\n\t\tPool.getItem=function(sign){\r\n\t\t\tvar pool=Pool.getPoolBySign(sign);\r\n\t\t\tvar rst=pool.length ? pool.pop():null;\r\n\t\t\tif (rst){\r\n\t\t\t\trst[\"__InPool\"]=false;\r\n\t\t\t}\r\n\t\t\treturn rst;\r\n\t\t}\r\n\r\n\t\tPool._poolDic={};\r\n\t\tPool.InPoolSign=\"__InPool\";\r\n\t\treturn Pool;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*<code>Stat</code> 用于显示帧率统计信息。\r\n\t*/\r\n\t//class laya.utils.Stat\r\n\tvar Stat=(function(){\r\n\t\tfunction Stat(){};\r\n\t\t__class(Stat,'laya.utils.Stat');\r\n\t\t/**\r\n\t\t*点击帧频显示区域的处理函数。\r\n\t\t*/\r\n\t\t__getset(1,Stat,'onclick',null,function(fn){\r\n\t\t\tStat._canvas.source.onclick=fn;\r\n\t\t\tStat._canvas.source.style.pointerEvents='';\r\n\t\t});\r\n\r\n\t\tStat.show=function(x,y){\r\n\t\t\t(x===void 0)&& (x=0);\r\n\t\t\t(y===void 0)&& (y=0);\r\n\t\t\tif (Render.isConchApp){\r\n\t\t\t\tconch.showFPS&&conch.showFPS(x,y);\r\n\t\t\t\treturn;\r\n\t\t\t};\r\n\t\t\tvar pixel=Browser.pixelRatio;\r\n\t\t\tStat._width=pixel *120;\r\n\t\t\tStat._vx=pixel *70;\r\n\t\t\tStat._view[0]={title:\"FPS(Canvas)\",value:\"_fpsStr\",color:\"yellow\",units:\"int\"};\r\n\t\t\tStat._view[1]={title:\"Sprite\",value:\"spriteCount\",color:\"white\",units:\"int\"};\r\n\t\t\tStat._view[2]={title:\"DrawCall\",value:\"drawCall\",color:\"white\",units:\"int\"};\r\n\t\t\tStat._view[3]={title:\"CurMem\",value:\"currentMemorySize\",color:\"yellow\",units:\"M\"};\r\n\t\t\tif (Render.isWebGL){\r\n\t\t\t\tStat._view[4]={title:\"Shader\",value:\"shaderCall\",color:\"white\",units:\"int\"};\r\n\t\t\t\tif (!Render.is3DMode){\r\n\t\t\t\t\tStat._view[0].title=\"FPS(WebGL)\";\r\n\t\t\t\t\tStat._view[5]={title:\"Canvas\",value:\"_canvasStr\",color:\"white\",units:\"int\"};\r\n\t\t\t\t\t}else {\r\n\t\t\t\t\tStat._view[0].title=\"FPS(3D)\";\r\n\t\t\t\t\tStat._view[5]={title:\"TriFaces\",value:\"trianglesFaces\",color:\"white\",units:\"int\"};\r\n\t\t\t\t}\r\n\t\t\t\t}else {\r\n\t\t\t\tStat._view[4]={title:\"Canvas\",value:\"_canvasStr\",color:\"white\",units:\"int\"};\r\n\t\t\t}\r\n\t\t\tStat._fontSize=12 *pixel;\r\n\t\t\tfor (var i=0;i < Stat._view.length;i++){\r\n\t\t\t\tStat._view[i].x=4;\r\n\t\t\t\tStat._view[i].y=i *Stat._fontSize+2 *pixel;\r\n\t\t\t}\r\n\t\t\tStat._height=pixel *(Stat._view.length *12+3 *pixel);\r\n\t\t\tif (!Stat._canvas){\r\n\t\t\t\tStat._canvas=new HTMLCanvas('2D');\r\n\t\t\t\tStat._canvas.size(Stat._width,Stat._height);\r\n\t\t\t\tStat._ctx=Stat._canvas.getContext('2d');\r\n\t\t\t\tStat._ctx.textBaseline=\"top\";\r\n\t\t\t\tStat._ctx.font=Stat._fontSize+\"px Sans-serif\";\r\n\t\t\t\tStat._canvas.source.style.cssText=\"pointer-events:none;background:rgba(150,150,150,0.8);z-index:100000;position: absolute;left:\"+x+\"px;top:\"+y+\"px;width:\"+(Stat._width / pixel)+\"px;height:\"+(Stat._height / pixel)+\"px;\";\r\n\t\t\t}\r\n\t\t\tStat._first=true;\r\n\t\t\tStat.loop();\r\n\t\t\tStat._first=false;\r\n\t\t\tBrowser.container.appendChild(Stat._canvas.source);\r\n\t\t\tStat.enable();\r\n\t\t}\r\n\r\n\t\tStat.enable=function(){\r\n\t\t\tLaya.timer.frameLoop(1,Stat,Stat.loop);\r\n\t\t}\r\n\r\n\t\tStat.hide=function(){\r\n\t\t\tBrowser.removeElement(Stat._canvas.source);\r\n\t\t\tLaya.timer.clear(Stat,Stat.loop);\r\n\t\t}\r\n\r\n\t\tStat.clear=function(){\r\n\t\t\tStat.trianglesFaces=Stat.drawCall=Stat.shaderCall=Stat.spriteCount=Stat.canvasNormal=Stat.canvasBitmap=Stat.canvasReCache=0;\r\n\t\t}\r\n\r\n\t\tStat.loop=function(){\r\n\t\t\tStat._count++;\r\n\t\t\tvar timer=Browser.now();\r\n\t\t\tif (timer-Stat._timer < 1000)return;\r\n\t\t\tvar count=Stat._count;\r\n\t\t\tStat.FPS=Math.round((count *1000)/ (timer-Stat._timer));\r\n\t\t\tif (Stat._canvas){\r\n\t\t\t\tStat.trianglesFaces=Math.round(Stat.trianglesFaces / count);\r\n\t\t\t\tStat.drawCall=Math.round(Stat.drawCall / count)-2;\r\n\t\t\t\tStat.shaderCall=Math.round(Stat.shaderCall / count);\r\n\t\t\t\tStat.spriteCount=Math.round(Stat.spriteCount / count)-1;\r\n\t\t\t\tStat.canvasNormal=Math.round(Stat.canvasNormal / count);\r\n\t\t\t\tStat.canvasBitmap=Math.round(Stat.canvasBitmap / count);\r\n\t\t\t\tStat.canvasReCache=Math.ceil(Stat.canvasReCache / count);\r\n\t\t\t\tStat._fpsStr=Stat.FPS+(Stat.renderSlow ? \" slow\" :\"\");\r\n\t\t\t\tStat._canvasStr=Stat.canvasReCache+\"/\"+Stat.canvasNormal+\"/\"+Stat.canvasBitmap;\r\n\t\t\t\tStat.currentMemorySize=ResourceManager.systemResourceManager.memorySize;\r\n\t\t\t\tvar ctx=Stat._ctx;\r\n\t\t\t\tctx.clearRect(Stat._first ? 0 :Stat._vx,0,Stat._width,Stat._height);\r\n\t\t\t\tfor (var i=0;i < Stat._view.length;i++){\r\n\t\t\t\t\tvar one=Stat._view[i];\r\n\t\t\t\t\tif (Stat._first){\r\n\t\t\t\t\t\tctx.fillStyle=\"white\";\r\n\t\t\t\t\t\tctx.fillText(one.title,one.x,one.y,null,null,null);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tctx.fillStyle=one.color;\r\n\t\t\t\t\tvar value=Stat[one.value];\r\n\t\t\t\t\t(one.units==\"M\")&& (value=Math.floor(value / (1024 *1024)*100)/ 100+\" M\");\r\n\t\t\t\t\tctx.fillText(value+\"\",one.x+Stat._vx,one.y,null,null,null);\r\n\t\t\t\t}\r\n\t\t\t\tStat.clear();\r\n\t\t\t}\r\n\t\t\tStat._count=0;\r\n\t\t\tStat._timer=timer;\r\n\t\t}\r\n\r\n\t\tStat.loopCount=0;\r\n\t\tStat.shaderCall=0;\r\n\t\tStat.drawCall=0;\r\n\t\tStat.trianglesFaces=0;\r\n\t\tStat.spriteCount=0;\r\n\t\tStat.FPS=0;\r\n\t\tStat.canvasNormal=0;\r\n\t\tStat.canvasBitmap=0;\r\n\t\tStat.canvasReCache=0;\r\n\t\tStat.renderSlow=false;\r\n\t\tStat.currentMemorySize=0;\r\n\t\tStat._fpsStr=null\r\n\t\tStat._canvasStr=null\r\n\t\tStat._canvas=null\r\n\t\tStat._ctx=null\r\n\t\tStat._timer=0;\r\n\t\tStat._count=0;\r\n\t\tStat._width=120;\r\n\t\tStat._height=100;\r\n\t\tStat._view=[];\r\n\t\tStat._fontSize=12;\r\n\t\tStat._first=false;\r\n\t\tStat._vx=NaN\r\n\t\treturn Stat;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*<code>StringKey</code> 类用于存取字符串对应的数字。\r\n\t*/\r\n\t//class laya.utils.StringKey\r\n\tvar StringKey=(function(){\r\n\t\tfunction StringKey(){\r\n\t\t\tthis._strs={};\r\n\t\t\tthis._length=0;\r\n\t\t}\r\n\r\n\t\t__class(StringKey,'laya.utils.StringKey');\r\n\t\tvar __proto=StringKey.prototype;\r\n\t\t/**\r\n\t\t*添加一个字符。\r\n\t\t*@param str 字符，将作为key 存储相应生成的数字。\r\n\t\t*@return 此字符对应的数字。\r\n\t\t*/\r\n\t\t__proto.add=function(str){\r\n\t\t\tvar index=this._strs[str];\r\n\t\t\tif (index !=null)return index;\r\n\t\t\treturn this._strs[str]=this._length++;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*获取指定字符对应的数字。\r\n\t\t*@param str key 字符。\r\n\t\t*@return 此字符对应的数字。\r\n\t\t*/\r\n\t\t__proto.get=function(str){\r\n\t\t\tvar index=this._strs[str];\r\n\t\t\treturn index==null ?-1 :index;\r\n\t\t}\r\n\r\n\t\treturn StringKey;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*<code>Timer</code> 是时钟管理类。它是一个单例，可以通过 Laya.timer 访问。\r\n\t*/\r\n\t//class laya.utils.Timer\r\n\tvar Timer=(function(){\r\n\t\tvar TimerHandler;\r\n\t\tfunction Timer(){\r\n\t\t\tthis._delta=0;\r\n\t\t\tthis.scale=1;\r\n\t\t\tthis.currFrame=0;\r\n\t\t\tthis._mid=1;\r\n\t\t\tthis._map=[];\r\n\t\t\tthis._laters=[];\r\n\t\t\tthis._handlers=[];\r\n\t\t\tthis._temp=[];\r\n\t\t\tthis._count=0;\r\n\t\t\tthis.currTimer=Browser.now();\r\n\t\t\tthis._lastTimer=Browser.now();\r\n\t\t\tLaya.timer && Laya.timer.frameLoop(1,this,this._update);\r\n\t\t}\r\n\r\n\t\t__class(Timer,'laya.utils.Timer');\r\n\t\tvar __proto=Timer.prototype;\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*帧循环处理函数。\r\n\t\t*/\r\n\t\t__proto._update=function(){\r\n\t\t\tif (this.scale <=0){\r\n\t\t\t\tthis._lastTimer=Browser.now();\r\n\t\t\t\treturn;\r\n\t\t\t};\r\n\t\t\tvar frame=this.currFrame=this.currFrame+this.scale;\r\n\t\t\tvar now=Browser.now();\r\n\t\t\tthis._delta=(now-this._lastTimer)*this.scale;\r\n\t\t\tvar timer=this.currTimer=this.currTimer+this._delta;\r\n\t\t\tthis._lastTimer=now;\r\n\t\t\tvar handlers=this._handlers;\r\n\t\t\tthis._count=0;\r\n\t\t\tfor (i=0,n=handlers.length;i < n;i++){\r\n\t\t\t\thandler=handlers[i];\r\n\t\t\t\tif (handler.method!==null){\r\n\t\t\t\t\tvar t=handler.userFrame ? frame :timer;\r\n\t\t\t\t\tif (t >=handler.exeTime){\r\n\t\t\t\t\t\tif (handler.repeat){\r\n\t\t\t\t\t\t\tif (t > handler.exeTime){\r\n\t\t\t\t\t\t\t\thandler.exeTime+=handler.delay;\r\n\t\t\t\t\t\t\t\thandler.run(false);\r\n\t\t\t\t\t\t\t\tif (t > handler.exeTime){\r\n\t\t\t\t\t\t\t\t\thandler.exeTime+=Math.ceil((t-handler.exeTime)/ handler.delay)*handler.delay;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}else {\r\n\t\t\t\t\t\t\thandler.run(true);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t}else {\r\n\t\t\t\t\tthis._count++;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (this._count > 30 || frame % 200===0)this._clearHandlers();\r\n\t\t\tvar laters=this._laters;\r\n\t\t\tfor (var i=0,n=laters.length-1;i <=n;i++){\r\n\t\t\t\tvar handler=laters[i];\r\n\t\t\t\thandler.method!==null && handler.run(false);\r\n\t\t\t\tthis._recoverHandler(handler);\r\n\t\t\t\ti===n && (n=laters.length-1);\r\n\t\t\t}\r\n\t\t\tlaters.length=0;\r\n\t\t}\r\n\r\n\t\t/**@private */\r\n\t\t__proto._clearHandlers=function(){\r\n\t\t\tvar handlers=this._handlers;\r\n\t\t\tfor (var i=0,n=handlers.length;i < n;i++){\r\n\t\t\t\tvar handler=handlers[i];\r\n\t\t\t\tif (handler.method!==null)this._temp.push(handler);\r\n\t\t\t\telse this._recoverHandler(handler);\r\n\t\t\t}\r\n\t\t\tthis._handlers=this._temp;\r\n\t\t\tthis._temp=handlers;\r\n\t\t\tthis._temp.length=0;\r\n\t\t}\r\n\r\n\t\t/**@private */\r\n\t\t__proto._recoverHandler=function(handler){\r\n\t\t\tthis._map[handler.key]=null;\r\n\t\t\thandler.clear();\r\n\t\t\tTimer._pool.push(handler);\r\n\t\t}\r\n\r\n\t\t/**@private */\r\n\t\t__proto._create=function(useFrame,repeat,delay,caller,method,args,coverBefore){\r\n\t\t\tif (!delay){\r\n\t\t\t\tmethod.apply(caller,args);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (coverBefore){\r\n\t\t\t\tvar handler=this._getHandler(caller,method);\r\n\t\t\t\tif (handler){\r\n\t\t\t\t\thandler.repeat=repeat;\r\n\t\t\t\t\thandler.userFrame=useFrame;\r\n\t\t\t\t\thandler.delay=delay;\r\n\t\t\t\t\thandler.caller=caller;\r\n\t\t\t\t\thandler.method=method;\r\n\t\t\t\t\thandler.args=args;\r\n\t\t\t\t\thandler.exeTime=delay+(useFrame ? this.currFrame :this.currTimer);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\thandler=Timer._pool.length > 0 ? Timer._pool.pop():new TimerHandler();\r\n\t\t\thandler.repeat=repeat;\r\n\t\t\thandler.userFrame=useFrame;\r\n\t\t\thandler.delay=delay;\r\n\t\t\thandler.caller=caller;\r\n\t\t\thandler.method=method;\r\n\t\t\thandler.args=args;\r\n\t\t\thandler.exeTime=delay+(useFrame ? this.currFrame :this.currTimer);\r\n\t\t\tthis._indexHandler(handler);\r\n\t\t\tthis._handlers.push(handler);\r\n\t\t}\r\n\r\n\t\t/**@private */\r\n\t\t__proto._indexHandler=function(handler){\r\n\t\t\tvar caller=handler.caller;\r\n\t\t\tvar method=handler.method;\r\n\t\t\tvar cid=caller ? caller.$_GID || (caller.$_GID=Utils1.getGID()):0;\r\n\t\t\tvar mid=method.$_TID || (method.$_TID=(this._mid++)*100000);\r\n\t\t\thandler.key=cid+mid;\r\n\t\t\tthis._map[handler.key]=handler;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*定时执行一次。\r\n\t\t*@param delay 延迟时间(单位为毫秒)。\r\n\t\t*@param caller 执行域(this)。\r\n\t\t*@param method 定时器回调函数。\r\n\t\t*@param args 回调参数。\r\n\t\t*@param coverBefore 是否覆盖之前的延迟执行，默认为 true 。\r\n\t\t*/\r\n\t\t__proto.once=function(delay,caller,method,args,coverBefore){\r\n\t\t\t(coverBefore===void 0)&& (coverBefore=true);\r\n\t\t\tthis._create(false,false,delay,caller,method,args,coverBefore);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*定时重复执行。\r\n\t\t*@param delay 间隔时间(单位毫秒)。\r\n\t\t*@param caller 执行域(this)。\r\n\t\t*@param method 定时器回调函数。\r\n\t\t*@param args 回调参数。\r\n\t\t*@param coverBefore 是否覆盖之前的延迟执行，默认为 true 。\r\n\t\t*/\r\n\t\t__proto.loop=function(delay,caller,method,args,coverBefore){\r\n\t\t\t(coverBefore===void 0)&& (coverBefore=true);\r\n\t\t\tthis._create(false,true,delay,caller,method,args,coverBefore);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*定时执行一次(基于帧率)。\r\n\t\t*@param delay 延迟几帧(单位为帧)。\r\n\t\t*@param caller 执行域(this)。\r\n\t\t*@param method 定时器回调函数。\r\n\t\t*@param args 回调参数。\r\n\t\t*@param coverBefore 是否覆盖之前的延迟执行，默认为 true 。\r\n\t\t*/\r\n\t\t__proto.frameOnce=function(delay,caller,method,args,coverBefore){\r\n\t\t\t(coverBefore===void 0)&& (coverBefore=true);\r\n\t\t\tthis._create(true,false,delay,caller,method,args,coverBefore);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*定时重复执行(基于帧率)。\r\n\t\t*@param delay 间隔几帧(单位为帧)。\r\n\t\t*@param caller 执行域(this)。\r\n\t\t*@param method 定时器回调函数。\r\n\t\t*@param args 回调参数。\r\n\t\t*@param coverBefore 是否覆盖之前的延迟执行，默认为 true 。\r\n\t\t*/\r\n\t\t__proto.frameLoop=function(delay,caller,method,args,coverBefore){\r\n\t\t\t(coverBefore===void 0)&& (coverBefore=true);\r\n\t\t\tthis._create(true,true,delay,caller,method,args,coverBefore);\r\n\t\t}\r\n\r\n\t\t/**返回统计信息。*/\r\n\t\t__proto.toString=function(){\r\n\t\t\treturn \"callLater:\"+this._laters.length+\" handlers:\"+this._handlers.length+\" pool:\"+Timer._pool.length;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*清理定时器。\r\n\t\t*@param caller 执行域(this)。\r\n\t\t*@param method 定时器回调函数。\r\n\t\t*/\r\n\t\t__proto.clear=function(caller,method){\r\n\t\t\tvar handler=this._getHandler(caller,method);\r\n\t\t\tif (handler){\r\n\t\t\t\tthis._map[handler.key]=null;handler.key=0;\r\n\t\t\t\thandler.clear();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*清理对象身上的所有定时器。\r\n\t\t*@param caller 执行域(this)。\r\n\t\t*/\r\n\t\t__proto.clearAll=function(caller){\r\n\t\t\tif (!caller)return;\r\n\t\t\tfor (var i=0,n=this._handlers.length;i < n;i++){\r\n\t\t\t\tvar handler=this._handlers[i];\r\n\t\t\t\tif (handler.caller===caller){\r\n\t\t\t\t\tthis._map[handler.key]=null;handler.key=0;\r\n\t\t\t\t\thandler.clear();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**@private */\r\n\t\t__proto._getHandler=function(caller,method){\r\n\t\t\tvar cid=caller ? caller.$_GID || (caller.$_GID=Utils1.getGID()):0;\r\n\t\t\tvar mid=method.$_TID || (method.$_TID=(this._mid++)*100000);\r\n\t\t\treturn this._map[cid+mid];\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*延迟执行。\r\n\t\t*@param caller 执行域(this)。\r\n\t\t*@param method 定时器回调函数。\r\n\t\t*@param args 回调参数。\r\n\t\t*/\r\n\t\t__proto.callLater=function(caller,method,args){\r\n\t\t\tif (this._getHandler(caller,method)==null){\r\n\t\t\t\tif (Timer._pool.length)\r\n\t\t\t\t\tvar handler=Timer._pool.pop();\r\n\t\t\t\telse handler=new TimerHandler();\r\n\t\t\t\thandler.caller=caller;\r\n\t\t\t\thandler.method=method;\r\n\t\t\t\thandler.args=args;\r\n\t\t\t\tthis._indexHandler(handler);\r\n\t\t\t\tthis._laters.push(handler);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*立即执行 callLater 。\r\n\t\t*@param caller 执行域(this)。\r\n\t\t*@param method 定时器回调函数。\r\n\t\t*/\r\n\t\t__proto.runCallLater=function(caller,method){\r\n\t\t\tvar handler=this._getHandler(caller,method);\r\n\t\t\tif (handler && handler.method !=null){\r\n\t\t\t\tthis._map[handler.key]=null;\r\n\t\t\t\thandler.run(true);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*两帧之间的时间间隔,单位毫秒。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'delta',function(){\r\n\t\t\treturn this._delta;\r\n\t\t});\r\n\r\n\t\tTimer._pool=[];\r\n\t\tTimer.__init$=function(){\r\n\t\t\t/**@private */\r\n\t\t\t//class TimerHandler\r\n\t\t\tTimerHandler=(function(){\r\n\t\t\t\tfunction TimerHandler(){\r\n\t\t\t\t\tthis.key=0;\r\n\t\t\t\t\tthis.repeat=false;\r\n\t\t\t\t\tthis.delay=0;\r\n\t\t\t\t\tthis.userFrame=false;\r\n\t\t\t\t\tthis.exeTime=0;\r\n\t\t\t\t\tthis.caller=null;\r\n\t\t\t\t\tthis.method=null;\r\n\t\t\t\t\tthis.args=null;\r\n\t\t\t\t}\r\n\t\t\t\t__class(TimerHandler,'');\r\n\t\t\t\tvar __proto=TimerHandler.prototype;\r\n\t\t\t\t__proto.clear=function(){\r\n\t\t\t\t\tthis.caller=null;\r\n\t\t\t\t\tthis.method=null;\r\n\t\t\t\t\tthis.args=null;\r\n\t\t\t\t}\r\n\t\t\t\t__proto.run=function(widthClear){\r\n\t\t\t\t\tvar caller=this.caller;\r\n\t\t\t\t\tif (caller && caller.destroyed)return this.clear();\r\n\t\t\t\t\tvar method=this.method;\r\n\t\t\t\t\tvar args=this.args;\r\n\t\t\t\t\twidthClear && this.clear();\r\n\t\t\t\t\tif (method==null)return;\r\n\t\t\t\t\targs ? method.apply(caller,args):method.call(caller);\r\n\t\t\t\t}\r\n\t\t\t\treturn TimerHandler;\r\n\t\t\t})()\r\n\t\t}\r\n\r\n\t\treturn Timer;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*<code>Tween</code> 是一个缓动类。使用实现目标对象属性的渐变。\r\n\t*/\r\n\t//class laya.utils.Tween\r\n\tvar Tween=(function(){\r\n\t\tfunction Tween(){\r\n\t\t\t//this._complete=null;\r\n\t\t\t//this._target=null;\r\n\t\t\t//this._ease=null;\r\n\t\t\t//this._props=null;\r\n\t\t\t//this._duration=0;\r\n\t\t\t//this._delay=0;\r\n\t\t\t//this._startTimer=0;\r\n\t\t\t//this._usedTimer=0;\r\n\t\t\t//this._usedPool=false;\r\n\t\t\tthis.gid=0;\r\n\t\t\t//this.update=null;\r\n\t\t}\r\n\r\n\t\t__class(Tween,'laya.utils.Tween');\r\n\t\tvar __proto=Tween.prototype;\r\n\t\t/**\r\n\t\t*缓动对象的props属性到目标值。\r\n\t\t*@param target 目标对象(即将更改属性值的对象)。\r\n\t\t*@param props 变化的属性列表，比如{x:100,y:20,ease:Ease.backOut,complete:Handler.create(this,onComplete),update:new Handler(this,onComplete)}。\r\n\t\t*@param duration 花费的时间，单位毫秒。\r\n\t\t*@param ease 缓动类型，默认为匀速运动。\r\n\t\t*@param complete 结束回调函数。\r\n\t\t*@param delay 延迟执行时间。\r\n\t\t*@param coverBefore 是否覆盖之前的缓动。\r\n\t\t*@return 返回Tween对象。\r\n\t\t*/\r\n\t\t__proto.to=function(target,props,duration,ease,complete,delay,coverBefore){\r\n\t\t\t(delay===void 0)&& (delay=0);\r\n\t\t\t(coverBefore===void 0)&& (coverBefore=false);\r\n\t\t\treturn this._create(target,props,duration,ease,complete,delay,coverBefore,true,false,true);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*从props属性，缓动到当前状态。\r\n\t\t*@param target 目标对象(即将更改属性值的对象)。\r\n\t\t*@param props 变化的属性列表，比如{x:100,y:20,ease:Ease.backOut,complete:Handler.create(this,onComplete),update:new Handler(this,onComplete)}。\r\n\t\t*@param duration 花费的时间，单位毫秒。\r\n\t\t*@param ease 缓动类型，默认为匀速运动。\r\n\t\t*@param complete 结束回调函数。\r\n\t\t*@param delay 延迟执行时间。\r\n\t\t*@param coverBefore 是否覆盖之前的缓动。\r\n\t\t*@return 返回Tween对象。\r\n\t\t*/\r\n\t\t__proto.from=function(target,props,duration,ease,complete,delay,coverBefore){\r\n\t\t\t(delay===void 0)&& (delay=0);\r\n\t\t\t(coverBefore===void 0)&& (coverBefore=false);\r\n\t\t\treturn this._create(target,props,duration,ease,complete,delay,coverBefore,false,false,true);\r\n\t\t}\r\n\r\n\t\t/**@private */\r\n\t\t__proto._create=function(target,props,duration,ease,complete,delay,coverBefore,isTo,usePool,runNow){\r\n\t\t\tif (!target)throw new Error(\"Tween:target is null\");\r\n\t\t\tthis._target=target;\r\n\t\t\tthis._duration=duration;\r\n\t\t\tthis._ease=ease || props.ease || Tween.easeNone;\r\n\t\t\tthis._complete=complete || props.complete;\r\n\t\t\tthis._delay=delay;\r\n\t\t\tthis._props=[];\r\n\t\t\tthis._usedTimer=0;\r\n\t\t\tthis._startTimer=Browser.now();\r\n\t\t\tthis._usedPool=usePool;\r\n\t\t\tthis.update=props.update;\r\n\t\t\tvar gid=(target.$_GID || (target.$_GID=Utils1.getGID()));\r\n\t\t\tif (!Tween.tweenMap[gid]){\r\n\t\t\t\tTween.tweenMap[gid]=[this];\r\n\t\t\t\t}else {\r\n\t\t\t\tif (coverBefore)Tween.clearTween(target);\r\n\t\t\t\tTween.tweenMap[gid].push(this);\r\n\t\t\t}\r\n\t\t\tif (runNow){\r\n\t\t\t\tif (delay <=0)this.firstStart(target,props,isTo);\r\n\t\t\t\telse Laya.timer.once(delay,this,this.firstStart,[target,props,isTo]);\r\n\t\t\t\t}else {\r\n\t\t\t\tthis._initProps(target,props,isTo);\r\n\t\t\t}\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\t\t__proto.firstStart=function(target,props,isTo){\r\n\t\t\tthis._initProps(target,props,isTo);\r\n\t\t\tthis._beginLoop();\r\n\t\t}\r\n\r\n\t\t__proto._initProps=function(target,props,isTo){\r\n\t\t\tfor (var p in props){\r\n\t\t\t\tif ((typeof (target[p])=='number')){\r\n\t\t\t\t\tvar start=isTo ? target[p] :props[p];\r\n\t\t\t\t\tvar end=isTo ? props[p] :target[p];\r\n\t\t\t\t\tthis._props.push([p,start,end-start]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__proto._beginLoop=function(){\r\n\t\t\tLaya.timer.frameLoop(1,this,this._doEase);\r\n\t\t}\r\n\r\n\t\t/**执行缓动**/\r\n\t\t__proto._doEase=function(){\r\n\t\t\tthis._updateEase(Browser.now());\r\n\t\t}\r\n\r\n\t\t/**@private */\r\n\t\t__proto._updateEase=function(time){\r\n\t\t\tvar target=this._target;\r\n\t\t\tif (target.destroyed)return Tween.clearTween(target);\r\n\t\t\tvar usedTimer=this._usedTimer=time-this._startTimer-this._delay;\r\n\t\t\tif (usedTimer < 0)return;\r\n\t\t\tif (usedTimer >=this._duration)return this.complete();\r\n\t\t\tvar ratio=usedTimer > 0 ? this._ease(usedTimer,0,1,this._duration):0;\r\n\t\t\tvar props=this._props;\r\n\t\t\tfor (var i=0,n=props.length;i < n;i++){\r\n\t\t\t\tvar prop=props[i];\r\n\t\t\t\ttarget[prop[0]]=prop[1]+(ratio *prop[2]);\r\n\t\t\t}\r\n\t\t\tif (this.update)this.update.run();\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*立即结束缓动并到终点。\r\n\t\t*/\r\n\t\t__proto.complete=function(){\r\n\t\t\tif (!this._target)return;\r\n\t\t\tvar target=this._target;\r\n\t\t\tvar props=this._props;\r\n\t\t\tvar handler=this._complete;\r\n\t\t\tfor (var i=0,n=props.length;i < n;i++){\r\n\t\t\t\tvar prop=props[i];\r\n\t\t\t\ttarget[prop[0]]=prop[1]+prop[2];\r\n\t\t\t}\r\n\t\t\tif (this.update)this.update.run();\r\n\t\t\tthis.clear();\r\n\t\t\thandler && handler.run();\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*暂停缓动，可以通过resume或restart重新开始。\r\n\t\t*/\r\n\t\t__proto.pause=function(){\r\n\t\t\tLaya.timer.clear(this,this._beginLoop);\r\n\t\t\tLaya.timer.clear(this,this._doEase);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*设置开始时间。\r\n\t\t*@param startTime 开始时间。\r\n\t\t*/\r\n\t\t__proto.setStartTime=function(startTime){\r\n\t\t\tthis._startTimer=startTime;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*停止并清理当前缓动。\r\n\t\t*/\r\n\t\t__proto.clear=function(){\r\n\t\t\tif (this._target){\r\n\t\t\t\tthis._remove();\r\n\t\t\t\tthis._clear();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*/\r\n\t\t__proto._clear=function(){\r\n\t\t\tthis.pause();\r\n\t\t\tLaya.timer.clear(this,this.firstStart);\r\n\t\t\tthis._complete=null;\r\n\t\t\tthis._target=null;\r\n\t\t\tthis._ease=null;\r\n\t\t\tthis._props=null;\r\n\t\t\tif (this._usedPool){\r\n\t\t\t\tthis.update=null;\r\n\t\t\t\tPool.recover(\"tween\",this);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**回收到对象池。*/\r\n\t\t__proto.recover=function(){\r\n\t\t\tthis._usedPool=true;\r\n\t\t\tthis._clear();\r\n\t\t}\r\n\r\n\t\t__proto._remove=function(){\r\n\t\t\tvar tweens=Tween.tweenMap[this._target.$_GID];\r\n\t\t\tif (tweens){\r\n\t\t\t\tfor (var i=0,n=tweens.length;i < n;i++){\r\n\t\t\t\t\tif (tweens[i]===this){\r\n\t\t\t\t\t\ttweens.splice(i,1);\r\n\t\t\t\t\t\tbreak ;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*重新开始暂停的缓动。\r\n\t\t*/\r\n\t\t__proto.restart=function(){\r\n\t\t\tthis.pause();\r\n\t\t\tthis._usedTimer=0;\r\n\t\t\tthis._startTimer=Browser.now();\r\n\t\t\tvar props=this._props;\r\n\t\t\tfor (var i=0,n=props.length;i < n;i++){\r\n\t\t\t\tvar prop=props[i];\r\n\t\t\t\tthis._target[prop[0]]=prop[1];\r\n\t\t\t}\r\n\t\t\tLaya.timer.once(this._delay,this,this._beginLoop);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*恢复暂停的缓动。\r\n\t\t*/\r\n\t\t__proto.resume=function(){\r\n\t\t\tif (this._usedTimer >=this._duration)return;\r\n\t\t\tthis._startTimer=Browser.now()-this._usedTimer-this._delay;\r\n\t\t\tthis._beginLoop();\r\n\t\t}\r\n\r\n\t\t/**设置当前执行比例**/\r\n\t\t__getset(0,__proto,'progress',null,function(v){\r\n\t\t\tvar uTime=v *this._duration;\r\n\t\t\tthis._startTimer=Browser.now()-this._delay-uTime;\r\n\t\t});\r\n\r\n\t\tTween.to=function(target,props,duration,ease,complete,delay,coverBefore,autoRecover){\r\n\t\t\t(delay===void 0)&& (delay=0);\r\n\t\t\t(coverBefore===void 0)&& (coverBefore=false);\r\n\t\t\t(autoRecover===void 0)&& (autoRecover=true);\r\n\t\t\treturn Pool.getItemByClass(\"tween\",Tween)._create(target,props,duration,ease,complete,delay,coverBefore,true,autoRecover,true);\r\n\t\t}\r\n\r\n\t\tTween.from=function(target,props,duration,ease,complete,delay,coverBefore,autoRecover){\r\n\t\t\t(delay===void 0)&& (delay=0);\r\n\t\t\t(coverBefore===void 0)&& (coverBefore=false);\r\n\t\t\t(autoRecover===void 0)&& (autoRecover=true);\r\n\t\t\treturn Pool.getItemByClass(\"tween\",Tween)._create(target,props,duration,ease,complete,delay,coverBefore,false,autoRecover,true);\r\n\t\t}\r\n\r\n\t\tTween.clearAll=function(target){\r\n\t\t\tif (!target || !target.$_GID)return;\r\n\t\t\tvar tweens=Tween.tweenMap[target.$_GID];\r\n\t\t\tif (tweens){\r\n\t\t\t\tfor (var i=0,n=tweens.length;i < n;i++){\r\n\t\t\t\t\ttweens[i]._clear();\r\n\t\t\t\t}\r\n\t\t\t\ttweens.length=0;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tTween.clear=function(tween){\r\n\t\t\ttween.clear();\r\n\t\t}\r\n\r\n\t\tTween.clearTween=function(target){\r\n\t\t\tTween.clearAll(target);\r\n\t\t}\r\n\r\n\t\tTween.easeNone=function(t,b,c,d){\r\n\t\t\treturn c *t / d+b;\r\n\t\t}\r\n\r\n\t\tTween.tweenMap={};\r\n\t\treturn Tween;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*<code>Utils</code> 是工具类。\r\n\t*/\r\n\t//class laya.utils.Utils\r\n\tvar Utils1=(function(){\r\n\t\tfunction Utils(){};\r\n\t\t__class(Utils,'laya.utils.Utils',null,'Utils1');\r\n\t\tUtils.toRadian=function(angle){\r\n\t\t\treturn angle *Utils._pi2;\r\n\t\t}\r\n\r\n\t\tUtils.toAngle=function(radian){\r\n\t\t\treturn radian *Utils._pi;\r\n\t\t}\r\n\r\n\t\tUtils.toHexColor=function(color){\r\n\t\t\tif (color < 0 || isNaN(color))return null;\r\n\t\t\tvar str=color.toString(16);\r\n\t\t\twhile (str.length < 6)str=\"0\"+str;\r\n\t\t\treturn \"#\"+str;\r\n\t\t}\r\n\r\n\t\tUtils.getGID=function(){\r\n\t\t\treturn Utils._gid++;\r\n\t\t}\r\n\r\n\t\tUtils.concatArray=function(source,array){\r\n\t\t\tif (!array)return source;\r\n\t\t\tif (!source)return array;\r\n\t\t\tvar i=0,len=array.length;\r\n\t\t\tfor (i=0;i < len;i++){\r\n\t\t\t\tsource.push(array[i]);\r\n\t\t\t}\r\n\t\t\treturn source;\r\n\t\t}\r\n\r\n\t\tUtils.clearArray=function(array){\r\n\t\t\tif (!array)return array;\r\n\t\t\tarray.length=0;\r\n\t\t\treturn array;\r\n\t\t}\r\n\r\n\t\tUtils.copyArray=function(source,array){\r\n\t\t\tsource || (source=[]);\r\n\t\t\tif (!array)return source;\r\n\t\t\tsource.length=array.length;\r\n\t\t\tvar i=0,len=array.length;\r\n\t\t\tfor (i=0;i < len;i++){\r\n\t\t\t\tsource[i]=array[i];\r\n\t\t\t}\r\n\t\t\treturn source;\r\n\t\t}\r\n\r\n\t\tUtils.getGlobalRecByPoints=function(sprite,x0,y0,x1,y1){\r\n\t\t\tvar newLTPoint;\r\n\t\t\tnewLTPoint=new Point(x0,y0);\r\n\t\t\tnewLTPoint=sprite.localToGlobal(newLTPoint);\r\n\t\t\tvar newRBPoint;\r\n\t\t\tnewRBPoint=new Point(x1,y1);\r\n\t\t\tnewRBPoint=sprite.localToGlobal(newRBPoint);\r\n\t\t\treturn Rectangle._getWrapRec([newLTPoint.x,newLTPoint.y,newRBPoint.x,newRBPoint.y]);\r\n\t\t}\r\n\r\n\t\tUtils.getGlobalPosAndScale=function(sprite){\r\n\t\t\treturn Utils.getGlobalRecByPoints(sprite,0,0,1,1);\r\n\t\t}\r\n\r\n\t\tUtils.bind=function(fun,scope){\r\n\t\t\tvar rst=fun;\r\n\t\t\trst=fun.bind(scope);;\r\n\t\t\treturn rst;\r\n\t\t}\r\n\r\n\t\tUtils.measureText=function(txt,font){\r\n\t\t\treturn RunDriver.measureText(txt,font);\r\n\t\t}\r\n\r\n\t\tUtils.updateOrder=function(array){\r\n\t\t\tif (!array || array.length < 2)return false;\r\n\t\t\tvar i=1,j=0,len=array.length,key=NaN,c;\r\n\t\t\twhile (i < len){\r\n\t\t\t\tj=i;\r\n\t\t\t\tc=array[j];\r\n\t\t\t\tkey=array[j]._zOrder;\r\n\t\t\t\twhile (--j >-1){\r\n\t\t\t\t\tif (array[j]._zOrder > key)array[j+1]=array[j];\r\n\t\t\t\t\telse break ;\r\n\t\t\t\t}\r\n\t\t\t\tarray[j+1]=c;\r\n\t\t\t\ti++;\r\n\t\t\t};\r\n\t\t\tvar model=c.parent.conchModel;\r\n\t\t\tif (model){\r\n\t\t\t\tif (model.updateZOrder !=null){\r\n\t\t\t\t\tmodel.updateZOrder();\r\n\t\t\t\t}\r\n\t\t\t\telse{\r\n\t\t\t\t\tfor (i=0;i < len;i++){\r\n\t\t\t\t\t\tmodel.removeChild(array[i].conchModel);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfor (i=0;i < len;i++){\r\n\t\t\t\t\t\tmodel.addChildAt(array[i].conchModel,i);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\tUtils.transPointList=function(points,x,y){\r\n\t\t\tvar i=0,len=points.length;\r\n\t\t\tfor (i=0;i < len;i+=2){\r\n\t\t\t\tpoints[i]+=x;\r\n\t\t\t\tpoints[i+1]+=y;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tUtils.parseInt=function(str,radix){\r\n\t\t\t(radix===void 0)&& (radix=0);\r\n\t\t\tvar result=Browser.window.parseInt(str,radix);\r\n\t\t\tif (isNaN(result))return 0;\r\n\t\t\treturn result;\r\n\t\t}\r\n\r\n\t\tUtils.getFileExtension=function(path){\r\n\t\t\tUtils._extReg.lastIndex=path.lastIndexOf(\".\");\r\n\t\t\tvar result=Utils._extReg.exec(path);\r\n\t\t\tif (result && result.length > 1){\r\n\t\t\t\treturn result[1].toLowerCase();\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\tUtils._gid=1;\r\n\t\tUtils._pi=180 / Math.PI;\r\n\t\tUtils._pi2=Math.PI / 180;\r\n\t\tUtils._extReg=/\\.(\\w+)\\??/g;\r\n\t\tUtils.parseXMLFromString=function(value){\r\n\t\t\tvar rst;\r\n\t\t\tvalue=value.replace(/>\\s+</g,'><');\r\n\t\t\trst=(new DOMParser()).parseFromString(value,'text/xml');\r\n\t\t\tif (rst.firstChild.textContent.indexOf(\"This page contains the following errors\")>-1){\r\n\t\t\t\tthrow new Error(rst.firstChild.firstChild.textContent);\r\n\t\t\t}\r\n\t\t\treturn rst;\r\n\t\t}\r\n\r\n\t\treturn Utils;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*@private\r\n\t*/\r\n\t//class laya.utils.VectorGraphManager\r\n\tvar VectorGraphManager=(function(){\r\n\t\tfunction VectorGraphManager(){\r\n\t\t\tthis.useDic={};\r\n\t\t\tthis.shapeDic={};\r\n\t\t\tthis.shapeLineDic={};\r\n\t\t\tthis._id=0;\r\n\t\t\tthis._checkKey=false;\r\n\t\t\tthis._freeIdArray=[];\r\n\t\t\tif (Render.isWebGL){\r\n\t\t\t\tCacheManger.regCacheByFunction(Utils1.bind(this.startDispose,this),Utils1.bind(this.getCacheList,this));\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__class(VectorGraphManager,'laya.utils.VectorGraphManager');\r\n\t\tvar __proto=VectorGraphManager.prototype;\r\n\t\t/**\r\n\t\t*得到个空闲的ID\r\n\t\t*@return\r\n\t\t*/\r\n\t\t__proto.getId=function(){\r\n\t\t\treturn this._id++;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*添加一个图形到列表中\r\n\t\t*@param id\r\n\t\t*@param shape\r\n\t\t*/\r\n\t\t__proto.addShape=function(id,shape){\r\n\t\t\tthis.shapeDic[id]=shape;\r\n\t\t\tif (!this.useDic[id]){\r\n\t\t\t\tthis.useDic[id]=true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*添加一个线图形到列表中\r\n\t\t*@param id\r\n\t\t*@param Line\r\n\t\t*/\r\n\t\t__proto.addLine=function(id,Line){\r\n\t\t\tthis.shapeLineDic[id]=Line;\r\n\t\t\tif (!this.shapeLineDic[id]){\r\n\t\t\t\tthis.shapeLineDic[id]=true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*检测一个对象是否在使用中\r\n\t\t*@param id\r\n\t\t*/\r\n\t\t__proto.getShape=function(id){\r\n\t\t\tif (this._checkKey){\r\n\t\t\t\tif (this.useDic[id] !=null){\r\n\t\t\t\t\tthis.useDic[id]=true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*删除一个图形对象\r\n\t\t*@param id\r\n\t\t*/\r\n\t\t__proto.deleteShape=function(id){\r\n\t\t\tif (this.shapeDic[id]){\r\n\t\t\t\tthis.shapeDic[id]=null;\r\n\t\t\t\tdelete this.shapeDic[id];\r\n\t\t\t}\r\n\t\t\tif (this.shapeLineDic[id]){\r\n\t\t\t\tthis.shapeLineDic[id]=null;\r\n\t\t\t\tdelete this.shapeLineDic[id];\r\n\t\t\t}\r\n\t\t\tif (this.useDic[id] !=null){\r\n\t\t\t\tdelete this.useDic[id];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*得到缓存列表\r\n\t\t*@return\r\n\t\t*/\r\n\t\t__proto.getCacheList=function(){\r\n\t\t\tvar str;\r\n\t\t\tvar list=[];\r\n\t\t\tfor (str in this.shapeDic){\r\n\t\t\t\tlist.push(this.shapeDic[str]);\r\n\t\t\t}\r\n\t\t\tfor (str in this.shapeLineDic){\r\n\t\t\t\tlist.push(this.shapeLineDic[str]);\r\n\t\t\t}\r\n\t\t\treturn list;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*开始清理状态，准备销毁\r\n\t\t*/\r\n\t\t__proto.startDispose=function(key){\r\n\t\t\tvar str;\r\n\t\t\tfor (str in this.useDic){\r\n\t\t\t\tthis.useDic[str]=false;\r\n\t\t\t}\r\n\t\t\tthis._checkKey=true;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*确认销毁\r\n\t\t*/\r\n\t\t__proto.endDispose=function(){\r\n\t\t\tif (this._checkKey){\r\n\t\t\t\tvar str;\r\n\t\t\t\tfor (str in this.useDic){\r\n\t\t\t\t\tif (!this.useDic[str]){\r\n\t\t\t\t\t\tthis.deleteShape(str);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis._checkKey=false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tVectorGraphManager.getInstance=function(){\r\n\t\t\treturn VectorGraphManager.instance=VectorGraphManager.instance|| new VectorGraphManager();\r\n\t\t}\r\n\r\n\t\tVectorGraphManager.instance=null\r\n\t\treturn VectorGraphManager;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*@private\r\n\t*/\r\n\t//class laya.utils.WordText\r\n\tvar WordText=(function(){\r\n\t\tfunction WordText(){\r\n\t\t\tthis.id=NaN;\r\n\t\t\tthis.save=[];\r\n\t\t\tthis.toUpperCase=null;\r\n\t\t\tthis.changed=false;\r\n\t\t\tthis._text=null;\r\n\t\t}\r\n\r\n\t\t__class(WordText,'laya.utils.WordText');\r\n\t\tvar __proto=WordText.prototype;\r\n\t\t__proto.setText=function(txt){\r\n\t\t\tthis.changed=true;\r\n\t\t\tthis._text=txt;\r\n\t\t}\r\n\r\n\t\t__proto.toString=function(){\r\n\t\t\treturn this._text;\r\n\t\t}\r\n\r\n\t\t__proto.charCodeAt=function(i){\r\n\t\t\treturn this._text ? this._text.charCodeAt(i):NaN;\r\n\t\t}\r\n\r\n\t\t__proto.charAt=function(i){\r\n\t\t\treturn this._text ? this._text.charAt(i):null;\r\n\t\t}\r\n\r\n\t\t__getset(0,__proto,'length',function(){\r\n\t\t\treturn this._text ? this._text.length :0;\r\n\t\t});\r\n\r\n\t\treturn WordText;\r\n\t})()\r\n\r\n\r\n\t//class laya.webgl.atlas.AtlasGrid\r\n\tvar AtlasGrid=(function(){\r\n\t\tvar TexRowInfo,TexMergeTexSize;\r\n\t\tfunction AtlasGrid(width,height,atlasID){\r\n\t\t\tthis._atlasID=0;\r\n\t\t\tthis._width=0;\r\n\t\t\tthis._height=0;\r\n\t\t\tthis._texCount=0;\r\n\t\t\tthis._rowInfo=null;\r\n\t\t\tthis._cells=null;\r\n\t\t\tthis._failSize=new TexMergeTexSize();\r\n\t\t\t(width===void 0)&& (width=0);\r\n\t\t\t(height===void 0)&& (height=0);\r\n\t\t\t(atlasID===void 0)&& (atlasID=0);\r\n\t\t\tthis._cells=null;\r\n\t\t\tthis._rowInfo=null;\r\n\t\t\tthis._init(width,height);\r\n\t\t\tthis._atlasID=atlasID;\r\n\t\t}\r\n\r\n\t\t__class(AtlasGrid,'laya.webgl.atlas.AtlasGrid');\r\n\t\tvar __proto=AtlasGrid.prototype;\r\n\t\t//------------------------------------------------------------------------------\r\n\t\t__proto.getAltasID=function(){\r\n\t\t\treturn this._atlasID;\r\n\t\t}\r\n\r\n\t\t//------------------------------------------------------------------------------\r\n\t\t__proto.setAltasID=function(atlasID){\r\n\t\t\tif (atlasID >=0){\r\n\t\t\t\tthis._atlasID=atlasID;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//------------------------------------------------------------------\r\n\t\t__proto.addTex=function(type,width,height){\r\n\t\t\tvar result=this._get(width,height);\r\n\t\t\tif (result.ret==false){\r\n\t\t\t\treturn result;\r\n\t\t\t}\r\n\t\t\tthis._fill(result.x,result.y,width,height,type);\r\n\t\t\tthis._texCount++;\r\n\t\t\treturn result;\r\n\t\t}\r\n\r\n\t\t//------------------------------------------------------------------------------\r\n\t\t__proto._release=function(){\r\n\t\t\tif (this._cells !=null){\r\n\t\t\t\tthis._cells.length=0;\r\n\t\t\t\tthis._cells=null;\r\n\t\t\t}\r\n\t\t\tif (this._rowInfo){\r\n\t\t\t\tthis._rowInfo.length=0;\r\n\t\t\t\tthis._rowInfo=null;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//------------------------------------------------------------------------------\r\n\t\t__proto._init=function(width,height){\r\n\t\t\tthis._width=width;\r\n\t\t\tthis._height=height;\r\n\t\t\tthis._release();\r\n\t\t\tif (this._width==0)return false;\r\n\t\t\tthis._cells=new Uint8Array(this._width *this._height*3);\r\n\t\t\tthis._rowInfo=__newvec(this._height);\r\n\t\t\tfor (var i=0;i < this._height;i++){\r\n\t\t\t\tthis._rowInfo[i]=new TexRowInfo();\r\n\t\t\t}\r\n\t\t\tthis._clear();\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\t//------------------------------------------------------------------\r\n\t\t__proto._get=function(width,height){\r\n\t\t\tvar pFillInfo=new MergeFillInfo();\r\n\t\t\tif (width >=this._failSize.width && height >=this._failSize.height){\r\n\t\t\t\treturn pFillInfo;\r\n\t\t\t};\r\n\t\t\tvar rx=-1;\r\n\t\t\tvar ry=-1;\r\n\t\t\tvar nWidth=this._width;\r\n\t\t\tvar nHeight=this._height;\r\n\t\t\tvar pCellBox=this._cells;\r\n\t\t\tfor (var y=0;y < nHeight;y++){\r\n\t\t\t\tif (this._rowInfo[y].spaceCount < width)continue ;\r\n\t\t\t\tfor (var x=0;x < nWidth;){\r\n\t\t\t\t\tvar tm=(y *nWidth+x)*3;\r\n\t\t\t\t\tif (pCellBox[tm] !=0 || pCellBox[tm+1] < width || pCellBox[tm+2] < height){\r\n\t\t\t\t\t\tx+=pCellBox[tm+1];\r\n\t\t\t\t\t\tcontinue ;\r\n\t\t\t\t\t}\r\n\t\t\t\t\trx=x;\r\n\t\t\t\t\try=y;\r\n\t\t\t\t\tfor (var xx=0;xx < width;xx++){\r\n\t\t\t\t\t\tif (pCellBox[3*xx+tm+2] < height){\r\n\t\t\t\t\t\t\trx=-1;\r\n\t\t\t\t\t\t\tbreak ;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (rx < 0){\r\n\t\t\t\t\t\tx+=pCellBox[tm+1];\r\n\t\t\t\t\t\tcontinue ;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tpFillInfo.ret=true;\r\n\t\t\t\t\tpFillInfo.x=rx;\r\n\t\t\t\t\tpFillInfo.y=ry;\r\n\t\t\t\t\treturn pFillInfo;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn pFillInfo;\r\n\t\t}\r\n\r\n\t\t//------------------------------------------------------------------\r\n\t\t__proto._fill=function(x,y,w,h,type){\r\n\t\t\tvar nWidth=this._width;\r\n\t\t\tvar nHeghit=this._height;\r\n\t\t\tthis._check((x+w)<=nWidth && (y+h)<=nHeghit);\r\n\t\t\tfor (var yy=y;yy < (h+y);++yy){\r\n\t\t\t\tthis._check(this._rowInfo[yy].spaceCount >=w);\r\n\t\t\t\tthis._rowInfo[yy].spaceCount-=w;\r\n\t\t\t\tfor (var xx=0;xx < w;xx++){\r\n\t\t\t\t\tvar tm=(x+yy *nWidth+xx)*3;\r\n\t\t\t\t\tthis._check(this._cells[tm]==0);\r\n\t\t\t\t\tthis._cells[tm]=type;\r\n\t\t\t\t\tthis._cells[tm+1]=w;\r\n\t\t\t\t\tthis._cells[tm+2]=h;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (x > 0){\r\n\t\t\t\tfor (yy=0;yy < h;++yy){\r\n\t\t\t\t\tvar s=0;\r\n\t\t\t\t\tfor (xx=x-1;xx >=0;--xx,++s){\r\n\t\t\t\t\t\tif (this._cells[((y+yy)*nWidth+xx)*3] !=0)break ;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfor (xx=s;xx > 0;--xx){\r\n\t\t\t\t\t\tthis._cells[((y+yy)*nWidth+x-xx)*3+1]=xx;\r\n\t\t\t\t\t\tthis._check(xx > 0);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (y > 0){\r\n\t\t\t\tfor (xx=x;xx < (x+w);++xx){\r\n\t\t\t\t\ts=0;\r\n\t\t\t\t\tfor (yy=y-1;yy >=0;--yy,s++){\r\n\t\t\t\t\t\tif (this._cells[(xx+yy *nWidth)*3] !=0)break ;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfor (yy=s;yy > 0;--yy){\r\n\t\t\t\t\t\tthis._cells[(xx+(y-yy)*nWidth)*3+2]=yy;\r\n\t\t\t\t\t\tthis._check(yy > 0);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__proto._check=function(ret){\r\n\t\t\tif (ret==false){\r\n\t\t\t\tconsole.log(\"xtexMerger 错误啦\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//------------------------------------------------------------------\r\n\t\t__proto._clear=function(){\r\n\t\t\tthis._texCount=0;\r\n\t\t\tfor (var y=0;y < this._height;y++){\r\n\t\t\t\tthis._rowInfo[y].spaceCount=this._width;\r\n\t\t\t}\r\n\t\t\tfor (var i=0;i < this._height;i++){\r\n\t\t\t\tfor (var j=0;j < this._width;j++){\r\n\t\t\t\t\tvar tm=(i *this._width+j)*3;\r\n\t\t\t\t\tthis._cells[tm]=0;\r\n\t\t\t\t\tthis._cells[tm+1]=this._width-j;\r\n\t\t\t\t\tthis._cells[tm+2]=this._width-i;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis._failSize.width=this._width+1;\r\n\t\t\tthis._failSize.height=this._height+1;\r\n\t\t}\r\n\r\n\t\tAtlasGrid.__init$=function(){\r\n\t\t\t//------------------------------------------------------------------------------\r\n\t\t\t//class TexRowInfo\r\n\t\t\tTexRowInfo=(function(){\r\n\t\t\t\tfunction TexRowInfo(){\r\n\t\t\t\t\tthis.spaceCount=0;\r\n\t\t\t\t}\r\n\t\t\t\t__class(TexRowInfo,'');\r\n\t\t\t\treturn TexRowInfo;\r\n\t\t\t})()\r\n\t\t\t//------------------------------------------------------------------------------\r\n\t\t\t//class TexMergeTexSize\r\n\t\t\tTexMergeTexSize=(function(){\r\n\t\t\t\tfunction TexMergeTexSize(){\r\n\t\t\t\t\tthis.width=0;\r\n\t\t\t\t\tthis.height=0;\r\n\t\t\t\t}\r\n\t\t\t\t__class(TexMergeTexSize,'');\r\n\t\t\t\treturn TexMergeTexSize;\r\n\t\t\t})()\r\n\t\t}\r\n\r\n\t\treturn AtlasGrid;\r\n\t})()\r\n\r\n\r\n\t//class laya.webgl.atlas.AtlasResourceManager\r\n\tvar AtlasResourceManager=(function(){\r\n\t\tfunction AtlasResourceManager(width,height,gridSize,maxTexNum){\r\n\t\t\tthis._currentAtlasCount=0;\r\n\t\t\tthis._maxAtlaserCount=0;\r\n\t\t\tthis._width=0;\r\n\t\t\tthis._height=0;\r\n\t\t\tthis._gridSize=0;\r\n\t\t\tthis._gridNumX=0;\r\n\t\t\tthis._gridNumY=0;\r\n\t\t\tthis._init=false;\r\n\t\t\tthis._curAtlasIndex=0;\r\n\t\t\tthis._setAtlasParam=false;\r\n\t\t\tthis._atlaserArray=null;\r\n\t\t\tthis._needGC=false;\r\n\t\t\tthis._setAtlasParam=true;\r\n\t\t\tthis._width=width;\r\n\t\t\tthis._height=height;\r\n\t\t\tthis._gridSize=gridSize;\r\n\t\t\tthis._maxAtlaserCount=maxTexNum;\r\n\t\t\tthis._gridNumX=width / gridSize;\r\n\t\t\tthis._gridNumY=height / gridSize;\r\n\t\t\tthis._curAtlasIndex=0;\r\n\t\t\tthis._atlaserArray=[];\r\n\t\t}\r\n\r\n\t\t__class(AtlasResourceManager,'laya.webgl.atlas.AtlasResourceManager');\r\n\t\tvar __proto=AtlasResourceManager.prototype;\r\n\t\t__proto.setAtlasParam=function(width,height,gridSize,maxTexNum){\r\n\t\t\tif (this._setAtlasParam==true){\r\n\t\t\t\tAtlasResourceManager._sid_=0;\r\n\t\t\t\tthis._width=width;\r\n\t\t\t\tthis._height=height;\r\n\t\t\t\tthis._gridSize=gridSize;\r\n\t\t\t\tthis._maxAtlaserCount=maxTexNum;\r\n\t\t\t\tthis._gridNumX=width / gridSize;\r\n\t\t\t\tthis._gridNumY=height / gridSize;\r\n\t\t\t\tthis._curAtlasIndex=0;\r\n\t\t\t\tthis.freeAll();\r\n\t\t\t\treturn true;\r\n\t\t\t\t}else {\r\n\t\t\t\tconsole.log(\"设置大图合集参数错误，只能在开始页面设置各种参数\");\r\n\t\t\t\tthrow-1;\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\t//添加 图片到大图集\r\n\t\t__proto.pushData=function(texture){\r\n\t\t\tvar tex=texture;\r\n\t\t\tthis._setAtlasParam=false;\r\n\t\t\tvar bFound=false;\r\n\t\t\tvar nImageGridX=(Math.ceil((texture.bitmap.width+2)/ this._gridSize));\r\n\t\t\tvar nImageGridY=(Math.ceil((texture.bitmap.height+2)/ this._gridSize));\r\n\t\t\tvar bSuccess=false;\r\n\t\t\tfor (var k=0;k < 2;k++){\r\n\t\t\t\tvar maxAtlaserCount=this._maxAtlaserCount;\r\n\t\t\t\tfor (var i=0;i < maxAtlaserCount;i++){\r\n\t\t\t\t\tvar altasIndex=(this._curAtlasIndex+i)% maxAtlaserCount;\r\n\t\t\t\t\t(this._atlaserArray.length-1>=altasIndex)|| (this._atlaserArray.push(new Atlaser(this._gridNumX,this._gridNumY,this._width,this._height,AtlasResourceManager._sid_++)));\r\n\t\t\t\t\tvar atlas=this._atlaserArray[altasIndex];\r\n\t\t\t\t\tvar bitmap=texture.bitmap;\r\n\t\t\t\t\tvar webGLImageIndex=atlas.inAtlasWebGLImagesKey.indexOf(bitmap);\r\n\t\t\t\t\tvar offsetX=0,offsetY=0;\r\n\t\t\t\t\tif (webGLImageIndex==-1){\r\n\t\t\t\t\t\tvar fillInfo=atlas.addTex(1,nImageGridX,nImageGridY);\r\n\t\t\t\t\t\tif (fillInfo.ret){\r\n\t\t\t\t\t\t\toffsetX=fillInfo.x *this._gridSize+1;\r\n\t\t\t\t\t\t\toffsetY=fillInfo.y *this._gridSize+1;\r\n\t\t\t\t\t\t\tbitmap.lock=true;\r\n\t\t\t\t\t\t\tatlas.addToAtlasTexture((bitmap),offsetX,offsetY);\r\n\t\t\t\t\t\t\tatlas.addToAtlas(texture,offsetX,offsetY);\r\n\t\t\t\t\t\t\tbSuccess=true;\r\n\t\t\t\t\t\t\tthis._curAtlasIndex=altasIndex;\r\n\t\t\t\t\t\t\tbreak ;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}else {\r\n\t\t\t\t\t\tvar offset=atlas.InAtlasWebGLImagesOffsetValue[webGLImageIndex];\r\n\t\t\t\t\t\toffsetX=offset[0];\r\n\t\t\t\t\t\toffsetY=offset[1];\r\n\t\t\t\t\t\tatlas.addToAtlas(texture,offsetX,offsetY);\r\n\t\t\t\t\t\tbSuccess=true;\r\n\t\t\t\t\t\tthis._curAtlasIndex=altasIndex;\r\n\t\t\t\t\t\tbreak ;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (bSuccess)\r\n\t\t\t\t\tbreak ;\r\n\t\t\t\tthis._atlaserArray.push(new Atlaser(this._gridNumX,this._gridNumY,this._width,this._height,AtlasResourceManager._sid_++));\r\n\t\t\t\tthis._needGC=true;\r\n\t\t\t\tthis.garbageCollection();\r\n\t\t\t\tthis._curAtlasIndex=this._atlaserArray.length-1;\r\n\t\t\t}\r\n\t\t\tif (!bSuccess){\r\n\t\t\t\tconsole.log(\">>>AtlasManager pushData error\");\r\n\t\t\t}\r\n\t\t\treturn bSuccess;\r\n\t\t}\r\n\r\n\t\t__proto.addToAtlas=function(tex){\r\n\t\t\tlaya.webgl.atlas.AtlasResourceManager.instance.pushData(tex);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*回收大图合集,不建议手动调用\r\n\t\t*@return\r\n\t\t*/\r\n\t\t__proto.garbageCollection=function(){\r\n\t\t\tif (this._needGC===true){\r\n\t\t\t\tvar n=this._atlaserArray.length-this._maxAtlaserCount;\r\n\t\t\t\tfor (var i=0;i < n;i++)\r\n\t\t\t\tthis._atlaserArray[i].dispose();\r\n\t\t\t\tthis._atlaserArray.splice(0,n);\r\n\t\t\t\tthis._needGC=false;\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\t__proto.freeAll=function(){\r\n\t\t\tfor (var i=0,n=this._atlaserArray.length;i < n;i++){\r\n\t\t\t\tthis._atlaserArray[i].dispose();\r\n\t\t\t}\r\n\t\t\tthis._atlaserArray.length=0;\r\n\t\t\tthis._curAtlasIndex=0;\r\n\t\t}\r\n\r\n\t\t__proto.getAtlaserCount=function(){\r\n\t\t\treturn this._atlaserArray.length;\r\n\t\t}\r\n\r\n\t\t__proto.getAtlaserByIndex=function(index){\r\n\t\t\treturn this._atlaserArray[index];\r\n\t\t}\r\n\r\n\t\t__getset(1,AtlasResourceManager,'atlasLimitWidth',function(){\r\n\t\t\treturn AtlasResourceManager._atlasLimitWidth;\r\n\t\t\t},function(value){\r\n\t\t\tAtlasResourceManager._atlasLimitWidth=value;\r\n\t\t});\r\n\r\n\t\t__getset(1,AtlasResourceManager,'enabled',function(){\r\n\t\t\treturn AtlasResourceManager._enabled;\r\n\t\t});\r\n\r\n\t\t__getset(1,AtlasResourceManager,'atlasLimitHeight',function(){\r\n\t\t\treturn AtlasResourceManager._atlasLimitHeight;\r\n\t\t\t},function(value){\r\n\t\t\tAtlasResourceManager._atlasLimitHeight=value;\r\n\t\t});\r\n\r\n\t\t__getset(1,AtlasResourceManager,'instance',function(){\r\n\t\t\tif (!AtlasResourceManager._Instance){\r\n\t\t\t\tAtlasResourceManager._Instance=new AtlasResourceManager(laya.webgl.atlas.AtlasResourceManager.atlasTextureWidth,laya.webgl.atlas.AtlasResourceManager.atlasTextureHeight,16,laya.webgl.atlas.AtlasResourceManager.maxTextureCount);\r\n\t\t\t}\r\n\t\t\treturn AtlasResourceManager._Instance;\r\n\t\t});\r\n\r\n\t\tAtlasResourceManager._enable=function(){\r\n\t\t\tAtlasResourceManager._enabled=true;\r\n\t\t\tConfig.atlasEnable=true;\r\n\t\t}\r\n\r\n\t\tAtlasResourceManager._disable=function(){\r\n\t\t\tAtlasResourceManager._enabled=false;\r\n\t\t\tConfig.atlasEnable=false;\r\n\t\t}\r\n\r\n\t\tAtlasResourceManager.__init__=function(){\r\n\t\t\tAtlasResourceManager.atlasTextureWidth=2048;\r\n\t\t\tAtlasResourceManager.atlasTextureHeight=2048;\r\n\t\t\tAtlasResourceManager.maxTextureCount=6;\r\n\t\t\tAtlasResourceManager.atlasLimitWidth=512;\r\n\t\t\tAtlasResourceManager.atlasLimitHeight=512;\r\n\t\t}\r\n\r\n\t\tAtlasResourceManager._enabled=false;\r\n\t\tAtlasResourceManager._atlasLimitWidth=0;\r\n\t\tAtlasResourceManager._atlasLimitHeight=0;\r\n\t\tAtlasResourceManager.gridSize=16;\r\n\t\tAtlasResourceManager.atlasTextureWidth=0;\r\n\t\tAtlasResourceManager.atlasTextureHeight=0;\r\n\t\tAtlasResourceManager.maxTextureCount=0;\r\n\t\tAtlasResourceManager._atlasRestore=0;\r\n\t\tAtlasResourceManager.BOARDER_TYPE_NO=0;\r\n\t\tAtlasResourceManager.BOARDER_TYPE_RIGHT=1;\r\n\t\tAtlasResourceManager.BOARDER_TYPE_LEFT=2;\r\n\t\tAtlasResourceManager.BOARDER_TYPE_BOTTOM=4;\r\n\t\tAtlasResourceManager.BOARDER_TYPE_TOP=8;\r\n\t\tAtlasResourceManager.BOARDER_TYPE_ALL=15;\r\n\t\tAtlasResourceManager._sid_=0;\r\n\t\tAtlasResourceManager._Instance=null;\r\n\t\treturn AtlasResourceManager;\r\n\t})()\r\n\r\n\r\n\t//class laya.webgl.atlas.MergeFillInfo\r\n\tvar MergeFillInfo=(function(){\r\n\t\tfunction MergeFillInfo(){\r\n\t\t\tthis.x=0;\r\n\t\t\tthis.y=0;\r\n\t\t\tthis.ret=false;\r\n\t\t\tthis.ret=false;\r\n\t\t\tthis.x=0;\r\n\t\t\tthis.y=0;\r\n\t\t}\r\n\r\n\t\t__class(MergeFillInfo,'laya.webgl.atlas.MergeFillInfo');\r\n\t\treturn MergeFillInfo;\r\n\t})()\r\n\r\n\r\n\t;\r\n\t//class laya.webgl.canvas.BlendMode\r\n\tvar BlendMode=(function(){\r\n\t\tfunction BlendMode(){};\r\n\t\t__class(BlendMode,'laya.webgl.canvas.BlendMode');\r\n\t\tBlendMode._init_=function(gl){\r\n\t\t\tBlendMode.fns=[BlendMode.BlendNormal,BlendMode.BlendAdd,BlendMode.BlendMultiply,BlendMode.BlendScreen,BlendMode.BlendOverlay,BlendMode.BlendLight,BlendMode.BlendMask,BlendMode.BlendDestinationOut];\r\n\t\t\tBlendMode.targetFns=[BlendMode.BlendNormalTarget,BlendMode.BlendAddTarget,BlendMode.BlendMultiplyTarget,BlendMode.BlendScreenTarget,BlendMode.BlendOverlayTarget,BlendMode.BlendLightTarget,BlendMode.BlendMask,BlendMode.BlendDestinationOut];\r\n\t\t}\r\n\r\n\t\tBlendMode.BlendNormal=function(gl){\r\n\t\t\tgl.blendFuncSeparate(0x0302,0x0303,1,1);\r\n\t\t}\r\n\r\n\t\tBlendMode.BlendAdd=function(gl){\r\n\t\t\tgl.blendFunc(0x0302,0x0304);\r\n\t\t}\r\n\r\n\t\tBlendMode.BlendMultiply=function(gl){\r\n\t\t\tgl.blendFunc(0x0306,0x0303);\r\n\t\t}\r\n\r\n\t\tBlendMode.BlendScreen=function(gl){\r\n\t\t\tgl.blendFunc(0x0302,1);\r\n\t\t}\r\n\r\n\t\tBlendMode.BlendOverlay=function(gl){\r\n\t\t\tgl.blendFunc(1,0x0301);\r\n\t\t}\r\n\r\n\t\tBlendMode.BlendLight=function(gl){\r\n\t\t\tgl.blendFunc(0x0302,1);\r\n\t\t}\r\n\r\n\t\tBlendMode.BlendNormalTarget=function(gl){\r\n\t\t\tgl.blendFuncSeparate(0x0302,0x0303,1,0x0303);\r\n\t\t}\r\n\r\n\t\tBlendMode.BlendAddTarget=function(gl){\r\n\t\t\tgl.blendFunc(0x0302,0x0304);\r\n\t\t}\r\n\r\n\t\tBlendMode.BlendMultiplyTarget=function(gl){\r\n\t\t\tgl.blendFunc(0x0306,0x0303);\r\n\t\t}\r\n\r\n\t\tBlendMode.BlendScreenTarget=function(gl){\r\n\t\t\tgl.blendFunc(0x0302,1);\r\n\t\t}\r\n\r\n\t\tBlendMode.BlendOverlayTarget=function(gl){\r\n\t\t\tgl.blendFunc(1,0x0301);\r\n\t\t}\r\n\r\n\t\tBlendMode.BlendLightTarget=function(gl){\r\n\t\t\tgl.blendFunc(0x0302,1);\r\n\t\t}\r\n\r\n\t\tBlendMode.BlendMask=function(gl){\r\n\t\t\tgl.blendFunc(0,0x0302);\r\n\t\t}\r\n\r\n\t\tBlendMode.BlendDestinationOut=function(gl){\r\n\t\t\tgl.blendFunc(0,0);\r\n\t\t}\r\n\r\n\t\tBlendMode.activeBlendFunction=null;\r\n\t\tBlendMode.NAMES=[\"normal\",\"add\",\"multiply\",\"screen\",\"overlay\",\"light\",\"mask\",\"destination-out\"];\r\n\t\tBlendMode.TOINT={\"normal\":0,\"add\":1,\"multiply\":2,\"screen\":3 ,\"lighter\":1,\"overlay\":4,\"light\":5,\"mask\":6,\"destination-out\":7};\r\n\t\tBlendMode.NORMAL=\"normal\";\r\n\t\tBlendMode.ADD=\"add\";\r\n\t\tBlendMode.MULTIPLY=\"multiply\";\r\n\t\tBlendMode.SCREEN=\"screen\";\r\n\t\tBlendMode.LIGHT=\"light\";\r\n\t\tBlendMode.OVERLAY=\"overlay\";\r\n\t\tBlendMode.DESTINATIONOUT=\"destination-out\";\r\n\t\tBlendMode.fns=[];\r\n\t\tBlendMode.targetFns=[];\r\n\t\treturn BlendMode;\r\n\t})()\r\n\r\n\r\n\t//class laya.webgl.canvas.DrawStyle\r\n\tvar DrawStyle=(function(){\r\n\t\tfunction DrawStyle(value){\r\n\t\t\tthis._color=Color.create(\"black\");\r\n\t\t\tthis.setValue(value);\r\n\t\t}\r\n\r\n\t\t__class(DrawStyle,'laya.webgl.canvas.DrawStyle');\r\n\t\tvar __proto=DrawStyle.prototype;\r\n\t\t__proto.setValue=function(value){\r\n\t\t\tif (value){\r\n\t\t\t\tif ((typeof value=='string')){\r\n\t\t\t\t\tthis._color=Color.create(value);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif ((value instanceof laya.utils.Color )){\r\n\t\t\t\t\tthis._color=value;\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__proto.reset=function(){\r\n\t\t\tthis._color=Color.create(\"black\");\r\n\t\t}\r\n\r\n\t\t__proto.equal=function(value){\r\n\t\t\tif ((typeof value=='string'))return this._color.strColor===value;\r\n\t\t\tif ((value instanceof laya.utils.Color ))return this._color.numColor===(value).numColor;\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\t__proto.toColorStr=function(){\r\n\t\t\treturn this._color.strColor;\r\n\t\t}\r\n\r\n\t\tDrawStyle.create=function(value){\r\n\t\t\tif (value){\r\n\t\t\t\tvar color;\r\n\t\t\t\tif ((typeof value=='string'))color=Color.create(value);\r\n\t\t\t\telse if ((value instanceof laya.utils.Color ))color=value;\r\n\t\t\t\tif (color){\r\n\t\t\t\t\treturn color._drawStyle || (color._drawStyle=new DrawStyle(value));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\tDrawStyle.DEFAULT=new DrawStyle(\"#000000\");\r\n\t\treturn DrawStyle;\r\n\t})()\r\n\r\n\r\n\t//class laya.webgl.canvas.Path\r\n\tvar Path=(function(){\r\n\t\tfunction Path(){\r\n\t\t\tthis._x=0;\r\n\t\t\tthis._y=0;\r\n\t\t\t//this._rect=null;\r\n\t\t\t//this.ib=null;\r\n\t\t\t//this.vb=null;\r\n\t\t\tthis.dirty=false;\r\n\t\t\t//this.geomatrys=null;\r\n\t\t\t//this._curGeomatry=null;\r\n\t\t\tthis.offset=0;\r\n\t\t\tthis.count=0;\r\n\t\t\tthis.geoStart=0;\r\n\t\t\tthis.tempArray=[];\r\n\t\t\tthis.closePath=false;\r\n\t\t\tthis.geomatrys=[];\r\n\t\t\tvar gl=WebGL.mainContext;\r\n\t\t\tthis.ib=IndexBuffer2D.create(0x88E8);\r\n\t\t\tthis.vb=VertexBuffer2D.create(5);\r\n\t\t}\r\n\r\n\t\t__class(Path,'laya.webgl.canvas.Path');\r\n\t\tvar __proto=Path.prototype;\r\n\t\t__proto.addPoint=function(pointX,pointY){\r\n\t\t\tthis.tempArray.push(pointX,pointY);\r\n\t\t}\r\n\r\n\t\t__proto.getEndPointX=function(){\r\n\t\t\treturn this.tempArray[this.tempArray.length-2];\r\n\t\t}\r\n\r\n\t\t__proto.getEndPointY=function(){\r\n\t\t\treturn this.tempArray[this.tempArray.length-1];\r\n\t\t}\r\n\r\n\t\t__proto.polygon=function(x,y,points,color,borderWidth,borderColor){\r\n\t\t\tvar geo;\r\n\t\t\tthis.geomatrys.push(this._curGeomatry=geo=new Polygon(x,y,points,color,borderWidth,borderColor));\r\n\t\t\tif (!color)geo.fill=false;\r\n\t\t\tif (borderColor==undefined)geo.borderWidth=0;\r\n\t\t\treturn geo;\r\n\t\t}\r\n\r\n\t\t__proto.setGeomtry=function(shape){\r\n\t\t\tthis.geomatrys.push(this._curGeomatry=shape);\r\n\t\t}\r\n\r\n\t\t__proto.drawLine=function(x,y,points,width,color){\r\n\t\t\tvar geo;\r\n\t\t\tif (this.closePath){\r\n\t\t\t\tthis.geomatrys.push(this._curGeomatry=geo=new LoopLine(x,y,points,width,color));\r\n\t\t\t\t}else {\r\n\t\t\t\tthis.geomatrys.push(this._curGeomatry=geo=new Line(x,y,points,width,color));\r\n\t\t\t}\r\n\t\t\tgeo.fill=false;\r\n\t\t\treturn geo;\r\n\t\t}\r\n\r\n\t\t__proto.update=function(){\r\n\t\t\tvar si=this.ib.byteLength;\r\n\t\t\tvar len=this.geomatrys.length;\r\n\t\t\tthis.offset=si;\r\n\t\t\tfor (var i=this.geoStart;i < len;i++){\r\n\t\t\t\tthis.geomatrys[i].getData(this.ib,this.vb,this.vb.byteLength / 20);\r\n\t\t\t}\r\n\t\t\tthis.geoStart=len;\r\n\t\t\tthis.count=(this.ib.byteLength-si)/ CONST3D2D.BYTES_PIDX;\r\n\t\t}\r\n\r\n\t\t__proto.reset=function(){\r\n\t\t\tthis.vb.clear();\r\n\t\t\tthis.ib.clear();\r\n\t\t\tthis.offset=this.count=this.geoStart=0;\r\n\t\t\tthis.geomatrys.length=0;\r\n\t\t}\r\n\r\n\t\treturn Path;\r\n\t})()\r\n\r\n\r\n\t//class laya.webgl.canvas.save.SaveBase\r\n\tvar SaveBase=(function(){\r\n\t\tfunction SaveBase(){\r\n\t\t\t//this._valueName=null;\r\n\t\t\t//this._value=null;\r\n\t\t\t//this._dataObj=null;\r\n\t\t\t//this._newSubmit=false;\r\n\t\t}\r\n\r\n\t\t__class(SaveBase,'laya.webgl.canvas.save.SaveBase');\r\n\t\tvar __proto=SaveBase.prototype;\r\n\t\tLaya.imps(__proto,{\"laya.webgl.canvas.save.ISaveData\":true})\r\n\t\t__proto.isSaveMark=function(){return false;}\r\n\t\t__proto.restore=function(context){\r\n\t\t\tthis._dataObj[this._valueName]=this._value;\r\n\t\t\tSaveBase._cache[SaveBase._cache._length++]=this;\r\n\t\t\tthis._newSubmit && (context._curSubmit=Submit.RENDERBASE,context._renderKey=0);\r\n\t\t}\r\n\r\n\t\tSaveBase._createArray=function(){\r\n\t\t\tvar value=[];\r\n\t\t\tvalue._length=0;\r\n\t\t\treturn value;\r\n\t\t}\r\n\r\n\t\tSaveBase._init=function(){\r\n\t\t\tvar namemap=SaveBase._namemap={};\r\n\t\t\tnamemap[0x1]=\"ALPHA\";\r\n\t\t\tnamemap[0x2]=\"fillStyle\";\r\n\t\t\tnamemap[0x8]=\"font\";\r\n\t\t\tnamemap[0x100]=\"lineWidth\";\r\n\t\t\tnamemap[0x200]=\"strokeStyle\";\r\n\t\t\tnamemap[0x2000]=\"_mergeID\";\r\n\t\t\tnamemap[0x400]=namemap[0x800]=namemap[0x1000]=[];\r\n\t\t\tnamemap[0x4000]=\"textBaseline\";\r\n\t\t\tnamemap[0x8000]=\"textAlign\";\r\n\t\t\tnamemap[0x10000]=\"_nBlendType\";\r\n\t\t\tnamemap[0x80000]=\"shader\";\r\n\t\t\tnamemap[0x100000]=\"filters\";\r\n\t\t\treturn namemap;\r\n\t\t}\r\n\r\n\t\tSaveBase.save=function(context,type,dataObj,newSubmit){\r\n\t\t\tif ((context._saveMark._saveuse & type)!==type){\r\n\t\t\t\tcontext._saveMark._saveuse |=type;\r\n\t\t\t\tvar cache=SaveBase._cache;\r\n\t\t\t\tvar o=cache._length > 0 ? cache[--cache._length] :(new SaveBase());\r\n\t\t\t\to._value=dataObj[o._valueName=SaveBase._namemap[type]];\r\n\t\t\t\to._dataObj=dataObj;\r\n\t\t\t\to._newSubmit=newSubmit;\r\n\t\t\t\tvar _save=context._save;\r\n\t\t\t\t_save[_save._length++]=o;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tSaveBase._cache=laya.webgl.canvas.save.SaveBase._createArray();\r\n\t\tSaveBase._namemap=SaveBase._init();\r\n\t\treturn SaveBase;\r\n\t})()\r\n\r\n\r\n\t//class laya.webgl.canvas.save.SaveClipRect\r\n\tvar SaveClipRect=(function(){\r\n\t\tfunction SaveClipRect(){\r\n\t\t\t//this._clipSaveRect=null;\r\n\t\t\t//this._submitScissor=null;\r\n\t\t\tthis._clipRect=new Rectangle();\r\n\t\t}\r\n\r\n\t\t__class(SaveClipRect,'laya.webgl.canvas.save.SaveClipRect');\r\n\t\tvar __proto=SaveClipRect.prototype;\r\n\t\tLaya.imps(__proto,{\"laya.webgl.canvas.save.ISaveData\":true})\r\n\t\t__proto.isSaveMark=function(){return false;}\r\n\t\t__proto.restore=function(context){\r\n\t\t\tcontext._clipRect=this._clipSaveRect;\r\n\t\t\tSaveClipRect._cache[SaveClipRect._cache._length++]=this;\r\n\t\t\tthis._submitScissor.submitLength=context._submits._length-this._submitScissor.submitIndex;\r\n\t\t\tcontext._curSubmit=Submit.RENDERBASE;\r\n\t\t\tcontext._renderKey=0;\r\n\t\t}\r\n\r\n\t\tSaveClipRect.save=function(context,submitScissor){\r\n\t\t\tif ((context._saveMark._saveuse & 0x20000)==0x20000)return;\r\n\t\t\tcontext._saveMark._saveuse |=0x20000;\r\n\t\t\tvar cache=SaveClipRect._cache;\r\n\t\t\tvar o=cache._length > 0 ? cache[--cache._length] :(new SaveClipRect());\r\n\t\t\to._clipSaveRect=context._clipRect;\r\n\t\t\tcontext._clipRect=o._clipRect.copyFrom(context._clipRect);\r\n\t\t\to._submitScissor=submitScissor;\r\n\t\t\tvar _save=context._save;\r\n\t\t\t_save[_save._length++]=o;\r\n\t\t}\r\n\r\n\t\tSaveClipRect._cache=SaveBase._createArray();\r\n\t\treturn SaveClipRect;\r\n\t})()\r\n\r\n\r\n\t//class laya.webgl.canvas.save.SaveMark\r\n\tvar SaveMark=(function(){\r\n\t\tfunction SaveMark(){\r\n\t\t\tthis._saveuse=0;\r\n\t\t\t//this._preSaveMark=null;\r\n\t\t\t;\r\n\t\t}\r\n\r\n\t\t__class(SaveMark,'laya.webgl.canvas.save.SaveMark');\r\n\t\tvar __proto=SaveMark.prototype;\r\n\t\tLaya.imps(__proto,{\"laya.webgl.canvas.save.ISaveData\":true})\r\n\t\t__proto.isSaveMark=function(){\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\t__proto.restore=function(context){\r\n\t\t\tcontext._saveMark=this._preSaveMark;\r\n\t\t\tSaveMark._no[SaveMark._no._length++]=this;\r\n\t\t}\r\n\r\n\t\tSaveMark.Create=function(context){\r\n\t\t\tvar no=SaveMark._no;\r\n\t\t\tvar o=no._length > 0 ? no[--no._length] :(new SaveMark());\r\n\t\t\to._saveuse=0;\r\n\t\t\to._preSaveMark=context._saveMark;\r\n\t\t\tcontext._saveMark=o;\r\n\t\t\treturn o;\r\n\t\t}\r\n\r\n\t\tSaveMark._no=SaveBase._createArray();\r\n\t\treturn SaveMark;\r\n\t})()\r\n\r\n\r\n\t//class laya.webgl.canvas.save.SaveTransform\r\n\tvar SaveTransform=(function(){\r\n\t\tfunction SaveTransform(){\r\n\t\t\t//this._savematrix=null;\r\n\t\t\tthis._matrix=new Matrix();\r\n\t\t}\r\n\r\n\t\t__class(SaveTransform,'laya.webgl.canvas.save.SaveTransform');\r\n\t\tvar __proto=SaveTransform.prototype;\r\n\t\tLaya.imps(__proto,{\"laya.webgl.canvas.save.ISaveData\":true})\r\n\t\t__proto.isSaveMark=function(){return false;}\r\n\t\t__proto.restore=function(context){\r\n\t\t\tcontext._curMat=this._savematrix;\r\n\t\t\tSaveTransform._no[SaveTransform._no._length++]=this;\r\n\t\t}\r\n\r\n\t\tSaveTransform.save=function(context){\r\n\t\t\tvar _saveMark=context._saveMark;\r\n\t\t\tif ((_saveMark._saveuse & 0x800)===0x800)return;\r\n\t\t\t_saveMark._saveuse |=0x800;\r\n\t\t\tvar no=SaveTransform._no;\r\n\t\t\tvar o=no._length > 0 ? no[--no._length] :(new SaveTransform());\r\n\t\t\to._savematrix=context._curMat;\r\n\t\t\tcontext._curMat=context._curMat.copyTo(o._matrix);\r\n\t\t\tvar _save=context._save;\r\n\t\t\t_save[_save._length++]=o;\r\n\t\t}\r\n\r\n\t\tSaveTransform._no=SaveBase._createArray();\r\n\t\treturn SaveTransform;\r\n\t})()\r\n\r\n\r\n\t//class laya.webgl.canvas.save.SaveTranslate\r\n\tvar SaveTranslate=(function(){\r\n\t\tfunction SaveTranslate(){\r\n\t\t\t//this._x=NaN;\r\n\t\t\t//this._y=NaN;\r\n\t\t}\r\n\r\n\t\t__class(SaveTranslate,'laya.webgl.canvas.save.SaveTranslate');\r\n\t\tvar __proto=SaveTranslate.prototype;\r\n\t\tLaya.imps(__proto,{\"laya.webgl.canvas.save.ISaveData\":true})\r\n\t\t__proto.isSaveMark=function(){return false;}\r\n\t\t__proto.restore=function(context){\r\n\t\t\tvar mat=context._curMat;\r\n\t\t\tcontext._x=this._x;\r\n\t\t\tcontext._y=this._y;\r\n\t\t\tSaveTranslate._no[SaveTranslate._no._length++]=this;\r\n\t\t}\r\n\r\n\t\tSaveTranslate.save=function(context){\r\n\t\t\tvar no=SaveTranslate._no;\r\n\t\t\tvar o=no._length > 0 ? no[--no._length] :(new SaveTranslate());\r\n\t\t\to._x=context._x;\r\n\t\t\to._y=context._y;\r\n\t\t\tvar _save=context._save;\r\n\t\t\t_save[_save._length++]=o;\r\n\t\t}\r\n\r\n\t\tSaveTranslate._no=SaveBase._createArray();\r\n\t\treturn SaveTranslate;\r\n\t})()\r\n\r\n\r\n\t//class laya.webgl.resource.RenderTargetMAX\r\n\tvar RenderTargetMAX=(function(){\r\n\t\tvar OneTarget;\r\n\t\tfunction RenderTargetMAX(){\r\n\t\t\tthis.targets=null;\r\n\t\t\tthis.oneTargets=null;\r\n\t\t\tthis.repaint=false;\r\n\t\t\tthis._width=NaN;\r\n\t\t\tthis._height=NaN;\r\n\t\t\tthis._clipRect=new Rectangle();\r\n\t\t}\r\n\r\n\t\t__class(RenderTargetMAX,'laya.webgl.resource.RenderTargetMAX');\r\n\t\tvar __proto=RenderTargetMAX.prototype;\r\n\t\t__proto.size=function(w,h){\r\n\t\t\tif (this._width===w && this._height===h)return;\r\n\t\t\tthis.repaint=true;\r\n\t\t\tthis._width=w;\r\n\t\t\tthis._height=h;\r\n\t\t\tif (!this.oneTargets)\r\n\t\t\t\tthis.oneTargets=new OneTarget(w,h);\r\n\t\t\telse\r\n\t\t\tthis.oneTargets.target.size(w,h);\r\n\t\t}\r\n\r\n\t\t__proto._flushToTarget=function(context,target){\r\n\t\t\tvar worldScissorTest=RenderState2D.worldScissorTest;\r\n\t\t\tvar preworldClipRect=RenderState2D.worldClipRect;\r\n\t\t\tRenderState2D.worldClipRect=this._clipRect;\r\n\t\t\tthis._clipRect.x=this._clipRect.y=0;\r\n\t\t\tthis._clipRect.width=this._width;\r\n\t\t\tthis._clipRect.height=this._height;\r\n\t\t\tRenderState2D.worldScissorTest=false;\r\n\t\t\tWebGL.mainContext.disable(0x0C11);\r\n\t\t\tvar preAlpha=RenderState2D.worldAlpha;\r\n\t\t\tvar preMatrix4=RenderState2D.worldMatrix4;\r\n\t\t\tvar preMatrix=RenderState2D.worldMatrix;\r\n\t\t\tvar preFilters=RenderState2D.worldFilters;\r\n\t\t\tvar preShaderDefines=RenderState2D.worldShaderDefines;\r\n\t\t\tRenderState2D.worldMatrix=RenderTargetMAX._matrixDefault;\r\n\t\t\tRenderState2D.restoreTempArray();\r\n\t\t\tRenderState2D.worldMatrix4=RenderState2D.TEMPMAT4_ARRAY;\r\n\t\t\tRenderState2D.worldAlpha=1;\r\n\t\t\tRenderState2D.worldFilters=null;\r\n\t\t\tRenderState2D.worldShaderDefines=null;\r\n\t\t\tBaseShader.activeShader=null;\r\n\t\t\ttarget.start();\r\n\t\t\tConfig.showCanvasMark ? target.clear(0,1,0,0.3):target.clear(0,0,0,0);\r\n\t\t\tcontext.flush();\r\n\t\t\ttarget.end();\r\n\t\t\tBaseShader.activeShader=null;\r\n\t\t\tRenderState2D.worldAlpha=preAlpha;\r\n\t\t\tRenderState2D.worldMatrix4=preMatrix4;\r\n\t\t\tRenderState2D.worldMatrix=preMatrix;\r\n\t\t\tRenderState2D.worldFilters=preFilters;\r\n\t\t\tRenderState2D.worldShaderDefines=preShaderDefines;\r\n\t\t\tRenderState2D.worldScissorTest=worldScissorTest\r\n\t\t\tif (worldScissorTest){\r\n\t\t\t\tvar y=RenderState2D.height-preworldClipRect.y-preworldClipRect.height;\r\n\t\t\t\tWebGL.mainContext.scissor(preworldClipRect.x,y,preworldClipRect.width,preworldClipRect.height);\r\n\t\t\t\tWebGL.mainContext.enable(0x0C11);\r\n\t\t\t}\r\n\t\t\tRenderState2D.worldClipRect=preworldClipRect;\r\n\t\t}\r\n\r\n\t\t__proto.flush=function(context){\r\n\t\t\tif (this.repaint){\r\n\t\t\t\tthis._flushToTarget(context,this.oneTargets.target);\r\n\t\t\t\tthis.repaint=false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__proto.drawTo=function(context,x,y,width,height){\r\n\t\t\tcontext.drawTexture(this.oneTargets.target.getTexture(),x,y,width,height,0,0);\r\n\t\t}\r\n\r\n\t\t__proto.destroy=function(){\r\n\t\t\tif (this.oneTargets){\r\n\t\t\t\tthis.oneTargets.target.destroy();\r\n\t\t\t\tthis.oneTargets.target=null;\r\n\t\t\t\tthis.oneTargets=null;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__static(RenderTargetMAX,\r\n\t\t['_matrixDefault',function(){return this._matrixDefault=new Matrix();}\r\n\t\t]);\r\n\t\tRenderTargetMAX.__init$=function(){\r\n\t\t\t//class OneTarget\r\n\t\t\tOneTarget=(function(){\r\n\t\t\t\tfunction OneTarget(w,h){\r\n\t\t\t\t\t//this.x=NaN;\r\n\t\t\t\t\t//this.width=NaN;\r\n\t\t\t\t\t//this.height=NaN;\r\n\t\t\t\t\t//this.target=null;\r\n\t\t\t\t\tthis.width=w;\r\n\t\t\t\t\tthis.height=h;\r\n\t\t\t\t\tthis.target=RenderTarget2D.create(w,h);\r\n\t\t\t\t}\r\n\t\t\t\t__class(OneTarget,'');\r\n\t\t\t\treturn OneTarget;\r\n\t\t\t})()\r\n\t\t}\r\n\r\n\t\treturn RenderTargetMAX;\r\n\t})()\r\n\r\n\r\n\t//class laya.webgl.shader.d2.Shader2D\r\n\tvar Shader2D=(function(){\r\n\t\tfunction Shader2D(){\r\n\t\t\tthis.ALPHA=1;\r\n\t\t\t//this.glTexture=null;\r\n\t\t\t//this.shader=null;\r\n\t\t\t//this.filters=null;\r\n\t\t\tthis.shaderType=0;\r\n\t\t\t//this.colorAdd=null;\r\n\t\t\t//this.strokeStyle=null;\r\n\t\t\t//this.fillStyle=null;\r\n\t\t\tthis.defines=new ShaderDefines2D();\r\n\t\t}\r\n\r\n\t\t__class(Shader2D,'laya.webgl.shader.d2.Shader2D');\r\n\t\tShader2D.__init__=function(){\r\n\t\t\tShader.addInclude(\"parts/ColorFilter_ps_uniform.glsl\",\"uniform vec4 colorAlpha;\\nuniform mat4 colorMat;\");\r\n\t\t\tShader.addInclude(\"parts/ColorFilter_ps_logic.glsl\",\"gl_FragColor = gl_FragColor * colorMat + colorAlpha/255.0;\");\r\n\t\t\tShader.addInclude(\"parts/GlowFilter_ps_uniform.glsl\",\"uniform vec4 u_color;\\nuniform float u_strength;\\nuniform float u_blurX;\\nuniform float u_blurY;\\nuniform float u_offsetX;\\nuniform float u_offsetY;\\nuniform float u_textW;\\nuniform float u_textH;\");\r\n\t\t\tShader.addInclude(\"parts/GlowFilter_ps_logic.glsl\",\"const float c_IterationTime = 10.0;\\nfloat floatIterationTotalTime = c_IterationTime * c_IterationTime;\\nvec4 vec4Color = vec4(0.0,0.0,0.0,0.0);\\nvec2 vec2FilterDir = vec2(-(u_offsetX)/u_textW,-(u_offsetY)/u_textH);\\nvec2 vec2FilterOff = vec2(u_blurX/u_textW/c_IterationTime * 2.0,u_blurY/u_textH/c_IterationTime * 2.0);\\nfloat maxNum = u_blurX * u_blurY;\\nvec2 vec2Off = vec2(0.0,0.0);\\nfloat floatOff = c_IterationTime/2.0;\\nfor(float i = 0.0;i<=c_IterationTime; ++i){\\n\tfor(float j = 0.0;j<=c_IterationTime; ++j){\\n\t\tvec2Off = vec2(vec2FilterOff.x * (i - floatOff),vec2FilterOff.y * (j - floatOff));\\n\t\tvec4Color += texture2D(texture, v_texcoord + vec2FilterDir + vec2Off)/floatIterationTotalTime;\\n\t}\\n}\\ngl_FragColor = vec4(u_color.rgb,vec4Color.a * u_strength);\");\r\n\t\t\tShader.addInclude(\"parts/BlurFilter_ps_logic.glsl\",\"gl_FragColor=vec4(0.0);\\ngl_FragColor += texture2D(texture, vBlurTexCoords[ 0])*0.004431848411938341;\\ngl_FragColor += texture2D(texture, vBlurTexCoords[ 1])*0.05399096651318985;\\ngl_FragColor += texture2D(texture, vBlurTexCoords[ 2])*0.2419707245191454;\\ngl_FragColor += texture2D(texture, v_texcoord        )*0.3989422804014327;\\ngl_FragColor += texture2D(texture, vBlurTexCoords[ 3])*0.2419707245191454;\\ngl_FragColor += texture2D(texture, vBlurTexCoords[ 4])*0.05399096651318985;\\ngl_FragColor += texture2D(texture, vBlurTexCoords[ 5])*0.004431848411938341;\");\r\n\t\t\tShader.addInclude(\"parts/BlurFilter_ps_uniform.glsl\",\"varying vec2 vBlurTexCoords[6];\");\r\n\t\t\tShader.addInclude(\"parts/BlurFilter_vs_uniform.glsl\",\"uniform float strength;\\nvarying vec2 vBlurTexCoords[6];\");\r\n\t\t\tShader.addInclude(\"parts/BlurFilter_vs_logic.glsl\",\"\\nvBlurTexCoords[ 0] = v_texcoord + vec2(-0.012 * strength, 0.0);\\nvBlurTexCoords[ 1] = v_texcoord + vec2(-0.008 * strength, 0.0);\\nvBlurTexCoords[ 2] = v_texcoord + vec2(-0.004 * strength, 0.0);\\nvBlurTexCoords[ 3] = v_texcoord + vec2( 0.004 * strength, 0.0);\\nvBlurTexCoords[ 4] = v_texcoord + vec2( 0.008 * strength, 0.0);\\nvBlurTexCoords[ 5] = v_texcoord + vec2( 0.012 * strength, 0.0);\");\r\n\t\t\tShader.addInclude(\"parts/ColorAdd_ps_uniform.glsl\",\"uniform vec4 colorAdd;\\n\");\r\n\t\t\tShader.addInclude(\"parts/ColorAdd_ps_logic.glsl\",\"gl_FragColor = vec4(colorAdd.rgb,colorAdd.a*gl_FragColor.a);\");\r\n\t\t\tvar vs,ps;\r\n\t\t\tvs=\"attribute vec4 position;\\nattribute vec2 texcoord;\\nuniform vec2 size;\\n\\n#ifdef WORLDMAT\\nuniform mat4 mmat;\\n#endif\\nvarying vec2 v_texcoord;\\n\\n#include?BLUR_FILTER  \\\"parts/BlurFilter_vs_uniform.glsl\\\";\\nvoid main() {\\n  #ifdef WORLDMAT\\n  vec4 pos=mmat*position;\\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\\n  #else\\n  gl_Position =vec4((position.x/size.x-0.5)*2.0,(0.5-position.y/size.y)*2.0,position.z,1.0);\\n  #endif\\n  \\n  v_texcoord = texcoord;\\n  #include?BLUR_FILTER  \\\"parts/BlurFilter_vs_logic.glsl\\\";\\n}\";\r\n\t\t\tps=\"precision mediump float;\\n//precision highp float;\\nvarying vec2 v_texcoord;\\nuniform sampler2D texture;\\nuniform float alpha;\\n#include?BLUR_FILTER  \\\"parts/BlurFilter_ps_uniform.glsl\\\";\\n#include?COLOR_FILTER \\\"parts/ColorFilter_ps_uniform.glsl\\\";\\n#include?GLOW_FILTER \\\"parts/GlowFilter_ps_uniform.glsl\\\";\\n#include?COLOR_ADD \\\"parts/ColorAdd_ps_uniform.glsl\\\";\\n\\nvoid main() {\\n   vec4 color= texture2D(texture, v_texcoord);\\n   color.a*=alpha;\\n   gl_FragColor=color;\\n   #include?COLOR_ADD \\\"parts/ColorAdd_ps_logic.glsl\\\";   \\n   #include?BLUR_FILTER  \\\"parts/BlurFilter_ps_logic.glsl\\\";\\n   #include?COLOR_FILTER \\\"parts/ColorFilter_ps_logic.glsl\\\";\\n   #include?GLOW_FILTER \\\"parts/GlowFilter_ps_logic.glsl\\\";\\n}\";\r\n\t\t\tShader.preCompile2D(0,0x01,vs,ps,null);\r\n\t\t\tvs=\"attribute vec4 position;\\nuniform vec2 size;\\nuniform mat4 mmat;\\nvoid main() {\\n  vec4 pos=mmat*position;\\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\\n}\";\r\n\t\t\tps=\"precision mediump float;\\nuniform vec4 color;\\nuniform float alpha;\\n#include?COLOR_FILTER \\\"parts/ColorFilter_ps_uniform.glsl\\\";\\nvoid main() {\\n\tvec4 a = vec4(color.r, color.g, color.b, color.a);\\n\ta.w = alpha;\\n\tgl_FragColor = a;\\n\t#include?COLOR_FILTER \\\"parts/ColorFilter_ps_logic.glsl\\\";\\n}\";\r\n\t\t\tShader.preCompile2D(0,0x02,vs,ps,null);\r\n\t\t\tvs=\"attribute vec4 position;\\nattribute vec3 a_color;\\nuniform mat4 mmat;\\nuniform mat4 u_mmat2;\\nuniform vec2 u_pos;\\nuniform vec2 size;\\nvarying vec3 color;\\nvoid main(){\\n  vec4 tPos = vec4(position.x + u_pos.x,position.y + u_pos.y,position.z,position.w);\\n  vec4 pos=mmat*u_mmat2*tPos;\\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\\n  color=a_color;\\n}\";\r\n\t\t\tps=\"precision mediump float;\\n//precision mediump float;\\nvarying vec3 color;\\nuniform float alpha;\\nvoid main(){\\n\t//vec4 a=vec4(color.r, color.g, color.b, 1);\\n\t//a.a*=alpha;\\n    gl_FragColor=vec4(color.r, color.g, color.b, alpha);\\n}\";\r\n\t\t\tShader.preCompile2D(0,0x04,vs,ps,null);\r\n\t\t\tvs=\"attribute vec4 position;\\nattribute vec2 texcoord;\\nuniform vec2 size;\\n\\n#ifdef WORLDMAT\\nuniform mat4 mmat;\\n#endif\\nvarying vec2 v_texcoord;\\n\\n#include?BLUR_FILTER  \\\"parts/BlurFilter_vs_uniform.glsl\\\";\\nvoid main() {\\n  #ifdef WORLDMAT\\n  vec4 pos=mmat*position;\\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\\n  #else\\n  gl_Position =vec4((position.x/size.x-0.5)*2.0,(0.5-position.y/size.y)*2.0,position.z,1.0);\\n  #endif\\n  \\n  v_texcoord = texcoord;\\n  #include?BLUR_FILTER  \\\"parts/BlurFilter_vs_logic.glsl\\\";\\n}\";\r\n\t\t\tps=\"precision mediump float;\\n//precision highp float;\\nvarying vec2 v_texcoord;\\nuniform sampler2D texture;\\nuniform float alpha;\\nuniform vec4 u_TexRange;\\nuniform vec2 u_offset;\\n#include?BLUR_FILTER  \\\"parts/BlurFilter_ps_uniform.glsl\\\";\\n#include?COLOR_FILTER \\\"parts/ColorFilter_ps_uniform.glsl\\\";\\n#include?GLOW_FILTER \\\"parts/GlowFilter_ps_uniform.glsl\\\";\\n#include?COLOR_ADD \\\"parts/ColorAdd_ps_uniform.glsl\\\";\\n\\nvoid main() {\\n   vec2 newTexCoord;\\n   newTexCoord.x = mod(u_offset.x + v_texcoord.x,u_TexRange.y) + u_TexRange.x;\\n   newTexCoord.y = mod(u_offset.y + v_texcoord.y,u_TexRange.w) + u_TexRange.z;\\n   vec4 color= texture2D(texture, newTexCoord);\\n   color.a*=alpha;\\n   gl_FragColor=color;\\n   #include?COLOR_ADD \\\"parts/ColorAdd_ps_logic.glsl\\\";   \\n   #include?BLUR_FILTER  \\\"parts/BlurFilter_ps_logic.glsl\\\";\\n   #include?COLOR_FILTER \\\"parts/ColorFilter_ps_logic.glsl\\\";\\n   #include?GLOW_FILTER \\\"parts/GlowFilter_ps_logic.glsl\\\";\\n}\";\r\n\t\t\tShader.preCompile2D(0,0x100,vs,ps,null);\r\n\t\t\tvs=\"attribute vec2 position;\\nattribute vec2 texcoord;\\nattribute vec4 color;\\nuniform vec2 size;\\nuniform float offsetX;\\nuniform float offsetY;\\nuniform mat4 mmat;\\nuniform mat4 u_mmat2;\\nvarying vec2 v_texcoord;\\nvarying vec4 v_color;\\nvoid main() {\\n  vec4 pos=mmat*u_mmat2*vec4(offsetX+position.x,offsetY+position.y,0,1 );\\n  gl_Position = vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\\n  v_color = color;\\n  v_texcoord = texcoord;  \\n}\";\r\n\t\t\tps=\"precision mediump float;\\nvarying vec2 v_texcoord;\\nvarying vec4 v_color;\\nuniform sampler2D texture;\\nuniform float alpha;\\nvoid main() {\\n\tvec4 t_color = texture2D(texture, v_texcoord);\\n\tgl_FragColor = t_color.rgba * v_color;\\n\tgl_FragColor.a = gl_FragColor.a * alpha;\\n}\";\r\n\t\t\tShader.preCompile2D(0,0x200,vs,ps,null);\r\n\t\t}\r\n\r\n\t\treturn Shader2D;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*这里销毁的问题，后面待确认\r\n\t*/\r\n\t//class laya.webgl.shader.d2.skinAnishader.SkinMesh\r\n\tvar SkinMesh=(function(){\r\n\t\tfunction SkinMesh(){\r\n\t\t\tthis.mVBBuffer=null;\r\n\t\t\tthis.mIBBuffer=null;\r\n\t\t\tthis.mVBData=null;\r\n\t\t\tthis.mIBData=null;\r\n\t\t\tthis.mEleNum=0;\r\n\t\t\tthis.mTexture=null;\r\n\t\t\tthis.transform=null;\r\n\t\t\tthis._vs=null;\r\n\t\t\tthis._ps=null;\r\n\t\t\tthis._indexStart=-1;\r\n\t\t\tthis._verticles=null;\r\n\t\t\tthis._uvs=null;\r\n\t\t\tthis._tempMat16=RenderState2D.getMatrArray();\r\n\t\t}\r\n\r\n\t\t__class(SkinMesh,'laya.webgl.shader.d2.skinAnishader.SkinMesh');\r\n\t\tvar __proto=SkinMesh.prototype;\r\n\t\t__proto.init=function(texture,vs,ps){\r\n\t\t\tif (vs){\r\n\t\t\t\tthis._vs=vs;\r\n\t\t\t\t}else {\r\n\t\t\t\tthis._vs=[];\r\n\t\t\t\tvar tWidth=texture.width;\r\n\t\t\t\tvar tHeight=texture.height;\r\n\t\t\t\tvar tRed=1;\r\n\t\t\t\tvar tGreed=1;\r\n\t\t\t\tvar tBlue=1;\r\n\t\t\t\tvar tAlpha=1;\r\n\t\t\t\tthis._vs.push(0,0,0,0,tRed,tGreed,tBlue,tAlpha);\r\n\t\t\t\tthis._vs.push(tWidth,0,1,0,tRed,tGreed,tBlue,tAlpha);\r\n\t\t\t\tthis._vs.push(tWidth,tHeight,1,1,tRed,tGreed,tBlue,tAlpha);\r\n\t\t\t\tthis._vs.push(0,tHeight,0,1,tRed,tGreed,tBlue,tAlpha);\r\n\t\t\t}\r\n\t\t\tif (ps){\r\n\t\t\t\tthis._ps=ps;\r\n\t\t\t\t}else {\r\n\t\t\t\tif (!SkinMesh._defaultPS){\r\n\t\t\t\t\tSkinMesh._defaultPS=[];\r\n\t\t\t\t\tSkinMesh._defaultPS.push(0,1,3,3,1,2);\r\n\t\t\t\t}\r\n\t\t\t\tthis._ps=SkinMesh._defaultPS;\r\n\t\t\t}\r\n\t\t\tthis.mVBData=new Float32Array(this._vs);\r\n\t\t\tthis.mIBData=new Uint16Array(this._ps.length);\r\n\t\t\tthis.mIBData[\"start\"]=-1;\r\n\t\t\tthis.mEleNum=this._ps.length;\r\n\t\t\tthis.mTexture=texture;\r\n\t\t}\r\n\r\n\t\t__proto.init2=function(texture,vs,ps,verticles,uvs){\r\n\t\t\tif (ps){\r\n\t\t\t\tthis._ps=ps;\r\n\t\t\t\t}else {\r\n\t\t\t\tthis._ps=[];\r\n\t\t\t\tthis._ps.push(0,1,3,3,1,2);\r\n\t\t\t}\r\n\t\t\tthis._verticles=verticles;\r\n\t\t\tthis._uvs=uvs;\r\n\t\t\tthis.mEleNum=this._ps.length;\r\n\t\t\tthis.mTexture=texture;\r\n\t\t\tif (Render.isConchNode || Render.isConchApp){\r\n\t\t\t\tthis._initMyData();\r\n\t\t\t\tthis.mVBData=new Float32Array(this._vs);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__proto._initMyData=function(){\r\n\t\t\tvar vsI=0;\r\n\t\t\tvar vI=0;\r\n\t\t\tvar vLen=this._verticles.length;\r\n\t\t\tvar tempVLen=vLen *4;\r\n\t\t\tthis._vs=SkinMesh._tempVS;\r\n\t\t\tvar insertNew=false;\r\n\t\t\tif (Render.isConchNode || Render.isConchApp){\r\n\t\t\t\tthis._vs.length=tempVLen;\r\n\t\t\t\tinsertNew=true;\r\n\t\t\t\t}else{\r\n\t\t\t\tif (this._vs.length < tempVLen){\r\n\t\t\t\t\tthis._vs.length=tempVLen;\r\n\t\t\t\t\tinsertNew=true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tSkinMesh._tVSLen=tempVLen;\r\n\t\t\tif (insertNew){\r\n\t\t\t\twhile (vsI < tempVLen){\r\n\t\t\t\t\tthis._vs[vsI]=this._verticles[vI];\r\n\t\t\t\t\tthis._vs[vsI+1]=this._verticles[vI+1];\r\n\t\t\t\t\tthis._vs[vsI+2]=this._uvs[vI];\r\n\t\t\t\t\tthis._vs[vsI+3]=this._uvs[vI+1];\r\n\t\t\t\t\tthis._vs[vsI+4]=1;\r\n\t\t\t\t\tthis._vs[vsI+5]=1;\r\n\t\t\t\t\tthis._vs[vsI+6]=1;\r\n\t\t\t\t\tthis._vs[vsI+7]=1;\r\n\t\t\t\t\tvsI+=8;\r\n\t\t\t\t\tvI+=2;\r\n\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\twhile (vsI < tempVLen){\r\n\t\t\t\t\tthis._vs[vsI]=this._verticles[vI];\r\n\t\t\t\t\tthis._vs[vsI+1]=this._verticles[vI+1];\r\n\t\t\t\t\tthis._vs[vsI+2]=this._uvs[vI];\r\n\t\t\t\t\tthis._vs[vsI+3]=this._uvs[vI+1];\r\n\t\t\t\t\tvsI+=8;\r\n\t\t\t\t\tvI+=2;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__proto.getData2=function(vb,ib,start){\r\n\t\t\tthis.mVBBuffer=vb;\r\n\t\t\tthis.mIBBuffer=ib;\r\n\t\t\tthis._initMyData();\r\n\t\t\tvb.appendEx2(this._vs,Float32Array,SkinMesh._tVSLen,4);\r\n\t\t\tthis._indexStart=ib.byteLength;\r\n\t\t\tvar tIB;\r\n\t\t\ttIB=SkinMesh._tempIB;\r\n\t\t\tif (tIB.length < this._ps.length){\r\n\t\t\t\ttIB.length=this._ps.length;\r\n\t\t\t}\r\n\t\t\tfor (var i=0,n=this._ps.length;i < n;i++){\r\n\t\t\t\ttIB[i]=this._ps[i]+start;\r\n\t\t\t}\r\n\t\t\tib.appendEx2(tIB,Uint16Array,this._ps.length,2);\r\n\t\t}\r\n\r\n\t\t__proto.getData=function(vb,ib,start){\r\n\t\t\tthis.mVBBuffer=vb;\r\n\t\t\tthis.mIBBuffer=ib;\r\n\t\t\tvb.append(this.mVBData);\r\n\t\t\tthis._indexStart=ib.byteLength;\r\n\t\t\tif (this.mIBData[\"start\"] !=start){\r\n\t\t\t\tfor (var i=0,n=this._ps.length;i < n;i++){\r\n\t\t\t\t\tthis.mIBData[i]=this._ps[i]+start;\r\n\t\t\t\t}\r\n\t\t\t\tthis.mIBData[\"start\"]=start;\r\n\t\t\t}\r\n\t\t\tib.append(this.mIBData);\r\n\t\t}\r\n\r\n\t\t__proto.render=function(context,x,y){\r\n\t\t\tif (Render.isWebGL && this.mTexture){\r\n\t\t\t\tcontext._renderKey=0;\r\n\t\t\t\tcontext._shader2D.glTexture=null;\r\n\t\t\t\tSkinMeshBuffer.getInstance().addSkinMesh(this);\r\n\t\t\t\tvar tempSubmit=Submit.createShape(context,this.mIBBuffer,this.mVBBuffer,this.mEleNum,this._indexStart,Value2D.create(0x200,0));\r\n\t\t\t\tthis.transform || (this.transform=Matrix.EMPTY);\r\n\t\t\t\tthis.transform.translate(x,y);\r\n\t\t\t\tMatrix.mul16(this.transform,context._curMat,this._tempMat16);\r\n\t\t\t\tthis.transform.translate(-x,-y);\r\n\t\t\t\tvar tShaderValue=tempSubmit.shaderValue;\r\n\t\t\t\ttShaderValue.textureHost=this.mTexture;\r\n\t\t\t\ttShaderValue.offsetX=0;\r\n\t\t\t\ttShaderValue.offsetY=0;\r\n\t\t\t\ttShaderValue.u_mmat2=this._tempMat16;\r\n\t\t\t\ttShaderValue.ALPHA=context._shader2D.ALPHA;\r\n\t\t\t\tcontext._submits[context._submits._length++]=tempSubmit;\r\n\t\t\t}\r\n\t\t\telse if (Render.isConchApp&&this.mTexture){\r\n\t\t\t\tthis.transform || (this.transform=Matrix.EMPTY);\r\n\t\t\t\tcontext.setSkinMesh&&context.setSkinMesh(x,y,this._ps,this.mVBData,this.mEleNum,0,this.mTexture,this.transform);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tSkinMesh._tempVS=[];\r\n\t\tSkinMesh._tempIB=[];\r\n\t\tSkinMesh._defaultPS=null\r\n\t\tSkinMesh._tVSLen=0;\r\n\t\treturn SkinMesh;\r\n\t})()\r\n\r\n\r\n\t//class laya.webgl.shader.d2.skinAnishader.SkinMeshBuffer\r\n\tvar SkinMeshBuffer=(function(){\r\n\t\tfunction SkinMeshBuffer(){\r\n\t\t\tthis.ib=null;\r\n\t\t\tthis.vb=null;\r\n\t\t\tvar gl=WebGL.mainContext;\r\n\t\t\tthis.ib=IndexBuffer2D.create(0x88E8);\r\n\t\t\tthis.vb=VertexBuffer2D.create(8);\r\n\t\t}\r\n\r\n\t\t__class(SkinMeshBuffer,'laya.webgl.shader.d2.skinAnishader.SkinMeshBuffer');\r\n\t\tvar __proto=SkinMeshBuffer.prototype;\r\n\t\t__proto.addSkinMesh=function(skinMesh){\r\n\t\t\tskinMesh.getData2(this.vb,this.ib,this.vb.byteLength / 32);\r\n\t\t}\r\n\r\n\t\t__proto.reset=function(){\r\n\t\t\tthis.vb.clear();\r\n\t\t\tthis.ib.clear();\r\n\t\t}\r\n\r\n\t\tSkinMeshBuffer.getInstance=function(){\r\n\t\t\treturn SkinMeshBuffer.instance=SkinMeshBuffer.instance|| new SkinMeshBuffer();\r\n\t\t}\r\n\r\n\t\tSkinMeshBuffer.instance=null\r\n\t\treturn SkinMeshBuffer;\r\n\t})()\r\n\r\n\r\n\t//此类可以减少代码\r\n\t//class laya.webgl.shapes.BasePoly\r\n\tvar BasePoly=(function(){\r\n\t\tfunction BasePoly(x,y,width,height,edges,color,borderWidth,borderColor,round){\r\n\t\t\t//this.x=NaN;\r\n\t\t\t//this.y=NaN;\r\n\t\t\t//this.r=NaN;\r\n\t\t\t//this.width=NaN;\r\n\t\t\t//this.height=NaN;\r\n\t\t\t//this.edges=NaN;\r\n\t\t\tthis.r0=0\r\n\t\t\t//this.color=0;\r\n\t\t\t//this.borderColor=NaN;\r\n\t\t\t//this.borderWidth=NaN;\r\n\t\t\t//this.round=0;\r\n\t\t\tthis.fill=true;\r\n\t\t\t//this.mUint16Array=null;\r\n\t\t\t//this.mFloat32Array=null;\r\n\t\t\tthis.r1=Math.PI / 2;\r\n\t\t\t(round===void 0)&& (round=0);\r\n\t\t\tthis.x=x;\r\n\t\t\tthis.y=y;\r\n\t\t\tthis.width=width;\r\n\t\t\tthis.height=height;\r\n\t\t\tthis.edges=edges;\r\n\t\t\tthis.color=color;\r\n\t\t\tthis.borderWidth=borderWidth;\r\n\t\t\tthis.borderColor=borderColor;\r\n\t\t}\r\n\r\n\t\t__class(BasePoly,'laya.webgl.shapes.BasePoly');\r\n\t\tvar __proto=BasePoly.prototype;\r\n\t\tLaya.imps(__proto,{\"laya.webgl.shapes.IShape\":true})\r\n\t\t__proto.getData=function(ib,vb,start){}\r\n\t\t__proto.rebuild=function(points){}\r\n\t\t__proto.setMatrix=function(mat){}\r\n\t\t__proto.needUpdate=function(mat){\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\t__proto.sector=function(outVert,outIndex,start){\r\n\t\t\tvar x=this.x,y=this.y,edges=this.edges,seg=(this.r1-this.r0)/ edges;\r\n\t\t\tvar w=this.width,h=this.height,color=this.color;\r\n\t\t\tvar r=((color >> 16)& 0x0000ff)/ 255,g=((color >> 8)& 0xff)/ 255,b=(color & 0x0000ff)/ 255;\r\n\t\t\toutVert.push(x,y,r,g,b);\r\n\t\t\tfor (var i=0;i < edges+1;i++){\r\n\t\t\t\toutVert.push(x+Math.sin(seg *i+this.r0)*w,y+Math.cos(seg *i+this.r0)*h);\r\n\t\t\t\toutVert.push(r,g,b);\r\n\t\t\t}\r\n\t\t\tfor (i=0;i < edges;i++){\r\n\t\t\t\toutIndex.push(start,start+i+1,start+i+2);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//用于画线\r\n\t\t__proto.createLine2=function(p,indices,lineWidth,len,outVertex,indexCount){\r\n\t\t\tvar points=p.concat();\r\n\t\t\tvar result=outVertex;\r\n\t\t\tvar color=this.borderColor;\r\n\t\t\tvar r=((color >> 16)& 0x0000ff)/ 255,g=((color >> 8)& 0xff)/ 255,b=(color & 0x0000ff)/ 255;\r\n\t\t\tvar length=points.length / 2;\r\n\t\t\tvar iStart=len,w=lineWidth / 2;\r\n\t\t\tvar px,py,p1x,p1y,p2x,p2y,p3x,p3y;\r\n\t\t\tvar perpx,perpy,perp2x,perp2y,perp3x,perp3y;\r\n\t\t\tvar a1,b1,c1,a2,b2,c2;\r\n\t\t\tvar denom,pdist,dist;\r\n\t\t\tp1x=points[0];\r\n\t\t\tp1y=points[1];\r\n\t\t\tp2x=points[2];\r\n\t\t\tp2y=points[3];\r\n\t\t\tperpx=-(p1y-p2y);\r\n\t\t\tperpy=p1x-p2x;\r\n\t\t\tdist=Math.sqrt(perpx *perpx+perpy *perpy);\r\n\t\t\tperpx=perpx / dist *w;\r\n\t\t\tperpy=perpy / dist *w;\r\n\t\t\tresult.push(p1x-perpx+this.x,p1y-perpy+this.y,r,g,b,p1x+perpx+this.x,p1y+perpy+this.y,r,g,b);\r\n\t\t\tfor (var i=1;i < length-1;i++){\r\n\t\t\t\tp1x=points[(i-1)*2];\r\n\t\t\t\tp1y=points[(i-1)*2+1];\r\n\t\t\t\tp2x=points[(i)*2];\r\n\t\t\t\tp2y=points[(i)*2+1];\r\n\t\t\t\tp3x=points[(i+1)*2];\r\n\t\t\t\tp3y=points[(i+1)*2+1];\r\n\t\t\t\tperpx=-(p1y-p2y);\r\n\t\t\t\tperpy=p1x-p2x;\r\n\t\t\t\tdist=Math.sqrt(perpx *perpx+perpy *perpy);\r\n\t\t\t\tperpx=perpx / dist *w;\r\n\t\t\t\tperpy=perpy / dist *w;\r\n\t\t\t\tperp2x=-(p2y-p3y);\r\n\t\t\t\tperp2y=p2x-p3x;\r\n\t\t\t\tdist=Math.sqrt(perp2x *perp2x+perp2y *perp2y);\r\n\t\t\t\tperp2x=perp2x / dist *w;\r\n\t\t\t\tperp2y=perp2y / dist *w;\r\n\t\t\t\ta1=(-perpy+p1y)-(-perpy+p2y);\r\n\t\t\t\tb1=(-perpx+p2x)-(-perpx+p1x);\r\n\t\t\t\tc1=(-perpx+p1x)*(-perpy+p2y)-(-perpx+p2x)*(-perpy+p1y);\r\n\t\t\t\ta2=(-perp2y+p3y)-(-perp2y+p2y);\r\n\t\t\t\tb2=(-perp2x+p2x)-(-perp2x+p3x);\r\n\t\t\t\tc2=(-perp2x+p3x)*(-perp2y+p2y)-(-perp2x+p2x)*(-perp2y+p3y);\r\n\t\t\t\tdenom=a1 *b2-a2 *b1;\r\n\t\t\t\tif (Math.abs(denom)< 0.1){\r\n\t\t\t\t\tdenom+=10.1;\r\n\t\t\t\t\tresult.push(p2x-perpx+this.x,p2y-perpy+this.y,r,g,b,p2x+perpx+this.x,p2y+perpy+this.y,r,g,b);\r\n\t\t\t\t\tcontinue ;\r\n\t\t\t\t}\r\n\t\t\t\tpx=(b1 *c2-b2 *c1)/ denom;\r\n\t\t\t\tpy=(a2 *c1-a1 *c2)/ denom;\r\n\t\t\t\tpdist=(px-p2x)*(px-p2x)+(py-p2y)+(py-p2y);\r\n\t\t\t\tresult.push(px+this.x,py+this.y,r,g,b,p2x-(px-p2x)+this.x,p2y-(py-p2y)+this.y,r,g,b);\r\n\t\t\t}\r\n\t\t\tp1x=points[points.length-4];\r\n\t\t\tp1y=points[points.length-3];\r\n\t\t\tp2x=points[points.length-2];\r\n\t\t\tp2y=points[points.length-1];\r\n\t\t\tperpx=-(p1y-p2y);\r\n\t\t\tperpy=p1x-p2x;\r\n\t\t\tdist=Math.sqrt(perpx *perpx+perpy *perpy);\r\n\t\t\tperpx=perpx / dist *w;\r\n\t\t\tperpy=perpy / dist *w;\r\n\t\t\tresult.push(p2x-perpx+this.x,p2y-perpy+this.y,r,g,b,p2x+perpx+this.x,p2y+perpy+this.y,r,g,b);\r\n\t\t\tvar groupLen=indexCount;\r\n\t\t\tfor (i=1;i < groupLen;i++){\r\n\t\t\t\tindices.push(iStart+(i-1)*2,iStart+(i-1)*2+1,iStart+i *2+1,iStart+i *2+1,iStart+i *2,iStart+(i-1)*2);\r\n\t\t\t}\r\n\t\t\treturn result;\r\n\t\t}\r\n\r\n\t\t//用于比如 扇形 不带两直线\r\n\t\t__proto.createLine=function(p,indices,lineWidth,len){\r\n\t\t\tvar points=p.concat();\r\n\t\t\tvar result=p;\r\n\t\t\tvar color=this.borderColor;\r\n\t\t\tvar r=((color >> 16)& 0x0000ff)/ 255,g=((color >> 8)& 0xff)/ 255,b=(color & 0x0000ff)/ 255;\r\n\t\t\tpoints.splice(0,5);\r\n\t\t\tvar length=points.length / 5;\r\n\t\t\tvar iStart=len,w=lineWidth / 2;\r\n\t\t\tvar px,py,p1x,p1y,p2x,p2y,p3x,p3y;\r\n\t\t\tvar perpx,perpy,perp2x,perp2y,perp3x,perp3y;\r\n\t\t\tvar a1,b1,c1,a2,b2,c2;\r\n\t\t\tvar denom,pdist,dist;\r\n\t\t\tp1x=points[0];\r\n\t\t\tp1y=points[1];\r\n\t\t\tp2x=points[5];\r\n\t\t\tp2y=points[6];\r\n\t\t\tperpx=-(p1y-p2y);\r\n\t\t\tperpy=p1x-p2x;\r\n\t\t\tdist=Math.sqrt(perpx *perpx+perpy *perpy);\r\n\t\t\tperpx=perpx / dist *w;\r\n\t\t\tperpy=perpy / dist *w;\r\n\t\t\tresult.push(p1x-perpx,p1y-perpy,r,g,b,p1x+perpx,p1y+perpy,r,g,b);\r\n\t\t\tfor (var i=1;i < length-1;i++){\r\n\t\t\t\tp1x=points[(i-1)*5];\r\n\t\t\t\tp1y=points[(i-1)*5+1];\r\n\t\t\t\tp2x=points[(i)*5];\r\n\t\t\t\tp2y=points[(i)*5+1];\r\n\t\t\t\tp3x=points[(i+1)*5];\r\n\t\t\t\tp3y=points[(i+1)*5+1];\r\n\t\t\t\tperpx=-(p1y-p2y);\r\n\t\t\t\tperpy=p1x-p2x;\r\n\t\t\t\tdist=Math.sqrt(perpx *perpx+perpy *perpy);\r\n\t\t\t\tperpx=perpx / dist *w;\r\n\t\t\t\tperpy=perpy / dist *w;\r\n\t\t\t\tperp2x=-(p2y-p3y);\r\n\t\t\t\tperp2y=p2x-p3x;\r\n\t\t\t\tdist=Math.sqrt(perp2x *perp2x+perp2y *perp2y);\r\n\t\t\t\tperp2x=perp2x / dist *w;\r\n\t\t\t\tperp2y=perp2y / dist *w;\r\n\t\t\t\ta1=(-perpy+p1y)-(-perpy+p2y);\r\n\t\t\t\tb1=(-perpx+p2x)-(-perpx+p1x);\r\n\t\t\t\tc1=(-perpx+p1x)*(-perpy+p2y)-(-perpx+p2x)*(-perpy+p1y);\r\n\t\t\t\ta2=(-perp2y+p3y)-(-perp2y+p2y);\r\n\t\t\t\tb2=(-perp2x+p2x)-(-perp2x+p3x);\r\n\t\t\t\tc2=(-perp2x+p3x)*(-perp2y+p2y)-(-perp2x+p2x)*(-perp2y+p3y);\r\n\t\t\t\tdenom=a1 *b2-a2 *b1;\r\n\t\t\t\tif (Math.abs(denom)< 0.1){\r\n\t\t\t\t\tdenom+=10.1;\r\n\t\t\t\t\tresult.push(p2x-perpx,p2y-perpy,r,g,b,p2x+perpx,p2y+perpy,r,g,b);\r\n\t\t\t\t\tcontinue ;\r\n\t\t\t\t}\r\n\t\t\t\tpx=(b1 *c2-b2 *c1)/ denom;\r\n\t\t\t\tpy=(a2 *c1-a1 *c2)/ denom;\r\n\t\t\t\tpdist=(px-p2x)*(px-p2x)+(py-p2y)+(py-p2y);\r\n\t\t\t\tresult.push(px,py,r,g,b,p2x-(px-p2x),p2y-(py-p2y),r,g,b);\r\n\t\t\t}\r\n\t\t\tp1x=points[points.length-10];\r\n\t\t\tp1y=points[points.length-9];\r\n\t\t\tp2x=points[points.length-5];\r\n\t\t\tp2y=points[points.length-4];\r\n\t\t\tperpx=-(p1y-p2y);\r\n\t\t\tperpy=p1x-p2x;\r\n\t\t\tdist=Math.sqrt(perpx *perpx+perpy *perpy);\r\n\t\t\tperpx=perpx / dist *w;\r\n\t\t\tperpy=perpy / dist *w;\r\n\t\t\tresult.push(p2x-perpx,p2y-perpy,r,g,b,p2x+perpx,p2y+perpy,r,g,b);\r\n\t\t\tvar groupLen=this.edges+1;\r\n\t\t\tfor (i=1;i < groupLen;i++){\r\n\t\t\t\tindices.push(iStart+(i-1)*2,iStart+(i-1)*2+1,iStart+i *2+1,iStart+i *2+1,iStart+i *2,iStart+(i-1)*2);\r\n\t\t\t}\r\n\t\t\treturn result;\r\n\t\t}\r\n\r\n\t\t//闭合路径\r\n\t\t__proto.createLoopLine=function(p,indices,lineWidth,len,outVertex,outIndex){\r\n\t\t\tvar points=p.concat();\r\n\t\t\tvar result=outVertex ? outVertex :p;\r\n\t\t\tvar color=this.borderColor;\r\n\t\t\tvar r=((color >> 16)& 0x0000ff)/ 255,g=((color >> 8)& 0xff)/ 255,b=(color & 0x0000ff)/ 255;\r\n\t\t\tpoints.splice(0,5);\r\n\t\t\tvar firstPoint=[points[0],points[1]];\r\n\t\t\tvar lastPoint=[points[points.length-5],points[points.length-4]];\r\n\t\t\tvar midPointX=lastPoint[0]+(firstPoint[0]-lastPoint[0])*0.5;\r\n\t\t\tvar midPointY=lastPoint[1]+(firstPoint[1]-lastPoint[1])*0.5;\r\n\t\t\tpoints.unshift(midPointX,midPointY,0,0,0);\r\n\t\t\tpoints.push(midPointX,midPointY,0,0,0);\r\n\t\t\tvar length=points.length / 5;\r\n\t\t\tvar iStart=len,w=lineWidth / 2;\r\n\t\t\tvar px,py,p1x,p1y,p2x,p2y,p3x,p3y;\r\n\t\t\tvar perpx,perpy,perp2x,perp2y,perp3x,perp3y;\r\n\t\t\tvar a1,b1,c1,a2,b2,c2;\r\n\t\t\tvar denom,pdist,dist;\r\n\t\t\tp1x=points[0];\r\n\t\t\tp1y=points[1];\r\n\t\t\tp2x=points[5];\r\n\t\t\tp2y=points[6];\r\n\t\t\tperpx=-(p1y-p2y);\r\n\t\t\tperpy=p1x-p2x;\r\n\t\t\tdist=Math.sqrt(perpx *perpx+perpy *perpy);\r\n\t\t\tperpx=perpx / dist *w;\r\n\t\t\tperpy=perpy / dist *w;\r\n\t\t\tresult.push(p1x-perpx,p1y-perpy,r,g,b,p1x+perpx,p1y+perpy,r,g,b);\r\n\t\t\tfor (var i=1;i < length-1;i++){\r\n\t\t\t\tp1x=points[(i-1)*5];\r\n\t\t\t\tp1y=points[(i-1)*5+1];\r\n\t\t\t\tp2x=points[(i)*5];\r\n\t\t\t\tp2y=points[(i)*5+1];\r\n\t\t\t\tp3x=points[(i+1)*5];\r\n\t\t\t\tp3y=points[(i+1)*5+1];\r\n\t\t\t\tperpx=-(p1y-p2y);\r\n\t\t\t\tperpy=p1x-p2x;\r\n\t\t\t\tdist=Math.sqrt(perpx *perpx+perpy *perpy);\r\n\t\t\t\tperpx=perpx / dist *w;\r\n\t\t\t\tperpy=perpy / dist *w;\r\n\t\t\t\tperp2x=-(p2y-p3y);\r\n\t\t\t\tperp2y=p2x-p3x;\r\n\t\t\t\tdist=Math.sqrt(perp2x *perp2x+perp2y *perp2y);\r\n\t\t\t\tperp2x=perp2x / dist *w;\r\n\t\t\t\tperp2y=perp2y / dist *w;\r\n\t\t\t\ta1=(-perpy+p1y)-(-perpy+p2y);\r\n\t\t\t\tb1=(-perpx+p2x)-(-perpx+p1x);\r\n\t\t\t\tc1=(-perpx+p1x)*(-perpy+p2y)-(-perpx+p2x)*(-perpy+p1y);\r\n\t\t\t\ta2=(-perp2y+p3y)-(-perp2y+p2y);\r\n\t\t\t\tb2=(-perp2x+p2x)-(-perp2x+p3x);\r\n\t\t\t\tc2=(-perp2x+p3x)*(-perp2y+p2y)-(-perp2x+p2x)*(-perp2y+p3y);\r\n\t\t\t\tdenom=a1 *b2-a2 *b1;\r\n\t\t\t\tif (Math.abs(denom)< 0.1){\r\n\t\t\t\t\tdenom+=10.1;\r\n\t\t\t\t\tresult.push(p2x-perpx,p2y-perpy,r,g,b,p2x+perpx,p2y+perpy,r,g,b);\r\n\t\t\t\t\tcontinue ;\r\n\t\t\t\t}\r\n\t\t\t\tpx=(b1 *c2-b2 *c1)/ denom;\r\n\t\t\t\tpy=(a2 *c1-a1 *c2)/ denom;\r\n\t\t\t\tpdist=(px-p2x)*(px-p2x)+(py-p2y)+(py-p2y);\r\n\t\t\t\tresult.push(px,py,r,g,b,p2x-(px-p2x),p2y-(py-p2y),r,g,b);\r\n\t\t\t}\r\n\t\t\tif (outIndex){\r\n\t\t\t\tindices=outIndex;\r\n\t\t\t};\r\n\t\t\tvar groupLen=this.edges+1;\r\n\t\t\tfor (i=1;i < groupLen;i++){\r\n\t\t\t\tindices.push(iStart+(i-1)*2,iStart+(i-1)*2+1,iStart+i *2+1,iStart+i *2+1,iStart+i *2,iStart+(i-1)*2);\r\n\t\t\t}\r\n\t\t\tindices.push(iStart+(i-1)*2,iStart+(i-1)*2+1,iStart+1,iStart+1,iStart,iStart+(i-1)*2);\r\n\t\t\treturn result;\r\n\t\t}\r\n\r\n\t\treturn BasePoly;\r\n\t})()\r\n\r\n\r\n\t//class laya.webgl.submit.Submit\r\n\tvar Submit=(function(){\r\n\t\tfunction Submit(renderType){\r\n\t\t\t//this._selfVb=null;\r\n\t\t\t//this._ib=null;\r\n\t\t\t//this._blendFn=null;\r\n\t\t\t//this._renderType=0;\r\n\t\t\t//this._vb=null;\r\n\t\t\t//this._startIdx=0;\r\n\t\t\t//this._numEle=0;\r\n\t\t\t//this.shaderValue=null;\r\n\t\t\t(renderType===void 0)&& (renderType=10000);\r\n\t\t\tthis._renderType=renderType;\r\n\t\t}\r\n\r\n\t\t__class(Submit,'laya.webgl.submit.Submit');\r\n\t\tvar __proto=Submit.prototype;\r\n\t\tLaya.imps(__proto,{\"laya.webgl.submit.ISubmit\":true})\r\n\t\t__proto.releaseRender=function(){\r\n\t\t\tvar cache=Submit._cache;\r\n\t\t\tcache[cache._length++]=this;\r\n\t\t\tthis.shaderValue.release();\r\n\t\t\tthis._vb=null;\r\n\t\t}\r\n\r\n\t\t__proto.getRenderType=function(){\r\n\t\t\treturn this._renderType;\r\n\t\t}\r\n\r\n\t\t__proto.renderSubmit=function(){\r\n\t\t\tif (this._numEle===0)return 1;\r\n\t\t\tvar _tex=this.shaderValue.textureHost;\r\n\t\t\tif (_tex){\r\n\t\t\t\tvar source=_tex.source;\r\n\t\t\t\tif (!_tex.bitmap || !source)\r\n\t\t\t\t\treturn 1;\r\n\t\t\t\tthis.shaderValue.texture=source;\r\n\t\t\t}\r\n\t\t\tthis._vb.bind_upload(this._ib);\r\n\t\t\tvar gl=WebGL.mainContext;\r\n\t\t\tthis.shaderValue.upload();\r\n\t\t\tif (BlendMode.activeBlendFunction!==this._blendFn){\r\n\t\t\t\tgl.enable(0x0BE2);\r\n\t\t\t\tthis._blendFn(gl);\r\n\t\t\t\tBlendMode.activeBlendFunction=this._blendFn;\r\n\t\t\t}\r\n\t\t\tStat.drawCall++;\r\n\t\t\tStat.trianglesFaces+=this._numEle / 3;\r\n\t\t\tgl.drawElements(0x0004,this._numEle,0x1403,this._startIdx);\r\n\t\t\treturn 1;\r\n\t\t}\r\n\r\n\t\tSubmit.__init__=function(){\r\n\t\t\tvar s=Submit.RENDERBASE=new Submit(-1);\r\n\t\t\ts.shaderValue=new Value2D(0,0);\r\n\t\t\ts.shaderValue.ALPHA=-1234;\r\n\t\t}\r\n\r\n\t\tSubmit.create=function(context,ib,vb,pos,sv){\r\n\t\t\tvar o=Submit._cache._length ? Submit._cache[--Submit._cache._length] :new Submit();\r\n\t\t\tif (vb==null){\r\n\t\t\t\tvb=o._selfVb || (o._selfVb=VertexBuffer2D.create(-1));\r\n\t\t\t\tvb.clear();\r\n\t\t\t\tpos=0;\r\n\t\t\t}\r\n\t\t\to._ib=ib;\r\n\t\t\to._vb=vb;\r\n\t\t\to._startIdx=pos *CONST3D2D.BYTES_PIDX;\r\n\t\t\to._numEle=0;\r\n\t\t\tvar blendType=context._nBlendType;\r\n\t\t\to._blendFn=context._targets ? BlendMode.targetFns[blendType] :BlendMode.fns[blendType];\r\n\t\t\to.shaderValue=sv;\r\n\t\t\to.shaderValue.setValue(context._shader2D);\r\n\t\t\tvar filters=context._shader2D.filters;\r\n\t\t\tfilters && o.shaderValue.setFilters(filters);\r\n\t\t\treturn o;\r\n\t\t}\r\n\r\n\t\tSubmit.createShape=function(ctx,ib,vb,numEle,offset,sv){\r\n\t\t\tvar o=(!Submit._cache._length)? (new Submit()):Submit._cache[--Submit._cache._length];\r\n\t\t\to._ib=ib;\r\n\t\t\to._vb=vb;\r\n\t\t\to._numEle=numEle;\r\n\t\t\to._startIdx=offset;\r\n\t\t\to.shaderValue=sv;\r\n\t\t\to.shaderValue.setValue(ctx._shader2D);\r\n\t\t\tvar blendType=ctx._nBlendType;\r\n\t\t\to._blendFn=ctx._targets ? BlendMode.targetFns[blendType] :BlendMode.fns[blendType];\r\n\t\t\treturn o;\r\n\t\t}\r\n\r\n\t\tSubmit.TYPE_2D=10000;\r\n\t\tSubmit.TYPE_CANVAS=10003;\r\n\t\tSubmit.TYPE_CMDSETRT=10004;\r\n\t\tSubmit.TYPE_CUSTOM=10005;\r\n\t\tSubmit.TYPE_BLURRT=10006;\r\n\t\tSubmit.TYPE_CMDDESTORYPRERT=10007;\r\n\t\tSubmit.TYPE_DISABLESTENCIL=10008;\r\n\t\tSubmit.TYPE_OTHERIBVB=10009;\r\n\t\tSubmit.TYPE_PRIMITIVE=10010;\r\n\t\tSubmit.TYPE_RT=10011;\r\n\t\tSubmit.TYPE_BLUR_RT=10012;\r\n\t\tSubmit.TYPE_TARGET=10013;\r\n\t\tSubmit.TYPE_CHANGE_VALUE=10014;\r\n\t\tSubmit.TYPE_SHAPE=10015;\r\n\t\tSubmit.TYPE_TEXTURE=10016;\r\n\t\tSubmit.TYPE_FILLTEXTURE=10017;\r\n\t\tSubmit.RENDERBASE=null\r\n\t\tSubmit._cache=(Submit._cache=[],Submit._cache._length=0,Submit._cache);\r\n\t\treturn Submit;\r\n\t})()\r\n\r\n\r\n\t//class laya.webgl.submit.SubmitCMD\r\n\tvar SubmitCMD=(function(){\r\n\t\tfunction SubmitCMD(){\r\n\t\t\tthis.fun=null;\r\n\t\t\tthis.args=null;\r\n\t\t}\r\n\r\n\t\t__class(SubmitCMD,'laya.webgl.submit.SubmitCMD');\r\n\t\tvar __proto=SubmitCMD.prototype;\r\n\t\tLaya.imps(__proto,{\"laya.webgl.submit.ISubmit\":true})\r\n\t\t__proto.renderSubmit=function(){\r\n\t\t\tthis.fun.apply(null,this.args);\r\n\t\t\treturn 1;\r\n\t\t}\r\n\r\n\t\t__proto.getRenderType=function(){\r\n\t\t\treturn 0;\r\n\t\t}\r\n\r\n\t\t__proto.releaseRender=function(){\r\n\t\t\tvar cache=SubmitCMD._cache;\r\n\t\t\tcache[cache._length++]=this;\r\n\t\t}\r\n\r\n\t\tSubmitCMD.create=function(args,fun){\r\n\t\t\tvar o=SubmitCMD._cache._length?SubmitCMD._cache[--SubmitCMD._cache._length]:new SubmitCMD();\r\n\t\t\to.fun=fun;\r\n\t\t\to.args=args;\r\n\t\t\treturn o;\r\n\t\t}\r\n\r\n\t\tSubmitCMD._cache=(SubmitCMD._cache=[],SubmitCMD._cache._length=0,SubmitCMD._cache);\r\n\t\treturn SubmitCMD;\r\n\t})()\r\n\r\n\r\n\t//class laya.webgl.submit.SubmitCMDScope\r\n\tvar SubmitCMDScope=(function(){\r\n\t\tfunction SubmitCMDScope(){\r\n\t\t\tthis.variables={};\r\n\t\t}\r\n\r\n\t\t__class(SubmitCMDScope,'laya.webgl.submit.SubmitCMDScope');\r\n\t\tvar __proto=SubmitCMDScope.prototype;\r\n\t\t__proto.getValue=function(name){\r\n\t\t\treturn this.variables[name];\r\n\t\t}\r\n\r\n\t\t__proto.addValue=function(name,value){\r\n\t\t\treturn this.variables[name]=value;\r\n\t\t}\r\n\r\n\t\t__proto.setValue=function(name,value){\r\n\t\t\tif(this.variables.hasOwnProperty(name)){\r\n\t\t\t\treturn this.variables[name]=value;\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\t__proto.clear=function(){\r\n\t\t\tfor(var key in this.variables){\r\n\t\t\t\tdelete this.variables[key];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__proto.recycle=function(){\r\n\t\t\tthis.clear();\r\n\t\t\tSubmitCMDScope.POOL.push(this);\r\n\t\t}\r\n\r\n\t\tSubmitCMDScope.create=function(){\r\n\t\t\tvar scope=SubmitCMDScope.POOL.pop();\r\n\t\t\tscope||(scope=new SubmitCMDScope());\r\n\t\t\treturn scope;\r\n\t\t}\r\n\r\n\t\tSubmitCMDScope.POOL=[];\r\n\t\treturn SubmitCMDScope;\r\n\t})()\r\n\r\n\r\n\t//class laya.webgl.submit.SubmitOtherIBVB\r\n\tvar SubmitOtherIBVB=(function(){\r\n\t\tfunction SubmitOtherIBVB(){\r\n\t\t\tthis.offset=0;\r\n\t\t\t//this._vb=null;\r\n\t\t\t//this._ib=null;\r\n\t\t\t//this._blendFn=null;\r\n\t\t\t//this._mat=null;\r\n\t\t\t//this._shader=null;\r\n\t\t\t//this._shaderValue=null;\r\n\t\t\t//this._numEle=0;\r\n\t\t\tthis.startIndex=0;\r\n\t\t\t;\r\n\t\t\tthis._mat=Matrix.create();\r\n\t\t}\r\n\r\n\t\t__class(SubmitOtherIBVB,'laya.webgl.submit.SubmitOtherIBVB');\r\n\t\tvar __proto=SubmitOtherIBVB.prototype;\r\n\t\tLaya.imps(__proto,{\"laya.webgl.submit.ISubmit\":true})\r\n\t\t__proto.releaseRender=function(){\r\n\t\t\tvar cache=SubmitOtherIBVB._cache;\r\n\t\t\tcache[cache._length++]=this;\r\n\t\t}\r\n\r\n\t\t__proto.getRenderType=function(){\r\n\t\t\treturn 10009;\r\n\t\t}\r\n\r\n\t\t__proto.renderSubmit=function(){\r\n\t\t\tvar _tex=this._shaderValue.textureHost;\r\n\t\t\tif (_tex){\r\n\t\t\t\tvar source=_tex.source;\r\n\t\t\t\tif (!_tex.bitmap || !source)\r\n\t\t\t\t\treturn 1;\r\n\t\t\t\tthis._shaderValue.texture=source;\r\n\t\t\t}\r\n\t\t\tthis._vb.bind_upload(this._ib);\r\n\t\t\tvar w=RenderState2D.worldMatrix4;\r\n\t\t\tvar wmat=Matrix.TEMP;\r\n\t\t\tMatrix.mulPre(this._mat,w[0],w[1],w[4],w[5],w[12],w[13],wmat);\r\n\t\t\tvar tmp=RenderState2D.worldMatrix4=SubmitOtherIBVB.tempMatrix4;\r\n\t\t\ttmp[0]=wmat.a;\r\n\t\t\ttmp[1]=wmat.b;\r\n\t\t\ttmp[4]=wmat.c;\r\n\t\t\ttmp[5]=wmat.d;\r\n\t\t\ttmp[12]=wmat.tx;\r\n\t\t\ttmp[13]=wmat.ty;\r\n\t\t\tthis._shader._offset=this.offset;\r\n\t\t\tthis._shaderValue.refresh();\r\n\t\t\tthis._shader.upload(this._shaderValue);\r\n\t\t\tthis._shader._offset=0;\r\n\t\t\tvar gl=WebGL.mainContext;\r\n\t\t\tif (BlendMode.activeBlendFunction!==this._blendFn){\r\n\t\t\t\tgl.enable(0x0BE2);\r\n\t\t\t\tthis._blendFn(gl);\r\n\t\t\t\tBlendMode.activeBlendFunction=this._blendFn;\r\n\t\t\t}\r\n\t\t\tStat.drawCall++;\r\n\t\t\tStat.trianglesFaces+=this._numEle / 3;\r\n\t\t\tgl.drawElements(0x0004,this._numEle,0x1403,this.startIndex);\r\n\t\t\tRenderState2D.worldMatrix4=w;\r\n\t\t\tBaseShader.activeShader=null;\r\n\t\t\treturn 1;\r\n\t\t}\r\n\r\n\t\tSubmitOtherIBVB.create=function(context,vb,ib,numElement,shader,shaderValue,startIndex,offset,type){\r\n\t\t\t(type===void 0)&& (type=0);\r\n\t\t\tvar o=(!SubmitOtherIBVB._cache._length)? (new SubmitOtherIBVB()):SubmitOtherIBVB._cache[--SubmitOtherIBVB._cache._length];\r\n\t\t\to._ib=ib;\r\n\t\t\to._vb=vb;\r\n\t\t\to._numEle=numElement;\r\n\t\t\to._shader=shader;\r\n\t\t\to._shaderValue=shaderValue;\r\n\t\t\tvar blendType=context._nBlendType;\r\n\t\t\to._blendFn=context._targets ? BlendMode.targetFns[blendType] :BlendMode.fns[blendType];\r\n\t\t\tswitch(type){\r\n\t\t\t\tcase 0:\r\n\t\t\t\t\to.offset=0;\r\n\t\t\t\t\to.startIndex=offset / (CONST3D2D.BYTES_PE *vb.vertexStride)*1.5;\r\n\t\t\t\t\to.startIndex *=CONST3D2D.BYTES_PIDX;\r\n\t\t\t\t\tbreak ;\r\n\t\t\t\tcase 1:\r\n\t\t\t\t\to.startIndex=startIndex;\r\n\t\t\t\t\to.offset=offset;\r\n\t\t\t\t\tbreak ;\r\n\t\t\t\t}\r\n\t\t\treturn o;\r\n\t\t}\r\n\r\n\t\tSubmitOtherIBVB._cache=(SubmitOtherIBVB._cache=[],SubmitOtherIBVB._cache._length=0,SubmitOtherIBVB._cache);\r\n\t\tSubmitOtherIBVB.tempMatrix4=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,];\r\n\t\treturn SubmitOtherIBVB;\r\n\t})()\r\n\r\n\r\n\t//class laya.webgl.submit.SubmitScissor\r\n\tvar SubmitScissor=(function(){\r\n\t\tfunction SubmitScissor(){\r\n\t\t\tthis.submitIndex=0;\r\n\t\t\tthis.submitLength=0;\r\n\t\t\tthis.context=null;\r\n\t\t\tthis.clipRect=new Rectangle();\r\n\t\t\tthis.screenRect=new Rectangle();\r\n\t\t}\r\n\r\n\t\t__class(SubmitScissor,'laya.webgl.submit.SubmitScissor');\r\n\t\tvar __proto=SubmitScissor.prototype;\r\n\t\tLaya.imps(__proto,{\"laya.webgl.submit.ISubmit\":true})\r\n\t\t__proto._scissor=function(x,y,w,h){\r\n\t\t\tvar m=RenderState2D.worldMatrix4;\r\n\t\t\tvar a=m[0],d=m[5],tx=m[12],ty=m[13];\r\n\t\t\tx=x *a+tx;\r\n\t\t\ty=y *d+ty;\r\n\t\t\tw *=a;\r\n\t\t\th *=d;\r\n\t\t\tif (w < 1 || h < 1){\r\n\t\t\t\treturn false;\r\n\t\t\t};\r\n\t\t\tvar r=x+w;\r\n\t\t\tvar b=y+h;\r\n\t\t\tx < 0 && (x=0,w=r-x);\r\n\t\t\ty < 0 && (y=0,h=b-y);\r\n\t\t\tvar screen=RenderState2D.worldClipRect;\r\n\t\t\tx=Math.max(x,screen.x);\r\n\t\t\ty=Math.max(y,screen.y);\r\n\t\t\tw=Math.min(r,screen.right)-x;\r\n\t\t\th=Math.min(b,screen.bottom)-y;\r\n\t\t\tif (w < 1 || h < 1){\r\n\t\t\t\treturn false;\r\n\t\t\t};\r\n\t\t\tvar worldScissorTest=RenderState2D.worldScissorTest;\r\n\t\t\tthis.screenRect.copyFrom(screen);\r\n\t\t\tscreen.x=x;\r\n\t\t\tscreen.y=y;\r\n\t\t\tscreen.width=w;\r\n\t\t\tscreen.height=h;\r\n\t\t\tRenderState2D.worldScissorTest=true;\r\n\t\t\ty=RenderState2D.height-y-h;\r\n\t\t\tWebGL.mainContext.scissor(x,y,w,h);\r\n\t\t\tWebGL.mainContext.enable(0x0C11);\r\n\t\t\tthis.context.submitElement(this.submitIndex,this.submitIndex+this.submitLength);\r\n\t\t\tif (worldScissorTest){\r\n\t\t\t\ty=RenderState2D.height-this.screenRect.y-this.screenRect.height;\r\n\t\t\t\tWebGL.mainContext.scissor(this.screenRect.x,y,this.screenRect.width,this.screenRect.height);\r\n\t\t\t\tWebGL.mainContext.enable(0x0C11);\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tWebGL.mainContext.disable(0x0C11);\r\n\t\t\t\tRenderState2D.worldScissorTest=false;\r\n\t\t\t}\r\n\t\t\tscreen.copyFrom(this.screenRect);\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\t__proto._scissorWithTagart=function(x,y,w,h){\r\n\t\t\tif (w < 1 || h < 1){\r\n\t\t\t\treturn false;\r\n\t\t\t};\r\n\t\t\tvar r=x+w;\r\n\t\t\tvar b=y+h;\r\n\t\t\tx < 0 && (x=0,w=r-x);\r\n\t\t\ty < 0 && (y=0,h=b-y);\r\n\t\t\tvar screen=RenderState2D.worldClipRect;\r\n\t\t\tx=Math.max(x,screen.x);\r\n\t\t\ty=Math.max(y,screen.y);\r\n\t\t\tw=Math.min(r,screen.right)-x;\r\n\t\t\th=Math.min(b,screen.bottom)-y;\r\n\t\t\tif (w < 1 || h < 1){\r\n\t\t\t\treturn false;\r\n\t\t\t};\r\n\t\t\tvar worldScissorTest=RenderState2D.worldScissorTest;\r\n\t\t\tthis.screenRect.copyFrom(screen);\r\n\t\t\tRenderState2D.worldScissorTest=true;\r\n\t\t\tscreen.x=x;\r\n\t\t\tscreen.y=y;\r\n\t\t\tscreen.width=w;\r\n\t\t\tscreen.height=h;\r\n\t\t\ty=RenderState2D.height-y-h;\r\n\t\t\tWebGL.mainContext.scissor(x,y,w,h);\r\n\t\t\tWebGL.mainContext.enable(0x0C11);\r\n\t\t\tthis.context.submitElement(this.submitIndex,this.submitIndex+this.submitLength);\r\n\t\t\tif (worldScissorTest){\r\n\t\t\t\ty=RenderState2D.height-this.screenRect.y-this.screenRect.height;\r\n\t\t\t\tWebGL.mainContext.scissor(this.screenRect.x,y,this.screenRect.width,this.screenRect.height);\r\n\t\t\t\tWebGL.mainContext.enable(0x0C11);\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tWebGL.mainContext.disable(0x0C11);\r\n\t\t\t\tRenderState2D.worldScissorTest=false;\r\n\t\t\t}\r\n\t\t\tscreen.copyFrom(this.screenRect);\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\t__proto.renderSubmit=function(){\r\n\t\t\tthis.submitLength=Math.min(this.context._submits._length-1,this.submitLength);\r\n\t\t\tif (this.submitLength < 1 || this.clipRect.width < 1 || this.clipRect.height < 1)\r\n\t\t\t\treturn this.submitLength+1;\r\n\t\t\tif (this.context._targets)\r\n\t\t\t\tthis._scissorWithTagart(this.clipRect.x,this.clipRect.y,this.clipRect.width,this.clipRect.height);\r\n\t\t\telse this._scissor(this.clipRect.x,this.clipRect.y,this.clipRect.width,this.clipRect.height);\r\n\t\t\treturn this.submitLength+1;\r\n\t\t}\r\n\r\n\t\t__proto.getRenderType=function(){\r\n\t\t\treturn 0;\r\n\t\t}\r\n\r\n\t\t__proto.releaseRender=function(){\r\n\t\t\tvar cache=SubmitScissor._cache;\r\n\t\t\tcache[cache._length++]=this;\r\n\t\t\tthis.context=null;\r\n\t\t}\r\n\r\n\t\tSubmitScissor.create=function(context){\r\n\t\t\tvar o=SubmitScissor._cache._length?SubmitScissor._cache[--SubmitScissor._cache._length]:new SubmitScissor();\r\n\t\t\to.context=context;\r\n\t\t\treturn o;\r\n\t\t}\r\n\r\n\t\tSubmitScissor._cache=(SubmitScissor._cache=[],SubmitScissor._cache._length=0,SubmitScissor._cache);\r\n\t\treturn SubmitScissor;\r\n\t})()\r\n\r\n\r\n\t//class laya.webgl.submit.SubmitStencil\r\n\tvar SubmitStencil=(function(){\r\n\t\tfunction SubmitStencil(){\r\n\t\t\tthis.step=0;\r\n\t\t\tthis.blendMode=null;\r\n\t\t\tthis.level=0;\r\n\t\t}\r\n\r\n\t\t__class(SubmitStencil,'laya.webgl.submit.SubmitStencil');\r\n\t\tvar __proto=SubmitStencil.prototype;\r\n\t\tLaya.imps(__proto,{\"laya.webgl.submit.ISubmit\":true})\r\n\t\t__proto.renderSubmit=function(){\r\n\t\t\tswitch(this.step){\r\n\t\t\t\tcase 1:\r\n\t\t\t\t\tthis.do1();\r\n\t\t\t\t\tbreak ;\r\n\t\t\t\tcase 2:\r\n\t\t\t\t\tthis.do2();\r\n\t\t\t\t\tbreak ;\r\n\t\t\t\tcase 3:\r\n\t\t\t\t\tthis.do3();\r\n\t\t\t\t\tbreak ;\r\n\t\t\t\tcase 4:\r\n\t\t\t\t\tthis.do4();\r\n\t\t\t\t\tbreak ;\r\n\t\t\t\tcase 5:\r\n\t\t\t\t\tthis.do5();\r\n\t\t\t\t\tbreak ;\r\n\t\t\t\tcase 6:\r\n\t\t\t\t\tthis.do6();\r\n\t\t\t\t\tbreak ;\r\n\t\t\t\t}\r\n\t\t\treturn 1;\r\n\t\t}\r\n\r\n\t\t__proto.getRenderType=function(){\r\n\t\t\treturn 0;\r\n\t\t}\r\n\r\n\t\t__proto.releaseRender=function(){\r\n\t\t\tvar cache=SubmitStencil._cache;\r\n\t\t\tcache[cache._length++]=this;\r\n\t\t}\r\n\r\n\t\t__proto.do1=function(){\r\n\t\t\tvar gl=WebGL.mainContext;\r\n\t\t\tgl.enable(0x0B90);\r\n\t\t\tgl.clear(0x00000400);\r\n\t\t\tgl.colorMask(false,false,false,false);\r\n\t\t\tgl.stencilFunc(0x0202,this.level,0xFF);\r\n\t\t\tgl.stencilOp(0x1E00,0x1E00,0x1E02);\r\n\t\t}\r\n\r\n\t\t//gl.stencilOp(WebGLContext.KEEP,WebGLContext.KEEP,WebGLContext.INVERT);//测试通过给模版缓冲 写入值 一开始是0 现在是 0xFF (模版缓冲中不知道是多少位的数据)\r\n\t\t__proto.do2=function(){\r\n\t\t\tvar gl=WebGL.mainContext;\r\n\t\t\tgl.stencilFunc(0x0202,this.level+1,0xFF);\r\n\t\t\tgl.colorMask(true,true,true,true);\r\n\t\t\tgl.stencilOp(0x1E00,0x1E00,0x1E00);\r\n\t\t}\r\n\r\n\t\t__proto.do3=function(){\r\n\t\t\tvar gl=WebGL.mainContext;\r\n\t\t\tgl.colorMask(true,true,true,true);\r\n\t\t\tgl.stencilOp(0x1E00,0x1E00,0x1E00);\r\n\t\t\tgl.clear(0x00000400);\r\n\t\t\tgl.disable(0x0B90);\r\n\t\t}\r\n\r\n\t\t__proto.do4=function(){\r\n\t\t\tvar gl=WebGL.mainContext;\r\n\t\t\tgl.enable(0x0B90);\r\n\t\t\tgl.clear(0x00000400);\r\n\t\t\tgl.colorMask(false,false,false,false);\r\n\t\t\tgl.stencilFunc(0x0207,this.level,0xFF);\r\n\t\t\tgl.stencilOp(0x1E00,0x1E00,0x150A);\r\n\t\t}\r\n\r\n\t\t__proto.do5=function(){\r\n\t\t\tvar gl=WebGL.mainContext;\r\n\t\t\tgl.stencilFunc(0x0202,0xff,0xFF);\r\n\t\t\tgl.colorMask(true,true,true,true);\r\n\t\t\tgl.stencilOp(0x1E00,0x1E00,0x1E00);\r\n\t\t}\r\n\r\n\t\t__proto.do6=function(){\r\n\t\t\tvar gl=WebGL.mainContext;\r\n\t\t\tBlendMode.targetFns[BlendMode.TOINT[this.blendMode]](gl);\r\n\t\t}\r\n\r\n\t\tSubmitStencil.create=function(step){\r\n\t\t\tvar o=SubmitStencil._cache._length?SubmitStencil._cache[--SubmitStencil._cache._length]:new SubmitStencil();\r\n\t\t\to.step=step;\r\n\t\t\treturn o;\r\n\t\t}\r\n\r\n\t\tSubmitStencil._cache=(SubmitStencil._cache=[],SubmitStencil._cache._length=0,SubmitStencil._cache);\r\n\t\treturn SubmitStencil;\r\n\t})()\r\n\r\n\r\n\t//class laya.webgl.submit.SubmitTarget\r\n\tvar SubmitTarget=(function(){\r\n\t\tfunction SubmitTarget(){\r\n\t\t\tthis._renderType=0;\r\n\t\t\tthis._vb=null;\r\n\t\t\tthis._ib=null;\r\n\t\t\tthis._startIdx=0;\r\n\t\t\tthis._numEle=0;\r\n\t\t\tthis.shaderValue=null;\r\n\t\t\tthis.blendType=0;\r\n\t\t\tthis.proName=null;\r\n\t\t\tthis.scope=null;\r\n\t\t}\r\n\r\n\t\t__class(SubmitTarget,'laya.webgl.submit.SubmitTarget');\r\n\t\tvar __proto=SubmitTarget.prototype;\r\n\t\tLaya.imps(__proto,{\"laya.webgl.submit.ISubmit\":true})\r\n\t\t__proto.renderSubmit=function(){\r\n\t\t\tthis._vb.bind_upload(this._ib);\r\n\t\t\tvar target=this.scope.getValue(this.proName);\r\n\t\t\tif (target){\r\n\t\t\t\tthis.shaderValue.texture=target.source;\r\n\t\t\t\tthis.shaderValue.upload();\r\n\t\t\t\tthis.blend();\r\n\t\t\t\tStat.drawCall++;\r\n\t\t\t\tStat.trianglesFaces+=this._numEle/3;\r\n\t\t\t\tWebGL.mainContext.drawElements(0x0004,this._numEle,0x1403,this._startIdx);\r\n\t\t\t}\r\n\t\t\treturn 1;\r\n\t\t}\r\n\r\n\t\t__proto.blend=function(){\r\n\t\t\tif (BlendMode.activeBlendFunction!==BlendMode.fns[this.blendType]){\r\n\t\t\t\tvar gl=WebGL.mainContext;\r\n\t\t\t\tgl.enable(0x0BE2);\r\n\t\t\t\tBlendMode.fns[this.blendType](gl);\r\n\t\t\t\tBlendMode.activeBlendFunction=BlendMode.fns[this.blendType];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__proto.getRenderType=function(){\r\n\t\t\treturn 0;\r\n\t\t}\r\n\r\n\t\t__proto.releaseRender=function(){\r\n\t\t\tvar cache=SubmitTarget._cache;\r\n\t\t\tcache[cache._length++]=this;\r\n\t\t}\r\n\r\n\t\tSubmitTarget.create=function(context,ib,vb,pos,sv,proName){\r\n\t\t\tvar o=SubmitTarget._cache._length?SubmitTarget._cache[--SubmitTarget._cache._length]:new SubmitTarget();\r\n\t\t\to._ib=ib;\r\n\t\t\to._vb=vb;\r\n\t\t\to.proName=proName;\r\n\t\t\to._startIdx=pos *CONST3D2D.BYTES_PIDX;\r\n\t\t\to._numEle=0;\r\n\t\t\to.blendType=context._nBlendType;\r\n\t\t\to.shaderValue=sv;\r\n\t\t\to.shaderValue.setValue(context._shader2D);\r\n\t\t\treturn o;\r\n\t\t}\r\n\r\n\t\tSubmitTarget._cache=(SubmitTarget._cache=[],SubmitTarget._cache._length=0,SubmitTarget._cache);\r\n\t\treturn SubmitTarget;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*...特殊的字符，如泰文，必须重新实现这个类\r\n\t*/\r\n\t//class laya.webgl.text.CharSegment\r\n\tvar CharSegment=(function(){\r\n\t\tfunction CharSegment(){\r\n\t\t\tthis._sourceStr=null;\r\n\t\t}\r\n\r\n\t\t__class(CharSegment,'laya.webgl.text.CharSegment');\r\n\t\tvar __proto=CharSegment.prototype;\r\n\t\tLaya.imps(__proto,{\"laya.webgl.text.ICharSegment\":true})\r\n\t\t__proto.textToSpit=function(str){\r\n\t\t\tthis._sourceStr=str;\r\n\t\t}\r\n\r\n\t\t__proto.getChar=function(i){\r\n\t\t\treturn this._sourceStr.charAt(i);\r\n\t\t}\r\n\r\n\t\t__proto.getCharCode=function(i){\r\n\t\t\treturn this._sourceStr.charCodeAt(i);\r\n\t\t}\r\n\r\n\t\t__proto.length=function(){\r\n\t\t\treturn this._sourceStr.length;\r\n\t\t}\r\n\r\n\t\treturn CharSegment;\r\n\t})()\r\n\r\n\r\n\t//class laya.webgl.text.DrawText\r\n\tvar DrawText=(function(){\r\n\t\tvar CharValue;\r\n\t\tfunction DrawText(){};\r\n\t\t__class(DrawText,'laya.webgl.text.DrawText');\r\n\t\tDrawText.__init__=function(){\r\n\t\t\tDrawText._charsTemp=new Array;\r\n\t\t\tDrawText._drawValue=new CharValue();\r\n\t\t\tDrawText._charSeg=new CharSegment();\r\n\t\t}\r\n\r\n\t\tDrawText.customCharSeg=function(charseg){\r\n\t\t\tDrawText._charSeg=charseg;\r\n\t\t}\r\n\r\n\t\tDrawText.getChar=function(char,id,drawValue){\r\n\t\t\treturn DrawText._charsCache[id]=DrawTextChar.createOneChar(char,drawValue);\r\n\t\t}\r\n\r\n\t\tDrawText._drawSlow=function(save,ctx,txt,words,curMat,font,textAlign,fillColor,borderColor,lineWidth,x,y,sx,sy){\r\n\t\t\tvar drawValue=DrawText._drawValue.value(font,fillColor,borderColor,lineWidth,sx,sy);\r\n\t\t\tvar i=0,n=0;\r\n\t\t\tvar chars=DrawText._charsTemp;\r\n\t\t\tvar width=0,oneChar,htmlWord,id=NaN;\r\n\t\t\tif (words){\r\n\t\t\t\tchars.length=words.length;\r\n\t\t\t\tfor (i=0,n=words.length;i < n;i++){\r\n\t\t\t\t\thtmlWord=words[i];\r\n\t\t\t\t\tid=htmlWord.charNum+drawValue.txtID;\r\n\t\t\t\t\tchars[i]=oneChar=DrawText._charsCache[id] || DrawText.getChar(htmlWord.char,id,drawValue);\r\n\t\t\t\t\toneChar.active();\r\n\t\t\t\t}\r\n\t\t\t\t}else {\r\n\t\t\t\tif ((txt instanceof laya.utils.WordText ))\r\n\t\t\t\t\tDrawText._charSeg.textToSpit((txt).toString());\r\n\t\t\t\telse\r\n\t\t\t\tDrawText._charSeg.textToSpit(txt);\r\n\t\t\t\tvar len=/*if err,please use iflash.method.xmlLength()*/DrawText._charSeg.length();\r\n\t\t\t\tchars.length=len;\r\n\t\t\t\tfor (i=0,n=len;i < n;i++){\r\n\t\t\t\t\tid=DrawText._charSeg.getCharCode(i)+drawValue.txtID;\r\n\t\t\t\t\tchars[i]=oneChar=DrawText._charsCache[id] || DrawText.getChar(DrawText._charSeg.getChar(i),id,drawValue);\r\n\t\t\t\t\toneChar.active();\r\n\t\t\t\t\twidth+=oneChar.width;\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\tvar dx=0;\r\n\t\t\tif (textAlign!==null && textAlign!==\"left\")\r\n\t\t\t\tdx=-(textAlign==\"center\" ? (width / 2):width);\r\n\t\t\tvar uv,bdSz=NaN,texture,value,saveLength=0;\r\n\t\t\tif (words){\r\n\t\t\t\tfor (i=0,n=chars.length;i < n;i++){\r\n\t\t\t\t\toneChar=chars[i];\r\n\t\t\t\t\tif (!oneChar.isSpace){\r\n\t\t\t\t\t\thtmlWord=words[i];\r\n\t\t\t\t\t\tbdSz=oneChar.borderSize;\r\n\t\t\t\t\t\ttexture=oneChar.texture;\r\n\t\t\t\t\t\tctx._drawText(texture,x+dx+htmlWord.x *sx-bdSz,y+htmlWord.y *sy-bdSz,texture.width,texture.height,curMat,0,0,0,0);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t}else {\r\n\t\t\t\tfor (i=0,n=chars.length;i < n;i++){\r\n\t\t\t\t\toneChar=chars[i];\r\n\t\t\t\t\tif (!oneChar.isSpace){\r\n\t\t\t\t\t\tbdSz=oneChar.borderSize;\r\n\t\t\t\t\t\ttexture=oneChar.texture;\r\n\t\t\t\t\t\tctx._drawText(texture,x+dx-bdSz,y-bdSz,texture.width,texture.height,curMat,0,0,0,0);\r\n\t\t\t\t\t\tsave && (value=save[saveLength++],value || (value=save[saveLength-1]=[]),value[0]=texture,value[1]=dx-bdSz,value[2]=-bdSz);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdx+=oneChar.width;\r\n\t\t\t\t}\r\n\t\t\t\tsave && (save.length=saveLength);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tDrawText._drawFast=function(save,ctx,curMat,x,y){\r\n\t\t\tvar texture,value;\r\n\t\t\tfor (var i=0,n=save.length;i < n;i++){\r\n\t\t\t\tvalue=save[i];\r\n\t\t\t\ttexture=value[0];\r\n\t\t\t\ttexture.active();\r\n\t\t\t\tctx._drawText(texture,x+value[1],y+value[2],texture.width,texture.height,curMat,0,0,0,0);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tDrawText.drawText=function(ctx,txt,words,curMat,font,textAlign,fillColor,borderColor,lineWidth,x,y){\r\n\t\t\tif ((txt && txt.length===0)|| (words && words.length===0))\r\n\t\t\t\treturn;\r\n\t\t\tvar sx=curMat.a,sy=curMat.d;\r\n\t\t\t(curMat.b!==0 || curMat.c!==0)&& (sx=sy=1);\r\n\t\t\tvar scale=sx!==1 || sy!==1;\r\n\t\t\tif (scale && Laya.stage.transform){\r\n\t\t\t\tvar t=Laya.stage.transform;\r\n\t\t\t\tscale=t.a===sx && t.d===sy;\r\n\t\t\t}else scale=false;\r\n\t\t\tif (scale){\r\n\t\t\t\tcurMat=curMat.copyTo(WebGLContext2D._tmpMatrix);\r\n\t\t\t\tcurMat.scale(1 / sx,1 / sy);\r\n\t\t\t\tcurMat._checkTransform();\r\n\t\t\t\tx *=sx;\r\n\t\t\t\ty *=sy;\r\n\t\t\t}else sx=sy=1;\r\n\t\t\tif (words){\r\n\t\t\t\tDrawText._drawSlow(null,ctx,txt,words,curMat,font,textAlign,fillColor,borderColor,lineWidth,x,y,sx,sy);\r\n\t\t\t\t}else {\r\n\t\t\t\tif (txt.toUpperCase===null){\r\n\t\t\t\t\tvar idNum=sx+sy *100000;\r\n\t\t\t\t\tvar myCache=txt;\r\n\t\t\t\t\tif (!myCache.changed && myCache.id===idNum){\r\n\t\t\t\t\t\tDrawText._drawFast(myCache.save,ctx,curMat,x,y);\r\n\t\t\t\t\t\t}else {\r\n\t\t\t\t\t\tmyCache.id=idNum;\r\n\t\t\t\t\t\tmyCache.changed=false;\r\n\t\t\t\t\t\tDrawText._drawSlow(myCache.save,ctx,txt,words,curMat,font,textAlign,fillColor,borderColor,lineWidth,x,y,sx,sy);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn;\r\n\t\t\t\t};\r\n\t\t\t\tvar id=txt+font.toString()+fillColor+borderColor+lineWidth+sx+sy+textAlign;\r\n\t\t\t\tvar cache=DrawText._textsCache[id];\r\n\t\t\t\tif (cache){\r\n\t\t\t\t\tDrawText._drawFast(cache,ctx,curMat,x,y);\r\n\t\t\t\t\t}else {\r\n\t\t\t\t\tDrawText._textsCache.__length || (DrawText._textsCache.__length=0);\r\n\t\t\t\t\tif (DrawText._textsCache.__length > Config.WebGLTextCacheCount){\r\n\t\t\t\t\t\tDrawText._textsCache={};\r\n\t\t\t\t\t\tDrawText._textsCache.__length=0;\r\n\t\t\t\t\t\tDrawText._curPoolIndex=0;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tDrawText._textCachesPool[DrawText._curPoolIndex] ? (cache=DrawText._textsCache[id]=DrawText._textCachesPool[DrawText._curPoolIndex],cache.length=0):(DrawText._textCachesPool[DrawText._curPoolIndex]=cache=DrawText._textsCache[id]=[]);\r\n\t\t\t\t\tDrawText._textsCache.__length++\r\n\t\t\t\t\tDrawText._curPoolIndex++;\r\n\t\t\t\t\tDrawText._drawSlow(cache,ctx,txt,words,curMat,font,textAlign,fillColor,borderColor,lineWidth,x,y,sx,sy);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tDrawText._charsTemp=null\r\n\t\tDrawText._textCachesPool=[];\r\n\t\tDrawText._curPoolIndex=0;\r\n\t\tDrawText._charsCache={};\r\n\t\tDrawText._textsCache={};\r\n\t\tDrawText._drawValue=null\r\n\t\tDrawText.d=[];\r\n\t\tDrawText._charSeg=null;\r\n\t\tDrawText.__init$=function(){\r\n\t\t\t//class CharValue\r\n\t\t\tCharValue=(function(){\r\n\t\t\t\tfunction CharValue(){\r\n\t\t\t\t\t//this.txtID=NaN;\r\n\t\t\t\t\t//this.font=null;\r\n\t\t\t\t\t//this.fillColor=null;\r\n\t\t\t\t\t//this.borderColor=null;\r\n\t\t\t\t\t//this.lineWidth=0;\r\n\t\t\t\t\t//this.scaleX=NaN;\r\n\t\t\t\t\t//this.scaleY=NaN;\r\n\t\t\t\t}\r\n\t\t\t\t__class(CharValue,'');\r\n\t\t\t\tvar __proto=CharValue.prototype;\r\n\t\t\t\t__proto.value=function(font,fillColor,borderColor,lineWidth,scaleX,scaleY){\r\n\t\t\t\t\tthis.font=font;\r\n\t\t\t\t\tthis.fillColor=fillColor;\r\n\t\t\t\t\tthis.borderColor=borderColor;\r\n\t\t\t\t\tthis.lineWidth=lineWidth;\r\n\t\t\t\t\tthis.scaleX=scaleX;\r\n\t\t\t\t\tthis.scaleY=scaleY;\r\n\t\t\t\t\tvar key=font.toString()+scaleX+scaleY+lineWidth+fillColor+borderColor;\r\n\t\t\t\t\tthis.txtID=CharValue._keymap[key];\r\n\t\t\t\t\tif (!this.txtID){\r\n\t\t\t\t\t\tthis.txtID=(++CharValue._keymapCount)*0.0000001;\r\n\t\t\t\t\t\tCharValue._keymap[key]=this.txtID;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn this;\r\n\t\t\t\t}\r\n\t\t\t\tCharValue.clear=function(){\r\n\t\t\t\t\tCharValue._keymap={};\r\n\t\t\t\t\tCharValue._keymapCount=1;\r\n\t\t\t\t}\r\n\t\t\t\tCharValue._keymap={};\r\n\t\t\t\tCharValue._keymapCount=1;\r\n\t\t\t\treturn CharValue;\r\n\t\t\t})()\r\n\t\t}\r\n\r\n\t\treturn DrawText;\r\n\t})()\r\n\r\n\r\n\t//class laya.webgl.text.DrawTextChar\r\n\tvar DrawTextChar=(function(){\r\n\t\tfunction DrawTextChar(content,drawValue){\r\n\t\t\t//this.xs=NaN;\r\n\t\t\t//this.ys=NaN;\r\n\t\t\t//this.width=0;\r\n\t\t\t//this.height=0;\r\n\t\t\t//this.char=null;\r\n\t\t\t//this.fillColor=null;\r\n\t\t\t//this.borderColor=null;\r\n\t\t\t//this.borderSize=0;\r\n\t\t\t//this.font=null;\r\n\t\t\t//this.fontSize=0;\r\n\t\t\t//this.texture=null;\r\n\t\t\t//this.lineWidth=0;\r\n\t\t\t//this.UV=null;\r\n\t\t\t//this.isSpace=false;\r\n\t\t\tthis.char=content;\r\n\t\t\tthis.isSpace=content===' ';\r\n\t\t\tthis.xs=drawValue.scaleX;\r\n\t\t\tthis.ys=drawValue.scaleY;\r\n\t\t\tthis.font=drawValue.font.toString();\r\n\t\t\tthis.fontSize=drawValue.font.size;\r\n\t\t\tthis.fillColor=drawValue.fillColor;\r\n\t\t\tthis.borderColor=drawValue.borderColor;\r\n\t\t\tthis.lineWidth=drawValue.lineWidth;\r\n\t\t\tvar bIsConchApp=Render.isConchApp;\r\n\t\t\tif (bIsConchApp){\r\n\t\t\t\tvar pCanvas=ConchTextCanvas;\r\n\t\t\t\tpCanvas._source=ConchTextCanvas;\r\n\t\t\t\tpCanvas._source.canvas=ConchTextCanvas;\r\n\t\t\t\tthis.texture=new Texture(new WebGLCharImage(pCanvas,this));\r\n\t\t\t\t}else {\r\n\t\t\t\tthis.texture=new Texture(new WebGLCharImage(Browser.canvas.source,this));\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__class(DrawTextChar,'laya.webgl.text.DrawTextChar');\r\n\t\tvar __proto=DrawTextChar.prototype;\r\n\t\t__proto.active=function(){\r\n\t\t\tthis.texture.active();\r\n\t\t}\r\n\r\n\t\tDrawTextChar.createOneChar=function(content,drawValue){\r\n\t\t\tvar char=new DrawTextChar(content,drawValue);\r\n\t\t\treturn char;\r\n\t\t}\r\n\r\n\t\treturn DrawTextChar;\r\n\t})()\r\n\r\n\r\n\t//class laya.webgl.text.FontInContext\r\n\tvar FontInContext=(function(){\r\n\t\tfunction FontInContext(font){\r\n\t\t\t//this._text=null;\r\n\t\t\t//this._words=null;\r\n\t\t\tthis._index=0;\r\n\t\t\tthis._size=14;\r\n\t\t\tthis._italic=-2;\r\n\t\t\tthis.setFont(font || \"14px Arial\");\r\n\t\t}\r\n\r\n\t\t__class(FontInContext,'laya.webgl.text.FontInContext');\r\n\t\tvar __proto=FontInContext.prototype;\r\n\t\t__proto.setFont=function(value){\r\n\t\t\tthis._words=value.split(' ');\r\n\t\t\tfor (var i=0,n=this._words.length;i < n;i++){\r\n\t\t\t\tif (this._words[i].indexOf('px')> 0){\r\n\t\t\t\t\tthis._index=i;\r\n\t\t\t\t\tbreak ;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis._size=parseInt(this._words[this._index]);\r\n\t\t\tthis._text=null;\r\n\t\t\tthis._italic=-2;\r\n\t\t}\r\n\r\n\t\t__proto.getItalic=function(){\r\n\t\t\tthis._italic===-2 && (this._italic=this.hasType(\"italic\"));\r\n\t\t\treturn this._italic;\r\n\t\t}\r\n\r\n\t\t__proto.hasType=function(name){\r\n\t\t\tfor (var i=0,n=this._words.length;i < n;i++)\r\n\t\t\tif (this._words[i]===name)return i;\r\n\t\t\treturn-1;\r\n\t\t}\r\n\r\n\t\t__proto.removeType=function(name){\r\n\t\t\tfor (var i=0,n=this._words.length;i < n;i++)\r\n\t\t\tif (this._words[i]===name){\r\n\t\t\t\tthis._words.splice(i,1);\r\n\t\t\t\tif (this._index > i)this._index--;\r\n\t\t\t\tbreak ;\r\n\t\t\t}\r\n\t\t\tthis._text=null;\r\n\t\t\tthis._italic=-2;\r\n\t\t}\r\n\r\n\t\t__proto.copyTo=function(dec){\r\n\t\t\tdec._text=this._text;\r\n\t\t\tdec._size=this._size;\r\n\t\t\tdec._index=this._index;\r\n\t\t\tdec._words=this._words.slice();\r\n\t\t\tdec._italic=-2;\r\n\t\t\treturn dec;\r\n\t\t}\r\n\r\n\t\t__proto.toString=function(){\r\n\t\t\treturn this._text ? this._text :(this._text=this._words.join(' '));\r\n\t\t}\r\n\r\n\t\t__getset(0,__proto,'size',function(){\r\n\t\t\treturn this._size;\r\n\t\t\t},function(value){\r\n\t\t\tthis._size=value;\r\n\t\t\tthis._words[this._index]=value+\"px\";\r\n\t\t\tthis._text=null;\r\n\t\t});\r\n\r\n\t\tFontInContext.create=function(font){\r\n\t\t\tvar r=FontInContext._cache[font];\r\n\t\t\tif (r)return r;\r\n\t\t\tr=FontInContext._cache[font]=new FontInContext(font);\r\n\t\t\treturn r;\r\n\t\t}\r\n\r\n\t\tFontInContext.EMPTY=new FontInContext();\r\n\t\tFontInContext._cache={};\r\n\t\treturn FontInContext;\r\n\t})()\r\n\r\n\r\n\t//class laya.webgl.utils.CONST3D2D\r\n\tvar CONST3D2D=(function(){\r\n\t\tfunction CONST3D2D(){};\r\n\t\t__class(CONST3D2D,'laya.webgl.utils.CONST3D2D');\r\n\t\tCONST3D2D.defaultMatrix4=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];\r\n\t\tCONST3D2D.defaultMinusYMatrix4=[1,0,0,0,0,-1,0,0,0,0,1,0,0,0,0,1];\r\n\t\tCONST3D2D.uniformMatrix3=[1,0,0,0,0,1,0,0,0,0,1,0];\r\n\t\tCONST3D2D._TMPARRAY=[];\r\n\t\tCONST3D2D._OFFSETX=0;\r\n\t\tCONST3D2D._OFFSETY=0;\r\n\t\t__static(CONST3D2D,\r\n\t\t['BYTES_PE',function(){return this.BYTES_PE=Float32Array.BYTES_PER_ELEMENT;},'BYTES_PIDX',function(){return this.BYTES_PIDX=Uint16Array.BYTES_PER_ELEMENT;}\r\n\t\t]);\r\n\t\treturn CONST3D2D;\r\n\t})()\r\n\r\n\r\n\t//class laya.webgl.utils.GlUtils\r\n\tvar GlUtils=(function(){\r\n\t\tfunction GlUtils(){};\r\n\t\t__class(GlUtils,'laya.webgl.utils.GlUtils');\r\n\t\tGlUtils.make2DProjection=function(width,height,depth){\r\n\t\t\treturn [2.0 / width,0,0,0,0,-2.0 / height,0,0,0,0,2.0 / depth,0,-1,1,0,1,];\r\n\t\t}\r\n\r\n\t\tGlUtils.fillIBQuadrangle=function(buffer,count){\r\n\t\t\tif (count > 65535 / 4){\r\n\t\t\t\tthrow Error(\"IBQuadrangle count:\"+count+\" must<:\"+Math.floor(65535 / 4));\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tcount=Math.floor(count);\r\n\t\t\tbuffer._resizeBuffer((count+1)*6 *2,false);\r\n\t\t\tbuffer.byteLength=buffer.bufferLength;\r\n\t\t\tvar bufferData=buffer.getUint16Array();\r\n\t\t\tvar idx=0;\r\n\t\t\tfor (var i=0;i < count;i++){\r\n\t\t\t\tbufferData[idx++]=i *4;\r\n\t\t\t\tbufferData[idx++]=i *4+2;\r\n\t\t\t\tbufferData[idx++]=i *4+1;\r\n\t\t\t\tbufferData[idx++]=i *4;\r\n\t\t\t\tbufferData[idx++]=i *4+3;\r\n\t\t\t\tbufferData[idx++]=i *4+2;\r\n\t\t\t}\r\n\t\t\tbuffer.setNeedUpload();\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\tGlUtils.expandIBQuadrangle=function(buffer,count){\r\n\t\t\tbuffer.bufferLength >=(count *6 *2)|| GlUtils.fillIBQuadrangle(buffer,count);\r\n\t\t}\r\n\r\n\t\tGlUtils.mathCeilPowerOfTwo=function(value){\r\n\t\t\tvalue--;\r\n\t\t\tvalue |=value >> 1;\r\n\t\t\tvalue |=value >> 2;\r\n\t\t\tvalue |=value >> 4;\r\n\t\t\tvalue |=value >> 8;\r\n\t\t\tvalue |=value >> 16;\r\n\t\t\tvalue++;\r\n\t\t\treturn value;\r\n\t\t}\r\n\r\n\t\tGlUtils.fillQuadrangleImgVb=function(vb,x,y,point4,uv,m,_x,_y){\r\n\t\t\t'use strict';\r\n\t\t\tvar vpos=(vb._byteLength >> 2)+16;\r\n\t\t\tvb.byteLength=(vpos << 2);\r\n\t\t\tvar vbdata=vb.getFloat32Array();\r\n\t\t\tvpos-=16;\r\n\t\t\tvbdata[vpos+2]=uv[0];\r\n\t\t\tvbdata[vpos+3]=uv[1];\r\n\t\t\tvbdata[vpos+6]=uv[2];\r\n\t\t\tvbdata[vpos+7]=uv[3];\r\n\t\t\tvbdata[vpos+10]=uv[4];\r\n\t\t\tvbdata[vpos+11]=uv[5];\r\n\t\t\tvbdata[vpos+14]=uv[6];\r\n\t\t\tvbdata[vpos+15]=uv[7];\r\n\t\t\tvar a=m.a,b=m.b,c=m.c,d=m.d;\r\n\t\t\tif (a!==1 || b!==0 || c!==0 || d!==1){\r\n\t\t\t\tm.bTransform=true;\r\n\t\t\t\tvar tx=m.tx+_x,ty=m.ty+_y;\r\n\t\t\t\tvbdata[vpos]=(point4[0]+x)*a+(point4[1]+y)*c+tx;\r\n\t\t\t\tvbdata[vpos+1]=(point4[0]+x)*b+(point4[1]+y)*d+ty;\r\n\t\t\t\tvbdata[vpos+4]=(point4[2]+x)*a+(point4[3]+y)*c+tx;\r\n\t\t\t\tvbdata[vpos+5]=(point4[2]+x)*b+(point4[3]+y)*d+ty;\r\n\t\t\t\tvbdata[vpos+8]=(point4[4]+x)*a+(point4[5]+y)*c+tx;\r\n\t\t\t\tvbdata[vpos+9]=(point4[4]+x)*b+(point4[5]+y)*d+ty;\r\n\t\t\t\tvbdata[vpos+12]=(point4[6]+x)*a+(point4[7]+y)*c+tx;\r\n\t\t\t\tvbdata[vpos+13]=(point4[6]+x)*b+(point4[7]+y)*d+ty;\r\n\t\t\t\t}else {\r\n\t\t\t\tm.bTransform=false;\r\n\t\t\t\tx+=m.tx+_x;\r\n\t\t\t\ty+=m.ty+_y;\r\n\t\t\t\tvbdata[vpos]=x+point4[0];\r\n\t\t\t\tvbdata[vpos+1]=y+point4[1];\r\n\t\t\t\tvbdata[vpos+4]=x+point4[2];\r\n\t\t\t\tvbdata[vpos+5]=y+point4[3];\r\n\t\t\t\tvbdata[vpos+8]=x+point4[4];\r\n\t\t\t\tvbdata[vpos+9]=y+point4[5];\r\n\t\t\t\tvbdata[vpos+12]=x+point4[6];\r\n\t\t\t\tvbdata[vpos+13]=y+point4[7];\r\n\t\t\t}\r\n\t\t\tvb._upload=true;\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\tGlUtils.fillTranglesVB=function(vb,x,y,points,m,_x,_y){\r\n\t\t\t'use strict';\r\n\t\t\tvar vpos=(vb._byteLength >> 2)+points.length;\r\n\t\t\tvb.byteLength=(vpos << 2);\r\n\t\t\tvar vbdata=vb.getFloat32Array();\r\n\t\t\tvpos-=points.length;\r\n\t\t\tvar len=points.length;\r\n\t\t\tvar a=m.a,b=m.b,c=m.c,d=m.d;\r\n\t\t\tfor (var i=0;i < len;i+=4){\r\n\t\t\t\tvbdata[vpos+i+2]=points[i+2];\r\n\t\t\t\tvbdata[vpos+i+3]=points[i+3];\r\n\t\t\t\tif (a!==1 || b!==0 || c!==0 || d!==1){\r\n\t\t\t\t\tm.bTransform=true;\r\n\t\t\t\t\tvar tx=m.tx+_x,ty=m.ty+_y;\r\n\t\t\t\t\tvbdata[vpos+i]=(points[i]+x)*a+(points[i+1]+y)*c+tx;\r\n\t\t\t\t\tvbdata[vpos+i+1]=(points[i]+x)*b+(points[i+1]+y)*d+ty;\r\n\t\t\t\t\t}else {\r\n\t\t\t\t\tm.bTransform=false;\r\n\t\t\t\t\tx+=m.tx+_x;\r\n\t\t\t\t\ty+=m.ty+_y;\r\n\t\t\t\t\tvbdata[vpos+i]=x+points[i];\r\n\t\t\t\t\tvbdata[vpos+i+1]=y+points[i+1];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvb._upload=true;\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\tGlUtils.copyPreImgVb=function(vb,dx,dy){\r\n\t\t\tvar vpos=(vb._byteLength >> 2);\r\n\t\t\tvb.byteLength=((vpos+16)<< 2);\r\n\t\t\tvar vbdata=vb.getFloat32Array();\r\n\t\t\tfor (var i=0,ci=vpos-16;i < 4;i++){\r\n\t\t\t\tvbdata[vpos]=vbdata[ci]+dx;++vpos;++ci;\r\n\t\t\t\tvbdata[vpos]=vbdata[ci]+dy;++vpos;++ci;\r\n\t\t\t\tvbdata[vpos]=vbdata[ci];++vpos;++ci;\r\n\t\t\t\tvbdata[vpos]=vbdata[ci];++vpos;++ci;\r\n\t\t\t}\r\n\t\t\tvb._upload=true;\r\n\t\t}\r\n\r\n\t\tGlUtils.fillRectImgVb=function(vb,clip,x,y,width,height,uv,m,_x,_y,dx,dy,round){\r\n\t\t\t(round===void 0)&& (round=false);\r\n\t\t\t'use strict';\r\n\t\t\tvar mType=1;\r\n\t\t\tvar toBx,toBy,toEx,toEy;\r\n\t\t\tvar cBx,cBy,cEx,cEy;\r\n\t\t\tvar w0,h0,tx,ty;\r\n\t\t\tvar finalX,finalY,offsetX,offsetY;\r\n\t\t\tvar a=m.a,b=m.b,c=m.c,d=m.d;\r\n\t\t\tvar useClip=clip.width < 99999999;\r\n\t\t\tif (a!==1 || b!==0 || c!==0 || d!==1){\r\n\t\t\t\tm.bTransform=true;\r\n\t\t\t\tif (b===0 && c===0){\r\n\t\t\t\t\tmType=23;\r\n\t\t\t\t\tw0=width+x,h0=height+y;\r\n\t\t\t\t\ttx=m.tx+_x,ty=m.ty+_y;\r\n\t\t\t\t\ttoBx=a *x+tx;\r\n\t\t\t\t\ttoEx=a *w0+tx;\r\n\t\t\t\t\ttoBy=d *y+ty;\r\n\t\t\t\t\ttoEy=d *h0+ty;\r\n\t\t\t\t}\r\n\t\t\t\t}else {\r\n\t\t\t\tmType=23;\r\n\t\t\t\tm.bTransform=false;\r\n\t\t\t\ttoBx=x+m.tx+_x;\r\n\t\t\t\ttoEx=toBx+width;\r\n\t\t\t\ttoBy=y+m.ty+_y;\r\n\t\t\t\ttoEy=toBy+height;\r\n\t\t\t}\r\n\t\t\tif (useClip){\r\n\t\t\t\tcBx=clip.x,cBy=clip.y,cEx=clip.width+cBx,cEy=clip.height+cBy;\r\n\t\t\t}\r\n\t\t\tif (mType!==1 && (Math.min(toBx,toEx)>=cEx || Math.min(toBy ,toEy)>=cEy || Math.max(toEx,toBx)<=cBx || Math.max(toEy,toBy)<=cBy))\r\n\t\t\t\treturn false;\r\n\t\t\tvar vpos=(vb._byteLength >> 2);\r\n\t\t\tvb.byteLength=((vpos+16)<< 2);\r\n\t\t\tvar vbdata=vb.getFloat32Array();\r\n\t\t\tvbdata[vpos+2]=uv[0];\r\n\t\t\tvbdata[vpos+3]=uv[1];\r\n\t\t\tvbdata[vpos+6]=uv[2];\r\n\t\t\tvbdata[vpos+7]=uv[3];\r\n\t\t\tvbdata[vpos+10]=uv[4];\r\n\t\t\tvbdata[vpos+11]=uv[5];\r\n\t\t\tvbdata[vpos+14]=uv[6];\r\n\t\t\tvbdata[vpos+15]=uv[7];\r\n\t\t\tswitch (mType){\r\n\t\t\t\tcase 1:\r\n\t\t\t\t\ttx=m.tx+_x,ty=m.ty+_y;\r\n\t\t\t\t\tw0=width+x,h0=height+y;\r\n\t\t\t\t\tvar w1=x,h1=y;\r\n\t\t\t\t\tvar aw1=a *w1,ch1=c *h1,dh1=d *h1,bw1=b *w1;\r\n\t\t\t\t\tvar aw0=a *w0,ch0=c *h0,dh0=d *h0,bw0=b *w0;\r\n\t\t\t\t\tif (round){\r\n\t\t\t\t\t\tfinalX=aw1+ch1+tx;\r\n\t\t\t\t\t\toffsetX=Math.round(finalX)-finalX;\r\n\t\t\t\t\t\tfinalY=dh1+bw1+ty;\r\n\t\t\t\t\t\toffsetY=Math.round(finalY)-finalY;\r\n\t\t\t\t\t\tvbdata[vpos]=finalX+offsetX;\r\n\t\t\t\t\t\tvbdata[vpos+1]=finalY+offsetY;\r\n\t\t\t\t\t\tvbdata[vpos+4]=aw0+ch1+tx+offsetX;\r\n\t\t\t\t\t\tvbdata[vpos+5]=dh1+bw0+ty+offsetY;\r\n\t\t\t\t\t\tvbdata[vpos+8]=aw0+ch0+tx+offsetX;\r\n\t\t\t\t\t\tvbdata[vpos+9]=dh0+bw0+ty+offsetY;\r\n\t\t\t\t\t\tvbdata[vpos+12]=aw1+ch0+tx+offsetX;\r\n\t\t\t\t\t\tvbdata[vpos+13]=dh0+bw1+ty+offsetY;\r\n\t\t\t\t\t\t}else {\r\n\t\t\t\t\t\tvbdata[vpos]=aw1+ch1+tx;\r\n\t\t\t\t\t\tvbdata[vpos+1]=dh1+bw1+ty;\r\n\t\t\t\t\t\tvbdata[vpos+4]=aw0+ch1+tx;\r\n\t\t\t\t\t\tvbdata[vpos+5]=dh1+bw0+ty;\r\n\t\t\t\t\t\tvbdata[vpos+8]=aw0+ch0+tx;\r\n\t\t\t\t\t\tvbdata[vpos+9]=dh0+bw0+ty;\r\n\t\t\t\t\t\tvbdata[vpos+12]=aw1+ch0+tx;\r\n\t\t\t\t\t\tvbdata[vpos+13]=dh0+bw1+ty;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak ;\r\n\t\t\t\tcase 23:\r\n\t\t\t\t\tif (round){\r\n\t\t\t\t\t\tfinalX=toBx+dx;\r\n\t\t\t\t\t\toffsetX=Math.round(finalX)-finalX;\r\n\t\t\t\t\t\tfinalY=toBy;\r\n\t\t\t\t\t\toffsetY=Math.round(finalY)-finalY;\r\n\t\t\t\t\t\tvbdata[vpos]=finalX+offsetX;\r\n\t\t\t\t\t\tvbdata[vpos+1]=finalY+offsetY;\r\n\t\t\t\t\t\tvbdata[vpos+4]=toEx+dx+offsetX;\r\n\t\t\t\t\t\tvbdata[vpos+5]=toBy+offsetY;\r\n\t\t\t\t\t\tvbdata[vpos+8]=toEx+offsetX;\r\n\t\t\t\t\t\tvbdata[vpos+9]=toEy+offsetY;\r\n\t\t\t\t\t\tvbdata[vpos+12]=toBx+offsetX;\r\n\t\t\t\t\t\tvbdata[vpos+13]=toEy+offsetY;\r\n\t\t\t\t\t\t}else {\r\n\t\t\t\t\t\tvbdata[vpos]=toBx+dx;\r\n\t\t\t\t\t\tvbdata[vpos+1]=toBy;\r\n\t\t\t\t\t\tvbdata[vpos+4]=toEx+dx;\r\n\t\t\t\t\t\tvbdata[vpos+5]=toBy;\r\n\t\t\t\t\t\tvbdata[vpos+8]=toEx;\r\n\t\t\t\t\t\tvbdata[vpos+9]=toEy;\r\n\t\t\t\t\t\tvbdata[vpos+12]=toBx;\r\n\t\t\t\t\t\tvbdata[vpos+13]=toEy;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak ;\r\n\t\t\t\t}\r\n\t\t\tvb._upload=true;\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\tGlUtils.fillLineVb=function(vb,clip,fx,fy,tx,ty,width,mat){\r\n\t\t\t'use strict';\r\n\t\t\tvar linew=width *.5;\r\n\t\t\tvar data=GlUtils._fillLineArray;\r\n\t\t\tvar perpx=-(fy-ty),perpy=fx-tx;\r\n\t\t\tvar dist=Math.sqrt(perpx *perpx+perpy *perpy);\r\n\t\t\tperpx /=dist,perpy /=dist,perpx *=linew,perpy *=linew;\r\n\t\t\tdata[0]=fx-perpx,data[1]=fy-perpy,data[4]=fx+perpx,data[5]=fy+perpy,data[8]=tx+perpx,data[9]=ty+perpy,data[12]=tx-perpx,data[13]=ty-perpy;\r\n\t\t\tmat && mat.transformPointArray(data,data);\r\n\t\t\tvar vpos=(vb._byteLength >> 2)+16;\r\n\t\t\tvb.byteLength=(vpos << 2);\r\n\t\t\tvb.insertData(data,vpos-16);\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\tGlUtils._fillLineArray=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];\r\n\t\treturn GlUtils;\r\n\t})()\r\n\r\n\r\n\t//class laya.webgl.utils.MatirxArray\r\n\tvar MatirxArray=(function(){\r\n\t\tfunction MatirxArray(){};\r\n\t\t__class(MatirxArray,'laya.webgl.utils.MatirxArray');\r\n\t\tMatirxArray.ArrayMul=function(a,b,o){\r\n\t\t\tif (!a){\r\n\t\t\t\tMatirxArray.copyArray(b,o);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (!b){\r\n\t\t\t\tMatirxArray.copyArray(a,o);\r\n\t\t\t\treturn;\r\n\t\t\t};\r\n\t\t\tvar ai0=NaN,ai1=NaN,ai2=NaN,ai3=NaN;\r\n\t\t\tfor (var i=0;i < 4;i++){\r\n\t\t\t\tai0=a[i];\r\n\t\t\t\tai1=a[i+4];\r\n\t\t\t\tai2=a[i+8];\r\n\t\t\t\tai3=a[i+12];\r\n\t\t\t\to[i]=ai0 *b[0]+ai1 *b[1]+ai2 *b[2]+ai3 *b[3];\r\n\t\t\t\to[i+4]=ai0 *b[4]+ai1 *b[5]+ai2 *b[6]+ai3 *b[7];\r\n\t\t\t\to[i+8]=ai0 *b[8]+ai1 *b[9]+ai2 *b[10]+ai3 *b[11];\r\n\t\t\t\to[i+12]=ai0 *b[12]+ai1 *b[13]+ai2 *b[14]+ai3 *b[15];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tMatirxArray.copyArray=function(f,t){\r\n\t\t\tif (!f)return;\r\n\t\t\tif (!t)return;\r\n\t\t\tfor (var i=0;i < f.length;i++){\r\n\t\t\t\tt[i]=f[i];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn MatirxArray;\r\n\t})()\r\n\r\n\r\n\t//class laya.webgl.utils.RenderState2D\r\n\tvar RenderState2D=(function(){\r\n\t\tfunction RenderState2D(){};\r\n\t\t__class(RenderState2D,'laya.webgl.utils.RenderState2D');\r\n\t\tRenderState2D.getMatrArray=function(){\r\n\t\t\treturn [1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];\r\n\t\t}\r\n\r\n\t\tRenderState2D.mat2MatArray=function(mat,matArray){\r\n\t\t\tvar m=mat;\r\n\t\t\tvar m4=matArray;\r\n\t\t\tm4[0]=m.a;\r\n\t\t\tm4[1]=m.b;\r\n\t\t\tm4[4]=m.c;\r\n\t\t\tm4[5]=m.d;\r\n\t\t\tm4[12]=m.tx;\r\n\t\t\tm4[13]=m.ty;\r\n\t\t\treturn matArray;\r\n\t\t}\r\n\r\n\t\tRenderState2D.restoreTempArray=function(){\r\n\t\t\tRenderState2D.TEMPMAT4_ARRAY[0]=1;\r\n\t\t\tRenderState2D.TEMPMAT4_ARRAY[1]=0;\r\n\t\t\tRenderState2D.TEMPMAT4_ARRAY[4]=0;\r\n\t\t\tRenderState2D.TEMPMAT4_ARRAY[5]=1;\r\n\t\t\tRenderState2D.TEMPMAT4_ARRAY[12]=0;\r\n\t\t\tRenderState2D.TEMPMAT4_ARRAY[13]=0;\r\n\t\t}\r\n\r\n\t\tRenderState2D.clear=function(){\r\n\t\t\tRenderState2D.worldScissorTest=false;\r\n\t\t\tRenderState2D.worldShaderDefines=null;\r\n\t\t\tRenderState2D.worldFilters=null;\r\n\t\t\tRenderState2D.worldAlpha=1;\r\n\t\t\tRenderState2D.worldClipRect.x=RenderState2D.worldClipRect.y=0;\r\n\t\t\tRenderState2D.worldClipRect.width=RenderState2D.width;\r\n\t\t\tRenderState2D.worldClipRect.height=RenderState2D.height;\r\n\t\t\tRenderState2D.curRenderTarget=null;\r\n\t\t}\r\n\r\n\t\tRenderState2D._MAXSIZE=99999999;\r\n\t\tRenderState2D.EMPTYMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];\r\n\t\tRenderState2D.TEMPMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];\r\n\t\tRenderState2D.worldMatrix4=RenderState2D.TEMPMAT4_ARRAY;\r\n\t\tRenderState2D.worldAlpha=1.0;\r\n\t\tRenderState2D.worldScissorTest=false;\r\n\t\tRenderState2D.worldFilters=null\r\n\t\tRenderState2D.worldShaderDefines=null\r\n\t\tRenderState2D.worldClipRect=new Rectangle(0,0,99999999,99999999);\r\n\t\tRenderState2D.curRenderTarget=null\r\n\t\tRenderState2D.width=0;\r\n\t\tRenderState2D.height=0;\r\n\t\t__static(RenderState2D,\r\n\t\t['worldMatrix',function(){return this.worldMatrix=new Matrix();}\r\n\t\t]);\r\n\t\treturn RenderState2D;\r\n\t})()\r\n\r\n\r\n\t//class laya.webgl.utils.ShaderCompile\r\n\tvar ShaderCompile=(function(){\r\n\t\tvar ShaderScriptBlock;\r\n\t\tfunction ShaderCompile(name,vs,ps,nameMap,includeFiles){\r\n\t\t\t//this._VS=null;\r\n\t\t\t//this._PS=null;\r\n\t\t\t//this._VSTXT=null;\r\n\t\t\t//this._PSTXT=null;\r\n\t\t\t//this._nameMap=null;\r\n\t\t\tthis._VSTXT=vs;\r\n\t\t\tthis._PSTXT=ps;\r\n\t\t\tfunction split (str){\r\n\t\t\t\tvar words=str.split(' ');\r\n\t\t\t\tvar out=[];\r\n\t\t\t\tfor (var i=0;i < words.length;i++)\r\n\t\t\t\twords[i].length > 0 && out.push(words[i]);\r\n\t\t\t\treturn out;\r\n\t\t\t}\r\n\t\t\tfunction c (script){\r\n\t\t\t\tvar i=0,n=0,ofs=0,words,condition;\r\n\t\t\t\tvar top=new ShaderScriptBlock(0,null,null,null);\r\n\t\t\t\tvar parent=top;\r\n\t\t\t\tvar lines=script.split('\\n');\r\n\t\t\t\tfor (i=0,n=lines.length;i < n;i++){\r\n\t\t\t\t\tvar line=lines[i];\r\n\t\t\t\t\tif (line.indexOf(\"#ifdef\")>=0){\r\n\t\t\t\t\t\twords=split(line);\r\n\t\t\t\t\t\tparent=new ShaderScriptBlock(1,words[1],\"\",parent);\r\n\t\t\t\t\t\tcontinue ;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (line.indexOf(\"#else\")>=0){\r\n\t\t\t\t\t\tcondition=parent.condition;\r\n\t\t\t\t\t\tparent=new ShaderScriptBlock(2,null,\"\",parent.parent);\r\n\t\t\t\t\t\tparent.condition=condition;\r\n\t\t\t\t\t\tcontinue ;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (line.indexOf(\"#endif\")>=0){\r\n\t\t\t\t\t\tparent=parent.parent;\r\n\t\t\t\t\t\tcontinue ;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (line.indexOf(\"#include\")>=0){\r\n\t\t\t\t\t\twords=split(line);\r\n\t\t\t\t\t\tvar fname=words[1];\r\n\t\t\t\t\t\tvar chr=fname.charAt(0);\r\n\t\t\t\t\t\tif (chr==='\"' || chr===\"'\"){\r\n\t\t\t\t\t\t\tfname=fname.substr(1,fname.length-2);\r\n\t\t\t\t\t\t\tofs=fname.lastIndexOf(chr);\r\n\t\t\t\t\t\t\tif (ofs > 0)fname=fname.substr(0,ofs);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tofs=words[0].indexOf('?');\r\n\t\t\t\t\t\tvar str=ofs > 0 ? words[0].substr(ofs+1):words[0];\r\n\t\t\t\t\t\tnew ShaderScriptBlock(1,str,includeFiles[fname],parent);\r\n\t\t\t\t\t\tcontinue ;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (parent.childs.length > 0 && parent.childs[parent.childs.length-1].type===0){\r\n\t\t\t\t\t\tparent.childs[parent.childs.length-1].text+=\"\\n\"+line;\r\n\t\t\t\t\t}else new ShaderScriptBlock(0,null,line,parent);\r\n\t\t\t\t}\r\n\t\t\t\treturn top;\r\n\t\t\t}\r\n\t\t\tthis._VS=c(vs);\r\n\t\t\tthis._PS=c(ps);\r\n\t\t\tthis._nameMap=nameMap;\r\n\t\t}\r\n\r\n\t\t__class(ShaderCompile,'laya.webgl.utils.ShaderCompile');\r\n\t\tvar __proto=ShaderCompile.prototype;\r\n\t\t__proto.createShader=function(define,shaderName,createShader){\r\n\t\t\tvar defMap={};\r\n\t\t\tvar defineStr=\"\";\r\n\t\t\tif (define){\r\n\t\t\t\tfor (var i in define){\r\n\t\t\t\t\tdefineStr+=\"#define \"+i+\"\\n\";\r\n\t\t\t\t\tdefMap[i]=true;\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\tvar vs=this._VS.toscript(defMap,[]);\r\n\t\t\tvar ps=this._PS.toscript(defMap,[]);\r\n\t\t\treturn (createShader || Shader.create)(defineStr+vs.join('\\n'),defineStr+ps.join('\\n'),shaderName,this._nameMap);\r\n\t\t}\r\n\r\n\t\tShaderCompile.IFDEF_NO=0;\r\n\t\tShaderCompile.IFDEF_YES=1;\r\n\t\tShaderCompile.IFDEF_ELSE=2;\r\n\t\tShaderCompile.__init$=function(){\r\n\t\t\t//class ShaderScriptBlock\r\n\t\t\tShaderScriptBlock=(function(){\r\n\t\t\t\tfunction ShaderScriptBlock(type,condition,text,parent){\r\n\t\t\t\t\t//this.type=0;\r\n\t\t\t\t\t//this.condition=null;\r\n\t\t\t\t\t//this.text=null;\r\n\t\t\t\t\t//this.parent=null;\r\n\t\t\t\t\tthis.childs=new Array;\r\n\t\t\t\t\tthis.type=type;\r\n\t\t\t\t\tthis.text=text;\r\n\t\t\t\t\tthis.parent=parent;\r\n\t\t\t\t\tparent && parent.childs.push(this);\r\n\t\t\t\t\tif (!condition)return;\r\n\t\t\t\t\tvar newcondition=\"\";\r\n\t\t\t\t\tvar preIsParam=false,isParam=false;\r\n\t\t\t\t\tfor (var i=0,n=condition.length;i < n;i++){\r\n\t\t\t\t\t\tvar c=condition.charAt(i);\r\n\t\t\t\t\t\tisParam=\"!&|() \\t\".indexOf(c)< 0;\r\n\t\t\t\t\t\tif (preIsParam !=isParam){\r\n\t\t\t\t\t\t\tisParam && (newcondition+=\"this.\");\r\n\t\t\t\t\t\t\tpreIsParam=isParam;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tnewcondition+=c;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.condition=RunDriver.createShaderCondition(newcondition);\r\n\t\t\t\t}\r\n\t\t\t\t__class(ShaderScriptBlock,'');\r\n\t\t\t\tvar __proto=ShaderScriptBlock.prototype;\r\n\t\t\t\t__proto.toscript=function(def,out){\r\n\t\t\t\t\tif (this.type===0){\r\n\t\t\t\t\t\tthis.text && out.push(this.text);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (this.childs.length < 1 && !this.text)return out;\r\n\t\t\t\t\tif (this.type!==0){\r\n\t\t\t\t\t\tvar ifdef=!!this.condition.call(def);\r\n\t\t\t\t\t\tthis.type===2 && (ifdef=!ifdef);\r\n\t\t\t\t\t\tif (!ifdef)return out;\r\n\t\t\t\t\t\tthis.text && out.push(this.text);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.childs.length > 0 && this.childs.forEach(function(o,index,arr){\r\n\t\t\t\t\t\to.toscript(def,out)\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn out;\r\n\t\t\t\t}\r\n\t\t\t\treturn ShaderScriptBlock;\r\n\t\t\t})()\r\n\t\t}\r\n\r\n\t\treturn ShaderCompile;\r\n\t})()\r\n\r\n\r\n\t/**\r\n\t*@private\r\n\t*/\r\n\t//class laya.webgl.WebGL\r\n\tvar WebGL=(function(){\r\n\t\tfunction WebGL(){};\r\n\t\t__class(WebGL,'laya.webgl.WebGL');\r\n\t\tWebGL._float32ArraySlice=function(){\r\n\t\t\tvar _this=this;\r\n\t\t\tvar sz=_this.length;\r\n\t\t\tvar dec=new Float32Array(_this.length);\r\n\t\t\tfor (var i=0;i < sz;i++)dec[i]=_this[i];\r\n\t\t\treturn dec;\r\n\t\t}\r\n\r\n\t\tWebGL._uint16ArraySlice=function(__arg){\r\n\t\t\tvar arg=arguments;\r\n\t\t\tvar _this=this;\r\n\t\t\tvar sz=0;\r\n\t\t\tvar dec;\r\n\t\t\tvar i=0;\r\n\t\t\tif (arg.length===0){\r\n\t\t\t\tsz=_this.length;\r\n\t\t\t\tdec=new Uint16Array(sz);\r\n\t\t\t\tfor (i=0;i < sz;i++)\r\n\t\t\t\tdec[i]=_this[i];\r\n\t\t\t\t}else if (arg.length===2){\r\n\t\t\t\tvar start=arg[0];\r\n\t\t\t\tvar end=arg[1];\r\n\t\t\t\tif (end > start){\r\n\t\t\t\t\tsz=end-start;\r\n\t\t\t\t\tdec=new Uint16Array(sz);\r\n\t\t\t\t\tfor (i=start;i < end;i++)\r\n\t\t\t\t\tdec[i-start]=_this[i];\r\n\t\t\t\t\t}else {\r\n\t\t\t\t\tdec=new Uint16Array(0);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn dec;\r\n\t\t}\r\n\r\n\t\tWebGL.expandContext=function(){\r\n\t\t\tvar from=Context.prototype;\r\n\t\t\tvar to=CanvasRenderingContext2D.prototype;\r\n\t\t\tto.fillTrangles=from.fillTrangles;\r\n\t\t\tBuffer2D.__int__(null);\r\n\t\t\tto.setIBVB=function (x,y,ib,vb,numElement,mat,shader,shaderValues,startIndex,offset){\r\n\t\t\t\t(startIndex===void 0)&& (startIndex=0);\r\n\t\t\t\t(offset===void 0)&& (offset=0);\r\n\t\t\t\tif (ib===null){\r\n\t\t\t\t\tthis._ib=this._ib || IndexBuffer2D.QuadrangleIB;\r\n\t\t\t\t\tib=this._ib;\r\n\t\t\t\t\tGlUtils.expandIBQuadrangle(ib,(vb.byteLength / (4 *16)+8));\r\n\t\t\t\t}\r\n\t\t\t\tthis._setIBVB(x,y,ib,vb,numElement,mat,shader,shaderValues,startIndex,offset);\r\n\t\t\t};\r\n\t\t\tto.fillTrangles=function (tex,x,y,points,m){\r\n\t\t\t\tthis._curMat=this._curMat || Matrix.create();\r\n\t\t\t\tthis._vb=this._vb || VertexBuffer2D.create();\r\n\t\t\t\tif (!this._ib){\r\n\t\t\t\t\tthis._ib=IndexBuffer2D.create();\r\n\t\t\t\t\tGlUtils.fillIBQuadrangle(this._ib,length / 4);\r\n\t\t\t\t};\r\n\t\t\t\tvar vb=this._vb;\r\n\t\t\t\tvar length=points.length >> 4;\r\n\t\t\t\tGlUtils.fillTranglesVB(vb,x,y,points,m || this._curMat,0,0);\r\n\t\t\t\tGlUtils.expandIBQuadrangle(this._ib,(vb.byteLength / (4 *16)+8));\r\n\t\t\t\tvar shaderValues=new Value2D(0x01,0);\r\n\t\t\t\tshaderValues.textureHost=tex;\r\n\t\t\t\tvar sd=new Shader2X(\"attribute vec2 position; attribute vec2 texcoord; uniform vec2 size; uniform mat4 mmat; varying vec2 v_texcoord; void main() { vec4 p=vec4(position.xy,0.0,1.0);vec4 pos=mmat*p; gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0); v_texcoord = texcoord; }\",\"precision mediump float; varying vec2 v_texcoord; uniform sampler2D texture; void main() {vec4 color= texture2D(texture, v_texcoord); color.a*=1.0; gl_FragColor= color;}\");\r\n\t\t\t\tvb._vertType=3;\r\n\t\t\t\tthis._setIBVB(x,y,this._ib,vb,length *6,m,sd,shaderValues,0,0);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tWebGL.enable=function(){\r\n\t\t\tif (Render.isConchApp){\r\n\t\t\t\tif (!Render.isConchWebGL){\r\n\t\t\t\t\tRunDriver.skinAniSprite=function (){\r\n\t\t\t\t\t\tvar tSkinSprite=new SkinMesh()\r\n\t\t\t\t\t\treturn tSkinSprite;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tWebGL.expandContext();\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (!WebGL.isWebGLSupported())return false;\r\n\t\t\tif (Render.isWebGL)return true;\r\n\t\t\tHTMLImage.create=function (src,def){\r\n\t\t\t\treturn new WebGLImage(src,def);\r\n\t\t\t}\r\n\t\t\tRender.WebGL=WebGL;\r\n\t\t\tRender.isWebGL=true;\r\n\t\t\tDrawText.__init__();\r\n\t\t\tRunDriver.createRenderSprite=function (type,next){\r\n\t\t\t\treturn new RenderSprite3D(type,next);\r\n\t\t\t}\r\n\t\t\tRunDriver.createWebGLContext2D=function (c){\r\n\t\t\t\treturn new WebGLContext2D(c);\r\n\t\t\t}\r\n\t\t\tRunDriver.changeWebGLSize=function (width,height){\r\n\t\t\t\tlaya.webgl.WebGL.onStageResize(width,height);\r\n\t\t\t}\r\n\t\t\tRunDriver.createGraphics=function (){\r\n\t\t\t\treturn new GraphicsGL();\r\n\t\t\t};\r\n\t\t\tvar action=RunDriver.createFilterAction;\r\n\t\t\tRunDriver.createFilterAction=action ? action :function (type){\r\n\t\t\t\treturn new ColorFilterActionGL()\r\n\t\t\t}\r\n\t\t\tRunDriver.clear=function (color){\r\n\t\t\t\tRenderState2D.worldScissorTest && laya.webgl.WebGL.mainContext.disable(0x0C11);\r\n\t\t\t\tif (color==null){\r\n\t\t\t\t\tRender.context.ctx.clearBG(0,0,0,0);\r\n\t\t\t\t\t}else {\r\n\t\t\t\t\tvar c=Color.create(color)._color;\r\n\t\t\t\t\tRender.context.ctx.clearBG(c[0],c[1],c[2],c[3]);\r\n\t\t\t\t}\r\n\t\t\t\tRenderState2D.clear();\r\n\t\t\t}\r\n\t\t\tRunDriver.addToAtlas=function (texture,force){\r\n\t\t\t\t(force===void 0)&& (force=false);\r\n\t\t\t\tvar bitmap=texture.bitmap;\r\n\t\t\t\tif (!Render.optimizeTextureMemory(texture.url,texture)){\r\n\t\t\t\t\t(bitmap).enableMerageInAtlas=false;\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif ((Laya.__typeof(bitmap,'laya.webgl.resource.IMergeAtlasBitmap'))&& ((bitmap).allowMerageInAtlas)){\r\n\t\t\t\t\tbitmap.on(\"recovered\",texture,texture.addTextureToAtlas);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tAtlasResourceManager._enable();\r\n\t\t\tRunDriver.beginFlush=function (){\r\n\t\t\t\tvar atlasResourceManager=AtlasResourceManager.instance;\r\n\t\t\t\tvar count=atlasResourceManager.getAtlaserCount();\r\n\t\t\t\tfor (var i=0;i < count;i++){\r\n\t\t\t\t\tvar atlerCanvas=atlasResourceManager.getAtlaserByIndex(i).texture;\r\n\t\t\t\t\t(atlerCanvas._flashCacheImageNeedFlush)&& (RunDriver.flashFlushImage(atlerCanvas));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tRunDriver.drawToCanvas=function (sprite,_renderType,canvasWidth,canvasHeight,offsetX,offsetY){\r\n\t\t\t\tvar renderTarget=new RenderTarget2D(canvasWidth,canvasHeight,0x1908,0x1401,0,false);\r\n\t\t\t\trenderTarget.start();\r\n\t\t\t\trenderTarget.clear(1.0,0.0,0.0,1.0);\r\n\t\t\t\tsprite.render(Render.context,-offsetX,RenderState2D.height-canvasHeight-offsetY);\r\n\t\t\t\tRender.context.flush();\r\n\t\t\t\trenderTarget.end();\r\n\t\t\t\tvar pixels=renderTarget.getData(0,0,renderTarget.width,renderTarget.height);\r\n\t\t\t\trenderTarget.dispose();\r\n\t\t\t\treturn pixels;\r\n\t\t\t}\r\n\t\t\tRunDriver.createFilterAction=function (type){\r\n\t\t\t\tvar action;\r\n\t\t\t\tswitch (type){\r\n\t\t\t\t\tcase 0x20:\r\n\t\t\t\t\t\taction=new ColorFilterActionGL();\r\n\t\t\t\t\t\tbreak ;\r\n\t\t\t\t\t}\r\n\t\t\t\treturn action;\r\n\t\t\t}\r\n\t\t\tRunDriver.addTextureToAtlas=function (texture){\r\n\t\t\t\ttexture._uvID++;\r\n\t\t\t\tAtlasResourceManager._atlasRestore++;\r\n\t\t\t\t((texture.bitmap).enableMerageInAtlas)&& (AtlasResourceManager.instance.addToAtlas(texture));\r\n\t\t\t}\r\n\t\t\tRunDriver.getTexturePixels=function (value,x,y,width,height){\r\n\t\t\t\t(Render.context.ctx).clear();\r\n\t\t\t\tvar tSprite=new Sprite();\r\n\t\t\t\ttSprite.graphics.drawTexture(value,-x,-y);\r\n\t\t\t\tvar tRenderTarget=RenderTarget2D.create(width,height);\r\n\t\t\t\ttRenderTarget.start();\r\n\t\t\t\ttRenderTarget.clear(0,0,0,0);\r\n\t\t\t\ttSprite.render(Render.context,0,0);\r\n\t\t\t\t(Render.context.ctx).flush();\r\n\t\t\t\ttRenderTarget.end();\r\n\t\t\t\tvar tUint8Array=tRenderTarget.getData(0,0,width,height);\r\n\t\t\t\tvar tArray=[];\r\n\t\t\t\tvar tIndex=0;\r\n\t\t\t\tfor (var i=height-1;i >=0;i--){\r\n\t\t\t\t\tfor (var j=0;j < width;j++){\r\n\t\t\t\t\t\ttIndex=(i *width+j)*4;\r\n\t\t\t\t\t\ttArray.push(tUint8Array[tIndex]);\r\n\t\t\t\t\t\ttArray.push(tUint8Array[tIndex+1]);\r\n\t\t\t\t\t\ttArray.push(tUint8Array[tIndex+2]);\r\n\t\t\t\t\t\ttArray.push(tUint8Array[tIndex+3]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn tArray;\r\n\t\t\t}\r\n\t\t\tRunDriver.skinAniSprite=function (){\r\n\t\t\t\tvar tSkinSprite=new SkinMesh()\r\n\t\t\t\treturn tSkinSprite;\r\n\t\t\t}\r\n\t\t\tFilter._filterStart=function (scope,sprite,context,x,y){\r\n\t\t\t\tvar b=scope.getValue(\"bounds\");\r\n\t\t\t\tvar source=RenderTarget2D.create(b.width,b.height);\r\n\t\t\t\tsource.start();\r\n\t\t\t\tsource.clear(0,0,0,0);\r\n\t\t\t\tscope.addValue(\"src\",source);\r\n\t\t\t\tscope.addValue(\"ScissorTest\",RenderState2D.worldScissorTest);\r\n\t\t\t\tif (RenderState2D.worldScissorTest){\r\n\t\t\t\t\tvar tClilpRect=new Rectangle();\r\n\t\t\t\t\ttClilpRect.copyFrom((context.ctx)._clipRect)\r\n\t\t\t\t\tscope.addValue(\"clipRect\",tClilpRect);\r\n\t\t\t\t\tRenderState2D.worldScissorTest=false;\r\n\t\t\t\t\tlaya.webgl.WebGL.mainContext.disable(0x0C11);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tFilter._filterEnd=function (scope,sprite,context,x,y){\r\n\t\t\t\tvar b=scope.getValue(\"bounds\");\r\n\t\t\t\tvar source=scope.getValue(\"src\");\r\n\t\t\t\tsource.end();\r\n\t\t\t\tvar out=RenderTarget2D.create(b.width,b.height);\r\n\t\t\t\tout.start();\r\n\t\t\t\tout.clear(0,0,0,0);\r\n\t\t\t\tscope.addValue(\"out\",out);\r\n\t\t\t\tsprite._set$P('_filterCache',out);\r\n\t\t\t\tsprite._set$P('_isHaveGlowFilter',scope.getValue(\"_isHaveGlowFilter\"));\r\n\t\t\t}\r\n\t\t\tFilter._EndTarget=function (scope,context){\r\n\t\t\t\tvar source=scope.getValue(\"src\");\r\n\t\t\t\tsource.recycle();\r\n\t\t\t\tvar out=scope.getValue(\"out\");\r\n\t\t\t\tout.end();\r\n\t\t\t\tvar b=scope.getValue(\"ScissorTest\");\r\n\t\t\t\tif (b){\r\n\t\t\t\t\tRenderState2D.worldScissorTest=true;\r\n\t\t\t\t\tlaya.webgl.WebGL.mainContext.enable(0x0C11);\r\n\t\t\t\t\tcontext.ctx.save();\r\n\t\t\t\t\tvar tClipRect=scope.getValue(\"clipRect\");\r\n\t\t\t\t\t(context.ctx).clipRect(tClipRect.x,tClipRect.y,tClipRect.width,tClipRect.height);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tFilter._useSrc=function (scope){\r\n\t\t\t\tvar source=scope.getValue(\"out\");\r\n\t\t\t\tsource.end();\r\n\t\t\t\tsource=scope.getValue(\"src\");\r\n\t\t\t\tsource.start();\r\n\t\t\t\tsource.clear(0,0,0,0);\r\n\t\t\t}\r\n\t\t\tFilter._endSrc=function (scope){\r\n\t\t\t\tvar source=scope.getValue(\"src\");\r\n\t\t\t\tsource.end();\r\n\t\t\t}\r\n\t\t\tFilter._useOut=function (scope){\r\n\t\t\t\tvar source=scope.getValue(\"src\");\r\n\t\t\t\tsource.end();\r\n\t\t\t\tsource=scope.getValue(\"out\");\r\n\t\t\t\tsource.start();\r\n\t\t\t\tsource.clear(0,0,0,0);\r\n\t\t\t}\r\n\t\t\tFilter._endOut=function (scope){\r\n\t\t\t\tvar source=scope.getValue(\"out\");\r\n\t\t\t\tsource.end();\r\n\t\t\t}\r\n\t\t\tFilter._recycleScope=function (scope){\r\n\t\t\t\tscope.recycle();\r\n\t\t\t}\r\n\t\t\tFilter._filter=function (sprite,context,x,y){\r\n\t\t\t\tvar next=this._next;\r\n\t\t\t\tif (next){\r\n\t\t\t\t\tvar filters=sprite.filters,len=filters.length;\r\n\t\t\t\t\tif (len==1 && (filters[0].type==0x20)){\r\n\t\t\t\t\t\tcontext.ctx.save();\r\n\t\t\t\t\t\tcontext.ctx.setFilters([filters[0]]);\r\n\t\t\t\t\t\tnext._fun.call(next,sprite,context,x,y);\r\n\t\t\t\t\t\tcontext.ctx.restore();\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t};\r\n\t\t\t\t\tvar shaderValue;\r\n\t\t\t\t\tvar b;\r\n\t\t\t\t\tvar scope=SubmitCMDScope.create();\r\n\t\t\t\t\tvar p=Point.TEMP;\r\n\t\t\t\t\tvar tMatrix=context.ctx._getTransformMatrix();\r\n\t\t\t\t\tvar mat=Matrix.create();\r\n\t\t\t\t\ttMatrix.copyTo(mat);\r\n\t\t\t\t\tvar tPadding=0;\r\n\t\t\t\t\tvar tHalfPadding=0;\r\n\t\t\t\t\tvar tIsHaveGlowFilter=false;\r\n\t\t\t\t\tvar out=sprite._$P._filterCache ? sprite._$P._filterCache :null;\r\n\t\t\t\t\tif (!out || sprite._repaint){\r\n\t\t\t\t\t\ttIsHaveGlowFilter=sprite._isHaveGlowFilter();\r\n\t\t\t\t\t\tscope.addValue(\"_isHaveGlowFilter\",tIsHaveGlowFilter);\r\n\t\t\t\t\t\tif (tIsHaveGlowFilter){\r\n\t\t\t\t\t\t\ttPadding=50;\r\n\t\t\t\t\t\t\ttHalfPadding=25;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tb=new Rectangle();\r\n\t\t\t\t\t\tb.copyFrom((sprite).getSelfBounds());\r\n\t\t\t\t\t\tb.x+=(sprite).x;\r\n\t\t\t\t\t\tb.y+=(sprite).y;\r\n\t\t\t\t\t\tb.x-=(sprite).pivotX;\r\n\t\t\t\t\t\tb.y-=(sprite).pivotY;\r\n\t\t\t\t\t\tvar tSX=b.x;\r\n\t\t\t\t\t\tvar tSY=b.y;\r\n\t\t\t\t\t\tb.width+=tPadding;\r\n\t\t\t\t\t\tb.height+=tPadding;\r\n\t\t\t\t\t\tp.x=b.x *mat.a+b.y *mat.c;\r\n\t\t\t\t\t\tp.y=b.y *mat.d+b.x *mat.b;\r\n\t\t\t\t\t\tb.x=p.x;\r\n\t\t\t\t\t\tb.y=p.y;\r\n\t\t\t\t\t\tp.x=b.width *mat.a+b.height *mat.c;\r\n\t\t\t\t\t\tp.y=b.height *mat.d+b.width *mat.b;\r\n\t\t\t\t\t\tb.width=p.x;\r\n\t\t\t\t\t\tb.height=p.y;\r\n\t\t\t\t\t\tif (b.width <=0 || b.height <=0){\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tout && out.recycle();\r\n\t\t\t\t\t\tscope.addValue(\"bounds\",b);\r\n\t\t\t\t\t\tvar submit=SubmitCMD.create([scope,sprite,context,0,0],Filter._filterStart);\r\n\t\t\t\t\t\tcontext.addRenderObject(submit);\r\n\t\t\t\t\t\t(context.ctx)._renderKey=0;\r\n\t\t\t\t\t\t(context.ctx)._shader2D.glTexture=null;\r\n\t\t\t\t\t\tvar tX=sprite.x-tSX+tHalfPadding;\r\n\t\t\t\t\t\tvar tY=sprite.y-tSY+tHalfPadding;\r\n\t\t\t\t\t\tnext._fun.call(next,sprite,context,tX,tY);\r\n\t\t\t\t\t\tsubmit=SubmitCMD.create([scope,sprite,context,0,0],Filter._filterEnd);\r\n\t\t\t\t\t\tcontext.addRenderObject(submit);\r\n\t\t\t\t\t\tfor (var i=0;i < len;i++){\r\n\t\t\t\t\t\t\tif (i !=0){\r\n\t\t\t\t\t\t\t\tsubmit=SubmitCMD.create([scope],Filter._useSrc);\r\n\t\t\t\t\t\t\t\tcontext.addRenderObject(submit);\r\n\t\t\t\t\t\t\t\tshaderValue=Value2D.create(0x01,0);\r\n\t\t\t\t\t\t\t\tMatrix.TEMP.identity();\r\n\t\t\t\t\t\t\t\tcontext.ctx.drawTarget(scope,0,0,b.width,b.height,Matrix.TEMP,\"out\",shaderValue,null,BlendMode.TOINT.overlay);\r\n\t\t\t\t\t\t\t\tsubmit=SubmitCMD.create([scope],Filter._useOut);\r\n\t\t\t\t\t\t\t\tcontext.addRenderObject(submit);\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\tvar fil=filters[i];\r\n\t\t\t\t\t\t\tfil.action.apply3d(scope,sprite,context,0,0);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tsubmit=SubmitCMD.create([scope,context],Filter._EndTarget);\r\n\t\t\t\t\t\tcontext.addRenderObject(submit);\r\n\t\t\t\t\t\t}else {\r\n\t\t\t\t\t\ttIsHaveGlowFilter=sprite._$P._isHaveGlowFilter ? sprite._$P._isHaveGlowFilter :false;\r\n\t\t\t\t\t\tif (tIsHaveGlowFilter){\r\n\t\t\t\t\t\t\ttPadding=50;\r\n\t\t\t\t\t\t\ttHalfPadding=25;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tb=sprite.getBounds();\r\n\t\t\t\t\t\tif (b.width <=0 || b.height <=0){\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tb.width+=tPadding;\r\n\t\t\t\t\t\tb.height+=tPadding;\r\n\t\t\t\t\t\tp.x=b.x *mat.a+b.y *mat.c;\r\n\t\t\t\t\t\tp.y=b.y *mat.d+b.x *mat.b;\r\n\t\t\t\t\t\tb.x=p.x;\r\n\t\t\t\t\t\tb.y=p.y;\r\n\t\t\t\t\t\tp.x=b.width *mat.a+b.height *mat.c;\r\n\t\t\t\t\t\tp.y=b.height *mat.d+b.width *mat.b;\r\n\t\t\t\t\t\tb.width=p.x;\r\n\t\t\t\t\t\tb.height=p.y;\r\n\t\t\t\t\t\tscope.addValue(\"out\",out);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tx=x-tHalfPadding-sprite.x;\r\n\t\t\t\t\ty=y-tHalfPadding-sprite.y;\r\n\t\t\t\t\tp.setTo(x,y);\r\n\t\t\t\t\tmat.transformPoint(p);\r\n\t\t\t\t\tx=p.x+b.x;\r\n\t\t\t\t\ty=p.y+b.y;\r\n\t\t\t\t\tshaderValue=Value2D.create(0x01,0);\r\n\t\t\t\t\tMatrix.TEMP.identity();\r\n\t\t\t\t\t(context.ctx).drawTarget(scope,x,y,b.width,b.height,Matrix.TEMP,\"out\",shaderValue,null,BlendMode.TOINT.overlay);\r\n\t\t\t\t\tsubmit=SubmitCMD.create([scope],Filter._recycleScope);\r\n\t\t\t\t\tcontext.addRenderObject(submit);\r\n\t\t\t\t\tmat.destroy();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tFloat32Array.prototype.slice || (Float32Array.prototype.slice=WebGL._float32ArraySlice);\r\n\t\t\tUint16Array.prototype.slice || (Uint16Array.prototype.slice=WebGL._uint16ArraySlice);\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\tWebGL.isWebGLSupported=function(){\r\n\t\t\tvar canvas=Browser.createElement('canvas');\r\n\t\t\tvar gl;\r\n\t\t\tvar names=[\"webgl\",\"experimental-webgl\",\"webkit-3d\",\"moz-webgl\"];\r\n\t\t\tfor (var i=0;i < names.length;i++){\r\n\t\t\t\ttry {\r\n\t\t\t\t\tgl=canvas.getContext(names[i]);\r\n\t\t\t\t}catch (e){}\r\n\t\t\t\tif (gl)return names[i];\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\tWebGL.onStageResize=function(width,height){\r\n\t\t\tif (WebGL.mainContext==null)return;\r\n\t\t\tWebGL.mainContext.viewport(0,0,width,height);\r\n\t\t\tRenderState2D.width=width;\r\n\t\t\tRenderState2D.height=height;\r\n\t\t}\r\n\r\n\t\tWebGL.isExperimentalWebgl=function(){\r\n\t\t\treturn WebGL._isExperimentalWebgl;\r\n\t\t}\r\n\r\n\t\tWebGL.addRenderFinish=function(){\r\n\t\t\tif (WebGL._isExperimentalWebgl || Render.isFlash){\r\n\t\t\t\tRunDriver.endFinish=function (){\r\n\t\t\t\t\tRender.context.ctx.finish();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tWebGL.removeRenderFinish=function(){\r\n\t\t\tif (WebGL._isExperimentalWebgl){\r\n\t\t\t\tRunDriver.endFinish=function (){}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tWebGL.onInvalidGLRes=function(){\r\n\t\t\tAtlasResourceManager.instance.freeAll();\r\n\t\t\tResourceManager.releaseContentManagers(true);\r\n\t\t\tWebGL.doNodeRepaint(Laya.stage);\r\n\t\t\tWebGL.mainContext.viewport(0,0,RenderState2D.width,RenderState2D.height);\r\n\t\t\tLaya.stage.event(\"devicelost\");\r\n\t\t}\r\n\r\n\t\tWebGL.doNodeRepaint=function(sprite){\r\n\t\t\t(sprite.numChildren==0)&& (sprite.repaint());\r\n\t\t\tfor (var i=0;i < sprite.numChildren;i++)\r\n\t\t\tWebGL.doNodeRepaint(sprite.getChildAt(i));\r\n\t\t}\r\n\r\n\t\tWebGL.init=function(canvas,width,height){\r\n\t\t\tWebGL.mainCanvas=canvas;\r\n\t\t\tHTMLCanvas._createContext=function (canvas){\r\n\t\t\t\treturn new WebGLContext2D(canvas);\r\n\t\t\t};\r\n\t\t\tvar webGLName=WebGL.isWebGLSupported();\r\n\t\t\tvar gl=WebGL.mainContext=RunDriver.newWebGLContext(canvas,webGLName);\r\n\t\t\tWebGL._isExperimentalWebgl=(webGLName !=\"webgl\" && (Browser.onWeiXin || Browser.onMQQBrowser));\r\n\t\t\tWebGL.frameShaderHighPrecision=false;\r\n\t\t\ttry {\r\n\t\t\t\tvar precisionFormat=laya.webgl.WebGL.mainContext.getShaderPrecisionFormat(0x8B30,0x8DF2);\r\n\t\t\t\tprecisionFormat.precision ? WebGL.frameShaderHighPrecision=true :WebGL.frameShaderHighPrecision=false;\r\n\t\t\t}catch (e){}\r\n\t\t\tBrowser.window.SetupWebglContext && Browser.window.SetupWebglContext(gl);\r\n\t\t\tWebGL.onStageResize(width,height);\r\n\t\t\tif (WebGL.mainContext==null)\r\n\t\t\t\tthrow new Error(\"webGL getContext err!\");\r\n\t\t\tSystem.__init__();\r\n\t\t\tAtlasResourceManager.__init__();\r\n\t\t\tShaderDefines2D.__init__();\r\n\t\t\tSubmit.__init__();\r\n\t\t\tWebGLContext2D.__init__();\r\n\t\t\tValue2D.__init__();\r\n\t\t\tShader2D.__init__();\r\n\t\t\tBuffer2D.__int__(gl);\r\n\t\t\tBlendMode._init_(gl);\r\n\t\t\tif (Render.isConchApp){\r\n\t\t\t\tconch.setOnInvalidGLRes(WebGL.onInvalidGLRes);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tWebGL.mainCanvas=null\r\n\t\tWebGL.mainContext=null\r\n\t\tWebGL.antialias=true;\r\n\t\tWebGL.frameShaderHighPrecision=false;\r\n\t\tWebGL._bg_null=[0,0,0,0];\r\n\t\tWebGL._isExperimentalWebgl=false;\r\n\t\treturn WebGL;\r\n\t})()\r\n\r\n\r\n\t//class laya.webgl.WebGLContext\r\n\tvar WebGLContext=(function(){\r\n\t\tfunction WebGLContext(){};\r\n\t\t__class(WebGLContext,'laya.webgl.WebGLContext');\r\n\t\tWebGLContext.UseProgram=function(program){\r\n\t\t\tif (WebGLContext._useProgram===program)return false;\r\n\t\t\tWebGL.mainContext.useProgram(program);\r\n\t\t\tWebGLContext._useProgram=program;\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\tWebGLContext.setDepthTest=function(gl,value){\r\n\t\t\tvalue!==WebGLContext._depthTest && (WebGLContext._depthTest=value,value?gl.enable(0x0B71):gl.disable(0x0B71));\r\n\t\t}\r\n\r\n\t\tWebGLContext.setDepthMask=function(gl,value){\r\n\t\t\tvalue!==WebGLContext._depthMask && (WebGLContext._depthMask=value,gl.depthMask(value));\r\n\t\t}\r\n\r\n\t\tWebGLContext.setDepthFunc=function(gl,value){\r\n\t\t\tvalue!==WebGLContext._depthFunc && (WebGLContext._depthFunc=value,gl.depthFunc(value));\r\n\t\t}\r\n\r\n\t\tWebGLContext.setBlend=function(gl,value){\r\n\t\t\tvalue!==WebGLContext._blend && (WebGLContext._blend=value,value?gl.enable(0x0BE2):gl.disable(0x0BE2));\r\n\t\t}\r\n\r\n\t\tWebGLContext.setBlendFunc=function(gl,sFactor,dFactor){\r\n\t\t\t(sFactor!==WebGLContext._sFactor||dFactor!==WebGLContext._dFactor)&& (WebGLContext._sFactor=sFactor,WebGLContext._dFactor=dFactor,gl.blendFunc(sFactor,dFactor));\r\n\t\t}\r\n\r\n\t\tWebGLContext.setCullFace=function(gl,value){\r\n\t\t\tvalue!==WebGLContext._cullFace && (WebGLContext._cullFace=value,value?gl.enable(0x0B44):gl.disable(0x0B44));\r\n\t\t}\r\n\r\n\t\tWebGLContext.setFrontFaceCCW=function(gl,value){\r\n\t\t\tvalue!==WebGLContext._frontFace && (WebGLContext._frontFace=value,gl.frontFace(value));\r\n\t\t}\r\n\r\n\t\tWebGLContext.bindTexture=function(gl,target,texture){\r\n\t\t\tgl.bindTexture(target,texture);\r\n\t\t\tWebGLContext.curBindTexTarget=target;\r\n\t\t\tWebGLContext.curBindTexValue=texture;\r\n\t\t}\r\n\r\n\t\tWebGLContext.DEPTH_BUFFER_BIT=0x00000100;\r\n\t\tWebGLContext.STENCIL_BUFFER_BIT=0x00000400;\r\n\t\tWebGLContext.COLOR_BUFFER_BIT=0x00004000;\r\n\t\tWebGLContext.POINTS=0x0000;\r\n\t\tWebGLContext.LINES=0x0001;\r\n\t\tWebGLContext.LINE_LOOP=0x0002;\r\n\t\tWebGLContext.LINE_STRIP=0x0003;\r\n\t\tWebGLContext.TRIANGLES=0x0004;\r\n\t\tWebGLContext.TRIANGLE_STRIP=0x0005;\r\n\t\tWebGLContext.TRIANGLE_FAN=0x0006;\r\n\t\tWebGLContext.ZERO=0;\r\n\t\tWebGLContext.ONE=1;\r\n\t\tWebGLContext.SRC_COLOR=0x0300;\r\n\t\tWebGLContext.ONE_MINUS_SRC_COLOR=0x0301;\r\n\t\tWebGLContext.SRC_ALPHA=0x0302;\r\n\t\tWebGLContext.ONE_MINUS_SRC_ALPHA=0x0303;\r\n\t\tWebGLContext.DST_ALPHA=0x0304;\r\n\t\tWebGLContext.ONE_MINUS_DST_ALPHA=0x0305;\r\n\t\tWebGLContext.DST_COLOR=0x0306;\r\n\t\tWebGLContext.ONE_MINUS_DST_COLOR=0x0307;\r\n\t\tWebGLContext.SRC_ALPHA_SATURATE=0x0308;\r\n\t\tWebGLContext.FUNC_ADD=0x8006;\r\n\t\tWebGLContext.BLEND_EQUATION=0x8009;\r\n\t\tWebGLContext.BLEND_EQUATION_RGB=0x8009;\r\n\t\tWebGLContext.BLEND_EQUATION_ALPHA=0x883D;\r\n\t\tWebGLContext.FUNC_SUBTRACT=0x800A;\r\n\t\tWebGLContext.FUNC_REVERSE_SUBTRACT=0x800B;\r\n\t\tWebGLContext.BLEND_DST_RGB=0x80C8;\r\n\t\tWebGLContext.BLEND_SRC_RGB=0x80C9;\r\n\t\tWebGLContext.BLEND_DST_ALPHA=0x80CA;\r\n\t\tWebGLContext.BLEND_SRC_ALPHA=0x80CB;\r\n\t\tWebGLContext.CONSTANT_COLOR=0x8001;\r\n\t\tWebGLContext.ONE_MINUS_CONSTANT_COLOR=0x8002;\r\n\t\tWebGLContext.CONSTANT_ALPHA=0x8003;\r\n\t\tWebGLContext.ONE_MINUS_CONSTANT_ALPHA=0x8004;\r\n\t\tWebGLContext.BLEND_COLOR=0x8005;\r\n\t\tWebGLContext.ARRAY_BUFFER=0x8892;\r\n\t\tWebGLContext.ELEMENT_ARRAY_BUFFER=0x8893;\r\n\t\tWebGLContext.ARRAY_BUFFER_BINDING=0x8894;\r\n\t\tWebGLContext.ELEMENT_ARRAY_BUFFER_BINDING=0x8895;\r\n\t\tWebGLContext.STREAM_DRAW=0x88E0;\r\n\t\tWebGLContext.STATIC_DRAW=0x88E4;\r\n\t\tWebGLContext.DYNAMIC_DRAW=0x88E8;\r\n\t\tWebGLContext.BUFFER_SIZE=0x8764;\r\n\t\tWebGLContext.BUFFER_USAGE=0x8765;\r\n\t\tWebGLContext.CURRENT_VERTEX_ATTRIB=0x8626;\r\n\t\tWebGLContext.FRONT=0x0404;\r\n\t\tWebGLContext.BACK=0x0405;\r\n\t\tWebGLContext.CULL_FACE=0x0B44;\r\n\t\tWebGLContext.FRONT_AND_BACK=0x0408;\r\n\t\tWebGLContext.BLEND=0x0BE2;\r\n\t\tWebGLContext.DITHER=0x0BD0;\r\n\t\tWebGLContext.STENCIL_TEST=0x0B90;\r\n\t\tWebGLContext.DEPTH_TEST=0x0B71;\r\n\t\tWebGLContext.SCISSOR_TEST=0x0C11;\r\n\t\tWebGLContext.POLYGON_OFFSET_FILL=0x8037;\r\n\t\tWebGLContext.SAMPLE_ALPHA_TO_COVERAGE=0x809E;\r\n\t\tWebGLContext.SAMPLE_COVERAGE=0x80A0;\r\n\t\tWebGLContext.NO_ERROR=0;\r\n\t\tWebGLContext.INVALID_ENUM=0x0500;\r\n\t\tWebGLContext.INVALID_VALUE=0x0501;\r\n\t\tWebGLContext.INVALID_OPERATION=0x0502;\r\n\t\tWebGLContext.OUT_OF_MEMORY=0x0505;\r\n\t\tWebGLContext.CW=0x0900;\r\n\t\tWebGLContext.CCW=0x0901;\r\n\t\tWebGLContext.LINE_WIDTH=0x0B21;\r\n\t\tWebGLContext.ALIASED_POINT_SIZE_RANGE=0x846D;\r\n\t\tWebGLContext.ALIASED_LINE_WIDTH_RANGE=0x846E;\r\n\t\tWebGLContext.CULL_FACE_MODE=0x0B45;\r\n\t\tWebGLContext.FRONT_FACE=0x0B46;\r\n\t\tWebGLContext.DEPTH_RANGE=0x0B70;\r\n\t\tWebGLContext.DEPTH_WRITEMASK=0x0B72;\r\n\t\tWebGLContext.DEPTH_CLEAR_VALUE=0x0B73;\r\n\t\tWebGLContext.DEPTH_FUNC=0x0B74;\r\n\t\tWebGLContext.STENCIL_CLEAR_VALUE=0x0B91;\r\n\t\tWebGLContext.STENCIL_FUNC=0x0B92;\r\n\t\tWebGLContext.STENCIL_FAIL=0x0B94;\r\n\t\tWebGLContext.STENCIL_PASS_DEPTH_FAIL=0x0B95;\r\n\t\tWebGLContext.STENCIL_PASS_DEPTH_PASS=0x0B96;\r\n\t\tWebGLContext.STENCIL_REF=0x0B97;\r\n\t\tWebGLContext.STENCIL_VALUE_MASK=0x0B93;\r\n\t\tWebGLContext.STENCIL_WRITEMASK=0x0B98;\r\n\t\tWebGLContext.STENCIL_BACK_FUNC=0x8800;\r\n\t\tWebGLContext.STENCIL_BACK_FAIL=0x8801;\r\n\t\tWebGLContext.STENCIL_BACK_PASS_DEPTH_FAIL=0x8802;\r\n\t\tWebGLContext.STENCIL_BACK_PASS_DEPTH_PASS=0x8803;\r\n\t\tWebGLContext.STENCIL_BACK_REF=0x8CA3;\r\n\t\tWebGLContext.STENCIL_BACK_VALUE_MASK=0x8CA4;\r\n\t\tWebGLContext.STENCIL_BACK_WRITEMASK=0x8CA5;\r\n\t\tWebGLContext.VIEWPORT=0x0BA2;\r\n\t\tWebGLContext.SCISSOR_BOX=0x0C10;\r\n\t\tWebGLContext.COLOR_CLEAR_VALUE=0x0C22;\r\n\t\tWebGLContext.COLOR_WRITEMASK=0x0C23;\r\n\t\tWebGLContext.UNPACK_ALIGNMENT=0x0CF5;\r\n\t\tWebGLContext.PACK_ALIGNMENT=0x0D05;\r\n\t\tWebGLContext.MAX_TEXTURE_SIZE=0x0D33;\r\n\t\tWebGLContext.MAX_VIEWPORT_DIMS=0x0D3A;\r\n\t\tWebGLContext.SUBPIXEL_BITS=0x0D50;\r\n\t\tWebGLContext.RED_BITS=0x0D52;\r\n\t\tWebGLContext.GREEN_BITS=0x0D53;\r\n\t\tWebGLContext.BLUE_BITS=0x0D54;\r\n\t\tWebGLContext.ALPHA_BITS=0x0D55;\r\n\t\tWebGLContext.DEPTH_BITS=0x0D56;\r\n\t\tWebGLContext.STENCIL_BITS=0x0D57;\r\n\t\tWebGLContext.POLYGON_OFFSET_UNITS=0x2A00;\r\n\t\tWebGLContext.POLYGON_OFFSET_FACTOR=0x8038;\r\n\t\tWebGLContext.TEXTURE_BINDING_2D=0x8069;\r\n\t\tWebGLContext.SAMPLE_BUFFERS=0x80A8;\r\n\t\tWebGLContext.SAMPLES=0x80A9;\r\n\t\tWebGLContext.SAMPLE_COVERAGE_VALUE=0x80AA;\r\n\t\tWebGLContext.SAMPLE_COVERAGE_INVERT=0x80AB;\r\n\t\tWebGLContext.NUM_COMPRESSED_TEXTURE_FORMATS=0x86A2;\r\n\t\tWebGLContext.COMPRESSED_TEXTURE_FORMATS=0x86A3;\r\n\t\tWebGLContext.DONT_CARE=0x1100;\r\n\t\tWebGLContext.FASTEST=0x1101;\r\n\t\tWebGLContext.NICEST=0x1102;\r\n\t\tWebGLContext.GENERATE_MIPMAP_HINT=0x8192;\r\n\t\tWebGLContext.BYTE=0x1400;\r\n\t\tWebGLContext.UNSIGNED_BYTE=0x1401;\r\n\t\tWebGLContext.SHORT=0x1402;\r\n\t\tWebGLContext.UNSIGNED_SHORT=0x1403;\r\n\t\tWebGLContext.INT=0x1404;\r\n\t\tWebGLContext.UNSIGNED_INT=0x1405;\r\n\t\tWebGLContext.FLOAT=0x1406;\r\n\t\tWebGLContext.DEPTH_COMPONENT=0x1902;\r\n\t\tWebGLContext.ALPHA=0x1906;\r\n\t\tWebGLContext.RGB=0x1907;\r\n\t\tWebGLContext.RGBA=0x1908;\r\n\t\tWebGLContext.LUMINANCE=0x1909;\r\n\t\tWebGLContext.LUMINANCE_ALPHA=0x190A;\r\n\t\tWebGLContext.UNSIGNED_SHORT_4_4_4_4=0x8033;\r\n\t\tWebGLContext.UNSIGNED_SHORT_5_5_5_1=0x8034;\r\n\t\tWebGLContext.UNSIGNED_SHORT_5_6_5=0x8363;\r\n\t\tWebGLContext.FRAGMENT_SHADER=0x8B30;\r\n\t\tWebGLContext.VERTEX_SHADER=0x8B31;\r\n\t\tWebGLContext.MAX_VERTEX_ATTRIBS=0x8869;\r\n\t\tWebGLContext.MAX_VERTEX_UNIFORM_VECTORS=0x8DFB;\r\n\t\tWebGLContext.MAX_VARYING_VECTORS=0x8DFC;\r\n\t\tWebGLContext.MAX_COMBINED_TEXTURE_IMAGE_UNITS=0x8B4D;\r\n\t\tWebGLContext.MAX_VERTEX_TEXTURE_IMAGE_UNITS=0x8B4C;\r\n\t\tWebGLContext.MAX_TEXTURE_IMAGE_UNITS=0x8872;\r\n\t\tWebGLContext.MAX_FRAGMENT_UNIFORM_VECTORS=0x8DFD;\r\n\t\tWebGLContext.SHADER_TYPE=0x8B4F;\r\n\t\tWebGLContext.DELETE_STATUS=0x8B80;\r\n\t\tWebGLContext.LINK_STATUS=0x8B82;\r\n\t\tWebGLContext.VALIDATE_STATUS=0x8B83;\r\n\t\tWebGLContext.ATTACHED_SHADERS=0x8B85;\r\n\t\tWebGLContext.ACTIVE_UNIFORMS=0x8B86;\r\n\t\tWebGLContext.ACTIVE_ATTRIBUTES=0x8B89;\r\n\t\tWebGLContext.SHADING_LANGUAGE_VERSION=0x8B8C;\r\n\t\tWebGLContext.CURRENT_PROGRAM=0x8B8D;\r\n\t\tWebGLContext.NEVER=0x0200;\r\n\t\tWebGLContext.LESS=0x0201;\r\n\t\tWebGLContext.EQUAL=0x0202;\r\n\t\tWebGLContext.LEQUAL=0x0203;\r\n\t\tWebGLContext.GREATER=0x0204;\r\n\t\tWebGLContext.NOTEQUAL=0x0205;\r\n\t\tWebGLContext.GEQUAL=0x0206;\r\n\t\tWebGLContext.ALWAYS=0x0207;\r\n\t\tWebGLContext.KEEP=0x1E00;\r\n\t\tWebGLContext.REPLACE=0x1E01;\r\n\t\tWebGLContext.INCR=0x1E02;\r\n\t\tWebGLContext.DECR=0x1E03;\r\n\t\tWebGLContext.INVERT=0x150A;\r\n\t\tWebGLContext.INCR_WRAP=0x8507;\r\n\t\tWebGLContext.DECR_WRAP=0x8508;\r\n\t\tWebGLContext.VENDOR=0x1F00;\r\n\t\tWebGLContext.RENDERER=0x1F01;\r\n\t\tWebGLContext.VERSION=0x1F02;\r\n\t\tWebGLContext.NEAREST=0x2600;\r\n\t\tWebGLContext.LINEAR=0x2601;\r\n\t\tWebGLContext.NEAREST_MIPMAP_NEAREST=0x2700;\r\n\t\tWebGLContext.LINEAR_MIPMAP_NEAREST=0x2701;\r\n\t\tWebGLContext.NEAREST_MIPMAP_LINEAR=0x2702;\r\n\t\tWebGLContext.LINEAR_MIPMAP_LINEAR=0x2703;\r\n\t\tWebGLContext.TEXTURE_MAG_FILTER=0x2800;\r\n\t\tWebGLContext.TEXTURE_MIN_FILTER=0x2801;\r\n\t\tWebGLContext.TEXTURE_WRAP_S=0x2802;\r\n\t\tWebGLContext.TEXTURE_WRAP_T=0x2803;\r\n\t\tWebGLContext.TEXTURE_2D=0x0DE1;\r\n\t\tWebGLContext.TEXTURE=0x1702;\r\n\t\tWebGLContext.TEXTURE_CUBE_MAP=0x8513;\r\n\t\tWebGLContext.TEXTURE_BINDING_CUBE_MAP=0x8514;\r\n\t\tWebGLContext.TEXTURE_CUBE_MAP_POSITIVE_X=0x8515;\r\n\t\tWebGLContext.TEXTURE_CUBE_MAP_NEGATIVE_X=0x8516;\r\n\t\tWebGLContext.TEXTURE_CUBE_MAP_POSITIVE_Y=0x8517;\r\n\t\tWebGLContext.TEXTURE_CUBE_MAP_NEGATIVE_Y=0x8518;\r\n\t\tWebGLContext.TEXTURE_CUBE_MAP_POSITIVE_Z=0x8519;\r\n\t\tWebGLContext.TEXTURE_CUBE_MAP_NEGATIVE_Z=0x851A;\r\n\t\tWebGLContext.MAX_CUBE_MAP_TEXTURE_SIZE=0x851C;\r\n\t\tWebGLContext.TEXTURE0=0x84C0;\r\n\t\tWebGLContext.TEXTURE1=0x84C1;\r\n\t\tWebGLContext.TEXTURE2=0x84C2;\r\n\t\tWebGLContext.TEXTURE3=0x84C3;\r\n\t\tWebGLContext.TEXTURE4=0x84C4;\r\n\t\tWebGLContext.TEXTURE5=0x84C5;\r\n\t\tWebGLContext.TEXTURE6=0x84C6;\r\n\t\tWebGLContext.TEXTURE7=0x84C7;\r\n\t\tWebGLContext.TEXTURE8=0x84C8;\r\n\t\tWebGLContext.TEXTURE9=0x84C9;\r\n\t\tWebGLContext.TEXTURE10=0x84CA;\r\n\t\tWebGLContext.TEXTURE11=0x84CB;\r\n\t\tWebGLContext.TEXTURE12=0x84CC;\r\n\t\tWebGLContext.TEXTURE13=0x84CD;\r\n\t\tWebGLContext.TEXTURE14=0x84CE;\r\n\t\tWebGLContext.TEXTURE15=0x84CF;\r\n\t\tWebGLContext.TEXTURE16=0x84D0;\r\n\t\tWebGLContext.TEXTURE17=0x84D1;\r\n\t\tWebGLContext.TEXTURE18=0x84D2;\r\n\t\tWebGLContext.TEXTURE19=0x84D3;\r\n\t\tWebGLContext.TEXTURE20=0x84D4;\r\n\t\tWebGLContext.TEXTURE21=0x84D5;\r\n\t\tWebGLContext.TEXTURE22=0x84D6;\r\n\t\tWebGLContext.TEXTURE23=0x84D7;\r\n\t\tWebGLContext.TEXTURE24=0x84D8;\r\n\t\tWebGLContext.TEXTURE25=0x84D9;\r\n\t\tWebGLContext.TEXTURE26=0x84DA;\r\n\t\tWebGLContext.TEXTURE27=0x84DB;\r\n\t\tWebGLContext.TEXTURE28=0x84DC;\r\n\t\tWebGLContext.TEXTURE29=0x84DD;\r\n\t\tWebGLContext.TEXTURE30=0x84DE;\r\n\t\tWebGLContext.TEXTURE31=0x84DF;\r\n\t\tWebGLContext.ACTIVE_TEXTURE=0x84E0;\r\n\t\tWebGLContext.REPEAT=0x2901;\r\n\t\tWebGLContext.CLAMP_TO_EDGE=0x812F;\r\n\t\tWebGLContext.MIRRORED_REPEAT=0x8370;\r\n\t\tWebGLContext.FLOAT_VEC2=0x8B50;\r\n\t\tWebGLContext.FLOAT_VEC3=0x8B51;\r\n\t\tWebGLContext.FLOAT_VEC4=0x8B52;\r\n\t\tWebGLContext.INT_VEC2=0x8B53;\r\n\t\tWebGLContext.INT_VEC3=0x8B54;\r\n\t\tWebGLContext.INT_VEC4=0x8B55;\r\n\t\tWebGLContext.BOOL=0x8B56;\r\n\t\tWebGLContext.BOOL_VEC2=0x8B57;\r\n\t\tWebGLContext.BOOL_VEC3=0x8B58;\r\n\t\tWebGLContext.BOOL_VEC4=0x8B59;\r\n\t\tWebGLContext.FLOAT_MAT2=0x8B5A;\r\n\t\tWebGLContext.FLOAT_MAT3=0x8B5B;\r\n\t\tWebGLContext.FLOAT_MAT4=0x8B5C;\r\n\t\tWebGLContext.SAMPLER_2D=0x8B5E;\r\n\t\tWebGLContext.SAMPLER_CUBE=0x8B60;\r\n\t\tWebGLContext.VERTEX_ATTRIB_ARRAY_ENABLED=0x8622;\r\n\t\tWebGLContext.VERTEX_ATTRIB_ARRAY_SIZE=0x8623;\r\n\t\tWebGLContext.VERTEX_ATTRIB_ARRAY_STRIDE=0x8624;\r\n\t\tWebGLContext.VERTEX_ATTRIB_ARRAY_TYPE=0x8625;\r\n\t\tWebGLContext.VERTEX_ATTRIB_ARRAY_NORMALIZED=0x886A;\r\n\t\tWebGLContext.VERTEX_ATTRIB_ARRAY_POINTER=0x8645;\r\n\t\tWebGLContext.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=0x889F;\r\n\t\tWebGLContext.COMPILE_STATUS=0x8B81;\r\n\t\tWebGLContext.LOW_FLOAT=0x8DF0;\r\n\t\tWebGLContext.MEDIUM_FLOAT=0x8DF1;\r\n\t\tWebGLContext.HIGH_FLOAT=0x8DF2;\r\n\t\tWebGLContext.LOW_INT=0x8DF3;\r\n\t\tWebGLContext.MEDIUM_INT=0x8DF4;\r\n\t\tWebGLContext.HIGH_INT=0x8DF5;\r\n\t\tWebGLContext.FRAMEBUFFER=0x8D40;\r\n\t\tWebGLContext.RENDERBUFFER=0x8D41;\r\n\t\tWebGLContext.RGBA4=0x8056;\r\n\t\tWebGLContext.RGB5_A1=0x8057;\r\n\t\tWebGLContext.RGB565=0x8D62;\r\n\t\tWebGLContext.DEPTH_COMPONENT16=0x81A5;\r\n\t\tWebGLContext.STENCIL_INDEX=0x1901;\r\n\t\tWebGLContext.STENCIL_INDEX8=0x8D48;\r\n\t\tWebGLContext.DEPTH_STENCIL=0x84F9;\r\n\t\tWebGLContext.RENDERBUFFER_WIDTH=0x8D42;\r\n\t\tWebGLContext.RENDERBUFFER_HEIGHT=0x8D43;\r\n\t\tWebGLContext.RENDERBUFFER_INTERNAL_FORMAT=0x8D44;\r\n\t\tWebGLContext.RENDERBUFFER_RED_SIZE=0x8D50;\r\n\t\tWebGLContext.RENDERBUFFER_GREEN_SIZE=0x8D51;\r\n\t\tWebGLContext.RENDERBUFFER_BLUE_SIZE=0x8D52;\r\n\t\tWebGLContext.RENDERBUFFER_ALPHA_SIZE=0x8D53;\r\n\t\tWebGLContext.RENDERBUFFER_DEPTH_SIZE=0x8D54;\r\n\t\tWebGLContext.RENDERBUFFER_STENCIL_SIZE=0x8D55;\r\n\t\tWebGLContext.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=0x8CD0;\r\n\t\tWebGLContext.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=0x8CD1;\r\n\t\tWebGLContext.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=0x8CD2;\r\n\t\tWebGLContext.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=0x8CD3;\r\n\t\tWebGLContext.COLOR_ATTACHMENT0=0x8CE0;\r\n\t\tWebGLContext.DEPTH_ATTACHMENT=0x8D00;\r\n\t\tWebGLContext.STENCIL_ATTACHMENT=0x8D20;\r\n\t\tWebGLContext.DEPTH_STENCIL_ATTACHMENT=0x821A;\r\n\t\tWebGLContext.NONE=0;\r\n\t\tWebGLContext.FRAMEBUFFER_COMPLETE=0x8CD5;\r\n\t\tWebGLContext.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=0x8CD6;\r\n\t\tWebGLContext.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=0x8CD7;\r\n\t\tWebGLContext.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=0x8CD9;\r\n\t\tWebGLContext.FRAMEBUFFER_UNSUPPORTED=0x8CDD;\r\n\t\tWebGLContext.FRAMEBUFFER_BINDING=0x8CA6;\r\n\t\tWebGLContext.RENDERBUFFER_BINDING=0x8CA7;\r\n\t\tWebGLContext.MAX_RENDERBUFFER_SIZE=0x84E8;\r\n\t\tWebGLContext.INVALID_FRAMEBUFFER_OPERATION=0x0506;\r\n\t\tWebGLContext.UNPACK_FLIP_Y_WEBGL=0x9240;\r\n\t\tWebGLContext.UNPACK_PREMULTIPLY_ALPHA_WEBGL=0x9241;\r\n\t\tWebGLContext.CONTEXT_LOST_WEBGL=0x9242;\r\n\t\tWebGLContext.UNPACK_COLORSPACE_CONVERSION_WEBGL=0x9243;\r\n\t\tWebGLContext.BROWSER_DEFAULT_WEBGL=0x9244;\r\n\t\tWebGLContext._useProgram=null;\r\n\t\tWebGLContext._depthTest=true;\r\n\t\tWebGLContext._depthMask=1;\r\n\t\tWebGLContext._depthFunc=0x0201;\r\n\t\tWebGLContext._blend=false;\r\n\t\tWebGLContext._sFactor=1;\r\n\t\tWebGLContext._dFactor=0;\r\n\t\tWebGLContext._cullFace=false;\r\n\t\tWebGLContext._frontFace=0x0901;\r\n\t\tWebGLContext.curBindTexTarget=null\r\n\t\tWebGLContext.curBindTexValue=null\r\n\t\treturn WebGLContext;\r\n\t})()\r\n\r\n\r\n\t/**全局配置*/\r\n\t//class UIConfig\r\n\tvar UIConfig=(function(){\r\n\t\tfunction UIConfig(){};\r\n\t\t__class(UIConfig,'UIConfig');\r\n\t\tUIConfig.touchScrollEnable=true;\r\n\t\tUIConfig.mouseWheelEnable=true;\r\n\t\tUIConfig.showButtons=true;\r\n\t\tUIConfig.popupBgColor=\"#000000\";\r\n\t\tUIConfig.popupBgAlpha=0.5;\r\n\t\treturn UIConfig;\r\n\t})()\r\n\r\n\r\n\t//class com.isnowfox.core.io.ProtocolException extends Error\r\n\tvar ProtocolException=(function(_super){\r\n\t\tfunction ProtocolException(message,id){\r\n\t\t\t(message===void 0)&& (message=\"\");\r\n\t\t\t(id===void 0)&& (id=0);\r\n\t\t\tProtocolException.__super.call(this,message,id);\r\n\t\t}\r\n\r\n\t\t__class(ProtocolException,'com.isnowfox.core.io.ProtocolException',Error);\r\n\t\tProtocolException.newTypeException=function(b){\r\n\t\t\treturn new ProtocolException(\"error type :\"+b);\r\n\t\t}\r\n\r\n\t\tProtocolException.newIn64Exception=function(v){\r\n\t\t\treturn new ProtocolException(\"不支持的int64值,不能是小数或者负数 error value :\"+v);\r\n\t\t}\r\n\r\n\t\tProtocolException.newIn64ExceptionByHight=function(v){\r\n\t\t\treturn new ProtocolException(\"不支持的int64值,不能是小数或者负数 hight value :\"+v);\r\n\t\t}\r\n\r\n\t\treturn ProtocolException;\r\n\t})(Error)\r\n\r\n\r\n\t//class com.isnowfox.core.SingletonError extends Error\r\n\tvar SingletonError=(function(_super){\r\n\t\tfunction SingletonError(message,id){\r\n\t\t\t(message===void 0)&& (message=\"\");\r\n\t\t\t(id===void 0)&& (id=0);\r\n\t\t\tSingletonError.__super.call(this,message,id);\r\n\t\t}\r\n\r\n\t\t__class(SingletonError,'com.isnowfox.core.SingletonError',Error);\r\n\t\treturn SingletonError;\r\n\t})(Error)\r\n\r\n\r\n\t/**\r\n\t*@author zuoge85@gmail.com on 16/9/23.\r\n\t*/\r\n\t//class com.isnowfox.core.test.AssertError extends Error\r\n\tvar AssertError=(function(_super){\r\n\t\tfunction AssertError(message,id){\r\n\t\t\t(message===void 0)&& (message=\"\");\r\n\t\t\t(id===void 0)&& (id=0);\r\n\t\t\tAssertError.__super.call(this,message,id);\r\n\t\t}\r\n\r\n\t\t__class(AssertError,'com.isnowfox.core.test.AssertError',Error);\r\n\t\treturn AssertError;\r\n\t})(Error)\r\n\r\n\r\n\t//class com.isnowfox.core.utils.AbstractMethodError extends Error\r\n\tvar AbstractMethodError=(function(_super){\r\n\t\tfunction AbstractMethodError(message,id){\r\n\t\t\t(message===void 0)&& (message=\"\");\r\n\t\t\t(id===void 0)&& (id=0);\r\n\t\t\tAbstractMethodError.__super.call(this,message,id);\r\n\t\t}\r\n\r\n\t\t__class(AbstractMethodError,'com.isnowfox.core.utils.AbstractMethodError',Error);\r\n\t\treturn AbstractMethodError;\r\n\t})(Error)\r\n\r\n\r\n\t/**\r\n\t*创建这个对象之后修改 endian会出现bug\r\n\t*/\r\n\t//class com.isnowfox.core.io.MarkCompressInput extends com.isnowfox.core.io.AbstractInput\r\n\tvar MarkCompressInput=(function(_super){\r\n\t\tfunction MarkCompressInput(in0,charset){\r\n\t\t\tthis.mDoubleBuffer=new Byte();\r\n\t\t\tthis.mDoubleBuffer.endian=in0.endian;\r\n\t\t\tMarkCompressInput.__super.call(this,in0,charset);\r\n\t\t}\r\n\r\n\t\t__class(MarkCompressInput,'com.isnowfox.core.io.MarkCompressInput',_super);\r\n\t\tvar __proto=MarkCompressInput.prototype;\r\n\t\t__proto.readBoolean=function(){\r\n\t\t\tvar b=this.mIn.getUint8();\r\n\t\t\tif (b==MarkCompressProtocol.TYPE_TRUE){\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\telse if (b==MarkCompressProtocol.TYPE_NULL_OR_ZERO_OR_FALSE){\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tthrow ProtocolException.newTypeException(b);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__proto.readInt=function(){\r\n\t\t\tvar b=this.mIn.getUint8();\r\n\t\t\tswitch (b){\r\n\t\t\t\tcase MarkCompressProtocol.TYPE_TRUE:\r\n\t\t\t\t\treturn 1;\r\n\t\t\t\tcase MarkCompressProtocol.TYPE_NULL_OR_ZERO_OR_FALSE:\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\tcase MarkCompressProtocol.TYPE_INT_1BYTE:\r\n\t\t\t\t\treturn this.mIn.getUint8();\r\n\t\t\t\tcase MarkCompressProtocol.TYPE_INT_2BYTE:\r\n\t\t\t\t\treturn this.mIn.getUint16();\r\n\t\t\t\tcase MarkCompressProtocol.TYPE_INT_3BYTE:\r\n\t\t\t\t\treturn Utils.getThree(this.mIn);\r\n\t\t\t\tcase MarkCompressProtocol.TYPE_INT_4BYTE:\r\n\t\t\t\t\treturn this.mIn.getInt32();\r\n\t\t\t\tdefault :\r\n\t\t\t\t\tif (b > 0 && b < MarkCompressProtocol.TYPE_MAX){\r\n\t\t\t\t\t\treturn b-4;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\tthrow ProtocolException.newTypeException(b);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t}\r\n\r\n\t\t__proto.readLong=function(){\r\n\t\t\tvar b=this.mIn.getUint8();\r\n\t\t\tswitch (b){\r\n\t\t\t\tcase MarkCompressProtocol.TYPE_TRUE:\r\n\t\t\t\t\treturn 1;\r\n\t\t\t\tcase MarkCompressProtocol.TYPE_NULL_OR_ZERO_OR_FALSE:\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\tcase MarkCompressProtocol.TYPE_INT_1BYTE:\r\n\t\t\t\t\treturn this.mIn.getUint8();\r\n\t\t\t\tcase MarkCompressProtocol.TYPE_INT_2BYTE:\r\n\t\t\t\t\treturn this.mIn.getUint16();\r\n\t\t\t\tcase MarkCompressProtocol.TYPE_INT_3BYTE:\r\n\t\t\t\t\treturn Utils.getThree(this.mIn);\r\n\t\t\t\tcase MarkCompressProtocol.TYPE_INT_4BYTE:\r\n\t\t\t\t\treturn this.mIn.getUint32();\r\n\t\t\t\tcase MarkCompressProtocol.TYPE_INT_5BYTE:\r\n\t\t\t\t\treturn this.getInt64Five();\r\n\t\t\t\tcase MarkCompressProtocol.TYPE_INT_6BYTE:\r\n\t\t\t\t\treturn this.getInt64Six();\r\n\t\t\t\tcase MarkCompressProtocol.TYPE_INT_7BYTE:\r\n\t\t\t\t\treturn this.getInt64Seven();\r\n\t\t\t\tcase MarkCompressProtocol.TYPE_INT_8BYTE:\r\n\t\t\t\t\treturn this.getInt64Long();\r\n\t\t\t\tdefault :\r\n\t\t\t\t\tif (b > 0 && b < MarkCompressProtocol.TYPE_MAX){\r\n\t\t\t\t\t\treturn b-4;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\tthrow ProtocolException.newTypeException(b);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t}\r\n\r\n\t\t__proto.readFloat=function(){\r\n\t\t\tvar b=this.mIn.getUint8();\r\n\t\t\tswitch (b){\r\n\t\t\t\tcase MarkCompressProtocol.TYPE_NULL_OR_ZERO_OR_FALSE:\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\tcase MarkCompressProtocol.TYPE_INT_1BYTE:\r\n\t\t\t\t\treturn this.readFloatByNums(1);\r\n\t\t\t\tcase MarkCompressProtocol.TYPE_INT_2BYTE:\r\n\t\t\t\t\treturn this.readFloatByNums(2);\r\n\t\t\t\tcase MarkCompressProtocol.TYPE_INT_3BYTE:\r\n\t\t\t\t\treturn this.readFloatByNums(3);\r\n\t\t\t\tcase MarkCompressProtocol.TYPE_INT_4BYTE:\r\n\t\t\t\t\treturn this.mIn.getFloat32();\r\n\t\t\t\tdefault :\r\n\t\t\t\t\tthrow ProtocolException.newTypeException(b);\r\n\t\t\t\t}\r\n\t\t}\r\n\r\n\t\t__proto.readDouble=function(){\r\n\t\t\tvar b=this.mIn.getUint8();\r\n\t\t\tswitch (b){\r\n\t\t\t\tcase MarkCompressProtocol.TYPE_NULL_OR_ZERO_OR_FALSE:\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\tcase MarkCompressProtocol.TYPE_INT_1BYTE:\r\n\t\t\t\t\treturn this.readDoubleByNums(1);\r\n\t\t\t\tcase MarkCompressProtocol.TYPE_INT_2BYTE:\r\n\t\t\t\t\treturn this.readDoubleByNums(2);\r\n\t\t\t\tcase MarkCompressProtocol.TYPE_INT_3BYTE:\r\n\t\t\t\t\treturn this.readDoubleByNums(3);\r\n\t\t\t\tcase MarkCompressProtocol.TYPE_INT_4BYTE:\r\n\t\t\t\t\treturn this.readDoubleByNums(4);\r\n\t\t\t\tcase MarkCompressProtocol.TYPE_INT_5BYTE:\r\n\t\t\t\t\treturn this.readDoubleByNums(5);\r\n\t\t\t\tcase MarkCompressProtocol.TYPE_INT_6BYTE:\r\n\t\t\t\t\treturn this.readDoubleByNums(6);\r\n\t\t\t\tcase MarkCompressProtocol.TYPE_INT_7BYTE:\r\n\t\t\t\t\treturn this.readDoubleByNums(7);\r\n\t\t\t\tcase MarkCompressProtocol.TYPE_INT_8BYTE:\r\n\t\t\t\t\treturn this.readDoubleByNums(8);\r\n\t\t\t\tdefault :\r\n\t\t\t\t\tthrow ProtocolException.newTypeException(b);\r\n\t\t\t\t}\r\n\t\t}\r\n\r\n\t\t__proto.readString=function(){\r\n\t\t\tvar b=this.mIn.getUint8();\r\n\t\t\tif (b==MarkCompressProtocol.TYPE_STRING){\r\n\t\t\t\tvar length=this.readInt();\r\n\t\t\t\treturn this.mIn.readUTFBytes(length);\r\n\t\t\t}\r\n\t\t\telse if (b==MarkCompressProtocol.TYPE_NULL_OR_ZERO_OR_FALSE){\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tthrow ProtocolException.newTypeException(b);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__proto.readBytes=function(){\r\n\t\t\tthrow new AbstractMethodError();\r\n\t\t}\r\n\r\n\t\t__proto.readFloatByNums=function(bitNums){\r\n\t\t\tthis.mDoubleBuffer.length=0;\r\n\t\t\tthis.mDoubleBuffer.pos=0;\r\n\t\t\tvar i=0;\r\n\t\t\tvar len=4-bitNums;\r\n\t\t\tif (this.mIn.endian==\"bigEndian\"){\r\n\t\t\t\tfor (i=0;i < len;i++){\r\n\t\t\t\t\tthis.mDoubleBuffer.writeByte(0);\r\n\t\t\t\t}\r\n\t\t\t\tthis.mDoubleBuffer.writeArrayBuffer(this.mIn.buffer,this.mIn.pos,bitNums);\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tthis.mDoubleBuffer.writeArrayBuffer(this.mIn.buffer,this.mIn.pos,bitNums);\r\n\t\t\t\tthis.mDoubleBuffer.pos=bitNums;\r\n\t\t\t\tfor (i=0;i < len;i++){\r\n\t\t\t\t\tthis.mDoubleBuffer.writeByte(0);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.mDoubleBuffer.pos=0;\r\n\t\t\treturn this.mDoubleBuffer.getFloat32();\r\n\t\t}\r\n\r\n\t\t__proto.readDoubleByNums=function(bitNums){\r\n\t\t\tthrow new AbstractMethodError();\r\n\t\t}\r\n\r\n\t\t__proto.getInt64Five=function(){\r\n\t\t\tvar low=NaN;\r\n\t\t\tvar high=NaN;\r\n\t\t\tif (this.mIn.endian==\"bigEndian\"){\r\n\t\t\t\thigh=this.mIn.getUint8();\r\n\t\t\t\tlow=this.mIn.getUint32();\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tlow=this.mIn.getUint32();\r\n\t\t\t\thigh=this.mIn.getUint8();\r\n\t\t\t}\r\n\t\t\treturn high *4294967296.0+low;\r\n\t\t}\r\n\r\n\t\t__proto.getInt64Six=function(){\r\n\t\t\tvar low=NaN;\r\n\t\t\tvar high=NaN;\r\n\t\t\tif (this.mIn.endian==\"bigEndian\"){\r\n\t\t\t\thigh=this.mIn.getUint16();\r\n\t\t\t\tlow=this.mIn.getUint32();\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tlow=this.mIn.getUint32();\r\n\t\t\t\thigh=this.mIn.getUint16();\r\n\t\t\t}\r\n\t\t\treturn high *4294967296.0+low;\r\n\t\t}\r\n\r\n\t\t/**7位*/\r\n\t\t__proto.getInt64Seven=function(){\r\n\t\t\tvar low=NaN;\r\n\t\t\tvar high=NaN;\r\n\t\t\tif (this.mIn.endian==\"bigEndian\"){\r\n\t\t\t\thigh=Utils.getThree(this.mIn);\r\n\t\t\t\tlow=this.mIn.getUint32();\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tlow=this.mIn.getUint32();\r\n\t\t\t\thigh=Utils.getThree(this.mIn);\r\n\t\t\t}\r\n\t\t\treturn high *4294967296.0+low;\r\n\t\t}\r\n\r\n\t\t__proto.getInt64Long=function(){\r\n\t\t\tvar low=NaN;\r\n\t\t\tvar high=NaN;\r\n\t\t\tif (this.mIn.endian==\"bigEndian\"){\r\n\t\t\t\thigh=this.mIn.getUint32();\r\n\t\t\t\tlow=this.mIn.getUint32();\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tlow=this.mIn.getUint32();\r\n\t\t\t\thigh=this.mIn.getUint32();\r\n\t\t\t}\r\n\t\t\tif (high > 0x1fffff){\r\n\t\t\t\tthrow ProtocolException.newIn64ExceptionByHight(high);\r\n\t\t\t}\r\n\t\t\treturn high *4294967296+low;\r\n\t\t}\r\n\r\n\t\tMarkCompressInput.create=function(in0){\r\n\t\t\treturn new MarkCompressInput(in0,\"utf-8\");\r\n\t\t}\r\n\r\n\t\tMarkCompressInput.createByCharset=function(in0,charset){\r\n\t\t\treturn new MarkCompressInput(in0,charset);\r\n\t\t}\r\n\r\n\t\treturn MarkCompressInput;\r\n\t})(AbstractInput)\r\n\r\n\r\n\t/**\r\n\t*创建这个对象之后修改 endian会出现bug\r\n\t*/\r\n\t//class com.isnowfox.core.io.MarkCompressOutput extends com.isnowfox.core.io.AbstractOutput\r\n\tvar MarkCompressOutput=(function(_super){\r\n\t\tfunction MarkCompressOutput(out,charset){\r\n\t\t\tthis.mWriteBuffer=new Byte();\r\n\t\t\tthis.mWriteBuffer.endian=out.endian;\r\n\t\t\tMarkCompressOutput.__super.call(this,out,charset);\r\n\t\t}\r\n\r\n\t\t__class(MarkCompressOutput,'com.isnowfox.core.io.MarkCompressOutput',_super);\r\n\t\tvar __proto=MarkCompressOutput.prototype;\r\n\t\t__proto.writeBoolean=function(v){\r\n\t\t\tthis.mOut.writeByte(v ? MarkCompressProtocol.TYPE_TRUE :MarkCompressProtocol.TYPE_NULL_OR_ZERO_OR_FALSE);\r\n\t\t}\r\n\r\n\t\t__proto.writeInt=function(v){\r\n\t\t\tif (v > 0-4 && v < MarkCompressProtocol.TYPE_MAX-4){\r\n\t\t\t\tthis.mOut.writeByte(v+4);\r\n\t\t\t}\r\n\t\t\telse if (v >>> 8==0){\r\n\t\t\t\tthis.mOut.writeByte(MarkCompressProtocol.TYPE_INT_1BYTE);\r\n\t\t\t\tthis.mOut.writeByte(v);\r\n\t\t\t}\r\n\t\t\telse if (v >>> 16==0){\r\n\t\t\t\tthis.mOut.writeByte(MarkCompressProtocol.TYPE_INT_2BYTE);\r\n\t\t\t\tthis.mOut.writeInt16(v);\r\n\t\t\t}\r\n\t\t\telse if (v >>> 24==0){\r\n\t\t\t\tthis.mOut.writeByte(MarkCompressProtocol.TYPE_INT_3BYTE);\r\n\t\t\t\tUtils.putThree(this.mOut,v);\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tthis.mOut.writeByte(MarkCompressProtocol.TYPE_INT_4BYTE);\r\n\t\t\t\tthis.mOut.writeInt32(v);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__proto.writeLong=function(v){\r\n\t\t\tif (v < 0 || v !=Math.floor(v)){\r\n\t\t\t\tthrow ProtocolException.newIn64Exception(v);\r\n\t\t\t};\r\n\t\t\tvar low=Number(v);\r\n\t\t\tvar high=Number(v / 4294967296.0);\r\n\t\t\tif (high==0 || (v > 0-4 && v < MarkCompressProtocol.TYPE_MAX-4)){\r\n\t\t\t\tthis.writeInt(low);\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tif (high >>> 8==0){\r\n\t\t\t\t\tthis.mOut.writeByte(MarkCompressProtocol.TYPE_INT_5BYTE);\r\n\t\t\t\t\tif (this.mOut.endian==\"bigEndian\"){\r\n\t\t\t\t\t\tthis.mOut.writeByte(high);\r\n\t\t\t\t\t\tthis.mOut.writeInt32(low);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\tthis.mOut.writeInt32(low);\r\n\t\t\t\t\t\tthis.mOut.writeByte(high);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse if (high >>> 16==0){\r\n\t\t\t\t\tthis.mOut.writeByte(MarkCompressProtocol.TYPE_INT_6BYTE);\r\n\t\t\t\t\tif (this.mOut.endian==\"bigEndian\"){\r\n\t\t\t\t\t\tthis.mOut.writeInt16(high);\r\n\t\t\t\t\t\tthis.mOut.writeInt32(low);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\tthis.mOut.writeInt32(low);\r\n\t\t\t\t\t\tthis.mOut.writeInt16(high);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse if (high >>> 24==0){\r\n\t\t\t\t\tthis.mOut.writeByte(MarkCompressProtocol.TYPE_INT_7BYTE);\r\n\t\t\t\t\tif (this.mOut.endian==\"bigEndian\"){\r\n\t\t\t\t\t\tUtils.putThree(this.mOut,high);\r\n\t\t\t\t\t\tthis.mOut.writeInt32(low);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\tthis.mOut.writeInt32(low);\r\n\t\t\t\t\t\tUtils.putThree(this.mOut,high);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse{\r\n\t\t\t\t\tthis.mOut.writeByte(MarkCompressProtocol.TYPE_INT_8BYTE);\r\n\t\t\t\t\tif (this.mOut.endian==\"bigEndian\"){\r\n\t\t\t\t\t\tthis.mOut.writeInt32(high);\r\n\t\t\t\t\t\tthis.mOut.writeInt32(low);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\tthis.mOut.writeInt32(low);\r\n\t\t\t\t\t\tthis.mOut.writeInt32(high);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__proto.writeFloat=function(v){\r\n\t\t\tif (v==0){\r\n\t\t\t\tthis.mOut.writeByte(MarkCompressProtocol.TYPE_NULL_OR_ZERO_OR_FALSE);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.mWriteBuffer.length=0;\r\n\t\t\tthis.mWriteBuffer.pos=0;\r\n\t\t\tthis.mWriteBuffer.writeFloat32(v);\r\n\t\t\tvar freeNums=0;\r\n\t\t\tvar i=0;\r\n\t\t\tif (this.mOut.endian==\"bigEndian\"){\r\n\t\t\t\tfor (i=0;i < this.mWriteBuffer.length;i++){\r\n\t\t\t\t\tif (this.mWriteBuffer[i]==0){\r\n\t\t\t\t\t\tfreeNums++;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\tbreak ;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.mOut.writeByte(MarkCompressProtocol.TYPE_INT_1BYTE-(3-freeNums));\r\n\t\t\t\tthis.mOut.writeArrayBuffer(this.mWriteBuffer.buffer,0,freeNums)\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tfor (i=this.mWriteBuffer.length-1;i >=0;i--){\r\n\t\t\t\t\tif (this.mWriteBuffer[i]==0){\r\n\t\t\t\t\t\tfreeNums++;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\tbreak ;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.mOut.writeByte(MarkCompressProtocol.TYPE_INT_1BYTE-(3-freeNums));\r\n\t\t\t\tthis.mOut.writeArrayBuffer(this.mWriteBuffer.buffer,0,4-freeNums)\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__proto.writeDouble=function(v){\r\n\t\t\tthrow new AbstractMethodError();\r\n\t\t}\r\n\r\n\t\t__proto.writeString=function(s){\r\n\t\t\tif (s==null){\r\n\t\t\t\tthis.mOut.writeByte(MarkCompressProtocol.TYPE_NULL_OR_ZERO_OR_FALSE);\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tthis.mOut.writeByte(MarkCompressProtocol.TYPE_STRING);\r\n\t\t\t\tthis.mWriteBuffer.length=0;\r\n\t\t\t\tthis.mWriteBuffer.pos=0;\r\n\t\t\t\tthis.mWriteBuffer.writeUTFBytes(s);\r\n\t\t\t\tthis.writeInt(this.mWriteBuffer.length);\r\n\t\t\t\tthis.mOut.writeArrayBuffer(this.mWriteBuffer.buffer,0,this.mWriteBuffer.length);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// mOut.w\r\n\t\t__proto.writeBytes=function(bs){\r\n\t\t\tthrow new AbstractMethodError();\r\n\t\t}\r\n\r\n\t\tMarkCompressOutput.create=function(out){\r\n\t\t\treturn new MarkCompressOutput(out,\"utf-8\");\r\n\t\t}\r\n\r\n\t\tMarkCompressOutput.createByCharset=function(out,charset){\r\n\t\t\treturn new MarkCompressOutput(out,charset);\r\n\t\t}\r\n\r\n\t\treturn MarkCompressOutput;\r\n\t})(AbstractOutput)\r\n\r\n\r\n\t/**\r\n\t*<code>Node</code> 类用于创建节点对象，节点是最基本的元素。\r\n\t*/\r\n\t//class laya.display.Node extends laya.events.EventDispatcher\r\n\tvar Node=(function(_super){\r\n\t\tfunction Node(){\r\n\t\t\tthis.name=\"\";\r\n\t\t\tthis.destroyed=false;\r\n\t\t\tthis._displayedInStage=false;\r\n\t\t\tthis._parent=null;\r\n\t\t\tthis.conchModel=null;\r\n\t\t\tNode.__super.call(this);\r\n\t\t\tthis._childs=Node.ARRAY_EMPTY;\r\n\t\t\tthis.timer=Laya.timer;\r\n\t\t\tthis._$P=Node.PROP_EMPTY;\r\n\t\t\tthis.conchModel=Render.isConchNode? this.createConchModel():null;\r\n\t\t}\r\n\r\n\t\t__class(Node,'laya.display.Node',_super);\r\n\t\tvar __proto=Node.prototype;\r\n\t\t__proto.createConchModel=function(){\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*<p>销毁此对象。</p>\r\n\t\t*@param destroyChild 是否同时销毁子节点，若值为true,则销毁子节点，否则不销毁子节点。\r\n\t\t*/\r\n\t\t__proto.destroy=function(destroyChild){\r\n\t\t\t(destroyChild===void 0)&& (destroyChild=true);\r\n\t\t\tthis.destroyed=true;\r\n\t\t\tthis._parent && this._parent.removeChild(this);\r\n\t\t\tif (this._childs){\r\n\t\t\t\tif (destroyChild)this.destroyChildren();\r\n\t\t\t\telse this.removeChildren();\r\n\t\t\t}\r\n\t\t\tthis._childs=null;\r\n\t\t\tthis._$P=null;\r\n\t\t\tthis.offAll();\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*销毁所有子对象，不销毁自己本身。\r\n\t\t*/\r\n\t\t__proto.destroyChildren=function(){\r\n\t\t\tif (this._childs){\r\n\t\t\t\tfor (var i=this._childs.length-1;i >-1;i--){\r\n\t\t\t\t\tthis._childs[i].destroy(true);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*添加子节点。\r\n\t\t*@param node 节点对象\r\n\t\t*@return 返回添加的节点\r\n\t\t*/\r\n\t\t__proto.addChild=function(node){\r\n\t\t\tif (this.destroyed || node===this)return node;\r\n\t\t\tif (node._parent===this){\r\n\t\t\t\tthis._childs.splice(this.getChildIndex(node),1);\r\n\t\t\t\tthis._childs.push(node);\r\n\t\t\t\tif (this.conchModel){\r\n\t\t\t\t\tthis.conchModel.removeChild(node.conchModel);\r\n\t\t\t\t\tthis.conchModel.addChildAt(node.conchModel,this._childs.length-1);\r\n\t\t\t\t}\r\n\t\t\t\tthis._childChanged();\r\n\t\t\t\t}else {\r\n\t\t\t\tnode.parent && node.parent.removeChild(node);\r\n\t\t\t\tthis._childs===Node.ARRAY_EMPTY && (this._childs=[]);\r\n\t\t\t\tthis._childs.push(node);\r\n\t\t\t\tthis.conchModel && this.conchModel.addChildAt(node.conchModel,this._childs.length-1);\r\n\t\t\t\tnode.parent=this;\r\n\t\t\t\tthis._childChanged();\r\n\t\t\t}\r\n\t\t\treturn node;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*批量增加子节点\r\n\t\t*@param ...args 无数子节点。\r\n\t\t*/\r\n\t\t__proto.addChildren=function(__args){\r\n\t\t\tvar args=arguments;\r\n\t\t\tvar i=0,n=args.length;\r\n\t\t\twhile (i < n){\r\n\t\t\t\tthis.addChild(args[i++]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*添加子节点到指定的索引位置。\r\n\t\t*@param node 节点对象。\r\n\t\t*@param index 索引位置。\r\n\t\t*@return 返回添加的节点。\r\n\t\t*/\r\n\t\t__proto.addChildAt=function(node,index){\r\n\t\t\tif (this.destroyed || node===this)return node;\r\n\t\t\tif (index >=0 && index <=this._childs.length){\r\n\t\t\t\tif (node._parent===this){\r\n\t\t\t\t\tvar oldIndex=this.getChildIndex(node);\r\n\t\t\t\t\tthis._childs.splice(oldIndex,1);\r\n\t\t\t\t\tthis._childs.splice(index,0,node);\r\n\t\t\t\t\tif (this.conchModel){\r\n\t\t\t\t\t\tthis.conchModel.removeChild(node.conchModel);\r\n\t\t\t\t\t\tthis.conchModel.addChildAt(node.conchModel,index);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis._childChanged();\r\n\t\t\t\t\t}else {\r\n\t\t\t\t\tnode.parent && node.parent.removeChild(node);\r\n\t\t\t\t\tthis._childs===Node.ARRAY_EMPTY && (this._childs=[]);\r\n\t\t\t\t\tthis._childs.splice(index,0,node);\r\n\t\t\t\t\tthis.conchModel && this.conchModel.addChildAt(node.conchModel,index);\r\n\t\t\t\t\tnode.parent=this;\r\n\t\t\t\t}\r\n\t\t\t\treturn node;\r\n\t\t\t\t}else {\r\n\t\t\t\tthrow new Error(\"appendChildAt:The index is out of bounds\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*根据子节点对象，获取子节点的索引位置。\r\n\t\t*@param node 子节点。\r\n\t\t*@return 子节点所在的索引位置。\r\n\t\t*/\r\n\t\t__proto.getChildIndex=function(node){\r\n\t\t\treturn this._childs.indexOf(node);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*根据子节点的名字，获取子节点对象。\r\n\t\t*@param name 子节点的名字。\r\n\t\t*@return 节点对象。\r\n\t\t*/\r\n\t\t__proto.getChildByName=function(name){\r\n\t\t\tvar nodes=this._childs;\r\n\t\t\tfor (var i=0,n=nodes.length;i < n;i++){\r\n\t\t\t\tvar node=nodes[i];\r\n\t\t\t\tif (node.name===name)return node;\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\t/**@private */\r\n\t\t__proto._get$P=function(key){\r\n\t\t\treturn this._$P[key];\r\n\t\t}\r\n\r\n\t\t/**@private */\r\n\t\t__proto._set$P=function(key,value){\r\n\t\t\tif (!this.destroyed){\r\n\t\t\t\tthis._$P===Node.PROP_EMPTY && (this._$P={});\r\n\t\t\t\tthis._$P[key]=value;\r\n\t\t\t}\r\n\t\t\treturn value;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*根据子节点的索引位置，获取子节点对象。\r\n\t\t*@param index 索引位置\r\n\t\t*@return 子节点\r\n\t\t*/\r\n\t\t__proto.getChildAt=function(index){\r\n\t\t\treturn this._childs[index];\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*设置子节点的索引位置。\r\n\t\t*@param node 子节点。\r\n\t\t*@param index 新的索引。\r\n\t\t*@return 返回子节点本身。\r\n\t\t*/\r\n\t\t__proto.setChildIndex=function(node,index){\r\n\t\t\tvar childs=this._childs;\r\n\t\t\tif (index < 0 || index >=childs.length){\r\n\t\t\t\tthrow new Error(\"setChildIndex:The index is out of bounds.\");\r\n\t\t\t};\r\n\t\t\tvar oldIndex=this.getChildIndex(node);\r\n\t\t\tif (oldIndex < 0)throw new Error(\"setChildIndex:node is must child of this object.\");\r\n\t\t\tchilds.splice(oldIndex,1);\r\n\t\t\tchilds.splice(index,0,node);\r\n\t\t\tif (this.conchModel){\r\n\t\t\t\tthis.conchModel.removeChild(node.conchModel);\r\n\t\t\t\tthis.conchModel.addChildAt(node.conchModel,index);\r\n\t\t\t}\r\n\t\t\tthis._childChanged();\r\n\t\t\treturn node;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*子节点发生改变。\r\n\t\t*@param child 子节点。\r\n\t\t*/\r\n\t\t__proto._childChanged=function(child){}\r\n\t\t/**\r\n\t\t*删除子节点。\r\n\t\t*@param node 子节点\r\n\t\t*@return 被删除的节点\r\n\t\t*/\r\n\t\t__proto.removeChild=function(node){\r\n\t\t\tif (!this._childs)return node;\r\n\t\t\tvar index=this._childs.indexOf(node);\r\n\t\t\treturn this.removeChildAt(index);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*从父容器删除自己，如已经被删除不会抛出异常。\r\n\t\t*@return 当前节点（ Node ）对象。\r\n\t\t*/\r\n\t\t__proto.removeSelf=function(){\r\n\t\t\tthis._parent && this._parent.removeChild(this);\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*根据子节点名字删除对应的子节点对象，如果找不到不会抛出异常。\r\n\t\t*@param name 对象名字。\r\n\t\t*@return 查找到的节点（ Node ）对象。\r\n\t\t*/\r\n\t\t__proto.removeChildByName=function(name){\r\n\t\t\tvar node=this.getChildByName(name);\r\n\t\t\tnode && this.removeChild(node);\r\n\t\t\treturn node;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*根据子节点索引位置，删除对应的子节点对象。\r\n\t\t*@param index 节点索引位置。\r\n\t\t*@return 被删除的节点。\r\n\t\t*/\r\n\t\t__proto.removeChildAt=function(index){\r\n\t\t\tvar node=this.getChildAt(index);\r\n\t\t\tif (node){\r\n\t\t\t\tthis._childs.splice(index,1);\r\n\t\t\t\tthis.conchModel && this.conchModel.removeChild(node.conchModel);\r\n\t\t\t\tnode.parent=null;\r\n\t\t\t}\r\n\t\t\treturn node;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*删除指定索引区间的所有子对象。\r\n\t\t*@param beginIndex 开始索引。\r\n\t\t*@param endIndex 结束索引。\r\n\t\t*@return 当前节点对象。\r\n\t\t*/\r\n\t\t__proto.removeChildren=function(beginIndex,endIndex){\r\n\t\t\t(beginIndex===void 0)&& (beginIndex=0);\r\n\t\t\t(endIndex===void 0)&& (endIndex=0x7fffffff);\r\n\t\t\tif (this._childs && this._childs.length > 0){\r\n\t\t\t\tvar childs=this._childs;\r\n\t\t\t\tif (beginIndex===0 && endIndex >=n){\r\n\t\t\t\t\tvar arr=childs;\r\n\t\t\t\t\tthis._childs=Node.ARRAY_EMPTY;\r\n\t\t\t\t\t}else {\r\n\t\t\t\t\tarr=childs.splice(beginIndex,endIndex-beginIndex);\r\n\t\t\t\t}\r\n\t\t\t\tfor (var i=0,n=arr.length;i < n;i++){\r\n\t\t\t\t\tarr[i].parent=null;\r\n\t\t\t\t\tthis.conchModel && this.conchModel.removeChild(arr[i].conchModel);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*替换子节点。\r\n\t\t*@internal 将传入的新节点对象替换到已有子节点索引位置处。\r\n\t\t*@param newNode 新节点。\r\n\t\t*@param oldNode 老节点。\r\n\t\t*@return 返回新节点。\r\n\t\t*/\r\n\t\t__proto.replaceChild=function(newNode,oldNode){\r\n\t\t\tvar index=this._childs.indexOf(oldNode);\r\n\t\t\tif (index >-1){\r\n\t\t\t\tthis._childs.splice(index,1,newNode);\r\n\t\t\t\tif (this.conchModel){\r\n\t\t\t\t\tthis.conchModel.removeChild(oldNode.conchModel);\r\n\t\t\t\t\tthis.conchModel.addChildAt(newNode.conchModel,index);\r\n\t\t\t\t}\r\n\t\t\t\toldNode.parent=null;\r\n\t\t\t\tnewNode.parent=this;\r\n\t\t\t\treturn newNode;\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\t/**@private */\r\n\t\t__proto._setDisplay=function(value){\r\n\t\t\tif (this._displayedInStage!==value){\r\n\t\t\t\tthis._displayedInStage=value;\r\n\t\t\t\tif (value)this.event(\"display\");\r\n\t\t\t\telse this.event(\"undisplay\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*设置指定节点对象是否可见(是否在渲染列表中)。\r\n\t\t*@param node 节点。\r\n\t\t*@param display 是否可见。\r\n\t\t*/\r\n\t\t__proto._displayChild=function(node,display){\r\n\t\t\tvar childs=node._childs;\r\n\t\t\tif (childs){\r\n\t\t\t\tfor (var i=childs.length-1;i >-1;i--){\r\n\t\t\t\t\tvar child=childs[i];\r\n\t\t\t\t\tchild._setDisplay(display);\r\n\t\t\t\t\tchild._childs.length && this._displayChild(child,display);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tnode._setDisplay(display);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*当前容器是否包含 <code>node</code> 节点。\r\n\t\t*@param node 某一个节点 <code>Node</code>。\r\n\t\t*@return 一个布尔值表示是否包含<code>node</code>节点。\r\n\t\t*/\r\n\t\t__proto.contains=function(node){\r\n\t\t\tif (node===this)return true;\r\n\t\t\twhile (node){\r\n\t\t\t\tif (node.parent===this)return true;\r\n\t\t\t\tnode=node.parent;\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*定时重复执行某函数。\r\n\t\t*@param delay 间隔时间(单位毫秒)。\r\n\t\t*@param caller 执行域(this)。\r\n\t\t*@param method 结束时的回调方法。\r\n\t\t*@param args 回调参数。\r\n\t\t*@param coverBefore 是否覆盖之前的延迟执行，默认为true。\r\n\t\t*/\r\n\t\t__proto.timerLoop=function(delay,caller,method,args,coverBefore){\r\n\t\t\t(coverBefore===void 0)&& (coverBefore=true);\r\n\t\t\tthis.timer._create(false,true,delay,caller,method,args,coverBefore);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*定时执行某函数一次。\r\n\t\t*@param delay 延迟时间(单位毫秒)。\r\n\t\t*@param caller 执行域(this)。\r\n\t\t*@param method 结束时的回调方法。\r\n\t\t*@param args 回调参数。\r\n\t\t*@param coverBefore 是否覆盖之前的延迟执行，默认为true。\r\n\t\t*/\r\n\t\t__proto.timerOnce=function(delay,caller,method,args,coverBefore){\r\n\t\t\t(coverBefore===void 0)&& (coverBefore=true);\r\n\t\t\tthis.timer._create(false,false,delay,caller,method,args,coverBefore);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*定时重复执行某函数(基于帧率)。\r\n\t\t*@param delay 间隔几帧(单位为帧)。\r\n\t\t*@param caller 执行域(this)。\r\n\t\t*@param method 结束时的回调方法。\r\n\t\t*@param args 回调参数。\r\n\t\t*@param coverBefore 是否覆盖之前的延迟执行，默认为true。\r\n\t\t*/\r\n\t\t__proto.frameLoop=function(delay,caller,method,args,coverBefore){\r\n\t\t\t(coverBefore===void 0)&& (coverBefore=true);\r\n\t\t\tthis.timer._create(true,true,delay,caller,method,args,coverBefore);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*定时执行一次某函数(基于帧率)。\r\n\t\t*@param delay 延迟几帧(单位为帧)。\r\n\t\t*@param caller 执行域(this)\r\n\t\t*@param method 结束时的回调方法\r\n\t\t*@param args 回调参数\r\n\t\t*@param coverBefore 是否覆盖之前的延迟执行，默认为true\r\n\t\t*/\r\n\t\t__proto.frameOnce=function(delay,caller,method,args,coverBefore){\r\n\t\t\t(coverBefore===void 0)&& (coverBefore=true);\r\n\t\t\tthis.timer._create(true,false,delay,caller,method,args,coverBefore);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*清理定时器。\r\n\t\t*@param caller 执行域(this)。\r\n\t\t*@param method 结束时的回调方法。\r\n\t\t*/\r\n\t\t__proto.clearTimer=function(caller,method){\r\n\t\t\tthis.timer.clear(caller,method);\r\n\t\t}\r\n\r\n\t\t/**表示是否在显示列表中显示。是否在显示渲染列表中。*/\r\n\t\t__getset(0,__proto,'displayedInStage',function(){\r\n\t\t\treturn this._displayedInStage;\r\n\t\t});\r\n\r\n\t\t/**父节点。*/\r\n\t\t__getset(0,__proto,'parent',function(){\r\n\t\t\treturn this._parent;\r\n\t\t\t},function(value){\r\n\t\t\tif (this._parent!==value){\r\n\t\t\t\tif (value){\r\n\t\t\t\t\tthis._parent=value;\r\n\t\t\t\t\tthis.event(\"added\");\r\n\t\t\t\t\tvalue.displayedInStage && this._displayChild(this,true);\r\n\t\t\t\t\tvalue._childChanged(this);\r\n\t\t\t\t\t}else {\r\n\t\t\t\t\tthis.event(\"removed\");\r\n\t\t\t\t\tthis._parent._childChanged();\r\n\t\t\t\t\tthis._displayChild(this,false);\r\n\t\t\t\t\tthis._parent=value;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*子对象数量。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'numChildren',function(){\r\n\t\t\treturn this._childs.length;\r\n\t\t});\r\n\r\n\t\tNode.ARRAY_EMPTY=[];\r\n\t\tNode.PROP_EMPTY={};\r\n\t\treturn Node;\r\n\t})(EventDispatcher)\r\n\r\n\r\n\t/**\r\n\t*<code>Resource</code> 资源存取类。\r\n\t*/\r\n\t//class laya.resource.Resource extends laya.events.EventDispatcher\r\n\tvar Resource=(function(_super){\r\n\t\tfunction Resource(){\r\n\t\t\tthis._id=0;\r\n\t\t\tthis._lastUseFrameCount=0;\r\n\t\t\tthis._memorySize=0;\r\n\t\t\tthis._name=null;\r\n\t\t\tthis._loaded=false;\r\n\t\t\tthis._released=false;\r\n\t\t\tthis._disposed=false;\r\n\t\t\tthis._resourceManager=null;\r\n\t\t\tthis.lock=false;\r\n\t\t\tResource.__super.call(this);\r\n\t\t\tthis._$1__id=++Resource._uniqueIDCounter;\r\n\t\t\tResource._loadedResources.push(this);\r\n\t\t\tResource._isLoadedResourcesSorted=false;\r\n\t\t\tthis._released=true;\r\n\t\t\tthis.lock=false;\r\n\t\t\tthis._memorySize=0;\r\n\t\t\tthis._lastUseFrameCount=-1;\r\n\t\t\t(ResourceManager.currentResourceManager)&& (ResourceManager.currentResourceManager.addResource(this));\r\n\t\t}\r\n\r\n\t\t__class(Resource,'laya.resource.Resource',_super);\r\n\t\tvar __proto=Resource.prototype;\r\n\t\tLaya.imps(__proto,{\"laya.resource.IDispose\":true,\"laya.resource.ICreateResource\":true})\r\n\t\t/**重新创建资源,override it，同时修改memorySize属性、处理startCreate()和compoleteCreate()方法。*/\r\n\t\t__proto.recreateResource=function(){\r\n\t\t\tthis.startCreate();\r\n\t\t\tthis.completeCreate();\r\n\t\t}\r\n\r\n\t\t/**销毁资源，override it,同时修改memorySize属性。*/\r\n\t\t__proto.detoryResource=function(){}\r\n\t\t/**\r\n\t\t*激活资源，使用资源前应先调用此函数激活。\r\n\t\t*@param force 是否强制创建。\r\n\t\t*/\r\n\t\t__proto.activeResource=function(force){\r\n\t\t\t(force===void 0)&& (force=false);\r\n\t\t\tthis._lastUseFrameCount=Stat.loopCount;\r\n\t\t\tif (this._released || force){\r\n\t\t\t\tthis.recreateResource();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*释放资源。\r\n\t\t*@param force 是否强制释放。\r\n\t\t*@return 是否成功释放。\r\n\t\t*/\r\n\t\t__proto.releaseResource=function(force){\r\n\t\t\t(force===void 0)&& (force=false);\r\n\t\t\tif (!force && this.lock)\r\n\t\t\t\treturn false;\r\n\t\t\tif (!this._released || force){\r\n\t\t\t\tthis.detoryResource();\r\n\t\t\t\tthis._released=true;\r\n\t\t\t\tthis._lastUseFrameCount=-1;\r\n\t\t\t\tthis.event(\"released\",this);\r\n\t\t\t\treturn true;\r\n\t\t\t\t}else {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*设置唯一名字,如果名字重复则自动加上“-copy”。\r\n\t\t*@param newName 名字。\r\n\t\t*/\r\n\t\t__proto.setUniqueName=function(newName){\r\n\t\t\tvar isUnique=true;\r\n\t\t\tfor (var i=0;i < Resource._loadedResources.length;i++){\r\n\t\t\t\tif (Resource._loadedResources[i]._name!==newName || Resource._loadedResources[i]===this)\r\n\t\t\t\t\tcontinue ;\r\n\t\t\t\tisUnique=false;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (isUnique){\r\n\t\t\t\tif (this.name !=newName){\r\n\t\t\t\t\tthis.name=newName;\r\n\t\t\t\t\tResource._isLoadedResourcesSorted=false;\r\n\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\tthis.setUniqueName(newName.concat(\"-copy\"));\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*/\r\n\t\t__proto.onAsynLoaded=function(url,data,params){\r\n\t\t\tthrow new Error(\"Resource: must override this function!\");\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*<p>彻底处理资源，处理后不能恢复。</p>\r\n\t\t*<p><b>注意：</b>会强制解锁清理。</p>\r\n\t\t*/\r\n\t\t__proto.dispose=function(){\r\n\t\t\tif (this._resourceManager!==null)\r\n\t\t\t\tthrow new Error(\"附属于resourceManager的资源不能独立释放！\");\r\n\t\t\tthis._disposed=true;\r\n\t\t\tthis.lock=false;\r\n\t\t\tthis.releaseResource();\r\n\t\t\tvar index=Resource._loadedResources.indexOf(this);\r\n\t\t\tif (index!==-1){\r\n\t\t\t\tResource._loadedResources.splice(index,1);\r\n\t\t\t\tResource._isLoadedResourcesSorted=false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**开始资源激活。*/\r\n\t\t__proto.startCreate=function(){\r\n\t\t\tthis.event(\"recovering\",this);\r\n\t\t}\r\n\r\n\t\t/**完成资源激活。*/\r\n\t\t__proto.completeCreate=function(){\r\n\t\t\tthis._released=false;\r\n\t\t\tthis.event(\"recovered\",this);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*设置名字\r\n\t\t*/\r\n\t\t/**\r\n\t\t*获取名字。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'name',function(){\r\n\t\t\treturn this._name;\r\n\t\t\t},function(value){\r\n\t\t\tif ((value || value!==\"\")&& this.name!==value){\r\n\t\t\t\tthis._name=value;\r\n\t\t\t\tResource._isLoadedResourcesSorted=false;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*距离上次使用帧率。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'lastUseFrameCount',function(){\r\n\t\t\treturn this._lastUseFrameCount;\r\n\t\t});\r\n\r\n\t\t__getset(0,__proto,'loaded',function(){\r\n\t\t\treturn this._loaded;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*是否已处理。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'disposed',function(){\r\n\t\t\treturn this._disposed;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*占用内存尺寸。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'memorySize',function(){\r\n\t\t\treturn this._memorySize;\r\n\t\t\t},function(value){\r\n\t\t\tvar offsetValue=value-this._memorySize;\r\n\t\t\tthis._memorySize=value;\r\n\t\t\tthis.resourceManager && this.resourceManager.addSize(offsetValue);\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*是否已释放。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'released',function(){\r\n\t\t\treturn this._released;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*资源管理员。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'resourceManager',function(){\r\n\t\t\treturn this._resourceManager;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*获取唯一标识ID(通常用于优化或识别)。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'id',function(){\r\n\t\t\treturn this._$1__id;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*本类型排序后的已载入资源。\r\n\t\t*/\r\n\t\t__getset(1,Resource,'sortedLoadedResourcesByName',function(){\r\n\t\t\tif (!Resource._isLoadedResourcesSorted){\r\n\t\t\t\tResource._isLoadedResourcesSorted=true;\r\n\t\t\t\tResource._loadedResources.sort(Resource.compareResourcesByName);\r\n\t\t\t}\r\n\t\t\treturn Resource._loadedResources;\r\n\t\t},laya.events.EventDispatcher._$SET_sortedLoadedResourcesByName);\r\n\r\n\t\tResource.getLoadedResourceByIndex=function(index){\r\n\t\t\treturn Resource._loadedResources[index];\r\n\t\t}\r\n\r\n\t\tResource.getLoadedResourcesCount=function(){\r\n\t\t\treturn Resource._loadedResources.length;\r\n\t\t}\r\n\r\n\t\tResource.compareResourcesByName=function(left,right){\r\n\t\t\tif (left===right)\r\n\t\t\t\treturn 0;\r\n\t\t\tvar x=left.name;\r\n\t\t\tvar y=right.name;\r\n\t\t\tif (x===null){\r\n\t\t\t\tif (y===null)\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\telse\r\n\t\t\t\treturn-1;\r\n\t\t\t\t}else {\r\n\t\t\t\tif (y==null)\r\n\t\t\t\t\treturn 1;\r\n\t\t\t\telse {\r\n\t\t\t\t\tvar retval=x.localeCompare(y);\r\n\t\t\t\t\tif (retval !=0)\r\n\t\t\t\t\t\treturn retval;\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tright.setUniqueName(y);\r\n\t\t\t\t\t\ty=right.name;\r\n\t\t\t\t\t\treturn x.localeCompare(y);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tResource._uniqueIDCounter=0;\r\n\t\tResource._loadedResources=[];\r\n\t\tResource._isLoadedResourcesSorted=false;\r\n\t\treturn Resource;\r\n\t})(EventDispatcher)\r\n\r\n\r\n\t/**\r\n\t*<p> <code>LoaderManager</code> 类用于用于批量加载资源、数据。</p>\r\n\t*<p>批量加载器，单例，可以通过Laya.loader访问。</p>\r\n\t*多线程(默认5个线程)，5个优先级(0最快，4最慢,默认为1)\r\n\t*某个资源加载失败后，会按照最低优先级重试加载(属性retryNum决定重试几次)，如果重试后失败，则调用complete函数，并返回null\r\n\t*/\r\n\t//class laya.net.LoaderManager extends laya.events.EventDispatcher\r\n\tvar LoaderManager=(function(_super){\r\n\t\tvar ResInfo;\r\n\t\tfunction LoaderManager(){\r\n\t\t\tthis.retryNum=1;\r\n\t\t\tthis.maxLoader=5;\r\n\t\t\tthis._loaders=[];\r\n\t\t\tthis._loaderCount=0;\r\n\t\t\tthis._resInfos=[];\r\n\t\t\tthis._infoPool=[];\r\n\t\t\tthis._maxPriority=5;\r\n\t\t\tthis._failRes={};\r\n\t\t\tLoaderManager.__super.call(this);\r\n\t\t\tfor (var i=0;i < this._maxPriority;i++)this._resInfos[i]=[];\r\n\t\t}\r\n\r\n\t\t__class(LoaderManager,'laya.net.LoaderManager',_super);\r\n\t\tvar __proto=LoaderManager.prototype;\r\n\t\t/**\r\n\t\t*根据clas定义创建一个资源空壳，随后进行异步加载，资源加载完成后，会调用资源类的onAsynLoaded方法回调真正的数据,套嵌资源的子资源会保留资源路径\"?\"后的部分\r\n\t\t*@param url 资源地址或者数组，比如[{url:xx,clas:xx,priority:xx,params:xx},{url:xx,clas:xx,priority:xx,params:xx}]\r\n\t\t*@param progress 进度回调，回调参数为当前文件加载的进度信息(0-1)。\r\n\t\t*@param clas 资源类名，比如Texture\r\n\t\t*@param type 资源类型\r\n\t\t*@param priority 优先级\r\n\t\t*@param cache 是否缓存\r\n\t\t*@return 返回资源对象\r\n\t\t*/\r\n\t\t__proto.create=function(url,complete,progress,clas,params,priority,cache){\r\n\t\t\t(priority===void 0)&& (priority=1);\r\n\t\t\t(cache===void 0)&& (cache=true);\r\n\t\t\tif ((url instanceof Array)){\r\n\t\t\t\tvar items=url;\r\n\t\t\t\tvar itemCount=items.length;\r\n\t\t\t\tvar loadedCount=0;\r\n\t\t\t\tif (progress){\r\n\t\t\t\t\tvar progress2=Handler.create(progress.caller,progress.method,progress.args,false);\r\n\t\t\t\t}\r\n\t\t\t\tfor (var i=0;i < itemCount;i++){\r\n\t\t\t\t\tvar item=items[i];\r\n\t\t\t\t\tif ((typeof item=='string'))item=items[i]={url:item};\r\n\t\t\t\t\titem.progress=0;\r\n\t\t\t\t\tvar progressHandler=progress ? Handler.create(null,onProgress,[item],false):null;\r\n\t\t\t\t\tvar completeHandler=(progress || complete)? Handler.create(null,onComplete,[item]):null;\r\n\t\t\t\t\tthis._create(item.url,completeHandler,progressHandler,item.clas || clas,item.params || params,item.priority || priority,cache);\r\n\t\t\t\t}\r\n\t\t\t\tfunction onComplete (item,content){\r\n\t\t\t\t\tloadedCount++;\r\n\t\t\t\t\titem.progress=1;\r\n\t\t\t\t\tif (loadedCount===itemCount && complete){\r\n\t\t\t\t\t\tcomplete.run();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tfunction onProgress (item,value){\r\n\t\t\t\t\titem.progress=value;\r\n\t\t\t\t\tvar num=0;\r\n\t\t\t\t\tfor (var j=0;j < itemCount;j++){\r\n\t\t\t\t\t\tvar item1=items[j];\r\n\t\t\t\t\t\tnum+=item1.progress;\r\n\t\t\t\t\t};\r\n\t\t\t\t\tvar v=num / itemCount;\r\n\t\t\t\t\tprogress2.runWith(v);\r\n\t\t\t\t}\r\n\t\t\t\treturn true;\r\n\t\t\t}else return this._create(url,complete,progress,clas,params,priority,cache);\r\n\t\t}\r\n\r\n\t\t__proto._create=function(url,complete,progress,clas,params,priority,cache){\r\n\t\t\t(priority===void 0)&& (priority=1);\r\n\t\t\t(cache===void 0)&& (cache=true);\r\n\t\t\tvar item=this.getRes(url);\r\n\t\t\tif (!item){\r\n\t\t\t\tvar extension=Utils1.getFileExtension(url);\r\n\t\t\t\tvar creatItem=LoaderManager.createMap[extension];\r\n\t\t\t\tif (!clas)clas=creatItem[0];\r\n\t\t\t\tvar type=creatItem[1];\r\n\t\t\t\tif (clas===Texture)type=\"htmlimage\";\r\n\t\t\t\titem=clas ? new clas():null;\r\n\t\t\t\tthis.load(url,Handler.create(null,onLoaded),progress,type,priority,false,null,true);\r\n\t\t\t\tfunction onLoaded (data){\r\n\t\t\t\t\titem && item.onAsynLoaded.call(item,url,data,params);\r\n\t\t\t\t\tif (complete)complete.run();\r\n\t\t\t\t}\r\n\t\t\t\tif (cache)LoaderManager.cacheRes(url,item);\r\n\t\t\t\t}else {\r\n\t\t\t\tprogress && progress.runWith(1);\r\n\t\t\t\tcomplete && complete.run();\r\n\t\t\t}\r\n\t\t\treturn item;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*加载资源。\r\n\t\t*@param url 地址，或者资源对象数组(简单数组：[\"a.png\",\"b.png\"]，复杂数组[{url:\"a.png\",type:Loader.IMAGE,size:100,priority:1},{url:\"b.json\",type:Loader.JSON,size:50,priority:1}])。\r\n\t\t*@param complete 结束回调，如果加载失败，则返回 null 。\r\n\t\t*@param progress 进度回调，回调参数为当前文件加载的进度信息(0-1)。\r\n\t\t*@param type 资源类型。\r\n\t\t*@param priority 优先级，0-4，五个优先级，0优先级最高，默认为1。\r\n\t\t*@param cache 是否缓存加载结果。\r\n\t\t*@param group 分组。\r\n\t\t*@param ignoreCache 是否忽略缓存，强制重新加载\r\n\t\t*@return 此 LoaderManager 对象。\r\n\t\t*/\r\n\t\t__proto.load=function(url,complete,progress,type,priority,cache,group,ignoreCache){\r\n\t\t\t(priority===void 0)&& (priority=1);\r\n\t\t\t(cache===void 0)&& (cache=true);\r\n\t\t\t(ignoreCache===void 0)&& (ignoreCache=false);\r\n\t\t\tif ((url instanceof Array))return this._loadAssets(url,complete,progress,type,priority,cache,group);\r\n\t\t\turl=URL.formatURL(url);\r\n\t\t\tvar content=Loader.getRes(url);\r\n\t\t\tif (content !=null){\r\n\t\t\t\tprogress && progress.runWith(1);\r\n\t\t\t\tcomplete && complete.runWith(content);\r\n\t\t\t\tthis._loaderCount || this.event(\"complete\");\r\n\t\t\t\t}else {\r\n\t\t\t\tvar info=LoaderManager._resMap[url];\r\n\t\t\t\tif (!info){\r\n\t\t\t\t\tinfo=this._infoPool.length ? this._infoPool.pop():new ResInfo();\r\n\t\t\t\t\tinfo.url=url;\r\n\t\t\t\t\tinfo.type=type;\r\n\t\t\t\t\tinfo.cache=cache;\r\n\t\t\t\t\tinfo.group=group;\r\n\t\t\t\t\tinfo.ignoreCache=ignoreCache;\r\n\t\t\t\t\tcomplete && info.on(\"complete\",complete.caller,complete.method,complete.args);\r\n\t\t\t\t\tprogress && info.on(\"progress\",progress.caller,progress.method,progress.args);\r\n\t\t\t\t\tLoaderManager._resMap[url]=info;\r\n\t\t\t\t\tpriority=priority < this._maxPriority ? priority :this._maxPriority-1;\r\n\t\t\t\t\tthis._resInfos[priority].push(info);\r\n\t\t\t\t\tthis._next();\r\n\t\t\t\t\t}else {\r\n\t\t\t\t\tcomplete && info._createListener(\"complete\",complete.caller,complete.method,complete.args,false,false);\r\n\t\t\t\t\tprogress && info._createListener(\"progress\",progress.caller,progress.method,progress.args,false,false);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\t\t__proto._next=function(){\r\n\t\t\tif (this._loaderCount >=this.maxLoader)return;\r\n\t\t\tfor (var i=0;i < this._maxPriority;i++){\r\n\t\t\t\tvar infos=this._resInfos[i];\r\n\t\t\t\tif (infos.length > 0){\r\n\t\t\t\t\tvar info=infos.shift();\r\n\t\t\t\t\tif (info)return this._doLoad(info);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis._loaderCount || this.event(\"complete\");\r\n\t\t}\r\n\r\n\t\t__proto._doLoad=function(resInfo){\r\n\t\t\tthis._loaderCount++;\r\n\t\t\tvar loader=this._loaders.length ? this._loaders.pop():new Loader();\r\n\t\t\tloader.on(\"complete\",null,onLoaded);\r\n\t\t\tloader.on(\"progress\",null,function(num){\r\n\t\t\t\tresInfo.event(\"progress\",num);\r\n\t\t\t});\r\n\t\t\tloader.on(\"error\",null,function(msg){\r\n\t\t\t\tonLoaded(null);\r\n\t\t\t});\r\n\t\t\tvar _this=this;\r\n\t\t\tfunction onLoaded (data){\r\n\t\t\t\tloader.offAll();\r\n\t\t\t\tloader._data=null;\r\n\t\t\t\t_this._loaders.push(loader);\r\n\t\t\t\t_this._endLoad(resInfo,(data instanceof Array)? [data] :data);\r\n\t\t\t\t_this._loaderCount--;\r\n\t\t\t\t_this._next();\r\n\t\t\t}\r\n\t\t\tloader.load(resInfo.url,resInfo.type,resInfo.cache,resInfo.group,resInfo.ignoreCache);\r\n\t\t}\r\n\r\n\t\t__proto._endLoad=function(resInfo,content){\r\n\t\t\tif (content===null){\r\n\t\t\t\tvar errorCount=this._failRes[resInfo.url] || 0;\r\n\t\t\t\tif (errorCount < this.retryNum){\r\n\t\t\t\t\tconsole.log(\"[warn]Retry to load:\",resInfo.url);\r\n\t\t\t\t\tthis._failRes[resInfo.url]=errorCount+1;\r\n\t\t\t\t\tthis._resInfos[this._maxPriority-1].push(resInfo);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t\t}else {\r\n\t\t\t\t\tconsole.log(\"[error]Failed to load:\",resInfo.url);\r\n\t\t\t\t\tthis.event(\"error\",resInfo.url);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tdelete LoaderManager._resMap[resInfo.url];\r\n\t\t\tresInfo.event(\"complete\",content);\r\n\t\t\tresInfo.offAll();\r\n\t\t\tthis._infoPool.push(resInfo);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*清理指定资源地址缓存。\r\n\t\t*@param url 资源地址。\r\n\t\t*@param forceDispose 是否强制销毁，有些资源是采用引用计数方式销毁，如果forceDispose=true，则忽略引用计数，直接销毁，比如Texture，默认为false\r\n\t\t*/\r\n\t\t__proto.clearRes=function(url,forceDispose){\r\n\t\t\t(forceDispose===void 0)&& (forceDispose=false);\r\n\t\t\tLoader.clearRes(url,forceDispose);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*获取指定资源地址的资源。\r\n\t\t*@param url 资源地址。\r\n\t\t*@return 返回资源。\r\n\t\t*/\r\n\t\t__proto.getRes=function(url){\r\n\t\t\treturn Loader.getRes(url);\r\n\t\t}\r\n\r\n\t\t/**清理当前未完成的加载，所有未加载的内容全部停止加载。*/\r\n\t\t__proto.clearUnLoaded=function(){\r\n\t\t\tfor (var i=0;i < this._maxPriority;i++){\r\n\t\t\t\tvar infos=this._resInfos[i];\r\n\t\t\t\tfor (var j=infos.length-1;j >-1;j--){\r\n\t\t\t\t\tvar info=infos[j];\r\n\t\t\t\t\tif (info){\r\n\t\t\t\t\t\tinfo.offAll();\r\n\t\t\t\t\t\tthis._infoPool.push(info);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tinfos.length=0;\r\n\t\t\t}\r\n\t\t\tthis._loaderCount=0;\r\n\t\t\tLoaderManager._resMap={};\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*根据地址集合清理掉未加载的内容\r\n\t\t*@param urls 资源地址集合\r\n\t\t*/\r\n\t\t__proto.cancelLoadByUrls=function(urls){\r\n\t\t\tif (!urls)return;\r\n\t\t\tfor (var i=0,n=urls.length;i < n;i++){\r\n\t\t\t\tthis.cancelLoadByUrl(urls[i]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*根据地址清理掉未加载的内容\r\n\t\t*@param url 资源地址\r\n\t\t*/\r\n\t\t__proto.cancelLoadByUrl=function(url){\r\n\t\t\turl=URL.formatURL(url);\r\n\t\t\tfor (var i=0;i < this._maxPriority;i++){\r\n\t\t\t\tvar infos=this._resInfos[i];\r\n\t\t\t\tfor (var j=infos.length-1;j >-1;j--){\r\n\t\t\t\t\tvar info=infos[j];\r\n\t\t\t\t\tif (info && info.url===url){\r\n\t\t\t\t\t\tinfos[j]=null;\r\n\t\t\t\t\t\tinfo.offAll();\r\n\t\t\t\t\t\tthis._infoPool.push(info);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (LoaderManager._resMap[url])delete LoaderManager._resMap[url];\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*加载数组里面的资源。\r\n\t\t*@param arr 简单：[\"a.png\",\"b.png\"]，复杂[{url:\"a.png\",type:Loader.IMAGE,size:100,priority:1},{url:\"b.json\",type:Loader.JSON,size:50,priority:1}]*/\r\n\t\t__proto._loadAssets=function(arr,complete,progress,type,priority,cache,group){\r\n\t\t\t(priority===void 0)&& (priority=1);\r\n\t\t\t(cache===void 0)&& (cache=true);\r\n\t\t\tvar itemCount=arr.length;\r\n\t\t\tvar loadedCount=0;\r\n\t\t\tvar totalSize=0;\r\n\t\t\tvar items=[];\r\n\t\t\tvar defaultType=type || \"image\";\r\n\t\t\tfor (var i=0;i < itemCount;i++){\r\n\t\t\t\tvar item=arr[i];\r\n\t\t\t\tif ((typeof item=='string'))item={url:item,type:defaultType,size:1,priority:priority};\r\n\t\t\t\tif (!item.size)item.size=1;\r\n\t\t\t\titem.progress=0;\r\n\t\t\t\ttotalSize+=item.size;\r\n\t\t\t\titems.push(item);\r\n\t\t\t\tvar progressHandler=progress ? Handler.create(null,loadProgress,[item],false):null;\r\n\t\t\t\tvar completeHandler=(complete || progress)? Handler.create(null,loadComplete,[item]):null;\r\n\t\t\t\tthis.load(item.url,completeHandler,progressHandler,item.type,item.priority || 1,cache,item.group || group);\r\n\t\t\t}\r\n\t\t\tfunction loadComplete (item,content){\r\n\t\t\t\tloadedCount++;\r\n\t\t\t\titem.progress=1;\r\n\t\t\t\tif (loadedCount===itemCount && complete){\r\n\t\t\t\t\tcomplete.run();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tfunction loadProgress (item,value){\r\n\t\t\t\tif (progress !=null){\r\n\t\t\t\t\titem.progress=value;\r\n\t\t\t\t\tvar num=0;\r\n\t\t\t\t\tfor (var j=0;j < items.length;j++){\r\n\t\t\t\t\t\tvar item1=items[j];\r\n\t\t\t\t\t\tnum+=item1.size *item1.progress;\r\n\t\t\t\t\t};\r\n\t\t\t\t\tvar v=num / totalSize;\r\n\t\t\t\t\tprogress.runWith(v);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\t\tLoaderManager.cacheRes=function(url,data){\r\n\t\t\tLoader.cacheRes(url,data);\r\n\t\t}\r\n\r\n\t\tLoaderManager._resMap={};\r\n\t\t__static(LoaderManager,\r\n\t\t['createMap',function(){return this.createMap={atlas:[null,\"atlas\"]};}\r\n\t\t]);\r\n\t\tLoaderManager.__init$=function(){\r\n\t\t\t//class ResInfo extends laya.events.EventDispatcher\r\n\t\t\tResInfo=(function(_super){\r\n\t\t\t\tfunction ResInfo(){\r\n\t\t\t\t\tthis.url=null;\r\n\t\t\t\t\tthis.type=null;\r\n\t\t\t\t\tthis.cache=false;\r\n\t\t\t\t\tthis.group=null;\r\n\t\t\t\t\tthis.ignoreCache=false;\r\n\t\t\t\t\tResInfo.__super.call(this);\r\n\t\t\t\t}\r\n\t\t\t\t__class(ResInfo,'',_super);\r\n\t\t\t\treturn ResInfo;\r\n\t\t\t})(EventDispatcher)\r\n\t\t}\r\n\r\n\t\treturn LoaderManager;\r\n\t})(EventDispatcher)\r\n\r\n\r\n\t/**\r\n\t*@private\r\n\t*使用Audio标签播放声音\r\n\t*/\r\n\t//class laya.media.h5audio.AudioSound extends laya.events.EventDispatcher\r\n\tvar AudioSound=(function(_super){\r\n\t\tfunction AudioSound(){\r\n\t\t\tthis.url=null;\r\n\t\t\tthis.audio=null;\r\n\t\t\tthis.loaded=false;\r\n\t\t\tAudioSound.__super.call(this);\r\n\t\t}\r\n\r\n\t\t__class(AudioSound,'laya.media.h5audio.AudioSound',_super);\r\n\t\tvar __proto=AudioSound.prototype;\r\n\t\t/**\r\n\t\t*释放声音\r\n\t\t*\r\n\t\t*/\r\n\t\t__proto.dispose=function(){\r\n\t\t\tvar ad=AudioSound._audioCache[this.url];\r\n\t\t\tif (ad){\r\n\t\t\t\tad.src=\"\";\r\n\t\t\t\tdelete AudioSound._audioCache[this.url];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*加载声音\r\n\t\t*@param url\r\n\t\t*\r\n\t\t*/\r\n\t\t__proto.load=function(url){\r\n\t\t\tthis.url=url;\r\n\t\t\tvar ad=AudioSound._audioCache[url];\r\n\t\t\tif (ad && ad.readyState >=2){\r\n\t\t\t\tthis.event(\"complete\");\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (!ad){\r\n\t\t\t\tad=Browser.createElement(\"audio\");\r\n\t\t\t\tad.src=url;\r\n\t\t\t\tAudioSound._audioCache[url]=ad;\r\n\t\t\t}\r\n\t\t\tad.addEventListener(\"canplaythrough\",onLoaded);\r\n\t\t\tad.addEventListener(\"error\",onErr);\r\n\t\t\tvar me=this;\r\n\t\t\tfunction onLoaded (){\r\n\t\t\t\toffs();\r\n\t\t\t\tme.loaded=true;\r\n\t\t\t\tme.event(\"complete\");\r\n\t\t\t}\r\n\t\t\tfunction onErr (){\r\n\t\t\t\toffs();\r\n\t\t\t\tme.event(\"error\");\r\n\t\t\t}\r\n\t\t\tfunction offs (){\r\n\t\t\t\tad.removeEventListener(\"canplaythrough\",onLoaded);\r\n\t\t\t\tad.removeEventListener(\"error\",onErr);\r\n\t\t\t}\r\n\t\t\tthis.audio=ad;\r\n\t\t\tif (ad.load){\r\n\t\t\t\tad.load();\r\n\t\t\t\t}else {\r\n\t\t\t\tonErr();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*播放声音\r\n\t\t*@param startTime 起始时间\r\n\t\t*@param loops 循环次数\r\n\t\t*@return\r\n\t\t*\r\n\t\t*/\r\n\t\t__proto.play=function(startTime,loops){\r\n\t\t\t(startTime===void 0)&& (startTime=0);\r\n\t\t\t(loops===void 0)&& (loops=0);\r\n\t\t\tif (!this.url)return null;\r\n\t\t\tvar ad;\r\n\t\t\tad=AudioSound._audioCache[this.url];\r\n\t\t\tif (!ad)return null;\r\n\t\t\tvar tAd;\r\n\t\t\ttAd=Pool.getItem(\"audio:\"+this.url);\r\n\t\t\ttAd=tAd?tAd:ad.cloneNode(true);\r\n\t\t\tvar channel=new AudioSoundChannel(tAd);\r\n\t\t\tchannel.url=this.url;\r\n\t\t\tchannel.loops=loops;\r\n\t\t\tchannel.startTime=startTime;\r\n\t\t\tchannel.play();\r\n\t\t\tSoundManager.addChannel(channel);\r\n\t\t\treturn channel;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*获取总时间。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'duration',function(){\r\n\t\t\tvar ad;\r\n\t\t\tad=AudioSound._audioCache[this.url];\r\n\t\t\tif (!ad)\r\n\t\t\t\treturn 0;\r\n\t\t\treturn ad.duration;\r\n\t\t});\r\n\r\n\t\tAudioSound._audioCache={};\r\n\t\treturn AudioSound;\r\n\t})(EventDispatcher)\r\n\r\n\r\n\t/**\r\n\t*<code>SoundChannel</code> 用来控制程序中的声音。\r\n\t*/\r\n\t//class laya.media.SoundChannel extends laya.events.EventDispatcher\r\n\tvar SoundChannel=(function(_super){\r\n\t\tfunction SoundChannel(){\r\n\t\t\tthis.url=null;\r\n\t\t\tthis.loops=0;\r\n\t\t\tthis.startTime=NaN;\r\n\t\t\tthis.isStopped=false;\r\n\t\t\tthis.completeHandler=null;\r\n\t\t\tSoundChannel.__super.call(this);\r\n\t\t}\r\n\r\n\t\t__class(SoundChannel,'laya.media.SoundChannel',_super);\r\n\t\tvar __proto=SoundChannel.prototype;\r\n\t\t/**\r\n\t\t*播放。\r\n\t\t*/\r\n\t\t__proto.play=function(){}\r\n\t\t/**\r\n\t\t*停止。\r\n\t\t*/\r\n\t\t__proto.stop=function(){}\r\n\t\t/**\r\n\t\t*private\r\n\t\t*/\r\n\t\t__proto.__runComplete=function(handler){\r\n\t\t\tif (handler){\r\n\t\t\t\thandler.run();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*获取总时间。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'duration',function(){\r\n\t\t\treturn 0;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*获取当前播放时间。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'position',function(){\r\n\t\t\treturn 0;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*音量。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'volume',function(){\r\n\t\t\treturn 1;\r\n\t\t\t},function(v){\r\n\t\t});\r\n\r\n\t\treturn SoundChannel;\r\n\t})(EventDispatcher)\r\n\r\n\r\n\t/**\r\n\t*<code>Sound</code> 类是用来播放控制声音的类。\r\n\t*/\r\n\t//class laya.media.Sound extends laya.events.EventDispatcher\r\n\tvar Sound=(function(_super){\r\n\t\tfunction Sound(){Sound.__super.call(this);;\r\n\t\t};\r\n\r\n\t\t__class(Sound,'laya.media.Sound',_super);\r\n\t\tvar __proto=Sound.prototype;\r\n\t\t/**\r\n\t\t*加载声音。\r\n\t\t*@param url 地址。\r\n\t\t*\r\n\t\t*/\r\n\t\t__proto.load=function(url){}\r\n\t\t/**\r\n\t\t*播放声音。\r\n\t\t*@param startTime 开始时间,单位秒\r\n\t\t*@param loops 循环次数,0表示一直循环\r\n\t\t*@return 声道 SoundChannel 对象。\r\n\t\t*\r\n\t\t*/\r\n\t\t__proto.play=function(startTime,loops){\r\n\t\t\t(startTime===void 0)&& (startTime=0);\r\n\t\t\t(loops===void 0)&& (loops=0);\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*释放声音资源。\r\n\t\t*\r\n\t\t*/\r\n\t\t__proto.dispose=function(){}\r\n\t\t/**\r\n\t\t*获取总时间。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'duration',function(){\r\n\t\t\treturn 0;\r\n\t\t});\r\n\r\n\t\treturn Sound;\r\n\t})(EventDispatcher)\r\n\r\n\r\n\t/**\r\n\t*@private\r\n\t*web audio api方式播放声音\r\n\t*/\r\n\t//class laya.media.webaudio.WebAudioSound extends laya.events.EventDispatcher\r\n\tvar WebAudioSound=(function(_super){\r\n\t\tfunction WebAudioSound(){\r\n\t\t\tthis.url=null;\r\n\t\t\tthis.loaded=false;\r\n\t\t\tthis.data=null;\r\n\t\t\tthis.audioBuffer=null;\r\n\t\t\tthis.__toPlays=null;\r\n\t\t\tWebAudioSound.__super.call(this);\r\n\t\t}\r\n\r\n\t\t__class(WebAudioSound,'laya.media.webaudio.WebAudioSound',_super);\r\n\t\tvar __proto=WebAudioSound.prototype;\r\n\t\t/**\r\n\t\t*加载声音\r\n\t\t*@param url\r\n\t\t*\r\n\t\t*/\r\n\t\t__proto.load=function(url){\r\n\t\t\tvar me=this;\r\n\t\t\tthis.url=url;\r\n\t\t\tthis.audioBuffer=WebAudioSound._dataCache[url];\r\n\t\t\tif (this.audioBuffer){\r\n\t\t\t\tthis._loaded(this.audioBuffer);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tWebAudioSound.e.on(\"loaded:\"+url,this,this._loaded);\r\n\t\t\tWebAudioSound.e.on(\"err:\"+url,this,this._err);\r\n\t\t\tif (WebAudioSound.__loadingSound[url]){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tWebAudioSound.__loadingSound[url]=true;\r\n\t\t\tvar request=new Browser.window.XMLHttpRequest();\r\n\t\t\trequest.open(\"GET\",url,true);\r\n\t\t\trequest.responseType=\"arraybuffer\";\r\n\t\t\trequest.onload=function (){\r\n\t\t\t\tme.data=request.response;\r\n\t\t\t\tWebAudioSound.buffs.push({\"buffer\":me.data,\"url\":me.url});\r\n\t\t\t\tWebAudioSound.decode();\r\n\t\t\t};\r\n\t\t\trequest.onerror=function (e){\r\n\t\t\t\tme._err();\r\n\t\t\t}\r\n\t\t\trequest.send();\r\n\t\t}\r\n\r\n\t\t__proto._err=function(){\r\n\t\t\tthis._removeLoadEvents();\r\n\t\t\tWebAudioSound.__loadingSound[this.url]=false;\r\n\t\t\tthis.event(\"error\");\r\n\t\t}\r\n\r\n\t\t__proto._loaded=function(audioBuffer){\r\n\t\t\tthis._removeLoadEvents();\r\n\t\t\tthis.audioBuffer=audioBuffer;\r\n\t\t\tWebAudioSound._dataCache[this.url]=this.audioBuffer;\r\n\t\t\tthis.loaded=true;\r\n\t\t\tthis.event(\"complete\");\r\n\t\t}\r\n\r\n\t\t__proto._removeLoadEvents=function(){\r\n\t\t\tWebAudioSound.e.off(\"loaded:\"+this.url,this,this._loaded);\r\n\t\t\tWebAudioSound.e.off(\"err:\"+this.url,this,this._err);\r\n\t\t}\r\n\r\n\t\t__proto.__playAfterLoaded=function(){\r\n\t\t\tif (!this.__toPlays)return;\r\n\t\t\tvar i=0,len=0;\r\n\t\t\tvar toPlays;\r\n\t\t\ttoPlays=this.__toPlays;\r\n\t\t\tlen=toPlays.length;\r\n\t\t\tvar tParams;\r\n\t\t\tfor (i=0;i < len;i++){\r\n\t\t\t\ttParams=toPlays[i];\r\n\t\t\t\tif(tParams[2]&&!(tParams [2]).isStopped){\r\n\t\t\t\t\tthis.play(tParams[0],tParams[1],tParams[2]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.__toPlays.length=0;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*播放声音\r\n\t\t*@param startTime 起始时间\r\n\t\t*@param loops 循环次数\r\n\t\t*@return\r\n\t\t*\r\n\t\t*/\r\n\t\t__proto.play=function(startTime,loops,channel){\r\n\t\t\t(startTime===void 0)&& (startTime=0);\r\n\t\t\t(loops===void 0)&& (loops=0);\r\n\t\t\tchannel=channel ? channel :new WebAudioSoundChannel();\r\n\t\t\tif (!this.audioBuffer){\r\n\t\t\t\tif (this.url){\r\n\t\t\t\t\tif (!this.__toPlays)this.__toPlays=[];\r\n\t\t\t\t\tthis.__toPlays.push([startTime,loops,channel]);\r\n\t\t\t\t\tthis.once(\"complete\",this,this.__playAfterLoaded);\r\n\t\t\t\t\tthis.load(this.url);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tchannel.url=this.url;\r\n\t\t\tchannel.loops=loops;\r\n\t\t\tchannel[\"audioBuffer\"]=this.audioBuffer;\r\n\t\t\tchannel.startTime=startTime;\r\n\t\t\tchannel.play();\r\n\t\t\tSoundManager.addChannel(channel);\r\n\t\t\treturn channel;\r\n\t\t}\r\n\r\n\t\t__proto.dispose=function(){\r\n\t\t\tdelete WebAudioSound._dataCache[this.url];\r\n\t\t\tdelete WebAudioSound.__loadingSound[this.url];\r\n\t\t}\r\n\r\n\t\t__getset(0,__proto,'duration',function(){\r\n\t\t\tif (this.audioBuffer){\r\n\t\t\t\treturn this.audioBuffer.duration;\r\n\t\t\t}\r\n\t\t\treturn 0;\r\n\t\t});\r\n\r\n\t\tWebAudioSound.decode=function(){\r\n\t\t\tif (WebAudioSound.buffs.length <=0 || WebAudioSound.isDecoding){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tWebAudioSound.isDecoding=true;\r\n\t\t\tWebAudioSound.tInfo=WebAudioSound.buffs.shift();\r\n\t\t\tWebAudioSound.ctx.decodeAudioData(WebAudioSound.tInfo[\"buffer\"],WebAudioSound._done,WebAudioSound._fail);\r\n\t\t}\r\n\r\n\t\tWebAudioSound._done=function(audioBuffer){\r\n\t\t\tWebAudioSound.e.event(\"loaded:\"+WebAudioSound.tInfo.url,audioBuffer);\r\n\t\t\tWebAudioSound.isDecoding=false;\r\n\t\t\tWebAudioSound.decode();\r\n\t\t}\r\n\r\n\t\tWebAudioSound._fail=function(){\r\n\t\t\tWebAudioSound.e.event(\"err:\"+WebAudioSound.tInfo.url,null);\r\n\t\t\tWebAudioSound.isDecoding=false;\r\n\t\t\tWebAudioSound.decode();\r\n\t\t}\r\n\r\n\t\tWebAudioSound._playEmptySound=function(){\r\n\t\t\tif (WebAudioSound.ctx==null){return;};\r\n\t\t\tvar source=WebAudioSound.ctx.createBufferSource();\r\n\t\t\tsource.buffer=WebAudioSound._miniBuffer;\r\n\t\t\tsource.connect(WebAudioSound.ctx.destination);\r\n\t\t\tsource.start(0,0,0);\r\n\t\t}\r\n\r\n\t\tWebAudioSound._unlock=function(){\r\n\t\t\tif (WebAudioSound._unlocked){return;}\r\n\t\t\t\tWebAudioSound._playEmptySound();\r\n\t\t\tif (WebAudioSound.ctx.state==\"running\"){\r\n\t\t\t\tBrowser.document.removeEventListener(\"mousedown\",WebAudioSound._unlock,true);\r\n\t\t\t\tBrowser.document.removeEventListener(\"touchend\",WebAudioSound._unlock,true);\r\n\t\t\t\tWebAudioSound._unlocked=true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tWebAudioSound.initWebAudio=function(){\r\n\t\t\tif (WebAudioSound.ctx.state !=\"running\"){\r\n\t\t\t\tWebAudioSound._unlock();\r\n\t\t\t\tBrowser.document.addEventListener(\"mousedown\",WebAudioSound._unlock,true);\r\n\t\t\t\tBrowser.document.addEventListener(\"touchend\",WebAudioSound._unlock,true);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tWebAudioSound._dataCache={};\r\n\t\tWebAudioSound.buffs=[];\r\n\t\tWebAudioSound.isDecoding=false;\r\n\t\tWebAudioSound._unlocked=false;\r\n\t\tWebAudioSound.tInfo=null\r\n\t\tWebAudioSound.__loadingSound={};\r\n\t\t__static(WebAudioSound,\r\n\t\t['window',function(){return this.window=Browser.window;},'webAudioEnabled',function(){return this.webAudioEnabled=WebAudioSound.window[\"AudioContext\"] || WebAudioSound.window[\"webkitAudioContext\"] || WebAudioSound.window[\"mozAudioContext\"];},'ctx',function(){return this.ctx=WebAudioSound.webAudioEnabled ? new (WebAudioSound.window[\"AudioContext\"] || WebAudioSound.window[\"webkitAudioContext\"] || WebAudioSound.window[\"mozAudioContext\"])():undefined;},'_miniBuffer',function(){return this._miniBuffer=WebAudioSound.ctx.createBuffer(1,1,22050);},'e',function(){return this.e=new EventDispatcher();}\r\n\t\t]);\r\n\t\treturn WebAudioSound;\r\n\t})(EventDispatcher)\r\n\r\n\r\n\t/**\r\n\t*<code>HttpRequest</code> 通过 HTTP 协议传送或接收 XML 及其他数据。\r\n\t*/\r\n\t//class laya.net.HttpRequest extends laya.events.EventDispatcher\r\n\tvar HttpRequest=(function(_super){\r\n\t\tfunction HttpRequest(){\r\n\t\t\tthis._responseType=null;\r\n\t\t\tthis._data=null;\r\n\t\t\tHttpRequest.__super.call(this);\r\n\t\t\tthis._http=new Browser.window.XMLHttpRequest();\r\n\t\t}\r\n\r\n\t\t__class(HttpRequest,'laya.net.HttpRequest',_super);\r\n\t\tvar __proto=HttpRequest.prototype;\r\n\t\t/**\r\n\t\t*发送请求。\r\n\t\t*@param url 请求的地址。\r\n\t\t*@param data 发送的数据，可选。\r\n\t\t*@param method 发送数据方式，值为“get”或“post”，默认为 “get”方式。\r\n\t\t*@param responseType 返回消息类型，可设置为\"text\"，\"json\"，\"xml\",\"arraybuffer\"。\r\n\t\t*@param headers 头信息，key value数组，比如[\"Content-Type\",\"application/json\"]。\r\n\t\t*/\r\n\t\t__proto.send=function(url,data,method,responseType,headers){\r\n\t\t\t(method===void 0)&& (method=\"get\");\r\n\t\t\t(responseType===void 0)&& (responseType=\"text\");\r\n\t\t\tthis._responseType=responseType;\r\n\t\t\tthis._data=null;\r\n\t\t\tvar _this=this;\r\n\t\t\tvar http=this._http;\r\n\t\t\thttp.open(method,url,true);\r\n\t\t\tif (headers){\r\n\t\t\t\tfor (var i=0;i < headers.length;i++){\r\n\t\t\t\t\thttp.setRequestHeader(headers[i++],headers[i]);\r\n\t\t\t\t}\r\n\t\t\t\t}else {\r\n\t\t\t\tif (!data || (typeof data=='string'))http.setRequestHeader(\"Content-Type\",\"application/x-www-form-urlencoded\");\r\n\t\t\t\telse http.setRequestHeader(\"Content-Type\",\"application/json\");\r\n\t\t\t}\r\n\t\t\thttp.responseType=responseType!==\"arraybuffer\" ? \"text\" :\"arraybuffer\";\r\n\t\t\thttp.onerror=function (e){\r\n\t\t\t\t_this._onError(e);\r\n\t\t\t}\r\n\t\t\thttp.onabort=function (e){\r\n\t\t\t\t_this._onAbort(e);\r\n\t\t\t}\r\n\t\t\thttp.onprogress=function (e){\r\n\t\t\t\t_this._onProgress(e);\r\n\t\t\t}\r\n\t\t\thttp.onload=function (e){\r\n\t\t\t\t_this._onLoad(e);\r\n\t\t\t}\r\n\t\t\thttp.send(data);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*请求进度的侦听处理函数。\r\n\t\t*@param e 事件对象。\r\n\t\t*/\r\n\t\t__proto._onProgress=function(e){\r\n\t\t\tif (e && e.lengthComputable)this.event(\"progress\",e.loaded / e.total);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*请求中断的侦听处理函数。\r\n\t\t*@param e 事件对象。\r\n\t\t*/\r\n\t\t__proto._onAbort=function(e){\r\n\t\t\tthis.error(\"Request was aborted by user\");\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*请求出错侦的听处理函数。\r\n\t\t*@param e 事件对象。\r\n\t\t*/\r\n\t\t__proto._onError=function(e){\r\n\t\t\tthis.error(\"Request failed Status:\"+this._http.status+\" text:\"+this._http.statusText);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*请求消息返回的侦听处理函数。\r\n\t\t*@param e 事件对象。\r\n\t\t*/\r\n\t\t__proto._onLoad=function(e){\r\n\t\t\tvar http=this._http;\r\n\t\t\tvar status=http.status!==undefined ? http.status :200;\r\n\t\t\tif (status===200 || status===204 || status===0){\r\n\t\t\t\tthis.complete();\r\n\t\t\t\t}else {\r\n\t\t\t\tthis.error(\"[\"+http.status+\"]\"+http.statusText+\":\"+http.responseURL);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*请求错误的处理函数。\r\n\t\t*@param message 错误信息。\r\n\t\t*/\r\n\t\t__proto.error=function(message){\r\n\t\t\tthis.clear();\r\n\t\t\tthis.event(\"error\",message);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*请求成功完成的处理函数。\r\n\t\t*/\r\n\t\t__proto.complete=function(){\r\n\t\t\tthis.clear();\r\n\t\t\tvar flag=true;\r\n\t\t\ttry {\r\n\t\t\t\tif (this._responseType===\"json\"){\r\n\t\t\t\t\tthis._data=JSON.parse(this._http.responseText);\r\n\t\t\t\t\t}else if (this._responseType===\"xml\"){\r\n\t\t\t\t\tthis._data=Utils1.parseXMLFromString(this._http.responseText);\r\n\t\t\t\t\t}else {\r\n\t\t\t\t\tthis._data=this._http.response || this._http.responseText;\r\n\t\t\t\t}\r\n\t\t\t\t}catch (e){\r\n\t\t\t\tflag=false;\r\n\t\t\t\tthis.error(e.message);\r\n\t\t\t}\r\n\t\t\tflag && this.event(\"complete\",(this._data instanceof Array)? [this._data] :this._data);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*清除当前请求。\r\n\t\t*/\r\n\t\t__proto.clear=function(){\r\n\t\t\tvar http=this._http;\r\n\t\t\thttp.onerror=http.onabort=http.onprogress=http.onload=null;\r\n\t\t}\r\n\r\n\t\t/**返回的数据。*/\r\n\t\t__getset(0,__proto,'data',function(){\r\n\t\t\treturn this._data;\r\n\t\t});\r\n\r\n\t\t/**原生XMLHttpRequest引用*/\r\n\t\t__getset(0,__proto,'http',function(){\r\n\t\t\treturn this._http;\r\n\t\t});\r\n\r\n\t\t/**请求的地址。*/\r\n\t\t__getset(0,__proto,'url',function(){\r\n\t\t\treturn this._http.responseURL;\r\n\t\t});\r\n\r\n\t\treturn HttpRequest;\r\n\t})(EventDispatcher)\r\n\r\n\r\n\t/**\r\n\t*<code>Loader</code> 类可用来加载文本、JSON、XML、二进制、图像等资源。\r\n\t*/\r\n\t//class laya.net.Loader extends laya.events.EventDispatcher\r\n\tvar Loader=(function(_super){\r\n\t\tfunction Loader(){\r\n\t\t\tthis._data=null;\r\n\t\t\tthis._url=null;\r\n\t\t\tthis._type=null;\r\n\t\t\tthis._cache=false;\r\n\t\t\tthis._http=null;\r\n\t\t\tLoader.__super.call(this);\r\n\t\t}\r\n\r\n\t\t__class(Loader,'laya.net.Loader',_super);\r\n\t\tvar __proto=Loader.prototype;\r\n\t\t/**\r\n\t\t*加载资源。\r\n\t\t*@param url 地址\r\n\t\t*@param type 类型，如果为null，则根据文件后缀，自动分析类型。\r\n\t\t*@param cache 是否缓存数据。\r\n\t\t*@param group 分组。\r\n\t\t*@param ignoreCache 是否忽略缓存，强制重新加载\r\n\t\t*/\r\n\t\t__proto.load=function(url,type,cache,group,ignoreCache){\r\n\t\t\t(cache===void 0)&& (cache=true);\r\n\t\t\t(ignoreCache===void 0)&& (ignoreCache=false);\r\n\t\t\tif (url.indexOf(\"data:image\")===0)this._type=\"image\";\r\n\t\t\turl=URL.formatURL(url);\r\n\t\t\tthis._url=url;\r\n\t\t\tthis._type=type || (type=this.getTypeFromUrl(url));\r\n\t\t\tthis._cache=cache;\r\n\t\t\tthis._data=null;\r\n\t\t\tif (!ignoreCache && Loader.loadedMap[url]){\r\n\t\t\t\tthis._data=Loader.loadedMap[url];\r\n\t\t\t\tthis.event(\"progress\",1);\r\n\t\t\t\tthis.event(\"complete\",this._data);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (group)Loader.setGroup(url,group);\r\n\t\t\tif (Loader.parserMap[type] !=null){\r\n\t\t\t\tif (((Loader.parserMap[type])instanceof laya.utils.Handler ))Loader.parserMap[type].runWith(this);\r\n\t\t\t\telse Loader.parserMap[type].call(null,this);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (type===\"image\" || type===\"htmlimage\" || type===\"nativeimage\")return this._loadImage(url);\r\n\t\t\tif (type===\"sound\")return this._loadSound(url);\r\n\t\t\tif (!this._http){\r\n\t\t\t\tthis._http=new HttpRequest();\r\n\t\t\t\tthis._http.on(\"progress\",this,this.onProgress);\r\n\t\t\t\tthis._http.on(\"error\",this,this.onError);\r\n\t\t\t\tthis._http.on(\"complete\",this,this.onLoaded);\r\n\t\t\t};\r\n\t\t\tvar contentType;\r\n\t\t\tswitch (type){\r\n\t\t\t\tcase \"atlas\":\r\n\t\t\t\t\tcontentType=\"json\";\r\n\t\t\t\t\tbreak ;\r\n\t\t\t\tcase \"font\":\r\n\t\t\t\t\tcontentType=\"xml\";\r\n\t\t\t\t\tbreak ;\r\n\t\t\t\tdefault :\r\n\t\t\t\t\tcontentType=type;\r\n\t\t\t\t}\r\n\t\t\tthis._http.send(url,null,\"get\",contentType);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*获取指定资源地址的数据类型。\r\n\t\t*@param url 资源地址。\r\n\t\t*@return 数据类型。\r\n\t\t*/\r\n\t\t__proto.getTypeFromUrl=function(url){\r\n\t\t\tvar type=Utils1.getFileExtension(url);\r\n\t\t\tif (type)return Loader.typeMap[type];\r\n\t\t\tconsole.log(\"Not recognize the resources suffix\",url);\r\n\t\t\treturn \"text\";\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*加载图片资源。\r\n\t\t*@param url 资源地址。\r\n\t\t*/\r\n\t\t__proto._loadImage=function(url){\r\n\t\t\tvar _this=this;\r\n\t\t\tvar image;\r\n\t\t\tfunction clear (){\r\n\t\t\t\timage.onload=null;\r\n\t\t\t\timage.onerror=null;\r\n\t\t\t};\r\n\t\t\tvar onload=function (){\r\n\t\t\t\tclear();\r\n\t\t\t\t_this.onLoaded(image);\r\n\t\t\t};\r\n\t\t\tvar onerror=function (){\r\n\t\t\t\tclear();\r\n\t\t\t\t_this.event(\"error\",\"Load image filed\");\r\n\t\t\t}\r\n\t\t\tif (this._type===\"nativeimage\"){\r\n\t\t\t\timage=new Browser.window.Image();\r\n\t\t\t\timage.crossOrigin=\"\";\r\n\t\t\t\timage.onload=onload;\r\n\t\t\t\timage.onerror=onerror;\r\n\t\t\t\timage.src=url;\r\n\t\t\t\t}else {\r\n\t\t\t\tnew HTMLImage.create(url,{onload:onload,onerror:onerror,onCreate:function (img){\r\n\t\t\t\t\t\timage=img;\r\n\t\t\t\t}});\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*加载声音资源。\r\n\t\t*@param url 资源地址。\r\n\t\t*/\r\n\t\t__proto._loadSound=function(url){\r\n\t\t\tvar sound=(new SoundManager._soundClass());\r\n\t\t\tvar _this=this;\r\n\t\t\tsound.on(\"complete\",this,soundOnload);\r\n\t\t\tsound.on(\"error\",this,soundOnErr);\r\n\t\t\tsound.load(url);\r\n\t\t\tfunction soundOnload (){\r\n\t\t\t\tclear();\r\n\t\t\t\t_this.onLoaded(sound);\r\n\t\t\t}\r\n\t\t\tfunction soundOnErr (){\r\n\t\t\t\tclear();\r\n\t\t\t\t_this.event(\"error\",\"Load sound filed\");\r\n\t\t\t}\r\n\t\t\tfunction clear (){\r\n\t\t\t\tsound.offAll();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**@private */\r\n\t\t__proto.onProgress=function(value){\r\n\t\t\tif (this._type===\"atlas\")this.event(\"progress\",value *0.3);\r\n\t\t\telse this.event(\"progress\",value);\r\n\t\t}\r\n\r\n\t\t/**@private */\r\n\t\t__proto.onError=function(message){\r\n\t\t\tthis.event(\"error\",message);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*资源加载完成的处理函数。\r\n\t\t*@param data 数据。\r\n\t\t*/\r\n\t\t__proto.onLoaded=function(data){\r\n\t\t\tvar type=this._type;\r\n\t\t\tif (type===\"image\"){\r\n\t\t\t\tvar tex=new Texture(data);\r\n\t\t\t\ttex.url=this._url;\r\n\t\t\t\tthis.complete(tex);\r\n\t\t\t\t}else if (type===\"sound\" || type===\"htmlimage\" || type===\"nativeimage\"){\r\n\t\t\t\tthis.complete(data);\r\n\t\t\t\t}else if (type===\"atlas\"){\r\n\t\t\t\tif (!data.src){\r\n\t\t\t\t\tif (!this._data){\r\n\t\t\t\t\t\tthis._data=data;\r\n\t\t\t\t\t\tif (data.meta && data.meta.image){\r\n\t\t\t\t\t\t\tvar toloadPics=data.meta.image.split(\",\");\r\n\t\t\t\t\t\t\tvar split=this._url.indexOf(\"/\")>=0 ? \"/\" :\"\\\\\";\r\n\t\t\t\t\t\t\tvar idx=this._url.lastIndexOf(split);\r\n\t\t\t\t\t\t\tvar folderPath=idx >=0 ? this._url.substr(0,idx+1):\"\";\r\n\t\t\t\t\t\t\tidx=this._url.indexOf(\"?\");\r\n\t\t\t\t\t\t\tvar ver;\r\n\t\t\t\t\t\t\tver=idx >=0 ? this._url.substr(idx):\"\";\r\n\t\t\t\t\t\t\tfor (var i=0,len=toloadPics.length;i < len;i++){\r\n\t\t\t\t\t\t\t\ttoloadPics[i]=folderPath+toloadPics[i]+ver;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}else {\r\n\t\t\t\t\t\t\ttoloadPics=[this._url.replace(\".json\",\".png\")];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\ttoloadPics.reverse();\r\n\t\t\t\t\t\tdata.toLoads=toloadPics;\r\n\t\t\t\t\t\tdata.pics=[];\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.event(\"progress\",0.3+1 / toloadPics.length *0.6);\r\n\t\t\t\t\treturn this._loadImage(URL.formatURL(toloadPics.pop()));\r\n\t\t\t\t\t}else {\r\n\t\t\t\t\tthis._data.pics.push(data);\r\n\t\t\t\t\tif (this._data.toLoads.length > 0){\r\n\t\t\t\t\t\tthis.event(\"progress\",0.3+1 / this._data.toLoads.length *0.6);\r\n\t\t\t\t\t\treturn this._loadImage(URL.formatURL(this._data.toLoads.pop()));\r\n\t\t\t\t\t};\r\n\t\t\t\t\tvar frames=this._data.frames;\r\n\t\t\t\t\tvar cleanUrl=this._url.split(\"?\")[0];\r\n\t\t\t\t\tvar directory=(this._data.meta && this._data.meta.prefix)? URL.basePath+this._data.meta.prefix :cleanUrl.substring(0,cleanUrl.lastIndexOf(\".\"))+\"/\";\r\n\t\t\t\t\tvar pics=this._data.pics;\r\n\t\t\t\t\tvar map=Loader.atlasMap[this._url] || (Loader.atlasMap[this._url]=[]);\r\n\t\t\t\t\tmap.dir=directory;\r\n\t\t\t\t\tfor (var name in frames){\r\n\t\t\t\t\t\tvar obj=frames[name];\r\n\t\t\t\t\t\tvar tPic=pics[obj.frame.idx ? obj.frame.idx :0];\r\n\t\t\t\t\t\tvar url=directory+name;\r\n\t\t\t\t\t\tLoader.cacheRes(url,Texture.create(tPic,obj.frame.x,obj.frame.y,obj.frame.w,obj.frame.h,obj.spriteSourceSize.x,obj.spriteSourceSize.y,obj.sourceSize.w,obj.sourceSize.h));\r\n\t\t\t\t\t\tLoader.loadedMap[url].url=url;\r\n\t\t\t\t\t\tmap.push(url);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.complete(this._data);\r\n\t\t\t\t}\r\n\t\t\t\t}else if (type==\"font\"){\r\n\t\t\t\tif (!data.src){\r\n\t\t\t\t\tthis._data=data;\r\n\t\t\t\t\tthis.event(\"progress\",0.5);\r\n\t\t\t\t\treturn this._loadImage(URL.formatURL(this._url.replace(\".fnt\",\".png\")));\r\n\t\t\t\t\t}else {\r\n\t\t\t\t\tvar bFont;\r\n\t\t\t\t\tbFont=new BitmapFont();\r\n\t\t\t\t\tbFont.parseFont(this._data,data);\r\n\t\t\t\t\tvar tArr=this._url.split(\".fnt\")[0].split(\"/\");\r\n\t\t\t\t\tvar fontName=tArr[tArr.length-1];\r\n\t\t\t\t\tText.registerBitmapFont(fontName,bFont);\r\n\t\t\t\t\tthis._data=bFont;\r\n\t\t\t\t\tthis.complete(this._data);\r\n\t\t\t\t}\r\n\t\t\t\t}else {\r\n\t\t\t\tthis.complete(data);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*加载完成。\r\n\t\t*@param data 加载的数据。\r\n\t\t*/\r\n\t\t__proto.complete=function(data){\r\n\t\t\tthis._data=data;\r\n\t\t\tLoader._loaders.push(this);\r\n\t\t\tif (!Loader._isWorking)Loader.checkNext();\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*结束加载，处理是否缓存及派发完成事件 <code>Event.COMPLETE</code> 。\r\n\t\t*@param content 加载后的数据\r\n\t\t*/\r\n\t\t__proto.endLoad=function(content){\r\n\t\t\tcontent && (this._data=content);\r\n\t\t\tif (this._cache)Loader.cacheRes(this._url,this._data);\r\n\t\t\tthis.event(\"progress\",1);\r\n\t\t\tthis.event(\"complete\",(this.data instanceof Array)? [this.data] :this.data);\r\n\t\t}\r\n\r\n\t\t/**返回的数据。*/\r\n\t\t__getset(0,__proto,'data',function(){\r\n\t\t\treturn this._data;\r\n\t\t});\r\n\r\n\t\t/**是否缓存。*/\r\n\t\t__getset(0,__proto,'cache',function(){\r\n\t\t\treturn this._cache;\r\n\t\t});\r\n\r\n\t\t/**加载类型。*/\r\n\t\t__getset(0,__proto,'type',function(){\r\n\t\t\treturn this._type;\r\n\t\t});\r\n\r\n\t\t/**加载地址。*/\r\n\t\t__getset(0,__proto,'url',function(){\r\n\t\t\treturn this._url;\r\n\t\t});\r\n\r\n\t\tLoader.checkNext=function(){\r\n\t\t\tLoader._isWorking=true;\r\n\t\t\tvar startTimer=Browser.now();\r\n\t\t\tvar thisTimer=startTimer;\r\n\t\t\twhile (Loader._startIndex < Loader._loaders.length){\r\n\t\t\t\tthisTimer=Browser.now();\r\n\t\t\t\tLoader._loaders[Loader._startIndex].endLoad();\r\n\t\t\t\tLoader._startIndex++;\r\n\t\t\t\tif (Browser.now()-startTimer > Loader.maxTimeOut){\r\n\t\t\t\t\tconsole.log(\"loader callback cost a long time:\"+(Browser.now()-startTimer)+\" url=\"+Loader._loaders[Loader._startIndex-1].url);\r\n\t\t\t\t\tLaya.timer.frameOnce(1,null,Loader.checkNext);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tLoader._loaders.length=0;\r\n\t\t\tLoader._startIndex=0;\r\n\t\t\tLoader._isWorking=false;\r\n\t\t}\r\n\r\n\t\tLoader.clearRes=function(url,forceDispose){\r\n\t\t\t(forceDispose===void 0)&& (forceDispose=false);\r\n\t\t\turl=URL.formatURL(url);\r\n\t\t\tvar arr=Loader.atlasMap[url];\r\n\t\t\tif (arr){\r\n\t\t\t\tfor (var i=0,n=arr.length;i < n;i++){\r\n\t\t\t\t\tvar resUrl=arr[i];\r\n\t\t\t\t\tvar tex=Loader.getRes(resUrl);\r\n\t\t\t\t\tif (tex)tex.destroy(forceDispose);\r\n\t\t\t\t\tdelete Loader.loadedMap[resUrl];\r\n\t\t\t\t}\r\n\t\t\t\tarr.length=0;\r\n\t\t\t\tdelete Loader.atlasMap[url];\r\n\t\t\t\tdelete Loader.loadedMap[url];\r\n\t\t\t\t}else {\r\n\t\t\t\tvar res=Loader.loadedMap[url];\r\n\t\t\t\tif (res){\r\n\t\t\t\t\tif ((res instanceof laya.resource.Texture )&& res.bitmap)(res).destroy(forceDispose);\r\n\t\t\t\t\tdelete Loader.loadedMap[url];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tLoader.getRes=function(url){\r\n\t\t\treturn Loader.loadedMap[URL.formatURL(url)];\r\n\t\t}\r\n\r\n\t\tLoader.getAtlas=function(url){\r\n\t\t\treturn Loader.atlasMap[URL.formatURL(url)];\r\n\t\t}\r\n\r\n\t\tLoader.cacheRes=function(url,data){\r\n\t\t\turl=URL.formatURL(url);\r\n\t\t\tif (Loader.loadedMap[url] !=null){\r\n\t\t\t\tconsole.log(\"Resources already exist,is repeated loading:\",url);\r\n\t\t\t\t}else {\r\n\t\t\t\tLoader.loadedMap[url]=data;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tLoader.setGroup=function(url,group){\r\n\t\t\tif (!Loader.groupMap[group])Loader.groupMap[group]=[];\r\n\t\t\tLoader.groupMap[group].push(url);\r\n\t\t}\r\n\r\n\t\tLoader.clearResByGroup=function(group){\r\n\t\t\tif (!Loader.groupMap[group])return;\r\n\t\t\tvar arr=Loader.groupMap[group],i=0,len=arr.length;\r\n\t\t\tfor (i=0;i < len;i++){\r\n\t\t\t\tLoader.clearRes(arr[i]);\r\n\t\t\t}\r\n\t\t\tarr.length=0;\r\n\t\t}\r\n\r\n\t\tLoader.TEXT=\"text\";\r\n\t\tLoader.JSON=\"json\";\r\n\t\tLoader.XML=\"xml\";\r\n\t\tLoader.BUFFER=\"arraybuffer\";\r\n\t\tLoader.IMAGE=\"image\";\r\n\t\tLoader.SOUND=\"sound\";\r\n\t\tLoader.ATLAS=\"atlas\";\r\n\t\tLoader.FONT=\"font\";\r\n\t\tLoader.typeMap={\"png\":\"image\",\"jpg\":\"image\",\"jpeg\":\"image\",\"txt\":\"text\",\"json\":\"json\",\"xml\":\"xml\",\"als\":\"atlas\",\"mp3\":\"sound\",\"ogg\":\"sound\",\"wav\":\"sound\",\"part\":\"json\",\"fnt\":\"font\"};\r\n\t\tLoader.parserMap={};\r\n\t\tLoader.loadedMap={};\r\n\t\tLoader.groupMap={};\r\n\t\tLoader.maxTimeOut=100;\r\n\t\tLoader.atlasMap={};\r\n\t\tLoader._loaders=[];\r\n\t\tLoader._isWorking=false;\r\n\t\tLoader._startIndex=0;\r\n\t\treturn Loader;\r\n\t})(EventDispatcher)\r\n\r\n\r\n\t/**\r\n\t*<code>Socket</code> 是一种双向通信协议，在建立连接后，服务器和 Browser/Client Agent 都能主动的向对方发送或接收数据。\r\n\t*/\r\n\t//class laya.net.Socket extends laya.events.EventDispatcher\r\n\tvar Socket=(function(_super){\r\n\t\tfunction Socket(host,port,byteClass){\r\n\t\t\tthis._endian=null;\r\n\t\t\tthis._stamp=NaN;\r\n\t\t\tthis._socket=null;\r\n\t\t\tthis._connected=false;\r\n\t\t\tthis._addInputPosition=0;\r\n\t\t\tthis._input=null;\r\n\t\t\tthis._output=null;\r\n\t\t\tthis.timeout=0;\r\n\t\t\tthis.objectEncoding=0;\r\n\t\t\tthis.disableInput=false;\r\n\t\t\tthis._byteClass=null;\r\n\t\t\t(port===void 0)&& (port=0);\r\n\t\t\tSocket.__super.call(this);\r\n\t\t\tthis._byteClass=byteClass;\r\n\t\t\tthis._byteClass=this._byteClass ? this._byteClass :Byte;\r\n\t\t\tthis.endian=\"bigEndian\";\r\n\t\t\tthis.timeout=20000;\r\n\t\t\tthis._addInputPosition=0;\r\n\t\t\tif (host&&port > 0 && port < 65535)\r\n\t\t\t\tthis.connect(host,port);\r\n\t\t}\r\n\r\n\t\t__class(Socket,'laya.net.Socket',_super);\r\n\t\tvar __proto=Socket.prototype;\r\n\t\t/**\r\n\t\t*连接到指定的主机和端口。\r\n\t\t*@param host 服务器地址。\r\n\t\t*@param port 服务器端口。\r\n\t\t*/\r\n\t\t__proto.connect=function(host,port){\r\n\t\t\tvar url=\"ws://\"+host+\":\"+port;\r\n\t\t\tthis.connectByUrl(url);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*连接到指定的url\r\n\t\t*@param url 连接目标\r\n\t\t*/\r\n\t\t__proto.connectByUrl=function(url){\r\n\t\t\tvar _$this=this;\r\n\t\t\tif (this._socket !=null)\r\n\t\t\t\tthis.close();\r\n\t\t\tthis._socket && this._cleanSocket();\r\n\t\t\tthis._socket=new Browser.window.WebSocket(url);\r\n\t\t\tthis._socket.binaryType=\"arraybuffer\";\r\n\t\t\tthis._output=new this._byteClass();\r\n\t\t\tthis._output.endian=this.endian;\r\n\t\t\tthis._input=new this._byteClass();\r\n\t\t\tthis._input.endian=this.endian;\r\n\t\t\tthis._addInputPosition=0;\r\n\t\t\tthis._socket.onopen=function (e){\r\n\t\t\t\t_$this._onOpen(e);\r\n\t\t\t};\r\n\t\t\tthis._socket.onmessage=function (msg){\r\n\t\t\t\t_$this._onMessage(msg);\r\n\t\t\t};\r\n\t\t\tthis._socket.onclose=function (e){\r\n\t\t\t\t_$this._onClose(e);\r\n\t\t\t};\r\n\t\t\tthis._socket.onerror=function (e){\r\n\t\t\t\t_$this._onError(e);\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\t__proto._cleanSocket=function(){\r\n\t\t\ttry {\r\n\t\t\t\tthis._socket.close();\r\n\t\t\t}catch (e){}\r\n\t\t\tthis._connected=false;\r\n\t\t\tthis._socket.onopen=null;\r\n\t\t\tthis._socket.onmessage=null;\r\n\t\t\tthis._socket.onclose=null;\r\n\t\t\tthis._socket.onerror=null;\r\n\t\t\tthis._socket=null;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*关闭连接。\r\n\t\t*/\r\n\t\t__proto.close=function(){\r\n\t\t\tif (this._socket !=null){\r\n\t\t\t\tthis._cleanSocket();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*连接建立成功 。\r\n\t\t*/\r\n\t\t__proto._onOpen=function(e){\r\n\t\t\tthis._connected=true;\r\n\t\t\tthis.event(\"open\",e);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*接收到数据处理方法。\r\n\t\t*@param msg 数据。\r\n\t\t*/\r\n\t\t__proto._onMessage=function(msg){\r\n\t\t\tif (!msg || !msg.data)return;\r\n\t\t\tvar data=msg.data;\r\n\t\t\tif(this.disableInput&&data){\r\n\t\t\t\tthis.event(\"message\",data);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (this._input.length > 0 && this._input.bytesAvailable < 1){\r\n\t\t\t\tthis._input.clear();\r\n\t\t\t\tthis._addInputPosition=0;\r\n\t\t\t};\r\n\t\t\tvar pre=this._input.pos;\r\n\t\t\t!this._addInputPosition && (this._addInputPosition=0);\r\n\t\t\tthis._input.pos=this._addInputPosition;\r\n\t\t\tif (data){\r\n\t\t\t\tif ((typeof data=='string')){\r\n\t\t\t\t\tthis._input.writeUTFBytes(data);\r\n\t\t\t\t\t}else {\r\n\t\t\t\t\tthis._input.writeArrayBuffer(data);\r\n\t\t\t\t}\r\n\t\t\t\tthis._addInputPosition=this._input.pos;\r\n\t\t\t\tthis._input.pos=pre;\r\n\t\t\t}\r\n\t\t\tthis.event(\"message\",data);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*连接被关闭处理方法。\r\n\t\t*/\r\n\t\t__proto._onClose=function(e){\r\n\t\t\tthis._connected=false;\r\n\t\t\tthis.event(\"close\",e)\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*出现异常处理方法。\r\n\t\t*/\r\n\t\t__proto._onError=function(e){\r\n\t\t\tthis.event(\"error\",e)\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*发送数据到服务器。\r\n\t\t*@param data 需要发送的数据，可以是String或者ArrayBuffer。\r\n\t\t*/\r\n\t\t__proto.send=function(data){\r\n\t\t\tthis._socket.send(data);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*发送缓冲区中的数据到服务器。\r\n\t\t*/\r\n\t\t__proto.flush=function(){\r\n\t\t\tif (this._output && this._output.length > 0){\r\n\t\t\t\tvar evt;\r\n\t\t\t\ttry {\r\n\t\t\t\t\tthis._socket && this._socket.send(this._output.__getBuffer().slice(0,this._output.length));\r\n\t\t\t\t\t}catch (e){\r\n\t\t\t\t\tevt=e;\r\n\t\t\t\t}\r\n\t\t\t\tthis._output.endian=this.endian;\r\n\t\t\t\tthis._output.clear();\r\n\t\t\t\tif(evt)this.event(\"error\",evt);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*表示数据的字节顺序。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'endian',function(){\r\n\t\t\treturn this._endian;\r\n\t\t\t},function(value){\r\n\t\t\tthis._endian=value;\r\n\t\t\tif (this._input !=null)this._input.endian=value;\r\n\t\t\tif (this._output !=null)this._output.endian=value;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*表示此 Socket 对象目前是否已连接。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'connected',function(){\r\n\t\t\treturn this._connected;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*表示需要发送至服务端的缓冲区中的数据。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'output',function(){\r\n\t\t\treturn this._output;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*表示服务端发来的数据。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'input',function(){\r\n\t\t\treturn this._input;\r\n\t\t});\r\n\r\n\t\tSocket.LITTLE_ENDIAN=\"littleEndian\";\r\n\t\tSocket.BIG_ENDIAN=\"bigEndian\";\r\n\t\treturn Socket;\r\n\t})(EventDispatcher)\r\n\r\n\r\n\t/**\r\n\t*<code>Texture</code> 是一个纹理处理类。\r\n\t*/\r\n\t//class laya.resource.Texture extends laya.events.EventDispatcher\r\n\tvar Texture=(function(_super){\r\n\t\tfunction Texture(bitmap,uv){\r\n\t\t\t//this.bitmap=null;\r\n\t\t\t//this.uv=null;\r\n\t\t\tthis.offsetX=0;\r\n\t\t\tthis.offsetY=0;\r\n\t\t\tthis.sourceWidth=0;\r\n\t\t\tthis.sourceHeight=0;\r\n\t\t\t//this._loaded=false;\r\n\t\t\tthis._w=0;\r\n\t\t\tthis._h=0;\r\n\t\t\t//this.$_GID=NaN;\r\n\t\t\t//this.url=null;\r\n\t\t\tthis._uvID=0;\r\n\t\t\tTexture.__super.call(this);\r\n\t\t\tif (bitmap){\r\n\t\t\t\tbitmap.useNum++;\r\n\t\t\t}\r\n\t\t\tthis.setTo(bitmap,uv);\r\n\t\t}\r\n\r\n\t\t__class(Texture,'laya.resource.Texture',_super);\r\n\t\tvar __proto=Texture.prototype;\r\n\t\t/**\r\n\t\t*设置此对象的位图资源、UV数据信息。\r\n\t\t*@param bitmap 位图资源\r\n\t\t*@param uv UV数据信息\r\n\t\t*/\r\n\t\t__proto.setTo=function(bitmap,uv){\r\n\t\t\tthis.bitmap=bitmap;\r\n\t\t\tthis.uv=uv || Texture.DEF_UV;\r\n\t\t\tif (bitmap){\r\n\t\t\t\tthis._w=bitmap.width;\r\n\t\t\t\tthis._h=bitmap.height;\r\n\t\t\t\tthis.sourceWidth=this.sourceWidth || this._w;\r\n\t\t\t\tthis.sourceHeight=this.sourceHeight || this._h\r\n\t\t\t\tthis._loaded=this._w > 0;\r\n\t\t\t\tvar _this=this;\r\n\t\t\t\tif (this._loaded){\r\n\t\t\t\t\tRunDriver.addToAtlas && RunDriver.addToAtlas(_this);\r\n\t\t\t\t\t}else {\r\n\t\t\t\t\tvar bm=bitmap;\r\n\t\t\t\t\tif ((bm instanceof laya.resource.HTMLImage )&& bm.image)\r\n\t\t\t\t\t\tbm.image.addEventListener('load',function(e){\r\n\t\t\t\t\t\tRunDriver.addToAtlas && RunDriver.addToAtlas(_this);\r\n\t\t\t\t\t},false);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**@private 激活资源。*/\r\n\t\t__proto.active=function(){\r\n\t\t\tthis.bitmap.activeResource();\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*销毁纹理（分直接销毁，跟计数销毁两种）\r\n\t\t*@param forceDispose true为强制销毁主纹理，false是通过计数销毁纹理\r\n\t\t*/\r\n\t\t__proto.destroy=function(forceDispose){\r\n\t\t\t(forceDispose===void 0)&& (forceDispose=false);\r\n\t\t\tif (this.bitmap && (this.bitmap).useNum > 0){\r\n\t\t\t\tif (forceDispose){\r\n\t\t\t\t\tthis.bitmap.dispose();\r\n\t\t\t\t\t(this.bitmap).useNum=0;\r\n\t\t\t\t\t}else {\r\n\t\t\t\t\t(this.bitmap).useNum--;\r\n\t\t\t\t\tif ((this.bitmap).useNum==0){\r\n\t\t\t\t\t\tthis.bitmap.dispose();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.bitmap=null;\r\n\t\t\t\tif (this.url && this===Laya.loader.getRes(this.url))Laya.loader.clearRes(this.url,forceDispose);\r\n\t\t\t\tthis._loaded=false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*加载指定地址的图片。\r\n\t\t*@param url 图片地址。\r\n\t\t*/\r\n\t\t__proto.load=function(url){\r\n\t\t\tvar _$this=this;\r\n\t\t\tthis._loaded=false;\r\n\t\t\tvar fileBitmap=(this.bitmap || (this.bitmap=HTMLImage.create(URL.formatURL(url))));\r\n\t\t\tif (fileBitmap)fileBitmap.useNum++;\r\n\t\t\tvar _this=this;\r\n\t\t\tfileBitmap.onload=function (){\r\n\t\t\t\tfileBitmap.onload=null;\r\n\t\t\t\t_this._loaded=true;\r\n\t\t\t\t_$this.sourceWidth=_$this._w=fileBitmap.width;\r\n\t\t\t\t_$this.sourceHeight=_$this._h=fileBitmap.height;\r\n\t\t\t\t_this.event(\"loaded\",this);\r\n\t\t\t\t(RunDriver.addToAtlas)&& (RunDriver.addToAtlas(_this));\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\t/**@private */\r\n\t\t__proto.addTextureToAtlas=function(e){\r\n\t\t\tRunDriver.addTextureToAtlas(this);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*获取Texture上的某个区域的像素点\r\n\t\t*@param x\r\n\t\t*@param y\r\n\t\t*@param width\r\n\t\t*@param height\r\n\t\t*@return 返回像素点集合\r\n\t\t*/\r\n\t\t__proto.getPixels=function(x,y,width,height){\r\n\t\t\tif (Render.isWebGL){\r\n\t\t\t\treturn RunDriver.getTexturePixels(this,x,y,width,height);\r\n\t\t\t\t}else {\r\n\t\t\t\tBrowser.canvas.size(width,height);\r\n\t\t\t\tBrowser.canvas.clear();\r\n\t\t\t\tBrowser.context.drawTexture(this,-x,-y,this.width,this.height,0,0);\r\n\t\t\t\tvar info=Browser.context.getImageData(0,0,width,height);\r\n\t\t\t}\r\n\t\t\treturn info.data;\r\n\t\t}\r\n\r\n\t\t/**@private */\r\n\t\t__proto.onAsynLoaded=function(url,bitmap){\r\n\t\t\tif (bitmap)bitmap.useNum++;\r\n\t\t\tthis.setTo(bitmap,this.uv);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*设置线性采样的状态（目前只能第一次绘制前设置false生效,来关闭线性采样）\r\n\t\t*/\r\n\t\t/**\r\n\t\t*获取当前纹理是否启用了线性采样\r\n\t\t*/\r\n\t\t__getset(0,__proto,'isLinearSampling',function(){\r\n\t\t\treturn Render.isWebGL ? (this.bitmap.minFifter !=0x2600):true;\r\n\t\t\t},function(value){\r\n\t\t\tif (!value && Render.isWebGL){\r\n\t\t\t\tif (!value && (this.bitmap.minFifter==-1)&& (this.bitmap.magFifter==-1)){\r\n\t\t\t\t\tthis.bitmap.minFifter=0x2600;\r\n\t\t\t\t\tthis.bitmap.magFifter=0x2600;\r\n\t\t\t\t\tthis.bitmap.enableMerageInAtlas=false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t/**实际高度。*/\r\n\t\t__getset(0,__proto,'height',function(){\r\n\t\t\tif (this._h)return this._h;\r\n\t\t\treturn (this.uv && this.uv!==Texture.DEF_UV)? (this.uv[5]-this.uv[1])*this.bitmap.height :this.bitmap.height;\r\n\t\t\t},function(value){\r\n\t\t\tthis._h=value;\r\n\t\t\tthis.sourceHeight || (this.sourceHeight=value);\r\n\t\t});\r\n\r\n\t\t/**实际宽度。*/\r\n\t\t__getset(0,__proto,'width',function(){\r\n\t\t\tif (this._w)return this._w;\r\n\t\t\treturn (this.uv && this.uv!==Texture.DEF_UV)? (this.uv[2]-this.uv[0])*this.bitmap.width :this.bitmap.width;\r\n\t\t\t},function(value){\r\n\t\t\tthis._w=value;\r\n\t\t\tthis.sourceWidth || (this.sourceWidth=value);\r\n\t\t});\r\n\r\n\t\t/**激活并获取资源。*/\r\n\t\t__getset(0,__proto,'source',function(){\r\n\t\t\tthis.bitmap.activeResource();\r\n\t\t\treturn this.bitmap.source;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*表示资源是否已释放。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'released',function(){\r\n\t\t\treturn this.bitmap.released;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*通过外部设置是否启用纹理平铺(后面要改成在着色器里计算)\r\n\t\t*/\r\n\t\t/**\r\n\t\t*获取当前纹理是否启用了纹理平铺\r\n\t\t*/\r\n\t\t__getset(0,__proto,'repeat',function(){\r\n\t\t\tif (Render.isWebGL && this.bitmap){\r\n\t\t\t\treturn this.bitmap.repeat;\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t\t},function(value){\r\n\t\t\tif (value){\r\n\t\t\t\tif (Render.isWebGL && this.bitmap){\r\n\t\t\t\t\tthis.bitmap.repeat=value;\r\n\t\t\t\t\tif (value){\r\n\t\t\t\t\t\tthis.bitmap.enableMerageInAtlas=false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*表示是否加载成功，只能表示初次载入成功（通常包含下载和载入）,并不能完全表示资源是否可立即使用（资源管理机制释放影响等）。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'loaded',function(){\r\n\t\t\treturn this._loaded;\r\n\t\t});\r\n\r\n\t\tTexture.moveUV=function(offsetX,offsetY,uv){\r\n\t\t\tfor (var i=0;i < 8;i+=2){\r\n\t\t\t\tuv[i]+=offsetX;\r\n\t\t\t\tuv[i+1]+=offsetY;\r\n\t\t\t}\r\n\t\t\treturn uv;\r\n\t\t}\r\n\r\n\t\tTexture.create=function(source,x,y,width,height,offsetX,offsetY,sourceWidth,sourceHeight){\r\n\t\t\t(offsetX===void 0)&& (offsetX=0);\r\n\t\t\t(offsetY===void 0)&& (offsetY=0);\r\n\t\t\t(sourceWidth===void 0)&& (sourceWidth=0);\r\n\t\t\t(sourceHeight===void 0)&& (sourceHeight=0);\r\n\t\t\tvar btex=(source instanceof laya.resource.Texture );\r\n\t\t\tvar uv=btex ? source.uv :Texture.DEF_UV;\r\n\t\t\tvar bitmap=btex ? source.bitmap :source;\r\n\t\t\tvar tex=new Texture(bitmap,null);\r\n\t\t\ttex.width=width;\r\n\t\t\ttex.height=height;\r\n\t\t\ttex.offsetX=offsetX;\r\n\t\t\ttex.offsetY=offsetY;\r\n\t\t\ttex.sourceWidth=sourceWidth || width;\r\n\t\t\ttex.sourceHeight=sourceHeight || height;\r\n\t\t\tvar dwidth=1 / bitmap.width;\r\n\t\t\tvar dheight=1 / bitmap.height;\r\n\t\t\tx *=dwidth;\r\n\t\t\ty *=dheight;\r\n\t\t\twidth *=dwidth;\r\n\t\t\theight *=dheight;\r\n\t\t\tvar u1=tex.uv[0],v1=tex.uv[1],u2=tex.uv[4],v2=tex.uv[5];\r\n\t\t\tvar inAltasUVWidth=(u2-u1),inAltasUVHeight=(v2-v1);\r\n\t\t\tvar oriUV=Texture.moveUV(uv[0],uv[1],[x,y,x+width,y,x+width,y+height,x,y+height]);\r\n\t\t\ttex.uv=[u1+oriUV[0] *inAltasUVWidth,v1+oriUV[1] *inAltasUVHeight,u2-(1-oriUV[2])*inAltasUVWidth,v1+oriUV[3] *inAltasUVHeight,u2-(1-oriUV[4])*inAltasUVWidth,v2-(1-oriUV[5])*inAltasUVHeight,u1+oriUV[6] *inAltasUVWidth,v2-(1-oriUV[7])*inAltasUVHeight];\r\n\t\t\treturn tex;\r\n\t\t}\r\n\r\n\t\tTexture.createFromTexture=function(texture,x,y,width,height){\r\n\t\t\tvar rect=Rectangle.TEMP.setTo(x-texture.offsetX,y-texture.offsetY,width,height);\r\n\t\t\tvar result=rect.intersection(Texture._rect1.setTo(0,0,texture.width,texture.height),Texture._rect2);\r\n\t\t\tif (result)\r\n\t\t\t\tvar tex=Texture.create(texture,result.x,result.y,result.width,result.height,result.x-rect.x,result.y-rect.y,width,height);\r\n\t\t\telse return null;\r\n\t\t\ttex.bitmap.useNum--;\r\n\t\t\treturn tex;\r\n\t\t}\r\n\r\n\t\tTexture.DEF_UV=[0,0,1.0,0,1.0,1.0,0,1.0];\r\n\t\tTexture.INV_UV=[0,1,1.0,1,1.0,0.0,0,0.0];\r\n\t\tTexture._rect1=new Rectangle();\r\n\t\tTexture._rect2=new Rectangle();\r\n\t\treturn Texture;\r\n\t})(EventDispatcher)\r\n\r\n\r\n\t/**\r\n\t*<code>AutoBitmap</code> 类是用于表示位图图像或绘制图形的显示对象。\r\n\t*<p>封装了位置，宽高及九宫格的处理，供UI组件使用。</p>\r\n\t*/\r\n\t//class laya.ui.AutoBitmap extends laya.display.Graphics\r\n\tvar AutoBitmap=(function(_super){\r\n\t\tfunction AutoBitmap(){\r\n\t\t\tthis.autoCacheCmd=true;\r\n\t\t\tthis._width=0;\r\n\t\t\tthis._height=0;\r\n\t\t\tthis._source=null;\r\n\t\t\tthis._sizeGrid=null;\r\n\t\t\tthis._isChanged=false;\r\n\t\t\tthis._offset=null;\r\n\t\t\tAutoBitmap.__super.call(this);\r\n\t\t}\r\n\r\n\t\t__class(AutoBitmap,'laya.ui.AutoBitmap',_super);\r\n\t\tvar __proto=AutoBitmap.prototype;\r\n\t\t/**@inheritDoc */\r\n\t\t__proto.destroy=function(){\r\n\t\t\t_super.prototype.destroy.call(this);\r\n\t\t\tthis._source=null;\r\n\t\t\tthis._sizeGrid=null;\r\n\t\t\tthis._offset=null;\r\n\t\t}\r\n\r\n\t\t/**@private */\r\n\t\t__proto._setChanged=function(){\r\n\t\t\tif (!this._isChanged){\r\n\t\t\t\tthis._isChanged=true;\r\n\t\t\t\tLaya.timer.callLater(this,this.changeSource);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*修改纹理资源。\r\n\t\t*/\r\n\t\t__proto.changeSource=function(){\r\n\t\t\tif (AutoBitmap.cacheCount++> 50)AutoBitmap.clearCache();\r\n\t\t\tthis._isChanged=false;\r\n\t\t\tvar source=this._source;\r\n\t\t\tif (!source || !source.bitmap)return;\r\n\t\t\tvar width=this.width;\r\n\t\t\tvar height=this.height;\r\n\t\t\tvar sizeGrid=this._sizeGrid;\r\n\t\t\tvar sw=source.sourceWidth;\r\n\t\t\tvar sh=source.sourceHeight;\r\n\t\t\tif (!sizeGrid || (sw===width && sh===height)){\r\n\t\t\t\tthis.cleanByTexture(source,this._offset ? this._offset[0] :0,this._offset ? this._offset[1] :0,width,height);\r\n\t\t\t\t}else {\r\n\t\t\t\tsource.$_GID || (source.$_GID=Utils1.getGID());\r\n\t\t\t\tvar key=source.$_GID+\".\"+width+\".\"+height+\".\"+sizeGrid.join(\".\");\r\n\t\t\t\tif (AutoBitmap.cmdCaches[key]){\r\n\t\t\t\t\tthis.cmds=AutoBitmap.cmdCaches[key];\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis.clear();\r\n\t\t\t\tvar top=sizeGrid[0];\r\n\t\t\t\tvar right=sizeGrid[1];\r\n\t\t\t\tvar bottom=sizeGrid[2];\r\n\t\t\t\tvar left=sizeGrid[3];\r\n\t\t\t\tvar repeat=sizeGrid[4];\r\n\t\t\t\tif (left+right > width){\r\n\t\t\t\t\tright=0;\r\n\t\t\t\t}\r\n\t\t\t\tleft && top && this.drawTexture(AutoBitmap.getTexture(source,0,0,left,top),0,0,left,top);\r\n\t\t\t\tright && top && this.drawTexture(AutoBitmap.getTexture(source,sw-right,0,right,top),width-right,0,right,top);\r\n\t\t\t\tleft && bottom && this.drawTexture(AutoBitmap.getTexture(source,0,sh-bottom,left,bottom),0,height-bottom,left,bottom);\r\n\t\t\t\tright && bottom && this.drawTexture(AutoBitmap.getTexture(source,sw-right,sh-bottom,right,bottom),width-right,height-bottom,right,bottom);\r\n\t\t\t\ttop && this.drawBitmap(repeat,AutoBitmap.getTexture(source,left,0,sw-left-right,top),left,0,width-left-right,top);\r\n\t\t\t\tbottom && this.drawBitmap(repeat,AutoBitmap.getTexture(source,left,sh-bottom,sw-left-right,bottom),left,height-bottom,width-left-right,bottom);\r\n\t\t\t\tleft && this.drawBitmap(repeat,AutoBitmap.getTexture(source,0,top,left,sh-top-bottom),0,top,left,height-top-bottom);\r\n\t\t\t\tright && this.drawBitmap(repeat,AutoBitmap.getTexture(source,sw-right,top,right,sh-top-bottom),width-right,top,right,height-top-bottom);\r\n\t\t\t\tthis.drawBitmap(repeat,AutoBitmap.getTexture(source,left,top,sw-left-right,sh-top-bottom),left,top,width-left-right,height-top-bottom);\r\n\t\t\t\tif (this.autoCacheCmd && !Render.isConchApp)AutoBitmap.cmdCaches[key]=this.cmds;\r\n\t\t\t}\r\n\t\t\tthis._repaint();\r\n\t\t}\r\n\r\n\t\t__proto.drawBitmap=function(repeat,tex,x,y,width,height){\r\n\t\t\t(width===void 0)&& (width=0);\r\n\t\t\t(height===void 0)&& (height=0);\r\n\t\t\tif (repeat)this.fillTexture(tex,x,y,width,height);\r\n\t\t\telse this.drawTexture(tex,x,y,width,height);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*对象的纹理资源。\r\n\t\t*@see laya.resource.Texture\r\n\t\t*/\r\n\t\t__getset(0,__proto,'source',function(){\r\n\t\t\treturn this._source;\r\n\t\t\t},function(value){\r\n\t\t\tif (value){\r\n\t\t\t\tthis._source=value\r\n\t\t\t\tthis._setChanged();\r\n\t\t\t\t}else {\r\n\t\t\t\tthis._source=null;\r\n\t\t\t\tthis.clear();\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*表示显示对象的高度，以像素为单位。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'height',function(){\r\n\t\t\tif (this._height)return this._height;\r\n\t\t\tif (this._source)return this._source.sourceHeight;\r\n\t\t\treturn 0;\r\n\t\t\t},function(value){\r\n\t\t\tif (this._height !=value){\r\n\t\t\t\tthis._height=value;\r\n\t\t\t\tthis._setChanged();\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*表示显示对象的宽度，以像素为单位。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'width',function(){\r\n\t\t\tif (this._width)return this._width;\r\n\t\t\tif (this._source)return this._source.sourceWidth;\r\n\t\t\treturn 0;\r\n\t\t\t},function(value){\r\n\t\t\tif (this._width !=value){\r\n\t\t\t\tthis._width=value;\r\n\t\t\t\tthis._setChanged();\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*当前实例的有效缩放网格数据。\r\n\t\t*<p>如果设置为null,则在应用任何缩放转换时，将正常缩放整个显示对象。</p>\r\n\t\t*<p>数据格式：[上边距,右边距,下边距,左边距,是否重复填充(值为0：不重复填充，1：重复填充)]。\r\n\t\t*<ul><li>例如：[4,4,4,4,1]</li></ul></p>\r\n\t\t*<p> <code>sizeGrid</code> 的值如下所示：\r\n\t\t*<ol>\r\n\t\t*<li>上边距</li>\r\n\t\t*<li>右边距</li>\r\n\t\t*<li>下边距</li>\r\n\t\t*<li>左边距</li>\r\n\t\t*<li>是否重复填充(值为0：不重复填充，1：重复填充)</li>\r\n\t\t*</ol></p>\r\n\t\t*<p>当定义 <code>sizeGrid</code> 属性时，该显示对象被分割到以 <code>sizeGrid</code> 数据中的\"上边距,右边距,下边距,左边距\" 组成的矩形为基础的具有九个区域的网格中，该矩形定义网格的中心区域。网格的其它八个区域如下所示：\r\n\t\t*<ul>\r\n\t\t*<li>矩形上方的区域</li>\r\n\t\t*<li>矩形外的右上角</li>\r\n\t\t*<li>矩形左侧的区域</li>\r\n\t\t*<li>矩形右侧的区域</li>\r\n\t\t*<li>矩形外的左下角</li>\r\n\t\t*<li>矩形下方的区域</li>\r\n\t\t*<li>矩形外的右下角</li>\r\n\t\t*<li>矩形外的左上角</li>\r\n\t\t*</ul>\r\n\t\t*同时也支持3宫格，比如0,4,0,4,1为水平3宫格，4,0,4,0,1为垂直3宫格，3宫格性能比9宫格高。\r\n\t\t*</p>\r\n\t\t*/\r\n\t\t__getset(0,__proto,'sizeGrid',function(){\r\n\t\t\treturn this._sizeGrid;\r\n\t\t\t},function(value){\r\n\t\t\tthis._sizeGrid=value;\r\n\t\t\tthis._setChanged();\r\n\t\t});\r\n\r\n\t\tAutoBitmap.getTexture=function(tex,x,y,width,height){\r\n\t\t\tif (width <=0)width=1;\r\n\t\t\tif (height <=0)height=1;\r\n\t\t\ttex.$_GID || (tex.$_GID=Utils1.getGID())\r\n\t\t\tvar key=tex.$_GID+\".\"+x+\".\"+y+\".\"+width+\".\"+height;\r\n\t\t\tvar texture=AutoBitmap.textureCache[key];\r\n\t\t\tif (!texture){\r\n\t\t\t\ttexture=AutoBitmap.textureCache[key]=Texture.createFromTexture(tex,x,y,width,height);\r\n\t\t\t}\r\n\t\t\treturn texture;\r\n\t\t}\r\n\r\n\t\tAutoBitmap.clearCache=function(){\r\n\t\t\tAutoBitmap.cacheCount=0;\r\n\t\t\tAutoBitmap.cmdCaches={};\r\n\t\t\tAutoBitmap.textureCache={};\r\n\t\t}\r\n\r\n\t\tAutoBitmap.setCache=function(key,value){\r\n\t\t\tAutoBitmap.cacheCount++;\r\n\t\t\tAutoBitmap.textureCache[key]=value;\r\n\t\t}\r\n\r\n\t\tAutoBitmap.getCache=function(key){\r\n\t\t\treturn AutoBitmap.textureCache[key];\r\n\t\t}\r\n\r\n\t\tAutoBitmap.cmdCaches={};\r\n\t\tAutoBitmap.cacheCount=0;\r\n\t\tAutoBitmap.textureCache={};\r\n\t\treturn AutoBitmap;\r\n\t})(Graphics)\r\n\r\n\r\n\t//class laya.webgl.display.GraphicsGL extends laya.display.Graphics\r\n\tvar GraphicsGL=(function(_super){\r\n\t\tfunction GraphicsGL(){\r\n\t\t\tGraphicsGL.__super.call(this);\r\n\t\t}\r\n\r\n\t\t__class(GraphicsGL,'laya.webgl.display.GraphicsGL',_super);\r\n\t\tvar __proto=GraphicsGL.prototype;\r\n\t\t__proto.setShader=function(shader){\r\n\t\t\tthis._saveToCmd(Render.context._setShader,[shader]);\r\n\t\t}\r\n\r\n\t\t__proto.setIBVB=function(x,y,ib,vb,numElement,shader){\r\n\t\t\tthis._saveToCmd(Render.context._setIBVB,[x,y,ib,vb,numElement,shader]);\r\n\t\t}\r\n\r\n\t\t__proto.drawParticle=function(x,y,ps){\r\n\t\t\tvar pt=RunDriver.createParticleTemplate2D(ps);\r\n\t\t\tpt.x=x;\r\n\t\t\tpt.y=y;\r\n\t\t\tthis._saveToCmd(Render.context._drawParticle,[pt]);\r\n\t\t}\r\n\r\n\t\treturn GraphicsGL;\r\n\t})(Graphics)\r\n\r\n\r\n\t/**\r\n\t*@private\r\n\t*<code>CSSStyle</code> 类是元素CSS样式定义类。\r\n\t*/\r\n\t//class laya.display.css.CSSStyle extends laya.display.css.Style\r\n\tvar CSSStyle=(function(_super){\r\n\t\tfunction CSSStyle(ower){\r\n\t\t\tthis._bgground=null;\r\n\t\t\tthis._border=null;\r\n\t\t\t//this._ower=null;\r\n\t\t\tthis._rect=null;\r\n\t\t\tthis.lineHeight=0;\r\n\t\t\tCSSStyle.__super.call(this);\r\n\t\t\tthis._padding=CSSStyle._PADDING;\r\n\t\t\tthis._spacing=CSSStyle._SPACING;\r\n\t\t\tthis._aligns=CSSStyle._ALIGNS;\r\n\t\t\tthis._font=Font.EMPTY;\r\n\t\t\tthis._ower=ower;\r\n\t\t}\r\n\r\n\t\t__class(CSSStyle,'laya.display.css.CSSStyle',_super);\r\n\t\tvar __proto=CSSStyle.prototype;\r\n\t\t/**@inheritDoc */\r\n\t\t__proto.destroy=function(){\r\n\t\t\tthis._ower=null;\r\n\t\t\tthis._font=null;\r\n\t\t\tthis._rect=null;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*复制传入的 CSSStyle 属性值。\r\n\t\t*@param src 待复制的 CSSStyle 对象。\r\n\t\t*/\r\n\t\t__proto.inherit=function(src){\r\n\t\t\tthis._font=src._font;\r\n\t\t\tthis._spacing=src._spacing===CSSStyle._SPACING ? CSSStyle._SPACING :src._spacing.slice();\r\n\t\t\tthis.lineHeight=src.lineHeight;\r\n\t\t}\r\n\r\n\t\t/**@private */\r\n\t\t__proto._widthAuto=function(){\r\n\t\t\treturn (this._type & 0x40000)!==0;\r\n\t\t}\r\n\r\n\t\t/**@inheritDoc */\r\n\t\t__proto.widthed=function(sprite){\r\n\t\t\treturn (this._type & 0x8)!=0;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*/\r\n\t\t__proto._calculation=function(type,value){\r\n\t\t\tif (value.indexOf('%')< 0)return false;\r\n\t\t\tvar ower=this._ower;\r\n\t\t\tvar parent=ower.parent;\r\n\t\t\tvar rect=this._rect;\r\n\t\t\tfunction getValue (pw,w,nums){\r\n\t\t\t\treturn (pw *nums[0]+w *nums[1]+nums[2]);\r\n\t\t\t}\r\n\t\t\tfunction onParentResize (type){\r\n\t\t\t\tvar pw=parent.width,w=ower.width;\r\n\t\t\t\trect.width && (ower.width=getValue(pw,w,rect.width));\r\n\t\t\t\trect.height && (ower.height=getValue(pw,w,rect.height));\r\n\t\t\t\trect.left && (ower.x=getValue(pw,w,rect.left));\r\n\t\t\t\trect.top && (ower.y=getValue(pw,w,rect.top));\r\n\t\t\t}\r\n\t\t\tif (rect===null){\r\n\t\t\t\tparent._getCSSStyle()._type |=0x80000;\r\n\t\t\t\tparent.on(\"resize\",this,onParentResize);\r\n\t\t\t\tthis._rect=rect={input:{}};\r\n\t\t\t};\r\n\t\t\tvar nums=value.split(' ');\r\n\t\t\tnums[0]=parseFloat(nums[0])/ 100;\r\n\t\t\tif (nums.length==1)\r\n\t\t\t\tnums[1]=nums[2]=0;\r\n\t\t\telse {\r\n\t\t\t\tnums[1]=parseFloat(nums[1])/ 100;\r\n\t\t\t\tnums[2]=parseFloat(nums[2]);\r\n\t\t\t}\r\n\t\t\trect[type]=nums;\r\n\t\t\trect.input[type]=value;\r\n\t\t\tonParentResize(type);\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*是否已设置高度。\r\n\t\t*@param sprite 显示对象 Sprite。\r\n\t\t*@return 一个Boolean 表示是否已设置高度。\r\n\t\t*/\r\n\t\t__proto.heighted=function(sprite){\r\n\t\t\treturn (this._type & 0x2000)!=0;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*设置宽高。\r\n\t\t*@param w 宽度。\r\n\t\t*@param h 高度。\r\n\t\t*/\r\n\t\t__proto.size=function(w,h){\r\n\t\t\tvar ower=this._ower;\r\n\t\t\tvar resize=false;\r\n\t\t\tif (w!==-1 && w !=this._ower.width){\r\n\t\t\t\tthis._type |=0x8;\r\n\t\t\t\tthis._ower.width=w;\r\n\t\t\t\tresize=true;\r\n\t\t\t}\r\n\t\t\tif (h!==-1 && h !=this._ower.height){\r\n\t\t\t\tthis._type |=0x2000;\r\n\t\t\t\tthis._ower.height=h;\r\n\t\t\t\tresize=true;\r\n\t\t\t}\r\n\t\t\tif (resize){\r\n\t\t\t\tower._layoutLater();\r\n\t\t\t\t(this._type & 0x80000)&& ower.event(\"resize\",this);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**@private */\r\n\t\t__proto._getAlign=function(){\r\n\t\t\treturn this._aligns[0];\r\n\t\t}\r\n\r\n\t\t/**@private */\r\n\t\t__proto._getValign=function(){\r\n\t\t\treturn this._aligns[1];\r\n\t\t}\r\n\r\n\t\t/**@private */\r\n\t\t__proto._getCssFloat=function(){\r\n\t\t\treturn (this._type & 0x8000)!=0 ? 0x8000 :0;\r\n\t\t}\r\n\r\n\t\t__proto._createFont=function(){\r\n\t\t\treturn (this._type & 0x1000)? this._font :(this._type |=0x1000,this._font=new Font(this._font));\r\n\t\t}\r\n\r\n\t\t/**@inheritDoc */\r\n\t\t__proto.render=function(sprite,context,x,y){\r\n\t\t\tvar w=sprite.width;\r\n\t\t\tvar h=sprite.height;\r\n\t\t\tx-=sprite.pivotX;\r\n\t\t\ty-=sprite.pivotY;\r\n\t\t\tthis._bgground && this._bgground.color !=null && context.ctx.fillRect(x,y,w,h,this._bgground.color);\r\n\t\t\tthis._border && this._border.color && context.drawRect(x,y,w,h,this._border.color.strColor,this._border.size);\r\n\t\t}\r\n\r\n\t\t/**@inheritDoc */\r\n\t\t__proto.getCSSStyle=function(){\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*设置 CSS 样式字符串。\r\n\t\t*@param text CSS样式字符串。\r\n\t\t*/\r\n\t\t__proto.cssText=function(text){\r\n\t\t\tthis.attrs(CSSStyle.parseOneCSS(text,';'));\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*根据传入的属性名、属性值列表，设置此对象的属性值。\r\n\t\t*@param attrs 属性名与属性值列表。\r\n\t\t*/\r\n\t\t__proto.attrs=function(attrs){\r\n\t\t\tif (attrs){\r\n\t\t\t\tfor (var i=0,n=attrs.length;i < n;i++){\r\n\t\t\t\t\tvar attr=attrs[i];\r\n\t\t\t\t\tthis[attr[0]]=attr[1];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**@inheritDoc */\r\n\t\t__proto.setTransform=function(value){\r\n\t\t\t(value==='none')? (this._tf=Style._TF_EMPTY):this.attrs(CSSStyle.parseOneCSS(value,','));\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*定义 X 轴、Y 轴移动转换。\r\n\t\t*@param x X 轴平移量。\r\n\t\t*@param y Y 轴平移量。\r\n\t\t*/\r\n\t\t__proto.translate=function(x,y){\r\n\t\t\tthis._tf===Style._TF_EMPTY && (this._tf=new TransformInfo());\r\n\t\t\tthis._tf.translateX=x;\r\n\t\t\tthis._tf.translateY=y;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*定义 缩放转换。\r\n\t\t*@param x X 轴缩放值。\r\n\t\t*@param y Y 轴缩放值。\r\n\t\t*/\r\n\t\t__proto.scale=function(x,y){\r\n\t\t\tthis._tf===Style._TF_EMPTY && (this._tf=new TransformInfo());\r\n\t\t\tthis._tf.scaleX=x;\r\n\t\t\tthis._tf.scaleY=y;\r\n\t\t}\r\n\r\n\t\t/**@private */\r\n\t\t__proto._enableLayout=function(){\r\n\t\t\treturn (this._type & 0x2)===0 && (this._type & 0x4)===0;\r\n\t\t}\r\n\r\n\t\t__getset(0,__proto,'_rotate',null,function(value){\r\n\t\t\tthis._ower.rotation=value;\r\n\t\t});\r\n\r\n\t\t__getset(0,__proto,'_translate',null,function(value){\r\n\t\t\tthis.translate(value[0],value[1]);\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*规定元素应该生成的框的类型。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'display',null,function(value){\r\n\t\t\tswitch (value){\r\n\t\t\t\tcase '':\r\n\t\t\t\t\tthis._type &=~0x2;\r\n\t\t\t\t\tthis.visible=true;\r\n\t\t\t\t\tbreak ;\r\n\t\t\t\tcase 'none':\r\n\t\t\t\t\tthis._type |=0x2;\r\n\t\t\t\t\tthis.visible=false;\r\n\t\t\t\t\tthis._ower._layoutLater();\r\n\t\t\t\t\tbreak ;\r\n\t\t\t\t}\r\n\t\t});\r\n\r\n\t\t/**@inheritDoc */\r\n\t\t__getset(0,__proto,'paddingLeft',function(){\r\n\t\t\treturn this.padding[3];\r\n\t\t});\r\n\r\n\t\t__getset(0,__proto,'background',null,function(value){\r\n\t\t\tif (!value){\r\n\t\t\t\tthis._bgground=null;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis._bgground || (this._bgground={});\r\n\t\t\tthis._bgground.color=value;\r\n\t\t\tthis._ower.conchModel && this._ower.conchModel.bgColor(value);\r\n\t\t\tthis._type |=0x4000;\r\n\t\t\tthis._ower._renderType |=0x100;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*边框属性，比如border=\"5px solid red\"\r\n\t\t*/\r\n\t\t__getset(0,__proto,'border',function(){\r\n\t\t\treturn this._border ? this._border.value :\"\";\r\n\t\t\t},function(value){\r\n\t\t\tif (value=='none'){\r\n\t\t\t\tthis._border=null;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis._border || (this._border={});\r\n\t\t\tthis._border.value=value;\r\n\t\t\tvar values=value.split(' ');\r\n\t\t\tthis._border.color=Color.create(values[values.length-1]);\r\n\t\t\tif (values.length==1){\r\n\t\t\t\tthis._border.size=1;\r\n\t\t\t\tthis._border.type='solid';\r\n\t\t\t\treturn;\r\n\t\t\t};\r\n\t\t\tvar i=0;\r\n\t\t\tif (values[0].indexOf('px')> 0){\r\n\t\t\t\tthis._border.size=parseInt(values[0]);\r\n\t\t\t\ti++;\r\n\t\t\t}else this._border.size=1;\r\n\t\t\tthis._border.type=values[i];\r\n\t\t\tthis._ower._renderType |=0x100;\r\n\t\t});\r\n\r\n\t\t/**@inheritDoc */\r\n\t\t__getset(0,__proto,'absolute',function(){\r\n\t\t\treturn (this._type & 0x4)!==0;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*<p>描边颜色，以字符串表示。</p>\r\n\t\t*@default \"#000000\";\r\n\t\t*/\r\n\t\t__getset(0,__proto,'strokeColor',function(){\r\n\t\t\treturn this._font.stroke[1];\r\n\t\t\t},function(value){\r\n\t\t\tif (this._createFont().stroke===Font._STROKE)this._font.stroke=[0,\"#000000\"];\r\n\t\t\tthis._font.stroke[1]=value;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*<p>描边宽度（以像素为单位）。</p>\r\n\t\t*默认值0，表示不描边。\r\n\t\t*@default 0\r\n\t\t*/\r\n\t\t__getset(0,__proto,'stroke',function(){\r\n\t\t\treturn this._font.stroke[0];\r\n\t\t\t},function(value){\r\n\t\t\tif (this._createFont().stroke===Font._STROKE)this._font.stroke=[0,\"#000000\"];\r\n\t\t\tthis._font.stroke[0]=value;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*字体颜色。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'color',function(){\r\n\t\t\treturn this._font.color;\r\n\t\t\t},function(value){\r\n\t\t\tthis._createFont().color=value;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*添加到文本的修饰。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'textDecoration',function(){\r\n\t\t\treturn this._font.decoration;\r\n\t\t\t},function(value){\r\n\t\t\tthis._createFont().decoration=value;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*字体粗细。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'fontWeight',function(){\r\n\t\t\treturn this._font.weight;\r\n\t\t\t},function(value){\r\n\t\t\tthis._createFont().weight=value;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*文本的粗细。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'weight',null,function(value){\r\n\t\t\tthis._createFont().weight=value;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*字体系列。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'fontFamily',function(){\r\n\t\t\treturn this._font.family;\r\n\t\t\t},function(value){\r\n\t\t\tthis._createFont().family=value;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*边框的颜色。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'borderColor',function(){\r\n\t\t\treturn (this._border && this._border.color)? this._border.color.strColor :null;\r\n\t\t\t},function(value){\r\n\t\t\tif (!value){\r\n\t\t\t\tthis._border=null;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis._border || (this._border={size:1,type:'solid'});\r\n\t\t\tthis._border.color=(value==null)? null :Color.create(value);\r\n\t\t\tthis._ower.conchModel && this._ower.conchModel.border(this._border.color.strColor);\r\n\t\t\tthis._ower._renderType |=0x100;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*垂直对齐方式。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'valign',function(){\r\n\t\t\treturn CSSStyle._valigndef[this._aligns[1]];\r\n\t\t\t},function(value){\r\n\t\t\tthis._aligns===CSSStyle._ALIGNS && (this._aligns=[0,0,0]);\r\n\t\t\tthis._aligns[1]=CSSStyle._valigndef[value];\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*设置如何处理元素内的空白。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'whiteSpace',function(){\r\n\t\t\treturn (this._type & 0x20000)? \"nowrap\" :\"\";\r\n\t\t\t},function(type){\r\n\t\t\ttype===\"nowrap\" && (this._type |=0x20000);\r\n\t\t\ttype===\"none\" && (this._type &=~0x20000);\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*间距。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'letterSpacing',function(){\r\n\t\t\treturn this._spacing[0];\r\n\t\t\t},function(d){\r\n\t\t\t((typeof d=='string'))&& (d=parseInt(d+\"\"));\r\n\t\t\tthis._spacing===CSSStyle._SPACING && (this._spacing=[0,0]);\r\n\t\t\tthis._spacing[0]=d;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*背景颜色。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'backgroundColor',function(){\r\n\t\t\treturn this._bgground ? this._bgground.color :null;\r\n\t\t\t},function(value){\r\n\t\t\tif (value==='none')this._bgground=null;\r\n\t\t\telse (this._bgground || (this._bgground={}),this._bgground.color=value);\r\n\t\t\tthis._ower.conchModel && this._ower.conchModel.bgColor(value);\r\n\t\t\tthis._ower._renderType |=0x100;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*行间距。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'leading',function(){\r\n\t\t\treturn this._spacing[1];\r\n\t\t\t},function(d){\r\n\t\t\t((typeof d=='string'))&& (d=parseInt(d+\"\"));\r\n\t\t\tthis._spacing===CSSStyle._SPACING && (this._spacing=[0,0]);\r\n\t\t\tthis._spacing[1]=d;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*字体信息。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'font',function(){\r\n\t\t\treturn this._font.toString();\r\n\t\t\t},function(value){\r\n\t\t\tthis._createFont().set(value);\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*<p>指定文本字段是否是密码文本字段。</p>\r\n\t\t*如果此属性的值为 true，则文本字段被视为密码文本字段，并使用星号而不是实际字符来隐藏输入的字符。如果为 false，则不会将文本字段视为密码文本字段。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'password',function(){\r\n\t\t\treturn this._font.password;\r\n\t\t\t},function(value){\r\n\t\t\tthis._createFont().password=value;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*边距信息。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'padding',function(){\r\n\t\t\treturn this._padding;\r\n\t\t\t},function(value){\r\n\t\t\tthis._padding=value;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*表示是否加粗。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'bold',function(){\r\n\t\t\treturn this._font.bold;\r\n\t\t\t},function(value){\r\n\t\t\tthis._createFont().bold=value;\r\n\t\t});\r\n\r\n\t\t/**@inheritDoc */\r\n\t\t__getset(0,__proto,'paddingTop',function(){\r\n\t\t\treturn this.padding[0];\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*高度。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'height',null,function(h){\r\n\t\t\tthis._type |=0x2000;\r\n\t\t\tif ((typeof h=='string')){\r\n\t\t\t\tif (this._calculation(\"height\",h))return;\r\n\t\t\t\th=parseInt(h);\r\n\t\t\t}\r\n\t\t\tthis.size(-1,h);\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*表示是否换行。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'wordWrap',function(){\r\n\t\t\treturn (this._type & 0x20000)===0;\r\n\t\t\t},function(value){\r\n\t\t\tvalue ? (this._type &=~0x20000):(this._type |=0x20000);\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*是否是行元素。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'lineElement',function(){\r\n\t\t\treturn (this._type & 0x10000)!=0;\r\n\t\t\t},function(value){\r\n\t\t\tvalue ? (this._type |=0x10000):(this._type &=(~0x10000));\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*表示是否为斜体。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'italic',function(){\r\n\t\t\treturn this._font.italic;\r\n\t\t\t},function(value){\r\n\t\t\tthis._createFont().italic=value;\r\n\t\t});\r\n\r\n\t\t__getset(0,__proto,'_scale',null,function(value){\r\n\t\t\tthis._ower.scale(value[0],value[1]);\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*表示上边距。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'top',null,function(value){\r\n\t\t\tvar ower=this._ower;\r\n\t\t\tif (((typeof value=='string'))){\r\n\t\t\t\tif (value===\"middle\")\r\n\t\t\t\t\tvalue=\"50% -50% 0\";\r\n\t\t\t\telse if (value===\"bottom\")\r\n\t\t\t\tvalue=\"100% -100% 0\";\r\n\t\t\t\tif (this._calculation(\"top\",value))return;\r\n\t\t\t\tvalue=parseInt(value);\r\n\t\t\t}\r\n\t\t\tower.y=value;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*表示左边距。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'left',null,function(value){\r\n\t\t\tvar ower=this._ower;\r\n\t\t\tif (((typeof value=='string'))){\r\n\t\t\t\tif (value===\"center\")\r\n\t\t\t\t\tvalue=\"50% -50% 0\";\r\n\t\t\t\telse if (value===\"right\")\r\n\t\t\t\tvalue=\"100% -100% 0\";\r\n\t\t\t\tif (this._calculation(\"left\",value))return;\r\n\t\t\t\tvalue=parseInt(value);\r\n\t\t\t}\r\n\t\t\tower.x=value;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*是否显示为块级元素。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'block',_super.prototype._$get_block,function(value){\r\n\t\t\tvalue ? (this._type |=0x1):(this._type &=(~0x1));\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*元素的定位类型。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'position',function(){\r\n\t\t\treturn (this._type & 0x4)? \"absolute\" :\"\";\r\n\t\t\t},function(value){\r\n\t\t\tvalue==\"absolute\" ? (this._type |=0x4):(this._type &=~0x4);\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*浮动方向。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'cssFloat',function(){\r\n\t\t\treturn (this._type & 0x8000)!=0 ? \"right\" :\"left\";\r\n\t\t\t},function(value){\r\n\t\t\tthis.lineElement=false;\r\n\t\t\tvalue===\"right\" ? (this._type |=0x8000):(this._type &=(~0x8000));\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*字体大小。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'fontSize',function(){\r\n\t\t\treturn this._font.size;\r\n\t\t\t},function(value){\r\n\t\t\tthis._createFont().size=value;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*水平对齐方式。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'align',function(){\r\n\t\t\treturn CSSStyle._aligndef[this._aligns[0]];\r\n\t\t\t},function(value){\r\n\t\t\tthis._aligns===CSSStyle._ALIGNS && (this._aligns=[0,0,0]);\r\n\t\t\tthis._aligns[0]=CSSStyle._aligndef[value];\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*宽度。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'width',null,function(w){\r\n\t\t\tthis._type |=0x8;\r\n\t\t\tif ((typeof w=='string')){\r\n\t\t\t\tvar offset=w.indexOf('auto');\r\n\t\t\t\tif (offset >=0){\r\n\t\t\t\t\tthis._type |=0x40000;\r\n\t\t\t\t\tw=w.substr(0,offset);\r\n\t\t\t\t}\r\n\t\t\t\tif (this._calculation(\"width\",w))return;\r\n\t\t\t\tw=parseInt(w);\r\n\t\t\t}\r\n\t\t\tthis.size(w,-1);\r\n\t\t});\r\n\r\n\t\tCSSStyle.parseOneCSS=function(text,clipWord){\r\n\t\t\tvar out=[];\r\n\t\t\tvar attrs=text.split(clipWord);\r\n\t\t\tvar valueArray;\r\n\t\t\tfor (var i=0,n=attrs.length;i < n;i++){\r\n\t\t\t\tvar attr=attrs[i];\r\n\t\t\t\tvar ofs=attr.indexOf(':');\r\n\t\t\t\tvar name=attr.substr(0,ofs).replace(/^\\s+|\\s+$/g,'');\r\n\t\t\t\tif (name.length==0)\r\n\t\t\t\t\tcontinue ;\r\n\t\t\t\tvar value=attr.substr(ofs+1).replace(/^\\s+|\\s+$/g,'');\r\n\t\t\t\tvar one=[name,value];\r\n\t\t\t\tswitch (name){\r\n\t\t\t\t\tcase 'italic':\r\n\t\t\t\t\tcase 'bold':\r\n\t\t\t\t\t\tone[1]=value==\"true\";\r\n\t\t\t\t\t\tbreak ;\r\n\t\t\t\t\tcase 'line-height':\r\n\t\t\t\t\t\tone[0]='lineHeight';\r\n\t\t\t\t\t\tone[1]=parseInt(value);\r\n\t\t\t\t\t\tbreak ;\r\n\t\t\t\t\tcase 'font-size':\r\n\t\t\t\t\t\tone[0]='fontSize';\r\n\t\t\t\t\t\tone[1]=parseInt(value);\r\n\t\t\t\t\t\tbreak ;\r\n\t\t\t\t\tcase 'padding':\r\n\t\t\t\t\t\tvalueArray=value.split(' ');\r\n\t\t\t\t\t\tvalueArray.length > 1 || (valueArray[1]=valueArray[2]=valueArray[3]=valueArray[0]);\r\n\t\t\t\t\t\tone[1]=[parseInt(valueArray[0]),parseInt(valueArray[1]),parseInt(valueArray[2]),parseInt(valueArray[3])];\r\n\t\t\t\t\t\tbreak ;\r\n\t\t\t\t\tcase 'rotate':\r\n\t\t\t\t\t\tone[0]=\"_rotate\";\r\n\t\t\t\t\t\tone[1]=parseFloat(value);\r\n\t\t\t\t\t\tbreak ;\r\n\t\t\t\t\tcase 'scale':\r\n\t\t\t\t\t\tvalueArray=value.split(' ');\r\n\t\t\t\t\t\tone[0]=\"_scale\";\r\n\t\t\t\t\t\tone[1]=[parseFloat(valueArray[0]),parseFloat(valueArray[1])];\r\n\t\t\t\t\t\tbreak ;\r\n\t\t\t\t\tcase 'translate':\r\n\t\t\t\t\t\tvalueArray=value.split(' ');\r\n\t\t\t\t\t\tone[0]=\"_translate\";\r\n\t\t\t\t\t\tone[1]=[parseInt(valueArray[0]),parseInt(valueArray[1])];\r\n\t\t\t\t\t\tbreak ;\r\n\t\t\t\t\tdefault :\r\n\t\t\t\t\t\t(one[0]=CSSStyle._CSSTOVALUE[name])|| (one[0]=name);\r\n\t\t\t\t\t}\r\n\t\t\t\tout.push(one);\r\n\t\t\t}\r\n\t\t\treturn out;\r\n\t\t}\r\n\r\n\t\tCSSStyle.parseCSS=function(text,uri){\r\n\t\t\tvar one;\r\n\t\t\twhile ((one=CSSStyle._parseCSSRegExp.exec(text))!=null){\r\n\t\t\t\tCSSStyle.styleSheets[one[1]]=CSSStyle.parseOneCSS(one[2],';');\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tCSSStyle.EMPTY=new CSSStyle(null);\r\n\t\tCSSStyle._CSSTOVALUE={'letter-spacing':'letterSpacing','line-spacing':'lineSpacing','white-space':'whiteSpace','line-height':'lineHeight','scale-x':'scaleX','scale-y':'scaleY','translate-x':'translateX','translate-y':'translateY','font-family':'fontFamily','font-weight':'fontWeight','vertical-align':'valign','text-decoration':'textDecoration','background-color':'backgroundColor','border-color':'borderColor','float':'cssFloat'};\r\n\t\tCSSStyle._parseCSSRegExp=new RegExp(\"([\\.\\#]\\\\w+)\\\\s*{([\\\\s\\\\S]*?)}\",\"g\");\r\n\t\tCSSStyle._aligndef={'left':0,'center':1,'right':2,0:'left',1:'center',2:'right'};\r\n\t\tCSSStyle._valigndef={'top':0,'middle':1,'bottom':2,0:'top',1:'middle',2:'bottom'};\r\n\t\tCSSStyle.styleSheets={};\r\n\t\tCSSStyle.ALIGN_CENTER=1;\r\n\t\tCSSStyle.ALIGN_RIGHT=2;\r\n\t\tCSSStyle.VALIGN_MIDDLE=1;\r\n\t\tCSSStyle.VALIGN_BOTTOM=2;\r\n\t\tCSSStyle._CSS_BLOCK=0x1;\r\n\t\tCSSStyle._DISPLAY_NONE=0x2;\r\n\t\tCSSStyle._ABSOLUTE=0x4;\r\n\t\tCSSStyle._WIDTH_SET=0x8;\r\n\t\tCSSStyle._PADDING=[0,0,0,0];\r\n\t\tCSSStyle._RECT=[-1,-1,-1,-1];\r\n\t\tCSSStyle._SPACING=[0,0];\r\n\t\tCSSStyle._ALIGNS=[0,0,0];\r\n\t\tCSSStyle.ADDLAYOUTED=0x200;\r\n\t\tCSSStyle._NEWFONT=0x1000;\r\n\t\tCSSStyle._HEIGHT_SET=0x2000;\r\n\t\tCSSStyle._BACKGROUND_SET=0x4000;\r\n\t\tCSSStyle._FLOAT_RIGHT=0x8000;\r\n\t\tCSSStyle._LINE_ELEMENT=0x10000;\r\n\t\tCSSStyle._NOWARP=0x20000;\r\n\t\tCSSStyle._WIDTHAUTO=0x40000;\r\n\t\tCSSStyle._LISTERRESZIE=0x80000;\r\n\t\treturn CSSStyle;\r\n\t})(Style)\r\n\r\n\r\n\t/**\r\n\t*模糊滤镜\r\n\t*/\r\n\t//class laya.filters.BlurFilter extends laya.filters.Filter\r\n\tvar BlurFilter=(function(_super){\r\n\t\tfunction BlurFilter(strength){\r\n\t\t\tthis.strength=NaN;\r\n\t\t\tBlurFilter.__super.call(this);\r\n\t\t\t(strength===void 0)&& (strength=4);\r\n\t\t\tif (Render.isWebGL)WebGLFilter.enable();\r\n\t\t\tthis.strength=strength;\r\n\t\t\tthis._action=RunDriver.createFilterAction(0x10);\r\n\t\t\tthis._action.data=this;\r\n\t\t}\r\n\r\n\t\t__class(BlurFilter,'laya.filters.BlurFilter',_super);\r\n\t\tvar __proto=BlurFilter.prototype;\r\n\t\t/**\r\n\t\t*@private 通知微端\r\n\t\t*/\r\n\t\t__proto.callNative=function(sp){\r\n\t\t\tsp.conchModel &&sp.conchModel.blurFilter&&sp.conchModel.blurFilter(this.strength);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*当前滤镜的类型\r\n\t\t*/\r\n\t\t__getset(0,__proto,'type',function(){\r\n\t\t\treturn 0x10;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*当前滤镜对应的操作器\r\n\t\t*/\r\n\t\t__getset(0,__proto,'action',function(){\r\n\t\t\treturn this._action;\r\n\t\t});\r\n\r\n\t\treturn BlurFilter;\r\n\t})(Filter)\r\n\r\n\r\n\t/**\r\n\t*<p><code>ColorFilter</code> 是颜色滤镜。</p>\r\n\t*/\r\n\t//class laya.filters.ColorFilter extends laya.filters.Filter\r\n\tvar ColorFilter=(function(_super){\r\n\t\tfunction ColorFilter(mat){\r\n\t\t\t//this._mat=null;\r\n\t\t\t//this._alpha=null;\r\n\t\t\tColorFilter.__super.call(this);\r\n\t\t\tif (!mat){\r\n\t\t\t\tmat=[0.3,0.59,0.11,0,0,0.3,0.59,0.11,0,0,0.3,0.59,0.11,0,0,0,0,0,1,0];\r\n\t\t\t}\r\n\t\t\tthis._mat=new Float32Array(16);\r\n\t\t\tthis._alpha=new Float32Array(4);\r\n\t\t\tvar j=0;\r\n\t\t\tvar z=0;\r\n\t\t\tfor (var i=0;i < 20;i++){\r\n\t\t\t\tif (i % 5 !=4){\r\n\t\t\t\t\tthis._mat[j++]=mat[i];\r\n\t\t\t\t\t}else {\r\n\t\t\t\t\tthis._alpha[z++]=mat[i];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis._action=RunDriver.createFilterAction(0x20);\r\n\t\t\tthis._action.data=this;\r\n\t\t}\r\n\r\n\t\t__class(ColorFilter,'laya.filters.ColorFilter',_super);\r\n\t\tvar __proto=ColorFilter.prototype;\r\n\t\tLaya.imps(__proto,{\"laya.filters.IFilter\":true})\r\n\t\t/**\r\n\t\t*@private 通知微端\r\n\t\t*/\r\n\t\t__proto.callNative=function(sp){\r\n\t\t\tvar t=sp._$P.cf=this;\r\n\t\t\tsp.conchModel && sp.conchModel.setFilterMatrix&&sp.conchModel.setFilterMatrix(this._mat,this._alpha);\r\n\t\t}\r\n\r\n\t\t/**@private */\r\n\t\t__getset(0,__proto,'action',function(){\r\n\t\t\treturn this._action;\r\n\t\t});\r\n\r\n\t\t/**@private */\r\n\t\t__getset(0,__proto,'type',function(){\r\n\t\t\treturn 0x20;\r\n\t\t});\r\n\r\n\t\t__getset(1,ColorFilter,'GRAY',function(){\r\n\t\t\tif (!ColorFilter._GRAY){\r\n\t\t\t\tColorFilter._GRAY=new ColorFilter([0.3,0.59,0.11,0,0,0.3,0.59,0.11,0,0,0.3,0.59,0.11,0,0,0,0,0,1,0]);\r\n\t\t\t}\r\n\t\t\treturn ColorFilter._GRAY;\r\n\t\t},laya.filters.Filter._$SET_GRAY);\r\n\r\n\t\t__getset(1,ColorFilter,'DEFAULT',function(){\r\n\t\t\tif (!ColorFilter._DEFAULT){\r\n\t\t\t\tColorFilter._DEFAULT=new ColorFilter([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]);\r\n\t\t\t}\r\n\t\t\treturn ColorFilter._DEFAULT;\r\n\t\t},laya.filters.Filter._$SET_DEFAULT);\r\n\r\n\t\tColorFilter._DEFAULT=null\r\n\t\tColorFilter._GRAY=null\r\n\t\treturn ColorFilter;\r\n\t})(Filter)\r\n\r\n\r\n\t/**\r\n\t*发光滤镜(也可以当成阴影滤使用）\r\n\t*/\r\n\t//class laya.filters.GlowFilter extends laya.filters.Filter\r\n\tvar GlowFilter=(function(_super){\r\n\t\tfunction GlowFilter(color,blur,offX,offY){\r\n\t\t\tthis._color=null;\r\n\t\t\tGlowFilter.__super.call(this);\r\n\t\t\tthis._elements=new Float32Array(9);\r\n\t\t\t(blur===void 0)&& (blur=4);\r\n\t\t\t(offX===void 0)&& (offX=6);\r\n\t\t\t(offY===void 0)&& (offY=6);\r\n\t\t\tif (Render.isWebGL){\r\n\t\t\t\tWebGLFilter.enable();\r\n\t\t\t}\r\n\t\t\tthis._color=new Color(color);\r\n\t\t\tthis.blur=blur;\r\n\t\t\tthis.offX=offX;\r\n\t\t\tthis.offY=offY;\r\n\t\t\tthis._action=RunDriver.createFilterAction(0x08);\r\n\t\t\tthis._action.data=this;\r\n\t\t}\r\n\r\n\t\t__class(GlowFilter,'laya.filters.GlowFilter',_super);\r\n\t\tvar __proto=GlowFilter.prototype;\r\n\t\t/**@private */\r\n\t\t__proto.getColor=function(){\r\n\t\t\treturn this._color._color;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private 通知微端\r\n\t\t*/\r\n\t\t__proto.callNative=function(sp){\r\n\t\t\tsp.conchModel &&sp.conchModel.glowFilter&&sp.conchModel.glowFilter(this._color.strColor,this._elements[4],this._elements[5],this._elements[6]);\r\n\t\t}\r\n\r\n\t\t/**@private */\r\n\t\t/**@private */\r\n\t\t__getset(0,__proto,'blur',function(){\r\n\t\t\treturn this._elements[4];\r\n\t\t\t},function(value){\r\n\t\t\tthis._elements[4]=value;\r\n\t\t});\r\n\r\n\t\t/**@private */\r\n\t\t/**@private */\r\n\t\t__getset(0,__proto,'offY',function(){\r\n\t\t\treturn this._elements[6];\r\n\t\t\t},function(value){\r\n\t\t\tthis._elements[6]=value;\r\n\t\t});\r\n\r\n\t\t/**@private */\r\n\t\t/**@private */\r\n\t\t__getset(0,__proto,'offX',function(){\r\n\t\t\treturn this._elements[5];\r\n\t\t\t},function(value){\r\n\t\t\tthis._elements[5]=value;\r\n\t\t});\r\n\r\n\t\t/**@private */\r\n\t\t__getset(0,__proto,'action',function(){\r\n\t\t\treturn this._action;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*滤镜类型\r\n\t\t*/\r\n\t\t__getset(0,__proto,'type',function(){\r\n\t\t\treturn 0x08;\r\n\t\t});\r\n\r\n\t\treturn GlowFilter;\r\n\t})(Filter)\r\n\r\n\r\n\t//class laya.webgl.shader.d2.ShaderDefines2D extends laya.webgl.shader.ShaderDefines\r\n\tvar ShaderDefines2D=(function(_super){\r\n\t\tfunction ShaderDefines2D(){\r\n\t\t\tShaderDefines2D.__super.call(this,ShaderDefines2D.__name2int,ShaderDefines2D.__int2name,ShaderDefines2D.__int2nameMap);\r\n\t\t}\r\n\r\n\t\t__class(ShaderDefines2D,'laya.webgl.shader.d2.ShaderDefines2D',_super);\r\n\t\tShaderDefines2D.__init__=function(){\r\n\t\t\tShaderDefines2D.reg(\"TEXTURE2D\",0x01);\r\n\t\t\tShaderDefines2D.reg(\"COLOR2D\",0x02);\r\n\t\t\tShaderDefines2D.reg(\"PRIMITIVE\",0x04);\r\n\t\t\tShaderDefines2D.reg(\"GLOW_FILTER\",0x08);\r\n\t\t\tShaderDefines2D.reg(\"BLUR_FILTER\",0x10);\r\n\t\t\tShaderDefines2D.reg(\"COLOR_FILTER\",0x20);\r\n\t\t\tShaderDefines2D.reg(\"COLOR_ADD\",0x40);\r\n\t\t\tShaderDefines2D.reg(\"WORLDMAT\",0x80);\r\n\t\t\tShaderDefines2D.reg(\"FILLTEXTURE\",0x100);\r\n\t\t}\r\n\r\n\t\tShaderDefines2D.reg=function(name,value){\r\n\t\t\tShaderDefines._reg(name,value,ShaderDefines2D.__name2int,ShaderDefines2D.__int2name);\r\n\t\t}\r\n\r\n\t\tShaderDefines2D.toText=function(value,int2name,int2nameMap){\r\n\t\t\treturn ShaderDefines._toText(value,int2name,int2nameMap);\r\n\t\t}\r\n\r\n\t\tShaderDefines2D.toInt=function(names){\r\n\t\t\treturn ShaderDefines._toInt(names,ShaderDefines2D.__name2int);\r\n\t\t}\r\n\r\n\t\tShaderDefines2D.TEXTURE2D=0x01;\r\n\t\tShaderDefines2D.COLOR2D=0x02;\r\n\t\tShaderDefines2D.PRIMITIVE=0x04;\r\n\t\tShaderDefines2D.FILTERGLOW=0x08;\r\n\t\tShaderDefines2D.FILTERBLUR=0x10;\r\n\t\tShaderDefines2D.FILTERCOLOR=0x20;\r\n\t\tShaderDefines2D.COLORADD=0x40;\r\n\t\tShaderDefines2D.WORLDMAT=0x80;\r\n\t\tShaderDefines2D.FILLTEXTURE=0x100;\r\n\t\tShaderDefines2D.SKINMESH=0x200;\r\n\t\tShaderDefines2D.__name2int={};\r\n\t\tShaderDefines2D.__int2name=[];\r\n\t\tShaderDefines2D.__int2nameMap=[];\r\n\t\treturn ShaderDefines2D;\r\n\t})(ShaderDefines)\r\n\r\n\r\n\t/**\r\n\t*@private\r\n\t*/\r\n\t//class laya.filters.webgl.BlurFilterActionGL extends laya.filters.webgl.FilterActionGL\r\n\tvar BlurFilterActionGL=(function(_super){\r\n\t\tfunction BlurFilterActionGL(){\r\n\t\t\tthis.data=null;\r\n\t\t\tBlurFilterActionGL.__super.call(this);\r\n\t\t}\r\n\r\n\t\t__class(BlurFilterActionGL,'laya.filters.webgl.BlurFilterActionGL',_super);\r\n\t\tvar __proto=BlurFilterActionGL.prototype;\r\n\t\t__proto.setValueMix=function(shader){\r\n\t\t\tshader.defines.add(this.data.type);\r\n\t\t\tvar o=shader;\r\n\t\t}\r\n\r\n\t\t__proto.apply3d=function(scope,sprite,context,x,y){\r\n\t\t\tvar b=scope.getValue(\"bounds\");\r\n\t\t\tvar shaderValue=Value2D.create(0x01,0);\r\n\t\t\tshaderValue.setFilters([this.data]);\r\n\t\t\tvar tMatrix=Matrix.EMPTY;\r\n\t\t\ttMatrix.identity();\r\n\t\t\tcontext.ctx.drawTarget(scope,0,0,b.width,b.height,Matrix.EMPTY,\"src\",shaderValue);\r\n\t\t\tshaderValue.setFilters(null);\r\n\t\t}\r\n\r\n\t\t__proto.setValue=function(shader){\r\n\t\t\tshader.strength=this.data.strength;\r\n\t\t}\r\n\r\n\t\t__getset(0,__proto,'typeMix',function(){return 0x10;});\r\n\t\treturn BlurFilterActionGL;\r\n\t})(FilterActionGL)\r\n\r\n\r\n\t//class laya.filters.webgl.ColorFilterActionGL extends laya.filters.webgl.FilterActionGL\r\n\tvar ColorFilterActionGL=(function(_super){\r\n\t\tfunction ColorFilterActionGL(){\r\n\t\t\tthis.data=null;\r\n\t\t\tColorFilterActionGL.__super.call(this);\r\n\t\t}\r\n\r\n\t\t__class(ColorFilterActionGL,'laya.filters.webgl.ColorFilterActionGL',_super);\r\n\t\tvar __proto=ColorFilterActionGL.prototype;\r\n\t\tLaya.imps(__proto,{\"laya.filters.IFilterActionGL\":true})\r\n\t\t__proto.setValue=function(shader){\r\n\t\t\tshader.colorMat=this.data._mat;\r\n\t\t\tshader.colorAlpha=this.data._alpha;\r\n\t\t}\r\n\r\n\t\t__proto.apply3d=function(scope,sprite,context,x,y){\r\n\t\t\tvar b=scope.getValue(\"bounds\");\r\n\t\t\tvar shaderValue=Value2D.create(0x01,0);\r\n\t\t\tshaderValue.setFilters([this.data]);\r\n\t\t\tvar tMatrix=Matrix.TEMP;\r\n\t\t\ttMatrix.identity();\r\n\t\t\tcontext.ctx.drawTarget(scope,0,0,b.width,b.height,tMatrix,\"src\",shaderValue);\r\n\t\t}\r\n\r\n\t\treturn ColorFilterActionGL;\r\n\t})(FilterActionGL)\r\n\r\n\r\n\t/**\r\n\t*@private\r\n\t*/\r\n\t//class laya.filters.webgl.GlowFilterActionGL extends laya.filters.webgl.FilterActionGL\r\n\tvar GlowFilterActionGL=(function(_super){\r\n\t\tfunction GlowFilterActionGL(){\r\n\t\t\tthis.data=null;\r\n\t\t\tthis._initKey=false;\r\n\t\t\tthis._textureWidth=0;\r\n\t\t\tthis._textureHeight=0;\r\n\t\t\tGlowFilterActionGL.__super.call(this);\r\n\t\t}\r\n\r\n\t\t__class(GlowFilterActionGL,'laya.filters.webgl.GlowFilterActionGL',_super);\r\n\t\tvar __proto=GlowFilterActionGL.prototype;\r\n\t\tLaya.imps(__proto,{\"laya.filters.IFilterActionGL\":true})\r\n\t\t__proto.setValueMix=function(shader){}\r\n\t\t__proto.apply3d=function(scope,sprite,context,x,y){\r\n\t\t\tvar b=scope.getValue(\"bounds\");\r\n\t\t\tscope.addValue(\"color\",this.data.getColor());\r\n\t\t\tvar w=b.width,h=b.height;\r\n\t\t\tthis._textureWidth=w;\r\n\t\t\tthis._textureHeight=h;\r\n\t\t\tvar submit=SubmitCMD.create([scope,sprite,context,0,0],GlowFilterActionGL.tmpTarget);\r\n\t\t\tcontext.ctx.addRenderObject(submit);\r\n\t\t\tvar shaderValue;\r\n\t\t\tvar mat=Matrix.TEMP;\r\n\t\t\tmat.identity();\r\n\t\t\tshaderValue=Value2D.create(0x01,0);\r\n\t\t\tshaderValue.setFilters([this.data]);\r\n\t\t\tcontext.ctx.drawTarget(scope,0,0,this._textureWidth,this._textureHeight,mat,\"src\",shaderValue,null,BlendMode.TOINT.overlay);\r\n\t\t\tsubmit=SubmitCMD.create([scope,sprite,context,0,0],GlowFilterActionGL.startOut);\r\n\t\t\tcontext.ctx.addRenderObject(submit);\r\n\t\t\tshaderValue=Value2D.create(0x01,0);\r\n\t\t\tcontext.ctx.drawTarget(scope,0,0,this._textureWidth,this._textureHeight,mat,\"tmpTarget\",shaderValue,Texture.INV_UV,BlendMode.TOINT.overlay);\r\n\t\t\tshaderValue=Value2D.create(0x01,0);\r\n\t\t\tcontext.ctx.drawTarget(scope,0,0,this._textureWidth,this._textureHeight,mat,\"src\",shaderValue);\r\n\t\t\tsubmit=SubmitCMD.create([scope,sprite,context,0,0],GlowFilterActionGL.recycleTarget);\r\n\t\t\tcontext.ctx.addRenderObject(submit);\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\t__proto.setSpriteWH=function(sprite){\r\n\t\t\tthis._textureWidth=sprite.width;\r\n\t\t\tthis._textureHeight=sprite.height;\r\n\t\t}\r\n\r\n\t\t__proto.setValue=function(shader){\r\n\t\t\tshader.u_offsetX=this.data.offX;\r\n\t\t\tshader.u_offsetY=-this.data.offY;\r\n\t\t\tshader.u_strength=1.0;\r\n\t\t\tshader.u_blurX=this.data.blur;\r\n\t\t\tshader.u_blurY=this.data.blur;\r\n\t\t\tshader.u_textW=this._textureWidth;\r\n\t\t\tshader.u_textH=this._textureHeight;\r\n\t\t\tshader.u_color=this.data.getColor();\r\n\t\t}\r\n\r\n\t\t__getset(0,__proto,'typeMix',function(){return 0x08;});\r\n\t\tGlowFilterActionGL.tmpTarget=function(scope,sprite,context,x,y){\r\n\t\t\tvar b=scope.getValue(\"bounds\");\r\n\t\t\tvar out=scope.getValue(\"out\");\r\n\t\t\tout.end();\r\n\t\t\tvar tmpTarget=RenderTarget2D.create(b.width,b.height);\r\n\t\t\ttmpTarget.start();\r\n\t\t\tvar color=scope.getValue(\"color\");\r\n\t\t\tif (color){\r\n\t\t\t\ttmpTarget.clear(color[0],color[1],color[2],0);\r\n\t\t\t}\r\n\t\t\tscope.addValue(\"tmpTarget\",tmpTarget);\r\n\t\t}\r\n\r\n\t\tGlowFilterActionGL.startOut=function(scope,sprite,context,x,y){\r\n\t\t\tvar tmpTarget=scope.getValue(\"tmpTarget\");\r\n\t\t\ttmpTarget.end();\r\n\t\t\tvar out=scope.getValue(\"out\");\r\n\t\t\tout.start();\r\n\t\t\tvar color=scope.getValue(\"color\");\r\n\t\t\tif (color){\r\n\t\t\t\tout.clear(color[0],color[1],color[2],0);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tGlowFilterActionGL.recycleTarget=function(scope,sprite,context,x,y){\r\n\t\t\tvar src=scope.getValue(\"src\");\r\n\t\t\tvar tmpTarget=scope.getValue(\"tmpTarget\");\r\n\t\t\ttmpTarget.recycle();\r\n\t\t}\r\n\r\n\t\treturn GlowFilterActionGL;\r\n\t})(FilterActionGL)\r\n\r\n\r\n\t/**\r\n\t*<code>UIEvent</code> 类用来定义UI组件类的事件类型。\r\n\t*/\r\n\t//class laya.ui.UIEvent extends laya.events.Event\r\n\tvar UIEvent=(function(_super){\r\n\t\tfunction UIEvent(){UIEvent.__super.call(this);;\r\n\t\t};\r\n\r\n\t\t__class(UIEvent,'laya.ui.UIEvent',_super);\r\n\t\tUIEvent.SHOW_TIP=\"showtip\";\r\n\t\tUIEvent.HIDE_TIP=\"hidetip\";\r\n\t\treturn UIEvent;\r\n\t})(Event)\r\n\r\n\r\n\t//class laya.webgl.shader.d2.value.Value2D extends laya.webgl.shader.ShaderValue\r\n\tvar Value2D=(function(_super){\r\n\t\tfunction Value2D(mainID,subID){\r\n\t\t\tthis.size=[0,0];\r\n\t\t\tthis.alpha=1.0;\r\n\t\t\t//this.mmat=null;\r\n\t\t\tthis.ALPHA=1.0;\r\n\t\t\t//this.shader=null;\r\n\t\t\t//this.mainID=0;\r\n\t\t\tthis.subID=0;\r\n\t\t\t//this.filters=null;\r\n\t\t\t//this.textureHost=null;\r\n\t\t\t//this.texture=null;\r\n\t\t\t//this.fillStyle=null;\r\n\t\t\t//this.color=null;\r\n\t\t\t//this.strokeStyle=null;\r\n\t\t\t//this.colorAdd=null;\r\n\t\t\t//this.glTexture=null;\r\n\t\t\t//this.u_mmat2=null;\r\n\t\t\t//this._inClassCache=null;\r\n\t\t\tthis._cacheID=0;\r\n\t\t\tValue2D.__super.call(this);\r\n\t\t\tthis.defines=new ShaderDefines2D();\r\n\t\t\tthis.position=Value2D._POSITION;\r\n\t\t\tthis.mainID=mainID;\r\n\t\t\tthis.subID=subID;\r\n\t\t\tthis.textureHost=null;\r\n\t\t\tthis.texture=null;\r\n\t\t\tthis.fillStyle=null;\r\n\t\t\tthis.color=null;\r\n\t\t\tthis.strokeStyle=null;\r\n\t\t\tthis.colorAdd=null;\r\n\t\t\tthis.glTexture=null;\r\n\t\t\tthis.u_mmat2=null;\r\n\t\t\tthis._cacheID=mainID|subID;\r\n\t\t\tthis._inClassCache=Value2D._cache[this._cacheID];\r\n\t\t\tif (mainID>0 && !this._inClassCache){\r\n\t\t\t\tthis._inClassCache=Value2D._cache[this._cacheID]=[];\r\n\t\t\t\tthis._inClassCache._length=0;\r\n\t\t\t}\r\n\t\t\tthis.clear();\r\n\t\t}\r\n\r\n\t\t__class(Value2D,'laya.webgl.shader.d2.value.Value2D',_super);\r\n\t\tvar __proto=Value2D.prototype;\r\n\t\t__proto.setValue=function(value){}\r\n\t\t//throw new Error(\"todo in subclass\");\r\n\t\t__proto.refresh=function(){\r\n\t\t\tvar size=this.size;\r\n\t\t\tsize[0]=RenderState2D.width;\r\n\t\t\tsize[1]=RenderState2D.height;\r\n\t\t\tthis.alpha=this.ALPHA *RenderState2D.worldAlpha;\r\n\t\t\tthis.mmat=RenderState2D.worldMatrix4;\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\t\t__proto._ShaderWithCompile=function(){\r\n\t\t\treturn Shader.withCompile2D(0,this.mainID,this.defines.toNameDic(),this.mainID | this.defines._value,Shader2X.create);\r\n\t\t}\r\n\r\n\t\t__proto._withWorldShaderDefines=function(){\r\n\t\t\tvar defs=RenderState2D.worldShaderDefines;\r\n\t\t\tvar sd=Shader.sharders [this.mainID | this.defines._value | defs.getValue()];\r\n\t\t\tif (!sd){\r\n\t\t\t\tvar def={};\r\n\t\t\t\tvar dic;\r\n\t\t\t\tvar name;\r\n\t\t\t\tdic=this.defines.toNameDic();for (name in dic)def[name]=\"\";\r\n\t\t\t\tdic=defs.toNameDic();for (name in dic)def[name]=\"\";\r\n\t\t\t\tsd=Shader.withCompile2D(0,this.mainID,def,this.mainID | this.defines._value| defs.getValue(),Shader2X.create);\r\n\t\t\t};\r\n\t\t\tvar worldFilters=RenderState2D.worldFilters;\r\n\t\t\tif (!worldFilters)return sd;\r\n\t\t\tvar n=worldFilters.length,f;\r\n\t\t\tfor (var i=0;i < n;i++){\r\n\t\t\t\t((f=worldFilters[i]))&& f.action.setValue(this);\r\n\t\t\t}\r\n\t\t\treturn sd;\r\n\t\t}\r\n\r\n\t\t__proto.upload=function(){\r\n\t\t\tvar renderstate2d=RenderState2D;\r\n\t\t\tthis.alpha=this.ALPHA *renderstate2d.worldAlpha;\r\n\t\t\tif (RenderState2D.worldMatrix4!==RenderState2D.TEMPMAT4_ARRAY)this.defines.add(0x80);\r\n\t\t\tvar sd=renderstate2d.worldShaderDefines?this._withWorldShaderDefines():(Shader.sharders [this.mainID | this.defines._value] || this._ShaderWithCompile());\r\n\t\t\tvar params;\r\n\t\t\tthis.size[0]=renderstate2d.width,this.size[1]=renderstate2d.height;\r\n\t\t\tthis.mmat=renderstate2d.worldMatrix4;\r\n\t\t\tif (BaseShader.activeShader!==sd){\r\n\t\t\t\tif (sd._shaderValueWidth!==renderstate2d.width || sd._shaderValueHeight!==renderstate2d.height){\r\n\t\t\t\t\tsd._shaderValueWidth=renderstate2d.width;\r\n\t\t\t\t\tsd._shaderValueHeight=renderstate2d.height;\r\n\t\t\t\t}\r\n\t\t\t\telse{\r\n\t\t\t\t\tparams=sd._params2dQuick2 || sd._make2dQuick2();\r\n\t\t\t\t}\r\n\t\t\t\tsd.upload(this,params);\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tif (sd._shaderValueWidth!==renderstate2d.width || sd._shaderValueHeight!==renderstate2d.height){\r\n\t\t\t\t\tsd._shaderValueWidth=renderstate2d.width;\r\n\t\t\t\t\tsd._shaderValueHeight=renderstate2d.height;\r\n\t\t\t\t}\r\n\t\t\t\telse{\r\n\t\t\t\t\tparams=(sd._params2dQuick1)|| sd._make2dQuick1();\r\n\t\t\t\t}\r\n\t\t\t\tsd.upload(this,params);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__proto.setFilters=function(value){\r\n\t\t\tthis.filters=value;\r\n\t\t\tif (!value)\r\n\t\t\t\treturn;\r\n\t\t\tvar n=value.length,f;\r\n\t\t\tfor (var i=0;i < n;i++){\r\n\t\t\t\tf=value[i];\r\n\t\t\t\tif (f){\r\n\t\t\t\t\tthis.defines.add(f.type);\r\n\t\t\t\t\tf.action.setValue(this);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__proto.clear=function(){\r\n\t\t\tthis.defines.setValue(this.subID);\r\n\t\t}\r\n\r\n\t\t__proto.release=function(){\r\n\t\t\tthis._inClassCache[this._inClassCache._length++]=this;\r\n\t\t\tthis.fillStyle=null;\r\n\t\t\tthis.strokeStyle=null;\r\n\t\t\tthis.clear();\r\n\t\t}\r\n\r\n\t\tValue2D._initone=function(type,classT){\r\n\t\t\tValue2D._typeClass[type]=classT;\r\n\t\t\tValue2D._cache[type]=[];\r\n\t\t\tValue2D._cache[type]._length=0;\r\n\t\t}\r\n\r\n\t\tValue2D.__init__=function(){\r\n\t\t\tValue2D._POSITION=[2,0x1406,false,4 *CONST3D2D.BYTES_PE,0];\r\n\t\t\tValue2D._TEXCOORD=[2,0x1406,false,4 *CONST3D2D.BYTES_PE,2 *CONST3D2D.BYTES_PE];\r\n\t\t\tValue2D._initone(0x02,Color2dSV);\r\n\t\t\tValue2D._initone(0x04,PrimitiveSV);\r\n\t\t\tValue2D._initone(0x100,FillTextureSV1);\r\n\t\t\tValue2D._initone(0x200,SkinSV);\r\n\t\t\tValue2D._initone(0x01,TextureSV);\r\n\t\t\tValue2D._initone(0x01 | 0x40,TextSV);\r\n\t\t\tValue2D._initone(0x01 | 0x08,TextureSV);\r\n\t\t}\r\n\r\n\t\tValue2D.create=function(mainType,subType){\r\n\t\t\tvar types=Value2D._cache[mainType|subType];\r\n\t\t\tif (types._length)\r\n\t\t\t\treturn types[--types._length];\r\n\t\t\telse\r\n\t\t\treturn new Value2D._typeClass[mainType|subType](subType);\r\n\t\t}\r\n\r\n\t\tValue2D._POSITION=null\r\n\t\tValue2D._TEXCOORD=null\r\n\t\tValue2D._cache=[];\r\n\t\tValue2D._typeClass=[];\r\n\t\tValue2D.TEMPMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];\r\n\t\treturn Value2D;\r\n\t})(ShaderValue)\r\n\r\n\r\n\t//class laya.webgl.canvas.WebGLContext2D extends laya.resource.Context\r\n\tvar WebGLContext2D=(function(_super){\r\n\t\tvar ContextParams;\r\n\t\tfunction WebGLContext2D(c){\r\n\t\t\tthis._x=0;\r\n\t\t\tthis._y=0;\r\n\t\t\tthis._id=++WebGLContext2D._COUNT;\r\n\t\t\t//this._other=null;\r\n\t\t\tthis._path=null;\r\n\t\t\t//this._primitiveValue2D=null;\r\n\t\t\tthis._drawCount=1;\r\n\t\t\tthis._maxNumEle=0;\r\n\t\t\tthis._clear=false;\r\n\t\t\tthis._isMain=false;\r\n\t\t\tthis._atlasResourceChange=0;\r\n\t\t\tthis._submits=[];\r\n\t\t\tthis._curSubmit=null;\r\n\t\t\tthis._ib=null;\r\n\t\t\tthis._vb=null;\r\n\t\t\t//this._curMat=null;\r\n\t\t\tthis._nBlendType=0;\r\n\t\t\t//this._save=null;\r\n\t\t\t//this._targets=null;\r\n\t\t\t//this._renderKey=NaN;\r\n\t\t\tthis._saveMark=null;\r\n\t\t\t//this.sprite=null;\r\n\t\t\tthis.mId=-1;\r\n\t\t\tthis.mHaveKey=false;\r\n\t\t\tthis.mHaveLineKey=false;\r\n\t\t\tthis.mX=0;\r\n\t\t\tthis.mY=0;\r\n\t\t\tWebGLContext2D.__super.call(this);\r\n\t\t\tthis._width=99999999;\r\n\t\t\tthis._height=99999999;\r\n\t\t\tthis._clipRect=WebGLContext2D.MAXCLIPRECT;\r\n\t\t\tthis._shader2D=new Shader2D();\r\n\t\t\tthis.mOutPoint\r\n\t\t\tthis._canvas=c;\r\n\t\t\tthis._curMat=Matrix.create();\r\n\t\t\tif (Render.isFlash){\r\n\t\t\t\tthis._ib=IndexBuffer2D.create(0x88E4);\r\n\t\t\t\tGlUtils.fillIBQuadrangle(this._ib,16);\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\tthis._ib=IndexBuffer2D.QuadrangleIB;\r\n\t\t\tthis._vb=VertexBuffer2D.create(-1);\r\n\t\t\tthis._other=ContextParams.DEFAULT;\r\n\t\t\tthis._save=[SaveMark.Create(this)];\r\n\t\t\tthis._save.length=10;\r\n\t\t\tthis.clear();\r\n\t\t}\r\n\r\n\t\t__class(WebGLContext2D,'laya.webgl.canvas.WebGLContext2D',_super);\r\n\t\tvar __proto=WebGLContext2D.prototype;\r\n\t\t__proto.setIsMainContext=function(){\r\n\t\t\tthis._isMain=true;\r\n\t\t}\r\n\r\n\t\t__proto.clearBG=function(r,g,b,a){\r\n\t\t\tvar gl=WebGL.mainContext;\r\n\t\t\tgl.clearColor(r,g,b,a);\r\n\t\t\tgl.clear(0x00004000 | 0x00000100);\r\n\t\t}\r\n\r\n\t\t__proto._getSubmits=function(){\r\n\t\t\treturn this._submits;\r\n\t\t}\r\n\r\n\t\t__proto.destroy=function(){\r\n\t\t\tthis._curMat && this._curMat.destroy();\r\n\t\t\tthis._targets && this._targets.destroy();\r\n\t\t\tthis._vb && this._vb.releaseResource();\r\n\t\t\tthis._ib && (this._ib !=IndexBuffer2D.QuadrangleIB)&& this._ib.releaseResource();\r\n\t\t}\r\n\r\n\t\t__proto.clear=function(){\r\n\t\t\tthis._vb.clear();\r\n\t\t\tthis._targets && (this._targets.repaint=true);\r\n\t\t\tthis._other=ContextParams.DEFAULT;\r\n\t\t\tthis._clear=true;\r\n\t\t\tthis._repaint=false;\r\n\t\t\tthis._drawCount=1;\r\n\t\t\tthis._renderKey=0;\r\n\t\t\tthis._other.lineWidth=this._shader2D.ALPHA=1.0;\r\n\t\t\tthis._nBlendType=0;\r\n\t\t\tthis._clipRect=WebGLContext2D.MAXCLIPRECT;\r\n\t\t\tthis._curSubmit=Submit.RENDERBASE;\r\n\t\t\tthis._shader2D.glTexture=null;\r\n\t\t\tthis._shader2D.fillStyle=this._shader2D.strokeStyle=DrawStyle.DEFAULT;\r\n\t\t\tfor (var i=0,n=this._submits._length;i < n;i++)\r\n\t\t\tthis._submits[i].releaseRender();\r\n\t\t\tthis._submits._length=0;\r\n\t\t\tthis._curMat.identity();\r\n\t\t\tthis._other.clear();\r\n\t\t\tthis._saveMark=this._save[0];\r\n\t\t\tthis._save._length=1;\r\n\t\t}\r\n\r\n\t\t__proto.size=function(w,h){\r\n\t\t\tthis._width=w;\r\n\t\t\tthis._height=h;\r\n\t\t\tthis._targets && (this._targets.size(w,h));\r\n\t\t}\r\n\r\n\t\t__proto._getTransformMatrix=function(){\r\n\t\t\treturn this._curMat;\r\n\t\t}\r\n\r\n\t\t__proto.translate=function(x,y){\r\n\t\t\tif (x!==0 || y!==0){\r\n\t\t\t\tSaveTranslate.save(this);\r\n\t\t\t\tif (this._curMat.bTransform){\r\n\t\t\t\t\tSaveTransform.save(this);\r\n\t\t\t\t\tthis._curMat.transformPoint(Point.TEMP.setTo(x,y));\r\n\t\t\t\t\tx=Point.TEMP.x;\r\n\t\t\t\t\ty=Point.TEMP.y;\r\n\t\t\t\t}\r\n\t\t\t\tthis._x+=x;\r\n\t\t\t\tthis._y+=y;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__proto.save=function(){\r\n\t\t\tthis._save[this._save._length++]=SaveMark.Create(this);\r\n\t\t}\r\n\r\n\t\t__proto.restore=function(){\r\n\t\t\tvar sz=this._save._length;\r\n\t\t\tif (sz < 1)\r\n\t\t\t\treturn;\r\n\t\t\tfor (var i=sz-1;i >=0;i--){\r\n\t\t\t\tvar o=this._save[i];\r\n\t\t\t\to.restore(this);\r\n\t\t\t\tif (o.isSaveMark()){\r\n\t\t\t\t\tthis._save._length=i;\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__proto.measureText=function(text){\r\n\t\t\treturn RunDriver.measureText(text,this._other.font.toString());\r\n\t\t}\r\n\r\n\t\t__proto._fillText=function(txt,words,x,y,fontStr,color,textAlign){\r\n\t\t\tvar shader=this._shader2D;\r\n\t\t\tvar curShader=this._curSubmit.shaderValue;\r\n\t\t\tvar font=fontStr ? FontInContext.create(fontStr):this._other.font;\r\n\t\t\tif (AtlasResourceManager.enabled){\r\n\t\t\t\tif (shader.ALPHA!==curShader.ALPHA)\r\n\t\t\t\t\tshader.glTexture=null;\r\n\t\t\t\tDrawText.drawText(this,txt,words,this._curMat,font,textAlign || this._other.textAlign,color,null,-1,x,y);\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tvar preDef=this._shader2D.defines.getValue();\r\n\t\t\t\tvar colorAdd=color ? Color.create(color)._color :shader.colorAdd;\r\n\t\t\t\tif (shader.ALPHA!==curShader.ALPHA || colorAdd!==shader.colorAdd || curShader.colorAdd!==shader.colorAdd){\r\n\t\t\t\t\tshader.glTexture=null;\r\n\t\t\t\t\tshader.colorAdd=colorAdd;\r\n\t\t\t\t}\r\n\t\t\t\tDrawText.drawText(this,txt,words,this._curMat,font,textAlign || this._other.textAlign,color,null,-1,x,y);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//shader.defines.setValue(preDef);\r\n\t\t__proto.fillWords=function(words,x,y,fontStr,color){\r\n\t\t\twords.length > 0 && this._fillText(null,words,x,y,fontStr,color,null);\r\n\t\t}\r\n\r\n\t\t__proto.fillText=function(txt,x,y,fontStr,color,textAlign){\r\n\t\t\ttxt.length > 0 && this._fillText(txt,null,x,y,fontStr,color,textAlign);\r\n\t\t}\r\n\r\n\t\t__proto.strokeText=function(txt,x,y,fontStr,color,lineWidth,textAlign){\r\n\t\t\tif (txt.length===0)\r\n\t\t\t\treturn;\r\n\t\t\tvar shader=this._shader2D;\r\n\t\t\tvar curShader=this._curSubmit.shaderValue;\r\n\t\t\tvar font=fontStr ? (WebGLContext2D._fontTemp.setFont(fontStr),WebGLContext2D._fontTemp):this._other.font;\r\n\t\t\tif (AtlasResourceManager.enabled){\r\n\t\t\t\tif (shader.ALPHA!==curShader.ALPHA){\r\n\t\t\t\t\tshader.glTexture=null;\r\n\t\t\t\t}\r\n\t\t\t\tDrawText.drawText(this,txt,null,this._curMat,font,textAlign || this._other.textAlign,null,color,lineWidth || 1,x,y);\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tvar preDef=this._shader2D.defines.getValue();\r\n\t\t\t\tvar colorAdd=color ? Color.create(color)._color :shader.colorAdd;\r\n\t\t\t\tif (shader.ALPHA!==curShader.ALPHA || colorAdd!==shader.colorAdd || curShader.colorAdd!==shader.colorAdd){\r\n\t\t\t\t\tshader.glTexture=null;\r\n\t\t\t\t\tshader.colorAdd=colorAdd;\r\n\t\t\t\t}\r\n\t\t\t\tDrawText.drawText(this,txt,null,this._curMat,font,textAlign || this._other.textAlign,null,color,lineWidth || 1,x,y);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//shader.defines.setValue(preDef);\r\n\t\t__proto.fillBorderText=function(txt,x,y,fontStr,fillColor,borderColor,lineWidth,textAlign){\r\n\t\t\tif (txt.length===0)\r\n\t\t\t\treturn;\r\n\t\t\tif (!AtlasResourceManager.enabled){\r\n\t\t\t\tthis.strokeText(txt,x,y,fontStr,borderColor,lineWidth,textAlign);\r\n\t\t\t\tthis.fillText(txt,x,y,fontStr,fillColor,textAlign);\r\n\t\t\t\treturn;\r\n\t\t\t};\r\n\t\t\tvar shader=this._shader2D;\r\n\t\t\tvar curShader=this._curSubmit.shaderValue;\r\n\t\t\tif (shader.ALPHA!==curShader.ALPHA)\r\n\t\t\t\tshader.glTexture=null;\r\n\t\t\tvar font=fontStr ? (WebGLContext2D._fontTemp.setFont(fontStr),WebGLContext2D._fontTemp):this._other.font;\r\n\t\t\tDrawText.drawText(this,txt,null,this._curMat,font,textAlign || this._other.textAlign,fillColor,borderColor,lineWidth || 1,x,y);\r\n\t\t}\r\n\r\n\t\t__proto.fillRect=function(x,y,width,height,fillStyle){\r\n\t\t\tvar vb=this._vb;\r\n\t\t\tif (GlUtils.fillRectImgVb(vb,this._clipRect,x,y,width,height,Texture.DEF_UV,this._curMat,this._x,this._y,0,0)){\r\n\t\t\t\tthis._renderKey=0;\r\n\t\t\t\tvar pre=this._shader2D.fillStyle;\r\n\t\t\t\tfillStyle && (this._shader2D.fillStyle=DrawStyle.create(fillStyle));\r\n\t\t\t\tvar shader=this._shader2D;\r\n\t\t\t\tvar curShader=this._curSubmit.shaderValue;\r\n\t\t\t\tif (shader.fillStyle!==curShader.fillStyle || shader.ALPHA!==curShader.ALPHA){\r\n\t\t\t\t\tshader.glTexture=null;\r\n\t\t\t\t\tvar submit=this._curSubmit=Submit.create(this,this._ib,vb,((vb._byteLength-16 *4)/ 32)*3,Value2D.create(0x02,0));\r\n\t\t\t\t\tsubmit.shaderValue.color=shader.fillStyle._color._color;\r\n\t\t\t\t\tsubmit.shaderValue.ALPHA=shader.ALPHA;\r\n\t\t\t\t\tthis._submits[this._submits._length++]=submit;\r\n\t\t\t\t}\r\n\t\t\t\tthis._curSubmit._numEle+=6;\r\n\t\t\t\tthis._shader2D.fillStyle=pre;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__proto.fillTexture=function(texture,x,y,width,height,type,offset,other){\r\n\t\t\tvar vb=this._vb;\r\n\t\t\tvar w=texture.bitmap.width,h=texture.bitmap.height,uv=texture.uv;\r\n\t\t\tvar ox=offset.x % texture.width,oy=offset.y % texture.height;\r\n\t\t\tif (w!=other.w||h!=other.h){\r\n\t\t\t\tif (!other.w && !other.h){\r\n\t\t\t\t\tother.oy=other.ox=0;\r\n\t\t\t\t\tswitch(type){\r\n\t\t\t\t\t\tcase \"repeat\":\r\n\t\t\t\t\t\t\tother.width=width;\r\n\t\t\t\t\t\t\tother.height=height;\r\n\t\t\t\t\t\t\tbreak ;\r\n\t\t\t\t\t\tcase \"repeat-x\":\r\n\t\t\t\t\t\t\tother.width=width;\r\n\t\t\t\t\t\t\tif (oy < 0){\r\n\t\t\t\t\t\t\t\tif (texture.height+oy > height){\r\n\t\t\t\t\t\t\t\t\tother.height=height;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\t\t\tother.height=texture.height+oy;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\t\tother.oy=oy;\r\n\t\t\t\t\t\t\t\tif (texture.height+oy > height){\r\n\t\t\t\t\t\t\t\t\tother.height=height-oy;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\t\t\tother.height=texture.height;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tbreak ;\r\n\t\t\t\t\t\tcase \"repeat-y\":\r\n\t\t\t\t\t\t\tif (ox < 0){\r\n\t\t\t\t\t\t\t\tif (texture.width+ox > width){\r\n\t\t\t\t\t\t\t\t\tother.width=width;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\t\t\tother.width=texture.width+ox;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\t\tother.ox=ox;\r\n\t\t\t\t\t\t\t\tif (texture.width+ox > width){\r\n\t\t\t\t\t\t\t\t\tother.width=width-ox;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\t\t\tother.width=texture.width;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tother.height=height;\r\n\t\t\t\t\t\t\tbreak ;\r\n\t\t\t\t\t\tdefault :\r\n\t\t\t\t\t\t\tother.width=width;\r\n\t\t\t\t\t\t\tother.height=height;\r\n\t\t\t\t\t\t\tbreak ;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tother.w=w;\r\n\t\t\t\tother.h=h;\r\n\t\t\t\tother.uv=[0,0,other.width / w,0,other.width / w,other.height / h,0,other.height / h];\r\n\t\t\t}\r\n\t\t\tx+=other.ox;\r\n\t\t\ty+=other.oy;\r\n\t\t\tox-=other.ox;\r\n\t\t\toy-=other.oy;\r\n\t\t\tif (GlUtils.fillRectImgVb(vb,this._clipRect,x,y,other.width,other.height,other.uv,this._curMat,this._x,this._y,0,0)){\r\n\t\t\t\tthis._renderKey=0;\r\n\t\t\t\tvar submit=SubmitTexture.create(this,this._ib,vb,((vb._byteLength-16 *4)/ 32)*3,Value2D.create(0x100,0));\r\n\t\t\t\tthis._submits[this._submits._length++]=submit;\r\n\t\t\t\tvar shaderValue=submit.shaderValue;\r\n\t\t\t\tshaderValue.textureHost=texture;\r\n\t\t\t\tvar tTextureX=uv[0] *w;\r\n\t\t\t\tvar tTextureY=uv[1] *h;\r\n\t\t\t\tvar tTextureW=(uv[2]-uv[0])*w;\r\n\t\t\t\tvar tTextureH=(uv[5]-uv[3])*h;\r\n\t\t\t\tvar tx=-ox / w;\r\n\t\t\t\tvar ty=-oy/ h;\r\n\t\t\t\tshaderValue.u_TexRange[0]=tTextureX / w;\r\n\t\t\t\tshaderValue.u_TexRange[1]=tTextureW / w;\r\n\t\t\t\tshaderValue.u_TexRange[2]=tTextureY / h;\r\n\t\t\t\tshaderValue.u_TexRange[3]=tTextureH / h;\r\n\t\t\t\tshaderValue.u_offset[0]=tx;\r\n\t\t\t\tshaderValue.u_offset[1]=ty;\r\n\t\t\t\tif (AtlasResourceManager.enabled && !this._isMain)\r\n\t\t\t\t\tsubmit.addTexture(texture,(vb._byteLength >> 2)-16);\r\n\t\t\t\tthis._curSubmit=submit;\r\n\t\t\t\tsubmit._renderType=10017;\r\n\t\t\t\tsubmit._numEle+=6;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__proto.setShader=function(shader){\r\n\t\t\tSaveBase.save(this,0x80000,this._shader2D,true);\r\n\t\t\tthis._shader2D.shader=shader;\r\n\t\t}\r\n\r\n\t\t__proto.setFilters=function(value){\r\n\t\t\tSaveBase.save(this,0x100000,this._shader2D,true);\r\n\t\t\tthis._shader2D.filters=value;\r\n\t\t\tthis._curSubmit=Submit.RENDERBASE;\r\n\t\t\tthis._renderKey=0;\r\n\t\t\tthis._drawCount++;\r\n\t\t}\r\n\r\n\t\t__proto.drawTexture=function(tex,x,y,width,height,tx,ty){\r\n\t\t\tthis._drawTextureM(tex,x,y,width,height,tx,ty,null,1);\r\n\t\t}\r\n\r\n\t\t__proto.addTextureVb=function(invb,x,y){\r\n\t\t\tvar finalVB=this._curSubmit._vb || this._vb;\r\n\t\t\tvar vpos=(finalVB._byteLength >> 2);\r\n\t\t\tfinalVB.byteLength=((vpos+16)<< 2);\r\n\t\t\tvar vbdata=finalVB.getFloat32Array();\r\n\t\t\tfor (var i=0,ci=0;i < 16;i+=4){\r\n\t\t\t\tvbdata[vpos++]=invb[i]+x;\r\n\t\t\t\tvbdata[vpos++]=invb[i+1]+y;\r\n\t\t\t\tvbdata[vpos++]=invb[i+2];\r\n\t\t\t\tvbdata[vpos++]=invb[i+3];\r\n\t\t\t}\r\n\t\t\tthis._curSubmit._numEle+=6;\r\n\t\t\tthis._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle);\r\n\t\t\tfinalVB._upload=true;\r\n\t\t}\r\n\r\n\t\t__proto.willDrawTexture=function(tex,alpha){\r\n\t\t\tif (!(tex.loaded && tex.bitmap && tex.source)){\r\n\t\t\t\tif (this.sprite){\r\n\t\t\t\t\tLaya.timer.callLater(this,this._repaintSprite);\r\n\t\t\t\t}\r\n\t\t\t\treturn 0;\r\n\t\t\t};\r\n\t\t\tvar webGLImg=tex.bitmap;\r\n\t\t\tvar rid=webGLImg.id+this._shader2D.ALPHA*alpha+10016;\r\n\t\t\tif (rid==this._renderKey)return rid;\r\n\t\t\tvar shader=this._shader2D;\r\n\t\t\tvar preAlpha=shader.ALPHA;\r\n\t\t\tvar curShader=this._curSubmit.shaderValue;\r\n\t\t\tshader.ALPHA *=alpha;\r\n\t\t\tthis._renderKey=rid;\r\n\t\t\tthis._drawCount++;\r\n\t\t\tshader.glTexture=webGLImg;\r\n\t\t\tvar vb=this._vb;\r\n\t\t\tvar submit=null;\r\n\t\t\tvar vbSize=(vb._byteLength / 32)*3;\r\n\t\t\tsubmit=SubmitTexture.create(this,this._ib,vb,vbSize,Value2D.create(0x01,0));\r\n\t\t\tthis._submits[this._submits._length++]=submit;\r\n\t\t\tsubmit.shaderValue.textureHost=tex;\r\n\t\t\tsubmit._renderType=10016;\r\n\t\t\tsubmit._preIsSameTextureShader=this._curSubmit._renderType===10016 && shader.ALPHA===curShader.ALPHA;\r\n\t\t\tthis._curSubmit=submit;\r\n\t\t\tshader.ALPHA=preAlpha;\r\n\t\t\treturn rid;\r\n\t\t}\r\n\r\n\t\t__proto.drawTextures=function(tex,pos,tx,ty){\r\n\t\t\tif (!(tex.loaded && tex.bitmap && tex.source)){\r\n\t\t\t\tthis.sprite && Laya.timer.callLater(this,this._repaintSprite);\r\n\t\t\t\treturn;\r\n\t\t\t};\r\n\t\t\tvar pre=this._clipRect;\r\n\t\t\tthis._clipRect=WebGLContext2D.MAXCLIPRECT;\r\n\t\t\tif (!this._drawTextureM(tex,pos[0],pos[1],tex.width,tex.height,tx,ty,null,1)){\r\n\t\t\t\talert(\"drawTextures err\");\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis._clipRect=pre;\r\n\t\t\tStat.drawCall+=pos.length / 2;\r\n\t\t\tif (pos.length < 4)\r\n\t\t\t\treturn;\r\n\t\t\tvar finalVB=this._curSubmit._vb || this._vb;\r\n\t\t\tvar sx=this._curMat.a,sy=this._curMat.d;\r\n\t\t\tfor (var i=2,sz=pos.length;i < sz;i+=2){\r\n\t\t\t\tGlUtils.copyPreImgVb(finalVB,(pos[i]-pos[i-2])*sx,(pos[i+1]-pos[i-1])*sy);\r\n\t\t\t\tthis._curSubmit._numEle+=6;\r\n\t\t\t}\r\n\t\t\tthis._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle);\r\n\t\t}\r\n\r\n\t\t__proto._drawTextureM=function(tex,x,y,width,height,tx,ty,m,alpha){\r\n\t\t\tif (!(tex.loaded && tex.bitmap && tex.source)){\r\n\t\t\t\tif (this.sprite){\r\n\t\t\t\t\tLaya.timer.callLater(this,this._repaintSprite);\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t};\r\n\t\t\tvar finalVB=this._curSubmit._vb || this._vb;\r\n\t\t\tvar webGLImg=tex.bitmap;\r\n\t\t\tx+=tx;\r\n\t\t\ty+=ty;\r\n\t\t\tthis._drawCount++;\r\n\t\t\tvar rid=webGLImg.id+this._shader2D.ALPHA *alpha+10016;\r\n\t\t\tif (rid!=this._renderKey){\r\n\t\t\t\tthis._renderKey=rid;\r\n\t\t\t\tvar curShader=this._curSubmit.shaderValue;\r\n\t\t\t\tvar shader=this._shader2D;\r\n\t\t\t\tvar alphaBack=shader.ALPHA;\r\n\t\t\t\tshader.ALPHA *=alpha;\r\n\t\t\t\tshader.glTexture=webGLImg;\r\n\t\t\t\tvar vb=this._vb;\r\n\t\t\t\tvar submit=null;\r\n\t\t\t\tvar vbSize=(vb._byteLength / 32)*3;\r\n\t\t\t\tsubmit=SubmitTexture.create(this,this._ib,vb,vbSize,Value2D.create(0x01,0));\r\n\t\t\t\tthis._submits[this._submits._length++]=submit;\r\n\t\t\t\tsubmit.shaderValue.textureHost=tex;\r\n\t\t\t\tsubmit._renderType=10016;\r\n\t\t\t\tsubmit._preIsSameTextureShader=this._curSubmit._renderType===10016 && shader.ALPHA===curShader.ALPHA;\r\n\t\t\t\tthis._curSubmit=submit;\r\n\t\t\t\tfinalVB=this._curSubmit._vb || this._vb;\r\n\t\t\t\tshader.ALPHA=alphaBack;\r\n\t\t\t}\r\n\t\t\tif (GlUtils.fillRectImgVb(finalVB,this._clipRect,x,y,width || tex.width,height || tex.height,tex.uv,m || this._curMat,this._x,this._y,0,0)){\r\n\t\t\t\tif (AtlasResourceManager.enabled && !this._isMain)\r\n\t\t\t\t\t(this._curSubmit).addTexture(tex,(finalVB._byteLength >> 2)-16);\r\n\t\t\t\tthis._curSubmit._numEle+=6;\r\n\t\t\t\tthis._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle);\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\t__proto._repaintSprite=function(){\r\n\t\t\tthis.sprite.repaint();\r\n\t\t}\r\n\r\n\t\t//}\r\n\t\t__proto._drawText=function(tex,x,y,width,height,m,tx,ty,dx,dy){\r\n\t\t\tvar webGLImg=tex.bitmap;\r\n\t\t\tthis._drawCount++;\r\n\t\t\tvar rid=webGLImg.id+this._shader2D.ALPHA+10016;\r\n\t\t\tif (rid!=this._renderKey){\r\n\t\t\t\tthis._renderKey=rid;\r\n\t\t\t\tvar curShader=this._curSubmit.shaderValue;\r\n\t\t\t\tvar shader=this._shader2D;\r\n\t\t\t\tshader.glTexture=webGLImg;\r\n\t\t\t\tvar vb=this._vb;\r\n\t\t\t\tvar submit=null;\r\n\t\t\t\tvar submitID=NaN;\r\n\t\t\t\tvar vbSize=(vb._byteLength / 32)*3;\r\n\t\t\t\tif (AtlasResourceManager.enabled){\r\n\t\t\t\t\tsubmit=SubmitTexture.create(this,this._ib,vb,vbSize,Value2D.create(0x01,0));\r\n\t\t\t\t}\r\n\t\t\t\telse{\r\n\t\t\t\t\tsubmit=SubmitTexture.create(this,this._ib,vb,vbSize,TextSV.create());\r\n\t\t\t\t}\r\n\t\t\t\tsubmit._preIsSameTextureShader=this._curSubmit._renderType===10016 && shader.ALPHA===curShader.ALPHA;\r\n\t\t\t\tthis._submits[this._submits._length++]=submit;\r\n\t\t\t\tsubmit.shaderValue.textureHost=tex;\r\n\t\t\t\tsubmit._renderType=10016;\r\n\t\t\t\tthis._curSubmit=submit;\r\n\t\t\t}\r\n\t\t\ttex.active();\r\n\t\t\tvar finalVB=this._curSubmit._vb || this._vb;\r\n\t\t\tif (GlUtils.fillRectImgVb(finalVB,this._clipRect,x+tx,y+ty,width || tex.width,height || tex.height,tex.uv,m || this._curMat,this._x,this._y,dx,dy,true)){\r\n\t\t\t\tif (AtlasResourceManager.enabled && !this._isMain){\r\n\t\t\t\t\t(this._curSubmit).addTexture(tex,(finalVB._byteLength >> 2)-16);\r\n\t\t\t\t}\r\n\t\t\t\tthis._curSubmit._numEle+=6;\r\n\t\t\t\tthis._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__proto.drawTextureWithTransform=function(tex,x,y,width,height,transform,tx,ty,alpha){\r\n\t\t\tvar curMat=this._curMat;\r\n\t\t\t(tx!==0 || ty!==0)&& (this._x=tx *curMat.a+ty *curMat.c,this._y=ty *curMat.d+tx *curMat.b);\r\n\t\t\tif (transform && curMat.bTransform){\r\n\t\t\t\tMatrix.mul(transform,curMat,WebGLContext2D._tmpMatrix);\r\n\t\t\t\ttransform=WebGLContext2D._tmpMatrix;\r\n\t\t\t\ttransform._checkTransform();\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tthis._x+=curMat.tx;\r\n\t\t\t\tthis._y+=curMat.ty;\r\n\t\t\t}\r\n\t\t\tthis._drawTextureM(tex,x,y,width,height,0,0,transform,alpha);\r\n\t\t\tthis._x=this._y=0;\r\n\t\t}\r\n\r\n\t\t__proto.fillQuadrangle=function(tex,x,y,point4,m){\r\n\t\t\tvar submit=this._curSubmit;\r\n\t\t\tvar vb=this._vb;\r\n\t\t\tvar shader=this._shader2D;\r\n\t\t\tvar curShader=submit.shaderValue;\r\n\t\t\tthis._renderKey=0;\r\n\t\t\tif (tex.bitmap){\r\n\t\t\t\tvar t_tex=tex.bitmap;\r\n\t\t\t\tif (shader.glTexture !=t_tex || shader.ALPHA!==curShader.ALPHA){\r\n\t\t\t\t\tshader.glTexture=t_tex;\r\n\t\t\t\t\tsubmit=this._curSubmit=Submit.create(this,this._ib,vb,((vb._byteLength)/ 32)*3,Value2D.create(0x01,0));\r\n\t\t\t\t\tsubmit.shaderValue.glTexture=t_tex;\r\n\t\t\t\t\tthis._submits[this._submits._length++]=submit;\r\n\t\t\t\t}\r\n\t\t\t\tGlUtils.fillQuadrangleImgVb(vb,x,y,point4,tex.uv,m || this._curMat,this._x,this._y);\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tif (!submit.shaderValue.fillStyle || !submit.shaderValue.fillStyle.equal(tex)|| shader.ALPHA!==curShader.ALPHA){\r\n\t\t\t\t\tshader.glTexture=null;\r\n\t\t\t\t\tsubmit=this._curSubmit=Submit.create(this,this._ib,vb,((vb._byteLength)/ 32)*3,Value2D.create(0x02,0));\r\n\t\t\t\t\tsubmit.shaderValue.defines.add(0x02);\r\n\t\t\t\t\tsubmit.shaderValue.fillStyle=DrawStyle.create(tex);\r\n\t\t\t\t\tthis._submits[this._submits._length++]=submit;\r\n\t\t\t\t}\r\n\t\t\t\tGlUtils.fillQuadrangleImgVb(vb,x,y,point4,Texture.DEF_UV,m || this._curMat,this._x,this._y);\r\n\t\t\t}\r\n\t\t\tsubmit._numEle+=6;\r\n\t\t}\r\n\r\n\t\t__proto.drawTexture2=function(x,y,pivotX,pivotY,transform,alpha,blendMode,args){\r\n\t\t\tvar curMat=this._curMat;\r\n\t\t\tthis._x=x *curMat.a+y *curMat.c;\r\n\t\t\tthis._y=y *curMat.d+x *curMat.b;\r\n\t\t\tif (transform){\r\n\t\t\t\tif (curMat.bTransform || transform.bTransform){\r\n\t\t\t\t\tMatrix.mul(transform,curMat,WebGLContext2D._tmpMatrix);\r\n\t\t\t\t\ttransform=WebGLContext2D._tmpMatrix;\r\n\t\t\t\t}\r\n\t\t\t\telse{\r\n\t\t\t\t\tthis._x+=transform.tx+curMat.tx;\r\n\t\t\t\t\tthis._y+=transform.ty+curMat.ty;\r\n\t\t\t\t\ttransform=Matrix.EMPTY;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (alpha===1 && !blendMode)\r\n\t\t\t\tthis._drawTextureM(args[0],args[1]-pivotX,args[2]-pivotY,args[3],args[4],0,0,transform,1);\r\n\t\t\telse{\r\n\t\t\t\tvar preAlpha=this._shader2D.ALPHA;\r\n\t\t\t\tvar preblendType=this._nBlendType;\r\n\t\t\t\tthis._shader2D.ALPHA=alpha;\r\n\t\t\t\tblendMode && (this._nBlendType=BlendMode.TOINT(blendMode));\r\n\t\t\t\tthis._drawTextureM(args[0],args[1]-pivotX,args[2]-pivotY,args[3],args[4],0,0,transform,1);\r\n\t\t\t\tthis._shader2D.ALPHA=preAlpha;\r\n\t\t\t\tthis._nBlendType=preblendType;\r\n\t\t\t}\r\n\t\t\tthis._x=this._y=0;\r\n\t\t}\r\n\r\n\t\t__proto.drawCanvas=function(canvas,x,y,width,height){\r\n\t\t\tvar src=canvas.context;\r\n\t\t\tthis._renderKey=0;\r\n\t\t\tif (src._targets){\r\n\t\t\t\tthis._submits[this._submits._length++]=SubmitCanvas.create(src,0,null);\r\n\t\t\t\tthis._curSubmit=Submit.RENDERBASE;\r\n\t\t\t\tsrc._targets.drawTo(this,x,y,width,height);\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tvar submit=this._submits[this._submits._length++]=SubmitCanvas.create(src,this._shader2D.ALPHA,this._shader2D.filters);\r\n\t\t\t\tvar sx=width / canvas.width;\r\n\t\t\t\tvar sy=height / canvas.height;\r\n\t\t\t\tvar mat=submit._matrix;\r\n\t\t\t\tthis._curMat.copyTo(mat);\r\n\t\t\t\tsx !=1 && sy !=1 && mat.scale(sx,sy);\r\n\t\t\t\tvar tx=mat.tx,ty=mat.ty;\r\n\t\t\t\tmat.tx=mat.ty=0;\r\n\t\t\t\tmat.transformPoint(Point.TEMP.setTo(x,y));\r\n\t\t\t\tmat.translate(Point.TEMP.x+tx,Point.TEMP.y+ty);\r\n\t\t\t\tthis._curSubmit=Submit.RENDERBASE;\r\n\t\t\t}\r\n\t\t\tif (Config.showCanvasMark){\r\n\t\t\t\tthis.save();\r\n\t\t\t\tthis.lineWidth=4;\r\n\t\t\t\tthis.strokeStyle=src._targets ? \"yellow\" :\"green\";\r\n\t\t\t\tthis.strokeRect(x-1,y-1,width+2,height+2,1);\r\n\t\t\t\tthis.strokeRect(x,y,width,height,1);\r\n\t\t\t\tthis.restore();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__proto.drawTarget=function(scope,x,y,width,height,m,proName,shaderValue,uv,blend){\r\n\t\t\t(blend===void 0)&& (blend=-1);\r\n\t\t\tvar vb=this._vb;\r\n\t\t\tif (GlUtils.fillRectImgVb(vb,this._clipRect,x,y,width,height,uv || Texture.DEF_UV,m || this._curMat,this._x,this._y,0,0)){\r\n\t\t\t\tthis._renderKey=0;\r\n\t\t\t\tvar shader=this._shader2D;\r\n\t\t\t\tshader.glTexture=null;\r\n\t\t\t\tvar curShader=this._curSubmit.shaderValue;\r\n\t\t\t\tvar submit=this._curSubmit=SubmitTarget.create(this,this._ib,vb,((vb._byteLength-16 *4)/ 32)*3,shaderValue,proName);\r\n\t\t\t\tif (blend==-1){\r\n\t\t\t\t\tsubmit.blendType=this._nBlendType;\r\n\t\t\t\t}\r\n\t\t\t\telse{\r\n\t\t\t\t\tsubmit.blendType=blend;\r\n\t\t\t\t}\r\n\t\t\t\tsubmit.scope=scope;\r\n\t\t\t\tthis._submits[this._submits._length++]=submit;\r\n\t\t\t\tthis._curSubmit._numEle+=6;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__proto.transform=function(a,b,c,d,tx,ty){\r\n\t\t\tSaveTransform.save(this);\r\n\t\t\tMatrix.mul(Matrix.TEMP.setTo(a,b,c,d,tx,ty),this._curMat,this._curMat);\r\n\t\t\tthis._curMat._checkTransform();\r\n\t\t}\r\n\r\n\t\t__proto.setTransformByMatrix=function(value){\r\n\t\t\tvalue.copyTo(this._curMat);\r\n\t\t}\r\n\r\n\t\t__proto.transformByMatrix=function(value){\r\n\t\t\tSaveTransform.save(this);\r\n\t\t\tMatrix.mul(value,this._curMat,this._curMat);\r\n\t\t\tthis._curMat._checkTransform();\r\n\t\t}\r\n\r\n\t\t__proto.rotate=function(angle){\r\n\t\t\tSaveTransform.save(this);\r\n\t\t\tthis._curMat.rotateEx(angle);\r\n\t\t}\r\n\r\n\t\t__proto.scale=function(scaleX,scaleY){\r\n\t\t\tSaveTransform.save(this);\r\n\t\t\tthis._curMat.scaleEx(scaleX,scaleY);\r\n\t\t}\r\n\r\n\t\t__proto.clipRect=function(x,y,width,height){\r\n\t\t\twidth *=this._curMat.a;\r\n\t\t\theight *=this._curMat.d;\r\n\t\t\tvar p=Point.TEMP;\r\n\t\t\tthis._curMat.transformPoint(p.setTo(x,y));\r\n\t\t\tthis._renderKey=0;\r\n\t\t\tvar submit=this._curSubmit=SubmitScissor.create(this);\r\n\t\t\tthis._submits[this._submits._length++]=submit;\r\n\t\t\tsubmit.submitIndex=this._submits._length;\r\n\t\t\tsubmit.submitLength=9999999;\r\n\t\t\tSaveClipRect.save(this,submit);\r\n\t\t\tvar clip=this._clipRect;\r\n\t\t\tvar x1=clip.x,y1=clip.y;\r\n\t\t\tvar r=p.x+width,b=p.y+height;\r\n\t\t\tx1 < p.x && (clip.x=p.x);\r\n\t\t\ty1 < p.y && (clip.y=p.y);\r\n\t\t\tclip.width=Math.min(r,x1+clip.width)-clip.x;\r\n\t\t\tclip.height=Math.min(b,y1+clip.height)-clip.y;\r\n\t\t\tthis._shader2D.glTexture=null;\r\n\t\t\tsubmit.clipRect.copyFrom(clip);\r\n\t\t\tthis._curSubmit=Submit.RENDERBASE;\r\n\t\t}\r\n\r\n\t\t__proto.setIBVB=function(x,y,ib,vb,numElement,mat,shader,shaderValues,startIndex,offset,type){\r\n\t\t\t(startIndex===void 0)&& (startIndex=0);\r\n\t\t\t(offset===void 0)&& (offset=0);\r\n\t\t\t(type===void 0)&& (type=0);\r\n\t\t\tif (ib===null){\r\n\t\t\t\tif (!Render.isFlash){\r\n\t\t\t\t\tib=this._ib;\r\n\t\t\t\t}\r\n\t\t\t\telse{\r\n\t\t\t\t\tvar falshVB=vb;\r\n\t\t\t\t\t(falshVB._selfIB)|| (falshVB._selfIB=IndexBuffer2D.create(0x88E4));\r\n\t\t\t\t\tfalshVB._selfIB.clear();\r\n\t\t\t\t\tib=falshVB._selfIB;\r\n\t\t\t\t}\r\n\t\t\t\tGlUtils.expandIBQuadrangle(ib,(vb.byteLength / (4 *vb.vertexStride *4)));\r\n\t\t\t}\r\n\t\t\tif (!shaderValues || !shader)\r\n\t\t\t\tthrow Error(\"setIBVB must input:shader shaderValues\");\r\n\t\t\tvar submit=SubmitOtherIBVB.create(this,vb,ib,numElement,shader,shaderValues,startIndex,offset,type);\r\n\t\t\tmat || (mat=Matrix.EMPTY);\r\n\t\t\tmat.translate(x,y);\r\n\t\t\tMatrix.mul(mat,this._curMat,submit._mat);\r\n\t\t\tmat.translate(-x,-y);\r\n\t\t\tthis._submits[this._submits._length++]=submit;\r\n\t\t\tthis._curSubmit=Submit.RENDERBASE;\r\n\t\t\tthis._renderKey=0;\r\n\t\t}\r\n\r\n\t\t__proto.addRenderObject=function(o){\r\n\t\t\tthis._submits[this._submits._length++]=o;\r\n\t\t}\r\n\r\n\t\t__proto.fillTrangles=function(tex,x,y,points,m){\r\n\t\t\tvar submit=this._curSubmit;\r\n\t\t\tvar vb=this._vb;\r\n\t\t\tvar shader=this._shader2D;\r\n\t\t\tvar curShader=submit.shaderValue;\r\n\t\t\tvar length=points.length >> 4;\r\n\t\t\tvar t_tex=tex.bitmap;\r\n\t\t\tthis._renderKey=0;\r\n\t\t\tif (shader.glTexture !=t_tex || shader.ALPHA!==curShader.ALPHA){\r\n\t\t\t\tsubmit=this._curSubmit=Submit.create(this,this._ib,vb,((vb._byteLength)/ 32)*3,Value2D.create(0x01,0));\r\n\t\t\t\tsubmit.shaderValue.textureHost=tex;\r\n\t\t\t\tthis._submits[this._submits._length++]=submit;\r\n\t\t\t}\r\n\t\t\tGlUtils.fillTranglesVB(vb,x,y,points,m || this._curMat,this._x,this._y);\r\n\t\t\tsubmit._numEle+=length *6;\r\n\t\t}\r\n\r\n\t\t__proto.submitElement=function(start,end){\r\n\t\t\tvar renderList=this._submits;\r\n\t\t\tend < 0 && (end=renderList._length);\r\n\t\t\twhile (start < end){\r\n\t\t\t\tstart+=renderList[start].renderSubmit();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__proto.finish=function(){\r\n\t\t\tWebGL.mainContext.finish();\r\n\t\t}\r\n\r\n\t\t__proto.flush=function(){\r\n\t\t\tvar maxNum=Math.max(this._vb.byteLength / (4 *16),this._maxNumEle / 6)+8;\r\n\t\t\tif (maxNum > (this._ib.bufferLength / (6 *2))){\r\n\t\t\t\tGlUtils.expandIBQuadrangle(this._ib,maxNum);\r\n\t\t\t}\r\n\t\t\tif (!this._isMain && AtlasResourceManager.enabled && AtlasResourceManager._atlasRestore > this._atlasResourceChange){\r\n\t\t\t\tthis._atlasResourceChange=AtlasResourceManager._atlasRestore;\r\n\t\t\t\tvar renderList=this._submits;\r\n\t\t\t\tfor (var i=0,s=renderList._length;i < s;i++){\r\n\t\t\t\t\tvar submit=renderList [i];\r\n\t\t\t\t\tif (submit.getRenderType()===10016)\r\n\t\t\t\t\t\t(submit).checkTexture();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.submitElement(0,this._submits._length);\r\n\t\t\tthis._path && this._path.reset();\r\n\t\t\tSkinMeshBuffer.instance && SkinMeshBuffer.getInstance().reset();\r\n\t\t\tthis._curSubmit=Submit.RENDERBASE;\r\n\t\t\tthis._renderKey=0;\r\n\t\t\treturn this._submits._length;\r\n\t\t}\r\n\r\n\t\t__proto.setPathId=function(id){\r\n\t\t\tthis.mId=id;\r\n\t\t\tif (this.mId !=-1){\r\n\t\t\t\tthis.mHaveKey=false;\r\n\t\t\t\tvar tVGM=VectorGraphManager.getInstance();\r\n\t\t\t\tif (tVGM.shapeDic[this.mId]){\r\n\t\t\t\t\tthis.mHaveKey=true;\r\n\t\t\t\t}\r\n\t\t\t\tthis.mHaveLineKey=false;\r\n\t\t\t\tif (tVGM.shapeLineDic[this.mId]){\r\n\t\t\t\t\tthis.mHaveLineKey=true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__proto.movePath=function(x,y){\r\n\t\t\tx=this._curMat.a *x+this._curMat.c *y+this._curMat.tx;\r\n\t\t\ty=this._curMat.b *x+this._curMat.d *y+this._curMat.ty;\r\n\t\t\tthis.mX+=x;\r\n\t\t\tthis.mY+=y;\r\n\t\t}\r\n\r\n\t\t__proto.beginPath=function(){\r\n\t\t\tvar tPath=this._getPath();\r\n\t\t\ttPath.tempArray.length=0;\r\n\t\t\ttPath.closePath=false;\r\n\t\t\tthis.mX=0;\r\n\t\t\tthis.mY=0;\r\n\t\t}\r\n\r\n\t\t__proto.closePath=function(){\r\n\t\t\tthis._path.closePath=true;\r\n\t\t}\r\n\r\n\t\t__proto.fill=function(isConvexPolygon){\r\n\t\t\t(isConvexPolygon===void 0)&& (isConvexPolygon=false);\r\n\t\t\tvar tPath=this._getPath();\r\n\t\t\tthis.drawPoly(0,0,tPath.tempArray,this.fillStyle._color.numColor,0,0,isConvexPolygon);\r\n\t\t}\r\n\r\n\t\t__proto.stroke=function(){\r\n\t\t\tvar tPath=this._getPath();\r\n\t\t\tif (this.lineWidth > 0){\r\n\t\t\t\tif (this.mId==-1){\r\n\t\t\t\t\ttPath.drawLine(0,0,tPath.tempArray,this.lineWidth,this.strokeStyle._color.numColor);\r\n\t\t\t\t}\r\n\t\t\t\telse{\r\n\t\t\t\t\tif (this.mHaveLineKey){\r\n\t\t\t\t\t\tvar tShapeLine=VectorGraphManager.getInstance().shapeLineDic[this.mId];\r\n\t\t\t\t\t\ttShapeLine.rebuild(tPath.tempArray);\r\n\t\t\t\t\t\ttPath.setGeomtry(tShapeLine);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\tVectorGraphManager.getInstance().addLine(this.mId,tPath.drawLine(0,0,tPath.tempArray,this.lineWidth,this.strokeStyle._color.numColor));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\ttPath.update();\r\n\t\t\t\tvar tPosArray=[this.mX,this.mY];\r\n\t\t\t\tvar tempSubmit=Submit.createShape(this,tPath.ib,tPath.vb,tPath.count,tPath.offset,Value2D.create(0x04,0));\r\n\t\t\t\ttempSubmit.shaderValue.ALPHA=this._shader2D.ALPHA;\r\n\t\t\t\t(tempSubmit.shaderValue).u_pos=tPosArray;\r\n\t\t\t\ttempSubmit.shaderValue.u_mmat2=RenderState2D.TEMPMAT4_ARRAY;\r\n\t\t\t\tthis._submits[this._submits._length++]=tempSubmit;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__proto.line=function(fromX,fromY,toX,toY,lineWidth,mat){\r\n\t\t\tvar submit=this._curSubmit;\r\n\t\t\tvar vb=this._vb;\r\n\t\t\tif (GlUtils.fillLineVb(vb,this._clipRect,fromX,fromY,toX,toY,lineWidth,mat)){\r\n\t\t\t\tthis._renderKey=0;\r\n\t\t\t\tvar shader=this._shader2D;\r\n\t\t\t\tvar curShader=submit.shaderValue;\r\n\t\t\t\tif (shader.strokeStyle!==curShader.strokeStyle || shader.ALPHA!==curShader.ALPHA){\r\n\t\t\t\t\tshader.glTexture=null;\r\n\t\t\t\t\tsubmit=this._curSubmit=Submit.create(this,this._ib,vb,((vb._byteLength-16 *4)/ 32)*3,Value2D.create(0x02,0));\r\n\t\t\t\t\tsubmit.shaderValue.strokeStyle=shader.strokeStyle;\r\n\t\t\t\t\tsubmit.shaderValue.mainID=0x02;\r\n\t\t\t\t\tsubmit.shaderValue.ALPHA=shader.ALPHA;\r\n\t\t\t\t\tthis._submits[this._submits._length++]=submit;\r\n\t\t\t\t}\r\n\t\t\t\tsubmit._numEle+=6;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__proto.moveTo=function(x,y,b){\r\n\t\t\t(b===void 0)&& (b=true);\r\n\t\t\tvar tPath=this._getPath();\r\n\t\t\tif (b){\r\n\t\t\t\tx=this._curMat.a *x+this._curMat.c *y+this._curMat.tx;\r\n\t\t\t\ty=this._curMat.b *x+this._curMat.d *y+this._curMat.ty;\r\n\t\t\t}\r\n\t\t\ttPath.addPoint(x,y);\r\n\t\t}\r\n\r\n\t\t__proto.lineTo=function(x,y,b){\r\n\t\t\t(b===void 0)&& (b=true);\r\n\t\t\tvar tPath=this._getPath();\r\n\t\t\tif (b){\r\n\t\t\t\tx=this._curMat.a *x+this._curMat.c *y+this._curMat.tx;\r\n\t\t\t\ty=this._curMat.b *x+this._curMat.d *y+this._curMat.ty;\r\n\t\t\t}\r\n\t\t\ttPath.addPoint(x,y);\r\n\t\t}\r\n\r\n\t\t__proto.drawCurves=function(x,y,args){\r\n\t\t\tthis.setPathId(-1);\r\n\t\t\tthis.beginPath();\r\n\t\t\tthis.strokeStyle=args[3];\r\n\t\t\tthis.lineWidth=args[4];\r\n\t\t\tvar points=args[2];\r\n\t\t\tx+=args[0],y+=args[1];\r\n\t\t\tthis.movePath(x,y);\r\n\t\t\tthis.moveTo(points[0],points[1]);\r\n\t\t\tvar i=2,n=points.length;\r\n\t\t\twhile (i < n){\r\n\t\t\t\tthis.quadraticCurveTo(points[i++],points[i++],points[i++],points[i++]);\r\n\t\t\t}\r\n\t\t\tthis.stroke();\r\n\t\t}\r\n\r\n\t\t__proto.arcTo=function(x1,y1,x2,y2,r){\r\n\t\t\tif (this.mId !=-1){\r\n\t\t\t\tif (this.mHaveKey){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\tvar tPath=this._getPath();\r\n\t\t\tvar x0=tPath.getEndPointX();\r\n\t\t\tvar y0=tPath.getEndPointY();\r\n\t\t\tvar dx0=NaN,dy0=NaN,dx1=NaN,dy1=NaN,a=NaN,d=NaN,cx=NaN,cy=NaN,a0=NaN,a1=NaN;\r\n\t\t\tvar dir=false;\r\n\t\t\tdx0=x0-x1;\r\n\t\t\tdy0=y0-y1;\r\n\t\t\tdx1=x2-x1;\r\n\t\t\tdy1=y2-y1;\r\n\t\t\tPoint.TEMP.setTo(dx0,dy0);\r\n\t\t\tPoint.TEMP.normalize();\r\n\t\t\tdx0=Point.TEMP.x;\r\n\t\t\tdy0=Point.TEMP.y;\r\n\t\t\tPoint.TEMP.setTo(dx1,dy1);\r\n\t\t\tPoint.TEMP.normalize();\r\n\t\t\tdx1=Point.TEMP.x;\r\n\t\t\tdy1=Point.TEMP.y;\r\n\t\t\ta=Math.acos(dx0 *dx1+dy0 *dy1);\r\n\t\t\tvar tTemp=Math.tan(a / 2.0);\r\n\t\t\td=r / tTemp;\r\n\t\t\tif (d > 10000){\r\n\t\t\t\tthis.lineTo(x1,y1);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (dx0 *dy1-dx1 *dy0 <=0.0){\r\n\t\t\t\tcx=x1+dx0 *d+dy0 *r;\r\n\t\t\t\tcy=y1+dy0 *d-dx0 *r;\r\n\t\t\t\ta0=Math.atan2(dx0,-dy0);\r\n\t\t\t\ta1=Math.atan2(-dx1,dy1);\r\n\t\t\t\tdir=false;\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tcx=x1+dx0 *d-dy0 *r;\r\n\t\t\t\tcy=y1+dy0 *d+dx0 *r;\r\n\t\t\t\ta0=Math.atan2(-dx0,dy0);\r\n\t\t\t\ta1=Math.atan2(dx1,-dy1);\r\n\t\t\t\tdir=true;\r\n\t\t\t}\r\n\t\t\tthis.arc(cx,cy,r,a0,a1,dir);\r\n\t\t}\r\n\r\n\t\t__proto.arc=function(cx,cy,r,startAngle,endAngle,counterclockwise){\r\n\t\t\t(counterclockwise===void 0)&& (counterclockwise=false);\r\n\t\t\tif (this.mId !=-1){\r\n\t\t\t\tvar tShape=VectorGraphManager.getInstance().shapeDic[this.mId];\r\n\t\t\t\tif (tShape){\r\n\t\t\t\t\tif (this.mHaveKey && !tShape.needUpdate(this._curMat))\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tcx=0;\r\n\t\t\t\tcy=0;\r\n\t\t\t};\r\n\t\t\tvar a=0,da=0,hda=0,kappa=0;\r\n\t\t\tvar dx=0,dy=0,x=0,y=0,tanx=0,tany=0;\r\n\t\t\tvar px=0,py=0,ptanx=0,ptany=0;\r\n\t\t\tvar i=0,ndivs=0,nvals=0;\r\n\t\t\tda=endAngle-startAngle;\r\n\t\t\tif (!counterclockwise){\r\n\t\t\t\tif (Math.abs(da)>=Math.PI *2){\r\n\t\t\t\t\tda=Math.PI *2;\r\n\t\t\t\t}\r\n\t\t\t\telse{\r\n\t\t\t\t\twhile (da < 0.0){\r\n\t\t\t\t\t\tda+=Math.PI *2;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tif (Math.abs(da)>=Math.PI *2){\r\n\t\t\t\t\tda=-Math.PI *2;\r\n\t\t\t\t}\r\n\t\t\t\telse{\r\n\t\t\t\t\twhile (da > 0.0){\r\n\t\t\t\t\t\tda-=Math.PI *2;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (r < 101){\r\n\t\t\t\tndivs=Math.max(10,da *r / 5);\r\n\t\t\t}\r\n\t\t\telse if (r < 201){\r\n\t\t\t\tndivs=Math.max(10,da *r / 20);\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tndivs=Math.max(10,da *r / 40);\r\n\t\t\t}\r\n\t\t\thda=(da / ndivs)/ 2.0;\r\n\t\t\tkappa=Math.abs(4 / 3 *(1-Math.cos(hda))/ Math.sin(hda));\r\n\t\t\tif (counterclockwise)\r\n\t\t\t\tkappa=-kappa;\r\n\t\t\tnvals=0;\r\n\t\t\tvar tPath=this._getPath();\r\n\t\t\tfor (i=0;i <=ndivs;i++){\r\n\t\t\t\ta=startAngle+da *(i / ndivs);\r\n\t\t\t\tdx=Math.cos(a);\r\n\t\t\t\tdy=Math.sin(a);\r\n\t\t\t\tx=cx+dx *r;\r\n\t\t\t\ty=cy+dy *r;\r\n\t\t\t\tx=this._curMat.a *x+this._curMat.c *y+this._curMat.tx;\r\n\t\t\t\ty=this._curMat.b *x+this._curMat.d *y+this._curMat.ty;\r\n\t\t\t\tif (x !=this._path.getEndPointX()|| y !=this._path.getEndPointY()){\r\n\t\t\t\t\ttPath.addPoint(x,y);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tdx=Math.cos(endAngle);\r\n\t\t\tdy=Math.sin(endAngle);\r\n\t\t\tx=cx+dx *r;\r\n\t\t\ty=cy+dy *r;\r\n\t\t\tx=this._curMat.a *x+this._curMat.c *y+this._curMat.tx;\r\n\t\t\ty=this._curMat.b *x+this._curMat.d *y+this._curMat.ty;\r\n\t\t\tif (x !=this._path.getEndPointX()|| y !=this._path.getEndPointY()){\r\n\t\t\t\ttPath.addPoint(x,y);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__proto.quadraticCurveTo=function(cpx,cpy,x,y){\r\n\t\t\tvar tBezier=Bezier.I;\r\n\t\t\tvar tResultArray=[];\r\n\t\t\tx=this._curMat.a *x+this._curMat.c *y+this._curMat.tx;\r\n\t\t\ty=this._curMat.b *x+this._curMat.d *y+this._curMat.ty;\r\n\t\t\tcpx=this._curMat.a *cpx+this._curMat.c *cpy+this._curMat.tx;\r\n\t\t\tcpy=this._curMat.b *cpx+this._curMat.d *cpy+this._curMat.ty;\r\n\t\t\tvar tArray=tBezier.getBezierPoints([this._path.getEndPointX(),this._path.getEndPointY(),cpx,cpy,x,y],30,2);\r\n\t\t\tfor (var i=0,n=tArray.length / 2;i < n;i++){\r\n\t\t\t\tthis.lineTo(tArray[i *2],tArray[i *2+1],false);\r\n\t\t\t}\r\n\t\t\tthis.lineTo(x,y,false);\r\n\t\t}\r\n\r\n\t\t__proto.rect=function(x,y,width,height){\r\n\t\t\tthis._other=this._other.make();\r\n\t\t\tthis._other.path || (this._other.path=new Path());\r\n\t\t\tthis._other.path.rect(x,y,width,height);\r\n\t\t}\r\n\r\n\t\t__proto.strokeRect=function(x,y,width,height,parameterLineWidth){\r\n\t\t\tvar tW=parameterLineWidth *0.5;\r\n\t\t\tthis.line(x-tW,y,x+width+tW,y,parameterLineWidth,this._curMat);\r\n\t\t\tthis.line(x+width,y,x+width,y+height,parameterLineWidth,this._curMat);\r\n\t\t\tthis.line(x,y,x,y+height,parameterLineWidth,this._curMat);\r\n\t\t\tthis.line(x-tW,y+height,x+width+tW,y+height,parameterLineWidth,this._curMat);\r\n\t\t}\r\n\r\n\t\t__proto.clip=function(){}\r\n\t\t/**\r\n\t\t*画多边形(用)\r\n\t\t*@param x\r\n\t\t*@param y\r\n\t\t*@param points\r\n\t\t*/\r\n\t\t__proto.drawPoly=function(x,y,points,color,lineWidth,boderColor,isConvexPolygon){\r\n\t\t\t(isConvexPolygon===void 0)&& (isConvexPolygon=false);\r\n\t\t\tthis._renderKey=0;\r\n\t\t\tthis._shader2D.glTexture=null;\r\n\t\t\tvar tPath=this._getPath();\r\n\t\t\tif (this.mId==-1){\r\n\t\t\t\ttPath.polygon(x,y,points,color,lineWidth ? lineWidth :1,boderColor)\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tif (this.mHaveKey){\r\n\t\t\t\t\tvar tShape=VectorGraphManager.getInstance().shapeDic[this.mId];\r\n\t\t\t\t\ttShape.setMatrix(this._curMat);\r\n\t\t\t\t\ttShape.rebuild(tPath.tempArray);\r\n\t\t\t\t\ttPath.setGeomtry(tShape);\r\n\t\t\t\t}\r\n\t\t\t\telse{\r\n\t\t\t\t\tvar t=tPath.polygon(x,y,points,color,lineWidth ? lineWidth :1,boderColor);\r\n\t\t\t\t\tVectorGraphManager.getInstance().addShape(this.mId,t);\r\n\t\t\t\t\tt.setMatrix(this._curMat);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\ttPath.update();\r\n\t\t\tvar tPosArray=[this.mX,this.mY];\r\n\t\t\tvar tempSubmit;\r\n\t\t\tif (!isConvexPolygon){\r\n\t\t\t\tvar submit=SubmitStencil.create(4);\r\n\t\t\t\tthis.addRenderObject(submit);\r\n\t\t\t\ttempSubmit=Submit.createShape(this,tPath.ib,tPath.vb,tPath.count,tPath.offset,Value2D.create(0x04,0));\r\n\t\t\t\ttempSubmit.shaderValue.ALPHA=this._shader2D.ALPHA;\r\n\t\t\t\t(tempSubmit.shaderValue).u_pos=tPosArray;\r\n\t\t\t\ttempSubmit.shaderValue.u_mmat2=RenderState2D.EMPTYMAT4_ARRAY;\r\n\t\t\t\tthis._submits[this._submits._length++]=tempSubmit;\r\n\t\t\t\tsubmit=SubmitStencil.create(5);\r\n\t\t\t\tthis.addRenderObject(submit);\r\n\t\t\t}\r\n\t\t\ttempSubmit=Submit.createShape(this,tPath.ib,tPath.vb,tPath.count,tPath.offset,Value2D.create(0x04,0));\r\n\t\t\ttempSubmit.shaderValue.ALPHA=this._shader2D.ALPHA;\r\n\t\t\t(tempSubmit.shaderValue).u_pos=tPosArray;\r\n\t\t\ttempSubmit.shaderValue.u_mmat2=RenderState2D.EMPTYMAT4_ARRAY;\r\n\t\t\tthis._submits[this._submits._length++]=tempSubmit;\r\n\t\t\tif (!isConvexPolygon){\r\n\t\t\t\tsubmit=SubmitStencil.create(3);\r\n\t\t\t\tthis.addRenderObject(submit);\r\n\t\t\t}\r\n\t\t\tif (lineWidth > 0){\r\n\t\t\t\tif (this.mHaveLineKey){\r\n\t\t\t\t\tvar tShapeLine=VectorGraphManager.getInstance().shapeLineDic[this.mId];\r\n\t\t\t\t\ttShapeLine.rebuild(tPath.tempArray);\r\n\t\t\t\t\ttPath.setGeomtry(tShapeLine);\r\n\t\t\t\t}\r\n\t\t\t\telse{\r\n\t\t\t\t\tVectorGraphManager.getInstance().addShape(this.mId,tPath.drawLine(x,y,points,lineWidth,boderColor));\r\n\t\t\t\t}\r\n\t\t\t\ttPath.update();\r\n\t\t\t\ttempSubmit=Submit.createShape(this,tPath.ib,tPath.vb,tPath.count,tPath.offset,Value2D.create(0x04,0));\r\n\t\t\t\ttempSubmit.shaderValue.ALPHA=this._shader2D.ALPHA;\r\n\t\t\t\ttempSubmit.shaderValue.u_mmat2=RenderState2D.EMPTYMAT4_ARRAY;\r\n\t\t\t\tthis._submits[this._submits._length++]=tempSubmit;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/*******************************************end矢量绘制***************************************************/\r\n\t\t__proto.drawParticle=function(x,y,pt){\r\n\t\t\tpt.x=x;\r\n\t\t\tpt.y=y;\r\n\t\t\tthis._submits[this._submits._length++]=pt;\r\n\t\t}\r\n\r\n\t\t__proto._getPath=function(){\r\n\t\t\treturn this._path || (this._path=new Path());\r\n\t\t}\r\n\r\n\t\t/*,_shader2D.ALPHA=1*/\r\n\t\t__getset(0,__proto,'globalCompositeOperation',function(){\r\n\t\t\treturn BlendMode.NAMES[this._nBlendType];\r\n\t\t\t},function(value){\r\n\t\t\tvar n=BlendMode.TOINT[value];\r\n\t\t\tn==null || (this._nBlendType===n)|| (SaveBase.save(this,0x10000,this,true),this._curSubmit=Submit.RENDERBASE,this._renderKey=0,this._nBlendType=n);\r\n\t\t});\r\n\r\n\t\t__getset(0,__proto,'textAlign',function(){\r\n\t\t\treturn this._other.textAlign;\r\n\t\t\t},function(value){\r\n\t\t\t(this._other.textAlign===value)|| (this._other=this._other.make(),SaveBase.save(this,0x8000,this._other,false),this._other.textAlign=value);\r\n\t\t});\r\n\r\n\t\t__getset(0,__proto,'globalAlpha',function(){\r\n\t\t\treturn this._shader2D.ALPHA;\r\n\t\t\t},function(value){\r\n\t\t\tvalue=Math.floor(value *1000)/ 1000;\r\n\t\t\tif (value !=this._shader2D.ALPHA){\r\n\t\t\t\tSaveBase.save(this,0x1,this._shader2D,true);\r\n\t\t\t\tthis._shader2D.ALPHA=value;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t__getset(0,__proto,'strokeStyle',function(){\r\n\t\t\treturn this._shader2D.strokeStyle;\r\n\t\t\t},function(value){\r\n\t\t\tthis._shader2D.strokeStyle.equal(value)|| (SaveBase.save(this,0x200,this._shader2D,false),this._shader2D.strokeStyle=DrawStyle.create(value));\r\n\t\t});\r\n\r\n\t\t__getset(0,__proto,'textBaseline',function(){\r\n\t\t\treturn this._other.textBaseline;\r\n\t\t\t},function(value){\r\n\t\t\t(this._other.textBaseline===value)|| (this._other=this._other.make(),SaveBase.save(this,0x4000,this._other,false),this._other.textBaseline=value);\r\n\t\t});\r\n\r\n\t\t__getset(0,__proto,'font',null,function(str){\r\n\t\t\tif (str==this._other.font.toString())\r\n\t\t\t\treturn;\r\n\t\t\tthis._other=this._other.make();\r\n\t\t\tSaveBase.save(this,0x8,this._other,false);\r\n\t\t\tthis._other.font===FontInContext.EMPTY ? (this._other.font=new FontInContext(str)):(this._other.font.setFont(str));\r\n\t\t});\r\n\r\n\t\t__getset(0,__proto,'lineWidth',function(){\r\n\t\t\treturn this._other.lineWidth;\r\n\t\t\t},function(value){\r\n\t\t\t(this._other.lineWidth===value)|| (this._other=this._other.make(),SaveBase.save(this,0x100,this._other,false),this._other.lineWidth=value);\r\n\t\t});\r\n\r\n\t\t__getset(0,__proto,'fillStyle',function(){\r\n\t\t\treturn this._shader2D.fillStyle;\r\n\t\t\t},function(value){\r\n\t\t\tthis._shader2D.fillStyle.equal(value)|| (SaveBase.save(this,0x2,this._shader2D,false),this._shader2D.fillStyle=DrawStyle.create(value));\r\n\t\t});\r\n\r\n\t\t__getset(0,__proto,'asBitmap',null,function(value){\r\n\t\t\tif (value){\r\n\t\t\t\tthis._targets || (this._targets=new RenderTargetMAX());\r\n\t\t\t\tthis._targets.repaint=true;\r\n\t\t\t\tif (!this._width || !this._height)\r\n\t\t\t\t\tthrow Error(\"asBitmap no size!\");\r\n\t\t\t\tthis._targets.size(this._width,this._height);\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\tthis._targets=null;\r\n\t\t});\r\n\r\n\t\tWebGLContext2D.__init__=function(){\r\n\t\t\tContextParams.DEFAULT=new ContextParams();\r\n\t\t}\r\n\r\n\t\tWebGLContext2D._SUBMITVBSIZE=32000;\r\n\t\tWebGLContext2D._MAXSIZE=99999999;\r\n\t\tWebGLContext2D._RECTVBSIZE=16;\r\n\t\tWebGLContext2D.MAXCLIPRECT=new Rectangle(0,0,99999999,99999999);\r\n\t\tWebGLContext2D._COUNT=0;\r\n\t\tWebGLContext2D._tmpMatrix=new Matrix();\r\n\t\t__static(WebGLContext2D,\r\n\t\t['_fontTemp',function(){return this._fontTemp=new FontInContext();},'_drawStyleTemp',function(){return this._drawStyleTemp=new DrawStyle(null);}\r\n\t\t]);\r\n\t\tWebGLContext2D.__init$=function(){\r\n\t\t\t//class ContextParams\r\n\t\t\tContextParams=(function(){\r\n\t\t\t\tfunction ContextParams(){\r\n\t\t\t\t\tthis.lineWidth=1;\r\n\t\t\t\t\tthis.path=null;\r\n\t\t\t\t\tthis.textAlign=null;\r\n\t\t\t\t\tthis.textBaseline=null;\r\n\t\t\t\t\tthis.font=FontInContext.EMPTY;\r\n\t\t\t\t}\r\n\t\t\t\t__class(ContextParams,'');\r\n\t\t\t\tvar __proto=ContextParams.prototype;\r\n\t\t\t\t__proto.clear=function(){\r\n\t\t\t\t\tthis.lineWidth=1;\r\n\t\t\t\t\tthis.path && this.path.clear();\r\n\t\t\t\t\tthis.textAlign=this.textBaseline=null;\r\n\t\t\t\t\tthis.font=FontInContext.EMPTY;\r\n\t\t\t\t}\r\n\t\t\t\t__proto.make=function(){\r\n\t\t\t\t\treturn this===ContextParams.DEFAULT ? new ContextParams():this;\r\n\t\t\t\t}\r\n\t\t\t\tContextParams.DEFAULT=null\r\n\t\t\t\treturn ContextParams;\r\n\t\t\t})()\r\n\t\t}\r\n\r\n\t\treturn WebGLContext2D;\r\n\t})(Context)\r\n\r\n\r\n\t//class laya.webgl.utils.RenderSprite3D extends laya.renders.RenderSprite\r\n\tvar RenderSprite3D=(function(_super){\r\n\t\tfunction RenderSprite3D(type,next){\r\n\t\t\tRenderSprite3D.__super.call(this,type,next);\r\n\t\t}\r\n\r\n\t\t__class(RenderSprite3D,'laya.webgl.utils.RenderSprite3D',_super);\r\n\t\tvar __proto=RenderSprite3D.prototype;\r\n\t\t__proto.onCreate=function(type){\r\n\t\t\tswitch (type){\r\n\t\t\t\tcase 0x08:\r\n\t\t\t\t\tthis._fun=this._blend;\r\n\t\t\t\t\treturn;\r\n\t\t\t\tcase 0x04:\r\n\t\t\t\t\tthis._fun=this._transform;\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t}\r\n\r\n\t\t__proto._mask=function(sprite,context,x,y){\r\n\t\t\tvar next=this._next;\r\n\t\t\tvar mask=sprite.mask;\r\n\t\t\tvar submitCMD;\r\n\t\t\tvar submitStencil;\r\n\t\t\tif (mask){\r\n\t\t\t\tcontext.ctx.save();\r\n\t\t\t\tvar preBlendMode=(context.ctx).globalCompositeOperation;\r\n\t\t\t\tvar tRect=new Rectangle();\r\n\t\t\t\ttRect.copyFrom(mask.getBounds());\r\n\t\t\t\ttRect.width=Math.round(tRect.width);\r\n\t\t\t\ttRect.height=Math.round(tRect.height);\r\n\t\t\t\ttRect.x=Math.round(tRect.x);\r\n\t\t\t\ttRect.y=Math.round(tRect.y);\r\n\t\t\t\tif (tRect.width > 0 && tRect.height > 0){\r\n\t\t\t\t\tvar scope=SubmitCMDScope.create();\r\n\t\t\t\t\tscope.addValue(\"bounds\",tRect);\r\n\t\t\t\t\tsubmitCMD=SubmitCMD.create([scope,context],laya.webgl.utils.RenderSprite3D.tmpTarget);\r\n\t\t\t\t\tcontext.addRenderObject(submitCMD);\r\n\t\t\t\t\tmask.render(context,-tRect.x,-tRect.y);\r\n\t\t\t\t\tsubmitCMD=SubmitCMD.create([scope],laya.webgl.utils.RenderSprite3D.endTmpTarget);\r\n\t\t\t\t\tcontext.addRenderObject(submitCMD);\r\n\t\t\t\t\tcontext.ctx.save();\r\n\t\t\t\t\tcontext.clipRect(x+tRect.x,y+tRect.y,tRect.width,tRect.height);\r\n\t\t\t\t\tnext._fun.call(next,sprite,context,x,y);\r\n\t\t\t\t\tcontext.ctx.restore();\r\n\t\t\t\t\tsubmitStencil=SubmitStencil.create(6);\r\n\t\t\t\t\tpreBlendMode=(context.ctx).globalCompositeOperation;\r\n\t\t\t\t\tsubmitStencil.blendMode=\"mask\";\r\n\t\t\t\t\tcontext.addRenderObject(submitStencil);\r\n\t\t\t\t\tMatrix.TEMP.identity();\r\n\t\t\t\t\tvar shaderValue=Value2D.create(0x01,0);\r\n\t\t\t\t\tvar uv=Texture.INV_UV;\r\n\t\t\t\t\tvar w=tRect.width;\r\n\t\t\t\t\tvar h=tRect.height;\r\n\t\t\t\t\tvar tempLimit=32;\r\n\t\t\t\t\tif (tRect.width < tempLimit || tRect.height < tempLimit){\r\n\t\t\t\t\t\tuv=new Array(8);\r\n\t\t\t\t\t\tuv[0]=0;\r\n\t\t\t\t\t\tuv[1]=0;\r\n\t\t\t\t\t\tuv[2]=(tRect.width >=32)? 1 :tRect.width/tempLimit;\r\n\t\t\t\t\t\tuv[3]=0\r\n\t\t\t\t\t\tuv[4]=(tRect.width >=32)? 1 :tRect.width/tempLimit;\r\n\t\t\t\t\t\tuv[5]=(tRect.height >=32)? 1 :tRect.height/tempLimit;\r\n\t\t\t\t\t\tuv[6]=0;\r\n\t\t\t\t\t\tuv[7]=(tRect.height >=32)? 1 :tRect.height/tempLimit;\r\n\t\t\t\t\t\ttRect.width=(tRect.width >=32)? tRect.width :tempLimit;\r\n\t\t\t\t\t\ttRect.height=(tRect.height >=32)? tRect.height :tempLimit;\r\n\t\t\t\t\t\tuv[1] *=-1;uv[3] *=-1;uv[5] *=-1;uv[7] *=-1;\r\n\t\t\t\t\t\tuv[1]+=1;uv[3]+=1;uv[5]+=1;uv[7]+=1;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t(context.ctx).drawTarget(scope,x+tRect.x,y+tRect.y,w,h,Matrix.TEMP,\"tmpTarget\",shaderValue,uv,6);\r\n\t\t\t\t\tsubmitCMD=SubmitCMD.create([scope],laya.webgl.utils.RenderSprite3D.recycleTarget);\r\n\t\t\t\t\tcontext.addRenderObject(submitCMD);\r\n\t\t\t\t\tsubmitStencil=SubmitStencil.create(6);\r\n\t\t\t\t\tsubmitStencil.blendMode=preBlendMode;\r\n\t\t\t\t\tcontext.addRenderObject(submitStencil);\r\n\t\t\t\t}\r\n\t\t\t\tcontext.ctx.restore();\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tnext._fun.call(next,sprite,context,x,y);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__proto._blend=function(sprite,context,x,y){\r\n\t\t\tvar style=sprite._style;\r\n\t\t\tvar next=this._next;\r\n\t\t\tif (style.blendMode){\r\n\t\t\t\tcontext.ctx.save();\r\n\t\t\t\tcontext.ctx.globalCompositeOperation=style.blendMode;\r\n\t\t\t\tnext._fun.call(next,sprite,context,x,y);\r\n\t\t\t\tcontext.ctx.restore();\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tnext._fun.call(next,sprite,context,x,y);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__proto._transform=function(sprite,context,x,y){\r\n\t\t\t'use strict';\r\n\t\t\tvar transform=sprite.transform,_next=this._next;\r\n\t\t\tif (transform && _next !=RenderSprite.NORENDER){\r\n\t\t\t\tvar ctx=context.ctx;\r\n\t\t\t\tvar style=sprite._style;\r\n\t\t\t\ttransform.tx=x;\r\n\t\t\t\ttransform.ty=y;\r\n\t\t\t\tvar m2=ctx._getTransformMatrix();\r\n\t\t\t\tvar m1=m2.clone();\r\n\t\t\t\tMatrix.mul(transform,m2,m2);\r\n\t\t\t\tm2._checkTransform();\r\n\t\t\t\ttransform.tx=transform.ty=0;\r\n\t\t\t\t_next._fun.call(_next,sprite,context,0,0);\r\n\t\t\t\tm1.copyTo(m2);\r\n\t\t\t\tm1.destroy();\r\n\t\t\t\t}else {\r\n\t\t\t\t_next._fun.call(_next,sprite,context,x,y);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tRenderSprite3D.tmpTarget=function(scope,context){\r\n\t\t\tvar b=scope.getValue(\"bounds\");\r\n\t\t\tvar tmpTarget=RenderTarget2D.create(b.width,b.height);\r\n\t\t\ttmpTarget.start();\r\n\t\t\ttmpTarget.clear(0,0,0,0);\r\n\t\t\tscope.addValue(\"tmpTarget\",tmpTarget);\r\n\t\t}\r\n\r\n\t\tRenderSprite3D.endTmpTarget=function(scope){\r\n\t\t\tvar tmpTarget=scope.getValue(\"tmpTarget\");\r\n\t\t\ttmpTarget.end();\r\n\t\t}\r\n\r\n\t\tRenderSprite3D.recycleTarget=function(scope){\r\n\t\t\tvar tmpTarget=scope.getValue(\"tmpTarget\");\r\n\t\t\ttmpTarget.recycle();\r\n\t\t\tscope.recycle();\r\n\t\t}\r\n\r\n\t\treturn RenderSprite3D;\r\n\t})(RenderSprite)\r\n\r\n\r\n\t//class laya.webgl.atlas.Atlaser extends laya.webgl.atlas.AtlasGrid\r\n\tvar Atlaser=(function(_super){\r\n\t\tfunction Atlaser(gridNumX,gridNumY,width,height,atlasID){\r\n\t\t\tthis._atlasCanvas=null;\r\n\t\t\tthis._inAtlasTextureKey=null;\r\n\t\t\tthis._inAtlasTextureBitmapValue=null;\r\n\t\t\tthis._inAtlasTextureOriUVValue=null;\r\n\t\t\tthis._InAtlasWebGLImagesKey=null;\r\n\t\t\tthis._InAtlasWebGLImagesOffsetValue=null;\r\n\t\t\tAtlaser.__super.call(this,gridNumX,gridNumY,atlasID);\r\n\t\t\tthis._inAtlasTextureKey=[];\r\n\t\t\tthis._inAtlasTextureBitmapValue=[];\r\n\t\t\tthis._inAtlasTextureOriUVValue=[];\r\n\t\t\tthis._InAtlasWebGLImagesKey=[];\r\n\t\t\tthis._InAtlasWebGLImagesOffsetValue=[];\r\n\t\t\tthis._atlasCanvas=new AtlasWebGLCanvas();\r\n\t\t\tthis._atlasCanvas.width=width;\r\n\t\t\tthis._atlasCanvas.height=height;\r\n\t\t\tthis._atlasCanvas.activeResource();\r\n\t\t\tthis._atlasCanvas.lock=true;\r\n\t\t}\r\n\r\n\t\t__class(Atlaser,'laya.webgl.atlas.Atlaser',_super);\r\n\t\tvar __proto=Atlaser.prototype;\r\n\t\t__proto.computeUVinAtlasTexture=function(texture,oriUV,offsetX,offsetY){\r\n\t\t\tvar tex=texture;\r\n\t\t\tvar _width=AtlasResourceManager.atlasTextureWidth;\r\n\t\t\tvar _height=AtlasResourceManager.atlasTextureHeight;\r\n\t\t\tvar u1=offsetX / _width,v1=offsetY / _height,u2=(offsetX+texture.bitmap.width)/ _width,v2=(offsetY+texture.bitmap.height)/ _height;\r\n\t\t\tvar inAltasUVWidth=texture.bitmap.width / _width,inAltasUVHeight=texture.bitmap.height / _height;\r\n\t\t\ttexture.uv=[u1+oriUV[0] *inAltasUVWidth,v1+oriUV[1] *inAltasUVHeight,u2-(1-oriUV[2])*inAltasUVWidth,v1+oriUV[3] *inAltasUVHeight,u2-(1-oriUV[4])*inAltasUVWidth,v2-(1-oriUV[5])*inAltasUVHeight,u1+oriUV[6] *inAltasUVWidth,v2-(1-oriUV[7])*inAltasUVHeight];\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*\r\n\t\t*@param inAtlasRes\r\n\t\t*@return 是否已经存在队列中\r\n\t\t*/\r\n\t\t__proto.addToAtlasTexture=function(mergeAtlasBitmap,offsetX,offsetY){\r\n\t\t\t((mergeAtlasBitmap instanceof laya.webgl.resource.WebGLImage ))&& (this._InAtlasWebGLImagesKey.push(mergeAtlasBitmap),this._InAtlasWebGLImagesOffsetValue.push([offsetX,offsetY]));\r\n\t\t\tthis._atlasCanvas.texSubImage2D(offsetX,offsetY,mergeAtlasBitmap.atlasSource);\r\n\t\t\tmergeAtlasBitmap.clearAtlasSource();\r\n\t\t}\r\n\r\n\t\t__proto.addToAtlas=function(texture,offsetX,offsetY){\r\n\t\t\tvar oriUV=texture.uv.slice();\r\n\t\t\tvar oriBitmap=texture.bitmap;\r\n\t\t\tthis._inAtlasTextureKey.push(texture);\r\n\t\t\tthis._inAtlasTextureOriUVValue.push(oriUV);\r\n\t\t\tthis._inAtlasTextureBitmapValue.push(oriBitmap);\r\n\t\t\tthis.computeUVinAtlasTexture(texture,oriUV,offsetX,offsetY);\r\n\t\t\ttexture.bitmap=this._atlasCanvas;\r\n\t\t}\r\n\r\n\t\t__proto.clear=function(){\r\n\t\t\tfor (var i=0,n=this._inAtlasTextureKey.length;i < n;i++){\r\n\t\t\t\tthis._inAtlasTextureKey[i].bitmap=this._inAtlasTextureBitmapValue[i];\r\n\t\t\t\tthis._inAtlasTextureKey[i].uv=this._inAtlasTextureOriUVValue[i];\r\n\t\t\t\tthis._inAtlasTextureKey[i].bitmap.lock=false;\r\n\t\t\t\tthis._inAtlasTextureKey[i].bitmap.releaseResource();\r\n\t\t\t}\r\n\t\t\tthis._inAtlasTextureKey.length=0;\r\n\t\t\tthis._inAtlasTextureBitmapValue.length=0;\r\n\t\t\tthis._inAtlasTextureOriUVValue.length=0;\r\n\t\t\tthis._InAtlasWebGLImagesKey.length=0;\r\n\t\t\tthis._InAtlasWebGLImagesOffsetValue.length=0;\r\n\t\t}\r\n\r\n\t\t__proto.dispose=function(){\r\n\t\t\tthis.clear();\r\n\t\t\tthis._atlasCanvas.dispose();\r\n\t\t}\r\n\r\n\t\t__getset(0,__proto,'inAtlasWebGLImagesKey',function(){\r\n\t\t\treturn this._InAtlasWebGLImagesKey;\r\n\t\t});\r\n\r\n\t\t__getset(0,__proto,'InAtlasWebGLImagesOffsetValue',function(){\r\n\t\t\treturn this._InAtlasWebGLImagesOffsetValue;\r\n\t\t});\r\n\r\n\t\t__getset(0,__proto,'texture',function(){\r\n\t\t\treturn this._atlasCanvas;\r\n\t\t});\r\n\r\n\t\treturn Atlaser;\r\n\t})(AtlasGrid)\r\n\r\n\r\n\t//class laya.webgl.shapes.Line extends laya.webgl.shapes.BasePoly\r\n\tvar Line=(function(_super){\r\n\t\tfunction Line(x,y,points,borderWidth,color){\r\n\t\t\tthis._points=[];\r\n\t\t\tthis.rebuild(points);\r\n\t\t\tLine.__super.call(this,x,y,0,0,0,color,borderWidth,color,0);\r\n\t\t}\r\n\r\n\t\t__class(Line,'laya.webgl.shapes.Line',_super);\r\n\t\tvar __proto=Line.prototype;\r\n\t\t__proto.rebuild=function(points){\r\n\t\t\tvar len=points.length;\r\n\t\t\tvar preLen=this._points.length;\r\n\t\t\tif (len !=preLen){\r\n\t\t\t\tthis.mUint16Array=new Uint16Array((len/2-1)*6);\r\n\t\t\t\tthis.mFloat32Array=new Float32Array(len*5);\r\n\t\t\t}\r\n\t\t\tthis._points.length=0;\r\n\t\t\tvar tCurrX=NaN;\r\n\t\t\tvar tCurrY=NaN;\r\n\t\t\tvar tLastX=-1;\r\n\t\t\tvar tLastY=-1;\r\n\t\t\tvar tLen=points.length / 2;\r\n\t\t\tfor (var i=0;i < tLen;i++){\r\n\t\t\t\ttCurrX=points[i *2];\r\n\t\t\t\ttCurrY=points[i *2+1];\r\n\t\t\t\tif (Math.abs(tLastX-tCurrX)> 0.01 || Math.abs(tLastY-tCurrY)>0.01){\r\n\t\t\t\t\tthis._points.push(tCurrX,tCurrY);\r\n\t\t\t\t}\r\n\t\t\t\ttLastX=tCurrX;\r\n\t\t\t\ttLastY=tCurrY;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__proto.getData=function(ib,vb,start){\r\n\t\t\tvar indices=[];\r\n\t\t\tvar verts=[];\r\n\t\t\t(this.borderWidth > 0)&& this.createLine2(this._points,indices,this.borderWidth,start,verts,this._points.length / 2);\r\n\t\t\tthis.mUint16Array.set(indices,0);\r\n\t\t\tthis.mFloat32Array.set(verts,0);\r\n\t\t\tib.append(this.mUint16Array);\r\n\t\t\tvb.append(this.mFloat32Array);\r\n\t\t}\r\n\r\n\t\treturn Line;\r\n\t})(BasePoly)\r\n\r\n\r\n\t//class laya.webgl.shapes.LoopLine extends laya.webgl.shapes.BasePoly\r\n\tvar LoopLine=(function(_super){\r\n\t\tfunction LoopLine(x,y,points,width,color){\r\n\t\t\tthis._points=[];\r\n\t\t\tvar tCurrX=NaN;\r\n\t\t\tvar tCurrY=NaN;\r\n\t\t\tvar tLastX=-1;\r\n\t\t\tvar tLastY=-1;\r\n\t\t\tvar tLen=points.length / 2-1;\r\n\t\t\tfor (var i=0;i < tLen;i++){\r\n\t\t\t\ttCurrX=points[i *2];\r\n\t\t\t\ttCurrY=points[i *2+1];\r\n\t\t\t\tif (Math.abs(tLastX-tCurrX)> 0.01 || Math.abs(tLastY-tCurrY)> 0.01){\r\n\t\t\t\t\tthis._points.push(tCurrX,tCurrY);\r\n\t\t\t\t}\r\n\t\t\t\ttLastX=tCurrX;\r\n\t\t\t\ttLastY=tCurrY;\r\n\t\t\t}\r\n\t\t\ttCurrX=points[tLen *2];\r\n\t\t\ttCurrY=points[tLen *2+1];\r\n\t\t\ttLastX=this._points[0];\r\n\t\t\ttLastY=this._points[1];\r\n\t\t\tif (Math.abs(tLastX-tCurrX)> 0.01 || Math.abs(tLastY-tCurrY)> 0.01){\r\n\t\t\t\tthis._points.push(tCurrX,tCurrY);\r\n\t\t\t}\r\n\t\t\tLoopLine.__super.call(this,x,y,0,0,this._points.length / 2,0,width,color);\r\n\t\t}\r\n\r\n\t\t__class(LoopLine,'laya.webgl.shapes.LoopLine',_super);\r\n\t\tvar __proto=LoopLine.prototype;\r\n\t\t__proto.getData=function(ib,vb,start){\r\n\t\t\tif (this.borderWidth > 0){\r\n\t\t\t\tvar color=this.color;\r\n\t\t\t\tvar r=((color >> 16)& 0x0000ff)/ 255,g=((color >> 8)& 0xff)/ 255,b=(color & 0x0000ff)/ 255;\r\n\t\t\t\tvar verts=[];\r\n\t\t\t\tvar tLastX=-1,tLastY=-1;\r\n\t\t\t\tvar tCurrX=0,tCurrY=0;\r\n\t\t\t\tvar indices=[];\r\n\t\t\t\tvar tLen=Math.floor(this._points.length / 2);\r\n\t\t\t\tfor (var i=0;i < tLen;i++){\r\n\t\t\t\t\ttCurrX=this._points[i *2];\r\n\t\t\t\t\ttCurrY=this._points[i *2+1];\r\n\t\t\t\t\tverts.push(this.x+tCurrX,this.y+tCurrY,r,g,b);\r\n\t\t\t\t}\r\n\t\t\t\tthis.createLoopLine(verts,indices,this.borderWidth,start+verts.length / 5);\r\n\t\t\t\tib.append(new Uint16Array(indices));\r\n\t\t\t\tvb.append(new Float32Array(verts));\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__proto.createLoopLine=function(p,indices,lineWidth,len,outVertex,outIndex){\r\n\t\t\tvar tLen=p.length / 5;\r\n\t\t\tvar points=p.concat();\r\n\t\t\tvar result=outVertex ? outVertex :p;\r\n\t\t\tvar color=this.borderColor;\r\n\t\t\tvar r=((color >> 16)& 0x0000ff)/ 255,g=((color >> 8)& 0xff)/ 255,b=(color & 0x0000ff)/ 255;\r\n\t\t\tvar firstPoint=[points[0],points[1]];\r\n\t\t\tvar lastPoint=[points[points.length-5],points[points.length-4]];\r\n\t\t\tvar midPointX=lastPoint[0]+(firstPoint[0]-lastPoint[0])*0.5;\r\n\t\t\tvar midPointY=lastPoint[1]+(firstPoint[1]-lastPoint[1])*0.5;\r\n\t\t\tpoints.unshift(midPointX,midPointY,0,0,0);\r\n\t\t\tpoints.push(midPointX,midPointY,0,0,0);\r\n\t\t\tvar length=points.length / 5;\r\n\t\t\tvar iStart=len,w=lineWidth / 2;\r\n\t\t\tvar px,py,p1x,p1y,p2x,p2y,p3x,p3y;\r\n\t\t\tvar perpx,perpy,perp2x,perp2y,perp3x,perp3y;\r\n\t\t\tvar a1,b1,c1,a2,b2,c2;\r\n\t\t\tvar denom,pdist,dist;\r\n\t\t\tp1x=points[0];\r\n\t\t\tp1y=points[1];\r\n\t\t\tp2x=points[5];\r\n\t\t\tp2y=points[6];\r\n\t\t\tperpx=-(p1y-p2y);\r\n\t\t\tperpy=p1x-p2x;\r\n\t\t\tdist=Math.sqrt(perpx *perpx+perpy *perpy);\r\n\t\t\tperpx=perpx / dist *w;\r\n\t\t\tperpy=perpy / dist *w;\r\n\t\t\tresult.push(p1x-perpx,p1y-perpy,r,g,b,p1x+perpx,p1y+perpy,r,g,b);\r\n\t\t\tfor (var i=1;i < length-1;i++){\r\n\t\t\t\tp1x=points[(i-1)*5];\r\n\t\t\t\tp1y=points[(i-1)*5+1];\r\n\t\t\t\tp2x=points[(i)*5];\r\n\t\t\t\tp2y=points[(i)*5+1];\r\n\t\t\t\tp3x=points[(i+1)*5];\r\n\t\t\t\tp3y=points[(i+1)*5+1];\r\n\t\t\t\tperpx=-(p1y-p2y);\r\n\t\t\t\tperpy=p1x-p2x;\r\n\t\t\t\tdist=Math.sqrt(perpx *perpx+perpy *perpy);\r\n\t\t\t\tperpx=perpx / dist *w;\r\n\t\t\t\tperpy=perpy / dist *w;\r\n\t\t\t\tperp2x=-(p2y-p3y);\r\n\t\t\t\tperp2y=p2x-p3x;\r\n\t\t\t\tdist=Math.sqrt(perp2x *perp2x+perp2y *perp2y);\r\n\t\t\t\tperp2x=perp2x / dist *w;\r\n\t\t\t\tperp2y=perp2y / dist *w;\r\n\t\t\t\ta1=(-perpy+p1y)-(-perpy+p2y);\r\n\t\t\t\tb1=(-perpx+p2x)-(-perpx+p1x);\r\n\t\t\t\tc1=(-perpx+p1x)*(-perpy+p2y)-(-perpx+p2x)*(-perpy+p1y);\r\n\t\t\t\ta2=(-perp2y+p3y)-(-perp2y+p2y);\r\n\t\t\t\tb2=(-perp2x+p2x)-(-perp2x+p3x);\r\n\t\t\t\tc2=(-perp2x+p3x)*(-perp2y+p2y)-(-perp2x+p2x)*(-perp2y+p3y);\r\n\t\t\t\tdenom=a1 *b2-a2 *b1;\r\n\t\t\t\tif (Math.abs(denom)< 0.1){\r\n\t\t\t\t\tdenom+=10.1;\r\n\t\t\t\t\tresult.push(p2x-perpx,p2y-perpy,r,g,b,p2x+perpx,p2y+perpy,r,g,b);\r\n\t\t\t\t\tcontinue ;\r\n\t\t\t\t}\r\n\t\t\t\tpx=(b1 *c2-b2 *c1)/ denom;\r\n\t\t\t\tpy=(a2 *c1-a1 *c2)/ denom;\r\n\t\t\t\tpdist=(px-p2x)*(px-p2x)+(py-p2y)+(py-p2y);\r\n\t\t\t\tresult.push(px,py,r,g,b,p2x-(px-p2x),p2y-(py-p2y),r,g,b);\r\n\t\t\t}\r\n\t\t\tif (outIndex){\r\n\t\t\t\tindices=outIndex;\r\n\t\t\t};\r\n\t\t\tvar groupLen=this.edges+1;\r\n\t\t\tfor (i=1;i < groupLen;i++){\r\n\t\t\t\tindices.push(iStart+(i-1)*2,iStart+(i-1)*2+1,iStart+i *2+1,iStart+i *2+1,iStart+i *2,iStart+(i-1)*2);\r\n\t\t\t}\r\n\t\t\tindices.push(iStart+(i-1)*2,iStart+(i-1)*2+1,iStart+1,iStart+1,iStart,iStart+(i-1)*2);\r\n\t\t\treturn result;\r\n\t\t}\r\n\r\n\t\treturn LoopLine;\r\n\t})(BasePoly)\r\n\r\n\r\n\t//class laya.webgl.shapes.Polygon extends laya.webgl.shapes.BasePoly\r\n\tvar Polygon=(function(_super){\r\n\t\tfunction Polygon(x,y,points,color,borderWidth,borderColor){\r\n\t\t\tthis._points=null;\r\n\t\t\tthis._start=-1;\r\n\t\t\tthis._repaint=false;\r\n\t\t\tthis._mat=Matrix.create();\r\n\t\t\tthis._points=points.slice(0,points.length);\r\n\t\t\tPolygon.__super.call(this,x,y,0,0,this._points.length / 2,color,borderWidth,borderColor);\r\n\t\t}\r\n\r\n\t\t__class(Polygon,'laya.webgl.shapes.Polygon',_super);\r\n\t\tvar __proto=Polygon.prototype;\r\n\t\t__proto.rebuild=function(point){\r\n\t\t\tif (!this._repaint){\r\n\t\t\t\tthis._points.length=0;\r\n\t\t\t\tthis._points=this._points.concat(point);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__proto.setMatrix=function(mat){\r\n\t\t\tmat.copyTo(this._mat);\r\n\t\t}\r\n\r\n\t\t__proto.needUpdate=function(mat){\r\n\t\t\tthis._repaint=(this._mat.a==mat.a && this._mat.b==mat.b && this._mat.c==mat.c && this._mat.d==mat.d && this._mat.tx==mat.tx && this._mat.ty==mat.ty);\r\n\t\t\treturn !this._repaint;\r\n\t\t}\r\n\r\n\t\t__proto.getData=function(ib,vb,start){\r\n\t\t\tvar indices,i=0;\r\n\t\t\tvar tArray=this._points;\r\n\t\t\tvar tLen=0;\r\n\t\t\tif (this.mUint16Array && this.mFloat32Array&&this._repaint){\r\n\t\t\t\tif (this._start !=start){\r\n\t\t\t\t\tthis._start=start;\r\n\t\t\t\t\tindices=[];\r\n\t\t\t\t\ttLen=Math.floor(tArray.length / 2);\r\n\t\t\t\t\tfor (i=2;i < tLen;i++){\r\n\t\t\t\t\t\tindices.push(start,start+i-1,start+i);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.mUint16Array=new Uint16Array(indices);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthis._start=start;\r\n\t\t\t\tindices=[];\r\n\t\t\t\tvar verts=[];\r\n\t\t\t\tvar color=this.color;\r\n\t\t\t\tvar r=((color >> 16)& 0x0000ff)/ 255,g=((color >> 8)& 0xff)/ 255,b=(color & 0x0000ff)/ 255;\r\n\t\t\t\ttLen=Math.floor(tArray.length / 2);\r\n\t\t\t\tfor (i=0;i < tLen;i++){\r\n\t\t\t\t\tverts.push(this.x+tArray[i *2],this.y+tArray[i *2+1],r,g,b);\r\n\t\t\t\t}\r\n\t\t\t\tfor (i=2;i < tLen;i++){\r\n\t\t\t\t\tindices.push(start,start+i-1,start+i);\r\n\t\t\t\t}\r\n\t\t\t\tthis.mUint16Array=new Uint16Array(indices);\r\n\t\t\t\tthis.mFloat32Array=new Float32Array(verts);\r\n\t\t\t}\r\n\t\t\tib.append(this.mUint16Array);\r\n\t\t\tvb.append(this.mFloat32Array);\r\n\t\t}\r\n\r\n\t\treturn Polygon;\r\n\t})(BasePoly)\r\n\r\n\r\n\t//class laya.webgl.submit.SubmitCanvas extends laya.webgl.submit.Submit\r\n\tvar SubmitCanvas=(function(_super){\r\n\t\tfunction SubmitCanvas(){\r\n\t\t\t//this._ctx_src=null;\r\n\t\t\tthis._matrix=new Matrix();\r\n\t\t\tthis._matrix4=CONST3D2D.defaultMatrix4.concat();\r\n\t\t\tSubmitCanvas.__super.call(this,10000);\r\n\t\t\tthis.shaderValue=new Value2D(0,0);\r\n\t\t}\r\n\r\n\t\t__class(SubmitCanvas,'laya.webgl.submit.SubmitCanvas',_super);\r\n\t\tvar __proto=SubmitCanvas.prototype;\r\n\t\t__proto.renderSubmit=function(){\r\n\t\t\tif (this._ctx_src._targets){\r\n\t\t\t\tthis._ctx_src._targets.flush(this._ctx_src);\r\n\t\t\t\treturn 1;\r\n\t\t\t};\r\n\t\t\tvar preAlpha=RenderState2D.worldAlpha;\r\n\t\t\tvar preMatrix4=RenderState2D.worldMatrix4;\r\n\t\t\tvar preMatrix=RenderState2D.worldMatrix;\r\n\t\t\tvar preFilters=RenderState2D.worldFilters;\r\n\t\t\tvar preWorldShaderDefines=RenderState2D.worldShaderDefines;\r\n\t\t\tvar v=this.shaderValue;\r\n\t\t\tvar m=this._matrix;\r\n\t\t\tvar m4=this._matrix4;\r\n\t\t\tvar mout=Matrix.TEMP;\r\n\t\t\tMatrix.mul(m,preMatrix,mout);\r\n\t\t\tm4[0]=mout.a;\r\n\t\t\tm4[1]=mout.b;\r\n\t\t\tm4[4]=mout.c;\r\n\t\t\tm4[5]=mout.d;\r\n\t\t\tm4[12]=mout.tx;\r\n\t\t\tm4[13]=mout.ty;\r\n\t\t\tRenderState2D.worldMatrix=mout.clone();\r\n\t\t\tRenderState2D.worldMatrix4=m4;\r\n\t\t\tRenderState2D.worldAlpha=RenderState2D.worldAlpha *v.alpha;\r\n\t\t\tif (v.filters && v.filters.length){\r\n\t\t\t\tRenderState2D.worldFilters=v.filters;\r\n\t\t\t\tRenderState2D.worldShaderDefines=v.defines;\r\n\t\t\t}\r\n\t\t\tthis._ctx_src.flush();\r\n\t\t\tRenderState2D.worldAlpha=preAlpha;\r\n\t\t\tRenderState2D.worldMatrix4=preMatrix4;\r\n\t\t\tRenderState2D.worldMatrix.destroy();\r\n\t\t\tRenderState2D.worldMatrix=preMatrix;\r\n\t\t\tRenderState2D.worldFilters=preFilters;\r\n\t\t\tRenderState2D.worldShaderDefines=preWorldShaderDefines;\r\n\t\t\treturn 1;\r\n\t\t}\r\n\r\n\t\t__proto.releaseRender=function(){\r\n\t\t\tvar cache=SubmitCanvas._cache;\r\n\t\t\tcache[cache._length++]=this;\r\n\t\t}\r\n\r\n\t\t__proto.getRenderType=function(){\r\n\t\t\treturn 10003;\r\n\t\t}\r\n\r\n\t\tSubmitCanvas.create=function(ctx_src,alpha,filters){\r\n\t\t\tvar o=(!SubmitCanvas._cache._length)? (new SubmitCanvas()):SubmitCanvas._cache[--SubmitCanvas._cache._length];\r\n\t\t\to._ctx_src=ctx_src;\r\n\t\t\tvar v=o.shaderValue;\r\n\t\t\tv.alpha=alpha;\r\n\t\t\tv.defines.setValue(0);\r\n\t\t\tfilters && filters.length && v.setFilters(filters);\r\n\t\t\treturn o;\r\n\t\t}\r\n\r\n\t\tSubmitCanvas._cache=(SubmitCanvas._cache=[],SubmitCanvas._cache._length=0,SubmitCanvas._cache);\r\n\t\treturn SubmitCanvas;\r\n\t})(Submit)\r\n\r\n\r\n\t//class laya.webgl.submit.SubmitTexture extends laya.webgl.submit.Submit\r\n\tvar SubmitTexture=(function(_super){\r\n\t\tfunction SubmitTexture(renderType){\r\n\t\t\tthis._preIsSameTextureShader=false;\r\n\t\t\tthis._isSameTexture=true;\r\n\t\t\tthis._texs=new Array;\r\n\t\t\tthis._texsID=new Array;\r\n\t\t\tthis._vbPos=new Array;\r\n\t\t\t(renderType===void 0)&& (renderType=10000);\r\n\t\t\tSubmitTexture.__super.call(this,renderType);\r\n\t\t}\r\n\r\n\t\t__class(SubmitTexture,'laya.webgl.submit.SubmitTexture',_super);\r\n\t\tvar __proto=SubmitTexture.prototype;\r\n\t\t__proto.releaseRender=function(){\r\n\t\t\tvar cache=SubmitTexture._cache;\r\n\t\t\tcache[cache._length++]=this;\r\n\t\t\tthis.shaderValue.release();\r\n\t\t\tthis._preIsSameTextureShader=false;\r\n\t\t\tthis._vb=null;\r\n\t\t\tthis._texs.length=0;\r\n\t\t\tthis._vbPos.length=0;\r\n\t\t\tthis._isSameTexture=true;\r\n\t\t}\r\n\r\n\t\t__proto.addTexture=function(tex,vbpos){\r\n\t\t\tthis._texsID[this._texs.length]=tex._uvID;\r\n\t\t\tthis._texs.push(tex);\r\n\t\t\tthis._vbPos.push(vbpos);\r\n\t\t}\r\n\r\n\t\t//检查材质是否修改，修改UV，设置是否是同一材质\r\n\t\t__proto.checkTexture=function(){\r\n\t\t\tif (this._texs.length < 1){\r\n\t\t\t\tthis._isSameTexture=true;\r\n\t\t\t\treturn;\r\n\t\t\t};\r\n\t\t\tvar _tex=this.shaderValue.textureHost;\r\n\t\t\tvar webGLImg=_tex.bitmap;\r\n\t\t\tif (webGLImg===null)return;\r\n\t\t\tvar vbdata=this._vb.getFloat32Array();\r\n\t\t\tfor (var i=0,s=this._texs.length;i < s;i++){\r\n\t\t\t\tvar tex=this._texs[i];\r\n\t\t\t\ttex.active();\r\n\t\t\t\tvar newUV=tex.uv;\r\n\t\t\t\tif (this._texsID[i]!==tex._uvID){\r\n\t\t\t\t\tthis._texsID[i]=tex._uvID;\r\n\t\t\t\t\tvar vbPos=this._vbPos[i];\r\n\t\t\t\t\tvbdata[vbPos+2]=newUV[0];\r\n\t\t\t\t\tvbdata[vbPos+3]=newUV[1];\r\n\t\t\t\t\tvbdata[vbPos+6]=newUV[2];\r\n\t\t\t\t\tvbdata[vbPos+7]=newUV[3];\r\n\t\t\t\t\tvbdata[vbPos+10]=newUV[4];\r\n\t\t\t\t\tvbdata[vbPos+11]=newUV[5];\r\n\t\t\t\t\tvbdata[vbPos+14]=newUV[6];\r\n\t\t\t\t\tvbdata[vbPos+15]=newUV[7];\r\n\t\t\t\t\tthis._vb.setNeedUpload();\r\n\t\t\t\t}\r\n\t\t\t\tif (tex.bitmap!==webGLImg){\r\n\t\t\t\t\tthis._isSameTexture=false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__proto.renderSubmit=function(){\r\n\t\t\tif (this._numEle===0){\r\n\t\t\t\tSubmitTexture._shaderSet=false;\r\n\t\t\t\treturn 1;\r\n\t\t\t};\r\n\t\t\tvar _tex=this.shaderValue.textureHost;\r\n\t\t\tif (_tex){\r\n\t\t\t\tvar source=_tex.source;\r\n\t\t\t\tif (!_tex.bitmap || !source){\r\n\t\t\t\t\tSubmitTexture._shaderSet=false;\r\n\t\t\t\t\treturn 1;\r\n\t\t\t\t}\r\n\t\t\t\tthis.shaderValue.texture=source;\r\n\t\t\t}\r\n\t\t\tthis._vb.bind_upload(this._ib);\r\n\t\t\tvar gl=WebGL.mainContext;\r\n\t\t\tif (BlendMode.activeBlendFunction!==this._blendFn){\r\n\t\t\t\tgl.enable(0x0BE2);\r\n\t\t\t\tthis._blendFn(gl);\r\n\t\t\t\tBlendMode.activeBlendFunction=this._blendFn;\r\n\t\t\t}\r\n\t\t\tStat.drawCall++;\r\n\t\t\tStat.trianglesFaces+=this._numEle / 3;\r\n\t\t\tif (this._preIsSameTextureShader && BaseShader.activeShader && SubmitTexture._shaderSet)\r\n\t\t\t\t(BaseShader.activeShader).uploadTexture2D(this.shaderValue.texture);\r\n\t\t\telse this.shaderValue.upload();\r\n\t\t\tSubmitTexture._shaderSet=true;\r\n\t\t\tif (this._texs.length > 1 && !this._isSameTexture){\r\n\t\t\t\tvar webGLImg=_tex.bitmap;\r\n\t\t\t\tvar index=0;\r\n\t\t\t\tvar shader=BaseShader.activeShader;\r\n\t\t\t\tfor (var i=0,s=this._texs.length;i < s;i++){\r\n\t\t\t\t\tvar tex2=this._texs[i];\r\n\t\t\t\t\tif (tex2.bitmap!==webGLImg || (i+1)===s){\r\n\t\t\t\t\t\tshader.uploadTexture2D(tex2.source);\r\n\t\t\t\t\t\tgl.drawElements(0x0004,(i-index+1)*6,0x1403,this._startIdx+index *6 *CONST3D2D.BYTES_PIDX);\r\n\t\t\t\t\t\twebGLImg=tex2.bitmap;\r\n\t\t\t\t\t\tindex=i;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t}else {\r\n\t\t\t\tgl.drawElements(0x0004,this._numEle,0x1403,this._startIdx);\r\n\t\t\t}\r\n\t\t\treturn 1;\r\n\t\t}\r\n\r\n\t\tSubmitTexture.create=function(context,ib,vb,pos,sv){\r\n\t\t\tvar o=SubmitTexture._cache._length ? SubmitTexture._cache[--SubmitTexture._cache._length] :new SubmitTexture();\r\n\t\t\tif (vb==null){\r\n\t\t\t\tvb=o._selfVb || (o._selfVb=VertexBuffer2D.create(-1));\r\n\t\t\t\tvb.clear();\r\n\t\t\t\tpos=0;\r\n\t\t\t}\r\n\t\t\to._ib=ib;\r\n\t\t\to._vb=vb;\r\n\t\t\to._startIdx=pos *CONST3D2D.BYTES_PIDX;\r\n\t\t\to._numEle=0;\r\n\t\t\tvar blendType=context._nBlendType;\r\n\t\t\to._blendFn=context._targets ? BlendMode.targetFns[blendType] :BlendMode.fns[blendType];\r\n\t\t\to.shaderValue=sv;\r\n\t\t\to.shaderValue.setValue(context._shader2D);\r\n\t\t\tvar filters=context._shader2D.filters;\r\n\t\t\tfilters && o.shaderValue.setFilters(filters);\r\n\t\t\treturn o;\r\n\t\t}\r\n\r\n\t\tSubmitTexture._cache=(SubmitTexture._cache=[],SubmitTexture._cache._length=0,SubmitTexture._cache);\r\n\t\tSubmitTexture._shaderSet=true;\r\n\t\treturn SubmitTexture;\r\n\t})(Submit)\r\n\r\n\r\n\t/**\r\n\t*<p> <code>Sprite</code> 类是基本显示列表构造块：一个可显示图形并且也可包含子项的显示列表节点。</p>\r\n\t*\r\n\t*@example 以下示例代码，创建了一个 <code>Text</code> 实例。\r\n\t*<listing version=\"3.0\">\r\n\t*package\r\n\t*{\r\n\t\t*import laya.display.Sprite;\r\n\t\t*import laya.events.Event;\r\n\t\t*\r\n\t\t*public class Sprite_Example\r\n\t\t*{\r\n\t\t\t*private var sprite:Sprite;\r\n\t\t\t*private var shape:Sprite\r\n\t\t\t*public function Sprite_Example()\r\n\t\t\t*{\r\n\t\t\t\t*Laya.init(640,800);//设置游戏画布宽高、渲染模式。\r\n\t\t\t\t*Laya.stage.bgColor=\"#efefef\";//设置画布的背景颜色。\r\n\t\t\t\t*onInit();\r\n\t\t\t\t*}\r\n\t\t\t*private function onInit():void\r\n\t\t\t*{\r\n\t\t\t\t*sprite=new Sprite();//创建一个 Sprite 类的实例对象 sprite 。\r\n\t\t\t\t*sprite.loadImage(\"resource/ui/bg.png\");//加载并显示图片。\r\n\t\t\t\t*sprite.x=200;//设置 sprite 对象相对于父容器的水平方向坐标值。\r\n\t\t\t\t*sprite.y=200;//设置 sprite 对象相对于父容器的垂直方向坐标值。\r\n\t\t\t\t*sprite.pivotX=0;//设置 sprite 对象的水平方法轴心点坐标。\r\n\t\t\t\t*sprite.pivotY=0;//设置 sprite 对象的垂直方法轴心点坐标。\r\n\t\t\t\t*Laya.stage.addChild(sprite);//将此 sprite 对象添加到显示列表。\r\n\t\t\t\t*sprite.on(Event.CLICK,this,onClickSprite);//给 sprite 对象添加点击事件侦听。\r\n\t\t\t\t*shape=new Sprite();//创建一个 Sprite 类的实例对象 sprite 。\r\n\t\t\t\t*shape.graphics.drawRect(0,0,100,100,\"#ccff00\",\"#ff0000\",2);//绘制一个有边框的填充矩形。\r\n\t\t\t\t*shape.x=400;//设置 shape 对象相对于父容器的水平方向坐标值。\r\n\t\t\t\t*shape.y=200;//设置 shape 对象相对于父容器的垂直方向坐标值。\r\n\t\t\t\t*shape.width=100;//设置 shape 对象的宽度。\r\n\t\t\t\t*shape.height=100;//设置 shape 对象的高度。\r\n\t\t\t\t*shape.pivotX=50;//设置 shape 对象的水平方法轴心点坐标。\r\n\t\t\t\t*shape.pivotY=50;//设置 shape 对象的垂直方法轴心点坐标。\r\n\t\t\t\t*Laya.stage.addChild(shape);//将此 shape 对象添加到显示列表。\r\n\t\t\t\t*shape.on(Event.CLICK,this,onClickShape);//给 shape 对象添加点击事件侦听。\r\n\t\t\t\t*}\r\n\t\t\t*private function onClickSprite():void\r\n\t\t\t*{\r\n\t\t\t\t*trace(\"点击 sprite 对象。\");\r\n\t\t\t\t*sprite.rotation+=5;//旋转 sprite 对象。\r\n\t\t\t\t*}\r\n\t\t\t*private function onClickShape():void\r\n\t\t\t*{\r\n\t\t\t\t*trace(\"点击 shape 对象。\");\r\n\t\t\t\t*shape.rotation+=5;//旋转 shape 对象。\r\n\t\t\t\t*}\r\n\t\t\t*}\r\n\t\t*}\r\n\t*</listing>\r\n\t*<listing version=\"3.0\">\r\n\t*var sprite;\r\n\t*var shape;\r\n\t*Sprite_Example();\r\n\t*function Sprite_Example()\r\n\t*{\r\n\t\t*Laya.init(640,800);//设置游戏画布宽高、渲染模式。\r\n\t\t*Laya.stage.bgColor=\"#efefef\";//设置画布的背景颜色。\r\n\t\t*onInit();\r\n\t\t*}\r\n\t*function onInit()\r\n\t*{\r\n\t\t*sprite=new laya.display.Sprite();//创建一个 Sprite 类的实例对象 sprite 。\r\n\t\t*sprite.loadImage(\"resource/ui/bg.png\");//加载并显示图片。\r\n\t\t*sprite.x=200;//设置 sprite 对象相对于父容器的水平方向坐标值。\r\n\t\t*sprite.y=200;//设置 sprite 对象相对于父容器的垂直方向坐标值。\r\n\t\t*sprite.pivotX=0;//设置 sprite 对象的水平方法轴心点坐标。\r\n\t\t*sprite.pivotY=0;//设置 sprite 对象的垂直方法轴心点坐标。\r\n\t\t*Laya.stage.addChild(sprite);//将此 sprite 对象添加到显示列表。\r\n\t\t*sprite.on(Event.CLICK,this,onClickSprite);//给 sprite 对象添加点击事件侦听。\r\n\t\t*shape=new laya.display.Sprite();//创建一个 Sprite 类的实例对象 sprite 。\r\n\t\t*shape.graphics.drawRect(0,0,100,100,\"#ccff00\",\"#ff0000\",2);//绘制一个有边框的填充矩形。\r\n\t\t*shape.x=400;//设置 shape 对象相对于父容器的水平方向坐标值。\r\n\t\t*shape.y=200;//设置 shape 对象相对于父容器的垂直方向坐标值。\r\n\t\t*shape.width=100;//设置 shape 对象的宽度。\r\n\t\t*shape.height=100;//设置 shape 对象的高度。\r\n\t\t*shape.pivotX=50;//设置 shape 对象的水平方法轴心点坐标。\r\n\t\t*shape.pivotY=50;//设置 shape 对象的垂直方法轴心点坐标。\r\n\t\t*Laya.stage.addChild(shape);//将此 shape 对象添加到显示列表。\r\n\t\t*shape.on(laya.events.Event.CLICK,this,onClickShape);//给 shape 对象添加点击事件侦听。\r\n\t\t*}\r\n\t*function onClickSprite()\r\n\t*{\r\n\t\t*console.log(\"点击 sprite 对象。\");\r\n\t\t*sprite.rotation+=5;//旋转 sprite 对象。\r\n\t\t*}\r\n\t*function onClickShape()\r\n\t*{\r\n\t\t*console.log(\"点击 shape 对象。\");\r\n\t\t*shape.rotation+=5;//旋转 shape 对象。\r\n\t\t*}\r\n\t*</listing>\r\n\t*<listing version=\"3.0\">\r\n\t*import Sprite=laya.display.Sprite;\r\n\t*class Sprite_Example {\r\n\t\t*private sprite:Sprite;\r\n\t\t*private shape:Sprite\r\n\t\t*public Sprite_Example(){\r\n\t\t\t*Laya.init(640,800);//设置游戏画布宽高、渲染模式。\r\n\t\t\t*Laya.stage.bgColor=\"#efefef\";//设置画布的背景颜色。\r\n\t\t\t*this.onInit();\r\n\t\t\t*}\r\n\t\t*private onInit():void {\r\n\t\t\t*this.sprite=new Sprite();//创建一个 Sprite 类的实例对象 sprite 。\r\n\t\t\t*this.sprite.loadImage(\"resource/ui/bg.png\");//加载并显示图片。\r\n\t\t\t*this.sprite.x=200;//设置 sprite 对象相对于父容器的水平方向坐标值。\r\n\t\t\t*this.sprite.y=200;//设置 sprite 对象相对于父容器的垂直方向坐标值。\r\n\t\t\t*this.sprite.pivotX=0;//设置 sprite 对象的水平方法轴心点坐标。\r\n\t\t\t*this.sprite.pivotY=0;//设置 sprite 对象的垂直方法轴心点坐标。\r\n\t\t\t*Laya.stage.addChild(this.sprite);//将此 sprite 对象添加到显示列表。\r\n\t\t\t*this.sprite.on(laya.events.Event.CLICK,this,this.onClickSprite);//给 sprite 对象添加点击事件侦听。\r\n\t\t\t*this.shape=new Sprite();//创建一个 Sprite 类的实例对象 sprite 。\r\n\t\t\t*this.shape.graphics.drawRect(0,0,100,100,\"#ccff00\",\"#ff0000\",2);//绘制一个有边框的填充矩形。\r\n\t\t\t*this.shape.x=400;//设置 shape 对象相对于父容器的水平方向坐标值。\r\n\t\t\t*this.shape.y=200;//设置 shape 对象相对于父容器的垂直方向坐标值。\r\n\t\t\t*this.shape.width=100;//设置 shape 对象的宽度。\r\n\t\t\t*this.shape.height=100;//设置 shape 对象的高度。\r\n\t\t\t*this.shape.pivotX=50;//设置 shape 对象的水平方法轴心点坐标。\r\n\t\t\t*this.shape.pivotY=50;//设置 shape 对象的垂直方法轴心点坐标。\r\n\t\t\t*Laya.stage.addChild(this.shape);//将此 shape 对象添加到显示列表。\r\n\t\t\t*this.shape.on(laya.events.Event.CLICK,this,this.onClickShape);//给 shape 对象添加点击事件侦听。\r\n\t\t\t*}\r\n\t\t*private onClickSprite():void {\r\n\t\t\t*console.log(\"点击 sprite 对象。\");\r\n\t\t\t*this.sprite.rotation+=5;//旋转 sprite 对象。\r\n\t\t\t*}\r\n\t\t*private onClickShape():void {\r\n\t\t\t*console.log(\"点击 shape 对象。\");\r\n\t\t\t*this.shape.rotation+=5;//旋转 shape 对象。\r\n\t\t\t*}\r\n\t\t*}\r\n\t*</listing>\r\n\t*/\r\n\t//class laya.display.Sprite extends laya.display.Node\r\n\tvar Sprite=(function(_super){\r\n\t\tfunction Sprite(){\r\n\t\t\tthis.mouseThrough=false;\r\n\t\t\tthis._transform=null;\r\n\t\t\tthis._tfChanged=false;\r\n\t\t\tthis._x=0;\r\n\t\t\tthis._y=0;\r\n\t\t\tthis._width=0;\r\n\t\t\tthis._height=0;\r\n\t\t\tthis._repaint=1;\r\n\t\t\tthis._changeType=0;\r\n\t\t\tthis._mouseEnableState=0;\r\n\t\t\tthis._zOrder=0;\r\n\t\t\tthis._graphics=null;\r\n\t\t\tthis._renderType=0;\r\n\t\t\tthis.autoSize=false;\r\n\t\t\tthis.hitTestPrior=false;\r\n\t\t\tthis.viewport=null;\r\n\t\t\tthis._optimizeScrollRect=false;\r\n\t\t\tthis._texture=null;\r\n\t\t\tSprite.__super.call(this);\r\n\t\t\tthis._style=Style.EMPTY;\r\n\t\t}\r\n\r\n\t\t__class(Sprite,'laya.display.Sprite',_super);\r\n\t\tvar __proto=Sprite.prototype;\r\n\t\tLaya.imps(__proto,{\"laya.display.ILayout\":true})\r\n\t\t__proto.createConchModel=function(){\r\n\t\t\treturn new ConchNode();\r\n\t\t}\r\n\r\n\t\t/**@inheritDoc */\r\n\t\t__proto.destroy=function(destroyChild){\r\n\t\t\t(destroyChild===void 0)&& (destroyChild=true);\r\n\t\t\t_super.prototype.destroy.call(this,destroyChild);\r\n\t\t\tthis._style && this._style.destroy();\r\n\t\t\tthis._transform=null;\r\n\t\t\tthis._style=null;\r\n\t\t\tthis._graphics=null;\r\n\t\t}\r\n\r\n\t\t/**根据zOrder进行重新排序。*/\r\n\t\t__proto.updateZOrder=function(){\r\n\t\t\tUtils1.updateOrder(this._childs)&& this.repaint();\r\n\t\t}\r\n\r\n\t\t/**在设置cacheAs或staticCache=true的情况下，调用此方法会重新刷新缓存。*/\r\n\t\t__proto.reCache=function(){\r\n\t\t\tif (this._$P.cacheCanvas)this._$P.cacheCanvas.reCache=true;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*设置bounds大小，如果有设置，则不再通过getBounds计算\r\n\t\t*@param bound bounds矩形区域\r\n\t\t*/\r\n\t\t__proto.setBounds=function(bound){\r\n\t\t\tthis._set$P(\"uBounds\",bound);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*获取本对象在父容器坐标系的矩形显示区域。\r\n\t\t*<p><b>注意：</b>计算量较大，尽量少用。</p>\r\n\t\t*@return 矩形区域。\r\n\t\t*/\r\n\t\t__proto.getBounds=function(){\r\n\t\t\tif (!this._$P.mBounds)this._set$P(\"mBounds\",new Rectangle());\r\n\t\t\treturn Rectangle._getWrapRec(this._boundPointsToParent(),this._$P.mBounds);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*获取本对象在自己坐标系的矩形显示区域。\r\n\t\t*<p><b>注意：</b>计算量较大，尽量少用。</p>\r\n\t\t*@return 矩形区域。\r\n\t\t*/\r\n\t\t__proto.getSelfBounds=function(){\r\n\t\t\tif (!this._$P.mBounds)this._set$P(\"mBounds\",new Rectangle());\r\n\t\t\treturn Rectangle._getWrapRec(this._getBoundPointsM(false),this._$P.mBounds);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*获取本对象在父容器坐标系的显示区域多边形顶点列表。\r\n\t\t*当显示对象链中有旋转时，返回多边形顶点列表，无旋转时返回矩形的四个顶点。\r\n\t\t*@param ifRotate 之前的对象链中是否有旋转。\r\n\t\t*@return 顶点列表。结构：[x1,y1,x2,y2,x3,y3,...]。\r\n\t\t*/\r\n\t\t__proto._boundPointsToParent=function(ifRotate){\r\n\t\t\t(ifRotate===void 0)&& (ifRotate=false);\r\n\t\t\tvar pX=0,pY=0;\r\n\t\t\tif (this._style){\r\n\t\t\t\tpX=this._style._tf.translateX;\r\n\t\t\t\tpY=this._style._tf.translateY;\r\n\t\t\t\tifRotate=ifRotate || (this._style._tf.rotate!==0);\r\n\t\t\t\tif (this._style.scrollRect){\r\n\t\t\t\t\tpX+=this._style.scrollRect.x;\r\n\t\t\t\t\tpY+=this._style.scrollRect.y;\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\tvar pList=this._getBoundPointsM(ifRotate);\r\n\t\t\tif (!pList || pList.length < 1)return pList;\r\n\t\t\tif (pList.length !=8){\r\n\t\t\t\tpList=ifRotate ? GrahamScan.scanPList(pList):Rectangle._getWrapRec(pList,Rectangle.TEMP)._getBoundPoints();\r\n\t\t\t}\r\n\t\t\tif (!this.transform){\r\n\t\t\t\tUtils1.transPointList(pList,this.x-pX,this.y-pY);\r\n\t\t\t\treturn pList;\r\n\t\t\t};\r\n\t\t\tvar tPoint=Point.TEMP;\r\n\t\t\tvar i=0,len=pList.length;\r\n\t\t\tfor (i=0;i < len;i+=2){\r\n\t\t\t\ttPoint.x=pList[i];\r\n\t\t\t\ttPoint.y=pList[i+1];\r\n\t\t\t\tthis.toParentPoint(tPoint);\r\n\t\t\t\tpList[i]=tPoint.x;\r\n\t\t\t\tpList[i+1]=tPoint.y;\r\n\t\t\t}\r\n\t\t\treturn pList;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*返回此实例中的绘图对象（ <code>Graphics</code> ）的显示区域。\r\n\t\t*@return 一个 Rectangle 对象，表示获取到的显示区域。\r\n\t\t*/\r\n\t\t__proto.getGraphicBounds=function(){\r\n\t\t\tif (!this._graphics)return Rectangle.TEMP.setTo(0,0,0,0);\r\n\t\t\treturn this._graphics.getBounds();\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*获取自己坐标系的显示区域多边形顶点列表\r\n\t\t*@param ifRotate 当前的显示对象链是否由旋转\r\n\t\t*@return 顶点列表。结构：[x1,y1,x2,y2,x3,y3,...]。\r\n\t\t*/\r\n\t\t__proto._getBoundPointsM=function(ifRotate){\r\n\t\t\t(ifRotate===void 0)&& (ifRotate=false);\r\n\t\t\tif (this._$P.uBounds)return this._$P.uBounds._getBoundPoints();\r\n\t\t\tif (!this._$P.temBM)this._set$P(\"temBM\",[]);\r\n\t\t\tif (this.scrollRect){\r\n\t\t\t\tvar rst=Utils1.clearArray(this._$P.temBM);\r\n\t\t\t\tvar rec=Rectangle.TEMP;\r\n\t\t\t\trec.copyFrom(this.scrollRect);\r\n\t\t\t\tUtils1.concatArray(rst,rec._getBoundPoints());\r\n\t\t\t\treturn rst;\r\n\t\t\t};\r\n\t\t\tvar pList=this._graphics ? this._graphics.getBoundPoints():Utils1.clearArray(this._$P.temBM);\r\n\t\t\tvar child;\r\n\t\t\tvar cList;\r\n\t\t\tvar __childs;\r\n\t\t\t__childs=this._childs;\r\n\t\t\tfor (var i=0,n=__childs.length;i < n;i++){\r\n\t\t\t\tchild=__childs [i];\r\n\t\t\t\tif ((child instanceof laya.display.Sprite )&& child.visible==true){\r\n\t\t\t\t\tcList=child._boundPointsToParent(ifRotate);\r\n\t\t\t\t\tif (cList)\r\n\t\t\t\t\t\tpList=pList ? Utils1.concatArray(pList,cList):cList;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn pList;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*获取样式。\r\n\t\t*@return 样式 Style 。\r\n\t\t*/\r\n\t\t__proto.getStyle=function(){\r\n\t\t\tthis._style===Style.EMPTY && (this._style=new Style());\r\n\t\t\treturn this._style;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*设置样式。\r\n\t\t*@param value 样式。\r\n\t\t*/\r\n\t\t__proto.setStyle=function(value){\r\n\t\t\tthis._style=value;\r\n\t\t}\r\n\r\n\t\t/**@private */\r\n\t\t__proto._adjustTransform=function(){\r\n\t\t\t'use strict';\r\n\t\t\tthis._tfChanged=false;\r\n\t\t\tvar style=this._style;\r\n\t\t\tvar tf=style._tf;\r\n\t\t\tvar sx=tf.scaleX,sy=tf.scaleY;\r\n\t\t\tvar m;\r\n\t\t\tif (tf.rotate || sx!==1 || sy!==1 || tf.skewX || tf.skewY){\r\n\t\t\t\tm=this._transform || (this._transform=Matrix.create());\r\n\t\t\t\tm.bTransform=true;\r\n\t\t\t\tif (tf.rotate){\r\n\t\t\t\t\tvar angle=tf.rotate *0.0174532922222222;\r\n\t\t\t\t\tvar cos=m.cos=Math.cos(angle);\r\n\t\t\t\t\tvar sin=m.sin=Math.sin(angle);\r\n\t\t\t\t\tm.a=sx *cos;\r\n\t\t\t\t\tm.b=sx *sin;\r\n\t\t\t\t\tm.c=-sy *sin;\r\n\t\t\t\t\tm.d=sy *cos;\r\n\t\t\t\t\tm.tx=m.ty=0;\r\n\t\t\t\t\treturn m;\r\n\t\t\t\t\t}else {\r\n\t\t\t\t\tm.a=sx;\r\n\t\t\t\t\tm.d=sy;\r\n\t\t\t\t\tm.c=m.b=m.tx=m.ty=0;\r\n\t\t\t\t\tif (tf.skewX || tf.skewY){\r\n\t\t\t\t\t\treturn m.skew(tf.skewX *0.0174532922222222,tf.skewY *0.0174532922222222);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn m;\r\n\t\t\t\t}\r\n\t\t\t\t}else {\r\n\t\t\t\tthis._transform && this._transform.destroy();\r\n\t\t\t\tthis._transform=null;\r\n\t\t\t\tthis._renderType &=~0x04;\r\n\t\t\t}\r\n\t\t\treturn m;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*设置坐标位置。\r\n\t\t*@param x X 轴坐标。\r\n\t\t*@param y Y 轴坐标。\r\n\t\t*@return 返回对象本身。\r\n\t\t*/\r\n\t\t__proto.pos=function(x,y){\r\n\t\t\tif (this._x!==x || this._y!==y){\r\n\t\t\t\tthis.x=x;\r\n\t\t\t\tthis.y=y;\r\n\t\t\t}\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*设置轴心点。\r\n\t\t*@param x X轴心点。\r\n\t\t*@param y Y轴心点。\r\n\t\t*@return 返回对象本身。\r\n\t\t*/\r\n\t\t__proto.pivot=function(x,y){\r\n\t\t\tthis.pivotX=x;\r\n\t\t\tthis.pivotY=y;\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*设置宽高。\r\n\t\t*@param width 宽度。\r\n\t\t*@param hegiht 高度。\r\n\t\t*@return 返回对象本身。\r\n\t\t*/\r\n\t\t__proto.size=function(width,height){\r\n\t\t\tthis.width=width;\r\n\t\t\tthis.height=height;\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*设置缩放。\r\n\t\t*@param scaleX X轴缩放比例。\r\n\t\t*@param scaleY Y轴缩放比例。\r\n\t\t*@return 返回对象本身。\r\n\t\t*/\r\n\t\t__proto.scale=function(scaleX,scaleY){\r\n\t\t\tthis.scaleX=scaleX;\r\n\t\t\tthis.scaleY=scaleY;\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*设置倾斜角度。\r\n\t\t*@param skewX 水平倾斜角度。\r\n\t\t*@param skewY 垂直倾斜角度。\r\n\t\t*@return 返回对象本身\r\n\t\t*/\r\n\t\t__proto.skew=function(skewX,skewY){\r\n\t\t\tthis.skewX=skewX;\r\n\t\t\tthis.skewY=skewY;\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*更新、呈现显示对象。\r\n\t\t*@param context 渲染的上下文引用。\r\n\t\t*@param x X轴坐标。\r\n\t\t*@param y Y轴坐标。\r\n\t\t*/\r\n\t\t__proto.render=function(context,x,y){\r\n\t\t\tStat.spriteCount++;\r\n\t\t\tRenderSprite.renders[this._renderType]._fun(this,context,x+this._x,y+this._y);\r\n\t\t\tthis._repaint=0;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*绘制 <code>Sprite</code> 到 <code>canvas</code> 上。\r\n\t\t*@param canvasWidth 画布宽度。\r\n\t\t*@param canvasHeight 画布高度。\r\n\t\t*@param x 绘制的 X 轴偏移量。\r\n\t\t*@param y 绘制的 Y 轴偏移量。\r\n\t\t*@return HTMLCanvas 对象。\r\n\t\t*/\r\n\t\t__proto.drawToCanvas=function(canvasWidth,canvasHeight,offsetX,offsetY){\r\n\t\t\treturn RunDriver.drawToCanvas(this,this._renderType,canvasWidth,canvasHeight,offsetX,offsetY);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*自定义更新、呈现显示对象。\r\n\t\t*<p><b>注意</b>不要在此函数内增加或删除树节点，否则会树节点遍历照成影响。</p>\r\n\t\t*@param context 渲染的上下文引用。\r\n\t\t*@param x X轴坐标。\r\n\t\t*@param y Y轴坐标。\r\n\t\t*/\r\n\t\t__proto.customRender=function(context,x,y){\r\n\t\t\tthis._renderType |=0x400;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*应用滤镜。\r\n\t\t*/\r\n\t\t__proto._applyFilters=function(){\r\n\t\t\tif (Render.isWebGL)return;\r\n\t\t\tvar _filters;\r\n\t\t\t_filters=this._$P.filters;\r\n\t\t\tif (!_filters || _filters.length < 1)return;\r\n\t\t\tfor (var i=0,n=_filters.length;i < n;i++){\r\n\t\t\t\t_filters[i].action.apply(this._$P.cacheCanvas);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*查看当前原件中是否包含发光滤镜。\r\n\t\t*@return 一个 Boolean 值，表示当前原件中是否包含发光滤镜。\r\n\t\t*/\r\n\t\t__proto._isHaveGlowFilter=function(){\r\n\t\t\tvar i=0,len=0;\r\n\t\t\tif (this.filters){\r\n\t\t\t\tfor (i=0;i < this.filters.length;i++){\r\n\t\t\t\t\tif (this.filters[i].type==0x08){\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tfor (i=0,len=this._childs.length;i < len;i++){\r\n\t\t\t\tif (this._childs[i]._isHaveGlowFilter()){\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*本地坐标转全局坐标。\r\n\t\t*@param point 本地坐标点。\r\n\t\t*@param createNewPoint 用于存储转换后的坐标的点。\r\n\t\t*@return 转换后的坐标的点。\r\n\t\t*/\r\n\t\t__proto.localToGlobal=function(point,createNewPoint){\r\n\t\t\t(createNewPoint===void 0)&& (createNewPoint=false);\r\n\t\t\tif (!this._displayedInStage || !point)return point;\r\n\t\t\tif (createNewPoint===true){\r\n\t\t\t\tpoint=new Point(point.x,point.y);\r\n\t\t\t};\r\n\t\t\tvar ele=this;\r\n\t\t\twhile (ele){\r\n\t\t\t\tif (ele==Laya.stage)break ;\r\n\t\t\t\tpoint=ele.toParentPoint(point);\r\n\t\t\t\tele=ele.parent;\r\n\t\t\t}\r\n\t\t\treturn point;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*全局坐标转本地坐标。\r\n\t\t*@param point 全局坐标点。\r\n\t\t*@param createNewPoint 用于存储转换后的坐标的点。\r\n\t\t*@return 转换后的坐标的点。\r\n\t\t*/\r\n\t\t__proto.globalToLocal=function(point,createNewPoint){\r\n\t\t\t(createNewPoint===void 0)&& (createNewPoint=false);\r\n\t\t\tif (!this._displayedInStage || !point)return point;\r\n\t\t\tif (createNewPoint===true){\r\n\t\t\t\tpoint=new Point(point.x,point.y);\r\n\t\t\t};\r\n\t\t\tvar ele=this;\r\n\t\t\tvar list=[];\r\n\t\t\twhile (ele){\r\n\t\t\t\tif (ele==Laya.stage)break ;\r\n\t\t\t\tlist.push(ele);\r\n\t\t\t\tele=ele.parent;\r\n\t\t\t};\r\n\t\t\tvar i=list.length-1;\r\n\t\t\twhile (i >=0){\r\n\t\t\t\tele=list[i];\r\n\t\t\t\tpoint=ele.fromParentPoint(point);\r\n\t\t\t\ti--;\r\n\t\t\t}\r\n\t\t\treturn point;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*将本地坐标系坐标转换到父容器坐标系。\r\n\t\t*@param point 本地坐标点。\r\n\t\t*@return 转换后的点。\r\n\t\t*/\r\n\t\t__proto.toParentPoint=function(point){\r\n\t\t\tif (!point)return point;\r\n\t\t\tpoint.x-=this.pivotX;\r\n\t\t\tpoint.y-=this.pivotY;\r\n\t\t\tif (this.transform){\r\n\t\t\t\tthis._transform.transformPoint(point);\r\n\t\t\t}\r\n\t\t\tpoint.x+=this._x;\r\n\t\t\tpoint.y+=this._y;\r\n\t\t\tvar scroll=this._style.scrollRect;\r\n\t\t\tif (scroll){\r\n\t\t\t\tpoint.x-=scroll.x;\r\n\t\t\t\tpoint.y-=scroll.y;\r\n\t\t\t}\r\n\t\t\treturn point;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*将父容器坐标系坐标转换到本地坐标系。\r\n\t\t*@param point 父容器坐标点。\r\n\t\t*@return 转换后的点。\r\n\t\t*/\r\n\t\t__proto.fromParentPoint=function(point){\r\n\t\t\tif (!point)return point;\r\n\t\t\tpoint.x-=this._x;\r\n\t\t\tpoint.y-=this._y;\r\n\t\t\tvar scroll=this._style.scrollRect;\r\n\t\t\tif (scroll){\r\n\t\t\t\tpoint.x+=scroll.x;\r\n\t\t\t\tpoint.y+=scroll.y;\r\n\t\t\t}\r\n\t\t\tif (this.transform){\r\n\t\t\t\tthis._transform.invertTransformPoint(point);\r\n\t\t\t}\r\n\t\t\tpoint.x+=this.pivotX;\r\n\t\t\tpoint.y+=this.pivotY;\r\n\t\t\treturn point;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*使用 EventDispatcher 对象注册指定类型的事件侦听器对象，以使侦听器能够接收事件通知。\r\n\t\t*如果侦听鼠标事件，则会自动设置自己和父亲节点的属性 mouseEnable 的值为 true。\r\n\t\t*@param type 事件的类型。\r\n\t\t*@param caller 事件侦听函数的执行域。\r\n\t\t*@param listener 事件侦听函数。\r\n\t\t*@param args 事件侦听函数的回调参数。\r\n\t\t*@return 此 EventDispatcher 对象。\r\n\t\t*/\r\n\t\t__proto.on=function(type,caller,listener,args){\r\n\t\t\tif (this._mouseEnableState!==1 && this.isMouseEvent(type)){\r\n\t\t\t\tif (this._displayedInStage)this._$2__onDisplay();\r\n\t\t\t\telse laya.events.EventDispatcher.prototype.once.call(this,\"display\",this,this._$2__onDisplay);\r\n\t\t\t}\r\n\t\t\treturn laya.events.EventDispatcher.prototype.on.call(this,type,caller,listener,args);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*使用 EventDispatcher 对象注册指定类型的事件侦听器对象，以使侦听器能够接收事件通知，此侦听事件响应一次后自动移除。\r\n\t\t*如果侦听鼠标事件，则会自动设置自己和父亲节点的属性 mouseEnabled 的值为 true(如果父节点mouseEnabled=false，则停止设置父节点mouseEnabled属性)。\r\n\t\t*@param type 事件的类型。\r\n\t\t*@param caller 事件侦听函数的执行域。\r\n\t\t*@param listener 事件侦听函数。\r\n\t\t*@param args 事件侦听函数的回调参数。\r\n\t\t*@return 此 EventDispatcher 对象。\r\n\t\t*/\r\n\t\t__proto.once=function(type,caller,listener,args){\r\n\t\t\tif (this._mouseEnableState!==1 && this.isMouseEvent(type)){\r\n\t\t\t\tif (this._displayedInStage)this._$2__onDisplay();\r\n\t\t\t\telse laya.events.EventDispatcher.prototype.once.call(this,\"display\",this,this._$2__onDisplay);\r\n\t\t\t}\r\n\t\t\treturn laya.events.EventDispatcher.prototype.once.call(this,type,caller,listener,args);\r\n\t\t}\r\n\r\n\t\t/**@private */\r\n\t\t__proto._$2__onDisplay=function(){\r\n\t\t\tif (this._mouseEnableState!==1){\r\n\t\t\t\tvar ele=this;\r\n\t\t\t\twhile (ele && ele._mouseEnableState!==1){\r\n\t\t\t\t\tele.mouseEnabled=true;\r\n\t\t\t\t\tele=ele.parent;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*加载并显示一个图片。功能等同于Graphics.loadImage\r\n\t\t*@param url 图片地址。\r\n\t\t*@param x 显示图片的x位置\r\n\t\t*@param y 显示图片的y位置\r\n\t\t*@param width 显示图片的宽度，设置为0表示使用图片默认宽度\r\n\t\t*@param height 显示图片的高度，设置为0表示使用图片默认高度\r\n\t\t*@param complete 加载完成回调\r\n\t\t*@return 返回精灵对象本身\r\n\t\t*/\r\n\t\t__proto.loadImage=function(url,x,y,width,height,complete){\r\n\t\t\tvar _$this=this;\r\n\t\t\t(x===void 0)&& (x=0);\r\n\t\t\t(y===void 0)&& (y=0);\r\n\t\t\t(width===void 0)&& (width=0);\r\n\t\t\t(height===void 0)&& (height=0);\r\n\t\t\tfunction loaded (tex){\r\n\t\t\t\tif (!_$this.destroyed){\r\n\t\t\t\t\t_$this.size(x+(width || tex.width),y+(height || tex.height));\r\n\t\t\t\t\t_$this.repaint();\r\n\t\t\t\t\tcomplete && complete.runWith(tex);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.graphics.loadImage(url,x,y,width,height,loaded);\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\t\t/**cacheAs后，设置自己和父对象缓存失效。*/\r\n\t\t__proto.repaint=function(){\r\n\t\t\tthis.conchModel && this.conchModel.repaint && this.conchModel.repaint();\r\n\t\t\t(this._repaint===0)&& (this._repaint=1,this.parentRepaint());\r\n\t\t\tif (this._$P && this._$P.maskParent){\r\n\t\t\t\tthis._$P.maskParent.repaint();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*获取是否重新缓存。\r\n\t\t*@return 如果重新缓存值为 true，否则值为 false。\r\n\t\t*/\r\n\t\t__proto._needRepaint=function(){\r\n\t\t\treturn (this._repaint!==0)&& this._$P.cacheCanvas && this._$P.cacheCanvas.reCache;\r\n\t\t}\r\n\r\n\t\t/**@inheritDoc */\r\n\t\t__proto._childChanged=function(child){\r\n\t\t\tif (this._childs.length)this._renderType |=0x800;\r\n\t\t\telse this._renderType &=~0x800;\r\n\t\t\tif (child && (child).zOrder)Laya.timer.callLater(this,this.updateZOrder);\r\n\t\t\tthis.repaint();\r\n\t\t}\r\n\r\n\t\t/**cacheAs时，设置所有父对象缓存失效。 */\r\n\t\t__proto.parentRepaint=function(){\r\n\t\t\tvar p=this._parent;\r\n\t\t\tp && p._repaint===0 && (p._repaint=1,p.parentRepaint());\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*开始拖动此对象。\r\n\t\t*@param area 拖动区域，此区域为当前对象注册点活动区域（不包括对象宽高），可选。\r\n\t\t*@param hasInertia 鼠标松开后，是否还惯性滑动，默认为false，可选。\r\n\t\t*@param elasticDistance 橡皮筋效果的距离值，0为无橡皮筋效果，默认为0，可选。\r\n\t\t*@param elasticBackTime 橡皮筋回弹时间，单位为毫秒，默认为300毫秒，可选。\r\n\t\t*@param data 拖动事件携带的数据，可选。\r\n\t\t*@param disableMouseEvent 禁用其他对象的鼠标检测，默认为false，设置为true能提高性能\r\n\t\t*@param ratio 惯性阻尼系数\r\n\t\t*/\r\n\t\t__proto.startDrag=function(area,hasInertia,elasticDistance,elasticBackTime,data,disableMouseEvent,ratio){\r\n\t\t\t(hasInertia===void 0)&& (hasInertia=false);\r\n\t\t\t(elasticDistance===void 0)&& (elasticDistance=0);\r\n\t\t\t(elasticBackTime===void 0)&& (elasticBackTime=300);\r\n\t\t\t(disableMouseEvent===void 0)&& (disableMouseEvent=false);\r\n\t\t\t(ratio===void 0)&& (ratio=0.92);\r\n\t\t\tthis._$P.dragging || (this._set$P(\"dragging\",new Dragging()));\r\n\t\t\tthis._$P.dragging.start(this,area,hasInertia,elasticDistance,elasticBackTime,data,disableMouseEvent,ratio);\r\n\t\t}\r\n\r\n\t\t/**停止拖动此对象。*/\r\n\t\t__proto.stopDrag=function(){\r\n\t\t\tthis._$P.dragging && this._$P.dragging.stop();\r\n\t\t}\r\n\r\n\t\t/**@private */\r\n\t\t__proto._setDisplay=function(value){\r\n\t\t\tif (!value && this._$P.cacheCanvas && this._$P.cacheCanvas.ctx){\r\n\t\t\t\tPool.recover(\"RenderContext\",this._$P.cacheCanvas.ctx);\r\n\t\t\t\tthis._$P.cacheCanvas.ctx=null;\r\n\t\t\t}\r\n\t\t\tif (!value){\r\n\t\t\t\tvar fc=this._$P._filterCache;\r\n\t\t\t\tif (fc){\r\n\t\t\t\t\tfc.destroy();\r\n\t\t\t\t\tfc.recycle();\r\n\t\t\t\t\tthis._set$P('_filterCache',null);\r\n\t\t\t\t}\r\n\t\t\t\tthis._$P._isHaveGlowFilter && this._set$P('_isHaveGlowFilter',false);\r\n\t\t\t}\r\n\t\t\t_super.prototype._setDisplay.call(this,value);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*检测某个点是否在此对象内。\r\n\t\t*@param x 全局x坐标。\r\n\t\t*@param y 全局y坐标。\r\n\t\t*@return 表示是否在对象内。\r\n\t\t*/\r\n\t\t__proto.hitTestPoint=function(x,y){\r\n\t\t\tvar point=this.globalToLocal(Point.TEMP.setTo(x,y));\r\n\t\t\tvar rect=this._$P.hitArea ? this._$P.hitArea :Rectangle.TEMP.setTo(0,0,this._width,this._height);\r\n\t\t\treturn rect.contains(point.x,point.y);\r\n\t\t}\r\n\r\n\t\t/**获得相对于本对象上的鼠标坐标信息。*/\r\n\t\t__proto.getMousePoint=function(){\r\n\t\t\treturn this.globalToLocal(Point.TEMP.setTo(Laya.stage.mouseX,Laya.stage.mouseY));\r\n\t\t}\r\n\r\n\t\t/**@private */\r\n\t\t__proto._getWords=function(){\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\t/**@private */\r\n\t\t__proto._addChildsToLayout=function(out){\r\n\t\t\tvar words=this._getWords();\r\n\t\t\tif (words==null && this._childs.length==0)return false;\r\n\t\t\tif (words){\r\n\t\t\t\tfor (var i=0,n=words.length;i < n;i++){\r\n\t\t\t\t\tout.push(words[i]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis._childs.forEach(function(o,index,array){\r\n\t\t\t\to._style._enableLayout()&& o._addToLayout(out);\r\n\t\t\t});\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\t/**@private */\r\n\t\t__proto._addToLayout=function(out){\r\n\t\t\tif (this._style.absolute)return;\r\n\t\t\tthis._style.block ? out.push(this):(this._addChildsToLayout(out)&& (this.x=this.y=0));\r\n\t\t}\r\n\r\n\t\t/**@private */\r\n\t\t__proto._isChar=function(){\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\t/**@private */\r\n\t\t__proto._getCSSStyle=function(){\r\n\t\t\treturn this._style.getCSSStyle();\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*设置指定属性名的属性值。\r\n\t\t*@param name 属性名。\r\n\t\t*@param value 属性值。\r\n\t\t*/\r\n\t\t__proto._setAttributes=function(name,value){\r\n\t\t\tswitch (name){\r\n\t\t\t\tcase 'x':\r\n\t\t\t\t\tthis.x=parseFloat(value);\r\n\t\t\t\t\tbreak ;\r\n\t\t\t\tcase 'y':\r\n\t\t\t\t\tthis.y=parseFloat(value);\r\n\t\t\t\t\tbreak ;\r\n\t\t\t\tcase 'width':\r\n\t\t\t\t\tthis.width=parseFloat(value);\r\n\t\t\t\t\tbreak ;\r\n\t\t\t\tcase 'height':\r\n\t\t\t\t\tthis.height=parseFloat(value);\r\n\t\t\t\t\tbreak ;\r\n\t\t\t\tdefault :\r\n\t\t\t\t\tthis[name]=value;\r\n\t\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*/\r\n\t\t__proto._layoutLater=function(){\r\n\t\t\tthis.parent && (this.parent)._layoutLater();\r\n\t\t}\r\n\r\n\t\t/**@private 清理graphics，只显示此texture图片，等同于graphics.clear();graphics.drawTexture()*/\r\n\t\t__getset(0,__proto,'texture',function(){\r\n\t\t\treturn this._texture;\r\n\t\t\t},function(value){\r\n\t\t\tif (this._texture !=value){\r\n\t\t\t\tthis._texture=value;\r\n\t\t\t\tthis.graphics.cleanByTexture(value,0,0);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*表示鼠标在此对象上的 Y 轴坐标信息。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'mouseY',function(){\r\n\t\t\treturn this.getMousePoint().y;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*获得全局X轴缩放值\r\n\t\t*/\r\n\t\t__getset(0,__proto,'globalScaleX',function(){\r\n\t\t\tvar scale=1;\r\n\t\t\tvar ele=this;\r\n\t\t\twhile (ele){\r\n\t\t\t\tif (ele===Laya.stage)break ;\r\n\t\t\t\tscale *=ele.scaleX;\r\n\t\t\t\tele=ele.parent;\r\n\t\t\t}\r\n\t\t\treturn scale;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*是否接受鼠标事件。\r\n\t\t*默认为false，如果监听鼠标事件，则会自动设置本对象及父节点的属性 mouseEnable 的值都为 true（如果父节点手动设置为false，则不会更改）。\r\n\t\t**/\r\n\t\t__getset(0,__proto,'mouseEnabled',function(){\r\n\t\t\treturn this._mouseEnableState > 1;\r\n\t\t\t},function(value){\r\n\t\t\tthis._mouseEnableState=value ? 2 :1;\r\n\t\t});\r\n\r\n\t\t/**遮罩，可以设置一个对象或者图片，根据对象形状进行遮罩显示。\r\n\t\t*【注意】遮罩对象坐标系是相对遮罩对象本身的，这个和flash机制不同*/\r\n\t\t__getset(0,__proto,'mask',function(){\r\n\t\t\treturn this._$P._mask;\r\n\t\t\t},function(value){\r\n\t\t\tif (value && this.mask && this.mask._$P.maskParent)return;\r\n\t\t\tif (value){\r\n\t\t\t\tthis.cacheAs=\"bitmap\";\r\n\t\t\t\tthis._set$P(\"_mask\",value);\r\n\t\t\t\tvalue._set$P(\"maskParent\",this);\r\n\t\t\t\t}else {\r\n\t\t\t\tthis.cacheAs=\"none\";\r\n\t\t\t\tthis.mask && this.mask._set$P(\"maskParent\",null);\r\n\t\t\t\tthis._set$P(\"_mask\",value);\r\n\t\t\t}\r\n\t\t\tthis.conchModel && this.conchModel.mask(value ? value.conchModel :null);\r\n\t\t\tthis._renderType |=0x40;\r\n\t\t\tthis.parentRepaint();\r\n\t\t});\r\n\r\n\t\t/**手动设置的可点击区域，或者一个HitArea区域。*/\r\n\t\t__getset(0,__proto,'hitArea',function(){\r\n\t\t\treturn this._$P.hitArea;\r\n\t\t\t},function(value){\r\n\t\t\tthis._set$P(\"hitArea\",value);\r\n\t\t});\r\n\r\n\t\t/**绘图对象。*/\r\n\t\t__getset(0,__proto,'graphics',function(){\r\n\t\t\treturn this._graphics || (this.graphics=RunDriver.createGraphics());\r\n\t\t\t},function(value){\r\n\t\t\tif (this._graphics)this._graphics._sp=null;\r\n\t\t\tthis._graphics=value;\r\n\t\t\tif (value){\r\n\t\t\t\tthis._renderType &=~0x01;\r\n\t\t\t\tthis._renderType |=0x200;\r\n\t\t\t\tvalue._sp=this;\r\n\t\t\t\tthis.conchModel && this.conchModel.graphics(this._graphics);\r\n\t\t\t\t}else {\r\n\t\t\t\tthis._renderType &=~0x200;\r\n\t\t\t\tthis._renderType &=~0x01;\r\n\t\t\t\tif (this.conchModel){\r\n\t\t\t\t\tif (Sprite.RUNTIMEVERION < \"0.9.1\")\r\n\t\t\t\t\t\tthis.conchModel.removeType(0x100);\r\n\t\t\t\t\telse\r\n\t\t\t\t\tthis.conchModel.removeType(0x200);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.repaint();\r\n\t\t});\r\n\r\n\t\t/**滤镜集合。*/\r\n\t\t__getset(0,__proto,'filters',function(){\r\n\t\t\treturn this._$P.filters;\r\n\t\t\t},function(value){\r\n\t\t\tvalue && value.length===0 && (value=null);\r\n\t\t\tif (this._$P.filters==value)return;\r\n\t\t\tthis._set$P(\"filters\",value ? value.slice():null);\r\n\t\t\tif (Render.isConchApp){\r\n\t\t\t\tif (this.conchModel){\r\n\t\t\t\t\tif (Sprite.RUNTIMEVERION < \"0.9.1\")\r\n\t\t\t\t\t\tthis.conchModel.removeType(0x10);\r\n\t\t\t\t\telse\r\n\t\t\t\t\tthis.conchModel.removeType(0x20);\r\n\t\t\t\t}\r\n\t\t\t\tif (this._$P.filters && this._$P.filters.length==1){\r\n\t\t\t\t\tthis._$P.filters[0].callNative(this);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (Render.isWebGL){\r\n\t\t\t\tif (value && value.length){\r\n\t\t\t\t\tthis._renderType |=0x20;\r\n\t\t\t\t\t}else {\r\n\t\t\t\t\tthis._renderType &=~0x20;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (value && value.length > 0){\r\n\t\t\t\tif (!(Render.isWebGL && value.length==1 && (((value[0])instanceof laya.filters.ColorFilter )))){\r\n\t\t\t\t\tif (this.cacheAs !=\"bitmap\"){\r\n\t\t\t\t\t\tif (!Render.isConchNode)this.cacheAs=\"bitmap\";\r\n\t\t\t\t\t\tthis._set$P(\"cacheForFilters\",true);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis._set$P(\"hasFilter\",true);\r\n\t\t\t\t}\r\n\t\t\t\t}else {\r\n\t\t\t\tthis._set$P(\"hasFilter\",false);\r\n\t\t\t\tif (this._$P[\"cacheForFilters\"] && this.cacheAs==\"bitmap\"){\r\n\t\t\t\t\tthis.cacheAs=\"none\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.repaint();\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*获得全局Y轴缩放值\r\n\t\t*/\r\n\t\t__getset(0,__proto,'globalScaleY',function(){\r\n\t\t\tvar scale=1;\r\n\t\t\tvar ele=this;\r\n\t\t\twhile (ele){\r\n\t\t\t\tif (ele===Laya.stage)break ;\r\n\t\t\t\tscale *=ele.scaleX;\r\n\t\t\t\tele=ele.parent;\r\n\t\t\t}\r\n\t\t\treturn scale;\r\n\t\t});\r\n\r\n\t\t/**透明度，值为0-1，默认值为1，表示不透明。*/\r\n\t\t__getset(0,__proto,'alpha',function(){\r\n\t\t\treturn this._style.alpha;\r\n\t\t\t},function(value){\r\n\t\t\tif (this._style && this._style.alpha!==value){\r\n\t\t\t\tvalue=value < 0 ? 0 :(value > 1 ? 1 :value);\r\n\t\t\t\tthis.getStyle().alpha=value;\r\n\t\t\t\tthis.conchModel && this.conchModel.alpha(value);\r\n\t\t\t\tif (value!==1)this._renderType |=0x02;\r\n\t\t\t\telse this._renderType &=~0x02;\r\n\t\t\t\tthis.parentRepaint();\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t/**X轴缩放值，默认值为1。*/\r\n\t\t__getset(0,__proto,'scaleX',function(){\r\n\t\t\treturn this._style._tf.scaleX;\r\n\t\t\t},function(value){\r\n\t\t\tvar style=this.getStyle();\r\n\t\t\tif (style._tf.scaleX!==value){\r\n\t\t\t\tstyle.setScaleX(value);\r\n\t\t\t\tthis._changeType |=0x10;\r\n\t\t\t\tthis._tfChanged=true;\r\n\t\t\t\tthis.conchModel && this.conchModel.scale(value,style._tf.scaleY);\r\n\t\t\t\tthis._renderType |=0x04;\r\n\t\t\t\tvar p=this._parent;\r\n\t\t\t\tp && p._repaint===0 && (p._repaint=1,p.parentRepaint());\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t/**垂直倾斜角度，默认值为0。*/\r\n\t\t__getset(0,__proto,'skewY',function(){\r\n\t\t\treturn this._style._tf.skewY;\r\n\t\t\t},function(value){\r\n\t\t\tvar style=this.getStyle();\r\n\t\t\tif (style._tf.skewY!==value){\r\n\t\t\t\tstyle.setSkewY(value);\r\n\t\t\t\tthis._tfChanged=true;\r\n\t\t\t\tthis.conchModel && this.conchModel.skew(style._tf.skewX,value);\r\n\t\t\t\tthis._renderType |=0x04;\r\n\t\t\t\tvar p=this._parent;\r\n\t\t\t\tp && p._repaint===0 && (p._repaint=1,p.parentRepaint());\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t/**表示是否可见，默认为true。*/\r\n\t\t__getset(0,__proto,'visible',function(){\r\n\t\t\treturn this._style.visible;\r\n\t\t\t},function(value){\r\n\t\t\tif (this._style && this._style.visible!==value){\r\n\t\t\t\tthis.getStyle().visible=value;\r\n\t\t\t\tthis.conchModel && this.conchModel.visible(value);\r\n\t\t\t\tthis.parentRepaint();\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t/**Y轴 轴心点的位置，单位为像素，默认为0，轴心点会影响对象位置，缩放，旋转。*/\r\n\t\t__getset(0,__proto,'pivotY',function(){\r\n\t\t\treturn this._style._tf.translateY;\r\n\t\t\t},function(value){\r\n\t\t\tthis.getStyle().setTranslateY(value);\r\n\t\t\tthis._changeType |=0x10;\r\n\t\t\tthis.conchModel && this.conchModel.pivot(this._style._tf.translateX,value);\r\n\t\t\tthis.repaint();\r\n\t\t});\r\n\r\n\t\t/**表示显示对象相对于父容器的垂直方向坐标值。*/\r\n\t\t__getset(0,__proto,'y',function(){\r\n\t\t\treturn this._y;\r\n\t\t\t},function(value){\r\n\t\t\tif (this._y!==value){\r\n\t\t\t\tif (this.destroyed)return;\r\n\t\t\t\tthis._y=value;\r\n\t\t\t\tthis.conchModel && this.conchModel.pos(this._x,value);\r\n\t\t\t\tvar p=this._parent;\r\n\t\t\t\tp && p._repaint===0 && (p._repaint=1,p.parentRepaint());\r\n\t\t\t\tthis._$P.maskParent && this._$P.maskParent._repaint===0 && (this._$P.maskParent._repaint=1,this._$P.maskParent.parentRepaint());\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t/**X轴 轴心点的位置，单位为像素，默认为0，轴心点会影响对象位置，缩放，旋转。*/\r\n\t\t__getset(0,__proto,'pivotX',function(){\r\n\t\t\treturn this._style._tf.translateX;\r\n\t\t\t},function(value){\r\n\t\t\tthis.getStyle().setTranslateX(value);\r\n\t\t\tthis._changeType |=0x10;\r\n\t\t\tthis.conchModel && this.conchModel.pivot(value,this._style._tf.translateY);\r\n\t\t\tthis.repaint();\r\n\t\t});\r\n\r\n\t\t/**水平倾斜角度，默认值为0。*/\r\n\t\t__getset(0,__proto,'skewX',function(){\r\n\t\t\treturn this._style._tf.skewX;\r\n\t\t\t},function(value){\r\n\t\t\tvar style=this.getStyle();\r\n\t\t\tif (style._tf.skewX!==value){\r\n\t\t\t\tstyle.setSkewX(value);\r\n\t\t\t\tthis._tfChanged=true;\r\n\t\t\t\tthis._renderType |=0x04;\r\n\t\t\t\tvar p=this._parent;\r\n\t\t\t\tp && p._repaint===0 && (p._repaint=1,p.parentRepaint());\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t/**显示对象的滚动矩形范围，(如果只想限制子对象渲染区域，请使用viewport)，设置optimizeScrollRect=true，可以优化裁剪区域外的内容不进行渲染\r\n\t\t*srollRect和viewport的区别：\r\n\t\t*1.srollRect自带裁剪效果，viewport只影响子对象渲染是否渲染，不具有裁剪效果（性能更高）\r\n\t\t*2.设置rect的x,y属性均能实现区域滚动效果，但scrollRect会保持0,0点位置不变\r\n\t\t**/\r\n\t\t__getset(0,__proto,'scrollRect',function(){\r\n\t\t\treturn this._style.scrollRect;\r\n\t\t\t},function(value){\r\n\t\t\tthis.getStyle().scrollRect=value;\r\n\t\t\tthis.repaint();\r\n\t\t\tif (value){\r\n\t\t\t\tthis._renderType |=0x80;\r\n\t\t\t\tthis.conchModel && this.conchModel.scrollRect(value.x,value.y,value.width,value.height);\r\n\t\t\t\t}else {\r\n\t\t\t\tthis._renderType &=~0x80;\r\n\t\t\t\tif (this.conchModel){\r\n\t\t\t\t\tif (Sprite.RUNTIMEVERION < \"0.9.1\")\r\n\t\t\t\t\t\tthis.conchModel.removeType(0x40);\r\n\t\t\t\t\telse\r\n\t\t\t\t\tthis.conchModel.removeType(0x80);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t/**旋转角度，默认值为0。*/\r\n\t\t__getset(0,__proto,'rotation',function(){\r\n\t\t\treturn this._style._tf.rotate;\r\n\t\t\t},function(value){\r\n\t\t\tvar style=this.getStyle();\r\n\t\t\tif (style._tf.rotate!==value){\r\n\t\t\t\tthis._changeType |=0x10;\r\n\t\t\t\tstyle.setRotate(value);\r\n\t\t\t\tthis._tfChanged=true;\r\n\t\t\t\tthis.conchModel && this.conchModel.rotate(value);\r\n\t\t\t\tthis._renderType |=0x04;\r\n\t\t\t\tvar p=this._parent;\r\n\t\t\t\tp && p._repaint===0 && (p._repaint=1,p.parentRepaint());\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*对象的矩阵信息。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'transform',function(){\r\n\t\t\treturn this._tfChanged ? this._adjustTransform():this._transform;\r\n\t\t\t},function(value){\r\n\t\t\tthis._tfChanged=false;\r\n\t\t\tthis._transform=value;\r\n\t\t\tif (value){\r\n\t\t\t\tthis._x=value.tx;\r\n\t\t\t\tthis._y=value.ty;\r\n\t\t\t\tvalue.tx=value.ty=0;\r\n\t\t\t\tthis.conchModel && this.conchModel.transform(value.a,value.b,value.c,value.d,this._x,this._y);\r\n\t\t\t}\r\n\t\t\tif (value)this._renderType |=0x04;\r\n\t\t\telse {\r\n\t\t\t\tthis._renderType &=~0x04;\r\n\t\t\t\tthis.conchModel && this.conchModel.removeType(0x04);\r\n\t\t\t}\r\n\t\t\tthis.parentRepaint();\r\n\t\t});\r\n\r\n\t\t/**Y轴缩放值，默认值为1。*/\r\n\t\t__getset(0,__proto,'scaleY',function(){\r\n\t\t\treturn this._style._tf.scaleY;\r\n\t\t\t},function(value){\r\n\t\t\tvar style=this.getStyle();\r\n\t\t\tif (style._tf.scaleY!==value){\r\n\t\t\t\tstyle.setScaleY(value);\r\n\t\t\t\tthis._changeType |=0x10;\r\n\t\t\t\tthis._tfChanged=true;\r\n\t\t\t\tthis.conchModel && this.conchModel.scale(style._tf.scaleX,value);\r\n\t\t\t\tthis._renderType |=0x04;\r\n\t\t\t\tvar p=this._parent;\r\n\t\t\t\tp && p._repaint===0 && (p._repaint=1,p.parentRepaint());\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*表示鼠标在此对象上的 X 轴坐标信息。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'mouseX',function(){\r\n\t\t\treturn this.getMousePoint().x;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*表示显示对象的宽度，以像素为单位。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'width',function(){\r\n\t\t\tif (!this.autoSize)return this._width;\r\n\t\t\treturn this.getSelfBounds().width;\r\n\t\t\t},function(value){\r\n\t\t\tthis._width!==value && (this._width=value,this.conchModel && this.conchModel.size(value,this._height),this.repaint());\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*<p>指定显示对象是否缓存为静态图像，cacheAs时，子对象发生变化，会自动重新缓存，同时也可以手动调用reCache方法更新缓存。</p>\r\n\t\t*建议把不经常变化的复杂内容缓存为静态图像，能极大提高渲染性能，有\"none\"，\"normal\"和\"bitmap\"三个值可选。\r\n\t\t*<li>默认为\"none\"，不做任何缓存。</li>\r\n\t\t*<li>当值为\"normal\"时，canvas下进行画布缓存，webgl模式下进行命令缓存。</li>\r\n\t\t*<li>当值为\"bitmap\"时，canvas下进行依然是画布缓存，webgl模式下使用renderTarget缓存。</li>\r\n\t\t*webgl下renderTarget缓存模式有最大2048大小限制，会额外增加内存开销，不断重绘时开销比较大，但是会减少drawcall，渲染性能最高。\r\n\t\t*webgl下命令缓存模式只会减少节点遍历及命令组织，不会减少drawcall，性能中等。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'cacheAs',function(){\r\n\t\t\treturn this._$P.cacheCanvas==null ? \"none\" :this._$P.cacheCanvas.type;\r\n\t\t\t},function(value){\r\n\t\t\tvar cacheCanvas=this._$P.cacheCanvas;\r\n\t\t\tif (value===(cacheCanvas ? cacheCanvas.type :\"none\"))return;\r\n\t\t\tif (value!==\"none\"){\r\n\t\t\t\tcacheCanvas || (cacheCanvas=this._set$P(\"cacheCanvas\",Pool.getItemByClass(\"cacheCanvas\",Object)));\r\n\t\t\t\tcacheCanvas.type=value;\r\n\t\t\t\tcacheCanvas.reCache=true;\r\n\t\t\t\tthis._renderType |=0x10;\r\n\t\t\t\tif (value==\"bitmap\")this.conchModel && this.conchModel.cacheAs(1);\r\n\t\t\t\tthis._set$P(\"cacheForFilters\",false);\r\n\t\t\t\t}else {\r\n\t\t\t\tif (this._$P[\"hasFilter\"]){\r\n\t\t\t\t\tthis._set$P(\"cacheForFilters\",true);\r\n\t\t\t\t\t}else {\r\n\t\t\t\t\tif (cacheCanvas)Pool.recover(\"cacheCanvas\",cacheCanvas);\r\n\t\t\t\t\tthis._$P.cacheCanvas=null;\r\n\t\t\t\t\tthis._renderType &=~0x10;\r\n\t\t\t\t\tthis.conchModel && this.conchModel.cacheAs(0);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.repaint();\r\n\t\t});\r\n\r\n\t\t/**设置cacheAs为非空时此值才有效，staticCache=true时，子对象变化时不会自动更新缓存，只能通过调用reCache方法手动刷新。*/\r\n\t\t__getset(0,__proto,'staticCache',function(){\r\n\t\t\treturn this._$P.staticCache;\r\n\t\t\t},function(value){\r\n\t\t\tthis._set$P(\"staticCache\",value);\r\n\t\t\tif (!value && this._$P.cacheCanvas){\r\n\t\t\t\tthis._$P.cacheCanvas.reCache=true;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t/**z排序，更改此值，按照值的大小进行显示层级排序。*/\r\n\t\t__getset(0,__proto,'zOrder',function(){\r\n\t\t\treturn this._zOrder;\r\n\t\t\t},function(value){\r\n\t\t\tif (this._zOrder !=value){\r\n\t\t\t\tthis._zOrder=value;\r\n\t\t\t\tthis.conchModel && this.conchModel.setZOrder && this.conchModel.setZOrder(value);\r\n\t\t\t\tthis._parent && Laya.timer.callLater(this._parent,this.updateZOrder);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t/**对舞台 <code>stage</code> 的引用。*/\r\n\t\t__getset(0,__proto,'stage',function(){\r\n\t\t\treturn Laya.stage;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*开启自定义渲染，只有开启自定义渲染，才能使用customRender函数渲染\r\n\t\t*/\r\n\t\t__getset(0,__proto,'customRenderEnable',null,function(b){\r\n\t\t\tif (b){\r\n\t\t\t\tthis._renderType |=0x400;\r\n\t\t\t\tif (Render.isConchNode){\r\n\t\t\t\t\tlaya.display.Sprite.CustomList.push(this);\r\n\t\t\t\t\tvar canvas=new HTMLCanvas(\"2d\");\r\n\t\t\t\t\tcanvas._setContext(new CanvasRenderingContext2D());\r\n\t\t\t\t\tthis.customContext=new RenderContext(0,0,canvas);\r\n\t\t\t\t\tcanvas.context.setCanvasType && canvas.context.setCanvasType(2);\r\n\t\t\t\t\tthis.conchModel.custom(canvas.context);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*表示显示对象的高度，以像素为单位。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'height',function(){\r\n\t\t\tif (!this.autoSize)return this._height;\r\n\t\t\treturn this.getSelfBounds().height;\r\n\t\t\t},function(value){\r\n\t\t\tthis._height!==value && (this._height=value,this.conchModel && this.conchModel.size(this._width,value),this.repaint());\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*指定显示对象是否缓存为静态图像。功能同cacheAs的normal模式。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'cacheAsBitmap',function(){\r\n\t\t\treturn this.cacheAs!==\"none\";\r\n\t\t\t},function(value){\r\n\t\t\tthis.cacheAs=value ? (this._$P[\"hasFilter\"] ? \"none\" :\"normal\"):\"none\";\r\n\t\t});\r\n\r\n\t\t/**表示显示对象相对于父容器的水平方向坐标值。*/\r\n\t\t__getset(0,__proto,'x',function(){\r\n\t\t\treturn this._x;\r\n\t\t\t},function(value){\r\n\t\t\tif (this._x!==value){\r\n\t\t\t\tif (this.destroyed)return;\r\n\t\t\t\tthis._x=value;\r\n\t\t\t\tthis.conchModel && this.conchModel.pos(value,this._y);\r\n\t\t\t\tvar p=this._parent;\r\n\t\t\t\tp && p._repaint===0 && (p._repaint=1,p.parentRepaint());\r\n\t\t\t\tthis._$P.maskParent && this._$P.maskParent._repaint===0 && (this._$P.maskParent._repaint=1,this._$P.maskParent.parentRepaint());\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t/**指定要使用的混合模式。*/\r\n\t\t__getset(0,__proto,'blendMode',function(){\r\n\t\t\treturn this._style.blendMode;\r\n\t\t\t},function(value){\r\n\t\t\tthis.getStyle().blendMode=value;\r\n\t\t\tthis.conchModel && this.conchModel.blendMode(value);\r\n\t\t\tif (value && value !=\"source-over\")this._renderType |=0x08;\r\n\t\t\telse this._renderType &=~0x08;\r\n\t\t\tthis.parentRepaint();\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*<p>指定是否对使用了 scrollRect 的显示对象进行优化处理。</p>\r\n\t\t*<p>默认为false(不优化)。</p>\r\n\t\t*<p>当值为ture时：将对此对象使用了scrollRect 设定的显示区域以外的显示内容不进行渲染，以提高性能。</p>\r\n\t\t*/\r\n\t\t__getset(0,__proto,'optimizeScrollRect',function(){\r\n\t\t\treturn this._optimizeScrollRect;\r\n\t\t\t},function(b){\r\n\t\t\tif (this._optimizeScrollRect !=b){\r\n\t\t\t\tthis._optimizeScrollRect=b;\r\n\t\t\t\tthis.conchModel && this.conchModel.optimizeScrollRect(b);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tSprite.fromImage=function(url){\r\n\t\t\treturn new Sprite().loadImage(url);\r\n\t\t}\r\n\r\n\t\tSprite.CHG_VIEW=0x10;\r\n\t\tSprite.CHG_SCALE=0x100;\r\n\t\tSprite.CHG_TEXTURE=0x1000;\r\n\t\tSprite.CustomList=[];\r\n\t\t__static(Sprite,\r\n\t\t['RUNTIMEVERION',function(){return this.RUNTIMEVERION=window.conch?conchConfig.getRuntimeVersion().substr(conchConfig.getRuntimeVersion().lastIndexOf('-')+1):'';}\r\n\t\t]);\r\n\t\treturn Sprite;\r\n\t})(Node)\r\n\r\n\r\n\t//class laya.webgl.utils.Buffer extends laya.resource.Resource\r\n\tvar Buffer=(function(_super){\r\n\t\tfunction Buffer(){\r\n\t\t\tthis._glBuffer=null;\r\n\t\t\tthis._buffer=null;\r\n\t\t\tthis._bufferType=0;\r\n\t\t\tthis._bufferUsage=0;\r\n\t\t\tthis._byteLength=0;\r\n\t\t\tBuffer.__super.call(this);\r\n\t\t\tBuffer._gl=WebGL.mainContext;\r\n\t\t}\r\n\r\n\t\t__class(Buffer,'laya.webgl.utils.Buffer',_super);\r\n\t\tvar __proto=Buffer.prototype;\r\n\t\t__proto._bind=function(){\r\n\t\t\tthis.activeResource();\r\n\t\t\t(Buffer._bindActive[this._bufferType]===this._glBuffer)|| (Buffer._gl.bindBuffer(this._bufferType,Buffer._bindActive[this._bufferType]=this._glBuffer),BaseShader.activeShader=null);\r\n\t\t}\r\n\r\n\t\t__proto.recreateResource=function(){\r\n\t\t\tthis.startCreate();\r\n\t\t\tthis._glBuffer || (this._glBuffer=Buffer._gl.createBuffer());\r\n\t\t\tthis.completeCreate();\r\n\t\t}\r\n\r\n\t\t__proto.detoryResource=function(){\r\n\t\t\tif (this._glBuffer){\r\n\t\t\t\tWebGL.mainContext.deleteBuffer(this._glBuffer);\r\n\t\t\t\tthis._glBuffer=null;\r\n\t\t\t}\r\n\t\t\tthis.memorySize=0;\r\n\t\t}\r\n\r\n\t\t__proto.dispose=function(){\r\n\t\t\tthis.resourceManager.removeResource(this);\r\n\t\t\t_super.prototype.dispose.call(this);\r\n\t\t}\r\n\r\n\t\t__getset(0,__proto,'bufferUsage',function(){\r\n\t\t\treturn this._bufferUsage;\r\n\t\t});\r\n\r\n\t\t__getset(0,__proto,'bufferType',function(){\r\n\t\t\treturn this._bufferType;\r\n\t\t});\r\n\r\n\t\t//TODO:私有\r\n\t\t__getset(0,__proto,'byteLength',function(){\r\n\t\t\treturn this._byteLength;\r\n\t\t});\r\n\r\n\t\tBuffer._gl=null\r\n\t\tBuffer._bindActive={};\r\n\t\treturn Buffer;\r\n\t})(Resource)\r\n\r\n\r\n\t/**\r\n\t*...\r\n\t*@author ...\r\n\t*/\r\n\t//class laya.webgl.shader.BaseShader extends laya.resource.Resource\r\n\tvar BaseShader=(function(_super){\r\n\t\tfunction BaseShader(){\r\n\t\t\tBaseShader.__super.call(this);\r\n\t\t}\r\n\r\n\t\t__class(BaseShader,'laya.webgl.shader.BaseShader',_super);\r\n\t\tBaseShader.activeShader=null\r\n\t\tBaseShader.bindShader=null\r\n\t\treturn BaseShader;\r\n\t})(Resource)\r\n\r\n\r\n\t/**\r\n\t*@private\r\n\t*<code>Bitmap</code> 是图片资源类。\r\n\t*/\r\n\t//class laya.resource.Bitmap extends laya.resource.Resource\r\n\tvar Bitmap=(function(_super){\r\n\t\tfunction Bitmap(){\r\n\t\t\t//this._source=null;\r\n\t\t\t//this._w=NaN;\r\n\t\t\t//this._h=NaN;\r\n\t\t\tthis.useNum=0;\r\n\t\t\tBitmap.__super.call(this);\r\n\t\t\tthis._w=0;\r\n\t\t\tthis._h=0;\r\n\t\t}\r\n\r\n\t\t__class(Bitmap,'laya.resource.Bitmap',_super);\r\n\t\tvar __proto=Bitmap.prototype;\r\n\t\t/**\r\n\t\t*彻底清理资源。\r\n\t\t*/\r\n\t\t__proto.dispose=function(){\r\n\t\t\tthis._resourceManager.removeResource(this);\r\n\t\t\t_super.prototype.dispose.call(this);\r\n\t\t}\r\n\r\n\t\t/***\r\n\t\t*HTML Image 或 HTML Canvas 或 WebGL Texture 。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'source',function(){\r\n\t\t\treturn this._source;\r\n\t\t});\r\n\r\n\t\t/***\r\n\t\t*高度。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'height',function(){\r\n\t\t\treturn this._h;\r\n\t\t});\r\n\r\n\t\t/***\r\n\t\t*宽度。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'width',function(){\r\n\t\t\treturn this._w;\r\n\t\t});\r\n\r\n\t\treturn Bitmap;\r\n\t})(Resource)\r\n\r\n\r\n\t/**\r\n\t*@private\r\n\t*audio标签播放声音的音轨控制\r\n\t*/\r\n\t//class laya.media.h5audio.AudioSoundChannel extends laya.media.SoundChannel\r\n\tvar AudioSoundChannel=(function(_super){\r\n\t\tfunction AudioSoundChannel(audio){\r\n\t\t\tthis._audio=null;\r\n\t\t\tthis._onEnd=null;\r\n\t\t\tthis._resumePlay=null;\r\n\t\t\tAudioSoundChannel.__super.call(this);\r\n\t\t\tthis._onEnd=Utils1.bind(this.__onEnd,this);\r\n\t\t\tthis._resumePlay=Utils1.bind(this.__resumePlay,this);\r\n\t\t\taudio.addEventListener(\"ended\",this._onEnd);\r\n\t\t\tthis._audio=audio;\r\n\t\t}\r\n\r\n\t\t__class(AudioSoundChannel,'laya.media.h5audio.AudioSoundChannel',_super);\r\n\t\tvar __proto=AudioSoundChannel.prototype;\r\n\t\t__proto.__onEnd=function(){\r\n\t\t\tif (this.loops==1){\r\n\t\t\t\tif (this.completeHandler){\r\n\t\t\t\t\tLaya.timer.once(10,this,this.__runComplete,[this.completeHandler],false);\r\n\t\t\t\t\tthis.completeHandler=null;\r\n\t\t\t\t}\r\n\t\t\t\tthis.stop();\r\n\t\t\t\tthis.event(\"complete\");\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (this.loops > 0){\r\n\t\t\t\tthis.loops--;\r\n\t\t\t}\r\n\t\t\tthis.play();\r\n\t\t}\r\n\r\n\t\t__proto.__resumePlay=function(){\r\n\t\t\tif(this._audio)this._audio.removeEventListener(\"canplay\",this._resumePlay);\r\n\t\t\ttry {\r\n\t\t\t\tthis._audio.currentTime=this.startTime;\r\n\t\t\t\tBrowser.container.appendChild(this._audio);\r\n\t\t\t\tthis._audio.play();\r\n\t\t\t\t}catch (e){\r\n\t\t\t\tthis.event(\"error\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*播放\r\n\t\t*/\r\n\t\t__proto.play=function(){\r\n\t\t\ttry {\r\n\t\t\t\tthis._audio.playbackRate=SoundManager.playbackRate;\r\n\t\t\t\tthis._audio.currentTime=this.startTime;\r\n\t\t\t\t}catch (e){\r\n\t\t\t\tthis._audio.addEventListener(\"canplay\",this._resumePlay);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tBrowser.container.appendChild(this._audio);\r\n\t\t\tif(\"play\" in this._audio)\r\n\t\t\t\tthis._audio.play();\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*停止播放\r\n\t\t*\r\n\t\t*/\r\n\t\t__proto.stop=function(){\r\n\t\t\tthis.isStopped=true;\r\n\t\t\tSoundManager.removeChannel(this);\r\n\t\t\tthis.completeHandler=null;\r\n\t\t\tif (!this._audio)\r\n\t\t\t\treturn;\r\n\t\t\tif(\"pause\" in this._audio)\r\n\t\t\t\tthis._audio.pause();\r\n\t\t\tthis._audio.removeEventListener(\"ended\",this._onEnd);\r\n\t\t\tthis._audio.removeEventListener(\"canplay\",this._resumePlay);\r\n\t\t\tPool.recover(\"audio:\"+this.url,this._audio);\r\n\t\t\tBrowser.removeElement(this._audio);\r\n\t\t\tthis._audio=null;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*设置音量\r\n\t\t*@param v\r\n\t\t*\r\n\t\t*/\r\n\t\t/**\r\n\t\t*获取音量\r\n\t\t*@return\r\n\t\t*\r\n\t\t*/\r\n\t\t__getset(0,__proto,'volume',function(){\r\n\t\t\tif (!this._audio)return 1;\r\n\t\t\treturn this._audio.volume;\r\n\t\t\t},function(v){\r\n\t\t\tif (!this._audio)return;\r\n\t\t\tthis._audio.volume=v;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*获取总时间。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'duration',function(){\r\n\t\t\tif (!this._audio)\r\n\t\t\t\treturn 0;\r\n\t\t\treturn this._audio.duration;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*当前播放到的位置\r\n\t\t*@return\r\n\t\t*\r\n\t\t*/\r\n\t\t__getset(0,__proto,'position',function(){\r\n\t\t\tif (!this._audio)\r\n\t\t\t\treturn 0;\r\n\t\t\treturn this._audio.currentTime;\r\n\t\t});\r\n\r\n\t\treturn AudioSoundChannel;\r\n\t})(SoundChannel)\r\n\r\n\r\n\t/**\r\n\t*@private\r\n\t*web audio api方式播放声音的音轨控制\r\n\t*/\r\n\t//class laya.media.webaudio.WebAudioSoundChannel extends laya.media.SoundChannel\r\n\tvar WebAudioSoundChannel=(function(_super){\r\n\t\tfunction WebAudioSoundChannel(){\r\n\t\t\tthis.audioBuffer=null;\r\n\t\t\tthis.gain=null;\r\n\t\t\tthis.bufferSource=null;\r\n\t\t\tthis._currentTime=0;\r\n\t\t\tthis._volume=1;\r\n\t\t\tthis._startTime=0;\r\n\t\t\tthis._onPlayEnd=null;\r\n\t\t\tthis.context=WebAudioSound.ctx;\r\n\t\t\tWebAudioSoundChannel.__super.call(this);\r\n\t\t\tthis._onPlayEnd=Utils1.bind(this.__onPlayEnd,this);\r\n\t\t\tif (this.context[\"createGain\"]){\r\n\t\t\t\tthis.gain=this.context[\"createGain\"]();\r\n\t\t\t\t}else {\r\n\t\t\t\tthis.gain=this.context[\"createGainNode\"]();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__class(WebAudioSoundChannel,'laya.media.webaudio.WebAudioSoundChannel',_super);\r\n\t\tvar __proto=WebAudioSoundChannel.prototype;\r\n\t\t/**\r\n\t\t*播放声音\r\n\t\t*/\r\n\t\t__proto.play=function(){\r\n\t\t\tthis._clearBufferSource();\r\n\t\t\tif (!this.audioBuffer)return;\r\n\t\t\tvar context=this.context;\r\n\t\t\tvar gain=this.gain;\r\n\t\t\tvar bufferSource=context.createBufferSource();\r\n\t\t\tthis.bufferSource=bufferSource;\r\n\t\t\tbufferSource.buffer=this.audioBuffer;\r\n\t\t\tbufferSource.connect(gain);\r\n\t\t\tif (gain)\r\n\t\t\t\tgain.disconnect();\r\n\t\t\tgain.connect(context.destination);\r\n\t\t\tbufferSource.onended=this._onPlayEnd;\r\n\t\t\tthis._startTime=Browser.now();\r\n\t\t\tthis.gain.gain.value=this._volume;\r\n\t\t\tif (this.loops==0){\r\n\t\t\t\tbufferSource.loop=true;\r\n\t\t\t}\r\n\t\t\tbufferSource.playbackRate.value=SoundManager.playbackRate;\r\n\t\t\tbufferSource.start(0,this.startTime);\r\n\t\t\tthis._currentTime=0;\r\n\t\t}\r\n\r\n\t\t__proto.__onPlayEnd=function(){\r\n\t\t\tif (this.loops==1){\r\n\t\t\t\tif (this.completeHandler){\r\n\t\t\t\t\tLaya.timer.once(10,this,this.__runComplete,[this.completeHandler],false);\r\n\t\t\t\t\tthis.completeHandler=null;\r\n\t\t\t\t}\r\n\t\t\t\tthis.stop();\r\n\t\t\t\tthis.event(\"complete\");\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (this.loops > 0){\r\n\t\t\t\tthis.loops--;\r\n\t\t\t}\r\n\t\t\tthis.play();\r\n\t\t}\r\n\r\n\t\t__proto._clearBufferSource=function(){\r\n\t\t\tif (this.bufferSource){\r\n\t\t\t\tvar sourceNode=this.bufferSource;\r\n\t\t\t\tif (sourceNode.stop){\r\n\t\t\t\t\tsourceNode.stop(0);\r\n\t\t\t\t\t}else {\r\n\t\t\t\t\tsourceNode.noteOff(0);\r\n\t\t\t\t}\r\n\t\t\t\tsourceNode.disconnect(0);\r\n\t\t\t\tsourceNode.onended=null;\r\n\t\t\t\tif (!WebAudioSoundChannel._tryCleanFailed)this._tryClearBuffer(sourceNode);\r\n\t\t\t\tthis.bufferSource=null;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__proto._tryClearBuffer=function(sourceNode){\r\n\t\t\ttry {sourceNode.buffer=WebAudioSound._miniBuffer;}catch (e){WebAudioSoundChannel._tryCleanFailed=true;}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*停止播放\r\n\t\t*/\r\n\t\t__proto.stop=function(){\r\n\t\t\tthis._clearBufferSource();\r\n\t\t\tthis.audioBuffer=null;\r\n\t\t\tif (this.gain)\r\n\t\t\t\tthis.gain.disconnect();\r\n\t\t\tthis.isStopped=true;\r\n\t\t\tSoundManager.removeChannel(this);\r\n\t\t\tthis.completeHandler=null;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*设置音量\r\n\t\t*/\r\n\t\t/**\r\n\t\t*获取音量\r\n\t\t*/\r\n\t\t__getset(0,__proto,'volume',function(){\r\n\t\t\treturn this._volume;\r\n\t\t\t},function(v){\r\n\t\t\tif (this.isStopped){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis._volume=v;\r\n\t\t\tthis.gain.gain.value=v;\r\n\t\t});\r\n\r\n\t\t__getset(0,__proto,'duration',function(){\r\n\t\t\tif (this.audioBuffer){\r\n\t\t\t\treturn this.audioBuffer.duration;\r\n\t\t\t}\r\n\t\t\treturn 0;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*获取当前播放位置\r\n\t\t*/\r\n\t\t__getset(0,__proto,'position',function(){\r\n\t\t\tif (this.bufferSource){\r\n\t\t\t\treturn (Browser.now()-this._startTime)/ 1000+this.startTime;\r\n\t\t\t}\r\n\t\t\treturn 0;\r\n\t\t});\r\n\r\n\t\tWebAudioSoundChannel._tryCleanFailed=false;\r\n\t\treturn WebAudioSoundChannel;\r\n\t})(SoundChannel)\r\n\r\n\r\n\t//class laya.webgl.resource.RenderTarget2D extends laya.resource.Texture\r\n\tvar RenderTarget2D=(function(_super){\r\n\t\tfunction RenderTarget2D(width,height,surfaceFormat,surfaceType,depthStencilFormat,mipMap,repeat,minFifter,magFifter){\r\n\t\t\tthis._type=0;\r\n\t\t\tthis._svWidth=NaN;\r\n\t\t\tthis._svHeight=NaN;\r\n\t\t\tthis._preRenderTarget=null;\r\n\t\t\tthis._alreadyResolved=false;\r\n\t\t\tthis._looked=false;\r\n\t\t\tthis._surfaceFormat=0;\r\n\t\t\tthis._surfaceType=0;\r\n\t\t\tthis._depthStencilFormat=0;\r\n\t\t\tthis._mipMap=false;\r\n\t\t\tthis._repeat=false;\r\n\t\t\tthis._minFifter=0;\r\n\t\t\tthis._magFifter=0;\r\n\t\t\tthis._destroy=false;\r\n\t\t\t(surfaceFormat===void 0)&& (surfaceFormat=0x1908);\r\n\t\t\t(surfaceType===void 0)&& (surfaceType=0x1401);\r\n\t\t\t(depthStencilFormat===void 0)&& (depthStencilFormat=0x84F9);\r\n\t\t\t(mipMap===void 0)&& (mipMap=false);\r\n\t\t\t(repeat===void 0)&& (repeat=false);\r\n\t\t\t(minFifter===void 0)&& (minFifter=-1);\r\n\t\t\t(magFifter===void 0)&& (magFifter=-1);\r\n\t\t\tthis._type=1;\r\n\t\t\tthis._w=width;\r\n\t\t\tthis._h=height;\r\n\t\t\tthis._surfaceFormat=surfaceFormat;\r\n\t\t\tthis._surfaceType=surfaceType;\r\n\t\t\tthis._depthStencilFormat=depthStencilFormat;\r\n\t\t\tthis._mipMap=mipMap;\r\n\t\t\tthis._repeat=repeat;\r\n\t\t\tthis._minFifter=minFifter;\r\n\t\t\tthis._magFifter=magFifter;\r\n\t\t\tthis._createWebGLRenderTarget();\r\n\t\t\tthis.bitmap.lock=true;\r\n\t\t\tRenderTarget2D.__super.call(this,this.bitmap,Texture.INV_UV);\r\n\t\t}\r\n\r\n\t\t__class(RenderTarget2D,'laya.webgl.resource.RenderTarget2D',_super);\r\n\t\tvar __proto=RenderTarget2D.prototype;\r\n\t\tLaya.imps(__proto,{\"laya.resource.IDispose\":true})\r\n\t\t//TODO:临时......................................................\r\n\t\t__proto.getType=function(){\r\n\t\t\treturn this._type;\r\n\t\t}\r\n\r\n\t\t//*/\r\n\t\t__proto.getTexture=function(){\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\t\t__proto.size=function(w,h){\r\n\t\t\tif (this.bitmap && this._w==w && this._h==h)\r\n\t\t\t\treturn;\r\n\t\t\tthis._w=w;\r\n\t\t\tthis._h=h;\r\n\t\t\tthis.release();\r\n\t\t\tthis._createWebGLRenderTarget();\r\n\t\t}\r\n\r\n\t\t__proto.release=function(){\r\n\t\t\tthis.destroy();\r\n\t\t}\r\n\r\n\t\t__proto.recycle=function(){\r\n\t\t\tRenderTarget2D.POOL.push(this);\r\n\t\t}\r\n\r\n\t\t__proto.start=function(){\r\n\t\t\tvar gl=WebGL.mainContext;\r\n\t\t\tthis._preRenderTarget=RenderState2D.curRenderTarget;\r\n\t\t\tRenderState2D.curRenderTarget=this;\r\n\t\t\tgl.bindFramebuffer(0x8D40,this.bitmap.frameBuffer);\r\n\t\t\tthis._alreadyResolved=false;\r\n\t\t\tif (this._type==1){\r\n\t\t\t\tgl.viewport(0,0,this._w,this._h);\r\n\t\t\t\tthis._svWidth=RenderState2D.width;\r\n\t\t\t\tthis._svHeight=RenderState2D.height;\r\n\t\t\t\tRenderState2D.width=this._w;\r\n\t\t\t\tRenderState2D.height=this._h;\r\n\t\t\t\tBaseShader.activeShader=null;\r\n\t\t\t}\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\t\t__proto.clear=function(r,g,b,a){\r\n\t\t\t(r===void 0)&& (r=0.0);\r\n\t\t\t(g===void 0)&& (g=0.0);\r\n\t\t\t(b===void 0)&& (b=0.0);\r\n\t\t\t(a===void 0)&& (a=1.0);\r\n\t\t\tvar gl=WebGL.mainContext;\r\n\t\t\tgl.clearColor(r,g,b,a);\r\n\t\t\tvar clearFlag=0x00004000;\r\n\t\t\tswitch (this._depthStencilFormat){\r\n\t\t\t\tcase 0x81A5:\r\n\t\t\t\t\tclearFlag |=0x00000100;\r\n\t\t\t\t\tbreak ;\r\n\t\t\t\tcase 0x8D48:\r\n\t\t\t\t\tclearFlag |=0x00000400;\r\n\t\t\t\t\tbreak ;\r\n\t\t\t\tcase 0x84F9:\r\n\t\t\t\t\tclearFlag |=0x00000100;\r\n\t\t\t\t\tclearFlag |=0x00000400\r\n\t\t\t\t\tbreak ;\r\n\t\t\t\t}\r\n\t\t\tgl.clear(clearFlag);\r\n\t\t}\r\n\r\n\t\t__proto.end=function(){\r\n\t\t\tvar gl=WebGL.mainContext;\r\n\t\t\tgl.bindFramebuffer(0x8D40,this._preRenderTarget ? this._preRenderTarget.bitmap.frameBuffer :null);\r\n\t\t\tthis._alreadyResolved=true;\r\n\t\t\tRenderState2D.curRenderTarget=this._preRenderTarget;\r\n\t\t\tif (this._type==1){\r\n\t\t\t\tgl.viewport(0,0,this._svWidth,this._svHeight);\r\n\t\t\t\tRenderState2D.width=this._svWidth;\r\n\t\t\t\tRenderState2D.height=this._svHeight;\r\n\t\t\t\tBaseShader.activeShader=null;\r\n\t\t\t}else gl.viewport(0,0,Laya.stage.width,Laya.stage.height);\r\n\t\t}\r\n\r\n\t\t__proto.getData=function(x,y,width,height){\r\n\t\t\tvar gl=WebGL.mainContext;\r\n\t\t\tgl.bindFramebuffer(0x8D40,(this.bitmap).frameBuffer);\r\n\t\t\tvar canRead=(gl.checkFramebufferStatus(0x8D40)===0x8CD5);\r\n\t\t\tif (!canRead){\r\n\t\t\t\tgl.bindFramebuffer(0x8D40,null);\r\n\t\t\t\treturn null;\r\n\t\t\t};\r\n\t\t\tvar pixels=new Uint8Array(this._w *this._h *4);\r\n\t\t\tgl.readPixels(x,y,width,height,this._surfaceFormat,this._surfaceType,pixels);\r\n\t\t\tgl.bindFramebuffer(0x8D40,null);\r\n\t\t\treturn pixels;\r\n\t\t}\r\n\r\n\t\t/**彻底清理资源,注意会强制解锁清理*/\r\n\t\t__proto.destroy=function(foreDiposeTexture){\r\n\t\t\t(foreDiposeTexture===void 0)&& (foreDiposeTexture=false);\r\n\t\t\tif (!this._destroy){\r\n\t\t\t\tthis._loaded=false;\r\n\t\t\t\tthis.bitmap.dispose();\r\n\t\t\t\tthis.bitmap=null;\r\n\t\t\t\tthis._destroy=true;\r\n\t\t\t\t_super.prototype.destroy.call(this);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//待测试\r\n\t\t__proto.dispose=function(){}\r\n\t\t__proto._createWebGLRenderTarget=function(){\r\n\t\t\tthis.bitmap=new WebGLRenderTarget(this.width,this.height,this._surfaceFormat,this._surfaceType,this._depthStencilFormat,this._mipMap,this._repeat,this._minFifter,this._magFifter);\r\n\t\t\tthis.bitmap.activeResource();\r\n\t\t\tthis._alreadyResolved=true;\r\n\t\t\tthis._destroy=false;\r\n\t\t\tthis._loaded=true;\r\n\t\t}\r\n\r\n\t\t/**返回RenderTarget的Texture*/\r\n\t\t__getset(0,__proto,'source',function(){\r\n\t\t\tif (this._alreadyResolved)\r\n\t\t\t\treturn _super.prototype._$get_source.call(this);\r\n\t\t\treturn null;\r\n\t\t\tthrow new Error(\"RenderTarget  还未准备好！\");\r\n\t\t});\r\n\r\n\t\t__getset(0,__proto,'magFifter',function(){\r\n\t\t\treturn this._magFifter;\r\n\t\t});\r\n\r\n\t\t__getset(0,__proto,'mipMap',function(){\r\n\t\t\treturn this._mipMap;\r\n\t\t});\r\n\r\n\t\t//}\r\n\t\t__getset(0,__proto,'minFifter',function(){\r\n\t\t\treturn this._minFifter;\r\n\t\t});\r\n\r\n\t\t__getset(0,__proto,'surfaceType',function(){\r\n\t\t\treturn this._surfaceType;\r\n\t\t});\r\n\r\n\t\t__getset(0,__proto,'depthStencilFormat',function(){\r\n\t\t\treturn this._depthStencilFormat;\r\n\t\t});\r\n\r\n\t\t__getset(0,__proto,'surfaceFormat',function(){\r\n\t\t\treturn this._surfaceFormat;\r\n\t\t});\r\n\r\n\t\tRenderTarget2D.create=function(w,h,surfaceFormat,surfaceType,depthStencilFormat,mipMap,repeat,minFifter,magFifter){\r\n\t\t\t(surfaceFormat===void 0)&& (surfaceFormat=0x1908);\r\n\t\t\t(surfaceType===void 0)&& (surfaceType=0x1401);\r\n\t\t\t(depthStencilFormat===void 0)&& (depthStencilFormat=0x84F9);\r\n\t\t\t(mipMap===void 0)&& (mipMap=false);\r\n\t\t\t(repeat===void 0)&& (repeat=false);\r\n\t\t\t(minFifter===void 0)&& (minFifter=-1);\r\n\t\t\t(magFifter===void 0)&& (magFifter=-1);\r\n\t\t\tvar t=RenderTarget2D.POOL.pop();\r\n\t\t\tt || (t=new RenderTarget2D(w,h));\r\n\t\t\tif (!t.bitmap || t._w !=w || t._h !=h || t._surfaceFormat !=surfaceFormat || t._surfaceType !=surfaceType || t._depthStencilFormat !=depthStencilFormat || t._mipMap !=mipMap || t._repeat !=repeat || t._minFifter !=minFifter || t._magFifter !=magFifter){\r\n\t\t\t\tt._w=w;\r\n\t\t\t\tt._h=h;\r\n\t\t\t\tt._surfaceFormat=surfaceFormat;\r\n\t\t\t\tt._surfaceType=surfaceType;\r\n\t\t\t\tt._depthStencilFormat=depthStencilFormat;\r\n\t\t\t\tt._mipMap=mipMap;\r\n\t\t\t\tt._repeat=repeat;\r\n\t\t\t\tt._minFifter=minFifter;\r\n\t\t\t\tt._magFifter=magFifter;\r\n\t\t\t\tt.release();\r\n\t\t\t\tt._createWebGLRenderTarget();\r\n\t\t\t}\r\n\t\t\treturn t;\r\n\t\t}\r\n\r\n\t\tRenderTarget2D.TYPE2D=1;\r\n\t\tRenderTarget2D.TYPE3D=2;\r\n\t\tRenderTarget2D.POOL=[];\r\n\t\treturn RenderTarget2D;\r\n\t})(Texture)\r\n\r\n\r\n\t//class laya.webgl.shader.d2.skinAnishader.SkinSV extends laya.webgl.shader.d2.value.Value2D\r\n\tvar SkinSV=(function(_super){\r\n\t\tfunction SkinSV(type){\r\n\t\t\tthis.texcoord=null;\r\n\t\t\tthis.offsetX=300;\r\n\t\t\tthis.offsetY=0;\r\n\t\t\tSkinSV.__super.call(this,0x200,0);\r\n\t\t\tvar _vlen=8 *CONST3D2D.BYTES_PE;\r\n\t\t\tthis.position=[2,0x1406,false,_vlen,0];\r\n\t\t\tthis.texcoord=[2,0x1406,false,_vlen,2 *CONST3D2D.BYTES_PE];\r\n\t\t\tthis.color=[4,0x1406,false,_vlen,4 *CONST3D2D.BYTES_PE];\r\n\t\t}\r\n\r\n\t\t__class(SkinSV,'laya.webgl.shader.d2.skinAnishader.SkinSV',_super);\r\n\t\treturn SkinSV;\r\n\t})(Value2D)\r\n\r\n\r\n\t//class laya.webgl.shader.d2.value.Color2dSV extends laya.webgl.shader.d2.value.Value2D\r\n\tvar Color2dSV=(function(_super){\r\n\t\tfunction Color2dSV(args){\r\n\t\t\tColor2dSV.__super.call(this,0x02,0);\r\n\t\t\tthis.color=[];\r\n\t\t}\r\n\r\n\t\t__class(Color2dSV,'laya.webgl.shader.d2.value.Color2dSV',_super);\r\n\t\tvar __proto=Color2dSV.prototype;\r\n\t\t__proto.setValue=function(value){\r\n\t\t\tvalue.fillStyle&&(this.color=value.fillStyle._color._color);\r\n\t\t\tvalue.strokeStyle&&(this.color=value.strokeStyle._color._color);\r\n\t\t}\r\n\r\n\t\treturn Color2dSV;\r\n\t})(Value2D)\r\n\r\n\r\n\t//class laya.webgl.shader.d2.value.FillTextureSV extends laya.webgl.shader.d2.value.Value2D\r\n\tvar FillTextureSV1=(function(_super){\r\n\t\tfunction FillTextureSV(type){\r\n\t\t\tthis.u_colorMatrix=null;\r\n\t\t\tthis.strength=0;\r\n\t\t\tthis.colorMat=null;\r\n\t\t\tthis.colorAlpha=null;\r\n\t\t\tthis.u_TexRange=[0,1,0,1];\r\n\t\t\tthis.u_offset=[0,0];\r\n\t\t\tthis.texcoord=Value2D._TEXCOORD;\r\n\t\t\tFillTextureSV.__super.call(this,0x100,0);\r\n\t\t}\r\n\r\n\t\t__class(FillTextureSV,'laya.webgl.shader.d2.value.FillTextureSV',_super,'FillTextureSV1');\r\n\t\tvar __proto=FillTextureSV.prototype;\r\n\t\t//this.color=[4,WebGLContext.FLOAT,false,_vlen,4 *CONST3D2D.BYTES_PE];\r\n\t\t__proto.setValue=function(vo){\r\n\t\t\tthis.ALPHA=vo.ALPHA;\r\n\t\t\tvo.filters && this.setFilters(vo.filters);\r\n\t\t}\r\n\r\n\t\t__proto.clear=function(){\r\n\t\t\tthis.texture=null;\r\n\t\t\tthis.shader=null;\r\n\t\t\tthis.defines.setValue(0);\r\n\t\t}\r\n\r\n\t\treturn FillTextureSV;\r\n\t})(Value2D)\r\n\r\n\r\n\t//class laya.webgl.shader.d2.value.TextureSV extends laya.webgl.shader.d2.value.Value2D\r\n\tvar TextureSV=(function(_super){\r\n\t\tfunction TextureSV(subID){\r\n\t\t\tthis.u_colorMatrix=null;\r\n\t\t\tthis.strength=0;\r\n\t\t\tthis.colorMat=null;\r\n\t\t\tthis.colorAlpha=null;\r\n\t\t\tthis.texcoord=Value2D._TEXCOORD;\r\n\t\t\t(subID===void 0)&& (subID=0);\r\n\t\t\tTextureSV.__super.call(this,0x01,subID);\r\n\t\t}\r\n\r\n\t\t__class(TextureSV,'laya.webgl.shader.d2.value.TextureSV',_super);\r\n\t\tvar __proto=TextureSV.prototype;\r\n\t\t__proto.setValue=function(vo){\r\n\t\t\tthis.ALPHA=vo.ALPHA;\r\n\t\t\tvo.filters && this.setFilters(vo.filters);\r\n\t\t}\r\n\r\n\t\t__proto.clear=function(){\r\n\t\t\tthis.texture=null;\r\n\t\t\tthis.shader=null;\r\n\t\t\tthis.defines.setValue(0);\r\n\t\t}\r\n\r\n\t\treturn TextureSV;\r\n\t})(Value2D)\r\n\r\n\r\n\t//class laya.webgl.shader.d2.value.PrimitiveSV extends laya.webgl.shader.d2.value.Value2D\r\n\tvar PrimitiveSV=(function(_super){\r\n\t\tfunction PrimitiveSV(args){\r\n\t\t\tthis.a_color=null;\r\n\t\t\tthis.u_pos=[0,0];\r\n\t\t\tPrimitiveSV.__super.call(this,0x04,0);\r\n\t\t\tthis.position=[2,0x1406,false,5 *CONST3D2D.BYTES_PE,0];\r\n\t\t\tthis.a_color=[3,0x1406,false,5 *CONST3D2D.BYTES_PE,2 *CONST3D2D.BYTES_PE];\r\n\t\t}\r\n\r\n\t\t__class(PrimitiveSV,'laya.webgl.shader.d2.value.PrimitiveSV',_super);\r\n\t\treturn PrimitiveSV;\r\n\t})(Value2D)\r\n\r\n\r\n\t/**\r\n\t*<code>Component</code> 是ui控件类的基类。\r\n\t*<p>生命周期：preinitialize > createChildren > initialize > 组件构造函数</p>\r\n\t*/\r\n\t//class laya.ui.Component extends laya.display.Sprite\r\n\tvar Component=(function(_super){\r\n\t\tfunction Component(){\r\n\t\t\tthis._comXml=null;\r\n\t\t\tthis._dataSource=null;\r\n\t\t\tthis._toolTip=null;\r\n\t\t\tthis._tag=null;\r\n\t\t\tthis._disabled=false;\r\n\t\t\tthis._gray=false;\r\n\t\t\tComponent.__super.call(this);\r\n\t\t\tthis._layout=LayoutStyle.EMPTY;\r\n\t\t\tthis.preinitialize();\r\n\t\t\tthis.createChildren();\r\n\t\t\tthis.initialize();\r\n\t\t}\r\n\r\n\t\t__class(Component,'laya.ui.Component',_super);\r\n\t\tvar __proto=Component.prototype;\r\n\t\tLaya.imps(__proto,{\"laya.ui.IComponent\":true})\r\n\t\t/**@inheritDoc */\r\n\t\t__proto.destroy=function(destroyChild){\r\n\t\t\t(destroyChild===void 0)&& (destroyChild=true);\r\n\t\t\t_super.prototype.destroy.call(this,destroyChild);\r\n\t\t\tthis._dataSource=this._layout=null;\r\n\t\t\tthis._tag=null;\r\n\t\t\tthis._toolTip=null;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*<p>预初始化。</p>\r\n\t\t*@internal 子类可在此函数内设置、修改属性默认值\r\n\t\t*/\r\n\t\t__proto.preinitialize=function(){}\r\n\t\t/**\r\n\t\t*<p>创建并添加控件子节点。</p>\r\n\t\t*@internal 子类可在此函数内创建并添加子节点。\r\n\t\t*/\r\n\t\t__proto.createChildren=function(){}\r\n\t\t/**\r\n\t\t*<p>控件初始化。</p>\r\n\t\t*@internal 在此子对象已被创建，可以对子对象进行修改。\r\n\t\t*/\r\n\t\t__proto.initialize=function(){}\r\n\t\t/**\r\n\t\t*<p>延迟运行指定的函数。</p>\r\n\t\t*<p>在控件被显示在屏幕之前调用，一般用于延迟计算数据。</p>\r\n\t\t*@param method 要执行的函数的名称。例如，functionName。\r\n\t\t*@param args 传递给 <code>method</code> 函数的可选参数列表。\r\n\t\t*\r\n\t\t*@see #runCallLater()\r\n\t\t*/\r\n\t\t__proto.callLater=function(method,args){\r\n\t\t\tLaya.timer.callLater(this,method,args);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*<p>如果有需要延迟调用的函数（通过 <code>callLater</code> 函数设置），则立即执行延迟调用函数。</p>\r\n\t\t*@param method 要执行的函数名称。例如，functionName。\r\n\t\t*@see #callLater()\r\n\t\t*/\r\n\t\t__proto.runCallLater=function(method){\r\n\t\t\tLaya.timer.runCallLater(this,method);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*<p>立即执行影响宽高度量的延迟调用函数。</p>\r\n\t\t*@internal <p>使用 <code>runCallLater</code> 函数，立即执行影响宽高度量的延迟运行函数(使用 <code>callLater</code> 设置延迟执行函数)。</p>\r\n\t\t*@see #callLater()\r\n\t\t*@see #runCallLater()\r\n\t\t*/\r\n\t\t__proto.commitMeasure=function(){}\r\n\t\t/**\r\n\t\t*<p>重新调整对象的大小。</p>\r\n\t\t*/\r\n\t\t__proto.changeSize=function(){\r\n\t\t\tthis.event(\"resize\");\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*<p>获取对象的布局样式。</p>\r\n\t\t*/\r\n\t\t__proto.getLayout=function(){\r\n\t\t\tthis._layout===LayoutStyle.EMPTY && (this._layout=new LayoutStyle());\r\n\t\t\treturn this._layout;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*对象从显示列表移除的事件侦听处理函数。\r\n\t\t*/\r\n\t\t__proto.onRemoved=function(){\r\n\t\t\tthis.parent.off(\"resize\",this,this.onCompResize);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*对象被添加到显示列表的事件侦听处理函数。\r\n\t\t*/\r\n\t\t__proto.onAdded=function(){\r\n\t\t\tthis.parent.on(\"resize\",this,this.onCompResize);\r\n\t\t\tthis.resetLayoutX();\r\n\t\t\tthis.resetLayoutY();\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*父容器的 <code>Event.RESIZE</code> 事件侦听处理函数。\r\n\t\t*/\r\n\t\t__proto.onCompResize=function(){\r\n\t\t\tif (this._layout && this._layout.enable){\r\n\t\t\t\tthis.resetLayoutX();\r\n\t\t\t\tthis.resetLayoutY();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*<p>重置对象的 <code>X</code> 轴（水平方向）布局。</p>\r\n\t\t*/\r\n\t\t__proto.resetLayoutX=function(){\r\n\t\t\tvar layout=this._layout;\r\n\t\t\tif (!isNaN(layout.anchorX))this.pivotX=layout.anchorX *this.width;\r\n\t\t\tvar parent=this.parent;\r\n\t\t\tif (parent){\r\n\t\t\t\tif (!isNaN(layout.centerX)){\r\n\t\t\t\t\tthis.x=(parent.width-this.displayWidth)*0.5+layout.centerX+this.pivotX *this.scaleX;\r\n\t\t\t\t\t}else if (!isNaN(layout.left)){\r\n\t\t\t\t\tthis.x=layout.left+this.pivotX *this.scaleX;\r\n\t\t\t\t\tif (!isNaN(layout.right)){\r\n\t\t\t\t\t\tthis.width=(parent._width-layout.left-layout.right)/ this.scaleX;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t}else if (!isNaN(layout.right)){\r\n\t\t\t\t\tthis.x=parent.width-this.displayWidth-layout.right+this.pivotX *this.scaleX;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*<p>重置对象的 <code>Y</code> 轴（垂直方向）布局。</p>\r\n\t\t*/\r\n\t\t__proto.resetLayoutY=function(){\r\n\t\t\tvar layout=this._layout;\r\n\t\t\tif (!isNaN(layout.anchorY))this.pivotY=layout.anchorY *this.height;\r\n\t\t\tvar parent=this.parent;\r\n\t\t\tif (parent){\r\n\t\t\t\tif (!isNaN(layout.centerY)){\r\n\t\t\t\t\tthis.y=(parent.height-this.displayHeight)*0.5+layout.centerY+this.pivotY *this.scaleY;\r\n\t\t\t\t\t}else if (!isNaN(layout.top)){\r\n\t\t\t\t\tthis.y=layout.top+this.pivotY *this.scaleY;\r\n\t\t\t\t\tif (!isNaN(layout.bottom)){\r\n\t\t\t\t\t\tthis.height=(parent._height-layout.top-layout.bottom)/ this.scaleY;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t}else if (!isNaN(layout.bottom)){\r\n\t\t\t\t\tthis.y=parent.height-this.displayHeight-layout.bottom+this.pivotY *this.scaleY;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*对象的 <code>Event.MOUSE_OVER</code> 事件侦听处理函数。\r\n\t\t*/\r\n\t\t__proto.onMouseOver=function(e){\r\n\t\t\tLaya.stage.event(\"showtip\",this._toolTip);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*对象的 <code>Event.MOUSE_OUT</code> 事件侦听处理函数。\r\n\t\t*/\r\n\t\t__proto.onMouseOut=function(e){\r\n\t\t\tLaya.stage.event(\"hidetip\",this._toolTip);\r\n\t\t}\r\n\r\n\t\t/**是否禁用页面，设置为true后，会变灰并且禁用鼠标。*/\r\n\t\t__getset(0,__proto,'disabled',function(){\r\n\t\t\treturn this._disabled;\r\n\t\t\t},function(value){\r\n\t\t\tif (value!==this._disabled){\r\n\t\t\t\tthis.gray=this._disabled=value;\r\n\t\t\t\tthis.mouseEnabled=!value;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t/**是否变灰。*/\r\n\t\t__getset(0,__proto,'gray',function(){\r\n\t\t\treturn this._gray;\r\n\t\t\t},function(value){\r\n\t\t\tif (value!==this._gray){\r\n\t\t\t\tthis._gray=value;\r\n\t\t\t\tUIUtils.gray(this,value);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*<p>对象的标签。</p>\r\n\t\t*@internal 冗余字段，可以用来储存数据。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'tag',function(){\r\n\t\t\treturn this._tag;\r\n\t\t\t},function(value){\r\n\t\t\tthis._tag=value;\r\n\t\t});\r\n\r\n\t\t/**Y轴锚点，值为0-1*/\r\n\t\t__getset(0,__proto,'anchorY',function(){\r\n\t\t\treturn this._layout.anchorY;\r\n\t\t\t},function(value){\r\n\t\t\tthis.getLayout().anchorY=value;\r\n\t\t\tthis.layOutEabled=true;\r\n\t\t\tthis.resetLayoutY();\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*<p>鼠标悬停提示。</p>\r\n\t\t*<p>可以赋值为文本 <code>String</code> 或函数 <code>Handler</code> ，用来实现自定义样式的鼠标提示和参数携带等。</p>\r\n\t\t*@example 以下例子展示了三种鼠标提示：\r\n\t\t<listing version=\"3.0\">\r\n\t\tprivate var _testTips:TestTipsUI=new TestTipsUI();\r\n\t\tprivate function testTips():void {\r\n\t\t\t//简单鼠标提示\r\n\t\t\tbtn2.toolTip=\"这里是鼠标提示&lt;b&gt;粗体&lt;/b&gt;&lt;br&gt;换行\";\r\n\t\t\t//自定义的鼠标提示\r\n\t\t\tbtn1.toolTip=showTips1;\r\n\t\t\t//带参数的自定义鼠标提示\r\n\t\t\tclip.toolTip=new Handler(this,showTips2,[\"clip\"]);\r\n\t\t}\r\n\r\n\t\tprivate function showTips1():void {\r\n\t\t\t_testTips.label.text=\"这里是按钮[\"+btn1.label+\"]\";\r\n\t\t\ttip.addChild(_testTips);\r\n\t\t}\r\n\r\n\t\tprivate function showTips2(name:String):void {\r\n\t\t\t_testTips.label.text=\"这里是\"+name;\r\n\t\t\ttip.addChild(_testTips);\r\n\t\t}\r\n\r\n\t\t</listing>\r\n\t\t*/\r\n\t\t__getset(0,__proto,'toolTip',function(){\r\n\t\t\treturn this._toolTip;\r\n\t\t\t},function(value){\r\n\t\t\tif (this._toolTip !=value){\r\n\t\t\t\tthis._toolTip=value;\r\n\t\t\t\tif (value !=null){\r\n\t\t\t\t\tthis.on(\"mouseover\",this,this.onMouseOver);\r\n\t\t\t\t\tthis.on(\"mouseout\",this,this.onMouseOut);\r\n\t\t\t\t\t}else {\r\n\t\t\t\t\tthis.off(\"mouseover\",this,this.onMouseOver);\r\n\t\t\t\t\tthis.off(\"mouseout\",this,this.onMouseOut);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t/**X轴锚点，值为0-1*/\r\n\t\t__getset(0,__proto,'anchorX',function(){\r\n\t\t\treturn this._layout.anchorX;\r\n\t\t\t},function(value){\r\n\t\t\tthis.getLayout().anchorX=value;\r\n\t\t\tthis.layOutEabled=true;\r\n\t\t\tthis.resetLayoutX();\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*<p>在父容器中，此对象的垂直方向中轴线与父容器的垂直方向中心线的距离（以像素为单位）。</p>\r\n\t\t*/\r\n\t\t__getset(0,__proto,'centerY',function(){\r\n\t\t\treturn this._layout.centerY;\r\n\t\t\t},function(value){\r\n\t\t\tthis.getLayout().centerY=value;\r\n\t\t\tthis.layOutEabled=true;\r\n\t\t\tthis.resetLayoutY();\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*<p>指定对象是否可使用布局。</p>\r\n\t\t*<p>如果值为true,则此对象可以使用布局样式，否则不使用布局样式。</p>\r\n\t\t*@param value 一个 Boolean 值，指定对象是否可使用布局。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'layOutEabled',null,function(value){\r\n\t\t\tif (this._layout && this._layout.enable !=value){\r\n\t\t\t\tthis._layout.enable=value;\r\n\t\t\t\tif (this.parent){\r\n\t\t\t\t\tthis.onAdded();\r\n\t\t\t\t\t}else {\r\n\t\t\t\t\tthis.on(\"added\",this,this.onAdded);\r\n\t\t\t\t\tthis.on(\"removed\",this,this.onRemoved);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*<p>从组件右边到其内容区域右边之间的水平距离（以像素为单位）。</p>\r\n\t\t*/\r\n\t\t__getset(0,__proto,'right',function(){\r\n\t\t\treturn this._layout.right;\r\n\t\t\t},function(value){\r\n\t\t\tthis.getLayout().right=value;\r\n\t\t\tthis.layOutEabled=true;\r\n\t\t\tthis.resetLayoutX();\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*<p>数据赋值，通过对UI赋值来控制UI显示逻辑。</p>\r\n\t\t*<p>简单赋值会更改组件的默认属性，使用大括号可以指定组件的任意属性进行赋值。</p>\r\n\t\t*@example 以下示例中， <code>label1、checkbox1</code> 分别为示例的name属性值。\r\n\t\t<listing version=\"3.0\">\r\n\t\t//默认属性赋值\r\n\t\tdataSource={label1:\"改变了label\",checkbox1:true};//(更改了label1的text属性值，更改checkbox1的selected属性)。\r\n\t\t//任意属性赋值\r\n\t\tdataSource={label2:{text:\"改变了label\",size:14},checkbox2:{selected:true,x:10}};\r\n\t\t</listing>\r\n\t\t*@return\r\n\t\t*/\r\n\t\t__getset(0,__proto,'dataSource',function(){\r\n\t\t\treturn this._dataSource;\r\n\t\t\t},function(value){\r\n\t\t\tthis._dataSource=value;\r\n\t\t\tfor (var prop in this._dataSource){\r\n\t\t\t\tif (this.hasOwnProperty(prop)){\r\n\t\t\t\t\tthis[prop]=this._dataSource[prop];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t/**@inheritDoc */\r\n\t\t__getset(0,__proto,'scaleY',_super.prototype._$get_scaleY,function(value){\r\n\t\t\tif (_super.prototype._$get_scaleY.call(this)!=value){\r\n\t\t\t\t_super.prototype._$set_scaleY.call(this,value);\r\n\t\t\t\tthis.callLater(this.changeSize);\r\n\t\t\t\tthis._layout.enable && this.resetLayoutY();\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*<p>从组件左边到其内容区域左边之间的水平距离（以像素为单位）。</p>\r\n\t\t*/\r\n\t\t__getset(0,__proto,'left',function(){\r\n\t\t\treturn this._layout.left;\r\n\t\t\t},function(value){\r\n\t\t\tthis.getLayout().left=value;\r\n\t\t\tthis.layOutEabled=true;\r\n\t\t\tthis.resetLayoutX();\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*<p>从组件底边到其内容区域底边之间的垂直距离（以像素为单位）。</p>\r\n\t\t*/\r\n\t\t__getset(0,__proto,'bottom',function(){\r\n\t\t\treturn this._layout.bottom;\r\n\t\t\t},function(value){\r\n\t\t\tthis.getLayout().bottom=value;\r\n\t\t\tthis.layOutEabled=true;\r\n\t\t\tthis.resetLayoutY();\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*<p>从组件顶边到其内容区域顶边之间的垂直距离（以像素为单位）。</p>\r\n\t\t*/\r\n\t\t__getset(0,__proto,'top',function(){\r\n\t\t\treturn this._layout.top;\r\n\t\t\t},function(value){\r\n\t\t\tthis.getLayout().top=value;\r\n\t\t\tthis.layOutEabled=true;\r\n\t\t\tthis.resetLayoutY();\r\n\t\t});\r\n\r\n\t\t/**@inheritDoc */\r\n\t\t__getset(0,__proto,'scaleX',_super.prototype._$get_scaleX,function(value){\r\n\t\t\tif (_super.prototype._$get_scaleX.call(this)!=value){\r\n\t\t\t\t_super.prototype._$set_scaleX.call(this,value);\r\n\t\t\t\tthis.callLater(this.changeSize);\r\n\t\t\t\tthis._layout.enable && this.resetLayoutX();\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*XML 数据。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'comXml',function(){\r\n\t\t\treturn this._comXml;\r\n\t\t\t},function(value){\r\n\t\t\tthis._comXml=value;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*<p>显示对象的实际显示区域高度（以像素为单位）。</p>\r\n\t\t*/\r\n\t\t__getset(0,__proto,'measureHeight',function(){\r\n\t\t\tvar max=0;\r\n\t\t\tthis.commitMeasure();\r\n\t\t\tfor (var i=this.numChildren-1;i >-1;i--){\r\n\t\t\t\tvar comp=this.getChildAt(i);\r\n\t\t\t\tif (comp.visible){\r\n\t\t\t\t\tmax=Math.max(comp.y+comp.height *comp.scaleY,max);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn max;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*<p>对象的显示宽度（以像素为单位）。</p>\r\n\t\t*/\r\n\t\t__getset(0,__proto,'displayWidth',function(){\r\n\t\t\treturn this.width *this.scaleX;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*<p>在父容器中，此对象的水平方向中轴线与父容器的水平方向中心线的距离（以像素为单位）。</p>\r\n\t\t*/\r\n\t\t__getset(0,__proto,'centerX',function(){\r\n\t\t\treturn this._layout.centerX;\r\n\t\t\t},function(value){\r\n\t\t\tthis.getLayout().centerX=value;\r\n\t\t\tthis.layOutEabled=true;\r\n\t\t\tthis.resetLayoutX();\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*<p>显示对象的实际显示区域宽度（以像素为单位）。</p>\r\n\t\t*/\r\n\t\t__getset(0,__proto,'measureWidth',function(){\r\n\t\t\tvar max=0;\r\n\t\t\tthis.commitMeasure();\r\n\t\t\tfor (var i=this.numChildren-1;i >-1;i--){\r\n\t\t\t\tvar comp=this.getChildAt(i);\r\n\t\t\t\tif (comp.visible){\r\n\t\t\t\t\tmax=Math.max(comp.x+comp.width *comp.scaleX,max);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn max;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*<p>对象的显示高度（以像素为单位）。</p>\r\n\t\t*/\r\n\t\t__getset(0,__proto,'displayHeight',function(){\r\n\t\t\treturn this.height *this.scaleY;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*<p>表示显示对象的高度，以像素为单位。</p>\r\n\t\t*<p><b>注：</b>当值为0时，高度为自适应大小。</p>\r\n\t\t*@return\r\n\t\t*/\r\n\t\t__getset(0,__proto,'height',function(){\r\n\t\t\tif (this._height)return this._height;\r\n\t\t\treturn this.measureHeight;\r\n\t\t\t},function(value){\r\n\t\t\tif (this._height !=value){\r\n\t\t\t\tthis._height=value;\r\n\t\t\t\tthis.conchModel && this.conchModel.size(this._width,this._height);\r\n\t\t\t\tthis.callLater(this.changeSize);\r\n\t\t\t\tif (this._layout.enable && (!isNaN(this._layout.centerY)|| !isNaN(this._layout.bottom)|| !isNaN(this._layout.anchorY)))this.resetLayoutY();\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*<p>表示显示对象的宽度，以像素为单位。</p>\r\n\t\t*<p><b>注：</b>当值为0时，宽度为自适应大小。</p>\r\n\t\t*/\r\n\t\t__getset(0,__proto,'width',function(){\r\n\t\t\tif (this._width)return this._width;\r\n\t\t\treturn this.measureWidth;\r\n\t\t\t},function(value){\r\n\t\t\tif (this._width !=value){\r\n\t\t\t\tthis._width=value;\r\n\t\t\t\tthis.conchModel && this.conchModel.size(this._width,this._height);\r\n\t\t\t\tthis.callLater(this.changeSize);\r\n\t\t\t\tif (this._layout.enable && (!isNaN(this._layout.centerX)|| !isNaN(this._layout.right)|| !isNaN(this._layout.anchorX)))this.resetLayoutX();\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn Component;\r\n\t})(Sprite)\r\n\r\n\r\n\t/**\r\n\t*<p> <code>Text</code> 类用于创建显示对象以显示文本。</p>\r\n\t*@example 以下示例代码，创建了一个 <code>Text</code> 实例。\r\n\t*<listing version=\"3.0\">\r\n\t*package\r\n\t*{\r\n\t\t*import laya.display.Text;\r\n\t\t*public class Text_Example\r\n\t\t*{\r\n\t\t\t*public function Text_Example()\r\n\t\t\t*{\r\n\t\t\t\t*Laya.init(640,800);//设置游戏画布宽高、渲染模式。\r\n\t\t\t\t*Laya.stage.bgColor=\"#efefef\";//设置画布的背景颜色。\r\n\t\t\t\t*onInit();\r\n\t\t\t\t*}\r\n\t\t\t*private function onInit():void\r\n\t\t\t*{\r\n\t\t\t\t*var text:Text=new Text();//创建一个 Text 类的实例对象 text 。\r\n\t\t\t\t*text.text=\"这个是一个 Text 文本示例。\";\r\n\t\t\t\t*text.color=\"#008fff\";//设置 text 的文本颜色。\r\n\t\t\t\t*text.font=\"Arial\";//设置 text 的文本字体。\r\n\t\t\t\t*text.bold=true;//设置 text 的文本显示为粗体。\r\n\t\t\t\t*text.fontSize=30;//设置 text 的字体大小。\r\n\t\t\t\t*text.wordWrap=true;//设置 text 的文本自动换行。\r\n\t\t\t\t*text.x=100;//设置 text 对象的属性 x 的值，用于控制 text 对象的显示位置。\r\n\t\t\t\t*text.y=100;//设置 text 对象的属性 y 的值，用于控制 text 对象的显示位置。\r\n\t\t\t\t*text.width=300;//设置 text 的宽度。\r\n\t\t\t\t*text.height=200;//设置 text 的高度。\r\n\t\t\t\t*text.italic=true;//设置 text 的文本显示为斜体。\r\n\t\t\t\t*text.borderColor=\"#fff000\";//设置 text 的文本边框颜色。\r\n\t\t\t\t*Laya.stage.addChild(text);//将 text 添加到显示列表。\r\n\t\t\t\t*}\r\n\t\t\t*}\r\n\t\t*}\r\n\t*</listing>\r\n\t*<listing version=\"3.0\">\r\n\t*Text_Example();\r\n\t*function Text_Example()\r\n\t*{\r\n\t\t*Laya.init(640,800);//设置游戏画布宽高、渲染模式。\r\n\t\t*Laya.stage.bgColor=\"#efefef\";//设置画布的背景颜色。\r\n\t\t*onInit();\r\n\t\t*}\r\n\t*function onInit()\r\n\t*{\r\n\t\t*var text=new laya.display.Text();//创建一个 Text 类的实例对象 text 。\r\n\t\t*text.text=\"这个是一个 Text 文本示例。\";\r\n\t\t*text.color=\"#008fff\";//设置 text 的文本颜色。\r\n\t\t*text.font=\"Arial\";//设置 text 的文本字体。\r\n\t\t*text.bold=true;//设置 text 的文本显示为粗体。\r\n\t\t*text.fontSize=30;//设置 text 的字体大小。\r\n\t\t*text.wordWrap=true;//设置 text 的文本自动换行。\r\n\t\t*text.x=100;//设置 text 对象的属性 x 的值，用于控制 text 对象的显示位置。\r\n\t\t*text.y=100;//设置 text 对象的属性 y 的值，用于控制 text 对象的显示位置。\r\n\t\t*text.width=300;//设置 text 的宽度。\r\n\t\t*text.height=200;//设置 text 的高度。\r\n\t\t*text.italic=true;//设置 text 的文本显示为斜体。\r\n\t\t*text.borderColor=\"#fff000\";//设置 text 的文本边框颜色。\r\n\t\t*Laya.stage.addChild(text);//将 text 添加到显示列表。\r\n\t\t*}\r\n\t*</listing>\r\n\t*<listing version=\"3.0\">\r\n\t*class Text_Example {\r\n\t\t*constructor(){\r\n\t\t\t*Laya.init(640,800);//设置游戏画布宽高、渲染模式。\r\n\t\t\t*Laya.stage.bgColor=\"#efefef\";//设置画布的背景颜色。\r\n\t\t\t*this.onInit();\r\n\t\t\t*}\r\n\t\t*private onInit():void {\r\n\t\t\t*var text:laya.display.Text=new laya.display.Text();//创建一个 Text 类的实例对象 text 。\r\n\t\t\t*text.text=\"这个是一个 Text 文本示例。\";\r\n\t\t\t*text.color=\"#008fff\";//设置 text 的文本颜色。\r\n\t\t\t*text.font=\"Arial\";//设置 text 的文本字体。\r\n\t\t\t*text.bold=true;//设置 text 的文本显示为粗体。\r\n\t\t\t*text.fontSize=30;//设置 text 的字体大小。\r\n\t\t\t*text.wordWrap=true;//设置 text 的文本自动换行。\r\n\t\t\t*text.x=100;//设置 text 对象的属性 x 的值，用于控制 text 对象的显示位置。\r\n\t\t\t*text.y=100;//设置 text 对象的属性 y 的值，用于控制 text 对象的显示位置。\r\n\t\t\t*text.width=300;//设置 text 的宽度。\r\n\t\t\t*text.height=200;//设置 text 的高度。\r\n\t\t\t*text.italic=true;//设置 text 的文本显示为斜体。\r\n\t\t\t*text.borderColor=\"#fff000\";//设置 text 的文本边框颜色。\r\n\t\t\t*Laya.stage.addChild(text);//将 text 添加到显示列表。\r\n\t\t\t*}\r\n\t\t*}\r\n\t*</listing>\r\n\t*/\r\n\t//class laya.display.Text extends laya.display.Sprite\r\n\tvar Text=(function(_super){\r\n\t\tfunction Text(){\r\n\t\t\tthis._clipPoint=null;\r\n\t\t\tthis._currBitmapFont=null;\r\n\t\t\tthis._text=null;\r\n\t\t\tthis._isChanged=false;\r\n\t\t\tthis._textWidth=0;\r\n\t\t\tthis._textHeight=0;\r\n\t\t\tthis._lines=[];\r\n\t\t\tthis._lineWidths=[];\r\n\t\t\tthis._startX=NaN;\r\n\t\t\tthis._startY=NaN;\r\n\t\t\tthis._lastVisibleLineIndex=-1;\r\n\t\t\tthis._words=null;\r\n\t\t\tthis._charSize={};\r\n\t\t\tthis.underline=false;\r\n\t\t\tthis._underlineColor=null;\r\n\t\t\tText.__super.call(this);\r\n\t\t\tthis.overflow=Text.VISIBLE;\r\n\t\t\tthis._style=new CSSStyle(this);\r\n\t\t\t(this._style).wordWrap=false;\r\n\t\t}\r\n\r\n\t\t__class(Text,'laya.display.Text',_super);\r\n\t\tvar __proto=Text.prototype;\r\n\t\t/**@inheritDoc */\r\n\t\t__proto.destroy=function(destroyChild){\r\n\t\t\t(destroyChild===void 0)&& (destroyChild=true);\r\n\t\t\t_super.prototype.destroy.call(this,destroyChild);\r\n\t\t\tthis._lines=null;\r\n\t\t\tif (this._words){\r\n\t\t\t\tthis._words.length=0;\r\n\t\t\t\tthis._words=null;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*@inheritDoc\r\n\t\t*/\r\n\t\t__proto._getBoundPointsM=function(ifRotate){\r\n\t\t\t(ifRotate===void 0)&& (ifRotate=false);\r\n\t\t\tvar rec=Rectangle.TEMP;\r\n\t\t\trec.setTo(0,0,this.width,this.height);\r\n\t\t\treturn rec._getBoundPoints();\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@inheritDoc\r\n\t\t*/\r\n\t\t__proto.getGraphicBounds=function(){\r\n\t\t\tvar rec=Rectangle.TEMP;\r\n\t\t\trec.setTo(0,0,this.width,this.height);\r\n\t\t\treturn rec;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*@inheritDoc\r\n\t\t*/\r\n\t\t__proto._getCSSStyle=function(){\r\n\t\t\treturn this._style;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*<p>根据指定的文本，从语言包中取当前语言的文本内容。并对此文本中的{i}文本进行替换。</p>\r\n\t\t*<p>例如：\r\n\t\t*<li>（1）text 的值为“我的名字”，先取到这个文本对应的当前语言版本里的值“My name”，将“My name”设置为当前文本的内容。</li>\r\n\t\t*<li>（2）text 的值为“恭喜你赢得{0}个钻石，{1}经验。”，arg1 的值为100，arg2 的值为200。\r\n\t\t*则先取到这个文本对应的当前语言版本里的值“Congratulations on your winning {0}diamonds,{1}experience.”，\r\n\t\t*然后将文本里的{0}、{1}，依据括号里的数字从0开始替换为 arg1、arg2 的值。\r\n\t\t*将替换处理后的文本“Congratulations on your winning 100 diamonds,200 experience.”设置为当前文本的内容。\r\n\t\t*</li>\r\n\t\t*</p>\r\n\t\t*@param text 文本内容。\r\n\t\t*@param ...args 文本替换参数。\r\n\t\t*/\r\n\t\t__proto.lang=function(text,arg1,arg2,arg3,arg4,arg5,arg6,arg7,arg8,arg9,arg10){\r\n\t\t\ttext=Text.langPacks && Text.langPacks[text] ? Text.langPacks[text] :text;\r\n\t\t\tif (arguments.length < 2){\r\n\t\t\t\tthis._text=text;\r\n\t\t\t\t}else {\r\n\t\t\t\tfor (var i=0,n=arguments.length;i < n;i++){\r\n\t\t\t\t\ttext=text.replace(\"{\"+i+\"}\",arguments[i+1]);\r\n\t\t\t\t}\r\n\t\t\t\tthis._text=text;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*渲染文字。\r\n\t\t*@param begin 开始渲染的行索引。\r\n\t\t*@param visibleLineCount 渲染的行数。\r\n\t\t*/\r\n\t\t__proto.renderText=function(begin,visibleLineCount){\r\n\t\t\tvar graphics=this.graphics;\r\n\t\t\tgraphics.clear();\r\n\t\t\tvar ctxFont=(this.italic ? \"italic \" :\"\")+(this.bold ? \"bold \" :\"\")+this.fontSize+\"px \"+this.font;\r\n\t\t\tBrowser.context.font=ctxFont;\r\n\t\t\tvar padding=this.padding;\r\n\t\t\tvar startX=padding[3];\r\n\t\t\tvar textAlgin=\"left\";\r\n\t\t\tvar lines=this._lines;\r\n\t\t\tvar lineHeight=this.leading+this._charSize.height;\r\n\t\t\tvar tCurrBitmapFont=this._currBitmapFont;\r\n\t\t\tif (tCurrBitmapFont){\r\n\t\t\t\tlineHeight=this.leading+tCurrBitmapFont.getMaxHeight();\r\n\t\t\t};\r\n\t\t\tvar startY=padding[0];\r\n\t\t\tif ((!tCurrBitmapFont)&& this._width > 0 && this._textWidth <=this._width){\r\n\t\t\t\tif (this.align==\"right\"){\r\n\t\t\t\t\ttextAlgin=\"right\";\r\n\t\t\t\t\tstartX=this._width-padding[1];\r\n\t\t\t\t\t}else if (this.align==\"center\"){\r\n\t\t\t\t\ttextAlgin=\"center\";\r\n\t\t\t\t\tstartX=this._width *0.5+padding[3]-padding[1];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (this._height > 0){\r\n\t\t\t\tvar tempVAlign=(this._textHeight > this._height)? \"top\" :this.valign;\r\n\t\t\t\tif (tempVAlign===\"middle\")\r\n\t\t\t\t\tstartY=(this._height-visibleLineCount *lineHeight)*0.5+padding[0]-padding[2];\r\n\t\t\t\telse if (tempVAlign===\"bottom\")\r\n\t\t\t\tstartY=this._height-visibleLineCount *lineHeight-padding[2];\r\n\t\t\t};\r\n\t\t\tvar style=this._style;\r\n\t\t\tif (tCurrBitmapFont && tCurrBitmapFont.autoScaleSize){\r\n\t\t\t\tvar bitmapScale=tCurrBitmapFont.fontSize / this.fontSize;\r\n\t\t\t}\r\n\t\t\tif (this._clipPoint){\r\n\t\t\t\tgraphics.save();\r\n\t\t\t\tif (tCurrBitmapFont && tCurrBitmapFont.autoScaleSize){\r\n\t\t\t\t\tvar tClipWidth=0;\r\n\t\t\t\t\tvar tClipHeight=0;\r\n\t\t\t\t\tthis._width ? tClipWidth=(this._width-padding[3]-padding[1]):tClipWidth=this._textWidth;\r\n\t\t\t\t\tthis._height ? tClipHeight=(this._height-padding[0]-padding[2]):tClipHeight=this._textHeight;\r\n\t\t\t\t\ttClipWidth *=bitmapScale;\r\n\t\t\t\t\ttClipHeight *=bitmapScale;\r\n\t\t\t\t\tgraphics.clipRect(padding[3],padding[0],tClipWidth,tClipHeight);\r\n\t\t\t\t\t}else {\r\n\t\t\t\t\tgraphics.clipRect(padding[3],padding[0],this._width ? (this._width-padding[3]-padding[1]):this._textWidth,this._height ? (this._height-padding[0]-padding[2]):this._textHeight);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\tvar password=style.password;\r\n\t\t\tif ((\"prompt\" in this)&& this['prompt']==this._text)\r\n\t\t\t\tpassword=false;\r\n\t\t\tvar x=0,y=0;\r\n\t\t\tvar end=Math.min(this._lines.length,visibleLineCount+begin)|| 1;\r\n\t\t\tfor (var i=begin;i < end;i++){\r\n\t\t\t\tvar word=lines[i];\r\n\t\t\t\tvar _word;\r\n\t\t\t\tif (password){\r\n\t\t\t\t\tvar len=word.length;\r\n\t\t\t\t\tword=\"\";\r\n\t\t\t\t\tfor (var j=len;j > 0;j--){\r\n\t\t\t\t\t\tword+=\"●\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tx=startX-(this._clipPoint ? this._clipPoint.x :0);\r\n\t\t\t\ty=startY+lineHeight *i-(this._clipPoint ? this._clipPoint.y :0);\r\n\t\t\t\tthis.underline && this.drawUnderline(textAlgin,x,y,i);\r\n\t\t\t\tif (tCurrBitmapFont){\r\n\t\t\t\t\tvar tWidth=this.width;\r\n\t\t\t\t\tif (tCurrBitmapFont.autoScaleSize){\r\n\t\t\t\t\t\ttWidth=this.width *bitmapScale;\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttCurrBitmapFont.drawText(word,this,x,y,this.align,tWidth);\r\n\t\t\t\t\t}else {\r\n\t\t\t\t\tif (Render.isWebGL){\r\n\t\t\t\t\t\tthis._words || (this._words=[]);\r\n\t\t\t\t\t\t_word=this._words.length > (i-begin)? this._words[i-begin] :new WordText();\r\n\t\t\t\t\t\t_word.setText(word);\r\n\t\t\t\t\t\t}else {\r\n\t\t\t\t\t\t_word=word;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tstyle.stroke ? graphics.fillBorderText(_word,x,y,ctxFont,this.color,style.strokeColor,style.stroke,textAlgin):graphics.fillText(_word,x,y,ctxFont,this.color,textAlgin);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (tCurrBitmapFont && tCurrBitmapFont.autoScaleSize){\r\n\t\t\t\tvar tScale=1 / bitmapScale;\r\n\t\t\t\tthis.scale(tScale,tScale);\r\n\t\t\t}\r\n\t\t\tif (this._clipPoint)\r\n\t\t\t\tgraphics.restore();\r\n\t\t\tthis._startX=startX;\r\n\t\t\tthis._startY=startY;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*绘制下划线\r\n\t\t*@param x 本行坐标\r\n\t\t*@param y 本行坐标\r\n\t\t*@param lineIndex 本行索引\r\n\t\t*/\r\n\t\t__proto.drawUnderline=function(align,x,y,lineIndex){\r\n\t\t\tvar lineWidth=this._lineWidths[lineIndex];\r\n\t\t\tswitch (align){\r\n\t\t\t\tcase 'center':\r\n\t\t\t\t\tx-=lineWidth / 2;\r\n\t\t\t\t\tbreak ;\r\n\t\t\t\tcase 'right':\r\n\t\t\t\t\tx-=lineWidth;\r\n\t\t\t\t\tbreak ;\r\n\t\t\t\tcase 'left':\r\n\t\t\t\tdefault :\r\n\t\t\t\t\tbreak ;\r\n\t\t\t\t}\r\n\t\t\ty+=this._charSize.height;\r\n\t\t\tthis._graphics.drawLine(x,y,x+lineWidth,y,this.underlineColor || this.color,1);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*<p>排版文本。</p>\r\n\t\t*<p>进行宽高计算，渲染、重绘文本。</p>\r\n\t\t*/\r\n\t\t__proto.typeset=function(){\r\n\t\t\tthis._isChanged=false;\r\n\t\t\tif (!this._text){\r\n\t\t\t\tthis._clipPoint=null;\r\n\t\t\t\tthis._textWidth=this._textHeight=0;\r\n\t\t\t\tthis.graphics.clear();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tBrowser.context.font=this._getCSSStyle().font;\r\n\t\t\tthis._lines.length=0;\r\n\t\t\tthis._lineWidths.length=0;\r\n\t\t\tthis.parseLines(this._text);\r\n\t\t\tthis.evalTextSize();\r\n\t\t\tif (this.checkEnabledViewportOrNot())\r\n\t\t\t\tthis._clipPoint || (this._clipPoint=new Point(0,0));\r\n\t\t\telse\r\n\t\t\tthis._clipPoint=null;\r\n\t\t\tvar lineCount=this._lines.length;\r\n\t\t\tif (this.overflow !=Text.VISIBLE){\r\n\t\t\t\tvar func=this.overflow==Text.HIDDEN ? Math.floor :Math.ceil;\r\n\t\t\t\tlineCount=Math.min(lineCount,func((this.height-this.padding[0]-this.padding[2])/ (this.leading+this._charSize.height)));\r\n\t\t\t};\r\n\t\t\tvar startLine=this.scrollY / (this._charSize.height+this.leading)| 0;\r\n\t\t\tthis.renderText(startLine,lineCount);\r\n\t\t\tthis.repaint();\r\n\t\t}\r\n\r\n\t\t__proto.evalTextSize=function(){\r\n\t\t\tvar nw=NaN,nh=NaN;\r\n\t\t\tnw=Math.max.apply(this,this._lineWidths);\r\n\t\t\tif (this._currBitmapFont)\r\n\t\t\t\tnh=this._lines.length *(this._currBitmapFont.getMaxHeight()+this.leading)+this.padding[0]+this.padding[2];\r\n\t\t\telse\r\n\t\t\tnh=this._lines.length *(this._charSize.height+this.leading)+this.padding[0]+this.padding[2];\r\n\t\t\tif (nw !=this._textWidth || nh !=this._textHeight){\r\n\t\t\t\tthis._textWidth=nw;\r\n\t\t\t\tthis._textHeight=nh;\r\n\t\t\t\tif (!this._width || !this._height)\r\n\t\t\t\t\tthis.conchModel && this.conchModel.size(this._width || this._textWidth,this._height || this._textHeight);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__proto.checkEnabledViewportOrNot=function(){\r\n\t\t\treturn this.overflow==Text.SCROLL && ((this._width > 0 && this._textWidth > this._width)|| (this._height > 0 && this._textHeight > this._height));\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*快速更改显示文本。不进行排版计算，效率较高。\r\n\t\t*<p>如果只更改文字内容，不更改文字样式，建议使用此接口，能提高效率。</p>\r\n\t\t*@param text 文本内容。\r\n\t\t*/\r\n\t\t__proto.changeText=function(text){\r\n\t\t\tif (this._text!==text){\r\n\t\t\t\tthis.lang(text+\"\");\r\n\t\t\t\tif (this._graphics && this._graphics.replaceText(this._text)){\r\n\t\t\t\t\t}else {\r\n\t\t\t\t\tthis.typeset();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*分析文本换行。\r\n\t\t*/\r\n\t\t__proto.parseLines=function(text){\r\n\t\t\tvar needWordWrapOrTruncate=this.wordWrap || this.overflow==Text.HIDDEN;\r\n\t\t\tif (needWordWrapOrTruncate){\r\n\t\t\t\tvar wordWrapWidth=this.getWordWrapWidth();\r\n\t\t\t}\r\n\t\t\tif (this._currBitmapFont){\r\n\t\t\t\tthis._charSize.width=this._currBitmapFont.getMaxWidth();\r\n\t\t\t\tthis._charSize.height=this._currBitmapFont.getMaxHeight();\r\n\t\t\t\t}else {\r\n\t\t\t\tvar measureResult=Browser.context.measureText(Text._testWord);\r\n\t\t\t\tthis._charSize.width=measureResult.width;\r\n\t\t\t\tthis._charSize.height=(measureResult.height || this.fontSize);\r\n\t\t\t};\r\n\t\t\tvar lines=text.replace(/\\r\\n/g,\"\\n\").split(\"\\n\");\r\n\t\t\tfor (var i=0,n=lines.length;i < n;i++){\r\n\t\t\t\tif (i < n-1)\r\n\t\t\t\t\tlines[i]+=\"\\n\";\r\n\t\t\t\tvar line=lines[i];\r\n\t\t\t\tif (needWordWrapOrTruncate)\r\n\t\t\t\t\tthis.parseLine(line,wordWrapWidth);\r\n\t\t\t\telse {\r\n\t\t\t\t\tthis._lineWidths.push(this.getTextWidth(line));\r\n\t\t\t\t\tthis._lines.push(line);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*解析行文本。\r\n\t\t*@param line 某行的文本。\r\n\t\t*@param wordWrapWidth 文本的显示宽度。\r\n\t\t*/\r\n\t\t__proto.parseLine=function(line,wordWrapWidth){\r\n\t\t\tvar ctx=Browser.context;\r\n\t\t\tvar lines=this._lines;\r\n\t\t\tvar maybeIndex=0;\r\n\t\t\tvar execResult;\r\n\t\t\tvar charsWidth=NaN;\r\n\t\t\tvar wordWidth=NaN;\r\n\t\t\tvar startIndex=0;\r\n\t\t\tcharsWidth=this.getTextWidth(line);\r\n\t\t\tif (charsWidth <=wordWrapWidth){\r\n\t\t\t\tlines.push(line);\r\n\t\t\t\tthis._lineWidths.push(charsWidth);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tcharsWidth=this._charSize.width;\r\n\t\t\tmaybeIndex=Math.floor(wordWrapWidth / charsWidth);\r\n\t\t\t(maybeIndex==0)&& (maybeIndex=1);\r\n\t\t\tcharsWidth=this.getTextWidth(line.substring(0,maybeIndex));\r\n\t\t\twordWidth=charsWidth;\r\n\t\t\tfor (var j=maybeIndex,m=line.length;j < m;j++){\r\n\t\t\t\tcharsWidth=this.getTextWidth(line.charAt(j));\r\n\t\t\t\twordWidth+=charsWidth;\r\n\t\t\t\tif (wordWidth > wordWrapWidth){\r\n\t\t\t\t\tif (this.wordWrap){\r\n\t\t\t\t\t\tvar newLine=line.substring(startIndex,j);\r\n\t\t\t\t\t\tif (newLine.charCodeAt(newLine.length-1)< 255){\r\n\t\t\t\t\t\t\texecResult=/[^\\x20-]+$/.exec(newLine);\r\n\t\t\t\t\t\t\tif (execResult){\r\n\t\t\t\t\t\t\t\tj=execResult.index+startIndex;\r\n\t\t\t\t\t\t\t\tif (execResult.index==0)\r\n\t\t\t\t\t\t\t\t\tj+=newLine.length;\r\n\t\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\tnewLine=line.substring(startIndex,j);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tlines.push(newLine);\r\n\t\t\t\t\t\tthis._lineWidths.push(wordWidth-charsWidth);\r\n\t\t\t\t\t\tstartIndex=j;\r\n\t\t\t\t\t\tif (j+maybeIndex < m){\r\n\t\t\t\t\t\t\tj+=maybeIndex;\r\n\t\t\t\t\t\t\tcharsWidth=this.getTextWidth(line.substring(startIndex,j));\r\n\t\t\t\t\t\t\twordWidth=charsWidth;\r\n\t\t\t\t\t\t\tj--;\r\n\t\t\t\t\t\t\t}else {\r\n\t\t\t\t\t\t\tlines.push(line.substring(startIndex,m));\r\n\t\t\t\t\t\t\tthis._lineWidths.push(this.getTextWidth(lines[lines.length-1]));\r\n\t\t\t\t\t\t\tstartIndex=-1;\r\n\t\t\t\t\t\t\tbreak ;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}else if (this.overflow==Text.HIDDEN){\r\n\t\t\t\t\t\tlines.push(line.substring(0,j));\r\n\t\t\t\t\t\tthis._lineWidths.push(this.getTextWidth(lines[lines.length-1]));\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (this.wordWrap && startIndex !=-1){\r\n\t\t\t\tlines.push(line.substring(startIndex,m));\r\n\t\t\t\tthis._lineWidths.push(this.getTextWidth(lines[lines.length-1]));\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__proto.getTextWidth=function(text){\r\n\t\t\tif (this._currBitmapFont)\r\n\t\t\t\treturn this._currBitmapFont.getTextWidth(text);\r\n\t\t\telse\r\n\t\t\treturn Browser.context.measureText(text).width;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*获取换行所需的宽度。\r\n\t\t*/\r\n\t\t__proto.getWordWrapWidth=function(){\r\n\t\t\tvar p=this.padding;\r\n\t\t\tvar w=NaN;\r\n\t\t\tif (this._currBitmapFont && this._currBitmapFont.autoScaleSize)\r\n\t\t\t\tw=this._width *(this._currBitmapFont.fontSize / this.fontSize);\r\n\t\t\telse\r\n\t\t\tw=this._width;\r\n\t\t\tif (w <=0){\r\n\t\t\t\tw=this.wordWrap ? 100 :Browser.width;\r\n\t\t\t}\r\n\t\t\tw <=0 && (w=100);\r\n\t\t\treturn w-p[3]-p[1];\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*返回字符的位置信息。\r\n\t\t*@param charIndex 索引位置。\r\n\t\t*@param out 输出的Point引用。\r\n\t\t*@return 返回Point位置信息。\r\n\t\t*/\r\n\t\t__proto.getCharPoint=function(charIndex,out){\r\n\t\t\tthis._isChanged && Laya.timer.runCallLater(this,this.typeset);\r\n\t\t\tvar len=0,lines=this._lines,startIndex=0;\r\n\t\t\tfor (var i=0,n=lines.length;i < n;i++){\r\n\t\t\t\tlen+=lines[i].length;\r\n\t\t\t\tif (charIndex < len){\r\n\t\t\t\t\tvar line=i;\r\n\t\t\t\t\tbreak ;\r\n\t\t\t\t}\r\n\t\t\t\tstartIndex=len;\r\n\t\t\t};\r\n\t\t\tvar ctxFont=(this.italic ? \"italic \" :\"\")+(this.bold ? \"bold \" :\"\")+this.fontSize+\"px \"+this.font;\r\n\t\t\tBrowser.context.font=ctxFont;\r\n\t\t\tvar width=this.getTextWidth(this._text.substring(startIndex,charIndex));\r\n\t\t\tvar point=out || new Point();\r\n\t\t\treturn point.setTo(this._startX+width-(this._clipPoint ? this._clipPoint.x :0),this._startY+line *(this._charSize.height+this.leading)-(this._clipPoint ? this._clipPoint.y :0));\r\n\t\t}\r\n\r\n\t\t__getset(0,__proto,'lines',function(){\r\n\t\t\treturn this._lines;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*设置纵向滚动量（px)。即使设置超出滚动范围的值，也会被自动限制在可能的最大值处。\r\n\t\t*/\r\n\t\t/**\r\n\t\t*获取纵向滚动量。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'scrollY',function(){\r\n\t\t\tif (!this._clipPoint)\r\n\t\t\t\treturn 0;\r\n\t\t\treturn this._clipPoint.y;\r\n\t\t\t},function(value){\r\n\t\t\tif (this.overflow !=Text.SCROLL || (this.textHeight < this._height || !this._clipPoint))\r\n\t\t\t\treturn;\r\n\t\t\tvalue=value < this.padding[0] ? this.padding[0] :value;\r\n\t\t\tvar maxScrollY=this._textHeight-this._height;\r\n\t\t\tvalue=value > maxScrollY ? maxScrollY :value;\r\n\t\t\tvar startLine=value / (this._charSize.height+this.leading)| 0;\r\n\t\t\tthis._lastVisibleLineIndex=startLine;\r\n\t\t\tvar visibleLineCount=(this._height / (this._charSize.height+this.leading)| 0)+1;\r\n\t\t\tthis._clipPoint.y=value;\r\n\t\t\tthis.renderText(startLine,visibleLineCount);\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*设置横向滚动量。\r\n\t\t*<p>即使设置超出滚动范围的值，也会被自动限制在可能的最大值处。</p>\r\n\t\t*/\r\n\t\t/**\r\n\t\t*获取横向滚动量。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'scrollX',function(){\r\n\t\t\tif (!this._clipPoint)\r\n\t\t\t\treturn 0;\r\n\t\t\treturn this._clipPoint.x;\r\n\t\t\t},function(value){\r\n\t\t\tif (this.overflow !=Text.SCROLL || (this.textWidth < this._width || !this._clipPoint))\r\n\t\t\t\treturn;\r\n\t\t\tvalue=value < this.padding[3] ? this.padding[3] :value;\r\n\t\t\tvar maxScrollX=this._textWidth-this._width;\r\n\t\t\tvalue=value > maxScrollX ? maxScrollX :value;\r\n\t\t\tvar visibleLineCount=this._height / (this._charSize.height+this.leading)| 0+1;\r\n\t\t\tthis._clipPoint.x=value;\r\n\t\t\tthis.renderText(this._lastVisibleLineIndex,visibleLineCount);\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*<p>描边宽度（以像素为单位）。</p>\r\n\t\t*默认值0，表示不描边。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'stroke',function(){\r\n\t\t\treturn this._getCSSStyle().stroke;\r\n\t\t\t},function(value){\r\n\t\t\tthis._getCSSStyle().stroke=value;\r\n\t\t\tthis.isChanged=true;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*<p>描边颜色，以字符串表示。</p>\r\n\t\t*默认值为 \"#000000\"（黑色）;\r\n\t\t*/\r\n\t\t__getset(0,__proto,'strokeColor',function(){\r\n\t\t\treturn this._getCSSStyle().strokeColor;\r\n\t\t\t},function(value){\r\n\t\t\tthis._getCSSStyle().strokeColor=value;\r\n\t\t\tthis.isChanged=true;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*指定文本是否为粗体字。\r\n\t\t*<p>默认值为 false，这意味着不使用粗体字。如果值为 true，则文本为粗体字。</p>\r\n\t\t*/\r\n\t\t__getset(0,__proto,'bold',function(){\r\n\t\t\treturn this._getCSSStyle().bold;\r\n\t\t\t},function(value){\r\n\t\t\tthis._getCSSStyle().bold=value;\r\n\t\t\tthis.isChanged=true;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*边距信息。\r\n\t\t*<p>数据格式：[上边距，右边距，下边距，左边距]（边距以像素为单位）。</p>\r\n\t\t*/\r\n\t\t__getset(0,__proto,'padding',function(){\r\n\t\t\treturn this._getCSSStyle().padding;\r\n\t\t\t},function(value){\r\n\t\t\tthis._getCSSStyle().padding=value;\r\n\t\t\tthis.isChanged=true;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*@inheritDoc\r\n\t\t*/\r\n\t\t__getset(0,__proto,'height',function(){\r\n\t\t\tif (this._height)return this._height;\r\n\t\t\treturn this.textHeight+this.padding[0]+this.padding[2];\r\n\t\t\t},function(value){\r\n\t\t\tif (value !=this._height){\r\n\t\t\t\t_super.prototype._$set_height.call(this,value);\r\n\t\t\t\tthis.isChanged=true;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*表示文本是否自动换行，默认为false。\r\n\t\t*<p>若值为true，则自动换行；否则不自动换行。</p>\r\n\t\t*/\r\n\t\t__getset(0,__proto,'wordWrap',function(){\r\n\t\t\treturn this._getCSSStyle().wordWrap;\r\n\t\t\t},function(value){\r\n\t\t\tthis._getCSSStyle().wordWrap=value;\r\n\t\t\tthis.isChanged=true;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*获取横向可滚动最大值。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'maxScrollX',function(){\r\n\t\t\treturn (this.textWidth < this._width)? 0 :this._textWidth-this._width;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*一个布尔值，表示文本的属性是否有改变。若为true表示有改变。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'isChanged',null,function(value){\r\n\t\t\tif (this._isChanged!==value){\r\n\t\t\t\tthis._isChanged=value;\r\n\t\t\t\tvalue && Laya.timer.callLater(this,this.typeset);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*文本边框背景颜色，以字符串表示。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'borderColor',function(){\r\n\t\t\treturn this._getCSSStyle().borderColor;\r\n\t\t\t},function(value){\r\n\t\t\tthis._getCSSStyle().borderColor=value;\r\n\t\t\tthis.isChanged=true;\r\n\t\t});\r\n\r\n\t\t/**当前文本的内容字符串。*/\r\n\t\t__getset(0,__proto,'text',function(){\r\n\t\t\treturn this._text || \"\";\r\n\t\t\t},function(value){\r\n\t\t\tif (this._text!==value){\r\n\t\t\t\tthis.lang(value+\"\");\r\n\t\t\t\tthis.isChanged=true;\r\n\t\t\t\tthis.event(\"change\");\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*表示文本的垂直显示方式。\r\n\t\t*<p><b>取值：</b>\r\n\t\t*<li>\"top\"： 居顶部对齐显示。</li>\r\n\t\t*<li>\"middle\"： 居中对齐显示。</li>\r\n\t\t*<li>\"bottom\"： 居底部对齐显示。</li>\r\n\t\t*</p>\r\n\t\t*/\r\n\t\t__getset(0,__proto,'valign',function(){\r\n\t\t\treturn this._getCSSStyle().valign;\r\n\t\t\t},function(value){\r\n\t\t\tthis._getCSSStyle().valign=value;\r\n\t\t\tthis.isChanged=true;\r\n\t\t});\r\n\r\n\t\t__getset(0,__proto,'underlineColor',function(){\r\n\t\t\treturn this._underlineColor;\r\n\t\t\t},function(value){\r\n\t\t\tthis._underlineColor=value;\r\n\t\t\tthis._isChanged=true;\r\n\t\t\tthis.typeset();\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*表示使用此文本格式的文本是否为斜体。\r\n\t\t*<p>默认值为 false，这意味着不使用斜体。如果值为 true，则文本为斜体。</p>\r\n\t\t*/\r\n\t\t__getset(0,__proto,'italic',function(){\r\n\t\t\treturn this._getCSSStyle().italic;\r\n\t\t\t},function(value){\r\n\t\t\tthis._getCSSStyle().italic=value;\r\n\t\t\tthis.isChanged=true;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*文本背景颜色，以字符串表示。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'bgColor',function(){\r\n\t\t\treturn this._getCSSStyle().backgroundColor;\r\n\t\t\t},function(value){\r\n\t\t\tthis._getCSSStyle().backgroundColor=value;\r\n\t\t\tthis.isChanged=true;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*表示文本的颜色值。可以通过 <code>Text.defaultColor</code> 设置默认颜色。\r\n\t\t*<p>默认值为黑色。</p>\r\n\t\t*/\r\n\t\t__getset(0,__proto,'color',function(){\r\n\t\t\treturn this._getCSSStyle().color;\r\n\t\t\t},function(value){\r\n\t\t\tif (this._getCSSStyle().color !=value){\r\n\t\t\t\tthis._getCSSStyle().color=value;\r\n\t\t\t\tif (!this._isChanged && this._graphics){\r\n\t\t\t\t\tthis._graphics.replaceTextColor(this.color)\r\n\t\t\t\t\t}else {\r\n\t\t\t\t\tthis.isChanged=true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*表示文本的水平显示方式。\r\n\t\t*<p><b>取值：</b>\r\n\t\t*<li>\"left\"： 居左对齐显示。</li>\r\n\t\t*<li>\"center\"： 居中对齐显示。</li>\r\n\t\t*<li>\"right\"： 居右对齐显示。</li>\r\n\t\t*</p>\r\n\t\t*/\r\n\t\t__getset(0,__proto,'align',function(){\r\n\t\t\treturn this._getCSSStyle().align;\r\n\t\t\t},function(value){\r\n\t\t\tthis._getCSSStyle().align=value;\r\n\t\t\tthis.isChanged=true;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*指定文本的字体大小（以像素为单位）。\r\n\t\t*<p>默认为20像素，可以通过 <code>Text.defaultSize</code> 设置默认大小。</p>\r\n\t\t*/\r\n\t\t__getset(0,__proto,'fontSize',function(){\r\n\t\t\treturn this._getCSSStyle().fontSize;\r\n\t\t\t},function(value){\r\n\t\t\tthis._getCSSStyle().fontSize=value;\r\n\t\t\tthis.isChanged=true;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*表示文本的高度，以像素为单位。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'textHeight',function(){\r\n\t\t\tthis._isChanged && Laya.timer.runCallLater(this,this.typeset);\r\n\t\t\treturn this._textHeight;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*获取纵向可滚动最大值。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'maxScrollY',function(){\r\n\t\t\treturn (this.textHeight < this._height)? 0 :this._textHeight-this._height;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*垂直行间距（以像素为单位）。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'leading',function(){\r\n\t\t\treturn this._getCSSStyle().leading;\r\n\t\t\t},function(value){\r\n\t\t\tthis._getCSSStyle().leading=value;\r\n\t\t\tthis.isChanged=true;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*文本的字体名称，以字符串形式表示。\r\n\t\t*<p>默认值为：\"Arial\"，可以通过Text.defaultFont设置默认字体。</p> *\r\n\t\t*@see laya.display.css.Font#defaultFamily\r\n\t\t*/\r\n\t\t__getset(0,__proto,'font',function(){\r\n\t\t\treturn this._getCSSStyle().fontFamily;\r\n\t\t\t},function(value){\r\n\t\t\tif (this._currBitmapFont){\r\n\t\t\t\tthis._currBitmapFont=null;\r\n\t\t\t\tthis.scale(1,1);\r\n\t\t\t}\r\n\t\t\tif (Text._bitmapFonts && Text._bitmapFonts[value]){\r\n\t\t\t\tthis._currBitmapFont=Text._bitmapFonts[value];\r\n\t\t\t}\r\n\t\t\tthis._getCSSStyle().fontFamily=value;\r\n\t\t\tthis.isChanged=true;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*表示文本的宽度，以像素为单位。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'textWidth',function(){\r\n\t\t\tthis._isChanged && Laya.timer.runCallLater(this,this.typeset);\r\n\t\t\treturn this._textWidth;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*@inheritDoc\r\n\t\t*/\r\n\t\t__getset(0,__proto,'width',function(){\r\n\t\t\tif (this._width)\r\n\t\t\t\treturn this._width;\r\n\t\t\treturn this.textWidth+this.padding[1]+this.padding[3];\r\n\t\t\t},function(value){\r\n\t\t\tif (value !=this._width){\r\n\t\t\t\t_super.prototype._$set_width.call(this,value);\r\n\t\t\t\tthis.isChanged=true;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tText.registerBitmapFont=function(name,bitmapFont){\r\n\t\t\tText._bitmapFonts || (Text._bitmapFonts={});\r\n\t\t\tText._bitmapFonts[name]=bitmapFont;\r\n\t\t}\r\n\r\n\t\tText.unregisterBitmapFont=function(name,destroy){\r\n\t\t\t(destroy===void 0)&& (destroy=true);\r\n\t\t\tif (Text._bitmapFonts && Text._bitmapFonts[name]){\r\n\t\t\t\tvar tBitmapFont=Text._bitmapFonts[name];\r\n\t\t\t\tif (destroy){\r\n\t\t\t\t\ttBitmapFont.destroy();\r\n\t\t\t\t}\r\n\t\t\t\tdelete Text._bitmapFonts[name];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tText._testWord=\"游\";\r\n\t\tText.langPacks=null\r\n\t\tText.VISIBLE=\"visible\";\r\n\t\tText.SCROLL=\"scroll\";\r\n\t\tText.HIDDEN=\"hidden\";\r\n\t\tText._bitmapFonts=null\r\n\t\treturn Text;\r\n\t})(Sprite)\r\n\r\n\r\n\t/**\r\n\t*动画播放控制器\r\n\t*/\r\n\t//class laya.display.AnimationPlayerBase extends laya.display.Sprite\r\n\tvar AnimationPlayerBase=(function(_super){\r\n\t\tfunction AnimationPlayerBase(){\r\n\t\t\tthis.loop=false;\r\n\t\t\tthis.wrapMode=0;\r\n\t\t\tthis._index=0;\r\n\t\t\tthis._count=0;\r\n\t\t\tthis._isPlaying=false;\r\n\t\t\tthis._labels=null;\r\n\t\t\tthis._isReverse=false;\r\n\t\t\tthis._frameRateChanged=false;\r\n\t\t\tthis._controlNode=null;\r\n\t\t\tthis._actionName=null;\r\n\t\t\tAnimationPlayerBase.__super.call(this);\r\n\t\t\tthis._interval=Config.animationInterval;\r\n\t\t}\r\n\r\n\t\t__class(AnimationPlayerBase,'laya.display.AnimationPlayerBase',_super);\r\n\t\tvar __proto=AnimationPlayerBase.prototype;\r\n\t\t/**\r\n\t\t*播放动画。\r\n\t\t*@param start 开始播放的动画索引或label。\r\n\t\t*@param loop 是否循环。\r\n\t\t*@param name 如果name为空(可选)，则播放当前动画，如果不为空，则播放全局缓存动画（如果有）\r\n\t\t*/\r\n\t\t__proto.play=function(start,loop,name){\r\n\t\t\t(start===void 0)&& (start=0);\r\n\t\t\t(loop===void 0)&& (loop=true);\r\n\t\t\t(name===void 0)&& (name=\"\");\r\n\t\t\tthis._isPlaying=true;\r\n\t\t\tthis.index=((typeof start=='string'))? this._getFrameByLabel(start):start;\r\n\t\t\tthis.loop=loop;\r\n\t\t\tthis._actionName=name;\r\n\t\t\tthis._isReverse=this.wrapMode==1;\r\n\t\t\tif (this.interval > 0){\r\n\t\t\t\tthis.timerLoop(this.interval,this,this._frameLoop,null,true);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**@private */\r\n\t\t__proto._getFrameByLabel=function(label){\r\n\t\t\tvar i=0;\r\n\t\t\tfor (i=0;i < this._count;i++){\r\n\t\t\t\tif (this._labels[i]==label)return i;\r\n\t\t\t}\r\n\t\t\treturn 0;\r\n\t\t}\r\n\r\n\t\t/**@private */\r\n\t\t__proto._frameLoop=function(){\r\n\t\t\tif (this._isReverse){\r\n\t\t\t\tthis._index--;\r\n\t\t\t\tif (this._index < 0){\r\n\t\t\t\t\tif (this.loop){\r\n\t\t\t\t\t\tif (this.wrapMode==2){\r\n\t\t\t\t\t\t\tthis._index=this._count > 0 ? 1 :0;\r\n\t\t\t\t\t\t\tthis._isReverse=false;\r\n\t\t\t\t\t\t\t}else {\r\n\t\t\t\t\t\t\tthis._index=this._count-1;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.event(\"complete\");\r\n\t\t\t\t\t\t}else {\r\n\t\t\t\t\t\tthis._index=0;\r\n\t\t\t\t\t\tthis.stop();\r\n\t\t\t\t\t\tthis.event(\"complete\");\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t}else {\r\n\t\t\t\tthis._index++;\r\n\t\t\t\tif (this._index >=this._count){\r\n\t\t\t\t\tif (this.loop){\r\n\t\t\t\t\t\tif (this.wrapMode==2){\r\n\t\t\t\t\t\t\tthis._index=this._count-2 >=0 ? this._count-2 :0;\r\n\t\t\t\t\t\t\tthis._isReverse=true;\r\n\t\t\t\t\t\t\t}else {\r\n\t\t\t\t\t\t\tthis._index=0;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.event(\"complete\");\r\n\t\t\t\t\t\t}else {\r\n\t\t\t\t\t\tthis._index--;\r\n\t\t\t\t\t\tthis.stop();\r\n\t\t\t\t\t\tthis.event(\"complete\");\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.index=this._index;\r\n\t\t}\r\n\r\n\t\t/**@private */\r\n\t\t__proto._setControlNode=function(node){\r\n\t\t\tif (this._controlNode){\r\n\t\t\t\tthis._controlNode.off(\"display\",this,this._$3__onDisplay);\r\n\t\t\t\tthis._controlNode.off(\"undisplay\",this,this._$3__onDisplay);\r\n\t\t\t}\r\n\t\t\tthis._controlNode=node;\r\n\t\t\tif (node && node !=this){\r\n\t\t\t\tnode.on(\"display\",this,this._$3__onDisplay);\r\n\t\t\t\tnode.on(\"undisplay\",this,this._$3__onDisplay);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**@private */\r\n\t\t__proto._setDisplay=function(value){\r\n\t\t\t_super.prototype._setDisplay.call(this,value);\r\n\t\t\tthis._$3__onDisplay();\r\n\t\t}\r\n\r\n\t\t/**@private */\r\n\t\t__proto._$3__onDisplay=function(){\r\n\t\t\tif (this._isPlaying){\r\n\t\t\t\tif (this._controlNode.displayedInStage)this.play(this._index,this.loop,this._actionName);\r\n\t\t\t\telse this.clearTimer(this,this._frameLoop);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*停止播放。\r\n\t\t*/\r\n\t\t__proto.stop=function(){\r\n\t\t\tthis._isPlaying=false;\r\n\t\t\tthis.clearTimer(this,this._frameLoop);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*增加一个标签到index帧上，播放到此index后会派发label事件\r\n\t\t*@param label 标签名称\r\n\t\t*@param index 索引位置\r\n\t\t*/\r\n\t\t__proto.addLabel=function(label,index){\r\n\t\t\tif (!this._labels)this._labels={};\r\n\t\t\tthis._labels[index]=label;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*删除某个标签\r\n\t\t*@param label 标签名字，如果label为空，则删除所有Label\r\n\t\t*/\r\n\t\t__proto.removeLabel=function(label){\r\n\t\t\tif (!label)this._labels=null;\r\n\t\t\telse if (this._labels){\r\n\t\t\t\tfor (var name in this._labels){\r\n\t\t\t\t\tif (this._labels[name]===label){\r\n\t\t\t\t\t\tdelete this._labels[name];\r\n\t\t\t\t\t\tbreak ;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*切换到某帧并停止\r\n\t\t*@param position 帧索引或label\r\n\t\t*/\r\n\t\t__proto.gotoAndStop=function(position){\r\n\t\t\tthis.index=((typeof position=='string'))? this._getFrameByLabel(position):position;\r\n\t\t\tthis.stop();\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*显示到某帧\r\n\t\t*@param value 帧索引\r\n\t\t*\r\n\t\t*/\r\n\t\t__proto._displayToIndex=function(value){}\r\n\t\t/**清理。方便对象复用。*/\r\n\t\t__proto.clear=function(){\r\n\t\t\tthis.stop();\r\n\t\t\tthis._labels=null;\r\n\t\t}\r\n\r\n\t\t/**动画长度。*/\r\n\t\t__getset(0,__proto,'count',function(){\r\n\t\t\treturn this._count;\r\n\t\t});\r\n\r\n\t\t/**当前播放索引。*/\r\n\t\t__getset(0,__proto,'index',function(){\r\n\t\t\treturn this._index;\r\n\t\t\t},function(value){\r\n\t\t\tthis._index=value;\r\n\t\t\tthis._displayToIndex(value);\r\n\t\t\tif (this._labels && this._labels[value])this.event(\"label\",this._labels[value]);\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*是否在播放中\r\n\t\t*/\r\n\t\t__getset(0,__proto,'isPlaying',function(){\r\n\t\t\treturn this._isPlaying;\r\n\t\t});\r\n\r\n\t\t/**播放间隔(单位：毫秒)。*/\r\n\t\t/**播放间隔(单位：毫秒)。*/\r\n\t\t__getset(0,__proto,'interval',function(){\r\n\t\t\treturn this._interval;\r\n\t\t\t},function(value){\r\n\t\t\tif (this._interval !=value){\r\n\t\t\t\tthis._frameRateChanged=true;\r\n\t\t\t\tthis._interval=value;\r\n\t\t\t\tif (this._isPlaying && value > 0){\r\n\t\t\t\t\tthis.timerLoop(value,this,this._frameLoop,null,true);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn AnimationPlayerBase;\r\n\t})(Sprite)\r\n\r\n\r\n\t/**\r\n\t*<p> <code>Stage</code> 类是显示对象的根节点。</p>\r\n\t*可以通过 Laya.stage 访问。\r\n\t*/\r\n\t//class laya.display.Stage extends laya.display.Sprite\r\n\tvar Stage=(function(_super){\r\n\t\tfunction Stage(){\r\n\t\t\tthis.focus=null;\r\n\t\t\tthis.frameRate=\"fast\";\r\n\t\t\tthis.desginWidth=0;\r\n\t\t\tthis.desginHeight=0;\r\n\t\t\tthis.canvasRotation=false;\r\n\t\t\tthis.canvasDegree=0;\r\n\t\t\tthis.renderingEnabled=true;\r\n\t\t\tthis._screenMode=\"none\";\r\n\t\t\tthis._scaleMode=\"noscale\";\r\n\t\t\tthis._alignV=\"top\";\r\n\t\t\tthis._alignH=\"left\";\r\n\t\t\tthis._bgColor=\"black\";\r\n\t\t\tthis._mouseMoveTime=0;\r\n\t\t\tthis._renderCount=0;\r\n\t\t\tthis._safariOffsetY=0;\r\n\t\t\tthis._frameStartTime=NaN;\r\n\t\t\tthis._previousOrientation=0;\r\n\t\t\tthis._isFocused=false;\r\n\t\t\tthis._isVisibility=false;\r\n\t\t\tthis._scenes=null;\r\n\t\t\tStage.__super.call(this);\r\n\t\t\tthis.offset=new Point();\r\n\t\t\tthis._canvasTransform=new Matrix();\r\n\t\t\tvar _$this=this;\r\n\t\t\tthis.transform=Matrix.create();\r\n\t\t\tthis._scenes=[];\r\n\t\t\tthis.mouseEnabled=true;\r\n\t\t\tthis.hitTestPrior=true;\r\n\t\t\tthis.autoSize=false;\r\n\t\t\tthis._displayedInStage=true;\r\n\t\t\tthis._isFocused=true;\r\n\t\t\tvar _this=this;\r\n\t\t\tvar window=Browser.window;\r\n\t\t\twindow.addEventListener(\"focus\",function(){\r\n\t\t\t\t_$this._isFocused=true;\r\n\t\t\t\t_this.event(\"focus\");\r\n\t\t\t\t_this.event(\"focuschange\");\r\n\t\t\t});\r\n\t\t\twindow.addEventListener(\"blur\",function(){\r\n\t\t\t\t_$this._isFocused=false;\r\n\t\t\t\t_this.event(\"blur\");\r\n\t\t\t\t_this.event(\"focuschange\");\r\n\t\t\t\tif (_this._isInputting())Input[\"inputElement\"].target.focus=false;\r\n\t\t\t});\r\n\t\t\tvar hidden=\"hidden\",state=\"visibilityState\",visibilityChange=\"visibilitychange\";\r\n\t\t\tvar document=window.document;\r\n\t\t\tif (typeof document.hidden!==\"undefined\"){\r\n\t\t\t\tvisibilityChange=\"visibilitychange\";\r\n\t\t\t\tstate=\"visibilityState\";\r\n\t\t\t\t}else if (typeof document.mozHidden!==\"undefined\"){\r\n\t\t\t\tvisibilityChange=\"mozvisibilitychange\";\r\n\t\t\t\tstate=\"mozVisibilityState\";\r\n\t\t\t\t}else if (typeof document.msHidden!==\"undefined\"){\r\n\t\t\t\tvisibilityChange=\"msvisibilitychange\";\r\n\t\t\t\tstate=\"msVisibilityState\";\r\n\t\t\t\t}else if (typeof document.webkitHidden!==\"undefined\"){\r\n\t\t\t\tvisibilityChange=\"webkitvisibilitychange\";\r\n\t\t\t\tstate=\"webkitVisibilityState\";\r\n\t\t\t}\r\n\t\t\twindow.document.addEventListener(visibilityChange,visibleChangeFun);\r\n\t\t\tfunction visibleChangeFun (){\r\n\t\t\t\tif (Browser.document[state]==\"hidden\"){\r\n\t\t\t\t\t_$this._isVisibility=false;\r\n\t\t\t\t\tif (_this._isInputting())Input[\"inputElement\"].target.focus=false;\r\n\t\t\t\t\t}else {\r\n\t\t\t\t\t_$this._isVisibility=true;\r\n\t\t\t\t}\r\n\t\t\t\t_this.event(\"visibilitychange\");\r\n\t\t\t}\r\n\t\t\twindow.addEventListener(\"resize\",function(){\r\n\t\t\t\tvar orientation=Browser.window.orientation;\r\n\t\t\t\tif (orientation !=null && orientation !=_$this._previousOrientation && _this._isInputting()){\r\n\t\t\t\t\tInput[\"inputElement\"].target.focus=false;\r\n\t\t\t\t}\r\n\t\t\t\t_$this._previousOrientation=orientation;\r\n\t\t\t\tif (_this._isInputting())return;\r\n\t\t\t\tif (Browser.onSafari)\r\n\t\t\t\t\t_this._safariOffsetY=(Browser.window.__innerHeight || Browser.document.body.clientHeight || Browser.document.documentElement.clientHeight)-Browser.window.innerHeight;\r\n\t\t\t\t_this._resetCanvas();\r\n\t\t\t});\r\n\t\t\twindow.addEventListener(\"orientationchange\",function(e){\r\n\t\t\t\t_this._resetCanvas();\r\n\t\t\t});\r\n\t\t\tthis.on(\"mousemove\",this,this._onmouseMove);\r\n\t\t\tif (Browser.onMobile)this.on(\"mousedown\",this,this._onmouseMove);\r\n\t\t}\r\n\r\n\t\t__class(Stage,'laya.display.Stage',_super);\r\n\t\tvar __proto=Stage.prototype;\r\n\t\t/**\r\n\t\t*在移动端输入时，输入法弹出期间不进行画布尺寸重置。\r\n\t\t*/\r\n\t\t__proto._isInputting=function(){\r\n\t\t\treturn (Browser.onMobile && Input.isInputting);\r\n\t\t}\r\n\r\n\t\t/**@private */\r\n\t\t__proto._changeCanvasSize=function(){\r\n\t\t\tthis.setScreenSize(Browser.clientWidth *Browser.pixelRatio,Browser.clientHeight *Browser.pixelRatio);\r\n\t\t}\r\n\r\n\t\t/**@private */\r\n\t\t__proto._resetCanvas=function(){\r\n\t\t\tvar canvas=Render._mainCanvas;\r\n\t\t\tvar canvasStyle=canvas.source.style;\r\n\t\t\tcanvas.size(1,1);\r\n\t\t\tcanvasStyle.transform=canvasStyle.webkitTransform=canvasStyle.msTransform=canvasStyle.mozTransform=canvasStyle.oTransform=\"\";\r\n\t\t\tthis.visible=false;\r\n\t\t\tLaya.timer.once(100,this,this._changeCanvasSize);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*设置屏幕大小，场景会根据屏幕大小进行适配。\r\n\t\t*@param screenWidth 屏幕宽度。\r\n\t\t*@param screenHeight 屏幕高度。\r\n\t\t*/\r\n\t\t__proto.setScreenSize=function(screenWidth,screenHeight){\r\n\t\t\tvar rotation=false;\r\n\t\t\tif (this._screenMode!==\"none\"){\r\n\t\t\t\tvar screenType=screenWidth / screenHeight < 1 ? \"vertical\" :\"horizontal\";\r\n\t\t\t\trotation=screenType!==this._screenMode;\r\n\t\t\t\tif (rotation){\r\n\t\t\t\t\tvar temp=screenHeight;\r\n\t\t\t\t\tscreenHeight=screenWidth;\r\n\t\t\t\t\tscreenWidth=temp;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.canvasRotation=rotation;\r\n\t\t\tvar canvas=Render._mainCanvas;\r\n\t\t\tvar canvasStyle=canvas.source.style;\r\n\t\t\tvar mat=this._canvasTransform.identity();\r\n\t\t\tvar scaleMode=this._scaleMode;\r\n\t\t\tvar scaleX=screenWidth / this.desginWidth;\r\n\t\t\tvar scaleY=screenHeight / this.desginHeight;\r\n\t\t\tvar canvasWidth=this.desginWidth;\r\n\t\t\tvar canvasHeight=this.desginHeight;\r\n\t\t\tvar realWidth=screenWidth;\r\n\t\t\tvar realHeight=screenHeight;\r\n\t\t\tvar pixelRatio=Browser.pixelRatio;\r\n\t\t\tthis._width=this.desginWidth;\r\n\t\t\tthis._height=this.desginHeight;\r\n\t\t\tswitch (scaleMode){\r\n\t\t\t\tcase \"noscale\":\r\n\t\t\t\t\tscaleX=scaleY=1;\r\n\t\t\t\t\trealWidth=this.desginWidth;\r\n\t\t\t\t\trealHeight=this.desginHeight;\r\n\t\t\t\t\tbreak ;\r\n\t\t\t\tcase \"showall\":\r\n\t\t\t\t\tscaleX=scaleY=Math.min(scaleX,scaleY);\r\n\t\t\t\t\tcanvasWidth=realWidth=Math.round(this.desginWidth *scaleX);\r\n\t\t\t\t\tcanvasHeight=realHeight=Math.round(this.desginHeight *scaleY);\r\n\t\t\t\t\tbreak ;\r\n\t\t\t\tcase \"noborder\":\r\n\t\t\t\t\tscaleX=scaleY=Math.max(scaleX,scaleY);\r\n\t\t\t\t\trealWidth=Math.round(this.desginWidth *scaleX);\r\n\t\t\t\t\trealHeight=Math.round(this.desginHeight *scaleY);\r\n\t\t\t\t\tbreak ;\r\n\t\t\t\tcase \"full\":\r\n\t\t\t\t\tscaleX=scaleY=1;\r\n\t\t\t\t\tthis._width=canvasWidth=screenWidth;\r\n\t\t\t\t\tthis._height=canvasHeight=screenHeight;\r\n\t\t\t\t\tbreak ;\r\n\t\t\t\tcase \"fixedwidth\":\r\n\t\t\t\t\tscaleY=scaleX;\r\n\t\t\t\t\tthis._height=screenHeight / scaleX;\r\n\t\t\t\t\tcanvasHeight=Math.round(screenHeight / scaleX);\r\n\t\t\t\t\tbreak ;\r\n\t\t\t\tcase \"fixedheight\":\r\n\t\t\t\t\tscaleX=scaleY;\r\n\t\t\t\t\tthis._width=screenWidth / scaleY;\r\n\t\t\t\t\tcanvasWidth=Math.round(screenWidth / scaleY);\r\n\t\t\t\t\tbreak ;\r\n\t\t\t\t}\r\n\t\t\tscaleX *=this.scaleX;\r\n\t\t\tscaleY *=this.scaleY;\r\n\t\t\tif (scaleX===1 && scaleY===1){\r\n\t\t\t\tthis.transform.identity();\r\n\t\t\t\t}else {\r\n\t\t\t\tthis.transform.a=this._formatData(scaleX / (realWidth / canvasWidth));\r\n\t\t\t\tthis.transform.d=this._formatData(scaleY / (realHeight / canvasHeight));\r\n\t\t\t\tthis.conchModel && this.conchModel.scale(this.transform.a,this.transform.d);\r\n\t\t\t}\r\n\t\t\tcanvas.size(canvasWidth,canvasHeight);\r\n\t\t\tRunDriver.changeWebGLSize(canvasWidth,canvasHeight);\r\n\t\t\tmat.scale(realWidth / canvasWidth / pixelRatio,realHeight / canvasHeight / pixelRatio);\r\n\t\t\tif (this._alignH===\"left\")this.offset.x=0;\r\n\t\t\telse if (this._alignH===\"right\")this.offset.x=screenWidth-realWidth;\r\n\t\t\telse this.offset.x=(screenWidth-realWidth)*0.5 / pixelRatio;\r\n\t\t\tif (this._alignV===\"top\")this.offset.y=0;\r\n\t\t\telse if (this._alignV===\"bottom\")this.offset.y=screenHeight-realHeight;\r\n\t\t\telse this.offset.y=(screenHeight-realHeight)*0.5 / pixelRatio;\r\n\t\t\tthis.offset.x=Math.round(this.offset.x);\r\n\t\t\tthis.offset.y=Math.round(this.offset.y);\r\n\t\t\tmat.translate(this.offset.x,this.offset.y);\r\n\t\t\tif (this._safariOffsetY && parseInt(canvasStyle.top)===0)canvasStyle.top=this._safariOffsetY+\"px\";\r\n\t\t\tthis.canvasDegree=0;\r\n\t\t\tif (rotation){\r\n\t\t\t\tif (this._screenMode===\"horizontal\"){\r\n\t\t\t\t\tmat.rotate(Math.PI / 2);\r\n\t\t\t\t\tmat.translate(screenHeight / pixelRatio,0);\r\n\t\t\t\t\tthis.canvasDegree=90;\r\n\t\t\t\t\t}else {\r\n\t\t\t\t\tmat.rotate(-Math.PI / 2);\r\n\t\t\t\t\tmat.translate(0,screenWidth / pixelRatio);\r\n\t\t\t\t\tthis.canvasDegree=-90;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tmat.a=this._formatData(mat.a);\r\n\t\t\tmat.d=this._formatData(mat.d);\r\n\t\t\tmat.tx=this._formatData(mat.tx);\r\n\t\t\tmat.ty=this._formatData(mat.ty);\r\n\t\t\tcanvasStyle.transformOrigin=canvasStyle.webkitTransformOrigin=canvasStyle.msTransformOrigin=canvasStyle.mozTransformOrigin=canvasStyle.oTransformOrigin=\"0px 0px 0px\";\r\n\t\t\tcanvasStyle.transform=canvasStyle.webkitTransform=canvasStyle.msTransform=canvasStyle.mozTransform=canvasStyle.oTransform=\"matrix(\"+mat.toString()+\")\";\r\n\t\t\tmat.translate(parseInt(canvasStyle.left)|| 0,parseInt(canvasStyle.top)|| 0);\r\n\t\t\tthis.visible=true;\r\n\t\t\tthis._repaint=1;\r\n\t\t\tthis.event(\"resize\");\r\n\t\t}\r\n\r\n\t\t__proto._formatData=function(value){\r\n\t\t\tif (Math.abs(value)< 0.000001)return 0;\r\n\t\t\tif (Math.abs(1-value)< 0.001)return value > 0 ? 1 :-1;\r\n\t\t\treturn value;\r\n\t\t}\r\n\r\n\t\t/**@inheritDoc */\r\n\t\t__proto.getMousePoint=function(){\r\n\t\t\treturn Point.TEMP.setTo(this.mouseX,this.mouseY);\r\n\t\t}\r\n\r\n\t\t/**@inheritDoc */\r\n\t\t__proto.repaint=function(){\r\n\t\t\tthis._repaint=1;\r\n\t\t}\r\n\r\n\t\t/**@inheritDoc */\r\n\t\t__proto.parentRepaint=function(){}\r\n\t\t/**@private */\r\n\t\t__proto._loop=function(){\r\n\t\t\tthis.render(Render.context,0,0);\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\t/**@private */\r\n\t\t__proto._onmouseMove=function(e){\r\n\t\t\tthis._mouseMoveTime=Browser.now();\r\n\t\t}\r\n\r\n\t\t/**获得距当前帧开始后，过了多少时间，单位为毫秒\r\n\t\t*可以用来判断函数内时间消耗，控制每帧函数处理消耗的时间过长，导致帧率下降*/\r\n\t\t__proto.getTimeFromFrameStart=function(){\r\n\t\t\treturn Browser.now()-this._frameStartTime;\r\n\t\t}\r\n\r\n\t\t/**@inheritDoc */\r\n\t\t__proto.render=function(context,x,y){\r\n\t\t\tif (this.frameRate===\"sleep\"){\r\n\t\t\t\tvar now=Browser.now();\r\n\t\t\t\tif (now-this._frameStartTime >=1000)this._frameStartTime=now;\r\n\t\t\t\telse return;\r\n\t\t\t}\r\n\t\t\tthis._renderCount++;\r\n\t\t\tRender.isFlash && this.repaint();\r\n\t\t\tif (!this.visible){\r\n\t\t\t\tif (this._renderCount % 5===0){\r\n\t\t\t\t\tStat.loopCount++;\r\n\t\t\t\t\tMouseManager.instance.runEvent();\r\n\t\t\t\t\tLaya.timer._update();\r\n\t\t\t\t}\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis._frameStartTime=Browser.now();\r\n\t\t\tvar frameMode=this.frameRate===\"mouse\" ? (((this._frameStartTime-this._mouseMoveTime)< 2000)? \"fast\" :\"slow\"):this.frameRate;\r\n\t\t\tvar isFastMode=(frameMode!==\"slow\");\r\n\t\t\tvar isDoubleLoop=(this._renderCount % 2===0);\r\n\t\t\tStat.renderSlow=!isFastMode;\r\n\t\t\tif (isFastMode || isDoubleLoop){\r\n\t\t\t\tStat.loopCount++;\r\n\t\t\t\tMouseManager.instance.runEvent();\r\n\t\t\t\tLaya.timer._update();\r\n\t\t\t\tvar i=0,n=0;\r\n\t\t\t\tfor (i=0,n=this._scenes.length;i < n;i++){\r\n\t\t\t\t\tvar scene=this._scenes[i];\r\n\t\t\t\t\t(scene)&& (scene._updateScene());\r\n\t\t\t\t}\r\n\t\t\t\tif (Render.isConchNode){\r\n\t\t\t\t\tvar customList=Sprite.CustomList;\r\n\t\t\t\t\tfor (i=0,n=customList.length;i < n;i++){\r\n\t\t\t\t\t\tvar customItem=customList[i];\r\n\t\t\t\t\t\tcustomItem.customRender(customItem.customContext,0,0);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (Render.isWebGL && this.renderingEnabled){\r\n\t\t\t\t\tcontext.clear();\r\n\t\t\t\t\t_super.prototype.render.call(this,context,x,y);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (Render.isConchNode)return;\r\n\t\t\tif (this.renderingEnabled && (isFastMode || !isDoubleLoop)){\r\n\t\t\t\tif (Render.isWebGL){\r\n\t\t\t\t\tRunDriver.clear(this._bgColor);\r\n\t\t\t\t\tRunDriver.beginFlush();\r\n\t\t\t\t\tcontext.flush();\r\n\t\t\t\t\tRunDriver.endFinish();\r\n\t\t\t\t\tVectorGraphManager.instance && VectorGraphManager.getInstance().endDispose();\r\n\t\t\t\t\t}else {\r\n\t\t\t\t\tRunDriver.clear(this._bgColor);\r\n\t\t\t\t\t_super.prototype.render.call(this,context,x,y);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**@private */\r\n\t\t__proto._requestFullscreen=function(){\r\n\t\t\tvar element=Browser.document.documentElement;\r\n\t\t\tif (element.requestFullscreen){\r\n\t\t\t\telement.requestFullscreen();\r\n\t\t\t\t}else if (element.mozRequestFullScreen){\r\n\t\t\t\telement.mozRequestFullScreen();\r\n\t\t\t\t}else if (element.webkitRequestFullscreen){\r\n\t\t\t\telement.webkitRequestFullscreen();\r\n\t\t\t\t}else if (element.msRequestFullscreen){\r\n\t\t\t\telement.msRequestFullscreen();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**@private */\r\n\t\t__proto._fullScreenChanged=function(){\r\n\t\t\tLaya.stage.event(\"fullscreenchange\");\r\n\t\t}\r\n\r\n\t\t/**退出全屏*/\r\n\t\t__proto.exitFullscreen=function(){\r\n\t\t\tvar document=Browser.document;\r\n\t\t\tif (document.exitFullscreen){\r\n\t\t\t\tdocument.exitFullscreen();\r\n\t\t\t\t}else if (document.mozCancelFullScreen){\r\n\t\t\t\tdocument.mozCancelFullScreen();\r\n\t\t\t\t}else if (document.webkitExitFullscreen){\r\n\t\t\t\tdocument.webkitExitFullscreen();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**是否开启全屏，用户点击后进入全屏*/\r\n\t\t__getset(0,__proto,'fullScreenEnabled',null,function(value){\r\n\t\t\tvar document=Browser.document;\r\n\t\t\tvar canvas=Render.canvas;\r\n\t\t\tif (value){\r\n\t\t\t\tcanvas.addEventListener('mousedown',this._requestFullscreen);\r\n\t\t\t\tcanvas.addEventListener('touchstart',this._requestFullscreen);\r\n\t\t\t\tdocument.addEventListener(\"fullscreenchange\",this._fullScreenChanged);\r\n\t\t\t\tdocument.addEventListener(\"mozfullscreenchange\",this._fullScreenChanged);\r\n\t\t\t\tdocument.addEventListener(\"webkitfullscreenchange\",this._fullScreenChanged);\r\n\t\t\t\tdocument.addEventListener(\"msfullscreenchange\",this._fullScreenChanged);\r\n\t\t\t\t}else {\r\n\t\t\t\tcanvas.removeEventListener('mousedown',this._requestFullscreen);\r\n\t\t\t\tcanvas.removeEventListener('touchstart',this._requestFullscreen);\r\n\t\t\t\tdocument.removeEventListener(\"fullscreenchange\",this._fullScreenChanged);\r\n\t\t\t\tdocument.removeEventListener(\"mozfullscreenchange\",this._fullScreenChanged);\r\n\t\t\t\tdocument.removeEventListener(\"webkitfullscreenchange\",this._fullScreenChanged);\r\n\t\t\t\tdocument.removeEventListener(\"msfullscreenchange\",this._fullScreenChanged);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*场景布局类型。\r\n\t\t*<p><ul>取值范围：\r\n\t\t*<li>\"none\" ：不更改屏幕</li>\r\n\t\t*<li>\"horizontal\" ：自动横屏</li>\r\n\t\t*<li>\"vertical\" ：自动竖屏</li>\r\n\t\t*</ul></p>\r\n\t\t*/\r\n\t\t__getset(0,__proto,'screenMode',function(){\r\n\t\t\treturn this._screenMode;\r\n\t\t\t},function(value){\r\n\t\t\tthis._screenMode=value;\r\n\t\t});\r\n\r\n\t\t/**鼠标在 Stage 上的 X 轴坐标。*/\r\n\t\t__getset(0,__proto,'mouseX',function(){\r\n\t\t\treturn Math.round(MouseManager.instance.mouseX / this.clientScaleX);\r\n\t\t});\r\n\r\n\t\t/**舞台的背景颜色，默认为黑色，null为透明。*/\r\n\t\t__getset(0,__proto,'bgColor',function(){\r\n\t\t\treturn this._bgColor;\r\n\t\t\t},function(value){\r\n\t\t\tthis._bgColor=value;\r\n\t\t\tthis.conchModel && this.conchModel.bgColor(value);\r\n\t\t\tif (value){\r\n\t\t\t\tRender.canvas.style.background=value;\r\n\t\t\t\t}else {\r\n\t\t\t\tRender.canvas.style.background=\"none\";\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t__getset(0,__proto,'width',_super.prototype._$get_width,function(value){\r\n\t\t\tthis.desginWidth=value;\r\n\t\t\t_super.prototype._$set_width.call(this,value);\r\n\t\t\tLaya.timer.callLater(this,this._changeCanvasSize);\r\n\t\t});\r\n\r\n\t\t/**当前视窗由缩放模式导致的 X 轴缩放系数。*/\r\n\t\t__getset(0,__proto,'clientScaleX',function(){\r\n\t\t\treturn this._transform ? this._transform.getScaleX():1;\r\n\t\t});\r\n\r\n\t\t/**鼠标在 Stage 上的 Y 轴坐标。*/\r\n\t\t__getset(0,__proto,'mouseY',function(){\r\n\t\t\treturn Math.round(MouseManager.instance.mouseY / this.clientScaleY);\r\n\t\t});\r\n\r\n\t\t__getset(0,__proto,'visible',_super.prototype._$get_visible,function(value){\r\n\t\t\tif (this.visible!==value){\r\n\t\t\t\t_super.prototype._$set_visible.call(this,value);\r\n\t\t\t\tvar style=Render._mainCanvas.source.style;\r\n\t\t\t\tstyle.visibility=value ? \"visible\" :\"hidden\";\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*水平对齐方式。\r\n\t\t*<p><ul>取值范围：\r\n\t\t*<li>\"left\" ：居左对齐；</li>\r\n\t\t*<li>\"center\" ：居中对齐；</li>\r\n\t\t*<li>\"right\" ：居右对齐；</li>\r\n\t\t*</ul></p>\r\n\t\t*默认值为\"left\"。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'alignH',function(){\r\n\t\t\treturn this._alignH;\r\n\t\t\t},function(value){\r\n\t\t\tthis._alignH=value;\r\n\t\t\tLaya.timer.callLater(this,this._changeCanvasSize);\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*垂直对齐方式。\r\n\t\t*<p><ul>取值范围：\r\n\t\t*<li>\"top\" ：居顶部对齐；</li>\r\n\t\t*<li>\"middle\" ：居中对齐；</li>\r\n\t\t*<li>\"bottom\" ：居底部对齐；</li>\r\n\t\t*</ul></p>\r\n\t\t*/\r\n\t\t__getset(0,__proto,'alignV',function(){\r\n\t\t\treturn this._alignV;\r\n\t\t\t},function(value){\r\n\t\t\tthis._alignV=value;\r\n\t\t\tLaya.timer.callLater(this,this._changeCanvasSize);\r\n\t\t});\r\n\r\n\t\t/**当前视窗由缩放模式导致的 Y 轴缩放系数。*/\r\n\t\t__getset(0,__proto,'clientScaleY',function(){\r\n\t\t\treturn this._transform ? this._transform.getScaleY():1;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*舞台是否获得焦点。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'isFocused',function(){\r\n\t\t\treturn this._isFocused;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*舞台是否处于可见状态。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'isVisibility',function(){\r\n\t\t\treturn this._isVisibility;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*<p>缩放模式。</p>\r\n\t\t*<p><ul>取值范围：\r\n\t\t*<li>\"noscale\" ：不缩放；</li>\r\n\t\t*<li>\"exactfit\" ：全屏不等比缩放；</li>\r\n\t\t*<li>\"showall\" ：最小比例缩放；</li>\r\n\t\t*<li>\"noborder\" ：最大比例缩放；</li>\r\n\t\t*<li>\"full\" ：不缩放，stage的宽高等于屏幕宽高；</li>\r\n\t\t*<li>\"fixedwidth\" ：宽度不变，高度根据屏幕比缩放；</li>\r\n\t\t*<li>\"fixedheight\" ：高度不变，宽度根据屏幕比缩放；</li>\r\n\t\t*</ul></p>\r\n\t\t*默认值为 \"noscale\"。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'scaleMode',function(){\r\n\t\t\treturn this._scaleMode;\r\n\t\t\t},function(value){\r\n\t\t\tthis._scaleMode=value;\r\n\t\t\tLaya.timer.callLater(this,this._changeCanvasSize);\r\n\t\t});\r\n\r\n\t\t__getset(0,__proto,'height',_super.prototype._$get_height,function(value){\r\n\t\t\tthis.desginHeight=value;\r\n\t\t\t_super.prototype._$set_height.call(this,value);\r\n\t\t\tLaya.timer.callLater(this,this._changeCanvasSize);\r\n\t\t});\r\n\r\n\t\tStage.SCALE_NOSCALE=\"noscale\";\r\n\t\tStage.SCALE_EXACTFIT=\"exactfit\";\r\n\t\tStage.SCALE_SHOWALL=\"showall\";\r\n\t\tStage.SCALE_NOBORDER=\"noborder\";\r\n\t\tStage.SCALE_FULL=\"full\";\r\n\t\tStage.SCALE_FIXED_WIDTH=\"fixedwidth\";\r\n\t\tStage.SCALE_FIXED_HEIGHT=\"fixedheight\";\r\n\t\tStage.ALIGN_LEFT=\"left\";\r\n\t\tStage.ALIGN_RIGHT=\"right\";\r\n\t\tStage.ALIGN_CENTER=\"center\";\r\n\t\tStage.ALIGN_TOP=\"top\";\r\n\t\tStage.ALIGN_MIDDLE=\"middle\";\r\n\t\tStage.ALIGN_BOTTOM=\"bottom\";\r\n\t\tStage.SCREEN_NONE=\"none\";\r\n\t\tStage.SCREEN_HORIZONTAL=\"horizontal\";\r\n\t\tStage.SCREEN_VERTICAL=\"vertical\";\r\n\t\tStage.FRAME_FAST=\"fast\";\r\n\t\tStage.FRAME_SLOW=\"slow\";\r\n\t\tStage.FRAME_MOUSE=\"mouse\";\r\n\t\tStage.FRAME_SLEEP=\"sleep\";\r\n\t\treturn Stage;\r\n\t})(Sprite)\r\n\r\n\r\n\t//class laya.webgl.shader.Shader extends laya.webgl.shader.BaseShader\r\n\tvar Shader=(function(_super){\r\n\t\tfunction Shader(vs,ps,saveName,nameMap){\r\n\t\t\tthis.customCompile=false;\r\n\t\t\t//this._nameMap=null;\r\n\t\t\t//this._vs=null;\r\n\t\t\t//this._ps=null;\r\n\t\t\tthis._curActTexIndex=0;\r\n\t\t\t//this._reCompile=false;\r\n\t\t\tthis.tag={};\r\n\t\t\t//this._vshader=null;\r\n\t\t\t//this._pshader=null;\r\n\t\t\tthis._program=null;\r\n\t\t\tthis._params=null;\r\n\t\t\tthis._paramsMap={};\r\n\t\t\tthis._offset=0;\r\n\t\t\t//this._id=0;\r\n\t\t\tShader.__super.call(this);\r\n\t\t\tif ((!vs)|| (!ps))throw \"Shader Error\";\r\n\t\t\tif (Render.isConchApp || Render.isFlash){\r\n\t\t\t\tthis.customCompile=true;\r\n\t\t\t}\r\n\t\t\tthis._id=++Shader._count;\r\n\t\t\tthis._vs=vs;\r\n\t\t\tthis._ps=ps;\r\n\t\t\tthis._nameMap=nameMap ? nameMap :{};\r\n\t\t\tsaveName !=null && (Shader.sharders[saveName]=this);\r\n\t\t}\r\n\r\n\t\t__class(Shader,'laya.webgl.shader.Shader',_super);\r\n\t\tvar __proto=Shader.prototype;\r\n\t\t__proto.recreateResource=function(){\r\n\t\t\tthis.startCreate();\r\n\t\t\tthis._compile();\r\n\t\t\tthis.completeCreate();\r\n\t\t\tthis.memorySize=0;\r\n\t\t}\r\n\r\n\t\t//忽略尺寸尺寸\r\n\t\t__proto.detoryResource=function(){\r\n\t\t\tWebGL.mainContext.deleteShader(this._vshader);\r\n\t\t\tWebGL.mainContext.deleteShader(this._pshader);\r\n\t\t\tWebGL.mainContext.deleteProgram(this._program);\r\n\t\t\tthis._vshader=this._pshader=this._program=null;\r\n\t\t\tthis._params=null;\r\n\t\t\tthis._paramsMap={};\r\n\t\t\tthis.memorySize=0;\r\n\t\t\tthis._curActTexIndex=0;\r\n\t\t}\r\n\r\n\t\t__proto._compile=function(){\r\n\t\t\tif (!this._vs || !this._ps || this._params)\r\n\t\t\t\treturn;\r\n\t\t\tthis._reCompile=true;\r\n\t\t\tthis._params=[];\r\n\t\t\tvar text=[this._vs,this._ps];\r\n\t\t\tvar result;\r\n\t\t\tif (this.customCompile)\r\n\t\t\t\tresult=this._preGetParams(this._vs,this._ps);\r\n\t\t\tvar gl=WebGL.mainContext;\r\n\t\t\tthis._program=gl.createProgram();\r\n\t\t\tthis._vshader=Shader._createShader(gl,text[0],0x8B31);\r\n\t\t\tthis._pshader=Shader._createShader(gl,text[1],0x8B30);\r\n\t\t\tgl.attachShader(this._program,this._vshader);\r\n\t\t\tgl.attachShader(this._program,this._pshader);\r\n\t\t\tgl.linkProgram(this._program);\r\n\t\t\tif (!this.customCompile && !gl.getProgramParameter(this._program,0x8B82)){\r\n\t\t\t\tthrow gl.getProgramInfoLog(this._program);\r\n\t\t\t};\r\n\t\t\tvar one,i=0,j=0,n=0,location;\r\n\t\t\tvar attribNum=this.customCompile ? result.attributes.length :gl.getProgramParameter(this._program,0x8B89);\r\n\t\t\tfor (i=0;i < attribNum;i++){\r\n\t\t\t\tvar attrib=this.customCompile ? result.attributes[i] :gl.getActiveAttrib(this._program,i);\r\n\t\t\t\tlocation=gl.getAttribLocation(this._program,attrib.name);\r\n\t\t\t\tone={vartype:\"attribute\",ivartype:0,attrib:attrib,location:location,name:attrib.name,type:attrib.type,isArray:false,isSame:false,preValue:null,indexOfParams:0};\r\n\t\t\t\tthis._params.push(one);\r\n\t\t\t};\r\n\t\t\tvar nUniformNum=this.customCompile ? result.uniforms.length :gl.getProgramParameter(this._program,0x8B86);\r\n\t\t\tfor (i=0;i < nUniformNum;i++){\r\n\t\t\t\tvar uniform=this.customCompile ? result.uniforms[i] :gl.getActiveUniform(this._program,i);\r\n\t\t\t\tlocation=gl.getUniformLocation(this._program,uniform.name);\r\n\t\t\t\tone={vartype:\"uniform\",ivartype:1,attrib:attrib,location:location,name:uniform.name,type:uniform.type,isArray:false,isSame:false,preValue:null,indexOfParams:0};\r\n\t\t\t\tif (one.name.indexOf('[0]')> 0){\r\n\t\t\t\t\tone.name=one.name.substr(0,one.name.length-3);\r\n\t\t\t\t\tone.isArray=true;\r\n\t\t\t\t\tone.location=gl.getUniformLocation(this._program,one.name);\r\n\t\t\t\t}\r\n\t\t\t\tthis._params.push(one);\r\n\t\t\t}\r\n\t\t\tfor (i=0,n=this._params.length;i < n;i++){\r\n\t\t\t\tone=this._params[i];\r\n\t\t\t\tone.indexOfParams=i;\r\n\t\t\t\tone.index=1;\r\n\t\t\t\tone.value=[one.location,null];\r\n\t\t\t\tone.codename=one.name;\r\n\t\t\t\tone.name=this._nameMap[one.codename] ? this._nameMap[one.codename] :one.codename;\r\n\t\t\t\tthis._paramsMap[one.name]=one;\r\n\t\t\t\tone._this=this;\r\n\t\t\t\tone.uploadedValue=[];\r\n\t\t\t\tif (one.vartype===\"attribute\"){\r\n\t\t\t\t\tone.fun=this._attribute;\r\n\t\t\t\t\tcontinue ;\r\n\t\t\t\t}\r\n\t\t\t\tswitch (one.type){\r\n\t\t\t\t\tcase 0x1404:\r\n\t\t\t\t\t\tone.fun=one.isArray ? this._uniform1iv :this._uniform1i;\r\n\t\t\t\t\t\tbreak ;\r\n\t\t\t\t\tcase 0x1406:\r\n\t\t\t\t\t\tone.fun=one.isArray ? this._uniform1fv :this._uniform1f;\r\n\t\t\t\t\t\tbreak ;\r\n\t\t\t\t\tcase 0x8B50:\r\n\t\t\t\t\t\tone.fun=one.isArray ? this._uniform_vec2v:this._uniform_vec2;\r\n\t\t\t\t\t\tbreak ;\r\n\t\t\t\t\tcase 0x8B51:\r\n\t\t\t\t\t\tone.fun=one.isArray ? this._uniform_vec3v:this._uniform_vec3;\r\n\t\t\t\t\t\tbreak ;\r\n\t\t\t\t\tcase 0x8B52:\r\n\t\t\t\t\t\tone.fun=one.isArray ? this._uniform_vec4v:this._uniform_vec4;\r\n\t\t\t\t\t\tbreak ;\r\n\t\t\t\t\tcase 0x8B5E:\r\n\t\t\t\t\t\tone.fun=this._uniform_sampler2D;\r\n\t\t\t\t\t\tbreak ;\r\n\t\t\t\t\tcase 0x8B60:\r\n\t\t\t\t\t\tone.fun=this._uniform_samplerCube;\r\n\t\t\t\t\t\tbreak ;\r\n\t\t\t\t\tcase 0x8B5C:\r\n\t\t\t\t\t\tone.fun=this._uniformMatrix4fv;\r\n\t\t\t\t\t\tbreak ;\r\n\t\t\t\t\tcase 0x8B56:\r\n\t\t\t\t\t\tone.fun=this._uniform1i;\r\n\t\t\t\t\t\tbreak ;\r\n\t\t\t\t\tcase 0x8B5A:\r\n\t\t\t\t\tcase 0x8B5B:\r\n\t\t\t\t\t\tthrow new Error(\"compile shader err!\");\r\n\t\t\t\t\t\tbreak ;\r\n\t\t\t\t\tdefault :\r\n\t\t\t\t\t\tthrow new Error(\"compile shader err!\");\r\n\t\t\t\t\t\tbreak ;\r\n\t\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*根据变量名字获得\r\n\t\t*@param name\r\n\t\t*@return\r\n\t\t*/\r\n\t\t__proto.getUniform=function(name){\r\n\t\t\treturn this._paramsMap[name];\r\n\t\t}\r\n\r\n\t\t__proto._attribute=function(one,value){\r\n\t\t\tvar gl=WebGL.mainContext;\r\n\t\t\tgl.enableVertexAttribArray(one.location);\r\n\t\t\tgl.vertexAttribPointer(one.location,value[0],value[1],value[2],value[3],value[4]+this._offset);\r\n\t\t\treturn 2;\r\n\t\t}\r\n\r\n\t\t__proto._uniform1f=function(one,value){\r\n\t\t\tvar uploadedValue=one.uploadedValue;\r\n\t\t\tif (uploadedValue[0]!==value){\r\n\t\t\t\tWebGL.mainContext.uniform1f(one.location,uploadedValue[0]=value);\r\n\t\t\t\treturn 1;\r\n\t\t\t}\r\n\t\t\treturn 0;\r\n\t\t}\r\n\r\n\t\t__proto._uniform1fv=function(one,value){\r\n\t\t\tif (value.length < 4){\r\n\t\t\t\tvar uploadedValue=one.uploadedValue;\r\n\t\t\t\tif (uploadedValue[0]!==value[0] || uploadedValue[1]!==value[1] || uploadedValue[2]!==value[2] || uploadedValue[3]!==value[3]){\r\n\t\t\t\t\tWebGL.mainContext.uniform1fv(one.location,value);\r\n\t\t\t\t\tuploadedValue[0]=value[0];\r\n\t\t\t\t\tuploadedValue[1]=value[1];\r\n\t\t\t\t\tuploadedValue[2]=value[2];\r\n\t\t\t\t\tuploadedValue[3]=value[3];\r\n\t\t\t\t\treturn 1;\r\n\t\t\t\t}\r\n\t\t\t\treturn 0;\r\n\t\t\t\t}else {\r\n\t\t\t\tWebGL.mainContext.uniform1fv(one.location,value);\r\n\t\t\t\treturn 1;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__proto._uniform_vec2=function(one,value){\r\n\t\t\tvar uploadedValue=one.uploadedValue;\r\n\t\t\tif (uploadedValue[0]!==value[0] || uploadedValue[1]!==value[1]){\r\n\t\t\t\tWebGL.mainContext.uniform2f(one.location,uploadedValue[0]=value[0],uploadedValue[1]=value[1]);\r\n\t\t\t\treturn 1;\r\n\t\t\t}\r\n\t\t\treturn 0;\r\n\t\t}\r\n\r\n\t\t__proto._uniform_vec2v=function(one,value){\r\n\t\t\tif (value.length < 2){\r\n\t\t\t\tvar uploadedValue=one.uploadedValue;\r\n\t\t\t\tif (uploadedValue[0]!==value[0] || uploadedValue[1]!==value[1] || uploadedValue[2]!==value[2] || uploadedValue[3]!==value[3]){\r\n\t\t\t\t\tWebGL.mainContext.uniform2fv(one.location,value);\r\n\t\t\t\t\tuploadedValue[0]=value[0];\r\n\t\t\t\t\tuploadedValue[1]=value[1];\r\n\t\t\t\t\tuploadedValue[2]=value[2];\r\n\t\t\t\t\tuploadedValue[3]=value[3];\r\n\t\t\t\t\treturn 1;\r\n\t\t\t\t}\r\n\t\t\t\treturn 0;\r\n\t\t\t\t}else {\r\n\t\t\t\tWebGL.mainContext.uniform2fv(one.location,value);\r\n\t\t\t\treturn 1;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__proto._uniform_vec3=function(one,value){\r\n\t\t\tvar uploadedValue=one.uploadedValue;\r\n\t\t\tif (uploadedValue[0]!==value[0] || uploadedValue[1]!==value[1] || uploadedValue[2]!==value[2]){\r\n\t\t\t\tWebGL.mainContext.uniform3f(one.location,uploadedValue[0]=value[0],uploadedValue[1]=value[1],uploadedValue[2]=value[2]);\r\n\t\t\t\treturn 1;\r\n\t\t\t}\r\n\t\t\treturn 0;\r\n\t\t}\r\n\r\n\t\t__proto._uniform_vec3v=function(one,value){\r\n\t\t\tWebGL.mainContext.uniform3fv(one.location,value);\r\n\t\t\treturn 1;\r\n\t\t}\r\n\r\n\t\t__proto._uniform_vec4=function(one,value){\r\n\t\t\tvar uploadedValue=one.uploadedValue;\r\n\t\t\tif (uploadedValue[0]!==value[0] || uploadedValue[1]!==value[1] || uploadedValue[2]!==value[2] || uploadedValue[3]!==value[3]){\r\n\t\t\t\tWebGL.mainContext.uniform4f(one.location,uploadedValue[0]=value[0],uploadedValue[1]=value[1],uploadedValue[2]=value[2],uploadedValue[3]=value[3]);\r\n\t\t\t\treturn 1;\r\n\t\t\t}\r\n\t\t\treturn 0;\r\n\t\t}\r\n\r\n\t\t__proto._uniform_vec4v=function(one,value){\r\n\t\t\tWebGL.mainContext.uniform4fv(one.location,value);\r\n\t\t\treturn 1;\r\n\t\t}\r\n\r\n\t\t__proto._uniformMatrix2fv=function(one,value){\r\n\t\t\tWebGL.mainContext.uniformMatrix2fv(one.location,false,value);\r\n\t\t\treturn 1;\r\n\t\t}\r\n\r\n\t\t__proto._uniformMatrix3fv=function(one,value){\r\n\t\t\tWebGL.mainContext.uniformMatrix3fv(one.location,false,value);\r\n\t\t\treturn 1;\r\n\t\t}\r\n\r\n\t\t__proto._uniformMatrix4fv=function(one,value){\r\n\t\t\tWebGL.mainContext.uniformMatrix4fv(one.location,false,value);\r\n\t\t\treturn 1;\r\n\t\t}\r\n\r\n\t\t__proto._uniform1i=function(one,value){\r\n\t\t\tvar uploadedValue=one.uploadedValue;\r\n\t\t\tif (uploadedValue[0]!==value){\r\n\t\t\t\tWebGL.mainContext.uniform1i(one.location,uploadedValue[0]=value);\r\n\t\t\t\treturn 1;\r\n\t\t\t}\r\n\t\t\treturn 0;\r\n\t\t}\r\n\r\n\t\t__proto._uniform1iv=function(one,value){\r\n\t\t\tWebGL.mainContext.uniform1iv(one.location,value);\r\n\t\t\treturn 1;\r\n\t\t}\r\n\r\n\t\t__proto._uniform_ivec2=function(one,value){\r\n\t\t\tvar uploadedValue=one.uploadedValue;\r\n\t\t\tif (uploadedValue[0]!==value[0] || uploadedValue[1]!==value[1]){\r\n\t\t\t\tWebGL.mainContext.uniform2i(one.location,uploadedValue[0]=value[0],uploadedValue[1]=value[1]);\r\n\t\t\t\treturn 1;\r\n\t\t\t}\r\n\t\t\treturn 0;\r\n\t\t}\r\n\r\n\t\t__proto._uniform_ivec2v=function(one,value){\r\n\t\t\tWebGL.mainContext.uniform2iv(one.location,value);\r\n\t\t\treturn 1;\r\n\t\t}\r\n\r\n\t\t__proto._uniform_vec3i=function(one,value){\r\n\t\t\tvar uploadedValue=one.uploadedValue;\r\n\t\t\tif (uploadedValue[0]!==value[0] || uploadedValue[1]!==value[1] || uploadedValue[2]!==value[2]){\r\n\t\t\t\tWebGL.mainContext.uniform3i(one.location,uploadedValue[0]=value[0],uploadedValue[1]=value[1],uploadedValue[2]=value[2]);\r\n\t\t\t\treturn 1;\r\n\t\t\t}\r\n\t\t\treturn 0;\r\n\t\t}\r\n\r\n\t\t__proto._uniform_vec3vi=function(one,value){\r\n\t\t\tWebGL.mainContext.uniform3iv(one.location,value);\r\n\t\t\treturn 1;\r\n\t\t}\r\n\r\n\t\t__proto._uniform_vec4i=function(one,value){\r\n\t\t\tvar uploadedValue=one.uploadedValue;\r\n\t\t\tif (uploadedValue[0]!==value[0] || uploadedValue[1]!==value[1] || uploadedValue[2]!==value[2] || uploadedValue[3]!==value[3]){\r\n\t\t\t\tWebGL.mainContext.uniform4i(one.location,uploadedValue[0]=value[0],uploadedValue[1]=value[1],uploadedValue[2]=value[2],uploadedValue[3]=value[3]);\r\n\t\t\t\treturn 1;\r\n\t\t\t}\r\n\t\t\treturn 0;\r\n\t\t}\r\n\r\n\t\t__proto._uniform_vec4vi=function(one,value){\r\n\t\t\tWebGL.mainContext.uniform4iv(one.location,value);\r\n\t\t\treturn 1;\r\n\t\t}\r\n\r\n\t\t__proto._uniform_sampler2D=function(one,value){\r\n\t\t\tvar gl=WebGL.mainContext;\r\n\t\t\tvar uploadedValue=one.uploadedValue;\r\n\t\t\tif (uploadedValue[0]==null){\r\n\t\t\t\tuploadedValue[0]=this._curActTexIndex;\r\n\t\t\t\tgl.uniform1i(one.location,this._curActTexIndex);\r\n\t\t\t\tgl.activeTexture(Shader._TEXTURES[this._curActTexIndex]);\r\n\t\t\t\tWebGLContext.bindTexture(gl,0x0DE1,value);\r\n\t\t\t\tthis._curActTexIndex++;\r\n\t\t\t\treturn 1;\r\n\t\t\t\t}else {\r\n\t\t\t\tgl.activeTexture(Shader._TEXTURES[uploadedValue[0]]);\r\n\t\t\t\tWebGLContext.bindTexture(gl,0x0DE1,value);\r\n\t\t\t\treturn 0;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__proto._uniform_samplerCube=function(one,value){\r\n\t\t\tvar gl=WebGL.mainContext;\r\n\t\t\tvar uploadedValue=one.uploadedValue;\r\n\t\t\tif (uploadedValue[0]==null){\r\n\t\t\t\tuploadedValue[0]=this._curActTexIndex;\r\n\t\t\t\tgl.uniform1i(one.location,this._curActTexIndex);\r\n\t\t\t\tgl.activeTexture(Shader._TEXTURES[this._curActTexIndex]);\r\n\t\t\t\tWebGLContext.bindTexture(gl,0x8513,value);\r\n\t\t\t\tthis._curActTexIndex++;\r\n\t\t\t\treturn 1;\r\n\t\t\t\t}else {\r\n\t\t\t\tgl.activeTexture(Shader._TEXTURES[uploadedValue[0]]);\r\n\t\t\t\tWebGLContext.bindTexture(gl,0x8513,value);\r\n\t\t\t\treturn 0;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__proto._noSetValue=function(one){\r\n\t\t\tconsole.log(\"no....:\"+one.name);\r\n\t\t}\r\n\r\n\t\t//throw new Error(\"upload shader err,must set value:\"+one.name);\r\n\t\t__proto.uploadOne=function(name,value){\r\n\t\t\tthis.activeResource();\r\n\t\t\tWebGLContext.UseProgram(this._program);\r\n\t\t\tvar one=this._paramsMap[name];\r\n\t\t\tone.fun.call(this,one,value);\r\n\t\t}\r\n\r\n\t\t__proto.uploadTexture2D=function(value){\r\n\t\t\tStat.shaderCall++;\r\n\t\t\tvar gl=WebGL.mainContext;\r\n\t\t\tgl.activeTexture(0x84C0);\r\n\t\t\tWebGLContext.bindTexture(gl,0x0DE1,value);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*提交shader到GPU\r\n\t\t*@param shaderValue\r\n\t\t*/\r\n\t\t__proto.upload=function(shaderValue,params){\r\n\t\t\tBaseShader.activeShader=this;\r\n\t\t\tBaseShader.bindShader=this;\r\n\t\t\tthis.activeResource();\r\n\t\t\tWebGLContext.UseProgram(this._program);\r\n\t\t\tif (this._reCompile){\r\n\t\t\t\tparams=this._params;\r\n\t\t\t\tthis._reCompile=false;\r\n\t\t\t\t}else {\r\n\t\t\t\tparams=params || this._params;\r\n\t\t\t};\r\n\t\t\tvar one,value,n=params.length,shaderCall=0;\r\n\t\t\tfor (var i=0;i < n;i++){\r\n\t\t\t\tone=params[i];\r\n\t\t\t\t((value=shaderValue[one.name])!==null)&& (shaderCall+=one.fun.call(this,one,value));\r\n\t\t\t}\r\n\t\t\tStat.shaderCall+=shaderCall;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*按数组的定义提交\r\n\t\t*@param shaderValue 数组格式[name,value,...]\r\n\t\t*/\r\n\t\t__proto.uploadArray=function(shaderValue,length,_bufferUsage){\r\n\t\t\tBaseShader.activeShader=this;\r\n\t\t\tBaseShader.bindShader=this;\r\n\t\t\tthis.activeResource();\r\n\t\t\tWebGLContext.UseProgram(this._program);\r\n\t\t\tvar params=this._params,value;\r\n\t\t\tvar one,shaderCall=0;\r\n\t\t\tfor (var i=length-2;i >=0;i-=2){\r\n\t\t\t\tone=this._paramsMap[shaderValue[i]];\r\n\t\t\t\tif (!one)\r\n\t\t\t\t\tcontinue ;\r\n\t\t\t\tvalue=shaderValue[i+1];\r\n\t\t\t\tif (value !=null){\r\n\t\t\t\t\t_bufferUsage && _bufferUsage[one.name] && _bufferUsage[one.name].bind();\r\n\t\t\t\t\tshaderCall+=one.fun.call(this,one,value);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tStat.shaderCall+=shaderCall;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*得到编译后的变量及相关预定义\r\n\t\t*@return\r\n\t\t*/\r\n\t\t__proto.getParams=function(){\r\n\t\t\treturn this._params;\r\n\t\t}\r\n\r\n\t\t__proto._preGetParams=function(vs,ps){\r\n\t\t\tvar text=[vs,ps];\r\n\t\t\tvar result={};\r\n\t\t\tvar attributes=[];\r\n\t\t\tvar uniforms=[];\r\n\t\t\tvar definesInfo={};\r\n\t\t\tvar definesName=[];\r\n\t\t\tresult.attributes=attributes;\r\n\t\t\tresult.uniforms=uniforms;\r\n\t\t\tresult.defines=definesInfo;\r\n\t\t\tvar removeAnnotation=new RegExp(\"(/\\\\*([^*]|[\\\\r\\\\\\n]|(\\\\*+([^*/]|[\\\\r\\\\n])))*\\\\*+/)|(//.*)\",\"g\");\r\n\t\t\tvar reg=new RegExp(\"(\\\".*\\\")|('.*')|([#\\\\w\\\\*-\\\\.+/()=<>{}\\\\\\\\]+)|([,;:\\\\\\\\])\",\"g\");\r\n\t\t\tvar i=0,n=0,one;\r\n\t\t\tfor (var s=0;s < 2;s++){\r\n\t\t\t\ttext[s]=text[s].replace(removeAnnotation,\"\");\r\n\t\t\t\tvar words=text[s].match(reg);\r\n\t\t\t\tvar tempelse;\r\n\t\t\t\tfor (i=0,n=words.length;i < n;i++){\r\n\t\t\t\t\tvar word=words[i];\r\n\t\t\t\t\tif (word !=\"attribute\" && word !=\"uniform\"){\r\n\t\t\t\t\t\tif (word==\"#define\"){\r\n\t\t\t\t\t\t\tword=words[++i];\r\n\t\t\t\t\t\t\tdefinesName[word]=1;\r\n\t\t\t\t\t\t\tcontinue ;\r\n\t\t\t\t\t\t\t}else if (word==\"#ifdef\"){\r\n\t\t\t\t\t\t\ttempelse=words[++i];\r\n\t\t\t\t\t\t\tvar def=definesInfo[tempelse]=definesInfo[tempelse] || [];\r\n\t\t\t\t\t\t\tfor (i++;i < n;i++){\r\n\t\t\t\t\t\t\t\tword=words[i];\r\n\t\t\t\t\t\t\t\tif (word !=\"attribute\" && word !=\"uniform\"){\r\n\t\t\t\t\t\t\t\t\tif (word==\"#else\"){\r\n\t\t\t\t\t\t\t\t\t\tfor (i++;i < n;i++){\r\n\t\t\t\t\t\t\t\t\t\t\tword=words[i];\r\n\t\t\t\t\t\t\t\t\t\t\tif (word !=\"attribute\" && word !=\"uniform\"){\r\n\t\t\t\t\t\t\t\t\t\t\t\tif (word==\"#endif\"){\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tbreak ;\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\tcontinue ;\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\ti=this.parseOne(attributes,uniforms,words,i,word,!definesName[tempelse]);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tcontinue ;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\ti=this.parseOne(attributes,uniforms,words,i,word,definesName[tempelse]);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcontinue ;\r\n\t\t\t\t\t}\r\n\t\t\t\t\ti=this.parseOne(attributes,uniforms,words,i,word,true);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn result;\r\n\t\t}\r\n\r\n\t\t__proto.parseOne=function(attributes,uniforms,words,i,word,b){\r\n\t\t\tvar one={type:Shader.shaderParamsMap[words[i+1]],name:words[i+2],size:isNaN(parseInt(words[i+3]))? 1 :parseInt(words[i+3])};\r\n\t\t\tif (b){\r\n\t\t\t\tif (word==\"attribute\"){\r\n\t\t\t\t\tattributes.push(one);\r\n\t\t\t\t\t}else {\r\n\t\t\t\t\tuniforms.push(one);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (words[i+3]==':'){\r\n\t\t\t\tone.type=words[i+4];\r\n\t\t\t\ti+=2;\r\n\t\t\t}\r\n\t\t\ti+=2;\r\n\t\t\treturn i;\r\n\t\t}\r\n\r\n\t\t__proto.dispose=function(){\r\n\t\t\tthis.resourceManager.removeResource(this);\r\n\t\t\tlaya.resource.Resource.prototype.dispose.call(this);\r\n\t\t}\r\n\r\n\t\tShader.getShader=function(name){\r\n\t\t\treturn Shader.sharders[name];\r\n\t\t}\r\n\r\n\t\tShader.create=function(vs,ps,saveName,nameMap){\r\n\t\t\treturn new Shader(vs,ps,saveName,nameMap);\r\n\t\t}\r\n\r\n\t\tShader.withCompile=function(nameID,define,shaderName,createShader){\r\n\t\t\tif (shaderName && Shader.sharders[shaderName])\r\n\t\t\t\treturn Shader.sharders[shaderName];\r\n\t\t\tvar pre=Shader._preCompileShader[0.0002 *nameID];\r\n\t\t\tif (!pre)\r\n\t\t\t\tthrow new Error(\"withCompile shader err!\"+nameID);\r\n\t\t\treturn pre.createShader(define,shaderName,createShader);\r\n\t\t}\r\n\r\n\t\tShader.withCompile2D=function(nameID,mainID,define,shaderName,createShader){\r\n\t\t\tif (shaderName && Shader.sharders[shaderName])\r\n\t\t\t\treturn Shader.sharders[shaderName];\r\n\t\t\tvar pre=Shader._preCompileShader[0.0002 *nameID+mainID];\r\n\t\t\tif (!pre)\r\n\t\t\t\tthrow new Error(\"withCompile shader err!\"+nameID+\" \"+mainID);\r\n\t\t\treturn pre.createShader(define,shaderName,createShader);\r\n\t\t}\r\n\r\n\t\tShader.addInclude=function(fileName,txt){\r\n\t\t\tif (!txt || txt.length===0)\r\n\t\t\t\tthrow new Error(\"add shader include file err:\"+fileName);\r\n\t\t\tif (Shader._includeFiles[fileName])\r\n\t\t\t\tthrow new Error(\"add shader include file err, has add:\"+fileName);\r\n\t\t\tShader._includeFiles[fileName]=txt;\r\n\t\t}\r\n\r\n\t\tShader.preCompile=function(nameID,vs,ps,nameMap){\r\n\t\t\tvar id=0.0002 *nameID;\r\n\t\t\tShader._preCompileShader[id]=new ShaderCompile(id,vs,ps,nameMap,Shader._includeFiles);\r\n\t\t}\r\n\r\n\t\tShader.preCompile2D=function(nameID,mainID,vs,ps,nameMap){\r\n\t\t\tvar id=0.0002 *nameID+mainID;\r\n\t\t\tShader._preCompileShader[id]=new ShaderCompile(id,vs,ps,nameMap,Shader._includeFiles);\r\n\t\t}\r\n\r\n\t\tShader._createShader=function(gl,str,type){\r\n\t\t\tvar shader=gl.createShader(type);\r\n\t\t\tgl.shaderSource(shader,str);\r\n\t\t\tgl.compileShader(shader);\r\n\t\t\tif (!gl.getShaderParameter(shader,0x8B81)){\r\n\t\t\t\tthrow gl.getShaderInfoLog(shader);\r\n\t\t\t}\r\n\t\t\treturn shader;\r\n\t\t}\r\n\r\n\t\tShader._TEXTURES=[0x84C0,0x84C1,0x84C2,0x84C3,0x84C4,0x84C5,0x84C6,,0x84C7,0x84C8];\r\n\t\tShader._includeFiles={};\r\n\t\tShader._count=0;\r\n\t\tShader._preCompileShader={};\r\n\t\tShader.SHADERNAME2ID=0.0002;\r\n\t\tShader.sharders=(Shader.sharders=[],Shader.sharders.length=0x20,Shader.sharders);\r\n\t\t__static(Shader,\r\n\t\t['shaderParamsMap',function(){return this.shaderParamsMap={\"float\":0x1406,\"int\":0x1404,\"bool\":0x8B56,\"vec2\":0x8B50,\"vec3\":0x8B51,\"vec4\":0x8B52,\"ivec2\":0x8B53,\"ivec3\":0x8B54,\"ivec4\":0x8B55,\"bvec2\":0x8B57,\"bvec3\":0x8B58,\"bvec4\":0x8B59,\"mat2\":0x8B5A,\"mat3\":0x8B5B,\"mat4\":0x8B5C,\"sampler2D\":0x8B5E,\"samplerCube\":0x8B60};},'nameKey',function(){return this.nameKey=new StringKey();}\r\n\t\t]);\r\n\t\treturn Shader;\r\n\t})(BaseShader)\r\n\r\n\r\n\t//class laya.webgl.utils.Buffer2D extends laya.webgl.utils.Buffer\r\n\tvar Buffer2D=(function(_super){\r\n\t\tfunction Buffer2D(){\r\n\t\t\tthis._maxsize=0;\r\n\t\t\tthis._upload=true;\r\n\t\t\tthis._uploadSize=0;\r\n\t\t\tBuffer2D.__super.call(this);\r\n\t\t\tthis.lock=true;\r\n\t\t}\r\n\r\n\t\t__class(Buffer2D,'laya.webgl.utils.Buffer2D',_super);\r\n\t\tvar __proto=Buffer2D.prototype;\r\n\t\t__proto._bufferData=function(){\r\n\t\t\tthis._maxsize=Math.max(this._maxsize,this._byteLength);\r\n\t\t\tif (Stat.loopCount % 30==0){\r\n\t\t\t\tif (this._buffer.byteLength > (this._maxsize+64)){\r\n\t\t\t\t\tthis.memorySize=this._buffer.byteLength;\r\n\t\t\t\t\tthis._buffer=this._buffer.slice(0,this._maxsize+64);\r\n\t\t\t\t\tthis._checkArrayUse();\r\n\t\t\t\t}\r\n\t\t\t\tthis._maxsize=this._byteLength;\r\n\t\t\t}\r\n\t\t\tif (this._uploadSize < this._buffer.byteLength){\r\n\t\t\t\tthis._uploadSize=this._buffer.byteLength;\r\n\t\t\t\tBuffer._gl.bufferData(this._bufferType,this._uploadSize,this._bufferUsage);\r\n\t\t\t\tthis.memorySize=this._uploadSize;\r\n\t\t\t}\r\n\t\t\tBuffer._gl.bufferSubData(this._bufferType,0,this._buffer);\r\n\t\t}\r\n\r\n\t\t__proto._bufferSubData=function(offset,dataStart,dataLength){\r\n\t\t\t(offset===void 0)&& (offset=0);\r\n\t\t\t(dataStart===void 0)&& (dataStart=0);\r\n\t\t\t(dataLength===void 0)&& (dataLength=0);\r\n\t\t\tthis._maxsize=Math.max(this._maxsize,this._byteLength);\r\n\t\t\tif (Stat.loopCount % 30==0){\r\n\t\t\t\tif (this._buffer.byteLength > (this._maxsize+64)){\r\n\t\t\t\t\tthis.memorySize=this._buffer.byteLength;\r\n\t\t\t\t\tthis._buffer=this._buffer.slice(0,this._maxsize+64);\r\n\t\t\t\t\tthis._checkArrayUse();\r\n\t\t\t\t}\r\n\t\t\t\tthis._maxsize=this._byteLength;\r\n\t\t\t}\r\n\t\t\tif (this._uploadSize < this._buffer.byteLength){\r\n\t\t\t\tthis._uploadSize=this._buffer.byteLength;\r\n\t\t\t\tBuffer._gl.bufferData(this._bufferType,this._uploadSize,this._bufferUsage);\r\n\t\t\t\tthis.memorySize=this._uploadSize;\r\n\t\t\t}\r\n\t\t\tif (dataStart || dataLength){\r\n\t\t\t\tvar subBuffer=this._buffer.slice(dataStart,dataLength);\r\n\t\t\t\tBuffer._gl.bufferSubData(this._bufferType,offset,subBuffer);\r\n\t\t\t\t}else {\r\n\t\t\t\tBuffer._gl.bufferSubData(this._bufferType,offset,this._buffer);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__proto._checkArrayUse=function(){}\r\n\t\t__proto._bind_upload=function(){\r\n\t\t\tif (!this._upload)\r\n\t\t\t\treturn false;\r\n\t\t\tthis._upload=false;\r\n\t\t\tthis._bind();\r\n\t\t\tthis._bufferData();\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\t__proto._bind_subUpload=function(offset,dataStart,dataLength){\r\n\t\t\t(offset===void 0)&& (offset=0);\r\n\t\t\t(dataStart===void 0)&& (dataStart=0);\r\n\t\t\t(dataLength===void 0)&& (dataLength=0);\r\n\t\t\tif (!this._upload)\r\n\t\t\t\treturn false;\r\n\t\t\tthis._upload=false;\r\n\t\t\tthis._bind();\r\n\t\t\tthis._bufferSubData(offset,dataStart,dataLength);\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\t__proto._resizeBuffer=function(nsz,copy){\r\n\t\t\tif (nsz < this._buffer.byteLength)\r\n\t\t\t\treturn this;\r\n\t\t\tthis.memorySize=nsz;\r\n\t\t\tif (copy && this._buffer && this._buffer.byteLength > 0){\r\n\t\t\t\tvar newbuffer=new ArrayBuffer(nsz);\r\n\t\t\t\tvar n=new Uint8Array(newbuffer);\r\n\t\t\t\tn.set(new Uint8Array(this._buffer),0);\r\n\t\t\t\tthis._buffer=newbuffer;\r\n\t\t\t}else\r\n\t\t\tthis._buffer=new ArrayBuffer(nsz);\r\n\t\t\tthis._checkArrayUse();\r\n\t\t\tthis._upload=true;\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\t\t__proto.append=function(data){\r\n\t\t\tthis._upload=true;\r\n\t\t\tvar byteLen=0,n;\r\n\t\t\tbyteLen=data.byteLength;\r\n\t\t\tif ((data instanceof Uint8Array)){\r\n\t\t\t\tthis._resizeBuffer(this._byteLength+byteLen,true);\r\n\t\t\t\tn=new Uint8Array(this._buffer,this._byteLength);\r\n\t\t\t\t}else if ((data instanceof Uint16Array)){\r\n\t\t\t\tthis._resizeBuffer(this._byteLength+byteLen,true);\r\n\t\t\t\tn=new Uint16Array(this._buffer,this._byteLength);\r\n\t\t\t\t}else if ((data instanceof Float32Array)){\r\n\t\t\t\tthis._resizeBuffer(this._byteLength+byteLen,true);\r\n\t\t\t\tn=new Float32Array(this._buffer,this._byteLength);\r\n\t\t\t}\r\n\t\t\tn.set(data,0);\r\n\t\t\tthis._byteLength+=byteLen;\r\n\t\t\tthis._checkArrayUse();\r\n\t\t}\r\n\r\n\t\t__proto.appendEx=function(data,type){\r\n\t\t\tthis._upload=true;\r\n\t\t\tvar byteLen=0,n;\r\n\t\t\tbyteLen=data.byteLength;\r\n\t\t\tthis._resizeBuffer(this._byteLength+byteLen,true);\r\n\t\t\tn=new type(this._buffer,this._byteLength);\r\n\t\t\tn.set(data,0);\r\n\t\t\tthis._byteLength+=byteLen;\r\n\t\t\tthis._checkArrayUse();\r\n\t\t}\r\n\r\n\t\t__proto.appendEx2=function(data,type,dataLen,perDataLen){\r\n\t\t\t(perDataLen===void 0)&& (perDataLen=1);\r\n\t\t\tthis._upload=true;\r\n\t\t\tvar byteLen=0,n;\r\n\t\t\tbyteLen=dataLen*perDataLen;\r\n\t\t\tthis._resizeBuffer(this._byteLength+byteLen,true);\r\n\t\t\tn=new type(this._buffer,this._byteLength);\r\n\t\t\tvar i=0;\r\n\t\t\tfor (i=0;i < dataLen;i++){\r\n\t\t\t\tn[i]=data[i];\r\n\t\t\t}\r\n\t\t\tthis._byteLength+=byteLen;\r\n\t\t\tthis._checkArrayUse();\r\n\t\t}\r\n\r\n\t\t__proto.getBuffer=function(){\r\n\t\t\treturn this._buffer;\r\n\t\t}\r\n\r\n\t\t__proto.setNeedUpload=function(){\r\n\t\t\tthis._upload=true;\r\n\t\t}\r\n\r\n\t\t__proto.getNeedUpload=function(){\r\n\t\t\treturn this._upload;\r\n\t\t}\r\n\r\n\t\t__proto.upload=function(){\r\n\t\t\tvar scuess=this._bind_upload();\r\n\t\t\tBuffer._gl.bindBuffer(this._bufferType,null);\r\n\t\t\tBuffer._bindActive[this._bufferType]=null;\r\n\t\t\tBaseShader.activeShader=null\r\n\t\t\treturn scuess;\r\n\t\t}\r\n\r\n\t\t__proto.subUpload=function(offset,dataStart,dataLength){\r\n\t\t\t(offset===void 0)&& (offset=0);\r\n\t\t\t(dataStart===void 0)&& (dataStart=0);\r\n\t\t\t(dataLength===void 0)&& (dataLength=0);\r\n\t\t\tvar scuess=this._bind_subUpload();\r\n\t\t\tBuffer._gl.bindBuffer(this._bufferType,null);\r\n\t\t\tBuffer._bindActive[this._bufferType]=null;\r\n\t\t\tBaseShader.activeShader=null\r\n\t\t\treturn scuess;\r\n\t\t}\r\n\r\n\t\t__proto.detoryResource=function(){\r\n\t\t\t_super.prototype.detoryResource.call(this);\r\n\t\t\tthis._upload=true;\r\n\t\t\tthis._uploadSize=0;\r\n\t\t}\r\n\r\n\t\t__proto.clear=function(){\r\n\t\t\tthis._byteLength=0;\r\n\t\t\tthis._upload=true;\r\n\t\t}\r\n\r\n\t\t__getset(0,__proto,'byteLength',_super.prototype._$get_byteLength,function(value){\r\n\t\t\tif (this._byteLength===value)\r\n\t\t\t\treturn;\r\n\t\t\tvalue <=this._buffer.byteLength || (this._resizeBuffer(value *2+256,true));\r\n\t\t\tthis._byteLength=value;\r\n\t\t});\r\n\r\n\t\t__getset(0,__proto,'bufferLength',function(){\r\n\t\t\treturn this._buffer.byteLength;\r\n\t\t});\r\n\r\n\t\tBuffer2D.__int__=function(gl){\r\n\t\t\tIndexBuffer2D.QuadrangleIB=IndexBuffer2D.create(0x88E4);\r\n\t\t\tGlUtils.fillIBQuadrangle(IndexBuffer2D.QuadrangleIB,16);\r\n\t\t}\r\n\r\n\t\tBuffer2D.FLOAT32=4;\r\n\t\tBuffer2D.SHORT=2;\r\n\t\treturn Buffer2D;\r\n\t})(Buffer)\r\n\r\n\r\n\t/**\r\n\t*@private\r\n\t*<code>FileBitmap</code> 是图片文件资源类。\r\n\t*/\r\n\t//class laya.resource.FileBitmap extends laya.resource.Bitmap\r\n\tvar FileBitmap=(function(_super){\r\n\t\tfunction FileBitmap(){\r\n\t\t\tthis._src=null;\r\n\t\t\tthis._onload=null;\r\n\t\t\tthis._onerror=null;\r\n\t\t\tFileBitmap.__super.call(this);\r\n\t\t}\r\n\r\n\t\t__class(FileBitmap,'laya.resource.FileBitmap',_super);\r\n\t\tvar __proto=FileBitmap.prototype;\r\n\t\t/**\r\n\t\t*载入完成处理函数。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'onload',null,function(value){\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*错误处理函数。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'onerror',null,function(value){\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*文件路径全名。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'src',function(){\r\n\t\t\treturn this._src;\r\n\t\t\t},function(value){\r\n\t\t\tthis._src=value;\r\n\t\t});\r\n\r\n\t\treturn FileBitmap;\r\n\t})(Bitmap)\r\n\r\n\r\n\t/**\r\n\t*<code>HTMLCanvas</code> 是 Html Canvas 的代理类，封装了 Canvas 的属性和方法。。请不要直接使用 new HTMLCanvas！\r\n\t*/\r\n\t//class laya.resource.HTMLCanvas extends laya.resource.Bitmap\r\n\tvar HTMLCanvas=(function(_super){\r\n\t\tfunction HTMLCanvas(type,canvas){\r\n\t\t\t//this._ctx=null;\r\n\t\t\tthis._is2D=false;\r\n\t\t\tHTMLCanvas.__super.call(this);\r\n\t\t\tvar _$this=this;\r\n\t\t\tthis._source=this;\r\n\t\t\tif (type===\"2D\" || (type===\"AUTO\" && !Render.isWebGL)){\r\n\t\t\t\tthis._is2D=true;\r\n\t\t\t\tthis._source=canvas || Browser.createElement(\"canvas\");\r\n\t\t\t\tvar o=this;\r\n\t\t\t\to.getContext=function (contextID,other){\r\n\t\t\t\t\tif (_$this._ctx)return _$this._ctx;\r\n\t\t\t\t\tvar ctx=_$this._ctx=_$this._source.getContext(contextID,other);\r\n\t\t\t\t\tif (ctx){\r\n\t\t\t\t\t\tctx._canvas=o;\r\n\t\t\t\t\t\tif(!Render.isFlash)ctx.size=function (w,h){\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn ctx;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse this._source={};\r\n\t\t}\r\n\r\n\t\t__class(HTMLCanvas,'laya.resource.HTMLCanvas',_super);\r\n\t\tvar __proto=HTMLCanvas.prototype;\r\n\t\t/**\r\n\t\t*清空画布内容。\r\n\t\t*/\r\n\t\t__proto.clear=function(){\r\n\t\t\tthis._ctx && this._ctx.clear();\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*销毁。\r\n\t\t*/\r\n\t\t__proto.destroy=function(){\r\n\t\t\tthis._ctx && this._ctx.destroy();\r\n\t\t\tthis._ctx=null;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*释放。\r\n\t\t*/\r\n\t\t__proto.release=function(){}\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*设置 Canvas 渲染上下文。\r\n\t\t*@param context Canvas 渲染上下文。\r\n\t\t*/\r\n\t\t__proto._setContext=function(context){\r\n\t\t\tthis._ctx=context;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*获取 Canvas 渲染上下文。\r\n\t\t*@param contextID 上下文ID.\r\n\t\t*@param other\r\n\t\t*@return Canvas 渲染上下文 Context 对象。\r\n\t\t*/\r\n\t\t__proto.getContext=function(contextID,other){\r\n\t\t\treturn this._ctx ? this._ctx :(this._ctx=HTMLCanvas._createContext(this));\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*获取内存大小。\r\n\t\t*@return 内存大小。\r\n\t\t*/\r\n\t\t__proto.getMemSize=function(){\r\n\t\t\treturn 0;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*设置宽高。\r\n\t\t*@param w 宽度。\r\n\t\t*@param h 高度。\r\n\t\t*/\r\n\t\t__proto.size=function(w,h){\r\n\t\t\tif (this._w !=w || this._h !=h){\r\n\t\t\t\tthis._w=w;\r\n\t\t\t\tthis._h=h;\r\n\t\t\t\tthis._ctx && this._ctx.size(w,h);\r\n\t\t\t\tthis._source && (this._source.height=h,this._source.width=w);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*是否当作 Bitmap 对象。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'asBitmap',null,function(value){\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*Canvas 渲染上下文。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'context',function(){\r\n\t\t\treturn this._ctx;\r\n\t\t});\r\n\r\n\t\tHTMLCanvas.create=function(type,canvas){\r\n\t\t\treturn new HTMLCanvas(type,canvas);\r\n\t\t}\r\n\r\n\t\tHTMLCanvas.TYPE2D=\"2D\";\r\n\t\tHTMLCanvas.TYPE3D=\"3D\";\r\n\t\tHTMLCanvas.TYPEAUTO=\"AUTO\";\r\n\t\tHTMLCanvas._createContext=null\r\n\t\treturn HTMLCanvas;\r\n\t})(Bitmap)\r\n\r\n\r\n\t//class laya.webgl.atlas.AtlasWebGLCanvas extends laya.resource.Bitmap\r\n\tvar AtlasWebGLCanvas=(function(_super){\r\n\t\tfunction AtlasWebGLCanvas(){\r\n\t\t\tthis._flashCacheImage=null;\r\n\t\t\tthis._flashCacheImageNeedFlush=false;\r\n\t\t\tAtlasWebGLCanvas.__super.call(this);\r\n\t\t}\r\n\r\n\t\t__class(AtlasWebGLCanvas,'laya.webgl.atlas.AtlasWebGLCanvas',_super);\r\n\t\tvar __proto=AtlasWebGLCanvas.prototype;\r\n\t\t/***重新创建资源*/\r\n\t\t__proto.recreateResource=function(){\r\n\t\t\tthis.startCreate();\r\n\t\t\tvar gl=WebGL.mainContext;\r\n\t\t\tvar glTex=this._source=gl.createTexture();\r\n\t\t\tvar preTarget=WebGLContext.curBindTexTarget;\r\n\t\t\tvar preTexture=WebGLContext.curBindTexValue;\r\n\t\t\tWebGLContext.bindTexture(gl,0x0DE1,glTex);\r\n\t\t\tgl.texImage2D(0x0DE1,0,0x1908,this._w,this._h,0,0x1908,0x1401,null);\r\n\t\t\tgl.texParameteri(0x0DE1,0x2801,0x2601);\r\n\t\t\tgl.texParameteri(0x0DE1,0x2800,0x2601);\r\n\t\t\tgl.texParameteri(0x0DE1,0x2802,0x812F);\r\n\t\t\tgl.texParameteri(0x0DE1,0x2803,0x812F);\r\n\t\t\t(preTarget && preTexture)&& (WebGLContext.bindTexture(gl,preTarget,preTexture));\r\n\t\t\tthis.memorySize=this._w *this._h *4;\r\n\t\t\tthis.completeCreate();\r\n\t\t}\r\n\r\n\t\t/***销毁资源*/\r\n\t\t__proto.detoryResource=function(){\r\n\t\t\tif (this._source){\r\n\t\t\t\tWebGL.mainContext.deleteTexture(this._source);\r\n\t\t\t\tthis._source=null;\r\n\t\t\t\tthis.memorySize=0;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**采样image到WebGLTexture的一部分*/\r\n\t\t__proto.texSubImage2D=function(xoffset,yoffset,bitmap){\r\n\t\t\tif (!Render.isFlash){\r\n\t\t\t\tvar gl=WebGL.mainContext;\r\n\t\t\t\tvar preTarget=WebGLContext.curBindTexTarget;\r\n\t\t\t\tvar preTexture=WebGLContext.curBindTexValue;\r\n\t\t\t\tWebGLContext.bindTexture(gl,0x0DE1,this._source);\r\n\t\t\t\t(xoffset-1 >=0)&& (gl.texSubImage2D(0x0DE1,0,xoffset-1,yoffset,0x1908,0x1401,bitmap));\r\n\t\t\t\t(xoffset+1 <=this._w)&& (gl.texSubImage2D(0x0DE1,0,xoffset+1,yoffset,0x1908,0x1401,bitmap));\r\n\t\t\t\t(yoffset-1 >=0)&& (gl.texSubImage2D(0x0DE1,0,xoffset,yoffset-1,0x1908,0x1401,bitmap));\r\n\t\t\t\t(yoffset+1 <=this._h)&& (gl.texSubImage2D(0x0DE1,0,xoffset,yoffset+1,0x1908,0x1401,bitmap));\r\n\t\t\t\tgl.texSubImage2D(0x0DE1,0,xoffset,yoffset,0x1908,0x1401,bitmap);\r\n\t\t\t\t(preTarget && preTexture)&& (WebGLContext.bindTexture(gl,preTarget,preTexture));\r\n\t\t\t\t}else {\r\n\t\t\t\tif (!this._flashCacheImage){\r\n\t\t\t\t\tthis._flashCacheImage=HTMLImage.create(null);\r\n\t\t\t\t\tthis._flashCacheImage.image.createCanvas(this._w,this._h);\r\n\t\t\t\t};\r\n\t\t\t\tvar bmData=bitmap.bitmapdata;\r\n\t\t\t\t(xoffset-1 >=0)&& (this._flashCacheImage.image.copyPixels(bmData,0,0,bmData.width-1,bmData.height,xoffset,yoffset));\r\n\t\t\t\t(xoffset+1 <=this._w)&& (this._flashCacheImage.image.copyPixels(bmData,0,0,bmData.width+1,bmData.height,xoffset,yoffset));\r\n\t\t\t\t(yoffset-1 >=0)&& (this._flashCacheImage.image.copyPixels(bmData,0,0,bmData.width,bmData.height-1,xoffset,yoffset));\r\n\t\t\t\t(yoffset+1 <=this._h)&& (this._flashCacheImage.image.copyPixels(bmData,0,0,bmData.width+1,bmData.height,xoffset,yoffset));\r\n\t\t\t\tthis._flashCacheImage.image.copyPixels(bmData,0,0,bmData.width,bmData.height,xoffset,yoffset);\r\n\t\t\t\t(this._flashCacheImageNeedFlush)|| (this._flashCacheImageNeedFlush=true);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**采样image到WebGLTexture的一部分*/\r\n\t\t__proto.texSubImage2DPixel=function(xoffset,yoffset,width,height,pixel){\r\n\t\t\tvar gl=WebGL.mainContext;\r\n\t\t\tvar preTarget=WebGLContext.curBindTexTarget;\r\n\t\t\tvar preTexture=WebGLContext.curBindTexValue;\r\n\t\t\tWebGLContext.bindTexture(gl,0x0DE1,this._source);\r\n\t\t\tvar pixels=new Uint8Array(pixel.data);\r\n\t\t\tgl.texSubImage2D(0x0DE1,0,xoffset,yoffset,width,height,0x1908,0x1401,pixels);\r\n\t\t\t(preTarget && preTexture)&& (WebGLContext.bindTexture(gl,preTarget,preTexture));\r\n\t\t}\r\n\r\n\t\t/***\r\n\t\t*设置图片高度\r\n\t\t*@param value 图片高度\r\n\t\t*/\r\n\t\t__getset(0,__proto,'height',_super.prototype._$get_height,function(value){\r\n\t\t\tthis._h=value;\r\n\t\t});\r\n\r\n\t\t/***\r\n\t\t*设置图片宽度\r\n\t\t*@param value 图片宽度\r\n\t\t*/\r\n\t\t__getset(0,__proto,'width',_super.prototype._$get_width,function(value){\r\n\t\t\tthis._w=value;\r\n\t\t});\r\n\r\n\t\treturn AtlasWebGLCanvas;\r\n\t})(Bitmap)\r\n\r\n\r\n\t//class laya.webgl.resource.WebGLCharImage extends laya.resource.Bitmap\r\n\tvar WebGLCharImage=(function(_super){\r\n\t\tfunction WebGLCharImage(canvas,char){\r\n\t\t\tthis.borderSize=12;\r\n\t\t\t//this._ctx=null;\r\n\t\t\t//this._allowMerageInAtlas=false;\r\n\t\t\t//this._enableMerageInAtlas=false;\r\n\t\t\t//this.canvas=null;\r\n\t\t\t//this.char=null;\r\n\t\t\tWebGLCharImage.__super.call(this);\r\n\t\t\tthis.canvas=canvas;\r\n\t\t\tthis.char=char;\r\n\t\t\tthis._enableMerageInAtlas=true;\r\n\t\t\tvar bIsConchApp=Render.isConchApp;\r\n\t\t\tif (bIsConchApp){\r\n\t\t\t\tthis._ctx=canvas;\r\n\t\t\t\t}else {\r\n\t\t\t\tthis._ctx=canvas.getContext('2d',undefined);\r\n\t\t\t};\r\n\t\t\tvar xs=char.xs,ys=char.ys;\r\n\t\t\tvar t=null;\r\n\t\t\tif (bIsConchApp){\r\n\t\t\t\tthis._ctx.font=char.font;\r\n\t\t\t\tt=this._ctx.measureText(char.char);\r\n\t\t\t\tchar.width=t.width *xs;\r\n\t\t\t\tchar.height=t.height *ys;\r\n\t\t\t\t}else {\r\n\t\t\t\tt=Utils1.measureText(char.char,char.font);\r\n\t\t\t\tchar.width=t.width *xs;\r\n\t\t\t\tchar.height=t.height *ys;\r\n\t\t\t}\r\n\t\t\tthis.onresize(char.width+this.borderSize *2,char.height+this.borderSize *2);\r\n\t\t}\r\n\r\n\t\t__class(WebGLCharImage,'laya.webgl.resource.WebGLCharImage',_super);\r\n\t\tvar __proto=WebGLCharImage.prototype;\r\n\t\tLaya.imps(__proto,{\"laya.webgl.resource.IMergeAtlasBitmap\":true})\r\n\t\t__proto.recreateResource=function(){\r\n\t\t\tthis.startCreate();\r\n\t\t\tvar char=this.char;\r\n\t\t\tvar bIsConchApp=Render.isConchApp;\r\n\t\t\tvar xs=char.xs,ys=char.ys;\r\n\t\t\tthis.onresize(char.width+this.borderSize *2,char.height+this.borderSize *2);\r\n\t\t\tthis.canvas && (this.canvas.height=this._h,this.canvas.width=this._w);\r\n\t\t\tif (bIsConchApp){\r\n\t\t\t\tvar nFontSize=char.fontSize;\r\n\t\t\t\tif (xs !=1 || ys !=1){\r\n\t\t\t\t\tnFontSize=parseInt(nFontSize *((xs > ys)? xs :ys)+\"\");\r\n\t\t\t\t};\r\n\t\t\t\tvar sFont=\"normal 100 \"+nFontSize+\"px Arial\";\r\n\t\t\t\tif (char.borderColor){\r\n\t\t\t\t\tsFont+=\" 1 \"+char.borderColor;\r\n\t\t\t\t}\r\n\t\t\t\tthis._ctx.font=sFont;\r\n\t\t\t\tthis._ctx.textBaseline=\"top\";\r\n\t\t\t\tthis._ctx.fillStyle=char.fillColor;\r\n\t\t\t\tthis._ctx.fillText(char.char,this.borderSize,this.borderSize,null,null,null);\r\n\t\t\t\t}else {\r\n\t\t\t\tthis._ctx.save();\r\n\t\t\t\t(this._ctx).clearRect(0,0,char.width+this.borderSize *2,char.height+this.borderSize *2);\r\n\t\t\t\tthis._ctx.font=char.font;\r\n\t\t\t\tthis._ctx.textBaseline=\"top\";\r\n\t\t\t\tthis._ctx.translate(this.borderSize,this.borderSize);\r\n\t\t\t\tif (xs !=1 || ys !=1){\r\n\t\t\t\t\tthis._ctx.scale(xs,ys);\r\n\t\t\t\t}\r\n\t\t\t\tif (char.fillColor && char.borderColor){\r\n\t\t\t\t\tthis._ctx.strokeStyle=char.borderColor;\r\n\t\t\t\t\tthis._ctx.lineWidth=char.lineWidth;\r\n\t\t\t\t\tthis._ctx.strokeText(char.char,0,0,null,null,0,null);\r\n\t\t\t\t\tthis._ctx.fillStyle=char.fillColor;\r\n\t\t\t\t\tthis._ctx.fillText(char.char,0,0,null,null,null);\r\n\t\t\t\t\t}else {\r\n\t\t\t\t\tif (char.lineWidth===-1){\r\n\t\t\t\t\t\tthis._ctx.fillStyle=char.fillColor ? char.fillColor :\"white\";\r\n\t\t\t\t\t\tthis._ctx.fillText(char.char,0,0,null,null,null);\r\n\t\t\t\t\t\t}else {\r\n\t\t\t\t\t\tthis._ctx.strokeStyle=char.borderColor?char.borderColor:'white';\r\n\t\t\t\t\t\tthis._ctx.lineWidth=char.lineWidth;\r\n\t\t\t\t\t\tthis._ctx.strokeText(char.char,0,0,null,null,0,null);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis._ctx.restore();\r\n\t\t\t}\r\n\t\t\tchar.borderSize=this.borderSize;\r\n\t\t\tthis.completeCreate();\r\n\t\t}\r\n\r\n\t\t__proto.onresize=function(w,h){\r\n\t\t\tthis._w=w;\r\n\t\t\tthis._h=h;\r\n\t\t\tif ((this._w < AtlasResourceManager.atlasLimitWidth && this._h < AtlasResourceManager.atlasLimitHeight)){\r\n\t\t\t\tthis._allowMerageInAtlas=true\r\n\t\t\t\t}else {\r\n\t\t\t\tthis._allowMerageInAtlas=false;\r\n\t\t\t\tthrow new Error(\"文字尺寸超出大图合集限制！\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__proto.clearAtlasSource=function(){}\r\n\t\t/**\r\n\t\t*是否创建私有Source,通常禁止修改\r\n\t\t*@param value 是否创建\r\n\t\t*/\r\n\t\t/**\r\n\t\t*是否创建私有Source\r\n\t\t*@return 是否创建\r\n\t\t*/\r\n\t\t__getset(0,__proto,'enableMerageInAtlas',function(){\r\n\t\t\treturn this._enableMerageInAtlas;\r\n\t\t\t},function(value){\r\n\t\t\tthis._enableMerageInAtlas=value;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*是否创建私有Source\r\n\t\t*@return 是否创建\r\n\t\t*/\r\n\t\t__getset(0,__proto,'allowMerageInAtlas',function(){\r\n\t\t\treturn this._allowMerageInAtlas;\r\n\t\t});\r\n\r\n\t\t__getset(0,__proto,'atlasSource',function(){\r\n\t\t\treturn this.canvas;\r\n\t\t});\r\n\r\n\t\treturn WebGLCharImage;\r\n\t})(Bitmap)\r\n\r\n\r\n\t//class laya.webgl.resource.WebGLRenderTarget extends laya.resource.Bitmap\r\n\tvar WebGLRenderTarget=(function(_super){\r\n\t\tfunction WebGLRenderTarget(width,height,surfaceFormat,surfaceType,depthStencilFormat,mipMap,repeat,minFifter,magFifter){\r\n\t\t\t//this._frameBuffer=null;\r\n\t\t\t//this._depthStencilBuffer=null;\r\n\t\t\t//this._surfaceFormat=0;\r\n\t\t\t//this._surfaceType=0;\r\n\t\t\t//this._depthStencilFormat=0;\r\n\t\t\t//this._mipMap=false;\r\n\t\t\t//this._repeat=false;\r\n\t\t\t//this._minFifter=0;\r\n\t\t\t//this._magFifter=0;\r\n\t\t\t(surfaceFormat===void 0)&& (surfaceFormat=0x1908);\r\n\t\t\t(surfaceType===void 0)&& (surfaceType=0x1401);\r\n\t\t\t(depthStencilFormat===void 0)&& (depthStencilFormat=0x84F9);\r\n\t\t\t(mipMap===void 0)&& (mipMap=false);\r\n\t\t\t(repeat===void 0)&& (repeat=false);\r\n\t\t\t(minFifter===void 0)&& (minFifter=-1);\r\n\t\t\t(magFifter===void 0)&& (magFifter=1);\r\n\t\t\tWebGLRenderTarget.__super.call(this);\r\n\t\t\tthis._w=width;\r\n\t\t\tthis._h=height;\r\n\t\t\tthis._surfaceFormat=surfaceFormat;\r\n\t\t\tthis._surfaceType=surfaceType;\r\n\t\t\tthis._depthStencilFormat=depthStencilFormat;\r\n\t\t\tthis._mipMap=mipMap;\r\n\t\t\tthis._repeat=repeat;\r\n\t\t\tthis._minFifter=minFifter;\r\n\t\t\tthis._magFifter=magFifter;\r\n\t\t}\r\n\r\n\t\t__class(WebGLRenderTarget,'laya.webgl.resource.WebGLRenderTarget',_super);\r\n\t\tvar __proto=WebGLRenderTarget.prototype;\r\n\t\t__proto.recreateResource=function(){\r\n\t\t\tthis.startCreate();\r\n\t\t\tvar gl=WebGL.mainContext;\r\n\t\t\tthis._frameBuffer || (this._frameBuffer=gl.createFramebuffer());\r\n\t\t\tthis._source || (this._source=gl.createTexture());\r\n\t\t\tvar preTarget=WebGLContext.curBindTexTarget;\r\n\t\t\tvar preTexture=WebGLContext.curBindTexValue;\r\n\t\t\tWebGLContext.bindTexture(gl,0x0DE1,this._source);\r\n\t\t\tgl.texImage2D(0x0DE1,0,0x1908,this._w,this._h,0,this._surfaceFormat,this._surfaceType,null);\r\n\t\t\tvar minFifter=this._minFifter;\r\n\t\t\tvar magFifter=this._magFifter;\r\n\t\t\tvar repeat=this._repeat ? 0x2901 :0x812F;\r\n\t\t\tvar isPot=Arith.isPOT(this._w,this._h);\r\n\t\t\tif (isPot){\r\n\t\t\t\tif (this._mipMap)\r\n\t\t\t\t\t(minFifter!==-1)|| (minFifter=0x2703);\r\n\t\t\t\telse\r\n\t\t\t\t(minFifter!==-1)|| (minFifter=0x2601);\r\n\t\t\t\t(magFifter!==-1)|| (magFifter=0x2601);\r\n\t\t\t\tgl.texParameteri(0x0DE1,0x2801,minFifter);\r\n\t\t\t\tgl.texParameteri(0x0DE1,0x2800,magFifter);\r\n\t\t\t\tgl.texParameteri(0x0DE1,0x2802,repeat);\r\n\t\t\t\tgl.texParameteri(0x0DE1,0x2803,repeat);\r\n\t\t\t\tthis._mipMap && gl.generateMipmap(0x0DE1);\r\n\t\t\t\t}else {\r\n\t\t\t\t(minFifter!==-1)|| (minFifter=0x2601);\r\n\t\t\t\t(magFifter!==-1)|| (magFifter=0x2601);\r\n\t\t\t\tgl.texParameteri(0x0DE1,0x2801,minFifter);\r\n\t\t\t\tgl.texParameteri(0x0DE1,0x2800,magFifter);\r\n\t\t\t\tgl.texParameteri(0x0DE1,0x2802,0x812F);\r\n\t\t\t\tgl.texParameteri(0x0DE1,0x2803,0x812F);\r\n\t\t\t}\r\n\t\t\tgl.bindFramebuffer(0x8D40,this._frameBuffer);\r\n\t\t\tgl.framebufferTexture2D(0x8D40,0x8CE0,0x0DE1,this._source,0);\r\n\t\t\tif (this._depthStencilFormat){\r\n\t\t\t\tthis._depthStencilBuffer || (this._depthStencilBuffer=gl.createRenderbuffer());\r\n\t\t\t\tgl.bindRenderbuffer(0x8D41,this._depthStencilBuffer);\r\n\t\t\t\tgl.renderbufferStorage(0x8D41,this._depthStencilFormat,this._w,this._h);\r\n\t\t\t\tswitch (this._depthStencilFormat){\r\n\t\t\t\t\tcase 0x81A5:\r\n\t\t\t\t\t\tgl.framebufferRenderbuffer(0x8D40,0x8D00,0x8D41,this._depthStencilBuffer);\r\n\t\t\t\t\t\tbreak ;\r\n\t\t\t\t\tcase 0x8D48:\r\n\t\t\t\t\t\tgl.framebufferRenderbuffer(0x8D40,0x8D20,0x8D41,this._depthStencilBuffer);\r\n\t\t\t\t\t\tbreak ;\r\n\t\t\t\t\tcase 0x84F9:\r\n\t\t\t\t\t\tgl.framebufferRenderbuffer(0x8D40,0x821A,0x8D41,this._depthStencilBuffer);\r\n\t\t\t\t\t\tbreak ;\r\n\t\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tgl.bindFramebuffer(0x8D40,null);\r\n\t\t\t(preTarget && preTexture)&& (WebGLContext.bindTexture(gl,preTarget,preTexture));\r\n\t\t\tgl.bindRenderbuffer(0x8D41,null);\r\n\t\t\tthis.memorySize=this._w *this._h *4;\r\n\t\t\tthis.completeCreate();\r\n\t\t}\r\n\r\n\t\t__proto.detoryResource=function(){\r\n\t\t\tif (this._frameBuffer){\r\n\t\t\t\tWebGL.mainContext.deleteTexture(this._source);\r\n\t\t\t\tWebGL.mainContext.deleteFramebuffer(this._frameBuffer);\r\n\t\t\t\tWebGL.mainContext.deleteRenderbuffer(this._depthStencilBuffer);\r\n\t\t\t\tthis._source=null;\r\n\t\t\t\tthis._frameBuffer=null;\r\n\t\t\t\tthis._depthStencilBuffer=null;\r\n\t\t\t\tthis.memorySize=0;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__getset(0,__proto,'depthStencilBuffer',function(){\r\n\t\t\treturn this._depthStencilBuffer;\r\n\t\t});\r\n\r\n\t\t__getset(0,__proto,'frameBuffer',function(){\r\n\t\t\treturn this._frameBuffer;\r\n\t\t});\r\n\r\n\t\treturn WebGLRenderTarget;\r\n\t})(Bitmap)\r\n\r\n\r\n\t//class laya.webgl.shader.d2.value.TextSV extends laya.webgl.shader.d2.value.TextureSV\r\n\tvar TextSV=(function(_super){\r\n\t\tfunction TextSV(args){\r\n\t\t\tTextSV.__super.call(this,0x40);\r\n\t\t\tthis.defines.add(0x40);\r\n\t\t}\r\n\r\n\t\t__class(TextSV,'laya.webgl.shader.d2.value.TextSV',_super);\r\n\t\tvar __proto=TextSV.prototype;\r\n\t\t__proto.release=function(){\r\n\t\t\tTextSV.pool[TextSV._length++]=this;\r\n\t\t\tthis.clear();\r\n\t\t}\r\n\r\n\t\t__proto.clear=function(){\r\n\t\t\t_super.prototype.clear.call(this);\r\n\t\t}\r\n\r\n\t\tTextSV.create=function(){\r\n\t\t\tif (TextSV._length)return TextSV.pool[--TextSV._length];\r\n\t\t\telse return new TextSV(null);\r\n\t\t}\r\n\r\n\t\tTextSV.pool=[];\r\n\t\tTextSV._length=0;\r\n\t\treturn TextSV;\r\n\t})(TextureSV)\r\n\r\n\r\n\t/**\r\n\t*<code>Box</code> 类是一个控件容器类。\r\n\t*/\r\n\t//class laya.ui.Box extends laya.ui.Component\r\n\tvar Box=(function(_super){\r\n\t\tfunction Box(){Box.__super.call(this);;\r\n\t\t};\r\n\r\n\t\t__class(Box,'laya.ui.Box',_super);\r\n\t\tvar __proto=Box.prototype;\r\n\t\tLaya.imps(__proto,{\"laya.ui.IBox\":true})\r\n\t\t/**@inheritDoc */\r\n\t\t__getset(0,__proto,'dataSource',_super.prototype._$get_dataSource,function(value){\r\n\t\t\tthis._dataSource=value;\r\n\t\t\tfor (var name in value){\r\n\t\t\t\tvar comp=this.getChildByName(name);\r\n\t\t\t\tif (comp)comp.dataSource=value[name];\r\n\t\t\t\telse if (this.hasOwnProperty(name))this[name]=value[name];\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn Box;\r\n\t})(Component)\r\n\r\n\r\n\t/**\r\n\t*<code>Button</code> 组件用来表示常用的多态按钮。 <code>Button</code> 组件可显示文本标签、图标或同时显示两者。 *\r\n\t*<p>可以是单态，两态和三态，默认三态(up,over,down)。</p>\r\n\t*\r\n\t*@example 以下示例代码，创建了一个 <code>Button</code> 实例。\r\n\t*<listing version=\"3.0\">\r\n\t*package\r\n\t*{\r\n\t\t*import laya.ui.Button;\r\n\t\t*import laya.utils.Handler;\r\n\t\t*public class Button_Example\r\n\t\t*{\r\n\t\t\t*public function Button_Example()\r\n\t\t\t*{\r\n\t\t\t\t*Laya.init(640,800);//设置游戏画布宽高。\r\n\t\t\t\t*Laya.stage.bgColor=\"#efefef\";//设置画布的背景颜色。\r\n\t\t\t\t*Laya.loader.load(\"resource/ui/button.png\",Handler.create(this,onLoadComplete));//加载资源。\r\n\t\t\t\t*}\r\n\t\t\t*private function onLoadComplete():void\r\n\t\t\t*{\r\n\t\t\t\t*trace(\"资源加载完成！\");\r\n\t\t\t\t*var button:Button=new Button(\"resource/ui/button.png\",\"label\");//创建一个 Button 类的实例对象 button ,并传入它的皮肤。\r\n\t\t\t\t*button.x=100;//设置 button 对象的属性 x 的值，用于控制 button 对象的显示位置。\r\n\t\t\t\t*button.y=100;//设置 button 对象的属性 y 的值，用于控制 button 对象的显示位置。\r\n\t\t\t\t*button.clickHandler=new Handler(this,onClickButton,[button]);//设置 button 的点击事件处理器。\r\n\t\t\t\t*Laya.stage.addChild(button);//将此 button 对象添加到显示列表。\r\n\t\t\t\t*}\r\n\t\t\t*private function onClickButton(button:Button):void\r\n\t\t\t*{\r\n\t\t\t\t*trace(\"按钮button被点击了！\");\r\n\t\t\t\t*}\r\n\t\t\t*}\r\n\t\t*}\r\n\t*</listing>\r\n\t*<listing version=\"3.0\">\r\n\t*Laya.init(640,800);//设置游戏画布宽高、渲染模式。\r\n\t*Laya.stage.bgColor=\"#efefef\";//设置画布的背景颜色。\r\n\t*Laya.loader.load(\"resource/ui/button.png\",laya.utils.Handler.create(this,loadComplete));//加载资源\r\n\t*function loadComplete()\r\n\t*{\r\n\t\t*console.log(\"资源加载完成！\");\r\n\t\t*var button=new laya.ui.Button(\"resource/ui/button.png\",\"label\");//创建一个 Button 类的实例对象 button ,传入它的皮肤skin和标签label。\r\n\t\t*button.x=100;//设置 button 对象的属性 x 的值，用于控制 button 对象的显示位置。\r\n\t\t*button.y=100;//设置 button 对象的属性 y 的值，用于控制 button 对象的显示位置。\r\n\t\t*button.clickHandler=laya.utils.Handler.create(this,onClickButton,[button],false);//设置 button 的点击事件处理函数。\r\n\t\t*Laya.stage.addChild(button);//将此 button 对象添加到显示列表。\r\n\t\t*}\r\n\t*function onClickButton(button)\r\n\t*{\r\n\t\t*console.log(\"按钮被点击了。\",button);\r\n\t\t*}\r\n\t*</listing>\r\n\t*<listing version=\"3.0\">\r\n\t*import Button=laya.ui.Button;\r\n\t*import Handler=laya.utils.Handler;\r\n\t*class Button_Example{\r\n\t\t*constructor()\r\n\t\t*{\r\n\t\t\t*Laya.init(640,800);\r\n\t\t\t*Laya.stage.bgColor=\"#efefef\";//设置画布的背景颜色。\r\n\t\t\t*Laya.loader.load(\"resource/ui/button.png\",laya.utils.Handler.create(this,this.onLoadComplete));//加载资源。\r\n\t\t\t*}\r\n\t\t*private onLoadComplete()\r\n\t\t*{\r\n\t\t\t*var button:Button=new Button(\"resource/ui/button.png\",\"label\");//创建一个 Button 类的实例对象 button ,并传入它的皮肤。\r\n\t\t\t*button.x=100;//设置 button 对象的属性 x 的值，用于控制 button 对象的显示位置。\r\n\t\t\t*button.y=100;//设置 button 对象的属性 y 的值，用于控制 button 对象的显示位置。\r\n\t\t\t*button.clickHandler=new Handler(this,this.onClickButton,[button]);//设置 button 的点击事件处理器。\r\n\t\t\t*Laya.stage.addChild(button);//将此 button 对象添加到显示列表。\r\n\t\t\t*}\r\n\t\t*private onClickButton(button:Button):void\r\n\t\t*{\r\n\t\t\t*console.log(\"按钮button被点击了！\")\r\n\t\t\t*}\r\n\t\t*}\r\n\t*</listing>\r\n\t*/\r\n\t//class laya.ui.Button extends laya.ui.Component\r\n\tvar Button=(function(_super){\r\n\t\tfunction Button(skin,label){\r\n\t\t\tthis.toggle=false;\r\n\t\t\tthis._bitmap=null;\r\n\t\t\tthis._text=null;\r\n\t\t\tthis._strokeColors=null;\r\n\t\t\tthis._state=0;\r\n\t\t\tthis._selected=false;\r\n\t\t\tthis._skin=null;\r\n\t\t\tthis._autoSize=true;\r\n\t\t\tthis._sources=null;\r\n\t\t\tthis._clickHandler=null;\r\n\t\t\tthis._stateChanged=false;\r\n\t\t\tButton.__super.call(this);\r\n\t\t\tthis._labelColors=Styles.buttonLabelColors;\r\n\t\t\tthis._stateNum=Styles.buttonStateNum;\r\n\t\t\t(label===void 0)&& (label=\"\");\r\n\t\t\tthis.skin=skin;\r\n\t\t\tthis.label=label;\r\n\t\t}\r\n\r\n\t\t__class(Button,'laya.ui.Button',_super);\r\n\t\tvar __proto=Button.prototype;\r\n\t\tLaya.imps(__proto,{\"laya.ui.ISelect\":true})\r\n\t\t/**@inheritDoc */\r\n\t\t__proto.destroy=function(destroyChild){\r\n\t\t\t(destroyChild===void 0)&& (destroyChild=true);\r\n\t\t\t_super.prototype.destroy.call(this,destroyChild);\r\n\t\t\tthis._bitmap && this._bitmap.destroy();\r\n\t\t\tthis._text && this._text.destroy(destroyChild);\r\n\t\t\tthis._bitmap=null;\r\n\t\t\tthis._text=null;\r\n\t\t\tthis._clickHandler=null;\r\n\t\t\tthis._labelColors=this._sources=this._strokeColors=null;\r\n\t\t}\r\n\r\n\t\t/**@inheritDoc */\r\n\t\t__proto.createChildren=function(){\r\n\t\t\tthis.graphics=this._bitmap=new AutoBitmap();\r\n\t\t}\r\n\r\n\t\t/**@private */\r\n\t\t__proto.createText=function(){\r\n\t\t\tif (!this._text){\r\n\t\t\t\tthis._text=new Text();\r\n\t\t\t\tthis._text.overflow=Text.HIDDEN;\r\n\t\t\t\tthis._text.align=\"center\";\r\n\t\t\t\tthis._text.valign=\"middle\";\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**@inheritDoc */\r\n\t\t__proto.initialize=function(){\r\n\t\t\tthis.on(\"mouseover\",this,this.onMouse);\r\n\t\t\tthis.on(\"mouseout\",this,this.onMouse);\r\n\t\t\tthis.on(\"mousedown\",this,this.onMouse);\r\n\t\t\tthis.on(\"mouseup\",this,this.onMouse);\r\n\t\t\tthis.on(\"click\",this,this.onMouse);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*对象的 <code>Event.MOUSE_OVER、Event.MOUSE_OUT、Event.MOUSE_DOWN、Event.MOUSE_UP、Event.CLICK</code> 事件侦听处理函数。\r\n\t\t*@param e Event 对象。\r\n\t\t*/\r\n\t\t__proto.onMouse=function(e){\r\n\t\t\tif (this.toggle===false && this._selected)return;\r\n\t\t\tif (e.type===\"click\"){\r\n\t\t\t\tthis.toggle && (this.selected=!this._selected);\r\n\t\t\t\tthis._clickHandler && this._clickHandler.run();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t!this._selected && (this.state=Button.stateMap[e.type]);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*对象的资源切片发生改变。\r\n\t\t*/\r\n\t\t__proto.changeClips=function(){\r\n\t\t\tvar img=Loader.getRes(this._skin);\r\n\t\t\tif (!img){\r\n\t\t\t\tconsole.log(\"lose skin\",this._skin);\r\n\t\t\t\treturn;\r\n\t\t\t};\r\n\t\t\tvar width=img.sourceWidth;\r\n\t\t\tvar height=img.sourceHeight / this._stateNum;\r\n\t\t\tvar key=this._skin+this._stateNum;\r\n\t\t\tvar clips=AutoBitmap.getCache(key);\r\n\t\t\tif (clips)this._sources=clips;\r\n\t\t\telse {\r\n\t\t\t\tthis._sources=[];\r\n\t\t\t\tif (this._stateNum===1){\r\n\t\t\t\t\tthis._sources.push(img);\r\n\t\t\t\t\t}else {\r\n\t\t\t\t\tfor (var i=0;i < this._stateNum;i++){\r\n\t\t\t\t\t\tthis._sources.push(Texture.createFromTexture(img,0,height *i,width,height));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tAutoBitmap.setCache(key,this._sources);\r\n\t\t\t}\r\n\t\t\tif (this._autoSize){\r\n\t\t\t\tthis._bitmap.width=this._width || width;\r\n\t\t\t\tthis._bitmap.height=this._height || height;\r\n\t\t\t\tif (this._text){\r\n\t\t\t\t\tthis._text.width=this._bitmap.width;\r\n\t\t\t\t\tthis._text.height=this._bitmap.height;\r\n\t\t\t\t}\r\n\t\t\t\t}else {\r\n\t\t\t\tthis._text && (this._text.x=width);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*改变对象的状态。\r\n\t\t*/\r\n\t\t__proto.changeState=function(){\r\n\t\t\tthis._stateChanged=false;\r\n\t\t\tthis.runCallLater(this.changeClips);\r\n\t\t\tvar index=this._state < this._stateNum ? this._state :this._stateNum-1;\r\n\t\t\tthis._sources && (this._bitmap.source=this._sources[index]);\r\n\t\t\tif (this.label){\r\n\t\t\t\tthis._text.color=this._labelColors[index];\r\n\t\t\t\tif (this._strokeColors)this._text.strokeColor=this._strokeColors[index];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**@private */\r\n\t\t__proto._setStateChanged=function(){\r\n\t\t\tif (!this._stateChanged){\r\n\t\t\t\tthis._stateChanged=true;\r\n\t\t\t\tthis.callLater(this.changeState);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**@inheritDoc */\r\n\t\t__getset(0,__proto,'dataSource',_super.prototype._$get_dataSource,function(value){\r\n\t\t\tthis._dataSource=value;\r\n\t\t\tif ((typeof value=='number')|| (typeof value=='string'))this.label=value+\"\";\r\n\t\t\telse _super.prototype._$set_dataSource.call(this,value);\r\n\t\t});\r\n\r\n\t\t/**@inheritDoc */\r\n\t\t__getset(0,__proto,'width',_super.prototype._$get_width,function(value){\r\n\t\t\t_super.prototype._$set_width.call(this,value);\r\n\t\t\tif (this._autoSize){\r\n\t\t\t\tthis._bitmap.width=value;\r\n\t\t\t\tthis._text && (this._text.width=value);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*表示按钮文本标签是否为粗体字。\r\n\t\t*@see laya.display.Text.bold()\r\n\t\t*/\r\n\t\t__getset(0,__proto,'labelBold',function(){\r\n\t\t\tthis.createText();\r\n\t\t\treturn this._text.bold;\r\n\t\t\t},function(value){\r\n\t\t\tthis.createText();\r\n\t\t\tthis._text.bold=value;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*<p>描边颜色，以字符串表示。</p>\r\n\t\t*默认值为 \"#000000\"（黑色）;\r\n\t\t*@see laya.display.Text.strokeColor()\r\n\t\t*/\r\n\t\t__getset(0,__proto,'labelStrokeColor',function(){\r\n\t\t\tthis.createText();\r\n\t\t\treturn this._text.strokeColor;\r\n\t\t\t},function(value){\r\n\t\t\tthis.createText();\r\n\t\t\tthis._text.strokeColor=value\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*对象的点击事件处理器函数（无默认参数）。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'clickHandler',function(){\r\n\t\t\treturn this._clickHandler;\r\n\t\t\t},function(value){\r\n\t\t\tthis._clickHandler=value;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*<p>描边宽度（以像素为单位）。</p>\r\n\t\t*默认值0，表示不描边。\r\n\t\t*@see laya.display.Text.stroke()\r\n\t\t*/\r\n\t\t__getset(0,__proto,'labelStroke',function(){\r\n\t\t\tthis.createText();\r\n\t\t\treturn this._text.stroke;\r\n\t\t\t},function(value){\r\n\t\t\tthis.createText();\r\n\t\t\tthis._text.stroke=value\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*@inheritDoc\r\n\t\t*/\r\n\t\t__getset(0,__proto,'measureWidth',function(){\r\n\t\t\tthis.runCallLater(this.changeClips);\r\n\t\t\tif (this._autoSize)return this._bitmap.width;\r\n\t\t\tthis.runCallLater(this.changeState);\r\n\t\t\treturn this._bitmap.width+(this._text ? this._text.width :0);\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*表示按钮文本标签的边距。\r\n\t\t*<p><b>格式：</b>\"上边距,右边距,下边距,左边距\"。</p>\r\n\t\t*/\r\n\t\t__getset(0,__proto,'labelPadding',function(){\r\n\t\t\tthis.createText();\r\n\t\t\treturn this._text.padding.join(\",\");\r\n\t\t\t},function(value){\r\n\t\t\tthis.createText();\r\n\t\t\tthis._text.padding=UIUtils.fillArray(Styles.labelPadding,value,Number);\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*表示按钮的选中状态。\r\n\t\t*<p>如果值为true，表示该对象处于选中状态。否则该对象处于未选中状态。</p>\r\n\t\t*/\r\n\t\t__getset(0,__proto,'selected',function(){\r\n\t\t\treturn this._selected;\r\n\t\t\t},function(value){\r\n\t\t\tif (this._selected !=value){\r\n\t\t\t\tthis._selected=value;\r\n\t\t\t\tthis.state=this._selected ? 2 :0;\r\n\t\t\t\tthis.event(\"change\");\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t/**图标x,y偏移，格式：100,100*/\r\n\t\t__getset(0,__proto,'iconOffset',function(){\r\n\t\t\treturn this._bitmap._offset ? null :this._bitmap._offset.join(\",\");\r\n\t\t\t},function(value){\r\n\t\t\tif (value)this._bitmap._offset=UIUtils.fillArray([1,1],value,Number);\r\n\t\t\telse this._bitmap._offset=[];\r\n\t\t});\r\n\r\n\t\t/**@inheritDoc */\r\n\t\t__getset(0,__proto,'height',_super.prototype._$get_height,function(value){\r\n\t\t\t_super.prototype._$set_height.call(this,value);\r\n\t\t\tif (this._autoSize){\r\n\t\t\t\tthis._bitmap.height=value;\r\n\t\t\t\tthis._text && (this._text.height=value);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*按钮文本标签 <code>Text</code> 控件。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'text',function(){\r\n\t\t\tthis.createText();\r\n\t\t\treturn this._text;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*表示按钮各个状态下的描边颜色。\r\n\t\t*<p><b>格式:</b> \"upColor,overColor,downColor,disableColor\"。</p>\r\n\t\t*/\r\n\t\t__getset(0,__proto,'strokeColors',function(){\r\n\t\t\treturn this._strokeColors ? this._strokeColors.join(\",\"):\"\";\r\n\t\t\t},function(value){\r\n\t\t\tthis._strokeColors=UIUtils.fillArray(Styles.buttonLabelColors,value,String);\r\n\t\t\tthis._setStateChanged();\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*表示按钮各个状态下的文本颜色。\r\n\t\t*<p><b>格式:</b> \"upColor,overColor,downColor,disableColor\"。</p>\r\n\t\t*/\r\n\t\t__getset(0,__proto,'labelColors',function(){\r\n\t\t\treturn this._labelColors.join(\",\");\r\n\t\t\t},function(value){\r\n\t\t\tthis._labelColors=UIUtils.fillArray(Styles.buttonLabelColors,value,String);\r\n\t\t\tthis._setStateChanged();\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*按钮的文本内容。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'label',function(){\r\n\t\t\treturn this._text ? this._text.text :null;\r\n\t\t\t},function(value){\r\n\t\t\tif (!this._text && !value)return;\r\n\t\t\tthis.createText();\r\n\t\t\tif (this._text.text !=value){\r\n\t\t\t\tvalue && !this._text.displayedInStage && this.addChild(this._text);\r\n\t\t\t\tthis._text.text=(value+\"\").replace(/\\\\n/g,\"\\n\");\r\n\t\t\t\tthis._setStateChanged();\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*<p>当前实例的位图 <code>AutoImage</code> 实例的有效缩放网格数据。</p>\r\n\t\t*<p>数据格式：\"上边距,右边距,下边距,左边距,是否重复填充(值为0：不重复填充，1：重复填充)\"，以逗号分隔。\r\n\t\t*<ul><li>例如：\"4,4,4,4,1\"</li></ul></p>\r\n\t\t*@see laya.ui.AutoBitmap.sizeGrid\r\n\t\t*/\r\n\t\t__getset(0,__proto,'sizeGrid',function(){\r\n\t\t\tif (this._bitmap.sizeGrid)return this._bitmap.sizeGrid.join(\",\");\r\n\t\t\treturn null;\r\n\t\t\t},function(value){\r\n\t\t\tthis._bitmap.sizeGrid=UIUtils.fillArray(Styles.defaultSizeGrid,value,Number);\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*对象的状态值。\r\n\t\t*@see #stateMap\r\n\t\t*/\r\n\t\t__getset(0,__proto,'state',function(){\r\n\t\t\treturn this._state;\r\n\t\t\t},function(value){\r\n\t\t\tif (this._state !=value){\r\n\t\t\t\tthis._state=value;\r\n\t\t\t\tthis._setStateChanged();\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t/**标签对齐模式，默认为居中对齐。*/\r\n\t\t__getset(0,__proto,'labelAlign',function(){\r\n\t\t\tthis.createText()\r\n\t\t\treturn this._text.align;\r\n\t\t\t},function(value){\r\n\t\t\tthis.createText()\r\n\t\t\tthis._text.align=value;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*@inheritDoc\r\n\t\t*/\r\n\t\t__getset(0,__proto,'measureHeight',function(){\r\n\t\t\tthis.runCallLater(this.changeClips);\r\n\t\t\treturn this._text ? Math.max(this._bitmap.height,this._text.height):this._bitmap.height;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*表示按钮文本标签的字体大小。\r\n\t\t*@see laya.display.Text.fontSize()\r\n\t\t*/\r\n\t\t__getset(0,__proto,'labelSize',function(){\r\n\t\t\tthis.createText();\r\n\t\t\treturn this._text.fontSize;\r\n\t\t\t},function(value){\r\n\t\t\tthis.createText();\r\n\t\t\tthis._text.fontSize=value\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*表示按钮文本标签的字体名称，以字符串形式表示。\r\n\t\t*@see laya.display.Text.font()\r\n\t\t*/\r\n\t\t__getset(0,__proto,'labelFont',function(){\r\n\t\t\tthis.createText();\r\n\t\t\treturn this._text.font;\r\n\t\t\t},function(value){\r\n\t\t\tthis.createText();\r\n\t\t\tthis._text.font=value;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*<p>指定对象的状态值，以数字表示。</p>\r\n\t\t*<p>默认值为3。此值决定皮肤资源图片的切割方式。</p>\r\n\t\t*<p><b>取值：</b>\r\n\t\t*<li>1：单态。图片不做切割，按钮的皮肤状态只有一种。</li>\r\n\t\t*<li>2：两态。图片将以竖直方向被等比切割为2部分，从上向下，依次为\r\n\t\t*弹起状态皮肤、\r\n\t\t*按下和经过及选中状态皮肤。</li>\r\n\t\t*<li>3：三态。图片将以竖直方向被等比切割为2部分，从上向下，依次为\r\n\t\t*弹起状态皮肤、\r\n\t\t*经过状态皮肤、\r\n\t\t*按下和选中状态皮肤</li>\r\n\t\t*</p>\r\n\t\t*/\r\n\t\t__getset(0,__proto,'stateNum',function(){\r\n\t\t\treturn this._stateNum;\r\n\t\t\t},function(value){\r\n\t\t\tif (this._stateNum !=value){\r\n\t\t\t\tthis._stateNum=value < 1 ? 1 :value > 3 ? 3 :value;\r\n\t\t\t\tthis.callLater(this.changeClips);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*<p>对象的皮肤资源地址。</p>\r\n\t\t*支持单态，两态和三态，用 <code>stateNum</code> 属性设置\r\n\t\t*<p>对象的皮肤地址，以字符串表示。</p>\r\n\t\t*@see #stateNum\r\n\t\t*/\r\n\t\t__getset(0,__proto,'skin',function(){\r\n\t\t\treturn this._skin;\r\n\t\t\t},function(value){\r\n\t\t\tif (this._skin !=value){\r\n\t\t\t\tthis._skin=value;\r\n\t\t\t\tthis.callLater(this.changeClips);\r\n\t\t\t\tthis._setStateChanged();\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t__static(Button,\r\n\t\t['stateMap',function(){return this.stateMap={\"mouseup\":0,\"mouseover\":1,\"mousedown\":2,\"mouseout\":0};}\r\n\t\t]);\r\n\t\treturn Button;\r\n\t})(Component)\r\n\r\n\r\n\t/**\r\n\t*<p> <code>Clip</code> 类是位图切片动画。</p>\r\n\t*<p> <code>Clip</code> 可将一张图片，按横向分割数量 <code>clipX</code> 、竖向分割数量 <code>clipY</code> ，\r\n\t*或横向分割每个切片的宽度 <code>clipWidth</code> 、竖向分割每个切片的高度 <code>clipHeight</code> ，\r\n\t*从左向右，从上到下，分割组合为一个切片动画。</p>\r\n\t*\r\n\t*@example 以下示例代码，创建了一个 <code>Clip</code> 实例。\r\n\t*<listing version=\"3.0\">\r\n\t*package\r\n\t*{\r\n\t\t*import laya.ui.Clip;\r\n\t\t*public class Clip_Example\r\n\t\t*{\r\n\t\t\t*private var clip:Clip;\r\n\t\t\t*public function Clip_Example()\r\n\t\t\t*{\r\n\t\t\t\t*Laya.init(640,800);//设置游戏画布宽高。\r\n\t\t\t\t*Laya.stage.bgColor=\"#efefef\";//设置画布的背景颜色。\r\n\t\t\t\t*onInit();\r\n\t\t\t\t*}\r\n\t\t\t*private function onInit():void\r\n\t\t\t*{\r\n\t\t\t\t*clip=new Clip(\"resource/ui/clip_num.png\",10,1);//创建一个 Clip 类的实例对象 clip ,传入它的皮肤skin和横向分割数量、竖向分割数量。\r\n\t\t\t\t*clip.autoPlay=true;//设置 clip 动画自动播放。\r\n\t\t\t\t*clip.interval=100;//设置 clip 动画的播放时间间隔。\r\n\t\t\t\t*clip.x=100;//设置 clip 对象的属性 x 的值，用于控制 clip 对象的显示位置。\r\n\t\t\t\t*clip.y=100;//设置 clip 对象的属性 y 的值，用于控制 clip 对象的显示位置。\r\n\t\t\t\t*clip.on(Event.CLICK,this,onClick);//给 clip 添加点击事件函数侦听。\r\n\t\t\t\t*Laya.stage.addChild(clip);//将此 clip 对象添加到显示列表。\r\n\t\t\t\t*}\r\n\t\t\t*private function onClick():void\r\n\t\t\t*{\r\n\t\t\t\t*trace(\"clip 的点击事件侦听处理函数。clip.total=\"+clip.total);\r\n\t\t\t\t*if (clip.isPlaying==true)\r\n\t\t\t\t*{\r\n\t\t\t\t\t*clip.stop();//停止动画。\r\n\t\t\t\t\t*}else {\r\n\t\t\t\t\t*clip.play();//播放动画。\r\n\t\t\t\t\t*}\r\n\t\t\t\t*}\r\n\t\t\t*}\r\n\t\t*}\r\n\t*</listing>\r\n\t*<listing version=\"3.0\">\r\n\t*Laya.init(640,800);//设置游戏画布宽高\r\n\t*Laya.stage.bgColor=\"#efefef\";//设置画布的背景颜色\r\n\t*var clip;\r\n\t*Laya.loader.load(\"resource/ui/clip_num.png\",laya.utils.Handler.create(this,loadComplete));//加载资源\r\n\t*function loadComplete(){\r\n\t\t*console.log(\"资源加载完成！\");\r\n\t\t*clip=new laya.ui.Clip(\"resource/ui/clip_num.png\",10,1);//创建一个 Clip 类的实例对象 clip ,传入它的皮肤skin和横向分割数量、竖向分割数量。\r\n\t\t*clip.autoPlay=true;//设置 clip 动画自动播放。\r\n\t\t*clip.interval=100;//设置 clip 动画的播放时间间隔。\r\n\t\t*clip.x=100;//设置 clip 对象的属性 x 的值，用于控制 clip 对象的显示位置。\r\n\t\t*clip.y=100;//设置 clip 对象的属性 y 的值，用于控制 clip 对象的显示位置。\r\n\t\t*clip.on(Event.CLICK,this,onClick);//给 clip 添加点击事件函数侦听。\r\n\t\t*Laya.stage.addChild(clip);//将此 clip 对象添加到显示列表。\r\n\t\t*}\r\n\t*function onClick()\r\n\t*{\r\n\t\t*console.log(\"clip 的点击事件侦听处理函数。\");\r\n\t\t*if(clip.isPlaying==true)\r\n\t\t*{\r\n\t\t\t*clip.stop();\r\n\t\t\t*}else {\r\n\t\t\t*clip.play();\r\n\t\t\t*}\r\n\t\t*}\r\n\t*</listing>\r\n\t*<listing version=\"3.0\">\r\n\t*import Clip=laya.ui.Clip;\r\n\t*import Handler=laya.utils.Handler;\r\n\t*class Clip_Example {\r\n\t\t*private clip:Clip;\r\n\t\t*constructor(){\r\n\t\t\t*Laya.init(640,800);//设置游戏画布宽高。\r\n\t\t\t*Laya.stage.bgColor=\"#efefef\";//设置画布的背景颜色。\r\n\t\t\t*this.onInit();\r\n\t\t\t*}\r\n\t\t*private onInit():void {\r\n\t\t\t*this.clip=new Clip(\"resource/ui/clip_num.png\",10,1);//创建一个 Clip 类的实例对象 clip ,传入它的皮肤skin和横向分割数量、竖向分割数量。\r\n\t\t\t*this.clip.autoPlay=true;//设置 clip 动画自动播放。\r\n\t\t\t*this.clip.interval=100;//设置 clip 动画的播放时间间隔。\r\n\t\t\t*this.clip.x=100;//设置 clip 对象的属性 x 的值，用于控制 clip 对象的显示位置。\r\n\t\t\t*this.clip.y=100;//设置 clip 对象的属性 y 的值，用于控制 clip 对象的显示位置。\r\n\t\t\t*this.clip.on(laya.events.Event.CLICK,this,this.onClick);//给 clip 添加点击事件函数侦听。\r\n\t\t\t*Laya.stage.addChild(this.clip);//将此 clip 对象添加到显示列表。\r\n\t\t\t*}\r\n\t\t*private onClick():void {\r\n\t\t\t*console.log(\"clip 的点击事件侦听处理函数。clip.total=\"+this.clip.total);\r\n\t\t\t*if (this.clip.isPlaying==true){\r\n\t\t\t\t*this.clip.stop();//停止动画。\r\n\t\t\t\t*}else {\r\n\t\t\t\t*this.clip.play();//播放动画。\r\n\t\t\t\t*}\r\n\t\t\t*}\r\n\t\t*}\r\n\t*\r\n\t*</listing>\r\n\t*/\r\n\t//class laya.ui.Clip extends laya.ui.Component\r\n\tvar Clip=(function(_super){\r\n\t\tfunction Clip(url,clipX,clipY){\r\n\t\t\tthis._sources=null;\r\n\t\t\tthis._bitmap=null;\r\n\t\t\tthis._skin=null;\r\n\t\t\tthis._clipX=1;\r\n\t\t\tthis._clipY=1;\r\n\t\t\tthis._clipWidth=0;\r\n\t\t\tthis._clipHeight=0;\r\n\t\t\tthis._autoPlay=false;\r\n\t\t\tthis._interval=50;\r\n\t\t\tthis._complete=null;\r\n\t\t\tthis._isPlaying=false;\r\n\t\t\tthis._index=0;\r\n\t\t\tthis._clipChanged=false;\r\n\t\t\tthis._group=null;\r\n\t\t\tClip.__super.call(this);\r\n\t\t\t(clipX===void 0)&& (clipX=1);\r\n\t\t\t(clipY===void 0)&& (clipY=1);\r\n\t\t\tthis._clipX=clipX;\r\n\t\t\tthis._clipY=clipY;\r\n\t\t\tthis.skin=url;\r\n\t\t}\r\n\r\n\t\t__class(Clip,'laya.ui.Clip',_super);\r\n\t\tvar __proto=Clip.prototype;\r\n\t\t/**@inheritDoc */\r\n\t\t__proto.destroy=function(clearFromCache){\r\n\t\t\t(clearFromCache===void 0)&& (clearFromCache=false);\r\n\t\t\t_super.prototype.destroy.call(this,true);\r\n\t\t\tthis._bitmap && this._bitmap.destroy();\r\n\t\t\tthis._bitmap=null;\r\n\t\t\tthis._sources=null;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*销毁对象并释放加载的皮肤资源。\r\n\t\t*/\r\n\t\t__proto.dispose=function(){\r\n\t\t\tthis.destroy(true);\r\n\t\t\tLaya.loader.clearRes(this._skin);\r\n\t\t}\r\n\r\n\t\t/**@inheritDoc */\r\n\t\t__proto.createChildren=function(){\r\n\t\t\tthis.graphics=this._bitmap=new AutoBitmap();\r\n\t\t}\r\n\r\n\t\t/**@inheritDoc */\r\n\t\t__proto.initialize=function(){\r\n\t\t\tthis.on(\"display\",this,this._onDisplay);\r\n\t\t\tthis.on(\"undisplay\",this,this._onDisplay);\r\n\t\t}\r\n\r\n\t\t/**@private */\r\n\t\t__proto._onDisplay=function(e){\r\n\t\t\tif (this._isPlaying){\r\n\t\t\t\tif (this._displayedInStage)this.play();\r\n\t\t\t\telse this.stop();\r\n\t\t\t\t}else if (this._autoPlay && this._displayedInStage){\r\n\t\t\t\tthis.play();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*改变切片的资源、切片的大小。\r\n\t\t*/\r\n\t\t__proto.changeClip=function(){\r\n\t\t\tthis._clipChanged=false;\r\n\t\t\tif (!this._skin)return;\r\n\t\t\tvar img=Loader.getRes(this._skin);\r\n\t\t\tif (img){\r\n\t\t\t\tthis.loadComplete(this._skin,img);\r\n\t\t\t\t}else {\r\n\t\t\t\tLaya.loader.load(this._skin,Handler.create(this,this.loadComplete,[this._skin]));\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*加载切片图片资源完成函数。\r\n\t\t*@param url 资源地址。\r\n\t\t*@param img 纹理。\r\n\t\t*/\r\n\t\t__proto.loadComplete=function(url,img){\r\n\t\t\tif (url===this._skin && img){\r\n\t\t\t\tthis._clipWidth || (this._clipWidth=Math.ceil(img.sourceWidth / this._clipX));\r\n\t\t\t\tthis._clipHeight || (this._clipHeight=Math.ceil(img.sourceHeight / this._clipY));\r\n\t\t\t\tvar key=this._skin+this._clipWidth+this._clipHeight;\r\n\t\t\t\tvar clips=AutoBitmap.getCache(key);\r\n\t\t\t\tif (clips)this._sources=clips;\r\n\t\t\t\telse {\r\n\t\t\t\t\tthis._sources=[];\r\n\t\t\t\t\tfor (var i=0;i < this._clipY;i++){\r\n\t\t\t\t\t\tfor (var j=0;j < this._clipX;j++){\r\n\t\t\t\t\t\t\tthis._sources.push(Texture.createFromTexture(img,this._clipWidth *j,this._clipHeight *i,this._clipWidth,this._clipHeight));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tAutoBitmap.setCache(key,this._sources);\r\n\t\t\t\t}\r\n\t\t\t\tthis.index=this._index;\r\n\t\t\t\tthis.event(\"loaded\");\r\n\t\t\t\tthis.onCompResize();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*播放动画。\r\n\t\t*/\r\n\t\t__proto.play=function(){\r\n\t\t\tthis._isPlaying=true;\r\n\t\t\tthis.index=0;\r\n\t\t\tthis._index++;\r\n\t\t\tLaya.timer.loop(this.interval,this,this._loop);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*/\r\n\t\t__proto._loop=function(){\r\n\t\t\tif (this._style.visible && this._sources){\r\n\t\t\t\tthis.index=this._index,this._index++;\r\n\t\t\t\tthis._index >=this._sources.length && (this._index=0);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*停止动画。\r\n\t\t*/\r\n\t\t__proto.stop=function(){\r\n\t\t\tthis._isPlaying=false;\r\n\t\t\tLaya.timer.clear(this,this._loop);\r\n\t\t}\r\n\r\n\t\t/**@private */\r\n\t\t__proto._setClipChanged=function(){\r\n\t\t\tif (!this._clipChanged){\r\n\t\t\t\tthis._clipChanged=true;\r\n\t\t\t\tthis.callLater(this.changeClip);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*<code>AutoBitmap</code> 位图实例。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'bitmap',function(){\r\n\t\t\treturn this._bitmap;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*表示动画播放间隔时间(以毫秒为单位)。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'interval',function(){\r\n\t\t\treturn this._interval;\r\n\t\t\t},function(value){\r\n\t\t\tif (this._interval !=value){\r\n\t\t\t\tthis._interval=value;\r\n\t\t\t\tif (this._isPlaying)this.play();\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*切片动画的总帧数。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'total',function(){\r\n\t\t\tthis.runCallLater(this.changeClip);\r\n\t\t\treturn this._sources ? this._sources.length :0;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*<p>当前实例的位图 <code>AutoImage</code> 实例的有效缩放网格数据。</p>\r\n\t\t*<p>数据格式：\"上边距,右边距,下边距,左边距,是否重复填充(值为0：不重复填充，1：重复填充)\"，以逗号分隔。\r\n\t\t*<ul><li>例如：\"4,4,4,4,1\"</li></ul></p>\r\n\t\t*@see laya.ui.AutoBitmap.sizeGrid\r\n\t\t*/\r\n\t\t__getset(0,__proto,'sizeGrid',function(){\r\n\t\t\tif (this._bitmap.sizeGrid)return this._bitmap.sizeGrid.join(\",\");\r\n\t\t\treturn null;\r\n\t\t\t},function(value){\r\n\t\t\tthis._bitmap.sizeGrid=UIUtils.fillArray(Styles.defaultSizeGrid,value,Number);\r\n\t\t});\r\n\r\n\t\t/**@inheritDoc */\r\n\t\t__getset(0,__proto,'measureWidth',function(){\r\n\t\t\tthis.runCallLater(this.changeClip);\r\n\t\t\treturn this._bitmap.width;\r\n\t\t});\r\n\r\n\t\t/**@inheritDoc */\r\n\t\t__getset(0,__proto,'height',_super.prototype._$get_height,function(value){\r\n\t\t\t_super.prototype._$set_height.call(this,value);\r\n\t\t\tthis._bitmap.height=value;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*横向分割时每个切片的宽度，与 <code>clipX</code> 同时设置时优先级高于 <code>clipX</code> 。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'clipWidth',function(){\r\n\t\t\treturn this._clipWidth;\r\n\t\t\t},function(value){\r\n\t\t\tthis._clipWidth=value;\r\n\t\t\tthis._setClipChanged()\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*资源分组。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'group',function(){\r\n\t\t\treturn this._group;\r\n\t\t\t},function(value){\r\n\t\t\tif (value && this._skin)Loader.setGroup(this._skin,value);\r\n\t\t\tthis._group=value;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*竖向分割时每个切片的高度，与 <code>clipY</code> 同时设置时优先级高于 <code>clipY</code> 。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'clipHeight',function(){\r\n\t\t\treturn this._clipHeight;\r\n\t\t\t},function(value){\r\n\t\t\tthis._clipHeight=value;\r\n\t\t\tthis._setClipChanged()\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*当前帧索引。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'index',function(){\r\n\t\t\treturn this._index;\r\n\t\t\t},function(value){\r\n\t\t\tthis._index=value;\r\n\t\t\tthis._bitmap && this._sources && (this._bitmap.source=this._sources[value]);\r\n\t\t\tthis.event(\"change\");\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*源数据。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'sources',function(){\r\n\t\t\treturn this._sources;\r\n\t\t\t},function(value){\r\n\t\t\tthis._sources=value;\r\n\t\t\tthis.index=this._index;\r\n\t\t\tthis.event(\"loaded\");\r\n\t\t});\r\n\r\n\t\t/**@inheritDoc */\r\n\t\t__getset(0,__proto,'dataSource',_super.prototype._$get_dataSource,function(value){\r\n\t\t\tthis._dataSource=value;\r\n\t\t\tif (((typeof value=='number')&& Math.floor(value)==value)|| (typeof value=='string'))this.index=parseInt(value);\r\n\t\t\telse _super.prototype._$set_dataSource.call(this,value);\r\n\t\t});\r\n\r\n\t\t/**Y轴(竖向)切片数量。*/\r\n\t\t__getset(0,__proto,'clipY',function(){\r\n\t\t\treturn this._clipY;\r\n\t\t\t},function(value){\r\n\t\t\tthis._clipY=value;\r\n\t\t\tthis._setClipChanged()\r\n\t\t});\r\n\r\n\t\t/**@inheritDoc */\r\n\t\t__getset(0,__proto,'measureHeight',function(){\r\n\t\t\tthis.runCallLater(this.changeClip);\r\n\t\t\treturn this._bitmap.height;\r\n\t\t});\r\n\r\n\t\t/**X轴（横向）切片数量。*/\r\n\t\t__getset(0,__proto,'clipX',function(){\r\n\t\t\treturn this._clipX;\r\n\t\t\t},function(value){\r\n\t\t\tthis._clipX=value;\r\n\t\t\tthis._setClipChanged()\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*表示是否自动播放动画，若自动播放值为true,否则值为false;\r\n\t\t*<p>可控制切片动画的播放、停止。</p>\r\n\t\t*/\r\n\t\t__getset(0,__proto,'autoPlay',function(){\r\n\t\t\treturn this._autoPlay;\r\n\t\t\t},function(value){\r\n\t\t\tif (this._autoPlay !=value){\r\n\t\t\t\tthis._autoPlay=value;\r\n\t\t\t\tvalue ? this.play():this.stop();\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t/**@inheritDoc */\r\n\t\t__getset(0,__proto,'width',_super.prototype._$get_width,function(value){\r\n\t\t\t_super.prototype._$set_width.call(this,value);\r\n\t\t\tthis._bitmap.width=value;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*表示动画的当前播放状态。\r\n\t\t*如果动画正在播放中，则为true，否则为flash。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'isPlaying',function(){\r\n\t\t\treturn this._isPlaying;\r\n\t\t\t},function(value){\r\n\t\t\tthis._isPlaying=value;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*@copy laya.ui.Image#skin\r\n\t\t*/\r\n\t\t__getset(0,__proto,'skin',function(){\r\n\t\t\treturn this._skin;\r\n\t\t\t},function(value){\r\n\t\t\tif (this._skin !=value){\r\n\t\t\t\tthis._skin=value;\r\n\t\t\t\tif (value){\r\n\t\t\t\t\tthis._setClipChanged()\r\n\t\t\t\t\t}else {\r\n\t\t\t\t\tthis._bitmap.source=null;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn Clip;\r\n\t})(Component)\r\n\r\n\r\n\t/**\r\n\t*<code>ColorPicker</code> 组件将显示包含多个颜色样本的列表，用户可以从中选择颜色。\r\n\t*\r\n\t*@example 以下示例代码，创建了一个 <code>ColorPicker</code> 实例。\r\n\t*<listing version=\"3.0\">\r\n\t*package\r\n\t*{\r\n\t\t*import laya.ui.ColorPicker;\r\n\t\t*import laya.utils.Handler;\r\n\t\t*public class ColorPicker_Example\r\n\t\t*{\r\n\t\t\t*public function ColorPicker_Example()\r\n\t\t\t*{\r\n\t\t\t\t*Laya.init(640,800);//设置游戏画布宽高。\r\n\t\t\t\t*Laya.stage.bgColor=\"#efefef\";//设置画布的背景颜色。\r\n\t\t\t\t*Laya.loader.load(\"resource/ui/color.png\",Handler.create(this,onLoadComplete));//加载资源。\r\n\t\t\t\t*}\r\n\t\t\t*private function onLoadComplete():void\r\n\t\t\t*{\r\n\t\t\t\t*trace(\"资源加载完成！\");\r\n\t\t\t\t*var colorPicket:ColorPicker=new ColorPicker();//创建一个 ColorPicker 类的实例对象 colorPicket 。\r\n\t\t\t\t*colorPicket.skin=\"resource/ui/color.png\";//设置 colorPicket 的皮肤。\r\n\t\t\t\t*colorPicket.x=100;//设置 colorPicket 对象的属性 x 的值，用于控制 colorPicket 对象的显示位置。\r\n\t\t\t\t*colorPicket.y=100;//设置 colorPicket 对象的属性 y 的值，用于控制 colorPicket 对象的显示位置。\r\n\t\t\t\t*colorPicket.changeHandler=new Handler(this,onChangeColor,[colorPicket]);//设置 colorPicket 的颜色改变回调函数。\r\n\t\t\t\t*Laya.stage.addChild(colorPicket);//将此 colorPicket 对象添加到显示列表。\r\n\t\t\t\t*}\r\n\t\t\t*private function onChangeColor(colorPicket:ColorPicker):void\r\n\t\t\t*{\r\n\t\t\t\t*trace(\"当前选择的颜色： \"+colorPicket.selectedColor);\r\n\t\t\t\t*}\r\n\t\t\t*}\r\n\t\t*}\r\n\t*</listing>\r\n\t*<listing version=\"3.0\">\r\n\t*Laya.init(640,800);//设置游戏画布宽高\r\n\t*Laya.stage.bgColor=\"#efefef\";//设置画布的背景颜色\r\n\t*Laya.loader.load(\"resource/ui/color.png\",laya.utils.Handler.create(this,loadComplete));//加载资源\r\n\t*function loadComplete()\r\n\t*{\r\n\t\t*console.log(\"资源加载完成！\");\r\n\t\t*var colorPicket=new laya.ui.ColorPicker();//创建一个 ColorPicker 类的实例对象 colorPicket 。\r\n\t\t*colorPicket.skin=\"resource/ui/color.png\";//设置 colorPicket 的皮肤。\r\n\t\t*colorPicket.x=100;//设置 colorPicket 对象的属性 x 的值，用于控制 colorPicket 对象的显示位置。\r\n\t\t*colorPicket.y=100;//设置 colorPicket 对象的属性 y 的值，用于控制 colorPicket 对象的显示位置。\r\n\t\t*colorPicket.changeHandler=laya.utils.Handler.create(this,onChangeColor,[colorPicket],false);//设置 colorPicket 的颜色改变回调函数。\r\n\t\t*Laya.stage.addChild(colorPicket);//将此 colorPicket 对象添加到显示列表。\r\n\t\t*}\r\n\t*function onChangeColor(colorPicket)\r\n\t*{\r\n\t\t*console.log(\"当前选择的颜色： \"+colorPicket.selectedColor);\r\n\t\t*}\r\n\t*</listing>\r\n\t*<listing version=\"3.0\">\r\n\t*import ColorPicker=laya.ui.ColorPicker;\r\n\t*import Handler=laya.utils.Handler;\r\n\t*class ColorPicker_Example {\r\n\t\t*constructor(){\r\n\t\t\t*Laya.init(640,800);//设置游戏画布宽高。\r\n\t\t\t*Laya.stage.bgColor=\"#efefef\";//设置画布的背景颜色。\r\n\t\t\t*Laya.loader.load(\"resource/ui/color.png\",Handler.create(this,this.onLoadComplete));//加载资源。\r\n\t\t\t*}\r\n\t\t*private onLoadComplete():void {\r\n\t\t\t*console.log(\"资源加载完成！\");\r\n\t\t\t*var colorPicket:ColorPicker=new ColorPicker();//创建一个 ColorPicker 类的实例对象 colorPicket 。\r\n\t\t\t*colorPicket.skin=\"resource/ui/color.png\";//设置 colorPicket 的皮肤。\r\n\t\t\t*colorPicket.x=100;//设置 colorPicket 对象的属性 x 的值，用于控制 colorPicket 对象的显示位置。\r\n\t\t\t*colorPicket.y=100;//设置 colorPicket 对象的属性 y 的值，用于控制 colorPicket 对象的显示位置。\r\n\t\t\t*colorPicket.changeHandler=new Handler(this,this.onChangeColor,[colorPicket]);//设置 colorPicket 的颜色改变回调函数。\r\n\t\t\t*Laya.stage.addChild(colorPicket);//将此 colorPicket 对象添加到显示列表。\r\n\t\t\t*}\r\n\t\t*private onChangeColor(colorPicket:ColorPicker):void {\r\n\t\t\t*console.log(\"当前选择的颜色： \"+colorPicket.selectedColor);\r\n\t\t\t*}\r\n\t\t*}\r\n\t*</listing>\r\n\t*/\r\n\t//class laya.ui.ColorPicker extends laya.ui.Component\r\n\tvar ColorPicker=(function(_super){\r\n\t\tfunction ColorPicker(){\r\n\t\t\tthis.changeHandler=null;\r\n\t\t\tthis._gridSize=11;\r\n\t\t\tthis._bgColor=\"#ffffff\";\r\n\t\t\tthis._borderColor=\"#000000\";\r\n\t\t\tthis._inputColor=\"#000000\";\r\n\t\t\tthis._inputBgColor=\"#efefef\";\r\n\t\t\tthis._colorPanel=null;\r\n\t\t\tthis._colorTiles=null;\r\n\t\t\tthis._colorBlock=null;\r\n\t\t\tthis._colorInput=null;\r\n\t\t\tthis._colorButton=null;\r\n\t\t\tthis._colors=[];\r\n\t\t\tthis._selectedColor=\"#000000\";\r\n\t\t\tthis._panelChanged=false;\r\n\t\t\tColorPicker.__super.call(this);\r\n\t\t}\r\n\r\n\t\t__class(ColorPicker,'laya.ui.ColorPicker',_super);\r\n\t\tvar __proto=ColorPicker.prototype;\r\n\t\t/**@inheritDoc */\r\n\t\t__proto.destroy=function(destroyChild){\r\n\t\t\t(destroyChild===void 0)&& (destroyChild=true);\r\n\t\t\t_super.prototype.destroy.call(this,destroyChild);\r\n\t\t\tthis._colorPanel && this._colorPanel.destroy(destroyChild);\r\n\t\t\tthis._colorButton && this._colorButton.destroy(destroyChild);\r\n\t\t\tthis._colorPanel=null;\r\n\t\t\tthis._colorTiles=null;\r\n\t\t\tthis._colorBlock=null;\r\n\t\t\tthis._colorInput=null;\r\n\t\t\tthis._colorButton=null;\r\n\t\t\tthis._colors=null;\r\n\t\t\tthis.changeHandler=null;\r\n\t\t}\r\n\r\n\t\t/**@inheritDoc */\r\n\t\t__proto.createChildren=function(){\r\n\t\t\tthis.addChild(this._colorButton=new Button());\r\n\t\t\tthis._colorPanel=new Box();\r\n\t\t\tthis._colorPanel.size(230,166);\r\n\t\t\tthis._colorPanel.addChild(this._colorTiles=new Sprite());\r\n\t\t\tthis._colorPanel.addChild(this._colorBlock=new Sprite());\r\n\t\t\tthis._colorPanel.addChild(this._colorInput=new Input());\r\n\t\t}\r\n\r\n\t\t/**@inheritDoc */\r\n\t\t__proto.initialize=function(){\r\n\t\t\tthis._colorButton.on(\"click\",this,this.onColorButtonClick);\r\n\t\t\tthis._colorBlock.pos(5,5);\r\n\t\t\tthis._colorInput.pos(60,5);\r\n\t\t\tthis._colorInput.size(60,20);\r\n\t\t\tthis._colorInput.on(\"change\",this,this.onColorInputChange);\r\n\t\t\tthis._colorInput.on(\"keydown\",this,this.onColorFieldKeyDown);\r\n\t\t\tthis._colorTiles.pos(5,30);\r\n\t\t\tthis._colorTiles.on(\"mousemove\",this,this.onColorTilesMouseMove);\r\n\t\t\tthis._colorTiles.on(\"click\",this,this.onColorTilesClick);\r\n\t\t\tthis._colorTiles.size(20 *this._gridSize,12 *this._gridSize);\r\n\t\t\tthis._colorPanel.on(\"mousedown\",this,this.onPanelMouseDown);\r\n\t\t\tthis.bgColor=this._bgColor;\r\n\t\t}\r\n\r\n\t\t__proto.onPanelMouseDown=function(e){\r\n\t\t\te.stopPropagation();\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*改变颜色样本列表面板。\r\n\t\t*/\r\n\t\t__proto.changePanel=function(){\r\n\t\t\tthis._panelChanged=false;\r\n\t\t\tvar g=this._colorPanel.graphics;\r\n\t\t\tg.clear();\r\n\t\t\tg.drawRect(0,0,230,166,this._bgColor,this._borderColor);\r\n\t\t\tthis.drawBlock(this._selectedColor);\r\n\t\t\tthis._colorInput.borderColor=this._borderColor;\r\n\t\t\tthis._colorInput.bgColor=this._inputBgColor;\r\n\t\t\tthis._colorInput.color=this._inputColor;\r\n\t\t\tg=this._colorTiles.graphics;\r\n\t\t\tg.clear();\r\n\t\t\tvar mainColors=[0x000000,0x333333,0x666666,0x999999,0xCCCCCC,0xFFFFFF,0xFF0000,0x00FF00,0x0000FF,0xFFFF00,0x00FFFF,0xFF00FF];\r\n\t\t\tfor (var i=0;i < 12;i++){\r\n\t\t\t\tfor (var j=0;j < 20;j++){\r\n\t\t\t\t\tvar color=0;\r\n\t\t\t\t\tif (j===0)color=mainColors[i];\r\n\t\t\t\t\telse if (j===1)color=0x000000;\r\n\t\t\t\t\telse color=(((i *3+j / 6)% 3 << 0)+((i / 6)<< 0)*3)*0x33 << 16 | j % 6 *0x33 << 8 | (i << 0)% 6 *0x33;\r\n\t\t\t\t\tvar strColor=UIUtils.toColor(color);\r\n\t\t\t\t\tthis._colors.push(strColor);\r\n\t\t\t\t\tvar x=j *this._gridSize;\r\n\t\t\t\t\tvar y=i *this._gridSize;\r\n\t\t\t\t\tg.drawRect(x,y,this._gridSize,this._gridSize,strColor,\"#000000\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*颜色样本列表面板的显示按钮的 <code>Event.MOUSE_DOWN</code> 事件侦听处理函数。\r\n\t\t*/\r\n\t\t__proto.onColorButtonClick=function(e){\r\n\t\t\tif (this._colorPanel.parent)this.close();\r\n\t\t\telse this.open();\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*打开颜色样本列表面板。\r\n\t\t*/\r\n\t\t__proto.open=function(){\r\n\t\t\tvar p=this.localToGlobal(new Point());\r\n\t\t\tvar px=p.x+this._colorPanel.width <=Laya.stage.width ? p.x :Laya.stage.width-this._colorPanel.width;\r\n\t\t\tvar py=p.y+this._colorButton.height;\r\n\t\t\tpy=py+this._colorPanel.height <=Laya.stage.height ? py :p.y-this._colorPanel.height;\r\n\t\t\tthis._colorPanel.pos(px,py);\r\n\t\t\tLaya.stageBox.addChild(this._colorPanel);\r\n\t\t\tLaya.stage.on(\"mousedown\",this,this.removeColorBox);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*关闭颜色样本列表面板。\r\n\t\t*/\r\n\t\t__proto.close=function(){\r\n\t\t\tLaya.stage.off(\"mousedown\",this,this.removeColorBox);\r\n\t\t\tthis._colorPanel.removeSelf();\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*舞台的 <code>Event.MOUSE_DOWN</code> 事件侦听处理函数。\r\n\t\t*/\r\n\t\t__proto.removeColorBox=function(e){\r\n\t\t\tthis.close();\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*小格子色块的 <code>Event.KEY_DOWN</code> 事件侦听处理函数。\r\n\t\t*/\r\n\t\t__proto.onColorFieldKeyDown=function(e){\r\n\t\t\tif (e.keyCode==13){\r\n\t\t\t\tif (this._colorInput.text)this.selectedColor=this._colorInput.text;\r\n\t\t\t\telse this.selectedColor=null;\r\n\t\t\t\tthis.close();\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*颜色值输入框 <code>Event.CHANGE</code> 事件侦听处理函数。\r\n\t\t*/\r\n\t\t__proto.onColorInputChange=function(e){\r\n\t\t\tif (this._colorInput.text)this.drawBlock(this._colorInput.text);\r\n\t\t\telse this.drawBlock(\"#FFFFFF\");\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*小格子色块的 <code>Event.CLICK</code> 事件侦听处理函数。\r\n\t\t*/\r\n\t\t__proto.onColorTilesClick=function(e){\r\n\t\t\tthis.selectedColor=this.getColorByMouse();\r\n\t\t\tthis.close();\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*小格子色块的 <code>Event.MOUSE_MOVE</code> 事件侦听处理函数。\r\n\t\t*/\r\n\t\t__proto.onColorTilesMouseMove=function(e){\r\n\t\t\tthis._colorInput.focus=false;\r\n\t\t\tvar color=this.getColorByMouse();\r\n\t\t\tthis._colorInput.text=color;\r\n\t\t\tthis.drawBlock(color);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*通过鼠标位置取对应的颜色块的颜色值。\r\n\t\t*/\r\n\t\t__proto.getColorByMouse=function(){\r\n\t\t\tvar point=this._colorTiles.getMousePoint();\r\n\t\t\tvar x=Math.floor(point.x / this._gridSize);\r\n\t\t\tvar y=Math.floor(point.y / this._gridSize);\r\n\t\t\treturn this._colors[y *20+x];\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*绘制颜色块。\r\n\t\t*@param color 需要绘制的颜色块的颜色值。\r\n\t\t*/\r\n\t\t__proto.drawBlock=function(color){\r\n\t\t\tvar g=this._colorBlock.graphics;\r\n\t\t\tg.clear();\r\n\t\t\tvar showColor=color ? color :\"#ffffff\";\r\n\t\t\tg.drawRect(0,0,50,20,showColor,this._borderColor);\r\n\t\t\tcolor || g.drawLine(0,0,50,20,\"#ff0000\");\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*改变颜色。\r\n\t\t*/\r\n\t\t__proto.changeColor=function(){\r\n\t\t\tvar g=this.graphics;\r\n\t\t\tg.clear();\r\n\t\t\tvar showColor=this._selectedColor || \"#000000\";\r\n\t\t\tg.drawRect(0,0,this._colorButton.width,this._colorButton.height,showColor);\r\n\t\t}\r\n\r\n\t\t/**@private */\r\n\t\t__proto._setPanelChanged=function(){\r\n\t\t\tif (!this._panelChanged){\r\n\t\t\t\tthis._panelChanged=true;\r\n\t\t\t\tthis.callLater(this.changePanel);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*表示颜色输入框的背景颜色值。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'inputBgColor',function(){\r\n\t\t\treturn this._inputBgColor;\r\n\t\t\t},function(value){\r\n\t\t\tthis._inputBgColor=value;\r\n\t\t\tthis._setPanelChanged();\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*表示颜色样本列表面板选择或输入的颜色值。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'inputColor',function(){\r\n\t\t\treturn this._inputColor;\r\n\t\t\t},function(value){\r\n\t\t\tthis._inputColor=value;\r\n\t\t\tthis._setPanelChanged();\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*表示颜色样本列表面板的背景颜色值。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'bgColor',function(){\r\n\t\t\treturn this._bgColor;\r\n\t\t\t},function(value){\r\n\t\t\tthis._bgColor=value;\r\n\t\t\tthis._setPanelChanged();\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*@copy laya.ui.Button#skin\r\n\t\t*/\r\n\t\t__getset(0,__proto,'skin',function(){\r\n\t\t\treturn this._colorButton.skin;\r\n\t\t\t},function(value){\r\n\t\t\tthis._colorButton.skin=value;\r\n\t\t\tthis.changeColor();\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*表示颜色样本列表面板的边框颜色值。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'borderColor',function(){\r\n\t\t\treturn this._borderColor;\r\n\t\t\t},function(value){\r\n\t\t\tthis._borderColor=value;\r\n\t\t\tthis._setPanelChanged();\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*表示选择的颜色值。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'selectedColor',function(){\r\n\t\t\treturn this._selectedColor;\r\n\t\t\t},function(value){\r\n\t\t\tif (this._selectedColor !=value){\r\n\t\t\t\tthis._selectedColor=this._colorInput.text=value;\r\n\t\t\t\tthis.drawBlock(value);\r\n\t\t\t\tthis.changeColor();\r\n\t\t\t\tthis.changeHandler && this.changeHandler.runWith(this._selectedColor);\r\n\t\t\t\tthis.event(\"change\",Event.EMPTY.setTo(\"change\",this,this));\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn ColorPicker;\r\n\t})(Component)\r\n\r\n\r\n\t/**\r\n\t*<code>ComboBox</code> 组件包含一个下拉列表，用户可以从该列表中选择单个值。\r\n\t*\r\n\t*@example 以下示例代码，创建了一个 <code>ComboBox</code> 实例。\r\n\t*<listing version=\"3.0\">\r\n\t*package\r\n\t*{\r\n\t\t*import laya.ui.ComboBox;\r\n\t\t*import laya.utils.Handler;\r\n\t\t*public class ComboBox_Example\r\n\t\t*{\r\n\t\t\t*public function ComboBox_Example()\r\n\t\t\t*{\r\n\t\t\t\t*Laya.init(640,800);//设置游戏画布宽高。\r\n\t\t\t\t*Laya.stage.bgColor=\"#efefef\";//设置画布的背景颜色。\r\n\t\t\t\t*Laya.loader.load(\"resource/ui/button.png\",Handler.create(this,onLoadComplete));//加载资源。\r\n\t\t\t\t*}\r\n\t\t\t*private function onLoadComplete():void\r\n\t\t\t*{\r\n\t\t\t\t*trace(\"资源加载完成！\");\r\n\t\t\t\t*var comboBox:ComboBox=new ComboBox(\"resource/ui/button.png\",\"item0,item1,item2,item3,item4,item5\");//创建一个 ComboBox 类的实例对象 comboBox ,传入它的皮肤和标签集。\r\n\t\t\t\t*comboBox.x=100;//设置 comboBox 对象的属性 x 的值，用于控制 comboBox 对象的显示位置。\r\n\t\t\t\t*comboBox.y=100;//设置 comboBox 对象的属性 x 的值，用于控制 comboBox 对象的显示位置。\r\n\t\t\t\t*comboBox.selectHandler=new Handler(this,onSelect);//设置 comboBox 选择项改变时执行的处理器。\r\n\t\t\t\t*Laya.stage.addChild(comboBox);//将此 comboBox 对象添加到显示列表。\r\n\t\t\t\t*}\r\n\t\t\t*private function onSelect(index:int):void\r\n\t\t\t*{\r\n\t\t\t\t*trace(\"当前选中的项对象索引： \",index);\r\n\t\t\t\t*}\r\n\t\t\t*}\r\n\t\t*}\r\n\t*</listing>\r\n\t*<listing version=\"3.0\">\r\n\t*Laya.init(640,800);//设置游戏画布宽高。\r\n\t*Laya.stage.bgColor=\"#efefef\";//设置画布的背景颜色。\r\n\t*Laya.loader.load(\"resource/ui/button.png\",laya.utils.Handler.create(this,loadComplete));//加载资源\r\n\t*function loadComplete(){\r\n\t\t*console.log(\"资源加载完成！\");\r\n\t\t*var comboBox=new laya.ui.ComboBox(\"resource/ui/button.png\",\"item0,item1,item2,item3,item4,item5\");//创建一个 ComboBox 类的实例对象 comboBox ,传入它的皮肤和标签集。\r\n\t\t*comboBox.x=100;//设置 comboBox 对象的属性 x 的值，用于控制 comboBox 对象的显示位置。\r\n\t\t*comboBox.y=100;//设置 comboBox 对象的属性 x 的值，用于控制 comboBox 对象的显示位置。\r\n\t\t*comboBox.selectHandler=new laya.utils.Handler(this,onSelect);//设置 comboBox 选择项改变时执行的处理器。\r\n\t\t*Laya.stage.addChild(comboBox);//将此 comboBox 对象添加到显示列表。\r\n\t\t*}\r\n\t*function onSelect(index)\r\n\t*{\r\n\t\t*console.log(\"当前选中的项对象索引： \",index);\r\n\t\t*}\r\n\t*</listing>\r\n\t*<listing version=\"3.0\">\r\n\t*import ComboBox=laya.ui.ComboBox;\r\n\t*import Handler=laya.utils.Handler;\r\n\t*class ComboBox_Example {\r\n\t\t*constructor(){\r\n\t\t\t*Laya.init(640,800);//设置游戏画布宽高。\r\n\t\t\t*Laya.stage.bgColor=\"#efefef\";//设置画布的背景颜色。\r\n\t\t\t*Laya.loader.load(\"resource/ui/button.png\",Handler.create(this,this.onLoadComplete));//加载资源。\r\n\t\t\t*}\r\n\t\t*private onLoadComplete():void {\r\n\t\t\t*console.log(\"资源加载完成！\");\r\n\t\t\t*var comboBox:ComboBox=new ComboBox(\"resource/ui/button.png\",\"item0,item1,item2,item3,item4,item5\");//创建一个 ComboBox 类的实例对象 comboBox ,传入它的皮肤和标签集。\r\n\t\t\t*comboBox.x=100;//设置 comboBox 对象的属性 x 的值，用于控制 comboBox 对象的显示位置。\r\n\t\t\t*comboBox.y=100;//设置 comboBox 对象的属性 x 的值，用于控制 comboBox 对象的显示位置。\r\n\t\t\t*comboBox.selectHandler=new Handler(this,this.onSelect);//设置 comboBox 选择项改变时执行的处理器。\r\n\t\t\t*Laya.stage.addChild(comboBox);//将此 comboBox 对象添加到显示列表。\r\n\t\t\t*}\r\n\t\t*private onSelect(index:number):void {\r\n\t\t\t*console.log(\"当前选中的项对象索引： \",index);\r\n\t\t\t*}\r\n\t\t*}\r\n\t*\r\n\t*</listing>\r\n\t*/\r\n\t//class laya.ui.ComboBox extends laya.ui.Component\r\n\tvar ComboBox=(function(_super){\r\n\t\tfunction ComboBox(skin,labels){\r\n\t\t\tthis._visibleNum=6;\r\n\t\t\tthis._button=null;\r\n\t\t\tthis._list=null;\r\n\t\t\tthis._isOpen=false;\r\n\t\t\tthis._scrollBar=null;\r\n\t\t\tthis._itemSize=12;\r\n\t\t\tthis._labels=[];\r\n\t\t\tthis._selectedIndex=-1;\r\n\t\t\tthis._selectHandler=null;\r\n\t\t\tthis._itemHeight=NaN;\r\n\t\t\tthis._listHeight=NaN;\r\n\t\t\tthis._listChanged=false;\r\n\t\t\tthis._itemChanged=false;\r\n\t\t\tthis._scrollBarSkin=null;\r\n\t\t\tthis.itemRender=null;\r\n\t\t\tComboBox.__super.call(this);\r\n\t\t\tthis._itemColors=Styles.comboBoxItemColors;\r\n\t\t\tthis.skin=skin;\r\n\t\t\tthis.labels=labels;\r\n\t\t}\r\n\r\n\t\t__class(ComboBox,'laya.ui.ComboBox',_super);\r\n\t\tvar __proto=ComboBox.prototype;\r\n\t\t/**@inheritDoc */\r\n\t\t__proto.destroy=function(destroyChild){\r\n\t\t\t(destroyChild===void 0)&& (destroyChild=true);\r\n\t\t\t_super.prototype.destroy.call(this,destroyChild);\r\n\t\t\tthis._button && this._button.destroy(destroyChild);\r\n\t\t\tthis._list && this._list.destroy(destroyChild);\r\n\t\t\tthis._scrollBar && this._scrollBar.destroy(destroyChild);\r\n\t\t\tthis._button=null;\r\n\t\t\tthis._list=null;\r\n\t\t\tthis._scrollBar=null;\r\n\t\t\tthis._itemColors=null;\r\n\t\t\tthis._labels=null;\r\n\t\t\tthis._selectHandler=null;\r\n\t\t}\r\n\r\n\t\t/**@inheritDoc */\r\n\t\t__proto.createChildren=function(){\r\n\t\t\tthis.addChild(this._button=new Button());\r\n\t\t\tthis._button.text.align=\"left\";\r\n\t\t\tthis._button.labelPadding=\"0,0,0,5\";\r\n\t\t\tthis._button.on(\"mousedown\",this,this.onButtonMouseDown);\r\n\t\t}\r\n\r\n\t\t__proto._createList=function(){\r\n\t\t\tthis._list=new List();\r\n\t\t\tthis._list.selectEnable=true;\r\n\t\t\tthis._list.on(\"mousedown\",this,this.onListDown);\r\n\t\t\tthis._list.mouseHandler=Handler.create(this,this.onlistItemMouse,null,false);\r\n\t\t\tif (this._scrollBarSkin){\r\n\t\t\t\tthis._list.addChild(this._scrollBar=new VScrollBar());\r\n\t\t\t\tthis._scrollBar.skin=this._scrollBarSkin;\r\n\t\t\t\tthis._scrollBar.name=\"scrollBar\";\r\n\t\t\t\tthis._scrollBar.y=1;\r\n\t\t\t\tthis._scrollBar.on(\"mousedown\",this,this.onScrollBarDown);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*/\r\n\t\t__proto.onListDown=function(e){\r\n\t\t\te.stopPropagation();\r\n\t\t}\r\n\r\n\t\t__proto.onScrollBarDown=function(e){\r\n\t\t\te.stopPropagation();\r\n\t\t}\r\n\r\n\t\t__proto.onButtonMouseDown=function(e){\r\n\t\t\tthis.callLater(this.switchTo,[!this._isOpen]);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*/\r\n\t\t__proto.changeList=function(){\r\n\t\t\tthis._listChanged=false;\r\n\t\t\tvar labelWidth=this.width-2;\r\n\t\t\tvar labelColor=this._itemColors[2];\r\n\t\t\tthis._itemHeight=this._itemSize+6;\r\n\t\t\tthis._list.itemRender=this.itemRender || {type:\"Box\",child:[{type:\"Label\",props:{name:\"label\",x:1,padding:\"3,3,3,3\",width:labelWidth,height:this._itemHeight,fontSize:this._itemSize,color:labelColor}}]};\r\n\t\t\tthis._list.repeatY=this._visibleNum;\r\n\t\t\tif (this._scrollBar)this._scrollBar.x=this.width-this._scrollBar.width-1;\r\n\t\t\tthis._list.refresh();\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*下拉列表的鼠标事件响应函数。\r\n\t\t*/\r\n\t\t__proto.onlistItemMouse=function(e,index){\r\n\t\t\tvar type=e.type;\r\n\t\t\tif (type===\"mouseover\" || type===\"mouseout\"){\r\n\t\t\t\tvar box=this._list.getCell(index);\r\n\t\t\t\tif (!box)return;\r\n\t\t\t\tvar label=box.getChildByName(\"label\");\r\n\t\t\t\tif (label){\r\n\t\t\t\t\tif (type===\"mouseover\"){\r\n\t\t\t\t\t\tlabel.bgColor=this._itemColors[0];\r\n\t\t\t\t\t\tlabel.color=this._itemColors[1];\r\n\t\t\t\t\t\t}else {\r\n\t\t\t\t\t\tlabel.bgColor=null;\r\n\t\t\t\t\t\tlabel.color=this._itemColors[2];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t}else if (type===\"click\"){\r\n\t\t\t\tthis.selectedIndex=index;\r\n\t\t\t\tthis.isOpen=false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*/\r\n\t\t__proto.switchTo=function(value){\r\n\t\t\tthis.isOpen=value;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*更改下拉列表的打开状态。\r\n\t\t*/\r\n\t\t__proto.changeOpen=function(){\r\n\t\t\tthis.isOpen=!this._isOpen;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*更改下拉列表。\r\n\t\t*/\r\n\t\t__proto.changeItem=function(){\r\n\t\t\tthis._itemChanged=false;\r\n\t\t\tthis.runCallLater(this.changeList);\r\n\t\t\tthis._listHeight=this._labels.length > 0 ? Math.min(this._visibleNum,this._labels.length)*this._itemHeight :this._itemHeight;\r\n\t\t\tif (this._scrollBar)this._scrollBar.height=this._listHeight-2;\r\n\t\t\tvar g=this._list.graphics;\r\n\t\t\tg.clear();\r\n\t\t\tg.drawRect(0,0,this.width-1,this._listHeight,this._itemColors[4],this._itemColors[3]);\r\n\t\t\tvar a=this._list.array || [];\r\n\t\t\ta.length=0;\r\n\t\t\tfor (var i=0,n=this._labels.length;i < n;i++){\r\n\t\t\t\ta.push({label:this._labels[i]});\r\n\t\t\t}\r\n\t\t\tthis._list.array=a;\r\n\t\t\tif (this._visibleNum > a.length){\r\n\t\t\t\tthis._list.height=this._listHeight;\r\n\t\t\t\t}else {\r\n\t\t\t\tthis._list.height=0;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__proto.changeSelected=function(){\r\n\t\t\tthis._button.label=this.selectedLabel;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*关闭下拉列表。\r\n\t\t*/\r\n\t\t__proto.removeList=function(e){\r\n\t\t\tthis.isOpen=false;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*表示按钮的状态值。\r\n\t\t*@see laya.ui.Button#stateNum\r\n\t\t*/\r\n\t\t__getset(0,__proto,'stateNum',function(){\r\n\t\t\treturn this._button.stateNum;\r\n\t\t\t},function(value){\r\n\t\t\tthis._button.stateNum=value\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*表示按钮文本标签的字体名称，以字符串形式表示。\r\n\t\t*@see laya.display.Text#font\r\n\t\t*/\r\n\t\t__getset(0,__proto,'labelFont',function(){\r\n\t\t\treturn this._button.text.font;\r\n\t\t\t},function(value){\r\n\t\t\tthis._button.text.font=value\r\n\t\t});\r\n\r\n\t\t/**@inheritDoc */\r\n\t\t__getset(0,__proto,'height',_super.prototype._$get_height,function(value){\r\n\t\t\t_super.prototype._$set_height.call(this,value);\r\n\t\t\tthis._button.height=this._height;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*表示按钮文本标签是否为粗体字。\r\n\t\t*@see laya.display.Text#bold\r\n\t\t*/\r\n\t\t__getset(0,__proto,'labelBold',function(){\r\n\t\t\treturn this._button.text.bold;\r\n\t\t\t},function(value){\r\n\t\t\tthis._button.text.bold=value\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*获取或设置对 <code>ComboBox</code> 组件所包含的 <code>Button</code> 组件的标签字体大小。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'labelSize',function(){\r\n\t\t\treturn this._button.text.fontSize;\r\n\t\t\t},function(value){\r\n\t\t\tthis._button.text.fontSize=value\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*获取对 <code>ComboBox</code> 组件所包含的 <code>List</code> 列表组件的引用。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'list',function(){\r\n\t\t\tthis._list || this._createList();\r\n\t\t\treturn this._list;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*表示下拉列表的打开状态。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'isOpen',function(){\r\n\t\t\treturn this._isOpen;\r\n\t\t\t},function(value){\r\n\t\t\tif (this._isOpen !=value){\r\n\t\t\t\tthis._isOpen=value;\r\n\t\t\t\tthis._button.selected=this._isOpen;\r\n\t\t\t\tif (this._isOpen){\r\n\t\t\t\t\tthis._list || this._createList();\r\n\t\t\t\t\tthis._listChanged && this.changeList();\r\n\t\t\t\t\tthis._itemChanged && this.changeItem();\r\n\t\t\t\t\tvar p=this.localToGlobal(Point.TEMP.setTo(0,0));\r\n\t\t\t\t\tvar py=p.y+this._button.height;\r\n\t\t\t\t\tpy=py+this._listHeight <=Laya.stage.height ? py :p.y-this._listHeight;\r\n\t\t\t\t\tthis._list.pos(p.x,py);\r\n\t\t\t\t\tLaya.stageBox.addChild(this._list);\r\n\t\t\t\t\tLaya.stage.once(\"mousedown\",this,this.removeList);\r\n\t\t\t\t\tthis._list.selectedIndex=this._selectedIndex;\r\n\t\t\t\t\t}else {\r\n\t\t\t\t\tthis._list && this._list.removeSelf();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*获取对 <code>ComboBox</code> 组件所包含的 <code>Button</code> 组件的引用。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'button',function(){\r\n\t\t\treturn this._button;\r\n\t\t});\r\n\r\n\t\t/**@inheritDoc */\r\n\t\t__getset(0,__proto,'dataSource',_super.prototype._$get_dataSource,function(value){\r\n\t\t\tthis._dataSource=value;\r\n\t\t\tif (((typeof value=='number')&& Math.floor(value)==value)|| (typeof value=='string'))this.selectedIndex=parseInt(value);\r\n\t\t\telse if ((value instanceof Array))this.labels=(value).join(\",\");\r\n\t\t\telse _super.prototype._$set_dataSource.call(this,value);\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*获取对 <code>ComboBox</code> 组件所包含的 <code>VScrollBar</code> 滚动条组件的引用。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'scrollBar',function(){\r\n\t\t\treturn this._scrollBar;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*表示选择的下拉列表项的索引。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'selectedIndex',function(){\r\n\t\t\treturn this._selectedIndex;\r\n\t\t\t},function(value){\r\n\t\t\tif (this._selectedIndex !=value){\r\n\t\t\t\tthis._selectedIndex=value;\r\n\t\t\t\tif (this._labels.length > 0)this.changeSelected();\r\n\t\t\t\telse this.callLater(this.changeSelected);\r\n\t\t\t\tthis.event(\"change\",[Event.EMPTY.setTo(\"change\",this,this)]);\r\n\t\t\t\tthis._selectHandler && this._selectHandler.runWith(this._selectedIndex);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*下拉列表项标签的字体大小。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'itemSize',function(){\r\n\t\t\treturn this._itemSize;\r\n\t\t\t},function(value){\r\n\t\t\tthis._itemSize=value;\r\n\t\t\tthis._listChanged=true;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*<p>当前实例的位图 <code>AutoImage</code> 实例的有效缩放网格数据。</p>\r\n\t\t*<p>数据格式：\"上边距,右边距,下边距,左边距,是否重复填充(值为0：不重复填充，1：重复填充)\"，以逗号分隔。\r\n\t\t*<ul><li>例如：\"4,4,4,4,1\"</li></ul></p>\r\n\t\t*@see laya.ui.AutoBitmap.sizeGrid\r\n\t\t*/\r\n\t\t__getset(0,__proto,'sizeGrid',function(){\r\n\t\t\treturn this._button.sizeGrid;\r\n\t\t\t},function(value){\r\n\t\t\tthis._button.sizeGrid=value;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*获取或设置对 <code>ComboBox</code> 组件所包含的 <code>Button</code> 组件的文本标签颜色。\r\n\t\t*<p><b>格式：</b>upColor,overColor,downColor,disableColor</p>\r\n\t\t*/\r\n\t\t__getset(0,__proto,'labelColors',function(){\r\n\t\t\treturn this._button.labelColors;\r\n\t\t\t},function(value){\r\n\t\t\tif (this._button.labelColors !=value){\r\n\t\t\t\tthis._button.labelColors=value;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*获取或设置没有滚动条的下拉列表中可显示的最大行数。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'visibleNum',function(){\r\n\t\t\treturn this._visibleNum;\r\n\t\t\t},function(value){\r\n\t\t\tthis._visibleNum=value;\r\n\t\t\tthis._listChanged=true;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*改变下拉列表的选择项时执行的处理器(默认返回参数index:int)。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'selectHandler',function(){\r\n\t\t\treturn this._selectHandler;\r\n\t\t\t},function(value){\r\n\t\t\tthis._selectHandler=value;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*表示选择的下拉列表项的的标签。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'selectedLabel',function(){\r\n\t\t\treturn this._selectedIndex >-1 && this._selectedIndex < this._labels.length ? this._labels[this._selectedIndex] :null;\r\n\t\t\t},function(value){\r\n\t\t\tthis.selectedIndex=this._labels.indexOf(value);\r\n\t\t});\r\n\r\n\t\t/**@inheritDoc */\r\n\t\t__getset(0,__proto,'measureHeight',function(){\r\n\t\t\treturn this._button.height;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*标签集合字符串。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'labels',function(){\r\n\t\t\treturn this._labels.join(\",\");\r\n\t\t\t},function(value){\r\n\t\t\tif (this._labels.length > 0)this.selectedIndex=-1;\r\n\t\t\tif (value)this._labels=value.split(\",\");\r\n\t\t\telse this._labels.length=0;\r\n\t\t\tthis._itemChanged=true;\r\n\t\t});\r\n\r\n\t\t/**@inheritDoc */\r\n\t\t__getset(0,__proto,'measureWidth',function(){\r\n\t\t\treturn this._button.width;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*滚动条皮肤。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'scrollBarSkin',function(){\r\n\t\t\treturn this._scrollBarSkin;\r\n\t\t\t},function(value){\r\n\t\t\tthis._scrollBarSkin=value;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*下拉列表项颜色。\r\n\t\t*<p><b>格式：</b>\"悬停或被选中时背景颜色,悬停或被选中时标签颜色,标签颜色,边框颜色,背景颜色\"</p>\r\n\t\t*/\r\n\t\t__getset(0,__proto,'itemColors',function(){\r\n\t\t\treturn String(this._itemColors)\r\n\t\t\t},function(value){\r\n\t\t\tthis._itemColors=UIUtils.fillArray(this._itemColors,value,String);\r\n\t\t\tthis._listChanged=true;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*获取或设置对 <code>ComboBox</code> 组件所包含的 <code>Button</code> 组件的文本边距。\r\n\t\t*<p><b>格式：</b>上边距,右边距,下边距,左边距</p>\r\n\t\t*/\r\n\t\t__getset(0,__proto,'labelPadding',function(){\r\n\t\t\treturn this._button.text.padding.join(\",\");\r\n\t\t\t},function(value){\r\n\t\t\tthis._button.text.padding=UIUtils.fillArray(Styles.labelPadding,value,Number);\r\n\t\t});\r\n\r\n\t\t/**@inheritDoc */\r\n\t\t__getset(0,__proto,'width',_super.prototype._$get_width,function(value){\r\n\t\t\t_super.prototype._$set_width.call(this,value);\r\n\t\t\tthis._button.width=this._width;\r\n\t\t\tthis._itemChanged=true;\r\n\t\t\tthis._listChanged=true;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*@copy laya.ui.Button#skin\r\n\t\t*/\r\n\t\t__getset(0,__proto,'skin',function(){\r\n\t\t\treturn this._button.skin;\r\n\t\t\t},function(value){\r\n\t\t\tif (this._button.skin !=value){\r\n\t\t\t\tthis._button.skin=value;\r\n\t\t\t\tthis._listChanged=true;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn ComboBox;\r\n\t})(Component)\r\n\r\n\r\n\t/**\r\n\t*<code>ScrollBar</code> 组件是一个滚动条组件。\r\n\t*<p>当数据太多以至于显示区域无法容纳时，最终用户可以使用 <code>ScrollBar</code> 组件控制所显示的数据部分。</p>\r\n\t*<p> 滚动条由四部分组成：两个箭头按钮、一个轨道和一个滑块。 </p> *\r\n\t*\r\n\t*@see laya.ui.VScrollBar\r\n\t*@see laya.ui.HScrollBar\r\n\t*/\r\n\t//class laya.ui.ScrollBar extends laya.ui.Component\r\n\tvar ScrollBar=(function(_super){\r\n\t\tfunction ScrollBar(skin){\r\n\t\t\tthis.rollRatio=0.95;\r\n\t\t\tthis.changeHandler=null;\r\n\t\t\tthis.scaleBar=true;\r\n\t\t\tthis.autoHide=false;\r\n\t\t\tthis.elasticDistance=0;\r\n\t\t\tthis.elasticBackTime=500;\r\n\t\t\tthis.upButton=null;\r\n\t\t\tthis.downButton=null;\r\n\t\t\tthis.slider=null;\r\n\t\t\tthis._scrollSize=1;\r\n\t\t\tthis._skin=null;\r\n\t\t\tthis._thumbPercent=1;\r\n\t\t\tthis._target=null;\r\n\t\t\tthis._lastPoint=null;\r\n\t\t\tthis._lastOffset=0;\r\n\t\t\tthis._checkElastic=false;\r\n\t\t\tthis._isElastic=false;\r\n\t\t\tthis._value=NaN;\r\n\t\t\tthis._hide=false;\r\n\t\t\tthis._clickOnly=true;\r\n\t\t\tthis._offsets=null;\r\n\t\t\tScrollBar.__super.call(this);\r\n\t\t\tthis._showButtons=UIConfig.showButtons;\r\n\t\t\tthis._touchScrollEnable=UIConfig.touchScrollEnable;\r\n\t\t\tthis._mouseWheelEnable=UIConfig.mouseWheelEnable;\r\n\t\t\tthis.skin=skin;\r\n\t\t\tthis.max=1;\r\n\t\t}\r\n\r\n\t\t__class(ScrollBar,'laya.ui.ScrollBar',_super);\r\n\t\tvar __proto=ScrollBar.prototype;\r\n\t\t/**@inheritDoc */\r\n\t\t__proto.destroy=function(destroyChild){\r\n\t\t\t(destroyChild===void 0)&& (destroyChild=true);\r\n\t\t\t_super.prototype.destroy.call(this,destroyChild);\r\n\t\t\tthis.upButton && this.upButton.destroy(destroyChild);\r\n\t\t\tthis.downButton && this.downButton.destroy(destroyChild);\r\n\t\t\tthis.slider && this.slider.destroy(destroyChild);\r\n\t\t\tthis.upButton=this.downButton=null;\r\n\t\t\tthis.slider=null;\r\n\t\t\tthis.changeHandler=null;\r\n\t\t\tthis._offsets=null;\r\n\t\t}\r\n\r\n\t\t/**@inheritDoc */\r\n\t\t__proto.createChildren=function(){\r\n\t\t\tthis.addChild(this.slider=new Slider());\r\n\t\t\tthis.addChild(this.upButton=new Button());\r\n\t\t\tthis.addChild(this.downButton=new Button());\r\n\t\t}\r\n\r\n\t\t/**@inheritDoc */\r\n\t\t__proto.initialize=function(){\r\n\t\t\tthis.slider.showLabel=false;\r\n\t\t\tthis.slider.on(\"change\",this,this.onSliderChange);\r\n\t\t\tthis.slider.setSlider(0,0,0);\r\n\t\t\tthis.upButton.on(\"mousedown\",this,this.onButtonMouseDown);\r\n\t\t\tthis.downButton.on(\"mousedown\",this,this.onButtonMouseDown);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*滑块位置发生改变的处理函数。\r\n\t\t*/\r\n\t\t__proto.onSliderChange=function(){\r\n\t\t\tthis.value=this.slider.value;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*向上和向下按钮的 <code>Event.MOUSE_DOWN</code> 事件侦听处理函数。\r\n\t\t*/\r\n\t\t__proto.onButtonMouseDown=function(e){\r\n\t\t\tvar isUp=e.currentTarget===this.upButton;\r\n\t\t\tthis.slide(isUp);\r\n\t\t\tLaya.timer.once(Styles.scrollBarDelayTime,this,this.startLoop,[isUp]);\r\n\t\t\tLaya.stage.once(\"mouseup\",this,this.onStageMouseUp);\r\n\t\t}\r\n\r\n\t\t/**@private */\r\n\t\t__proto.startLoop=function(isUp){\r\n\t\t\tLaya.timer.frameLoop(1,this,this.slide,[isUp]);\r\n\t\t}\r\n\r\n\t\t/**@private */\r\n\t\t__proto.slide=function(isUp){\r\n\t\t\tif (isUp)this.value-=this._scrollSize;\r\n\t\t\telse this.value+=this._scrollSize;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*舞台的 <code>Event.MOUSE_DOWN</code> 事件侦听处理函数。\r\n\t\t*/\r\n\t\t__proto.onStageMouseUp=function(e){\r\n\t\t\tLaya.timer.clear(this,this.startLoop);\r\n\t\t\tLaya.timer.clear(this,this.slide);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*更改对象的皮肤及位置。\r\n\t\t*/\r\n\t\t__proto.changeScrollBar=function(){\r\n\t\t\tthis.upButton.visible=this._showButtons;\r\n\t\t\tthis.downButton.visible=this._showButtons;\r\n\t\t\tif (this._showButtons){\r\n\t\t\t\tthis.upButton.skin=this._skin.replace(\".png\",\"$up.png\");\r\n\t\t\t\tthis.downButton.skin=this._skin.replace(\".png\",\"$down.png\");\r\n\t\t\t}\r\n\t\t\tif (this.slider.isVertical)this.slider.y=this._showButtons ? this.upButton.height :0;\r\n\t\t\telse this.slider.x=this._showButtons ? this.upButton.width :0;\r\n\t\t\tthis.resetPositions();\r\n\t\t}\r\n\r\n\t\t/**@inheritDoc */\r\n\t\t__proto.changeSize=function(){\r\n\t\t\t_super.prototype.changeSize.call(this);\r\n\t\t\tthis.resetPositions();\r\n\t\t\tthis.event(\"change\");\r\n\t\t\tthis.changeHandler && this.changeHandler.runWith(this.value);\r\n\t\t}\r\n\r\n\t\t/**@private */\r\n\t\t__proto.resetPositions=function(){\r\n\t\t\tif (this.slider.isVertical)this.slider.height=this.height-(this._showButtons ? (this.upButton.height+this.downButton.height):0);\r\n\t\t\telse this.slider.width=this.width-(this._showButtons ? (this.upButton.width+this.downButton.width):0);\r\n\t\t\tthis.resetButtonPosition();\r\n\t\t}\r\n\r\n\t\t/**@private */\r\n\t\t__proto.resetButtonPosition=function(){\r\n\t\t\tif (this.slider.isVertical)this.downButton.y=this.slider.y+this.slider.height;\r\n\t\t\telse this.downButton.x=this.slider.x+this.slider.width;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*设置滚动条信息。\r\n\t\t*@param min 滚动条最小位置值。\r\n\t\t*@param max 滚动条最大位置值。\r\n\t\t*@param value 滚动条当前位置值。\r\n\t\t*/\r\n\t\t__proto.setScroll=function(min,max,value){\r\n\t\t\tthis.runCallLater(this.changeSize);\r\n\t\t\tthis.slider.setSlider(min,max,value);\r\n\t\t\tthis.slider.bar.visible=max > 0;\r\n\t\t\tif (!this._hide && this.autoHide)this.visible=false;\r\n\t\t}\r\n\r\n\t\t/**@private */\r\n\t\t__proto.onTargetMouseWheel=function(e){\r\n\t\t\tthis.value-=e.delta *this._scrollSize;\r\n\t\t\tthis.target=this._target;\r\n\t\t}\r\n\r\n\t\t/**@private */\r\n\t\t__proto.onTargetMouseDown=function(e){\r\n\t\t\tthis._clickOnly=true;\r\n\t\t\tthis._lastOffset=0;\r\n\t\t\tthis._checkElastic=false;\r\n\t\t\tthis._lastPoint || (this._lastPoint=new Point());\r\n\t\t\tthis._lastPoint.setTo(Laya.stage.mouseX,Laya.stage.mouseY);\r\n\t\t\tLaya.timer.clear(this,this.tweenMove);\r\n\t\t\tTween.clearTween(this);\r\n\t\t\tLaya.stage.once(\"mouseup\",this,this.onStageMouseUp2);\r\n\t\t\tLaya.stage.once(\"mouseout\",this,this.onStageMouseUp2);\r\n\t\t\tLaya.timer.frameLoop(1,this,this.loop);\r\n\t\t}\r\n\r\n\t\t/**@private */\r\n\t\t__proto.loop=function(){\r\n\t\t\tvar mouseY=Laya.stage.mouseY;\r\n\t\t\tvar mouseX=Laya.stage.mouseX;\r\n\t\t\tthis._lastOffset=this.isVertical ? (mouseY-this._lastPoint.y):(mouseX-this._lastPoint.x);\r\n\t\t\tif (this._clickOnly){\r\n\t\t\t\tif (Math.abs(this._lastOffset *(this.isVertical ? Laya.stage._canvasTransform.getScaleY():Laya.stage._canvasTransform.getScaleX()))> 1){\r\n\t\t\t\t\tthis._clickOnly=false;\r\n\t\t\t\t\tthis._offsets || (this._offsets=[]);\r\n\t\t\t\t\tthis._offsets.length=0;\r\n\t\t\t\t\tthis._target.mouseEnabled=false;\r\n\t\t\t\t\tif (!this.hide && this.autoHide){\r\n\t\t\t\t\t\tthis.alpha=1;\r\n\t\t\t\t\t\tthis.visible=true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.event(\"start\");\r\n\t\t\t\t}else return;\r\n\t\t\t}\r\n\t\t\tthis._offsets.push(this._lastOffset);\r\n\t\t\tthis._lastPoint.x=mouseX;\r\n\t\t\tthis._lastPoint.y=mouseY;\r\n\t\t\tif (this._lastOffset===0)return;\r\n\t\t\tif (!this._checkElastic){\r\n\t\t\t\tif (this.elasticDistance > 0){\r\n\t\t\t\t\tif (!this._checkElastic && this._lastOffset !=0){\r\n\t\t\t\t\t\tthis._checkElastic=true;\r\n\t\t\t\t\t\tif ((this._lastOffset > 0 && this._value <=this.min)|| (this._lastOffset < 0 && this._value >=this.max)){\r\n\t\t\t\t\t\t\tthis._isElastic=true;\r\n\t\t\t\t\t\t\t}else {\r\n\t\t\t\t\t\t\tthis._isElastic=false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t}else {\r\n\t\t\t\t\tthis._checkElastic=true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (this._checkElastic){\r\n\t\t\t\tif (this._isElastic){\r\n\t\t\t\t\tif (this._value <=this.min){\r\n\t\t\t\t\t\tthis.value-=this._lastOffset *Math.max(0,(1-((this.min-this._value)/ this.elasticDistance)));\r\n\t\t\t\t\t\t}else if (this._value >=this.max){\r\n\t\t\t\t\t\tthis.value-=this._lastOffset *Math.max(0,(1-((this._value-this.max)/ this.elasticDistance)));\r\n\t\t\t\t\t}\r\n\t\t\t\t\t}else {\r\n\t\t\t\t\tthis.value-=this._lastOffset;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**@private */\r\n\t\t__proto.onStageMouseUp2=function(e){\r\n\t\t\tLaya.stage.off(\"mouseup\",this,this.onStageMouseUp2);\r\n\t\t\tLaya.stage.off(\"mouseout\",this,this.onStageMouseUp2);\r\n\t\t\tLaya.timer.clear(this,this.loop);\r\n\t\t\tif (this._clickOnly)return;\r\n\t\t\tthis._target.mouseEnabled=true;\r\n\t\t\tif (this._isElastic){\r\n\t\t\t\tif (this._value < this.min){\r\n\t\t\t\t\tTween.to(this,{value:this.min},this.elasticBackTime,Ease.sineOut,Handler.create(this,this.elasticOver));\r\n\t\t\t\t\t}else if (this._value > this.max){\r\n\t\t\t\t\tTween.to(this,{value:this.max},this.elasticBackTime,Ease.sineOut,Handler.create(this,this.elasticOver));\r\n\t\t\t\t}\r\n\t\t\t\t}else {\r\n\t\t\t\tif (this._offsets.length < 1){\r\n\t\t\t\t\tthis._offsets[0]=this.isVertical ? Laya.stage.mouseY-this._lastPoint.y :Laya.stage.mouseX-this._lastPoint.x;\r\n\t\t\t\t};\r\n\t\t\t\tvar offset=0;\r\n\t\t\t\tvar n=Math.min(this._offsets.length,3);\r\n\t\t\t\tfor (var i=0;i < n;i++){\r\n\t\t\t\t\toffset+=this._offsets[this._offsets.length-1-i];\r\n\t\t\t\t}\r\n\t\t\t\tthis._lastOffset=offset / n;\r\n\t\t\t\toffset=Math.abs(this._lastOffset);\r\n\t\t\t\tif (offset < 2){\r\n\t\t\t\t\tthis.event(\"end\");\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (offset > 60)this._lastOffset=this._lastOffset > 0 ? 60 :-60;\r\n\t\t\t\tLaya.timer.frameLoop(1,this,this.tweenMove);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**@private */\r\n\t\t__proto.elasticOver=function(){\r\n\t\t\tthis._isElastic=false;\r\n\t\t\tif (!this.hide && this.autoHide){\r\n\t\t\t\tTween.to(this,{alpha:0},500);\r\n\t\t\t}\r\n\t\t\tthis.event(\"end\");\r\n\t\t}\r\n\r\n\t\t/**@private */\r\n\t\t__proto.tweenMove=function(){\r\n\t\t\tthis._lastOffset *=this.rollRatio;\r\n\t\t\tthis.value-=this._lastOffset;\r\n\t\t\tif (Math.abs(this._lastOffset)< 1 || this.value==this.max || this.value==this.min){\r\n\t\t\t\tLaya.timer.clear(this,this.tweenMove);\r\n\t\t\t\tthis.event(\"end\");\r\n\t\t\t\tif (!this.hide && this.autoHide){\r\n\t\t\t\t\tTween.to(this,{alpha:0},500);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*停止滑动。\r\n\t\t*/\r\n\t\t__proto.stopScroll=function(){\r\n\t\t\tthis.onStageMouseUp2(null);\r\n\t\t\tLaya.timer.clear(this,this.tweenMove);\r\n\t\t\tTween.clearTween(this);\r\n\t\t}\r\n\r\n\t\t/**一个布尔值，指定是否滑轮滚动，默认值为true。*/\r\n\t\t__getset(0,__proto,'mouseWheelEnable',function(){\r\n\t\t\treturn this._mouseWheelEnable;\r\n\t\t\t},function(value){\r\n\t\t\tthis._mouseWheelEnable=value;\r\n\t\t});\r\n\r\n\t\t/**一个布尔值，指定是否开启触摸，默认值为true。*/\r\n\t\t__getset(0,__proto,'touchScrollEnable',function(){\r\n\t\t\treturn this._touchScrollEnable;\r\n\t\t\t},function(value){\r\n\t\t\tthis._touchScrollEnable=value;\r\n\t\t\tthis.target=this._target;\r\n\t\t});\r\n\r\n\t\t/**是否隐藏滚动条，不显示滚动条，但是可以正常滚动，默认为false。*/\r\n\t\t__getset(0,__proto,'hide',function(){\r\n\t\t\treturn this._hide;\r\n\t\t\t},function(value){\r\n\t\t\tthis._hide=value;\r\n\t\t\tthis.visible=!value;\r\n\t\t});\r\n\r\n\t\t/**一个布尔值，指定是否显示向上、向下按钮，默认值为true。*/\r\n\t\t__getset(0,__proto,'showButtons',function(){\r\n\t\t\treturn this._showButtons;\r\n\t\t\t},function(value){\r\n\t\t\tthis._showButtons=value;\r\n\t\t\tthis.callLater(this.changeScrollBar);\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*获取或设置表示最高滚动位置的数字。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'max',function(){\r\n\t\t\treturn this.slider.max;\r\n\t\t\t},function(value){\r\n\t\t\tthis.slider.max=value;\r\n\t\t});\r\n\r\n\t\t/**获取或设置一个值，该值表示滑条长度比例，值为：（0-1）。 */\r\n\t\t__getset(0,__proto,'thumbPercent',function(){\r\n\t\t\treturn this._thumbPercent;\r\n\t\t\t},function(value){\r\n\t\t\tthis.runCallLater(this.changeScrollBar);\r\n\t\t\tthis.runCallLater(this.changeSize);\r\n\t\t\tvalue=value >=1 ? 0.99 :value;\r\n\t\t\tthis._thumbPercent=value;\r\n\t\t\tif (this.scaleBar){\r\n\t\t\t\tif (this.slider.isVertical)this.slider.bar.height=Math.max(this.slider.height *value,Styles.scrollBarMinNum);\r\n\t\t\t\telse this.slider.bar.width=Math.max(this.slider.width *value,Styles.scrollBarMinNum);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t/**获取或设置一个值，该值表示按下滚动条轨道时页面滚动的增量。 */\r\n\t\t__getset(0,__proto,'scrollSize',function(){\r\n\t\t\treturn this._scrollSize;\r\n\t\t\t},function(value){\r\n\t\t\tthis._scrollSize=value;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*<p>当前实例的 <code>Slider</code> 实例的有效缩放网格数据。</p>\r\n\t\t*<p>数据格式：\"上边距,右边距,下边距,左边距,是否重复填充(值为0：不重复填充，1：重复填充)\"，以逗号分隔。\r\n\t\t*<ul><li>例如：\"4,4,4,4,1\"</li></ul></p>\r\n\t\t*@see laya.ui.AutoBitmap.sizeGrid\r\n\t\t*/\r\n\t\t__getset(0,__proto,'sizeGrid',function(){\r\n\t\t\treturn this.slider.sizeGrid;\r\n\t\t\t},function(value){\r\n\t\t\tthis.slider.sizeGrid=value;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*设置滚动对象。\r\n\t\t*@see laya.ui.TouchScroll#target\r\n\t\t*/\r\n\t\t__getset(0,__proto,'target',function(){\r\n\t\t\treturn this._target;\r\n\t\t\t},function(value){\r\n\t\t\tif (this._target){\r\n\t\t\t\tthis._target.off(\"mousewheel\",this,this.onTargetMouseWheel);\r\n\t\t\t\tthis._target.off(\"mousedown\",this,this.onTargetMouseDown);\r\n\t\t\t}\r\n\t\t\tthis._target=value;\r\n\t\t\tif (value){\r\n\t\t\t\tthis._mouseWheelEnable && this._target.on(\"mousewheel\",this,this.onTargetMouseWheel);\r\n\t\t\t\tthis._touchScrollEnable && this._target.on(\"mousedown\",this,this.onTargetMouseDown);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*一个布尔值，指示滚动条是否为垂直滚动。如果值为true，则为垂直滚动，否则为水平滚动。\r\n\t\t*<p>默认值为：true。</p>\r\n\t\t*/\r\n\t\t__getset(0,__proto,'isVertical',function(){\r\n\t\t\treturn this.slider.isVertical;\r\n\t\t\t},function(value){\r\n\t\t\tthis.slider.isVertical=value;\r\n\t\t});\r\n\r\n\t\t/**@inheritDoc */\r\n\t\t__getset(0,__proto,'dataSource',_super.prototype._$get_dataSource,function(value){\r\n\t\t\tthis._dataSource=value;\r\n\t\t\tif ((typeof value=='number')|| (typeof value=='string'))this.value=Number(value);\r\n\t\t\telse _super.prototype._$set_dataSource.call(this,value);\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*获取或设置表示当前滚动位置的数字。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'value',function(){\r\n\t\t\treturn this._value;\r\n\t\t\t},function(v){\r\n\t\t\tif (v!==this._value){\r\n\t\t\t\tif (this._isElastic)this._value=v;\r\n\t\t\t\telse {\r\n\t\t\t\t\tthis.slider.value=v;\r\n\t\t\t\t\tthis._value=this.slider.value;\r\n\t\t\t\t}\r\n\t\t\t\tthis.event(\"change\");\r\n\t\t\t\tthis.changeHandler && this.changeHandler.runWith(this.value);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t/**@inheritDoc */\r\n\t\t__getset(0,__proto,'measureHeight',function(){\r\n\t\t\tif (this.slider.isVertical)return 100;\r\n\t\t\treturn this.slider.height;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*获取或设置表示最低滚动位置的数字。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'min',function(){\r\n\t\t\treturn this.slider.min;\r\n\t\t\t},function(value){\r\n\t\t\tthis.slider.min=value;\r\n\t\t});\r\n\r\n\t\t/**@inheritDoc */\r\n\t\t__getset(0,__proto,'measureWidth',function(){\r\n\t\t\tif (this.slider.isVertical)return this.slider.width;\r\n\t\t\treturn 100;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*@copy laya.ui.Image#skin\r\n\t\t*/\r\n\t\t__getset(0,__proto,'skin',function(){\r\n\t\t\treturn this._skin;\r\n\t\t\t},function(value){\r\n\t\t\tif (this._skin !=value){\r\n\t\t\t\tthis._skin=value;\r\n\t\t\t\tthis.slider.skin=this._skin;\r\n\t\t\t\tthis.callLater(this.changeScrollBar);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn ScrollBar;\r\n\t})(Component)\r\n\r\n\r\n\t/**\r\n\t*使用 <code>Slider</code> 控件，用户可以通过在滑块轨道的终点之间移动滑块来选择值。\r\n\t*<p>滑块的当前值由滑块端点（对应于滑块的最小值和最大值）之间滑块的相对位置确定。</p>\r\n\t*<p>滑块允许最小值和最大值之间特定间隔内的值。滑块还可以使用数据提示显示其当前值。</p>\r\n\t*\r\n\t*@see laya.ui.HSlider\r\n\t*@see laya.ui.VSlider\r\n\t*/\r\n\t//class laya.ui.Slider extends laya.ui.Component\r\n\tvar Slider=(function(_super){\r\n\t\tfunction Slider(skin){\r\n\t\t\tthis.changeHandler=null;\r\n\t\t\tthis.isVertical=true;\r\n\t\t\tthis.showLabel=true;\r\n\t\t\tthis._allowClickBack=false;\r\n\t\t\tthis._max=100;\r\n\t\t\tthis._min=0;\r\n\t\t\tthis._tick=1;\r\n\t\t\tthis._value=0;\r\n\t\t\tthis._skin=null;\r\n\t\t\tthis._bg=null;\r\n\t\t\tthis._bar=null;\r\n\t\t\tthis._tx=NaN;\r\n\t\t\tthis._ty=NaN;\r\n\t\t\tthis._maxMove=NaN;\r\n\t\t\tthis._globalSacle=null;\r\n\t\t\tSlider.__super.call(this);\r\n\t\t\tthis.skin=skin;\r\n\t\t}\r\n\r\n\t\t__class(Slider,'laya.ui.Slider',_super);\r\n\t\tvar __proto=Slider.prototype;\r\n\t\t/**\r\n\t\t*@inheritDoc\r\n\t\t*/\r\n\t\t__proto.destroy=function(destroyChild){\r\n\t\t\t(destroyChild===void 0)&& (destroyChild=true);\r\n\t\t\t_super.prototype.destroy.call(this,destroyChild);\r\n\t\t\tthis._bg && this._bg.destroy(destroyChild);\r\n\t\t\tthis._bar && this._bar.destroy(destroyChild);\r\n\t\t\tthis._bg=null;\r\n\t\t\tthis._bar=null;\r\n\t\t\tthis.changeHandler=null;\r\n\t\t}\r\n\r\n\t\t/**@inheritDoc */\r\n\t\t__proto.createChildren=function(){\r\n\t\t\tthis.addChild(this._bg=new Image());\r\n\t\t\tthis.addChild(this._bar=new Button());\r\n\t\t}\r\n\r\n\t\t/**@inheritDoc */\r\n\t\t__proto.initialize=function(){\r\n\t\t\tthis._bar.on(\"mousedown\",this,this.onBarMouseDown);\r\n\t\t\tthis._bg.sizeGrid=this._bar.sizeGrid=\"4,4,4,4,0\";\r\n\t\t\tthis.allowClickBack=true;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*滑块的的 <code>Event.MOUSE_DOWN</code> 事件侦听处理函数。\r\n\t\t*@param e\r\n\t\t*/\r\n\t\t__proto.onBarMouseDown=function(e){\r\n\t\t\tthis._globalSacle || (this._globalSacle=new Point());\r\n\t\t\tthis._globalSacle.setTo(this.globalScaleX,this.globalScaleY);\r\n\t\t\tthis._maxMove=this.isVertical ? (this.height-this._bar.height):(this.width-this._bar.width);\r\n\t\t\tthis._tx=Laya.stage.mouseX;\r\n\t\t\tthis._ty=Laya.stage.mouseY;\r\n\t\t\tLaya.stage.on(\"mousemove\",this,this.mouseMove);\r\n\t\t\tLaya.stage.once(\"mouseup\",this,this.mouseUp);\r\n\t\t\tthis.showValueText();\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*显示标签。\r\n\t\t*/\r\n\t\t__proto.showValueText=function(){\r\n\t\t\tif (this.showLabel){\r\n\t\t\t\tvar label=laya.ui.Slider.label;\r\n\t\t\t\tthis.addChild(label);\r\n\t\t\t\tlabel.textField.changeText(this._value+\"\");\r\n\t\t\t\tif (this.isVertical){\r\n\t\t\t\t\tlabel.x=this._bar.x+20;\r\n\t\t\t\t\tlabel.y=(this._bar.height-label.height)*0.5+this._bar.y;\r\n\t\t\t\t\t}else {\r\n\t\t\t\t\tlabel.y=this._bar.y-20;\r\n\t\t\t\t\tlabel.x=(this._bar.width-label.width)*0.5+this._bar.x;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*隐藏标签。\r\n\t\t*/\r\n\t\t__proto.hideValueText=function(){\r\n\t\t\tlaya.ui.Slider.label && laya.ui.Slider.label.removeSelf();\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*@param e\r\n\t\t*/\r\n\t\t__proto.mouseUp=function(e){\r\n\t\t\tLaya.stage.off(\"mousemove\",this,this.mouseMove);\r\n\t\t\tthis.sendChangeEvent(\"changed\");\r\n\t\t\tthis.hideValueText();\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*@param e\r\n\t\t*/\r\n\t\t__proto.mouseMove=function(e){\r\n\t\t\tvar oldValue=this._value;\r\n\t\t\tif (this.isVertical){\r\n\t\t\t\tthis._bar.y+=(Laya.stage.mouseY-this._ty)/ this._globalSacle.y;\r\n\t\t\t\tif (this._bar.y > this._maxMove)this._bar.y=this._maxMove;\r\n\t\t\t\telse if (this._bar.y < 0)this._bar.y=0;\r\n\t\t\t\tthis._value=this._bar.y / this._maxMove *(this._max-this._min)+this._min;\r\n\t\t\t\t}else {\r\n\t\t\t\tthis._bar.x+=(Laya.stage.mouseX-this._tx)/ this._globalSacle.x;\r\n\t\t\t\tif (this._bar.x > this._maxMove)this._bar.x=this._maxMove;\r\n\t\t\t\telse if (this._bar.x < 0)this._bar.x=0;\r\n\t\t\t\tthis._value=this._bar.x / this._maxMove *(this._max-this._min)+this._min;\r\n\t\t\t}\r\n\t\t\tthis._tx=Laya.stage.mouseX;\r\n\t\t\tthis._ty=Laya.stage.mouseY;\r\n\t\t\tvar pow=Math.pow(10,(this._tick+\"\").length-1);\r\n\t\t\tthis._value=Math.round(Math.round(this._value / this._tick)*this._tick *pow)/ pow;\r\n\t\t\tif (this._value !=oldValue){\r\n\t\t\t\tthis.sendChangeEvent();\r\n\t\t\t}\r\n\t\t\tthis.showValueText();\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*@param type\r\n\t\t*/\r\n\t\t__proto.sendChangeEvent=function(type){\r\n\t\t\t(type===void 0)&& (type=\"change\");\r\n\t\t\tthis.event(type);\r\n\t\t\tthis.changeHandler && this.changeHandler.runWith(this._value);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*设置滑块的位置信息。\r\n\t\t*/\r\n\t\t__proto.setBarPoint=function(){\r\n\t\t\tif (this.isVertical)this._bar.x=Math.round((this._bg.width-this._bar.width)*0.5);\r\n\t\t\telse this._bar.y=Math.round((this._bg.height-this._bar.height)*0.5);\r\n\t\t}\r\n\r\n\t\t/**@inheritDoc */\r\n\t\t__proto.changeSize=function(){\r\n\t\t\t_super.prototype.changeSize.call(this);\r\n\t\t\tif (this.isVertical)this._bg.height=this.height;\r\n\t\t\telse this._bg.width=this.width;\r\n\t\t\tthis.setBarPoint();\r\n\t\t\tthis.changeValue();\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*设置滑动条的信息。\r\n\t\t*@param min 滑块的最小值。\r\n\t\t*@param max 滑块的最小值。\r\n\t\t*@param value 滑块的当前值。\r\n\t\t*/\r\n\t\t__proto.setSlider=function(min,max,value){\r\n\t\t\tthis._value=-1;\r\n\t\t\tthis._min=min;\r\n\t\t\tthis._max=max > min ? max :min;\r\n\t\t\tthis.value=value < min ? min :value > max ? max :value;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*改变滑块的位置值。\r\n\t\t*/\r\n\t\t__proto.changeValue=function(){\r\n\t\t\tvar pow=Math.pow(10,(this._tick+\"\").length-1);\r\n\t\t\tthis._value=Math.round(Math.round(this._value / this._tick)*this._tick *pow)/ pow;\r\n\t\t\tthis._value=this._value > this._max ? this._max :this._value < this._min ? this._min :this._value;\r\n\t\t\tvar num=this._max-this._min;\r\n\t\t\tif (num===0)num=1;\r\n\t\t\tif (this.isVertical)this._bar.y=(this._value-this._min)/ num *(this.height-this._bar.height);\r\n\t\t\telse this._bar.x=(this._value-this._min)/ num *(this.width-this._bar.width);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*滑动条的 <code>Event.MOUSE_DOWN</code> 事件侦听处理函数。\r\n\t\t*/\r\n\t\t__proto.onBgMouseDown=function(e){\r\n\t\t\tvar point=this._bg.getMousePoint();\r\n\t\t\tif (this.isVertical)this.value=point.y / (this.height-this._bar.height)*(this._max-this._min)+this._min;\r\n\t\t\telse this.value=point.x / (this.width-this._bar.width)*(this._max-this._min)+this._min;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*表示滑块按钮的引用。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'bar',function(){\r\n\t\t\treturn this._bar;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*一个布尔值，指定是否允许通过点击滑动条改变 <code>Slider</code> 的 <code>value</code> 属性值。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'allowClickBack',function(){\r\n\t\t\treturn this._allowClickBack;\r\n\t\t\t},function(value){\r\n\t\t\tif (this._allowClickBack !=value){\r\n\t\t\t\tthis._allowClickBack=value;\r\n\t\t\t\tif (value)this._bg.on(\"mousedown\",this,this.onBgMouseDown);\r\n\t\t\t\telse this._bg.off(\"mousedown\",this,this.onBgMouseDown);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*获取或设置表示最低位置的数字。 默认值为0。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'min',function(){\r\n\t\t\treturn this._min;\r\n\t\t\t},function(value){\r\n\t\t\tif (this._min !=value){\r\n\t\t\t\tthis._min=value;\r\n\t\t\t\tthis.callLater(this.changeValue);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*获取或设置表示最高位置的数字。 默认值为100。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'max',function(){\r\n\t\t\treturn this._max;\r\n\t\t\t},function(value){\r\n\t\t\tif (this._max !=value){\r\n\t\t\t\tthis._max=value;\r\n\t\t\t\tthis.callLater(this.changeValue);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t/**@inheritDoc */\r\n\t\t__getset(0,__proto,'dataSource',_super.prototype._$get_dataSource,function(value){\r\n\t\t\tthis._dataSource=value;\r\n\t\t\tif ((typeof value=='number')|| (typeof value=='string'))this.value=Number(value);\r\n\t\t\telse _super.prototype._$set_dataSource.call(this,value);\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*获取或设置表示当前滑块位置的数字。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'value',function(){\r\n\t\t\treturn this._value;\r\n\t\t\t},function(num){\r\n\t\t\tif (this._value !=num){\r\n\t\t\t\tvar oldValue=this._value;\r\n\t\t\t\tthis._value=num;\r\n\t\t\t\tthis.changeValue();\r\n\t\t\t\tif (this._value !=oldValue){\r\n\t\t\t\t\tthis.sendChangeEvent();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t/**@inheritDoc */\r\n\t\t__getset(0,__proto,'measureHeight',function(){\r\n\t\t\treturn Math.max(this._bg.height,this._bar.height);\r\n\t\t});\r\n\r\n\t\t/**@inheritDoc */\r\n\t\t__getset(0,__proto,'measureWidth',function(){\r\n\t\t\treturn Math.max(this._bg.width,this._bar.width);\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*表示当前的刻度值。默认值为1。\r\n\t\t*@return\r\n\t\t*/\r\n\t\t__getset(0,__proto,'tick',function(){\r\n\t\t\treturn this._tick;\r\n\t\t\t},function(value){\r\n\t\t\tif (this._tick !=value){\r\n\t\t\t\tthis._tick=value;\r\n\t\t\t\tthis.callLater(this.changeValue);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*<p>当前实例的背景图（ <code>Image</code> ）和滑块按钮（ <code>Button</code> ）实例的有效缩放网格数据。</p>\r\n\t\t*<p>数据格式：\"上边距,右边距,下边距,左边距,是否重复填充(值为0：不重复填充，1：重复填充)\"，以逗号分隔。\r\n\t\t*<ul><li>例如：\"4,4,4,4,1\"</li></ul></p>\r\n\t\t*@see laya.ui.AutoBitmap.sizeGrid\r\n\t\t*@return\r\n\t\t*/\r\n\t\t__getset(0,__proto,'sizeGrid',function(){\r\n\t\t\treturn this._bg.sizeGrid;\r\n\t\t\t},function(value){\r\n\t\t\tthis._bg.sizeGrid=value;\r\n\t\t\tthis._bar.sizeGrid=value;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*@copy laya.ui.Image#skin\r\n\t\t*@return\r\n\t\t*/\r\n\t\t__getset(0,__proto,'skin',function(){\r\n\t\t\treturn this._skin;\r\n\t\t\t},function(value){\r\n\t\t\tif (this._skin !=value){\r\n\t\t\t\tthis._skin=value;\r\n\t\t\t\tthis._bg.skin=this._skin;\r\n\t\t\t\tthis._bar.skin=this._skin.replace(\".png\",\"$bar.png\");\r\n\t\t\t\tthis.setBarPoint();\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t__static(Slider,\r\n\t\t['label',function(){return this.label=new Label();}\r\n\t\t]);\r\n\t\treturn Slider;\r\n\t})(Component)\r\n\r\n\r\n\t/**\r\n\t*<code>Image</code> 类是用于表示位图图像或绘制图形的显示对象。\r\n\t*@example 以下示例代码，创建了一个新的 <code>Image</code> 实例，设置了它的皮肤、位置信息，并添加到舞台上。\r\n\t*<listing version=\"3.0\">\r\n\t*package\r\n\t*{\r\n\t\t*import laya.ui.Image;\r\n\t\t*public class Image_Example\r\n\t\t*{\r\n\t\t\t*public function Image_Example()\r\n\t\t\t*{\r\n\t\t\t\t*Laya.init(640,800);//设置游戏画布宽高。\r\n\t\t\t\t*Laya.stage.bgColor=\"#efefef\";//设置画布的背景颜色。\r\n\t\t\t\t*onInit();\r\n\t\t\t\t*}\r\n\t\t\t*private function onInit():void\r\n\t\t\t*{\r\n\t\t\t\t*var bg:Image=new Image(\"resource/ui/bg.png\");//创建一个 Image 类的实例对象 bg ,并传入它的皮肤。\r\n\t\t\t\t*bg.x=100;//设置 bg 对象的属性 x 的值，用于控制 bg 对象的显示位置。\r\n\t\t\t\t*bg.y=100;//设置 bg 对象的属性 y 的值，用于控制 bg 对象的显示位置。\r\n\t\t\t\t*bg.sizeGrid=\"40,10,5,10\";//设置 bg 对象的网格信息。\r\n\t\t\t\t*bg.width=150;//设置 bg 对象的宽度。\r\n\t\t\t\t*bg.height=250;//设置 bg 对象的高度。\r\n\t\t\t\t*Laya.stage.addChild(bg);//将此 bg 对象添加到显示列表。\r\n\t\t\t\t*var image:Image=new Image(\"resource/ui/image.png\");//创建一个 Image 类的实例对象 image ,并传入它的皮肤。\r\n\t\t\t\t*image.x=100;//设置 image 对象的属性 x 的值，用于控制 image 对象的显示位置。\r\n\t\t\t\t*image.y=100;//设置 image 对象的属性 y 的值，用于控制 image 对象的显示位置。\r\n\t\t\t\t*Laya.stage.addChild(image);//将此 image 对象添加到显示列表。\r\n\t\t\t\t*}\r\n\t\t\t*}\r\n\t\t*}\r\n\t*</listing>\r\n\t*<listing version=\"3.0\">\r\n\t*Laya.init(640,800);//设置游戏画布宽高\r\n\t*Laya.stage.bgColor=\"#efefef\";//设置画布的背景颜色\r\n\t*onInit();\r\n\t*function onInit(){\r\n\t\t*var bg=new laya.ui.Image(\"resource/ui/bg.png\");//创建一个 Image 类的实例对象 bg ,并传入它的皮肤。\r\n\t\t*bg.x=100;//设置 bg 对象的属性 x 的值，用于控制 bg 对象的显示位置。\r\n\t\t*bg.y=100;//设置 bg 对象的属性 y 的值，用于控制 bg 对象的显示位置。\r\n\t\t*bg.sizeGrid=\"40,10,5,10\";//设置 bg 对象的网格信息。\r\n\t\t*bg.width=150;//设置 bg 对象的宽度。\r\n\t\t*bg.height=250;//设置 bg 对象的高度。\r\n\t\t*Laya.stage.addChild(bg);//将此 bg 对象添加到显示列表。\r\n\t\t*var image=new laya.ui.Image(\"resource/ui/image.png\");//创建一个 Image 类的实例对象 image ,并传入它的皮肤。\r\n\t\t*image.x=100;//设置 image 对象的属性 x 的值，用于控制 image 对象的显示位置。\r\n\t\t*image.y=100;//设置 image 对象的属性 y 的值，用于控制 image 对象的显示位置。\r\n\t\t*Laya.stage.addChild(image);//将此 image 对象添加到显示列表。\r\n\t\t*}\r\n\t*</listing>\r\n\t*<listing version=\"3.0\">\r\n\t*class Image_Example {\r\n\t\t*constructor(){\r\n\t\t\t*Laya.init(640,800);//设置游戏画布宽高。\r\n\t\t\t*Laya.stage.bgColor=\"#efefef\";//设置画布的背景颜色。\r\n\t\t\t*this.onInit();\r\n\t\t\t*}\r\n\t\t*private onInit():void {\r\n\t\t\t*var bg:laya.ui.Image=new laya.ui.Image(\"resource/ui/bg.png\");//创建一个 Image 类的实例对象 bg ,并传入它的皮肤。\r\n\t\t\t*bg.x=100;//设置 bg 对象的属性 x 的值，用于控制 bg 对象的显示位置。\r\n\t\t\t*bg.y=100;//设置 bg 对象的属性 y 的值，用于控制 bg 对象的显示位置。\r\n\t\t\t*bg.sizeGrid=\"40,10,5,10\";//设置 bg 对象的网格信息。\r\n\t\t\t*bg.width=150;//设置 bg 对象的宽度。\r\n\t\t\t*bg.height=250;//设置 bg 对象的高度。\r\n\t\t\t*Laya.stage.addChild(bg);//将此 bg 对象添加到显示列表。\r\n\t\t\t*var image:laya.ui.Image=new laya.ui.Image(\"resource/ui/image.png\");//创建一个 Image 类的实例对象 image ,并传入它的皮肤。\r\n\t\t\t*image.x=100;//设置 image 对象的属性 x 的值，用于控制 image 对象的显示位置。\r\n\t\t\t*image.y=100;//设置 image 对象的属性 y 的值，用于控制 image 对象的显示位置。\r\n\t\t\t*Laya.stage.addChild(image);//将此 image 对象添加到显示列表。\r\n\t\t\t*}\r\n\t\t*}\r\n\t*</listing>\r\n\t*@see laya.ui.AutoBitmap\r\n\t*/\r\n\t//class laya.ui.Image extends laya.ui.Component\r\n\tvar Image=(function(_super){\r\n\t\tfunction Image(skin){\r\n\t\t\tthis._bitmap=null;\r\n\t\t\tthis._skin=null;\r\n\t\t\tthis._group=null;\r\n\t\t\tImage.__super.call(this);\r\n\t\t\tthis.skin=skin;\r\n\t\t}\r\n\r\n\t\t__class(Image,'laya.ui.Image',_super);\r\n\t\tvar __proto=Image.prototype;\r\n\t\t/**@inheritDoc */\r\n\t\t__proto.destroy=function(destroyChild){\r\n\t\t\t(destroyChild===void 0)&& (destroyChild=true);\r\n\t\t\t_super.prototype.destroy.call(this,true);\r\n\t\t\tthis._bitmap && this._bitmap.destroy();\r\n\t\t\tthis._bitmap=null;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*销毁对象并释放加载的皮肤资源。\r\n\t\t*/\r\n\t\t__proto.dispose=function(){\r\n\t\t\tthis.destroy(true);\r\n\t\t\tLaya.loader.clearRes(this._skin);\r\n\t\t}\r\n\r\n\t\t/**@inheritDoc */\r\n\t\t__proto.createChildren=function(){\r\n\t\t\tthis.graphics=this._bitmap=new AutoBitmap();\r\n\t\t\tthis._bitmap.autoCacheCmd=false;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*设置皮肤资源。\r\n\t\t*/\r\n\t\t__proto.setSource=function(url,img){\r\n\t\t\tif (url===this._skin && img){\r\n\t\t\t\tthis.source=img\r\n\t\t\t\tthis.onCompResize();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*<p>当前实例的位图 <code>AutoImage</code> 实例的有效缩放网格数据。</p>\r\n\t\t*<p>数据格式：\"上边距,右边距,下边距,左边距,是否重复填充(值为0：不重复填充，1：重复填充)\"，以逗号分隔。\r\n\t\t*<ul><li>例如：\"4,4,4,4,1\"。</li></ul></p>\r\n\t\t*@see laya.ui.AutoBitmap#sizeGrid\r\n\t\t*/\r\n\t\t__getset(0,__proto,'sizeGrid',function(){\r\n\t\t\tif (this._bitmap.sizeGrid)return this._bitmap.sizeGrid.join(\",\");\r\n\t\t\treturn null;\r\n\t\t\t},function(value){\r\n\t\t\tthis._bitmap.sizeGrid=UIUtils.fillArray(Styles.defaultSizeGrid,value,Number);\r\n\t\t});\r\n\r\n\t\t/**@inheritDoc */\r\n\t\t__getset(0,__proto,'height',_super.prototype._$get_height,function(value){\r\n\t\t\t_super.prototype._$set_height.call(this,value);\r\n\t\t\tthis._bitmap.height=value==0 ? 0.0000001 :value;\r\n\t\t});\r\n\r\n\t\t/**@inheritDoc */\r\n\t\t__getset(0,__proto,'dataSource',_super.prototype._$get_dataSource,function(value){\r\n\t\t\tthis._dataSource=value;\r\n\t\t\tif ((typeof value=='string'))this.skin=value;\r\n\t\t\telse _super.prototype._$set_dataSource.call(this,value);\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*@copy laya.ui.AutoBitmap#source\r\n\t\t*/\r\n\t\t__getset(0,__proto,'source',function(){\r\n\t\t\treturn this._bitmap.source;\r\n\t\t\t},function(value){\r\n\t\t\tif (!this._bitmap)return;\r\n\t\t\tthis._bitmap.source=value;\r\n\t\t\tthis.event(\"loaded\");\r\n\t\t\tthis.repaint();\r\n\t\t});\r\n\r\n\t\t/**@inheritDoc */\r\n\t\t__getset(0,__proto,'measureHeight',function(){\r\n\t\t\treturn this._bitmap.height;\r\n\t\t});\r\n\r\n\t\t/**@inheritDoc */\r\n\t\t__getset(0,__proto,'measureWidth',function(){\r\n\t\t\treturn this._bitmap.width;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*资源分组。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'group',function(){\r\n\t\t\treturn this._group;\r\n\t\t\t},function(value){\r\n\t\t\tif (value && this._skin)Loader.setGroup(this._skin,value);\r\n\t\t\tthis._group=value;\r\n\t\t});\r\n\r\n\t\t/**@inheritDoc */\r\n\t\t__getset(0,__proto,'width',_super.prototype._$get_width,function(value){\r\n\t\t\t_super.prototype._$set_width.call(this,value);\r\n\t\t\tthis._bitmap.width=value==0 ? 0.0000001 :value;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*<p>对象的皮肤地址，以字符串表示。</p>\r\n\t\t*<p>如果资源未加载，则先加载资源，加载完成后应用于此对象。</p>\r\n\t\t*<b>注意：</b>资源加载完成后，会自动缓存至资源库中。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'skin',function(){\r\n\t\t\treturn this._skin;\r\n\t\t\t},function(value){\r\n\t\t\tif (this._skin !=value){\r\n\t\t\t\tthis._skin=value;\r\n\t\t\t\tif (value){\r\n\t\t\t\t\tvar source=Loader.getRes(value);\r\n\t\t\t\t\tif (source){\r\n\t\t\t\t\t\tthis.source=source;\r\n\t\t\t\t\t\tthis.onCompResize();\r\n\t\t\t\t\t}else Laya.loader.load(this._skin,Handler.create(this,this.setSource,[this._skin]),null,\"image\",1,true,this._group);\r\n\t\t\t\t\t}else {\r\n\t\t\t\t\tthis.source=null;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn Image;\r\n\t})(Component)\r\n\r\n\r\n\t/**\r\n\t*<p> <code>Label</code> 类用于创建显示对象以显示文本。</p>\r\n\t*\r\n\t*@example 以下示例代码，创建了一个 <code>Label</code> 实例。\r\n\t*<listing version=\"3.0\">\r\n\t*package\r\n\t*{\r\n\t\t*import laya.ui.Label;\r\n\t\t*public class Label_Example\r\n\t\t*{\r\n\t\t\t*public function Label_Example()\r\n\t\t\t*{\r\n\t\t\t\t*Laya.init(640,800);//设置游戏画布宽高、渲染模式。\r\n\t\t\t\t*Laya.stage.bgColor=\"#efefef\";//设置画布的背景颜色。\r\n\t\t\t\t*onInit();\r\n\t\t\t\t*}\r\n\t\t\t*private function onInit():void\r\n\t\t\t*{\r\n\t\t\t\t*var label:Label=new Label();//创建一个 Label 类的实例对象 label 。\r\n\t\t\t\t*label.font=\"Arial\";//设置 label 的字体。\r\n\t\t\t\t*label.bold=true;//设置 label 显示为粗体。\r\n\t\t\t\t*label.leading=4;//设置 label 的行间距。\r\n\t\t\t\t*label.wordWrap=true;//设置 label 自动换行。\r\n\t\t\t\t*label.padding=\"10,10,10,10\";//设置 label 的边距。\r\n\t\t\t\t*label.color=\"#ff00ff\";//设置 label 的颜色。\r\n\t\t\t\t*label.text=\"Hello everyone,我是一个可爱的文本！\";//设置 label 的文本内容。\r\n\t\t\t\t*label.x=100;//设置 label 对象的属性 x 的值，用于控制 label 对象的显示位置。\r\n\t\t\t\t*label.y=100;//设置 label 对象的属性 y 的值，用于控制 label 对象的显示位置。\r\n\t\t\t\t*label.width=300;//设置 label 的宽度。\r\n\t\t\t\t*label.height=200;//设置 label 的高度。\r\n\t\t\t\t*Laya.stage.addChild(label);//将 label 添加到显示列表。\r\n\t\t\t\t*var passwordLabel:Label=new Label(\"请原谅我，我不想被人看到我心里话。\");//创建一个 Label 类的实例对象 passwordLabel 。\r\n\t\t\t\t*passwordLabel.asPassword=true;//设置 passwordLabel 的显示反式为密码显示。\r\n\t\t\t\t*passwordLabel.x=100;//设置 passwordLabel 对象的属性 x 的值，用于控制 passwordLabel 对象的显示位置。\r\n\t\t\t\t*passwordLabel.y=350;//设置 passwordLabel 对象的属性 y 的值，用于控制 passwordLabel 对象的显示位置。\r\n\t\t\t\t*passwordLabel.width=300;//设置 passwordLabel 的宽度。\r\n\t\t\t\t*passwordLabel.color=\"#000000\";//设置 passwordLabel 的文本颜色。\r\n\t\t\t\t*passwordLabel.bgColor=\"#ccffff\";//设置 passwordLabel 的背景颜色。\r\n\t\t\t\t*passwordLabel.fontSize=20;//设置 passwordLabel 的文本字体大小。\r\n\t\t\t\t*Laya.stage.addChild(passwordLabel);//将 passwordLabel 添加到显示列表。\r\n\t\t\t\t*}\r\n\t\t\t*}\r\n\t\t*}\r\n\t*</listing>\r\n\t*<listing version=\"3.0\">\r\n\t*Laya.init(640,800);//设置游戏画布宽高\r\n\t*Laya.stage.bgColor=\"#efefef\";//设置画布的背景颜色\r\n\t*onInit();\r\n\t*function onInit(){\r\n\t\t*var label=new laya.ui.Label();//创建一个 Label 类的实例对象 label 。\r\n\t\t*label.font=\"Arial\";//设置 label 的字体。\r\n\t\t*label.bold=true;//设置 label 显示为粗体。\r\n\t\t*label.leading=4;//设置 label 的行间距。\r\n\t\t*label.wordWrap=true;//设置 label 自动换行。\r\n\t\t*label.padding=\"10,10,10,10\";//设置 label 的边距。\r\n\t\t*label.color=\"#ff00ff\";//设置 label 的颜色。\r\n\t\t*label.text=\"Hello everyone,我是一个可爱的文本！\";//设置 label 的文本内容。\r\n\t\t*label.x=100;//设置 label 对象的属性 x 的值，用于控制 label 对象的显示位置。\r\n\t\t*label.y=100;//设置 label 对象的属性 y 的值，用于控制 label 对象的显示位置。\r\n\t\t*label.width=300;//设置 label 的宽度。\r\n\t\t*label.height=200;//设置 label 的高度。\r\n\t\t*Laya.stage.addChild(label);//将 label 添加到显示列表。\r\n\t\t*var passwordLabel=new laya.ui.Label(\"请原谅我，我不想被人看到我心里话。\");//创建一个 Label 类的实例对象 passwordLabel 。\r\n\t\t*passwordLabel.asPassword=true;//设置 passwordLabel 的显示反式为密码显示。\r\n\t\t*passwordLabel.x=100;//设置 passwordLabel 对象的属性 x 的值，用于控制 passwordLabel 对象的显示位置。\r\n\t\t*passwordLabel.y=350;//设置 passwordLabel 对象的属性 y 的值，用于控制 passwordLabel 对象的显示位置。\r\n\t\t*passwordLabel.width=300;//设置 passwordLabel 的宽度。\r\n\t\t*passwordLabel.color=\"#000000\";//设置 passwordLabel 的文本颜色。\r\n\t\t*passwordLabel.bgColor=\"#ccffff\";//设置 passwordLabel 的背景颜色。\r\n\t\t*passwordLabel.fontSize=20;//设置 passwordLabel 的文本字体大小。\r\n\t\t*Laya.stage.addChild(passwordLabel);//将 passwordLabel 添加到显示列表。\r\n\t\t*}\r\n\t*</listing>\r\n\t*<listing version=\"3.0\">\r\n\t*import Label=laya.ui.Label;\r\n\t*class Label_Example {\r\n\t\t*constructor(){\r\n\t\t\t*Laya.init(640,800);//设置游戏画布宽高。\r\n\t\t\t*Laya.stage.bgColor=\"#efefef\";//设置画布的背景颜色。\r\n\t\t\t*this.onInit();\r\n\t\t\t*}\r\n\t\t*private onInit():void {\r\n\t\t\t*var label:Label=new Label();//创建一个 Label 类的实例对象 label 。\r\n\t\t\t*label.font=\"Arial\";//设置 label 的字体。\r\n\t\t\t*label.bold=true;//设置 label 显示为粗体。\r\n\t\t\t*label.leading=4;//设置 label 的行间距。\r\n\t\t\t*label.wordWrap=true;//设置 label 自动换行。\r\n\t\t\t*label.padding=\"10,10,10,10\";//设置 label 的边距。\r\n\t\t\t*label.color=\"#ff00ff\";//设置 label 的颜色。\r\n\t\t\t*label.text=\"Hello everyone,我是一个可爱的文本！\";//设置 label 的文本内容。\r\n\t\t\t*label.x=100;//设置 label 对象的属性 x 的值，用于控制 label 对象的显示位置。\r\n\t\t\t*label.y=100;//设置 label 对象的属性 y 的值，用于控制 label 对象的显示位置。\r\n\t\t\t*label.width=300;//设置 label 的宽度。\r\n\t\t\t*label.height=200;//设置 label 的高度。\r\n\t\t\t*Laya.stage.addChild(label);//将 label 添加到显示列表。\r\n\t\t\t*var passwordLabel:Label=new Label(\"请原谅我，我不想被人看到我心里话。\");//创建一个 Label 类的实例对象 passwordLabel 。\r\n\t\t\t*passwordLabel.asPassword=true;//设置 passwordLabel 的显示反式为密码显示。\r\n\t\t\t*passwordLabel.x=100;//设置 passwordLabel 对象的属性 x 的值，用于控制 passwordLabel 对象的显示位置。\r\n\t\t\t*passwordLabel.y=350;//设置 passwordLabel 对象的属性 y 的值，用于控制 passwordLabel 对象的显示位置。\r\n\t\t\t*passwordLabel.width=300;//设置 passwordLabel 的宽度。\r\n\t\t\t*passwordLabel.color=\"#000000\";//设置 passwordLabel 的文本颜色。\r\n\t\t\t*passwordLabel.bgColor=\"#ccffff\";//设置 passwordLabel 的背景颜色。\r\n\t\t\t*passwordLabel.fontSize=20;//设置 passwordLabel 的文本字体大小。\r\n\t\t\t*Laya.stage.addChild(passwordLabel);//将 passwordLabel 添加到显示列表。\r\n\t\t\t*}\r\n\t\t*}\r\n\t*</listing>\r\n\t*@see laya.display.Text\r\n\t*/\r\n\t//class laya.ui.Label extends laya.ui.Component\r\n\tvar Label=(function(_super){\r\n\t\tfunction Label(text){\r\n\t\t\tthis._tf=null;\r\n\t\t\tLabel.__super.call(this);\r\n\t\t\t(text===void 0)&& (text=\"\");\r\n\t\t\tFont.defaultColor=Styles.labelColor;\r\n\t\t\tthis.text=text;\r\n\t\t}\r\n\r\n\t\t__class(Label,'laya.ui.Label',_super);\r\n\t\tvar __proto=Label.prototype;\r\n\t\t/**@inheritDoc */\r\n\t\t__proto.destroy=function(destroyChild){\r\n\t\t\t(destroyChild===void 0)&& (destroyChild=true);\r\n\t\t\t_super.prototype.destroy.call(this,destroyChild);\r\n\t\t\tthis._tf=null;\r\n\t\t}\r\n\r\n\t\t/**@inheritDoc */\r\n\t\t__proto.createChildren=function(){\r\n\t\t\tthis.addChild(this._tf=new Text());\r\n\t\t}\r\n\r\n\t\t/**@copy laya.display.Text#changeText()\r\n\t\t**/\r\n\t\t__proto.changeText=function(text){\r\n\t\t\tthis._tf.changeText(text);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@copy laya.display.Text#bgColor\r\n\t\t*/\r\n\t\t__getset(0,__proto,'bgColor',function(){\r\n\t\t\treturn this._tf.bgColor\r\n\t\t\t},function(value){\r\n\t\t\tthis._tf.bgColor=value;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*@copy laya.display.Text#underline\r\n\t\t*/\r\n\t\t/**\r\n\t\t*@copy laya.display.Text#underline\r\n\t\t*/\r\n\t\t__getset(0,__proto,'underline',function(){\r\n\t\t\treturn this._tf.underline;\r\n\t\t\t},function(value){\r\n\t\t\tthis._tf.underline=value;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*@copy laya.display.Text#leading\r\n\t\t*/\r\n\t\t__getset(0,__proto,'leading',function(){\r\n\t\t\treturn this._tf.leading;\r\n\t\t\t},function(value){\r\n\t\t\tthis._tf.leading=value;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*@inheritDoc\r\n\t\t*/\r\n\t\t__getset(0,__proto,'measureWidth',function(){\r\n\t\t\treturn this._tf.width;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*@copy laya.display.Text#overflow\r\n\t\t*/\r\n\t\t/**\r\n\t\t*@copy laya.display.Text#overflow\r\n\t\t*/\r\n\t\t__getset(0,__proto,'overflow',function(){\r\n\t\t\treturn this._tf.overflow;\r\n\t\t\t},function(value){\r\n\t\t\tthis._tf.overflow=value;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*@inheritDoc\r\n\t\t*/\r\n\t\t__getset(0,__proto,'measureHeight',function(){\r\n\t\t\treturn this._tf.height;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*@copy laya.display.Text#stroke\r\n\t\t*/\r\n\t\t__getset(0,__proto,'stroke',function(){\r\n\t\t\treturn this._tf.stroke;\r\n\t\t\t},function(value){\r\n\t\t\tthis._tf.stroke=value;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*@inheritDoc\r\n\t\t*/\r\n\t\t/**\r\n\t\t*@inheritDoc\r\n\t\t*/\r\n\t\t__getset(0,__proto,'width',function(){\r\n\t\t\tif (this._width || this._tf.text)return _super.prototype._$get_width.call(this);\r\n\t\t\treturn 0;\r\n\t\t\t},function(value){\r\n\t\t\t_super.prototype._$set_width.call(this,value);\r\n\t\t\tthis._tf.width=value;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*文本控件实体 <code>Text</code> 实例。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'textField',function(){\r\n\t\t\treturn this._tf;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*当前文本内容字符串。\r\n\t\t*@see laya.display.Text.text\r\n\t\t*/\r\n\t\t__getset(0,__proto,'text',function(){\r\n\t\t\treturn this._tf.text;\r\n\t\t\t},function(value){\r\n\t\t\tif (this._tf.text !=value){\r\n\t\t\t\tif(value)\r\n\t\t\t\t\tvalue=(value+\"\").replace(Label._textReg,\"\\n\");\r\n\t\t\t\tthis._tf.text=value;\r\n\t\t\t\tthis.event(\"change\");\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*@copy laya.display.Text#valign\r\n\t\t*/\r\n\t\t__getset(0,__proto,'valign',function(){\r\n\t\t\treturn this._tf.valign;\r\n\t\t\t},function(value){\r\n\t\t\tthis._tf.valign=value;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*@copy laya.display.Text#borderColor\r\n\t\t*/\r\n\t\t__getset(0,__proto,'borderColor',function(){\r\n\t\t\treturn this._tf.borderColor\r\n\t\t\t},function(value){\r\n\t\t\tthis._tf.borderColor=value;\r\n\t\t});\r\n\r\n\t\t/**@inheritDoc */\r\n\t\t__getset(0,__proto,'dataSource',_super.prototype._$get_dataSource,function(value){\r\n\t\t\tthis._dataSource=value;\r\n\t\t\tif ((typeof value=='number')|| (typeof value=='string'))this.text=value+\"\";\r\n\t\t\telse _super.prototype._$set_dataSource.call(this,value);\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*@copy laya.display.Text#strokeColor\r\n\t\t*/\r\n\t\t__getset(0,__proto,'strokeColor',function(){\r\n\t\t\treturn this._tf.strokeColor;\r\n\t\t\t},function(value){\r\n\t\t\tthis._tf.strokeColor=value;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*@copy laya.display.Text#bold\r\n\t\t*/\r\n\t\t__getset(0,__proto,'bold',function(){\r\n\t\t\treturn this._tf.bold;\r\n\t\t\t},function(value){\r\n\t\t\tthis._tf.bold=value;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*<p>边距信息</p>\r\n\t\t*<p>\"上边距，右边距，下边距 , 左边距（边距以像素为单位）\"</p>\r\n\t\t*@see laya.display.Text.padding\r\n\t\t*/\r\n\t\t__getset(0,__proto,'padding',function(){\r\n\t\t\treturn this._tf.padding.join(\",\");\r\n\t\t\t},function(value){\r\n\t\t\tthis._tf.padding=UIUtils.fillArray(Styles.labelPadding,value,Number);\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*@copy laya.display.Text#align\r\n\t\t*/\r\n\t\t__getset(0,__proto,'align',function(){\r\n\t\t\treturn this._tf.align;\r\n\t\t\t},function(value){\r\n\t\t\tthis._tf.align=value;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*@copy laya.display.Text#color\r\n\t\t*/\r\n\t\t__getset(0,__proto,'color',function(){\r\n\t\t\treturn this._tf.color;\r\n\t\t\t},function(value){\r\n\t\t\tthis._tf.color=value;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*@copy laya.display.Text#fontSize\r\n\t\t*/\r\n\t\t__getset(0,__proto,'fontSize',function(){\r\n\t\t\treturn this._tf.fontSize;\r\n\t\t\t},function(value){\r\n\t\t\tthis._tf.fontSize=value;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*@copy laya.display.Text#font\r\n\t\t*/\r\n\t\t__getset(0,__proto,'font',function(){\r\n\t\t\treturn this._tf.font;\r\n\t\t\t},function(value){\r\n\t\t\tthis._tf.font=value;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*@copy laya.display.Text#underlineColor\r\n\t\t*/\r\n\t\t/**\r\n\t\t*@copy laya.display.Text#underlineColor\r\n\t\t*/\r\n\t\t__getset(0,__proto,'underlineColor',function(){\r\n\t\t\treturn this._tf.underlineColor;\r\n\t\t\t},function(value){\r\n\t\t\tthis._tf.underlineColor=value;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*@copy laya.display.Text#italic\r\n\t\t*/\r\n\t\t__getset(0,__proto,'italic',function(){\r\n\t\t\treturn this._tf.italic;\r\n\t\t\t},function(value){\r\n\t\t\tthis._tf.italic=value;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*@copy laya.display.Text#wordWrap\r\n\t\t*/\r\n\t\t/**\r\n\t\t*@copy laya.display.Text#wordWrap\r\n\t\t*/\r\n\t\t__getset(0,__proto,'wordWrap',function(){\r\n\t\t\treturn this._tf.wordWrap;\r\n\t\t\t},function(value){\r\n\t\t\tthis._tf.wordWrap=value;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*@inheritDoc\r\n\t\t*/\r\n\t\t/**\r\n\t\t*@inheritDoc\r\n\t\t*/\r\n\t\t__getset(0,__proto,'height',function(){\r\n\t\t\tif (this._height || this._tf.text)return _super.prototype._$get_height.call(this);\r\n\t\t\treturn 0;\r\n\t\t\t},function(value){\r\n\t\t\t_super.prototype._$set_height.call(this,value);\r\n\t\t\tthis._tf.height=value;\r\n\t\t});\r\n\r\n\t\t__static(Label,\r\n\t\t['_textReg',function(){return this._textReg=new RegExp(\"\\\\\\\\n\",\"g\");}\r\n\t\t]);\r\n\t\treturn Label;\r\n\t})(Component)\r\n\r\n\r\n\t/**\r\n\t*<code>ProgressBar</code> 组件显示内容的加载进度。\r\n\t*@example 以下示例代码，创建了一个新的 <code>ProgressBar</code> 实例，设置了它的皮肤、位置、宽高、网格等信息，并添加到舞台上。\r\n\t*<listing version=\"3.0\">\r\n\t*package\r\n\t*{\r\n\t\t*import laya.ui.ProgressBar;\r\n\t\t*import laya.utils.Handler;\r\n\t\t*public class ProgressBar_Example\r\n\t\t*{\r\n\t\t\t*private var progressBar:ProgressBar;\r\n\t\t\t*public function ProgressBar_Example()\r\n\t\t\t*{\r\n\t\t\t\t*Laya.init(640,800);//设置游戏画布宽高。\r\n\t\t\t\t*Laya.stage.bgColor=\"#efefef\";//设置画布的背景颜色。\r\n\t\t\t\t*Laya.loader.load([\"resource/ui/progress.png\",\"resource/ui/progress$bar.png\"],Handler.create(this,onLoadComplete));//加载资源。\r\n\t\t\t\t*}\r\n\t\t\t*private function onLoadComplete():void\r\n\t\t\t*{\r\n\t\t\t\t*progressBar=new ProgressBar(\"resource/ui/progress.png\");//创建一个 ProgressBar 类的实例对象 progressBar 。\r\n\t\t\t\t*progressBar.x=100;//设置 progressBar 对象的属性 x 的值，用于控制 progressBar 对象的显示位置。\r\n\t\t\t\t*progressBar.y=100;//设置 progressBar 对象的属性 y 的值，用于控制 progressBar 对象的显示位置。\r\n\t\t\t\t*progressBar.value=0.3;//设置 progressBar 的进度值。\r\n\t\t\t\t*progressBar.width=200;//设置 progressBar 的宽度。\r\n\t\t\t\t*progressBar.height=50;//设置 progressBar 的高度。\r\n\t\t\t\t*progressBar.sizeGrid=\"5,10,5,10\";//设置 progressBar 的网格信息。\r\n\t\t\t\t*progressBar.changeHandler=new Handler(this,onChange);//设置 progressBar 的value值改变时执行的处理器。\r\n\t\t\t\t*Laya.stage.addChild(progressBar);//将 progressBar 添加到显示列表。\r\n\t\t\t\t*Laya.timer.once(3000,this,changeValue);//设定 3000ms（毫秒）后，执行函数changeValue。\r\n\t\t\t\t*}\r\n\t\t\t*private function changeValue():void\r\n\t\t\t*{\r\n\t\t\t\t*trace(\"改变进度条的进度值。\");\r\n\t\t\t\t*progressBar.value=0.6;\r\n\t\t\t\t*}\r\n\t\t\t*private function onChange(value:Number):void\r\n\t\t\t*{\r\n\t\t\t\t*trace(\"进度发生改变： value=\" ,value);\r\n\t\t\t\t*}\r\n\t\t\t*}\r\n\t\t*}\r\n\t*</listing>\r\n\t*<listing version=\"3.0\">\r\n\t*Laya.init(640,800);//设置游戏画布宽高\r\n\t*Laya.stage.bgColor=\"#efefef\";//设置画布的背景颜色\r\n\t*var res=[\"resource/ui/progress.png\",\"resource/ui/progress$bar.png\"];\r\n\t*Laya.loader.load(res,laya.utils.Handler.create(this,onLoadComplete));//加载资源。\r\n\t*function onLoadComplete()\r\n\t*{\r\n\t\t*progressBar=new laya.ui.ProgressBar(\"resource/ui/progress.png\");//创建一个 ProgressBar 类的实例对象 progressBar 。\r\n\t\t*progressBar.x=100;//设置 progressBar 对象的属性 x 的值，用于控制 progressBar 对象的显示位置。\r\n\t\t*progressBar.y=100;//设置 progressBar 对象的属性 y 的值，用于控制 progressBar 对象的显示位置。\r\n\t\t*progressBar.value=0.3;//设置 progressBar 的进度值。\r\n\t\t*progressBar.width=200;//设置 progressBar 的宽度。\r\n\t\t*progressBar.height=50;//设置 progressBar 的高度。\r\n\t\t*progressBar.sizeGrid=\"10,5,10,5\";//设置 progressBar 的网格信息。\r\n\t\t*progressBar.changeHandler=new laya.utils.Handler(this,onChange);//设置 progressBar 的value值改变时执行的处理器。\r\n\t\t*Laya.stage.addChild(progressBar);//将 progressBar 添加到显示列表。\r\n\t\t*Laya.timer.once(3000,this,changeValue);//设定 3000ms（毫秒）后，执行函数changeValue。\r\n\t\t*}\r\n\t*function changeValue()\r\n\t*{\r\n\t\t*console.log(\"改变进度条的进度值。\");\r\n\t\t*progressBar.value=0.6;\r\n\t\t*}\r\n\t*function onChange(value)\r\n\t*{\r\n\t\t*console.log(\"进度发生改变： value=\" ,value);\r\n\t\t*}\r\n\t*</listing>\r\n\t*<listing version=\"3.0\">\r\n\t*import ProgressBar=laya.ui.ProgressBar;\r\n\t*import Handler=laya.utils.Handler;\r\n\t*class ProgressBar_Example {\r\n\t\t*private progressBar:ProgressBar;\r\n\t\t*public ProgressBar_Example(){\r\n\t\t\t*Laya.init(640,800);//设置游戏画布宽高。\r\n\t\t\t*Laya.stage.bgColor=\"#efefef\";//设置画布的背景颜色。\r\n\t\t\t*Laya.loader.load([\"resource/ui/progress.png\",\"resource/ui/progress$bar.png\"],Handler.create(this,this.onLoadComplete));//加载资源。\r\n\t\t\t*}\r\n\t\t*private onLoadComplete():void {\r\n\t\t\t*this.progressBar=new ProgressBar(\"resource/ui/progress.png\");//创建一个 ProgressBar 类的实例对象 progressBar 。\r\n\t\t\t*this.progressBar.x=100;//设置 progressBar 对象的属性 x 的值，用于控制 progressBar 对象的显示位置。\r\n\t\t\t*this.progressBar.y=100;//设置 progressBar 对象的属性 y 的值，用于控制 progressBar 对象的显示位置。\r\n\t\t\t*this.progressBar.value=0.3;//设置 progressBar 的进度值。\r\n\t\t\t*this.progressBar.width=200;//设置 progressBar 的宽度。\r\n\t\t\t*this.progressBar.height=50;//设置 progressBar 的高度。\r\n\t\t\t*this.progressBar.sizeGrid=\"5,10,5,10\";//设置 progressBar 的网格信息。\r\n\t\t\t*this.progressBar.changeHandler=new Handler(this,this.onChange);//设置 progressBar 的value值改变时执行的处理器。\r\n\t\t\t*Laya.stage.addChild(this.progressBar);//将 progressBar 添加到显示列表。\r\n\t\t\t*Laya.timer.once(3000,this,this.changeValue);//设定 3000ms（毫秒）后，执行函数changeValue。\r\n\t\t\t*}\r\n\t\t*private changeValue():void {\r\n\t\t\t*console.log(\"改变进度条的进度值。\");\r\n\t\t\t*this.progressBar.value=0.6;\r\n\t\t\t*}\r\n\t\t*private onChange(value:number):void {\r\n\t\t\t*console.log(\"进度发生改变： value=\",value);\r\n\t\t\t*}\r\n\t\t*}\r\n\t*</listing>\r\n\t*/\r\n\t//class laya.ui.ProgressBar extends laya.ui.Component\r\n\tvar ProgressBar=(function(_super){\r\n\t\tfunction ProgressBar(skin){\r\n\t\t\tthis.changeHandler=null;\r\n\t\t\tthis._bg=null;\r\n\t\t\tthis._bar=null;\r\n\t\t\tthis._skin=null;\r\n\t\t\tthis._value=0.5;\r\n\t\t\tProgressBar.__super.call(this);\r\n\t\t\tthis.skin=skin;\r\n\t\t}\r\n\r\n\t\t__class(ProgressBar,'laya.ui.ProgressBar',_super);\r\n\t\tvar __proto=ProgressBar.prototype;\r\n\t\t/**@inheritDoc */\r\n\t\t__proto.destroy=function(destroyChild){\r\n\t\t\t(destroyChild===void 0)&& (destroyChild=true);\r\n\t\t\t_super.prototype.destroy.call(this,destroyChild);\r\n\t\t\tthis._bg && this._bg.destroy(destroyChild);\r\n\t\t\tthis._bar && this._bar.destroy(destroyChild);\r\n\t\t\tthis._bg=this._bar=null;\r\n\t\t\tthis.changeHandler=null;\r\n\t\t}\r\n\r\n\t\t/**@inheritDoc */\r\n\t\t__proto.createChildren=function(){\r\n\t\t\tthis.addChild(this._bg=new Image());\r\n\t\t\tthis.addChild(this._bar=new Image());\r\n\t\t\tthis._bar._bitmap.autoCacheCmd=false;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*更改进度值的显示。\r\n\t\t*/\r\n\t\t__proto.changeValue=function(){\r\n\t\t\tif (this.sizeGrid){\r\n\t\t\t\tvar grid=this.sizeGrid.split(\",\");\r\n\t\t\t\tvar left=Number(grid[3]);\r\n\t\t\t\tvar right=Number(grid[1]);\r\n\t\t\t\tvar max=this.width-left-right;\r\n\t\t\t\tvar sw=max *this._value;\r\n\t\t\t\tthis._bar.width=left+right+sw;\r\n\t\t\t\tthis._bar.visible=this._bar.width > left+right;\r\n\t\t\t\t}else {\r\n\t\t\t\tthis._bar.width=this.width *this._value;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*<p>当前 <code>ProgressBar</code> 实例的进度条背景位图（ <code>Image</code> 实例）的有效缩放网格数据。</p>\r\n\t\t*<p>数据格式：\"上边距,右边距,下边距,左边距,是否重复填充(值为0：不重复填充，1：重复填充)\"，以逗号分隔。\r\n\t\t*<ul><li>例如：\"4,4,4,4,1\"</li></ul></p>\r\n\t\t*@see laya.ui.AutoBitmap.sizeGrid\r\n\t\t*/\r\n\t\t__getset(0,__proto,'sizeGrid',function(){\r\n\t\t\treturn this._bg.sizeGrid;\r\n\t\t\t},function(value){\r\n\t\t\tthis._bg.sizeGrid=this._bar.sizeGrid=value;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*获取背景条对象。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'bg',function(){\r\n\t\t\treturn this._bg;\r\n\t\t});\r\n\r\n\t\t/**@inheritDoc */\r\n\t\t__getset(0,__proto,'dataSource',_super.prototype._$get_dataSource,function(value){\r\n\t\t\tthis._dataSource=value;\r\n\t\t\tif ((typeof value=='number')|| (typeof value=='string'))this.value=Number(value);\r\n\t\t\telse _super.prototype._$set_dataSource.call(this,value);\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*当前的进度量。\r\n\t\t*<p><b>取值：</b>介于0和1之间。</p>\r\n\t\t*/\r\n\t\t__getset(0,__proto,'value',function(){\r\n\t\t\treturn this._value;\r\n\t\t\t},function(num){\r\n\t\t\tif (this._value !=num){\r\n\t\t\t\tnum=num > 1 ? 1 :num < 0 ? 0 :num;\r\n\t\t\t\tthis._value=num;\r\n\t\t\t\tthis.callLater(this.changeValue);\r\n\t\t\t\tthis.event(\"change\");\r\n\t\t\t\tthis.changeHandler && this.changeHandler.runWith(num);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t/**@inheritDoc */\r\n\t\t__getset(0,__proto,'measureHeight',function(){\r\n\t\t\treturn this._bg.height;\r\n\t\t});\r\n\r\n\t\t/**@inheritDoc */\r\n\t\t__getset(0,__proto,'height',_super.prototype._$get_height,function(value){\r\n\t\t\t_super.prototype._$set_height.call(this,value);\r\n\t\t\tthis._bg.height=this._height;\r\n\t\t\tthis._bar.height=this._height;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*获取进度条对象。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'bar',function(){\r\n\t\t\treturn this._bar;\r\n\t\t});\r\n\r\n\t\t/**@inheritDoc */\r\n\t\t__getset(0,__proto,'measureWidth',function(){\r\n\t\t\treturn this._bg.width;\r\n\t\t});\r\n\r\n\t\t/**@inheritDoc */\r\n\t\t__getset(0,__proto,'width',_super.prototype._$get_width,function(value){\r\n\t\t\t_super.prototype._$set_width.call(this,value);\r\n\t\t\tthis._bg.width=this._width;\r\n\t\t\tthis.callLater(this.changeValue);\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*@copy laya.ui.Image#skin\r\n\t\t*/\r\n\t\t__getset(0,__proto,'skin',function(){\r\n\t\t\treturn this._skin;\r\n\t\t\t},function(value){\r\n\t\t\tif (this._skin !=value){\r\n\t\t\t\tthis._skin=value;\r\n\t\t\t\tthis._bg.skin=this._skin;\r\n\t\t\t\tthis._bar.skin=this._skin.replace(\".png\",\"$bar.png\");\r\n\t\t\t\tthis.callLater(this.changeValue);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn ProgressBar;\r\n\t})(Component)\r\n\r\n\r\n\t/**\r\n\t*<p><code>Input</code> 类用于创建显示对象以显示和输入文本。</p>\r\n\t*/\r\n\t//class laya.display.Input extends laya.display.Text\r\n\tvar Input=(function(_super){\r\n\t\tfunction Input(){\r\n\t\t\tthis._focus=false;\r\n\t\t\tthis._multiline=false;\r\n\t\t\tthis._editable=true;\r\n\t\t\tthis._restrictPattern=null;\r\n\t\t\tthis._type=\"text\";\r\n\t\t\tthis._prompt='';\r\n\t\t\tthis._promptColor=\"#A9A9A9\";\r\n\t\t\tthis._originColor=\"#000000\";\r\n\t\t\tthis._content='';\r\n\t\t\tInput.__super.call(this);\r\n\t\t\tthis._maxChars=1E5;\r\n\t\t\tthis._width=100;\r\n\t\t\tthis._height=20;\r\n\t\t\tthis.multiline=false;\r\n\t\t\tthis.overflow=Text.SCROLL;\r\n\t\t\tthis.on(\"mousedown\",this,this._onMouseDown);\r\n\t\t\tthis.on(\"undisplay\",this,this._onUnDisplay);\r\n\t\t}\r\n\r\n\t\t__class(Input,'laya.display.Input',_super);\r\n\t\tvar __proto=Input.prototype;\r\n\t\t/**\r\n\t\t*设置光标位置和选取字符。\r\n\t\t*@param startIndex 光标起始位置。\r\n\t\t*@param endIndex 光标结束位置。\r\n\t\t*/\r\n\t\t__proto.setSelection=function(startIndex,endIndex){\r\n\t\t\tlaya.display.Input.inputElement.selectionStart=startIndex;\r\n\t\t\tlaya.display.Input.inputElement.selectionEnd=endIndex;\r\n\t\t}\r\n\r\n\t\t/**@private */\r\n\t\t__proto._onUnDisplay=function(e){\r\n\t\t\tthis.focus=false;\r\n\t\t}\r\n\r\n\t\t/**@private */\r\n\t\t__proto._onMouseDown=function(e){\r\n\t\t\tthis.focus=true;\r\n\t\t\tLaya.stage.on(\"mousedown\",this,this._checkBlur);\r\n\t\t}\r\n\r\n\t\t/**@private */\r\n\t\t__proto._checkBlur=function(e){\r\n\t\t\tif (e.nativeEvent.target !=laya.display.Input.input && e.nativeEvent.target !=laya.display.Input.area && e.target !=this)\r\n\t\t\t\tthis.focus=false;\r\n\t\t}\r\n\r\n\t\t/**@inheritDoc*/\r\n\t\t__proto.render=function(context,x,y){\r\n\t\t\tlaya.display.Sprite.prototype.render.call(this,context,x,y);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*在输入期间，如果 Input 实例的位置改变，调用该方法同步输入框的位置。\r\n\t\t*/\r\n\t\t__proto._syncInputTransform=function(){\r\n\t\t\tvar style=this.nativeInput.style;\r\n\t\t\tvar stage=Laya.stage;\r\n\t\t\tvar rec;\r\n\t\t\trec=Utils1.getGlobalPosAndScale(this);\r\n\t\t\tvar m=stage._canvasTransform.clone();\r\n\t\t\tvar tm=m.clone();\r\n\t\t\ttm.rotate(-Math.PI / 180 *Laya.stage.canvasDegree);\r\n\t\t\ttm.scale(Laya.stage.clientScaleX,Laya.stage.clientScaleY);\r\n\t\t\tvar perpendicular=(Laya.stage.canvasDegree % 180 !=0);\r\n\t\t\tvar sx=perpendicular ? tm.d :tm.a;\r\n\t\t\tvar sy=perpendicular ? tm.a :tm.d;\r\n\t\t\ttm.destroy();\r\n\t\t\tvar tx=this.padding[3];\r\n\t\t\tvar ty=this.padding[0];\r\n\t\t\tif (Laya.stage.canvasDegree==0){\r\n\t\t\t\ttx+=rec.x;\r\n\t\t\t\tty+=rec.y;\r\n\t\t\t\ttx *=sx;\r\n\t\t\t\tty *=sy;\r\n\t\t\t\ttx+=m.tx;\r\n\t\t\t\tty+=m.ty;\r\n\t\t\t\t}else if (Laya.stage.canvasDegree==90){\r\n\t\t\t\ttx+=rec.y;\r\n\t\t\t\tty+=rec.x;\r\n\t\t\t\ttx *=sx;\r\n\t\t\t\tty *=sy;\r\n\t\t\t\ttx=m.tx-tx;\r\n\t\t\t\tty+=m.ty;\r\n\t\t\t\t}else{\r\n\t\t\t\ttx+=rec.y;\r\n\t\t\t\tty+=rec.x;\r\n\t\t\t\ttx *=sx;\r\n\t\t\t\tty *=sy;\r\n\t\t\t\ttx+=m.tx;\r\n\t\t\t\tty=m.ty-ty;\r\n\t\t\t};\r\n\t\t\tvar quarter=0.785;\r\n\t\t\tvar r=Math.atan2(rec.height,rec.width)-quarter;\r\n\t\t\tvar sin=Math.sin(r),cos=Math.cos(r);\r\n\t\t\tvar tsx=cos *rec.width+sin *rec.height;\r\n\t\t\tvar tsy=cos *rec.height-sin *rec.width;\r\n\t\t\tsx *=(perpendicular ? tsy :tsx);\r\n\t\t\tsy *=(perpendicular ? tsx :tsy);\r\n\t\t\tm.tx=0;\r\n\t\t\tm.ty=0;\r\n\t\t\tr *=180 / 3.1415;\r\n\t\t\tInput.inputContainer.style.transform=\"scale(\"+sx+\",\"+sy+\") rotate(\"+(Laya.stage.canvasDegree+r)+\"deg)\";\r\n\t\t\tInput.inputContainer.style.webkitTransform=\"scale(\"+sx+\",\"+sy+\") rotate(\"+(Laya.stage.canvasDegree+r)+\"deg)\";\r\n\t\t\tInput.inputContainer.setPos(tx,ty);\r\n\t\t\tm.destroy();\r\n\t\t\tvar inputWid=this._width-this.padding[1]-this.padding[3];\r\n\t\t\tvar inputHei=this._height-this.padding[0]-this.padding[2];\r\n\t\t\tthis.nativeInput.setSize(inputWid,inputHei);\r\n\t\t\tif (Render.isConchApp){\r\n\t\t\t\tthis.nativeInput.setPos(tx,ty);\r\n\t\t\t\tthis.nativeInput.setScale(sx,sy);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**选中所有文本。*/\r\n\t\t__proto.select=function(){\r\n\t\t\tthis.nativeInput.select();\r\n\t\t}\r\n\r\n\t\t/**@private 设置输入法（textarea或input）*/\r\n\t\t__proto._setInputMethod=function(){\r\n\t\t\tInput.input.parentElement && (Input.inputContainer.removeChild(Input.input));\r\n\t\t\tInput.area.parentElement && (Input.inputContainer.removeChild(Input.area));\r\n\t\t\tInput.inputElement=(this._multiline ? Input.area :Input.input);\r\n\t\t\tInput.inputContainer.appendChild(Input.inputElement);\r\n\t\t}\r\n\r\n\t\t/**@private */\r\n\t\t__proto._focusIn=function(){\r\n\t\t\tlaya.display.Input.isInputting=true;\r\n\t\t\tvar input=this.nativeInput;\r\n\t\t\tthis._focus=true;\r\n\t\t\tvar cssStyle=input.style;\r\n\t\t\tcssStyle.whiteSpace=(this.wordWrap ? \"pre-wrap\" :\"nowrap\");\r\n\t\t\tthis._setPromptColor();\r\n\t\t\tinput.readOnly=!this._editable;\r\n\t\t\tinput.maxLength=this._maxChars;\r\n\t\t\tvar padding=this.padding;\r\n\t\t\tinput.type=this._type;\r\n\t\t\tinput.value=this._content;\r\n\t\t\tinput.placeholder=this._prompt;\r\n\t\t\tLaya.stage.off(\"keydown\",this,this._onKeyDown);\r\n\t\t\tLaya.stage.on(\"keydown\",this,this._onKeyDown);\r\n\t\t\tLaya.stage.focus=this;\r\n\t\t\tthis.event(\"focus\");\r\n\t\t\tif (Browser.onPC)input.focus();\r\n\t\t\tvar temp=this._text;\r\n\t\t\tthis._text=null;\r\n\t\t\tthis.typeset();\r\n\t\t\tinput.setColor(this._originColor);\r\n\t\t\tinput.setFontSize(this.fontSize);\r\n\t\t\tinput.setFontFace(this.font);\r\n\t\t\tif (Render.isConchApp){\r\n\t\t\t\tinput.setMultiAble && input.setMultiAble(this._multiline);\r\n\t\t\t}\r\n\t\t\tcssStyle.lineHeight=(this.leading+this.fontSize)+\"px\";\r\n\t\t\tcssStyle.fontStyle=(this.italic ? \"italic\" :\"normal\");\r\n\t\t\tcssStyle.fontWeight=(this.bold ? \"bold\" :\"normal\");\r\n\t\t\tcssStyle.textAlign=this.align;\r\n\t\t\tcssStyle.padding=\"0 0\";\r\n\t\t\tthis._syncInputTransform();\r\n\t\t\tif (!Render.isConchApp && Browser.onPC)\r\n\t\t\t\tLaya.timer.frameLoop(1,this,this._syncInputTransform);\r\n\t\t}\r\n\r\n\t\t// 设置DOM输入框提示符颜色。\r\n\t\t__proto._setPromptColor=function(){\r\n\t\t\tInput.promptStyleDOM=Browser.getElementById(\"promptStyle\");\r\n\t\t\tif (!Input.promptStyleDOM){\r\n\t\t\t\tInput.promptStyleDOM=Browser.createElement(\"style\");\r\n\t\t\t\tBrowser.document.head.appendChild(Input.promptStyleDOM);\r\n\t\t\t}\r\n\t\t\tInput.promptStyleDOM.innerText=\"input::-webkit-input-placeholder, textarea::-webkit-input-placeholder {\"+\"color:\"+this._promptColor+\"}\"+\"input:-moz-placeholder, textarea:-moz-placeholder {\"+\"color:\"+this._promptColor+\"}\"+\"input::-moz-placeholder, textarea::-moz-placeholder {\"+\"color:\"+this._promptColor+\"}\"+\"input:-ms-input-placeholder, textarea:-ms-input-placeholder {\"+\"color:\"+this._promptColor+\"}\";\r\n\t\t}\r\n\r\n\t\t/**@private */\r\n\t\t__proto._focusOut=function(){\r\n\t\t\tlaya.display.Input.isInputting=false;\r\n\t\t\tthis._focus=false;\r\n\t\t\tthis._text=null;\r\n\t\t\tthis._content=this.nativeInput.value;\r\n\t\t\tif (!this._content){\r\n\t\t\t\t_super.prototype._$set_text.call(this,this._prompt);\r\n\t\t\t\t_super.prototype._$set_color.call(this,this._promptColor);\r\n\t\t\t\t}else {\r\n\t\t\t\t_super.prototype._$set_text.call(this,this._content);\r\n\t\t\t\t_super.prototype._$set_color.call(this,this._originColor);\r\n\t\t\t}\r\n\t\t\tLaya.stage.off(\"keydown\",this,this._onKeyDown);\r\n\t\t\tLaya.stage.focus=null;\r\n\t\t\tthis.event(\"blur\");\r\n\t\t\tif (Render.isConchApp)this.nativeInput.blur();\r\n\t\t\tBrowser.onPC && Laya.timer.clear(this,this._syncInputTransform);\r\n\t\t\tLaya.stage.off(\"mousedown\",this,this._checkBlur);\r\n\t\t}\r\n\r\n\t\t/**@private */\r\n\t\t__proto._onKeyDown=function(e){\r\n\t\t\tif (e.keyCode===13){\r\n\t\t\t\tif (Browser.onMobile && !this._multiline)\r\n\t\t\t\t\tthis.focus=false;\r\n\t\t\t\tthis.event(\"enter\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__proto.changeText=function(text){\r\n\t\t\tthis._content=text;\r\n\t\t\tif (this._focus){\r\n\t\t\t\tthis.nativeInput.value=text || '';\r\n\t\t\t\tthis.event(\"change\");\r\n\t\t\t}else\r\n\t\t\t_super.prototype.changeText.call(this,text);\r\n\t\t}\r\n\r\n\t\t//[Deprecated]\r\n\t\t__getset(0,__proto,'inputElementXAdjuster',function(){\r\n\t\t\tconsole.warn(\"deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementXAdjuster已弃用。\");\r\n\t\t\treturn 0;\r\n\t\t\t},function(value){\r\n\t\t\tconsole.warn(\"deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementXAdjuster已弃用。\");\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*输入框类型为Input静态常量之一。\r\n\t\t*平台兼容性参见http://www.w3school.com.cn/html5/html_5_form_input_types.asp。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'type',function(){\r\n\t\t\treturn this._type;\r\n\t\t\t},function(value){\r\n\t\t\tif (value==\"password\")\r\n\t\t\t\tthis._getCSSStyle().password=true;\r\n\t\t\telse\r\n\t\t\tthis._getCSSStyle().password=false;\r\n\t\t\tthis._type=value;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*是否可编辑。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'editable',function(){\r\n\t\t\treturn this._editable;\r\n\t\t\t},function(value){\r\n\t\t\tthis._editable=value;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*设置输入提示符。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'prompt',function(){\r\n\t\t\treturn this._prompt;\r\n\t\t\t},function(value){\r\n\t\t\tif (!this._text && value)\r\n\t\t\t\t_super.prototype._$set_color.call(this,this._promptColor);\r\n\t\t\tthis.promptColor=this._promptColor;\r\n\t\t\tif (this._text)\r\n\t\t\t\t_super.prototype._$set_text.call(this,(this._text==this._prompt)?value:this._text);\r\n\t\t\telse\r\n\t\t\t_super.prototype._$set_text.call(this,value);\r\n\t\t\tthis._prompt=value;\r\n\t\t});\r\n\r\n\t\t/**限制输入的字符。*/\r\n\t\t__getset(0,__proto,'restrict',function(){\r\n\t\t\tif (this._restrictPattern){\r\n\t\t\t\treturn this._restrictPattern.source;\r\n\t\t\t}\r\n\t\t\treturn \"\";\r\n\t\t\t},function(pattern){\r\n\t\t\tif (pattern){\r\n\t\t\t\tpattern=\"[^\"+pattern+\"]\";\r\n\t\t\t\tif (pattern.indexOf(\"^^\")>-1)\r\n\t\t\t\t\tpattern=pattern.replace(\"^^\",\"\");\r\n\t\t\t\tthis._restrictPattern=new RegExp(pattern,\"g\");\r\n\t\t\t}else\r\n\t\t\tthis._restrictPattern=null;\r\n\t\t});\r\n\r\n\t\t/**@inheritDoc */\r\n\t\t__getset(0,__proto,'color',_super.prototype._$get_color,function(value){\r\n\t\t\tif (this._focus)\r\n\t\t\t\tthis.nativeInput.setColor(value);\r\n\t\t\t_super.prototype._$set_color.call(this,this._content?value:this._promptColor);\r\n\t\t\tthis._originColor=value;\r\n\t\t});\r\n\r\n\t\t//[Deprecated(replacement=\"Input.type\")]\r\n\t\t__getset(0,__proto,'asPassword',function(){\r\n\t\t\treturn this._getCSSStyle().password;\r\n\t\t\t},function(value){\r\n\t\t\tthis._getCSSStyle().password=value;\r\n\t\t\tthis._type=\"password\";\r\n\t\t\tconsole.warn(\"deprecated: 使用type=\\\"password\\\"替代设置asPassword, asPassword将在下次重大更新时删去\");\r\n\t\t\tthis.isChanged=true;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*字符数量限制，默认为10000。\r\n\t\t*设置字符数量限制时，小于等于0的值将会限制字符数量为10000。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'maxChars',function(){\r\n\t\t\treturn this._maxChars;\r\n\t\t\t},function(value){\r\n\t\t\tif (value <=0)\r\n\t\t\t\tvalue=1E5;\r\n\t\t\tthis._maxChars=value;\r\n\t\t});\r\n\r\n\t\t//[Deprecated]\r\n\t\t__getset(0,__proto,'inputElementYAdjuster',function(){\r\n\t\t\tconsole.warn(\"deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementYAdjuster已弃用。\");\r\n\t\t\treturn 0;\r\n\t\t\t},function(value){\r\n\t\t\tconsole.warn(\"deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementYAdjuster已弃用。\");\r\n\t\t});\r\n\r\n\t\t/**@inheritDoc */\r\n\t\t__getset(0,__proto,'text',function(){\r\n\t\t\tif (this._focus)\r\n\t\t\t\treturn this.nativeInput.value;\r\n\t\t\telse\r\n\t\t\treturn this._content || \"\";\r\n\t\t\t},function(value){\r\n\t\t\t_super.prototype._$set_color.call(this,this._originColor);\r\n\t\t\tvalue+='';\r\n\t\t\tif (this._focus){\r\n\t\t\t\tthis.nativeInput.value=value || '';\r\n\t\t\t\tthis.event(\"change\");\r\n\t\t\t\t}else {\r\n\t\t\t\tif (!this._multiline)\r\n\t\t\t\t\tvalue=value.replace(/\\r?\\n/g,'');\r\n\t\t\t\tthis._content=value;\r\n\t\t\t\tif (value)\r\n\t\t\t\t\t_super.prototype._$set_text.call(this,value);\r\n\t\t\t\telse {\r\n\t\t\t\t\t_super.prototype._$set_text.call(this,this._prompt);\r\n\t\t\t\t\t_super.prototype._$set_color.call(this,this.promptColor);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*设置输入提示符颜色。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'promptColor',function(){\r\n\t\t\treturn this._promptColor;\r\n\t\t\t},function(value){\r\n\t\t\tthis._promptColor=value;\r\n\t\t\tif (!this._content)_super.prototype._$set_color.call(this,value);\r\n\t\t});\r\n\r\n\t\t// 因此 调用focus接口是无法都在移动平台立刻弹出键盘的\r\n\t\t/**\r\n\t\t*表示焦点是否在显示对象上。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'focus',function(){\r\n\t\t\treturn this._focus;\r\n\t\t\t},function(value){\r\n\t\t\tvar input=this.nativeInput;\r\n\t\t\tif (this._focus!==value){\r\n\t\t\t\tif (value){\r\n\t\t\t\t\tinput.target && (input.target.focus=false);\r\n\t\t\t\t\tinput.target=this;\r\n\t\t\t\t\tthis._setInputMethod();\r\n\t\t\t\t\tthis._focusIn();\r\n\t\t\t\t\t}else {\r\n\t\t\t\t\tinput.target=null;\r\n\t\t\t\t\tthis._focusOut();\r\n\t\t\t\t\tinput.blur();\r\n\t\t\t\t\tif (Render.isConchApp){\r\n\t\t\t\t\t\tinput.setPos(-10000,-10000);\r\n\t\t\t\t\t}else if (Input.inputContainer.contains(input))\r\n\t\t\t\t\tInput.inputContainer.removeChild(input);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*获取对输入框的引用实例。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'nativeInput',function(){\r\n\t\t\treturn this._multiline ? Input.area :Input.input;\r\n\t\t});\r\n\r\n\t\t/**表示是否是多行输入框。*/\r\n\t\t__getset(0,__proto,'multiline',function(){\r\n\t\t\treturn this._multiline;\r\n\t\t\t},function(value){\r\n\t\t\tthis._multiline=value;\r\n\t\t\tthis.valign=value ? \"top\" :\"middle\";\r\n\t\t});\r\n\r\n\t\tInput.__init__=function(){\r\n\t\t\tInput._createInputElement();\r\n\t\t\tif (Browser.onMobile)\r\n\t\t\t\tRender.canvas.addEventListener(Input.IOS_IFRAME ? \"click\" :\"touchend\",Input._popupInputMethod);\r\n\t\t}\r\n\r\n\t\tInput._popupInputMethod=function(e){\r\n\t\t\tif (!laya.display.Input.isInputting)return;\r\n\t\t\tvar input=laya.display.Input.inputElement;\r\n\t\t\tinput.focus();\r\n\t\t}\r\n\r\n\t\tInput._createInputElement=function(){\r\n\t\t\tInput._initInput(Input.area=Browser.createElement(\"textarea\"));\r\n\t\t\tInput._initInput(Input.input=Browser.createElement(\"input\"));\r\n\t\t\tInput.inputContainer=Browser.createElement(\"div\");\r\n\t\t\tInput.inputContainer.style.position=\"absolute\";\r\n\t\t\tInput.inputContainer.style.zIndex=1E5;\r\n\t\t\tBrowser.container.appendChild(Input.inputContainer);\r\n\t\t\tInput.inputContainer.setPos=function (x,y){Input.inputContainer.style.left=x+'px';Input.inputContainer.style.top=y+'px';};\r\n\t\t}\r\n\r\n\t\tInput._initInput=function(input){\r\n\t\t\tvar style=input.style;\r\n\t\t\tstyle.cssText=\"position:absolute;overflow:hidden;resize:none;transform-origin:0 0;-webkit-transform-origin:0 0;-moz-transform-origin:0 0;-o-transform-origin:0 0;\";\r\n\t\t\tstyle.resize='none';\r\n\t\t\tstyle.backgroundColor='transparent';\r\n\t\t\tstyle.border='none';\r\n\t\t\tstyle.outline='none';\r\n\t\t\tstyle.zIndex=1;\r\n\t\t\tinput.addEventListener('input',Input._processInputting);\r\n\t\t\tinput.addEventListener('mousemove',Input._stopEvent);\r\n\t\t\tinput.addEventListener('mousedown',Input._stopEvent);\r\n\t\t\tinput.addEventListener('touchmove',Input._stopEvent);\r\n\t\t\tif(!Render.isConchApp){\r\n\t\t\t\tinput.setColor=function (color){input.style.color=color;};\r\n\t\t\t\tinput.setFontSize=function (fontSize){input.style.fontSize=fontSize+'px';};\r\n\t\t\t\tinput.setSize=function (w,h){input.style.width=w+'px';input.style.height=h+'px';};\r\n\t\t\t}\r\n\t\t\tinput.setFontFace=function (fontFace){input.style.fontFamily=fontFace;};\r\n\t\t}\r\n\r\n\t\tInput._processInputting=function(e){\r\n\t\t\tvar input=laya.display.Input.inputElement.target;\r\n\t\t\tif (!input)return;\r\n\t\t\tvar value=laya.display.Input.inputElement.value;\r\n\t\t\tif (input._restrictPattern){\r\n\t\t\t\tvalue=value.replace(/\\u2006|\\x27/g,\"\");\r\n\t\t\t\tif (input._restrictPattern.test(value)){\r\n\t\t\t\t\tvalue=value.replace(input._restrictPattern,\"\");\r\n\t\t\t\t\tlaya.display.Input.inputElement.value=value;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tinput._text=value;\r\n\t\t\tinput.event(\"input\");\r\n\t\t}\r\n\r\n\t\tInput._stopEvent=function(e){\r\n\t\t\tif (e.type=='touchmove')\r\n\t\t\t\te.preventDefault();\r\n\t\t\te.stopPropagation && e.stopPropagation();\r\n\t\t}\r\n\r\n\t\tInput.TYPE_TEXT=\"text\";\r\n\t\tInput.TYPE_PASSWORD=\"password\";\r\n\t\tInput.TYPE_EMAIL=\"email\";\r\n\t\tInput.TYPE_URL=\"url\";\r\n\t\tInput.TYPE_NUMBER=\"number\";\r\n\t\tInput.TYPE_RANGE=\"range\";\r\n\t\tInput.TYPE_DATE=\"date\";\r\n\t\tInput.TYPE_MONTH=\"month\";\r\n\t\tInput.TYPE_WEEK=\"week\";\r\n\t\tInput.TYPE_TIME=\"time\";\r\n\t\tInput.TYPE_DATE_TIME=\"datetime\";\r\n\t\tInput.TYPE_DATE_TIME_LOCAL=\"datetime-local\";\r\n\t\tInput.TYPE_SEARCH=\"search\";\r\n\t\tInput.input=null\r\n\t\tInput.area=null\r\n\t\tInput.inputElement=null\r\n\t\tInput.inputContainer=null\r\n\t\tInput.confirmButton=null\r\n\t\tInput.promptStyleDOM=null\r\n\t\tInput.inputHeight=45;\r\n\t\tInput.isInputting=false;\r\n\t\t__static(Input,\r\n\t\t['IOS_IFRAME',function(){return this.IOS_IFRAME=(Browser.onIOS && Browser.window.top !=Browser.window.self);}\r\n\t\t]);\r\n\t\treturn Input;\r\n\t})(Text)\r\n\r\n\r\n\t/**\r\n\t*<p> <code>Animation</code> 类是位图动画,用于创建位图动画。</p>\r\n\t*<p> <code>Animation</code> 类可以加载并显示一组位图图片，并组成动画进行播放。</p>\r\n\t*@example 以下示例代码，创建了一个 <code>Text</code> 实例。\r\n\t*<listing version=\"3.0\">\r\n\t*package\r\n\t*{\r\n\t\t*import laya.display.Animation;\r\n\t\t*import laya.net.Loader;\r\n\t\t*import laya.utils.Handler;\r\n\t\t*public class Animation_Example\r\n\t\t*{\r\n\t\t\t*public function Animation_Example()\r\n\t\t\t*{\r\n\t\t\t\t*Laya.init(640,800);//设置游戏画布宽高、渲染模式。\r\n\t\t\t\t*Laya.stage.bgColor=\"#efefef\";//设置画布的背景颜色。\r\n\t\t\t\t*init();//初始化\r\n\t\t\t\t*}\r\n\t\t\t*private function init():void\r\n\t\t\t*{\r\n\t\t\t\t*var animation:Animation=new Animation();//创建一个 Animation 类的实例对象 animation 。\r\n\t\t\t\t*animation.loadAtlas(\"resource/ani/fighter.json\");//加载图集并播放\r\n\t\t\t\t*animation.x=200;//设置 animation 对象的属性 x 的值，用于控制 animation 对象的显示位置。\r\n\t\t\t\t*animation.y=200;//设置 animation 对象的属性 x 的值，用于控制 animation 对象的显示位置。\r\n\t\t\t\t*animation.interval=50;//设置 animation 对象的动画播放间隔时间，单位：毫秒。\r\n\t\t\t\t*animation.play();//播放动画。\r\n\t\t\t\t*Laya.stage.addChild(animation);//将 animation 对象添加到显示列表。\r\n\t\t\t\t*}\r\n\t\t\t*}\r\n\t\t*}\r\n\t*</listing>\r\n\t*<listing version=\"3.0\">\r\n\t*Animation_Example();\r\n\t*function Animation_Example(){\r\n\t\t*Laya.init(640,800);//设置游戏画布宽高、渲染模式。\r\n\t\t*Laya.stage.bgColor=\"#efefef\";//设置画布的背景颜色。\r\n\t\t*init();//初始化\r\n\t\t*}\r\n\t*function init()\r\n\t*{\r\n\t\t*var animation=new Laya.Animation();//创建一个 Animation 类的实例对象 animation 。\r\n\t\t*animation.loadAtlas(\"resource/ani/fighter.json\");//加载图集并播放\r\n\t\t*animation.x=200;//设置 animation 对象的属性 x 的值，用于控制 animation 对象的显示位置。\r\n\t\t*animation.y=200;//设置 animation 对象的属性 x 的值，用于控制 animation 对象的显示位置。\r\n\t\t*animation.interval=50;//设置 animation 对象的动画播放间隔时间，单位：毫秒。\r\n\t\t*animation.play();//播放动画。\r\n\t\t*Laya.stage.addChild(animation);//将 animation 对象添加到显示列表。\r\n\t\t*}\r\n\t*</listing>\r\n\t*<listing version=\"3.0\">\r\n\t*import Animation=laya.display.Animation;\r\n\t*class Animation_Example {\r\n\t\t*constructor(){\r\n\t\t\t*Laya.init(640,800);//设置游戏画布宽高、渲染模式。\r\n\t\t\t*Laya.stage.bgColor=\"#efefef\";//设置画布的背景颜色。\r\n\t\t\t*this.init();\r\n\t\t\t*}\r\n\t\t*private init():void {\r\n\t\t\t*var animation:Animation=new Laya.Animation();//创建一个 Animation 类的实例对象 animation 。\r\n\t\t\t*animation.loadAtlas(\"resource/ani/fighter.json\");//加载图集并播放\r\n\t\t\t*animation.x=200;//设置 animation 对象的属性 x 的值，用于控制 animation 对象的显示位置。\r\n\t\t\t*animation.y=200;//设置 animation 对象的属性 x 的值，用于控制 animation 对象的显示位置。\r\n\t\t\t*animation.interval=50;//设置 animation 对象的动画播放间隔时间，单位：毫秒。\r\n\t\t\t*animation.play();//播放动画。\r\n\t\t\t*Laya.stage.addChild(animation);//将 animation 对象添加到显示列表。\r\n\t\t\t*}\r\n\t\t*}\r\n\t*new Animation_Example();\r\n\t*</listing>\r\n\t*/\r\n\t//class laya.display.Animation extends laya.display.AnimationPlayerBase\r\n\tvar Animation=(function(_super){\r\n\t\tfunction Animation(){\r\n\t\t\tthis._frames=null;\r\n\t\t\tthis._url=null;\r\n\t\t\tAnimation.__super.call(this);\r\n\t\t\tthis._setControlNode(this);\r\n\t\t}\r\n\r\n\t\t__class(Animation,'laya.display.Animation',_super);\r\n\t\tvar __proto=Animation.prototype;\r\n\t\t/**@inheritDoc */\r\n\t\t__proto.destroy=function(destroyChild){\r\n\t\t\t(destroyChild===void 0)&& (destroyChild=true);\r\n\t\t\tthis.stop();\r\n\t\t\tlaya.display.Sprite.prototype.destroy.call(this,destroyChild);\r\n\t\t\tthis._frames=null;\r\n\t\t\tthis._labels=null;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*播放动画。\r\n\t\t*@param start 开始播放的动画索引或label。\r\n\t\t*@param loop 是否循环。\r\n\t\t*@param name 如果name为空(可选)，则播放当前动画，如果不为空，则播放全局缓存动画（如果有）\r\n\t\t*/\r\n\t\t__proto.play=function(start,loop,name){\r\n\t\t\t(start===void 0)&& (start=0);\r\n\t\t\t(loop===void 0)&& (loop=true);\r\n\t\t\t(name===void 0)&& (name=\"\");\r\n\t\t\tif (name)this._setFramesFromCache(name);\r\n\t\t\tthis._isPlaying=true;\r\n\t\t\tthis.index=((typeof start=='string'))? this._getFrameByLabel(start):start;\r\n\t\t\tthis.loop=loop;\r\n\t\t\tthis._actionName=name;\r\n\t\t\tthis._isReverse=this.wrapMode==1;\r\n\t\t\tif (this._frames && this.interval > 0){\r\n\t\t\t\tthis.timerLoop(this.interval,this,this._frameLoop,null,true);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__proto._setFramesFromCache=function(name){\r\n\t\t\tif (this._url)name=this._url+\"#\"+name;\r\n\t\t\tif (name && Animation.framesMap[name]){\r\n\t\t\t\tthis._frames=Animation.framesMap[name];\r\n\t\t\t\tthis._count=this._frames.length;\r\n\t\t\t\tif (!this._frameRateChanged && Animation.framesMap[name+\"$len\"])this._interval=Animation.framesMap[name+\"$len\"];\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\t__proto._frameLoop=function(){\r\n\t\t\tif (this._style.visible && this._style.alpha > 0.01){\r\n\t\t\t\t_super.prototype._frameLoop.call(this);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__proto._displayToIndex=function(value){\r\n\t\t\tif (this._frames)this.graphics=this._frames[value];\r\n\t\t}\r\n\r\n\t\t/**清理。方便对象复用。*/\r\n\t\t__proto.clear=function(){\r\n\t\t\tthis.stop();\r\n\t\t\tthis.graphics=null;\r\n\t\t\tthis._frames=null;\r\n\t\t\tthis._labels=null;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*加载图片集合，组成动画。\r\n\t\t*@param urls 图片地址集合。如：[url1,url2,url3,...]。\r\n\t\t*@param cacheName 缓存为模板的名称，下次可以直接使用play调用，无需重新创建动画模板，设置为空则不缓存\r\n\t\t*@return 返回动画本身。\r\n\t\t*/\r\n\t\t__proto.loadImages=function(urls,cacheName){\r\n\t\t\t(cacheName===void 0)&& (cacheName=\"\");\r\n\t\t\tthis._url=\"\";\r\n\t\t\tif (!this._setFramesFromCache(cacheName)){\r\n\t\t\t\tthis.frames=Animation.framesMap[cacheName] ? Animation.framesMap[cacheName] :Animation.createFrames(urls,cacheName);\r\n\t\t\t}\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*加载并播放一个图集。\r\n\t\t*@param url 图集地址。\r\n\t\t*@param loaded 加载完毕回调\r\n\t\t*@param cacheName 缓存为模板的名称，下次可以直接使用play调用，无需重新创建动画模板，设置为空则不缓存\r\n\t\t*@return 返回动画本身。\r\n\t\t*/\r\n\t\t__proto.loadAtlas=function(url,loaded,cacheName){\r\n\t\t\t(cacheName===void 0)&& (cacheName=\"\");\r\n\t\t\tthis._url=\"\";\r\n\t\t\tvar _this=this;\r\n\t\t\tif (!_this._setFramesFromCache(cacheName)){\r\n\t\t\t\tfunction onLoaded (loadUrl){\r\n\t\t\t\t\tif (url===loadUrl){\r\n\t\t\t\t\t\t_this.frames=Animation.framesMap[cacheName] ? Animation.framesMap[cacheName] :Animation.createFrames(url,cacheName);\r\n\t\t\t\t\t\tif (loaded)loaded.run();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (Loader.getAtlas(url))onLoaded(url);\r\n\t\t\t\telse Laya.loader.load(url,Handler.create(null,onLoaded,[url]),null,\"atlas\");\r\n\t\t\t}\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*加载并播放一个由IDE制作的动画，播放的帧率按照IDE设计的帧率\r\n\t\t*@param url 动画地址。\r\n\t\t*@param loaded 加载完毕回调\r\n\t\t*@return 返回动画本身。\r\n\t\t*/\r\n\t\t__proto.loadAnimation=function(url,loaded){\r\n\t\t\tthis._url=url;\r\n\t\t\tvar _this=this;\r\n\t\t\tif (!_this._setFramesFromCache(\"\")){\r\n\t\t\t\tfunction onLoaded (loadUrl){\r\n\t\t\t\t\tif (url===loadUrl){\r\n\t\t\t\t\t\tif (!Animation.framesMap[url+\"#\"]){\r\n\t\t\t\t\t\t\tvar aniData=_this._parseGraphicAnimation(Loader.getRes(url));\r\n\t\t\t\t\t\t\tif (!aniData)return;\r\n\t\t\t\t\t\t\tvar obj=aniData.animationDic;\r\n\t\t\t\t\t\t\tvar flag=true;\r\n\t\t\t\t\t\t\tfor (var name in obj){\r\n\t\t\t\t\t\t\t\tvar info=obj[name];\r\n\t\t\t\t\t\t\t\tif (info.frames.length){\r\n\t\t\t\t\t\t\t\t\tAnimation.framesMap[url+\"#\"+name]=info.frames;\r\n\t\t\t\t\t\t\t\t\tAnimation.framesMap[url+\"#\"+name+\"$len\"]=info.interval;\r\n\t\t\t\t\t\t\t\t\t}else {\r\n\t\t\t\t\t\t\t\t\tflag=false;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif(!_this._frameRateChanged)_this._interval=aniData.animationList[0].interval;\r\n\t\t\t\t\t\t\t_this.frames=aniData.animationList[0].frames;\r\n\t\t\t\t\t\t\tif (flag){\r\n\t\t\t\t\t\t\t\tAnimation.framesMap[url+\"#$len\"]=aniData.animationList[0].interval;\r\n\t\t\t\t\t\t\t\tAnimation.framesMap[url+\"#\"]=_this.frames;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}else {\r\n\t\t\t\t\t\t\tif(!_this._frameRateChanged)_this._interval=Animation.framesMap[url+\"#$len\"];\r\n\t\t\t\t\t\t\t_this.frames=Animation.framesMap[url+\"#\"];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (loaded)loaded.run();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (Loader.getRes(url))onLoaded(url);\r\n\t\t\t\telse Laya.loader.load(url,Handler.create(null,onLoaded,[url]),null,\"json\");\r\n\t\t\t\tLoader.clearRes(url);\r\n\t\t\t}\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\t\t/**@private */\r\n\t\t__proto._parseGraphicAnimation=function(animationData){\r\n\t\t\treturn GraphicAnimation.parseAnimationData(animationData)\r\n\t\t}\r\n\r\n\t\t/**是否自动播放*/\r\n\t\t__getset(0,__proto,'autoPlay',null,function(value){\r\n\t\t\tif (value)this.play();\r\n\t\t\telse this.stop();\r\n\t\t});\r\n\r\n\t\t/**图集地址或者图片集合*/\r\n\t\t__getset(0,__proto,'source',null,function(value){\r\n\t\t\tif (value.indexOf(\".ani\")>-1)this.loadAnimation(value);\r\n\t\t\telse if (value.indexOf(\".json\")>-1 || value.indexOf(\"als\")>-1)this.loadAtlas(value);\r\n\t\t\telse this.loadImages(value.split(\",\"));\r\n\t\t});\r\n\r\n\t\t/**Graphics集合*/\r\n\t\t__getset(0,__proto,'frames',function(){\r\n\t\t\treturn this._frames;\r\n\t\t\t},function(value){\r\n\t\t\tthis._frames=value;\r\n\t\t\tif (value){\r\n\t\t\t\tthis._count=value.length;\r\n\t\t\t\tif (this._isPlaying)this.play(this._index,this.loop,this._actionName);\r\n\t\t\t\telse this.index=this._index;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tAnimation.createFrames=function(url,name){\r\n\t\t\tvar arr;\r\n\t\t\tif ((typeof url=='string')){\r\n\t\t\t\tvar atlas=Loader.getAtlas(url);\r\n\t\t\t\tif (atlas && atlas.length){\r\n\t\t\t\t\tarr=[];\r\n\t\t\t\t\tfor (var i=0,n=atlas.length;i < n;i++){\r\n\t\t\t\t\t\tvar g=new Graphics();\r\n\t\t\t\t\t\tg.drawTexture(Loader.getRes(atlas[i]),0,0);\r\n\t\t\t\t\t\tarr.push(g);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t}else if ((url instanceof Array)){\r\n\t\t\t\tarr=[];\r\n\t\t\t\tfor (i=0,n=url.length;i < n;i++){\r\n\t\t\t\t\tg=new Graphics();\r\n\t\t\t\t\tg.loadImage(url[i],0,0);\r\n\t\t\t\t\tarr.push(g);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (name)Animation.framesMap[name]=arr;\r\n\t\t\treturn arr;\r\n\t\t}\r\n\r\n\t\tAnimation.clearCache=function(key){\r\n\t\t\tvar cache=Animation.framesMap;\r\n\t\t\tvar val;\r\n\t\t\tvar key2=key+\"#\";\r\n\t\t\tfor (val in cache){\r\n\t\t\t\tif (val===key || val.indexOf(key2)==0){\r\n\t\t\t\t\tdelete Animation.framesMap[val];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tAnimation.framesMap={};\r\n\t\treturn Animation;\r\n\t})(AnimationPlayerBase)\r\n\r\n\r\n\t/**\r\n\t*关键帧动画播放类\r\n\t*\r\n\t*/\r\n\t//class laya.display.FrameAnimation extends laya.display.AnimationPlayerBase\r\n\tvar FrameAnimation=(function(_super){\r\n\t\tfunction FrameAnimation(){\r\n\t\t\tthis._targetDic=null;\r\n\t\t\tthis._animationData=null;\r\n\t\t\tFrameAnimation.__super.call(this);\r\n\t\t\tif(FrameAnimation._sortIndexFun==null){\r\n\t\t\t\tFrameAnimation._sortIndexFun=MathUtil.sortByKey(\"index\",false,true);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__class(FrameAnimation,'laya.display.FrameAnimation',_super);\r\n\t\tvar __proto=FrameAnimation.prototype;\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*初始化动画数据\r\n\t\t*@param targetDic 对象表\r\n\t\t*@param animationData 动画数据\r\n\t\t*\r\n\t\t*/\r\n\t\t__proto._setUp=function(targetDic,animationData){\r\n\t\t\tthis._labels=null;\r\n\t\t\tthis._targetDic=targetDic;\r\n\t\t\tthis._animationData=animationData;\r\n\t\t\tthis.interval=1000 / animationData.frameRate;\r\n\t\t\tif (animationData.parsed){\r\n\t\t\t\tthis._count=animationData.count;\r\n\t\t\t\t}else{\r\n\t\t\t\tthis._calculateDatas();\r\n\t\t\t}\r\n\t\t\tanimationData.parsed=true;\r\n\t\t\tanimationData.count=this._count;\r\n\t\t}\r\n\r\n\t\t/**@inheritDoc */\r\n\t\t__proto.clear=function(){\r\n\t\t\t_super.prototype.clear.call(this);\r\n\t\t\tthis._targetDic=null;\r\n\t\t\tthis._animationData=null;\r\n\t\t}\r\n\r\n\t\t/**@inheritDoc */\r\n\t\t__proto._displayToIndex=function(value){\r\n\t\t\tif(!this._animationData)return;\r\n\t\t\tif(value<0)value=0;\r\n\t\t\tif(value>this._count)value=this._count;\r\n\t\t\tvar nodes=this._animationData.nodes,i=0,len=nodes.length;\r\n\t\t\tfor(i=0;i<len;i++){\r\n\t\t\t\tthis._displayNodeToFrame(nodes[i],value);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*将节点设置到某一帧的状态\r\n\t\t*@param node 节点ID\r\n\t\t*@param frame\r\n\t\t*@param targetDic 节点表\r\n\t\t*\r\n\t\t*/\r\n\t\t__proto._displayNodeToFrame=function(node,frame,targetDic){\r\n\t\t\tif(!targetDic)targetDic=this._targetDic;\r\n\t\t\tvar target=targetDic[node.target];\r\n\t\t\tif(!target){\r\n\t\t\t\treturn;\r\n\t\t\t};\r\n\t\t\tvar frames=node.frames,key,propFrames,value;\r\n\t\t\tvar keys=node.keys,i=0,len=keys.length;\r\n\t\t\tfor(i=0;i<len;i++){\r\n\t\t\t\tkey=keys[i];\r\n\t\t\t\tpropFrames=frames[key];\r\n\t\t\t\tif(propFrames.length>frame){\r\n\t\t\t\t\tvalue=propFrames[frame];\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\tvalue=propFrames[propFrames.length-1];\r\n\t\t\t\t}\r\n\t\t\t\ttarget[key]=value;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*计算帧数据\r\n\t\t*\r\n\t\t*/\r\n\t\t__proto._calculateDatas=function(){\r\n\t\t\tif(!this._animationData)return;\r\n\t\t\tvar nodes=this._animationData.nodes,i=0,len=nodes.length,tNode;\r\n\t\t\tthis._count=0;\r\n\t\t\tfor(i=0;i<len;i++){\r\n\t\t\t\ttNode=nodes[i];\r\n\t\t\t\tthis._calculateNodeKeyFrames(tNode);\r\n\t\t\t}\r\n\t\t\tthis._count+=1;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*计算某个节点的帧数据\r\n\t\t*@param node\r\n\t\t*\r\n\t\t*/\r\n\t\t__proto._calculateNodeKeyFrames=function(node){\r\n\t\t\tvar keyFrames=node.keyframes,key,tKeyFrames,target=node.target;\r\n\t\t\tif(!node.frames){\r\n\t\t\t\tnode.frames={};\r\n\t\t\t}\r\n\t\t\tif(!node.keys){\r\n\t\t\t\tnode.keys=[];\r\n\t\t\t\t}else{\r\n\t\t\t\tnode.keys.length=0;\r\n\t\t\t}\r\n\t\t\tfor(key in keyFrames){\r\n\t\t\t\ttKeyFrames=keyFrames[key];\r\n\t\t\t\tif(!node.frames[key]){\r\n\t\t\t\t\tnode.frames[key]=[];\r\n\t\t\t\t}\r\n\t\t\t\ttKeyFrames.sort(FrameAnimation._sortIndexFun);\r\n\t\t\t\tnode.keys.push(key);\r\n\t\t\t\tthis._calculateNodePropFrames(tKeyFrames,node.frames[key],key,target);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*计算节点某个属性的帧数据\r\n\t\t*@param keyframes\r\n\t\t*@param frames\r\n\t\t*@param key\r\n\t\t*@param target\r\n\t\t*\r\n\t\t*/\r\n\t\t__proto._calculateNodePropFrames=function(keyframes,frames,key,target){\r\n\t\t\tvar i=0,len=keyframes.length-1;\r\n\t\t\tframes.length=keyframes[len].index+1;\r\n\t\t\tfor(i=0;i<len;i++){\r\n\t\t\t\tthis._dealKeyFrame(keyframes[i]);\r\n\t\t\t\tthis._calculateFrameValues(keyframes[i],keyframes[i+1],frames);\r\n\t\t\t}\r\n\t\t\tif(len==0){\r\n\t\t\t\tframes[0]=keyframes[0].value;\r\n\t\t\t}\r\n\t\t\tthis._dealKeyFrame(keyframes[i]);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*\r\n\t\t*/\r\n\t\t__proto._dealKeyFrame=function(keyFrame){\r\n\t\t\tif (keyFrame.label&&keyFrame.label !=\"\")this.addLabel(keyFrame.label,keyFrame.index);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*计算两个关键帧直接的帧数据\r\n\t\t*@param startFrame\r\n\t\t*@param endFrame\r\n\t\t*@param result\r\n\t\t*\r\n\t\t*/\r\n\t\t__proto._calculateFrameValues=function(startFrame,endFrame,result){\r\n\t\t\tvar i=0,easeFun;\r\n\t\t\tvar start=startFrame.index,end=endFrame.index;\r\n\t\t\tvar startValue=startFrame.value;\r\n\t\t\tvar dValue=endFrame.value-startFrame.value;\r\n\t\t\tvar dLen=end-start;\r\n\t\t\tif(end>this._count)this._count=end;\r\n\t\t\tif(startFrame.tween){\r\n\t\t\t\teaseFun=Ease[startFrame.tweenMethod];\r\n\t\t\t\tif(easeFun==null){\r\n\t\t\t\t\teaseFun=Ease.linearNone;\r\n\t\t\t\t}\r\n\t\t\t\tfor(i=start;i<end;i++){\r\n\t\t\t\t\tresult[i]=easeFun(i-start,startValue,dValue,dLen);\r\n\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\tfor(i=start;i<end;i++){\r\n\t\t\t\t\tresult[i]=startValue;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tresult[endFrame.index]=endFrame.value;\r\n\t\t}\r\n\r\n\t\tFrameAnimation._sortIndexFun=null\r\n\t\treturn FrameAnimation;\r\n\t})(AnimationPlayerBase)\r\n\r\n\r\n\t//class laya.webgl.shader.d2.Shader2X extends laya.webgl.shader.Shader\r\n\tvar Shader2X=(function(_super){\r\n\t\tfunction Shader2X(vs,ps,saveName,nameMap){\r\n\t\t\tthis._params2dQuick1=null;\r\n\t\t\tthis._params2dQuick2=null;\r\n\t\t\tthis._shaderValueWidth=NaN;\r\n\t\t\tthis._shaderValueHeight=NaN;\r\n\t\t\tShader2X.__super.call(this,vs,ps,saveName,nameMap);\r\n\t\t}\r\n\r\n\t\t__class(Shader2X,'laya.webgl.shader.d2.Shader2X',_super);\r\n\t\tvar __proto=Shader2X.prototype;\r\n\t\t__proto.upload2dQuick1=function(shaderValue){\r\n\t\t\tthis.upload(shaderValue,this._params2dQuick1 || this._make2dQuick1());\r\n\t\t}\r\n\r\n\t\t__proto._make2dQuick1=function(){\r\n\t\t\tif (!this._params2dQuick1){\r\n\t\t\t\tthis.activeResource();\r\n\t\t\t\tthis._params2dQuick1=[];\r\n\t\t\t\tvar params=this._params,one;\r\n\t\t\t\tfor (var i=0,n=params.length;i < n;i++){\r\n\t\t\t\t\tone=params[i];\r\n\t\t\t\t\tif (!Render.isFlash && (one.name===\"size\" || one.name===\"mmat\" || one.name===\"position\" || one.name===\"texcoord\"))continue ;\r\n\t\t\t\t\tthis._params2dQuick1.push(one);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn this._params2dQuick1;\r\n\t\t}\r\n\r\n\t\t__proto.detoryResource=function(){\r\n\t\t\t_super.prototype.detoryResource.call(this);\r\n\t\t\tthis._params2dQuick1=null;\r\n\t\t\tthis._params2dQuick2=null;\r\n\t\t}\r\n\r\n\t\t__proto.upload2dQuick2=function(shaderValue){\r\n\t\t\tthis.upload(shaderValue,this._params2dQuick2 || this._make2dQuick2());\r\n\t\t}\r\n\r\n\t\t__proto._make2dQuick2=function(){\r\n\t\t\tif (!this._params2dQuick2){\r\n\t\t\t\tthis.activeResource();\r\n\t\t\t\tthis._params2dQuick2=[];\r\n\t\t\t\tvar params=this._params,one;\r\n\t\t\t\tfor (var i=0,n=params.length;i < n;i++){\r\n\t\t\t\t\tone=params[i];\r\n\t\t\t\t\tif (!Render.isFlash && (one.name===\"size\"))continue ;\r\n\t\t\t\t\tthis._params2dQuick2.push(one);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn this._params2dQuick2;\r\n\t\t}\r\n\r\n\t\tShader2X.create=function(vs,ps,saveName,nameMap){\r\n\t\t\treturn new Shader2X(vs,ps,saveName,nameMap);\r\n\t\t}\r\n\r\n\t\treturn Shader2X;\r\n\t})(Shader)\r\n\r\n\r\n\t/**\r\n\t*<code>HTMLImage</code> 用于创建 HTML Image 元素。\r\n\t*@private\r\n\t*/\r\n\t//class laya.resource.HTMLImage extends laya.resource.FileBitmap\r\n\tvar HTMLImage=(function(_super){\r\n\t\tfunction HTMLImage(src,def){\r\n\t\t\tthis._recreateLock=false;\r\n\t\t\tthis._needReleaseAgain=false;\r\n\t\t\tHTMLImage.__super.call(this);\r\n\t\t\tthis._init_(src,def);\r\n\t\t}\r\n\r\n\t\t__class(HTMLImage,'laya.resource.HTMLImage',_super);\r\n\t\tvar __proto=HTMLImage.prototype;\r\n\t\t__proto._init_=function(src,def){\r\n\t\t\tthis._src=src;\r\n\t\t\tthis._source=new Browser.window.Image();\r\n\t\t\tif (def){\r\n\t\t\t\tdef.onload && (this.onload=def.onload);\r\n\t\t\t\tdef.onerror && (this.onerror=def.onerror);\r\n\t\t\t\tdef.onCreate && def.onCreate(this);\r\n\t\t\t}\r\n\t\t\tif (src.indexOf(\"data:image\")!=0)this._source.crossOrigin=\"\";\r\n\t\t\t(src)&& (this._source.src=src);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@inheritDoc\r\n\t\t*/\r\n\t\t__proto.recreateResource=function(){\r\n\t\t\tvar _$this=this;\r\n\t\t\tif (this._src===\"\")\r\n\t\t\t\tthrow new Error(\"src no null！\");\r\n\t\t\tthis._needReleaseAgain=false;\r\n\t\t\tif (!this._source){\r\n\t\t\t\tthis._recreateLock=true;\r\n\t\t\t\tthis.startCreate();\r\n\t\t\t\tvar _this=this;\r\n\t\t\t\tthis._source=new Browser.window.Image();\r\n\t\t\t\tthis._source.crossOrigin=\"\";\r\n\t\t\t\tthis._source.onload=function (){\r\n\t\t\t\t\tif (_this._needReleaseAgain){\r\n\t\t\t\t\t\t_this._needReleaseAgain=false;\r\n\t\t\t\t\t\t_this._source.onload=null;\r\n\t\t\t\t\t\t_this._source=null;\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t_this._source.onload=null;\r\n\t\t\t\t\t_this.memorySize=_$this._w *_$this._h *4;\r\n\t\t\t\t\t_this._recreateLock=false;\r\n\t\t\t\t\t_this.completeCreate();\r\n\t\t\t\t};\r\n\t\t\t\tthis._source.src=this._src;\r\n\t\t\t\t}else {\r\n\t\t\t\tif (this._recreateLock)\r\n\t\t\t\t\treturn;\r\n\t\t\t\tthis.startCreate();\r\n\t\t\t\tthis.memorySize=this._w *this._h *4;\r\n\t\t\t\tthis._recreateLock=false;\r\n\t\t\t\tthis.completeCreate();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@inheritDoc\r\n\t\t*/\r\n\t\t__proto.detoryResource=function(){\r\n\t\t\tif (this._recreateLock)\r\n\t\t\t\tthis._needReleaseAgain=true;\r\n\t\t\t(this._source)&& (this._source=null,this.memorySize=0);\r\n\t\t}\r\n\r\n\t\t/***调整尺寸。*/\r\n\t\t__proto.onresize=function(){\r\n\t\t\tthis._w=this._source.width;\r\n\t\t\tthis._h=this._source.height;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@inheritDoc\r\n\t\t*/\r\n\t\t__getset(0,__proto,'onerror',null,function(value){\r\n\t\t\tvar _$this=this;\r\n\t\t\tthis._onerror=value;\r\n\t\t\tthis._source && (this._source.onerror=this._onerror !=null ? (function(){\r\n\t\t\t\t_$this._onerror()\r\n\t\t\t}):null);\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*@inheritDoc\r\n\t\t*/\r\n\t\t__getset(0,__proto,'onload',null,function(value){\r\n\t\t\tvar _$this=this;\r\n\t\t\tthis._onload=value;\r\n\t\t\tthis._source && (this._source.onload=this._onload !=null ? (function(){\r\n\t\t\t\t_$this.onresize();\r\n\t\t\t\t_$this._onload();\r\n\t\t\t}):null);\r\n\t\t});\r\n\r\n\t\tHTMLImage.create=function(src,def){\r\n\t\t\treturn new HTMLImage(src,def);\r\n\t\t}\r\n\r\n\t\treturn HTMLImage;\r\n\t})(FileBitmap)\r\n\r\n\r\n\t//class laya.webgl.utils.IndexBuffer2D extends laya.webgl.utils.Buffer2D\r\n\tvar IndexBuffer2D=(function(_super){\r\n\t\tfunction IndexBuffer2D(bufferUsage){\r\n\t\t\tthis._uint8Array=null;\r\n\t\t\tthis._uint16Array=null;\r\n\t\t\t(bufferUsage===void 0)&& (bufferUsage=0x88E4);\r\n\t\t\tIndexBuffer2D.__super.call(this);\r\n\t\t\tthis._bufferUsage=bufferUsage;\r\n\t\t\tthis._bufferType=0x8893;\r\n\t\t\tRender.isFlash || (this._buffer=new ArrayBuffer(8));\r\n\t\t}\r\n\r\n\t\t__class(IndexBuffer2D,'laya.webgl.utils.IndexBuffer2D',_super);\r\n\t\tvar __proto=IndexBuffer2D.prototype;\r\n\t\t__proto._checkArrayUse=function(){\r\n\t\t\tthis._uint8Array && (this._uint8Array=new Uint8Array(this._buffer));\r\n\t\t\tthis._uint16Array && (this._uint16Array=new Uint16Array(this._buffer));\r\n\t\t}\r\n\r\n\t\t__proto.getUint8Array=function(){\r\n\t\t\treturn this._uint8Array || (this._uint8Array=new Uint8Array(this._buffer));\r\n\t\t}\r\n\r\n\t\t__proto.getUint16Array=function(){\r\n\t\t\treturn this._uint16Array || (this._uint16Array=new Uint16Array(this._buffer));\r\n\t\t}\r\n\r\n\t\tIndexBuffer2D.QuadrangleIB=null\r\n\t\tIndexBuffer2D.create=function(bufferUsage){\r\n\t\t\t(bufferUsage===void 0)&& (bufferUsage=0x88E4);\r\n\t\t\treturn new IndexBuffer2D(bufferUsage);\r\n\t\t}\r\n\r\n\t\treturn IndexBuffer2D;\r\n\t})(Buffer2D)\r\n\r\n\r\n\t//class laya.webgl.utils.VertexBuffer2D extends laya.webgl.utils.Buffer2D\r\n\tvar VertexBuffer2D=(function(_super){\r\n\t\tfunction VertexBuffer2D(vertexStride,bufferUsage){\r\n\t\t\tthis._floatArray32=null;\r\n\t\t\tthis._vertexStride=0;\r\n\t\t\tVertexBuffer2D.__super.call(this);\r\n\t\t\tthis._vertexStride=vertexStride;\r\n\t\t\tthis._bufferUsage=bufferUsage;\r\n\t\t\tthis._bufferType=0x8892;\r\n\t\t\tRender.isFlash || (this._buffer=new ArrayBuffer(8));\r\n\t\t\tthis.getFloat32Array();\r\n\t\t}\r\n\r\n\t\t__class(VertexBuffer2D,'laya.webgl.utils.VertexBuffer2D',_super);\r\n\t\tvar __proto=VertexBuffer2D.prototype;\r\n\t\t__proto.getFloat32Array=function(){\r\n\t\t\treturn this._floatArray32 || (this._floatArray32=new Float32Array(this._buffer));\r\n\t\t}\r\n\r\n\t\t__proto.bind=function(ibBuffer){\r\n\t\t\t(ibBuffer)&& (ibBuffer._bind());\r\n\t\t\tthis._bind();\r\n\t\t}\r\n\r\n\t\t__proto.insertData=function(data,pos){\r\n\t\t\tvar vbdata=this.getFloat32Array();\r\n\t\t\tvbdata.set(data,pos);\r\n\t\t\tthis._upload=true;\r\n\t\t}\r\n\r\n\t\t__proto.bind_upload=function(ibBuffer){\r\n\t\t\t(ibBuffer._bind_upload())|| (ibBuffer._bind());\r\n\t\t\t(this._bind_upload())|| (this._bind());\r\n\t\t}\r\n\r\n\t\t__proto._checkArrayUse=function(){\r\n\t\t\tthis._floatArray32 && (this._floatArray32=new Float32Array(this._buffer));\r\n\t\t}\r\n\r\n\t\t__proto.detoryResource=function(){\r\n\t\t\t_super.prototype.detoryResource.call(this);\r\n\t\t\tfor (var i=0;i < 10;i++)\r\n\t\t\tWebGL.mainContext.disableVertexAttribArray(i);\r\n\t\t}\r\n\r\n\t\t__getset(0,__proto,'vertexStride',function(){\r\n\t\t\treturn this._vertexStride;\r\n\t\t});\r\n\r\n\t\tVertexBuffer2D.create=function(vertexStride,bufferUsage){\r\n\t\t\t(bufferUsage===void 0)&& (bufferUsage=0x88E8);\r\n\t\t\treturn new VertexBuffer2D(vertexStride,bufferUsage);\r\n\t\t}\r\n\r\n\t\treturn VertexBuffer2D;\r\n\t})(Buffer2D)\r\n\r\n\r\n\t/**\r\n\t*<code>View</code> 是一个视图类。\r\n\t*@internal <p><code>View</code></p>\r\n\t*/\r\n\t//class laya.ui.View extends laya.ui.Box\r\n\tvar View=(function(_super){\r\n\t\tfunction View(){\r\n\t\t\tthis._idMap=null;\r\n\t\t\tthis._aniList=null;\r\n\t\t\tView.__super.call(this);\r\n\t\t}\r\n\r\n\t\t__class(View,'laya.ui.View',_super);\r\n\t\tvar __proto=View.prototype;\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*通过视图数据创建视图。\r\n\t\t*@param uiView 视图数据信息。\r\n\t\t*/\r\n\t\t__proto.createView=function(uiView){\r\n\t\t\tif (uiView.animations && !this._idMap)this._idMap={};\r\n\t\t\tView.createComp(uiView,this,this);\r\n\t\t\tif (uiView.animations){\r\n\t\t\t\tvar anilist=[];\r\n\t\t\t\tvar animations=uiView.animations;\r\n\t\t\t\tvar i=0,len=animations.length;\r\n\t\t\t\tvar tAni;\r\n\t\t\t\tvar tAniO;\r\n\t\t\t\tfor (i=0;i < len;i++){\r\n\t\t\t\t\ttAni=new FrameClip();\r\n\t\t\t\t\ttAniO=animations[i];\r\n\t\t\t\t\ttAni._setUp(this._idMap,tAniO);\r\n\t\t\t\t\tthis[tAniO.name]=tAni;\r\n\t\t\t\t\ttAni._setControlNode(this);\r\n\t\t\t\t\tswitch (tAniO.action){\r\n\t\t\t\t\t\tcase 1:\r\n\t\t\t\t\t\t\ttAni.play(0,false);\r\n\t\t\t\t\t\t\tbreak ;\r\n\t\t\t\t\t\tcase 2:\r\n\t\t\t\t\t\t\ttAni.play(0,true);\r\n\t\t\t\t\t\t\tbreak ;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\tanilist.push(tAni);\r\n\t\t\t\t}\r\n\t\t\t\tthis._aniList=anilist;\r\n\t\t\t}\r\n\t\t\tif (this._width > 0 && uiView.props.hitTestPrior==null && !this.mouseThrough)this.hitTestPrior=true;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*装载UI视图。用于加载模式。\r\n\t\t*@param path UI资源地址。\r\n\t\t*/\r\n\t\t__proto.loadUI=function(path){\r\n\t\t\tvar uiView=View.uiMap[path];\r\n\t\t\tuiView && this.createView(uiView);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*<p>销毁此对象。</p>\r\n\t\t*@param destroyChild 是否同时销毁子节点，若值为true,则销毁子节点，否则不销毁子节点。\r\n\t\t*/\r\n\t\t__proto.destroy=function(destroyChild){\r\n\t\t\t(destroyChild===void 0)&& (destroyChild=true);\r\n\t\t\tif (this._aniList)this._aniList.length=0;\r\n\t\t\tthis._idMap=null;\r\n\t\t\tthis._aniList=null;\r\n\t\t\tlaya.ui.Component.prototype.destroy.call(this,destroyChild);\r\n\t\t}\r\n\r\n\t\tView._regs=function(){\r\n\t\t\tvar key;\r\n\t\t\tfor (key in View.uiClassMap){\r\n\t\t\t\tClassUtils.regClass(key,View.uiClassMap[key]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tView.createComp=function(uiView,comp,view){\r\n\t\t\tcomp=comp || View.getCompInstance(uiView);\r\n\t\t\tif (!comp){\r\n\t\t\t\tconsole.log(\"can not create:\"+uiView.type);\r\n\t\t\t\treturn null;\r\n\t\t\t};\r\n\t\t\tvar child=uiView.child;\r\n\t\t\tif (child){\r\n\t\t\t\tfor (var i=0,n=child.length;i < n;i++){\r\n\t\t\t\t\tvar node=child[i];\r\n\t\t\t\t\tif (comp.hasOwnProperty(\"itemRender\")&& (node.props.name==\"render\" || node.props.renderType===\"render\")){\r\n\t\t\t\t\t\t(comp).itemRender=node;\r\n\t\t\t\t\t\t}else if (node.type==\"Graphic\"){\r\n\t\t\t\t\t\tClassUtils.addGraphicsToSprite(node,comp);\r\n\t\t\t\t\t\t}else if (ClassUtils.isDrawType(node.type)){\r\n\t\t\t\t\t\tClassUtils.addGraphicToSprite(node,comp,true);\r\n\t\t\t\t\t\t}else {\r\n\t\t\t\t\t\tvar tChild=View.createComp(node,null,view);\r\n\t\t\t\t\t\tif (node.type==\"Script\"){\r\n\t\t\t\t\t\t\ttChild[\"owner\"]=comp;\r\n\t\t\t\t\t\t\t}else if (node.props.renderType==\"mask\" || node.props.name==\"mask\"){\r\n\t\t\t\t\t\t\tcomp.mask=tChild;\r\n\t\t\t\t\t\t\t}else {(\r\n\t\t\t\t\t\t\ttChild instanceof laya.display.Sprite )&& comp.addChild(tChild);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\tvar props=uiView.props;\r\n\t\t\tfor (var prop in props){\r\n\t\t\t\tvar value=props[prop];\r\n\t\t\t\tView.setCompValue(comp,prop,value,view);\r\n\t\t\t}\r\n\t\t\tif (Laya.__typeof(comp,'laya.ui.IItem'))(comp).initItems();\r\n\t\t\tif (uiView.compId && view && view._idMap){\r\n\t\t\t\tview._idMap[uiView.compId]=comp;\r\n\t\t\t}\r\n\t\t\treturn comp;\r\n\t\t}\r\n\r\n\t\tView.setCompValue=function(comp,prop,value,view){\r\n\t\t\tif (prop===\"var\" && view){\r\n\t\t\t\tview[value]=comp;\r\n\t\t\t}\r\n\t\t\telse if (prop===\"x\" || prop===\"y\" || prop===\"width\" || prop===\"height\" || (typeof (comp[prop])=='number')){\r\n\t\t\t\tcomp[prop]=parseFloat(value);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tcomp[prop]=(value===\"true\" ? true :(value===\"false\" ? false :value))\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tView.getCompInstance=function(json){\r\n\t\t\tvar runtime=json.props ? json.props.runtime :\"\";\r\n\t\t\tvar compClass;\r\n\t\t\tcompClass=runtime ? (View.viewClassMap[runtime] || View.uiClassMap[runtime]|| Laya[\"__classmap\"][runtime]):View.uiClassMap[json.type];\r\n\t\t\treturn compClass ? new compClass():null;\r\n\t\t}\r\n\r\n\t\tView.regComponent=function(key,compClass){\r\n\t\t\tView.uiClassMap[key]=compClass;\r\n\t\t\tClassUtils.regClass(key,compClass);\r\n\t\t}\r\n\r\n\t\tView.regViewRuntime=function(key,compClass){\r\n\t\t\tView.viewClassMap[key]=compClass;\r\n\t\t}\r\n\r\n\t\tView.uiMap={};\r\n\t\tView.viewClassMap={};\r\n\t\t__static(View,\r\n\t\t['uiClassMap',function(){return this.uiClassMap={\"ViewStack\":ViewStack,\"LinkButton\":Button,\"TextArea\":TextArea,\"ColorPicker\":ColorPicker,\"Box\":Box,\"Button\":Button,\"CheckBox\":CheckBox,\"Clip\":Clip,\"ComboBox\":ComboBox,\"Component\":Component,\"HScrollBar\":HScrollBar,\"HSlider\":HSlider,\"Image\":Image,\"Label\":Label,\"List\":List,\"Panel\":Panel,\"ProgressBar\":ProgressBar,\"Radio\":Radio1,\"RadioGroup\":RadioGroup,\"ScrollBar\":ScrollBar,\"Slider\":Slider,\"Tab\":Tab,\"TextInput\":TextInput,\"View\":View,\"VScrollBar\":VScrollBar,\"VSlider\":VSlider,\"Tree\":Tree,\"HBox\":HBox,\"VBox\":VBox,\"Sprite\":Sprite,\"Animation\":Animation,\"Text\":Text};}\r\n\t\t]);\r\n\t\tView.__init$=function(){\r\n\t\t\tView._regs()\r\n\t\t}\r\n\r\n\t\treturn View;\r\n\t})(Box)\r\n\r\n\r\n\t/**\r\n\t*<code>List</code> 控件可显示项目列表。默认为垂直方向列表。可通过UI编辑器自定义列表。\r\n\t*\r\n\t*@example 以下示例代码，创建了一个 <code>List</code> 实例。\r\n\t*<listing version=\"3.0\">\r\n\t*package\r\n\t*{\r\n\t\t*import laya.ui.List;\r\n\t\t*import laya.utils.Handler;\r\n\t\t*public class List_Example\r\n\t\t*{\r\n\t\t\t*public function List_Example()\r\n\t\t\t*{\r\n\t\t\t\t*Laya.init(640,800,\"false\");//设置游戏画布宽高、渲染模式。\r\n\t\t\t\t*Laya.stage.bgColor=\"#efefef\";//设置画布的背景颜色。\r\n\t\t\t\t*Laya.loader.load([\"resource/ui/vscroll.png\",\"resource/ui/vscroll$bar.png\",\"resource/ui/vscroll$down.png\",\"resource/ui/vscroll$up.png\"],Handler.create(this,onLoadComplete));\r\n\t\t\t\t*}\r\n\t\t\t*private function onLoadComplete():void\r\n\t\t\t*{\r\n\t\t\t\t*var arr:Array=[];//创建一个数组，用于存贮列表的数据信息。\r\n\t\t\t\t*for (var i:int=0;i &lt;20;i++)\r\n\t\t\t\t*{\r\n\t\t\t\t\t*arr.push({label:\"item\"+i});\r\n\t\t\t\t\t*}\r\n\t\t\t\t*var list:List=new List();//创建一个 List 类的实例对象 list 。\r\n\t\t\t\t*list.itemRender=Item;//设置 list 的单元格渲染器。\r\n\t\t\t\t*list.repeatX=1;//设置 list 的水平方向单元格数量。\r\n\t\t\t\t*list.repeatY=10;//设置 list 的垂直方向单元格数量。\r\n\t\t\t\t*list.vScrollBarSkin=\"resource/ui/vscroll.png\";//设置 list 的垂直方向滚动条皮肤。\r\n\t\t\t\t*list.array=arr;//设置 list 的列表数据源。\r\n\t\t\t\t*list.pos(100,100);//设置 list 的位置。\r\n\t\t\t\t*list.selectEnable=true;//设置 list 可选。\r\n\t\t\t\t*list.selectHandler=new Handler(this,onSelect);//设置 list 改变选择项执行的处理器。\r\n\t\t\t\t*Laya.stage.addChild(list);//将 list 添加到显示列表。\r\n\t\t\t\t*}\r\n\t\t\t*private function onSelect(index:int):void\r\n\t\t\t*{\r\n\t\t\t\t*trace(\"当前选择的项目索引： index= \",index);\r\n\t\t\t\t*}\r\n\t\t\t*}\r\n\t\t*}\r\n\t*import laya.ui.Box;\r\n\t*import laya.ui.Label;\r\n\t*class Item extends Box\r\n\t*{\r\n\t\t*public function Item()\r\n\t\t*{\r\n\t\t\t*graphics.drawRect(0,0,100,20,null,\"#ff0000\");\r\n\t\t\t*var label:Label=new Label();\r\n\t\t\t*label.text=\"100000\";\r\n\t\t\t*label.name=\"label\";//设置 label 的name属性值。\r\n\t\t\t*label.size(100,20);\r\n\t\t\t*addChild(label);\r\n\t\t\t*}\r\n\t\t*}\r\n\t*</listing>\r\n\t*<listing version=\"3.0\">\r\n\t*(function (_super){\r\n\t\t*function Item(){\r\n\t\t\t*Item.__super.call(this);//初始化父类\r\n\t\t\t*this.graphics.drawRect(0,0,100,20,\"#ff0000\");\r\n\t\t\t*var label=new laya.ui.Label();//创建一个 Label 类的实例对象 label 。\r\n\t\t\t*label.text=\"100000\";//设置 label 的文本内容。\r\n\t\t\t*label.name=\"label\";//设置 label 的name属性值。\r\n\t\t\t*label.size(100,20);//设置 label 的宽度、高度。\r\n\t\t\t*this.addChild(label);//将 label 添加到显示列表。\r\n\t\t\t*};\r\n\t\t*Laya.class(Item,\"mypackage.listExample.Item\",_super);//注册类 Item 。\r\n\t\t*})(laya.ui.Box);\r\n\t*Laya.init(640,800);//设置游戏画布宽高、渲染模式。\r\n\t*Laya.stage.bgColor=\"#efefef\";//设置画布的背景颜色。\r\n\t*var res=[\"resource/ui/vscroll.png\",\"resource/ui/vscroll$bar.png\",\"resource/ui/vscroll$down.png\",\"resource/ui/vscroll$up.png\"];\r\n\t*Laya.loader.load(res,new laya.utils.Handler(this,onLoadComplete));//加载资源。\r\n\t*function onLoadComplete(){\r\n\t\t*var arr=[];//创建一个数组，用于存贮列表的数据信息。\r\n\t\t*for (var i=0;i &lt;20;i++){\r\n\t\t\t*arr.push({label:\"item\"+i});\r\n\t\t\t*}\r\n\t\t*var list=new laya.ui.List();//创建一个 List 类的实例对象 list 。\r\n\t\t*list.itemRender=mypackage.listExample.Item;//设置 list 的单元格渲染器。\r\n\t\t*list.repeatX=1;//设置 list 的水平方向单元格数量。\r\n\t\t*list.repeatY=10;//设置 list 的垂直方向单元格数量。\r\n\t\t*list.vScrollBarSkin=\"resource/ui/vscroll.png\";//设置 list 的垂直方向滚动条皮肤。\r\n\t\t*list.array=arr;//设置 list 的列表数据源。\r\n\t\t*list.pos(100,100);//设置 list 的位置。\r\n\t\t*list.selectEnable=true;//设置 list 可选。\r\n\t\t*list.selectHandler=new laya.utils.Handler(this,onSelect);//设置 list 改变选择项执行的处理器。\r\n\t\t*Laya.stage.addChild(list);//将 list 添加到显示列表。\r\n\t\t*}\r\n\t*function onSelect(index)\r\n\t*{\r\n\t\t*console.log(\"当前选择的项目索引： index= \",index);\r\n\t\t*}\r\n\t*\r\n\t*</listing>\r\n\t*<listing version=\"3.0\">\r\n\t*import List=laya.ui.List;\r\n\t*import Handler=laya.utils.Handler;\r\n\t*public class List_Example {\r\n\t\t*public List_Example(){\r\n\t\t\t*Laya.init(640,800);//设置游戏画布宽高。\r\n\t\t\t*Laya.stage.bgColor=\"#efefef\";//设置画布的背景颜色。\r\n\t\t\t*Laya.loader.load([\"resource/ui/vscroll.png\",\"resource/ui/vscroll$bar.png\",\"resource/ui/vscroll$down.png\",\"resource/ui/vscroll$up.png\"],Handler.create(this,this.onLoadComplete));\r\n\t\t\t*}\r\n\t\t*private onLoadComplete():void {\r\n\t\t\t*var arr=[];//创建一个数组，用于存贮列表的数据信息。\r\n\t\t\t*for (var i:number=0;i &lt;20;i++)\r\n\t\t\t*{\r\n\t\t\t\t*arr.push({label:\"item\"+i });\r\n\t\t\t\t*}\r\n\t\t\t*var list:List=new List();//创建一个 List 类的实例对象 list 。\r\n\t\t\t*list.itemRender=Item;//设置 list 的单元格渲染器。\r\n\t\t\t*list.repeatX=1;//设置 list 的水平方向单元格数量。\r\n\t\t\t*list.repeatY=10;//设置 list 的垂直方向单元格数量。\r\n\t\t\t*list.vScrollBarSkin=\"resource/ui/vscroll.png\";//设置 list 的垂直方向滚动条皮肤。\r\n\t\t\t*list.array=arr;//设置 list 的列表数据源。\r\n\t\t\t*list.pos(100,100);//设置 list 的位置。\r\n\t\t\t*list.selectEnable=true;//设置 list 可选。\r\n\t\t\t*list.selectHandler=new Handler(this,this.onSelect);//设置 list 改变选择项执行的处理器。\r\n\t\t\t*Laya.stage.addChild(list);//将 list 添加到显示列表。\r\n\t\t\t*}\r\n\t\t*private onSelect(index:number):void {\r\n\t\t\t*console.log(\"当前选择的项目索引： index= \",index);\r\n\t\t\t*}\r\n\t\t*}\r\n\t*import Box=laya.ui.Box;\r\n\t*import Label=laya.ui.Label;\r\n\t*class Item extends Box {\r\n\t\t*constructor(){\r\n\t\t\t*this.graphics.drawRect(0,0,100,20,null,\"#ff0000\");\r\n\t\t\t*var label:Label=new Label();\r\n\t\t\t*label.text=\"100000\";\r\n\t\t\t*label.name=\"label\";//设置 label 的name属性值。\r\n\t\t\t*label.size(100,20);\r\n\t\t\t*this.addChild(label);\r\n\t\t\t*}\r\n\t\t*}\r\n\t*</listing>\r\n\t*/\r\n\t//class laya.ui.List extends laya.ui.Box\r\n\tvar List=(function(_super){\r\n\t\tfunction List(){\r\n\t\t\tthis.selectHandler=null;\r\n\t\t\tthis.renderHandler=null;\r\n\t\t\tthis.mouseHandler=null;\r\n\t\t\tthis.selectEnable=false;\r\n\t\t\tthis.totalPage=0;\r\n\t\t\tthis._content=null;\r\n\t\t\tthis._scrollBar=null;\r\n\t\t\tthis._itemRender=null;\r\n\t\t\tthis._repeatX=0;\r\n\t\t\tthis._repeatY=0;\r\n\t\t\tthis._repeatX2=0;\r\n\t\t\tthis._repeatY2=0;\r\n\t\t\tthis._spaceX=0;\r\n\t\t\tthis._spaceY=0;\r\n\t\t\tthis._array=null;\r\n\t\t\tthis._startIndex=0;\r\n\t\t\tthis._selectedIndex=-1;\r\n\t\t\tthis._page=0;\r\n\t\t\tthis._isVertical=true;\r\n\t\t\tthis._cellSize=20;\r\n\t\t\tthis._cellOffset=0;\r\n\t\t\tthis._isMoved=false;\r\n\t\t\tthis.cacheContent=false;\r\n\t\t\tthis._createdLine=0;\r\n\t\t\tthis._cellChanged=false;\r\n\t\t\tList.__super.call(this);\r\n\t\t\tthis._cells=[];\r\n\t\t}\r\n\r\n\t\t__class(List,'laya.ui.List',_super);\r\n\t\tvar __proto=List.prototype;\r\n\t\tLaya.imps(__proto,{\"laya.ui.IItem\":true,\"laya.ui.IRender\":true})\r\n\t\t/**@inheritDoc */\r\n\t\t__proto.destroy=function(destroyChild){\r\n\t\t\t(destroyChild===void 0)&& (destroyChild=true);\r\n\t\t\tlaya.ui.Component.prototype.destroy.call(this,destroyChild);\r\n\t\t\tthis._content && this._content.destroy(destroyChild);\r\n\t\t\tthis._scrollBar && this._scrollBar.destroy(destroyChild);\r\n\t\t\tthis._content=null;\r\n\t\t\tthis._scrollBar=null;\r\n\t\t\tthis._itemRender=null;\r\n\t\t\tthis._cells=null;\r\n\t\t\tthis._array=null;\r\n\t\t\tthis.selectHandler=this.renderHandler=this.mouseHandler=null;\r\n\t\t}\r\n\r\n\t\t/**@inheritDoc */\r\n\t\t__proto.createChildren=function(){\r\n\t\t\tthis.addChild(this._content=new Box());\r\n\t\t}\r\n\r\n\t\t__proto.onScrollStart=function(){\r\n\t\t\tthis._$P.cacheAs || (this._$P.cacheAs=_super.prototype._$get_cacheAs.call(this));\r\n\t\t\t_super.prototype._$set_cacheAs.call(this,\"none\");\r\n\t\t\tthis._scrollBar.once(\"end\",this,this.onScrollEnd);\r\n\t\t}\r\n\r\n\t\t__proto.onScrollEnd=function(){\r\n\t\t\t_super.prototype._$set_cacheAs.call(this,this._$P.cacheAs);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*更改单元格的信息。\r\n\t\t*@internal 在此销毁、创建单元格，并设置单元格的位置等属性。相当于此列表内容发送改变时调用此函数。\r\n\t\t*/\r\n\t\t__proto.changeCells=function(){\r\n\t\t\tthis._cellChanged=false;\r\n\t\t\tif (this._itemRender){\r\n\t\t\t\tfor (var i=this._cells.length-1;i >-1;i--){\r\n\t\t\t\t\tthis._cells[i].destroy();\r\n\t\t\t\t}\r\n\t\t\t\tthis._cells.length=0;\r\n\t\t\t\tthis.scrollBar=this.getChildByName(\"scrollBar\");\r\n\t\t\t\tvar cell=this.createItem();\r\n\t\t\t\tvar cellWidth=(cell.width+this._spaceX)|| 1;\r\n\t\t\t\tvar cellHeight=(cell.height+this._spaceY)|| 1;\r\n\t\t\t\tif (this._width > 0)this._repeatX2=this._isVertical ? Math.round(this._width / cellWidth):Math.ceil(this._width / cellWidth);\r\n\t\t\t\tif (this._height > 0)this._repeatY2=this._isVertical ? Math.ceil(this._height / cellHeight):Math.round(this._height / cellHeight);\r\n\t\t\t\tvar listWidth=this._width ? this._width :(cellWidth *this.repeatX-this._spaceX);\r\n\t\t\t\tvar listHeight=this._height ? this._height :(cellHeight *this.repeatY-this._spaceY);\r\n\t\t\t\tthis._cellSize=this._isVertical ? cellHeight :cellWidth;\r\n\t\t\t\tthis._cellOffset=this._isVertical ? (cellHeight *Math.max(this._repeatY2,this._repeatY)-listHeight-this._spaceY):(cellWidth *Math.max(this._repeatX2,this._repeatX)-listWidth-this._spaceX);\r\n\t\t\t\tif (this._isVertical && this._scrollBar)this._scrollBar.height=listHeight;\r\n\t\t\t\telse if (!this._isVertical && this._scrollBar)this._scrollBar.width=listWidth;\r\n\t\t\t\tthis.setContentSize(listWidth,listHeight);\r\n\t\t\t\tvar numX=this._isVertical ? this.repeatX :this.repeatY;\r\n\t\t\t\tvar numY=(this._isVertical ? this.repeatY :this.repeatX)+(this._scrollBar ? 1 :0);\r\n\t\t\t\tthis._createItems(0,numX,numY);\r\n\t\t\t\tthis._createdLine=numY;\r\n\t\t\t\tif (this._array){\r\n\t\t\t\t\tthis.array=this._array;\r\n\t\t\t\t\tthis.runCallLater(this.renderItems);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__proto._createItems=function(startY,numX,numY){\r\n\t\t\tvar box=this._content;\r\n\t\t\tvar cell=this.createItem();\r\n\t\t\tvar cellWidth=cell.width+this._spaceX;\r\n\t\t\tvar cellHeight=cell.height+this._spaceY;\r\n\t\t\tif (this.cacheContent){\r\n\t\t\t\tvar cacheBox=new Box();\r\n\t\t\t\tcacheBox.cacheAsBitmap=true;\r\n\t\t\t\tcacheBox.pos((this._isVertical ? 0 :startY)*cellWidth,(this._isVertical ? startY :0)*cellHeight);\r\n\t\t\t\tthis._content.addChild(cacheBox);\r\n\t\t\t\tthis._content.optimizeScrollRect=true;\r\n\t\t\t\tbox=cacheBox;\r\n\t\t\t}\r\n\t\t\tfor (var k=startY;k < numY;k++){\r\n\t\t\t\tfor (var l=0;l < numX;l++){\r\n\t\t\t\t\tcell=this.createItem();\r\n\t\t\t\t\tcell.x=(this._isVertical ? l :k)*cellWidth-box.x;\r\n\t\t\t\t\tcell.y=(this._isVertical ? k :l)*cellHeight-box.y;\r\n\t\t\t\t\tcell.name=\"item\"+(k *numX+l);\r\n\t\t\t\t\tbox.addChild(cell);\r\n\t\t\t\t\tthis.addCell(cell);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__proto.createItem=function(){\r\n\t\t\treturn (typeof this._itemRender=='function')? new this._itemRender():View.createComp(this._itemRender);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*添加单元格。\r\n\t\t*@param cell 需要添加的单元格对象。\r\n\t\t*/\r\n\t\t__proto.addCell=function(cell){\r\n\t\t\tcell.on(\"click\",this,this.onCellMouse);\r\n\t\t\tcell.on(\"rightclick\",this,this.onCellMouse);\r\n\t\t\tcell.on(\"mouseover\",this,this.onCellMouse);\r\n\t\t\tcell.on(\"mouseout\",this,this.onCellMouse);\r\n\t\t\tcell.on(\"mousedown\",this,this.onCellMouse);\r\n\t\t\tcell.on(\"mouseup\",this,this.onCellMouse);\r\n\t\t\tthis._cells.push(cell);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*初始化单元格信息。\r\n\t\t*/\r\n\t\t__proto.initItems=function(){\r\n\t\t\tif (!this._itemRender && this.getChildByName(\"item0\")!=null){\r\n\t\t\t\tthis.repeatX=1;\r\n\t\t\t\tvar count=0;\r\n\t\t\t\tcount=0;\r\n\t\t\t\tfor (var i=0;i < 10000;i++){\r\n\t\t\t\t\tvar cell=this.getChildByName(\"item\"+i);\r\n\t\t\t\t\tif (cell){\r\n\t\t\t\t\t\tthis.addCell(cell);\r\n\t\t\t\t\t\tcount++;\r\n\t\t\t\t\t\tcontinue ;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak ;\r\n\t\t\t\t}\r\n\t\t\t\tthis.repeatY=count;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*设置可视区域大小。\r\n\t\t*<p>以（0，0，width参数，height参数）组成的矩形区域为可视区域。</p>\r\n\t\t*@param width 可视区域宽度。\r\n\t\t*@param height 可视区域高度。\r\n\t\t*/\r\n\t\t__proto.setContentSize=function(width,height){\r\n\t\t\tthis._content.width=width;\r\n\t\t\tthis._content.height=height;\r\n\t\t\tif (this._scrollBar){\r\n\t\t\t\tthis._content.scrollRect || (this._content.scrollRect=new Rectangle());\r\n\t\t\t\tthis._content.scrollRect.setTo(0,0,width,height);\r\n\t\t\t\tthis._content.conchModel && this._content.conchModel.scrollRect(0,0,width,height);\r\n\t\t\t\tthis.event(\"resize\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*单元格的鼠标事件侦听处理函数。\r\n\t\t*/\r\n\t\t__proto.onCellMouse=function(e){\r\n\t\t\tif (e.type===\"mousedown\")this._isMoved=false;\r\n\t\t\tvar cell=e.currentTarget;\r\n\t\t\tvar index=this._startIndex+this._cells.indexOf(cell);\r\n\t\t\tif (index < 0)return;\r\n\t\t\tif (e.type===\"click\" || e.type===\"rightclick\"){\r\n\t\t\t\tif (this.selectEnable && !this._isMoved)this.selectedIndex=index;\r\n\t\t\t\telse this.changeCellState(cell,true,0);\r\n\t\t\t\t}else if ((e.type===\"mouseover\" || e.type===\"mouseout\")&& this._selectedIndex!==index){\r\n\t\t\t\tthis.changeCellState(cell,e.type===\"mouseover\",0);\r\n\t\t\t}\r\n\t\t\tthis.mouseHandler && this.mouseHandler.runWith([e,index]);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*改变单元格的可视状态。\r\n\t\t*@param cell 单元格对象。\r\n\t\t*@param visable 是否显示。\r\n\t\t*@param index 单元格的属性 <code>index</code> 值。\r\n\t\t*/\r\n\t\t__proto.changeCellState=function(cell,visable,index){\r\n\t\t\tvar selectBox=cell.getChildByName(\"selectBox\");\r\n\t\t\tif (selectBox){\r\n\t\t\t\tthis.selectEnable=true;\r\n\t\t\t\tselectBox.visible=visable;\r\n\t\t\t\tselectBox.index=index;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**@inheritDoc */\r\n\t\t__proto.changeSize=function(){\r\n\t\t\tlaya.ui.Component.prototype.changeSize.call(this);\r\n\t\t\tthis.setContentSize(this.width,this.height);\r\n\t\t\tif (this._scrollBar)\r\n\t\t\t\tLaya.timer.once(10,this,this.onScrollBarChange);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*滚动条的 <code>Event.CHANGE</code> 事件侦听处理函数。\r\n\t\t*/\r\n\t\t__proto.onScrollBarChange=function(e){\r\n\t\t\tthis.runCallLater(this.changeCells);\r\n\t\t\tvar scrollValue=this._scrollBar.value;\r\n\t\t\tvar lineX=(this._isVertical ? this.repeatX :this.repeatY);\r\n\t\t\tvar lineY=(this._isVertical ? this.repeatY :this.repeatX);\r\n\t\t\tvar scrollLine=Math.floor(scrollValue / this._cellSize);\r\n\t\t\tif (!this.cacheContent){\r\n\t\t\t\tvar index=scrollLine *lineX;\r\n\t\t\t\tif (index > this._startIndex){\r\n\t\t\t\t\tvar num=index-this._startIndex;\r\n\t\t\t\t\tvar down=true;\r\n\t\t\t\t\tvar toIndex=this._startIndex+lineX *(lineY+1);\r\n\t\t\t\t\tthis._isMoved=true;\r\n\t\t\t\t\t}else if (index < this._startIndex){\r\n\t\t\t\t\tnum=this._startIndex-index;\r\n\t\t\t\t\tdown=false;\r\n\t\t\t\t\ttoIndex=this._startIndex-1;\r\n\t\t\t\t\tthis._isMoved=true;\r\n\t\t\t\t}\r\n\t\t\t\tfor (var i=0;i < num;i++){\r\n\t\t\t\t\tif (down){\r\n\t\t\t\t\t\tvar cell=this._cells.shift();\r\n\t\t\t\t\t\tthis._cells[this._cells.length]=cell;\r\n\t\t\t\t\t\tvar cellIndex=toIndex+i;\r\n\t\t\t\t\t\t}else {\r\n\t\t\t\t\t\tcell=this._cells.pop();\r\n\t\t\t\t\t\tthis._cells.unshift(cell);\r\n\t\t\t\t\t\tcellIndex=toIndex-i;\r\n\t\t\t\t\t};\r\n\t\t\t\t\tvar pos=Math.floor(cellIndex / lineX)*this._cellSize;\r\n\t\t\t\t\tthis._isVertical ? cell.y=pos :cell.x=pos;\r\n\t\t\t\t\tthis.renderItem(cell,cellIndex);\r\n\t\t\t\t}\r\n\t\t\t\tthis._startIndex=index;\r\n\t\t\t\tthis.changeSelectStatus();\r\n\t\t\t\t}else {\r\n\t\t\t\tnum=(lineY+1);\r\n\t\t\t\tif (this._createdLine-scrollLine < num){\r\n\t\t\t\t\tthis._createItems(this._createdLine,lineX,this._createdLine+num);\r\n\t\t\t\t\tthis._createdLine+=num;\r\n\t\t\t\t\tthis.renderItems(this._createdLine *lineX,0);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\tvar r=this._content.scrollRect;\r\n\t\t\tif (this._isVertical){\r\n\t\t\t\tr.y=scrollValue;\r\n\t\t\t\t}else {\r\n\t\t\t\tr.x=scrollValue;\r\n\t\t\t}\r\n\t\t\tthis._content.conchModel && this._content.conchModel.scrollRect(r.x,r.y,r.width,r.height);\r\n\t\t\tthis.repaint();\r\n\t\t}\r\n\r\n\t\t__proto.posCell=function(cell,cellIndex){\r\n\t\t\tif (!this._scrollBar)return;\r\n\t\t\tvar lineX=(this._isVertical ? this.repeatX :this.repeatY);\r\n\t\t\tvar lineY=(this._isVertical ? this.repeatY :this.repeatX);\r\n\t\t\tvar pos=Math.floor(cellIndex / lineX)*this._cellSize;\r\n\t\t\tthis._isVertical ? cell.y=pos :cell.x=pos;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*改变单元格的选择状态。\r\n\t\t*/\r\n\t\t__proto.changeSelectStatus=function(){\r\n\t\t\tfor (var i=0,n=this._cells.length;i < n;i++){\r\n\t\t\t\tthis.changeCellState(this._cells[i],this._selectedIndex===this._startIndex+i,1);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*渲染单元格列表。\r\n\t\t*/\r\n\t\t__proto.renderItems=function(from,to){\r\n\t\t\t(from===void 0)&& (from=0);\r\n\t\t\t(to===void 0)&& (to=0);\r\n\t\t\tfor (var i=0,n=to || this._cells.length;i < n;i++){\r\n\t\t\t\tthis.renderItem(this._cells[i],this._startIndex+i);\r\n\t\t\t}\r\n\t\t\tthis.changeSelectStatus();\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*渲染一个单元格。\r\n\t\t*@param cell 需要渲染的单元格对象。\r\n\t\t*@param index 单元格索引。\r\n\t\t*/\r\n\t\t__proto.renderItem=function(cell,index){\r\n\t\t\tif (index >=0 && index < this._array.length){\r\n\t\t\t\tcell.visible=true;\r\n\t\t\t\tcell.dataSource=this._array[index];\r\n\t\t\t\tif (!this.cacheContent){\r\n\t\t\t\t\tthis.posCell(cell,index);\r\n\t\t\t\t}\r\n\t\t\t\tif (this.hasListener(\"render\"))this.event(\"render\",[cell,index]);\r\n\t\t\t\tif (this.renderHandler)this.renderHandler.runWith([cell,index]);\r\n\t\t\t\t}else {\r\n\t\t\t\tcell.visible=false;\r\n\t\t\t\tcell.dataSource=null;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*刷新列表数据源。\r\n\t\t*/\r\n\t\t__proto.refresh=function(){\r\n\t\t\tthis.array=this._array;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*获取单元格数据源。\r\n\t\t*@param index 单元格索引。\r\n\t\t*/\r\n\t\t__proto.getItem=function(index){\r\n\t\t\tif (index >-1 && index < this._array.length){\r\n\t\t\t\treturn this._array[index];\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*修改单元格数据源。\r\n\t\t*@param index 单元格索引。\r\n\t\t*@param source 单元格数据源。\r\n\t\t*/\r\n\t\t__proto.changeItem=function(index,source){\r\n\t\t\tif (index >-1 && index < this._array.length){\r\n\t\t\t\tthis._array[index]=source;\r\n\t\t\t\tif (index >=this._startIndex && index < this._startIndex+this._cells.length){\r\n\t\t\t\t\tthis.renderItem(this.getCell(index),index);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*设置单元格数据源。\r\n\t\t*@param index 单元格索引。\r\n\t\t*@param source 单元格数据源。\r\n\t\t*/\r\n\t\t__proto.setItem=function(index,source){\r\n\t\t\tthis.changeItem(index,source);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*添加单元格数据源。\r\n\t\t*@param souce 数据源。\r\n\t\t*/\r\n\t\t__proto.addItem=function(souce){\r\n\t\t\tthis._array.push(souce);\r\n\t\t\tthis.array=this._array;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*添加单元格数据源到对应的数据索引处。\r\n\t\t*@param souce 单元格数据源。\r\n\t\t*@param index 索引。\r\n\t\t*/\r\n\t\t__proto.addItemAt=function(souce,index){\r\n\t\t\tthis._array.splice(index,0,souce);\r\n\t\t\tthis.array=this._array;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*通过数据源索引删除单元格数据源。\r\n\t\t*@param index 需要删除的数据源索引值。\r\n\t\t*/\r\n\t\t__proto.deleteItem=function(index){\r\n\t\t\tthis._array.splice(index,1);\r\n\t\t\tthis.array=this._array;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*通过可视单元格索引，获取单元格。\r\n\t\t*@param index 可视单元格索引。\r\n\t\t*@return 单元格对象。\r\n\t\t*/\r\n\t\t__proto.getCell=function(index){\r\n\t\t\tthis.runCallLater(this.changeCells);\r\n\t\t\tif (index >-1 && this._cells){\r\n\t\t\t\treturn this._cells[(index-this._startIndex)% this._cells.length];\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*<p>滚动列表，以设定的数据索引对应的单元格为当前可视列表的第一项。</p>\r\n\t\t*@param index 单元格在数据列表中的索引。\r\n\t\t*/\r\n\t\t__proto.scrollTo=function(index){\r\n\t\t\tif (this._scrollBar){\r\n\t\t\t\tvar numX=this._isVertical ? this.repeatX :this.repeatY;\r\n\t\t\t\tthis._scrollBar.value=Math.floor(index / numX)*this._cellSize;\r\n\t\t\t\t}else {\r\n\t\t\t\tthis.startIndex=index;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*<p>缓动滚动列表，以设定的数据索引对应的单元格为当前可视列表的第一项。</p>\r\n\t\t*@param index 单元格在数据列表中的索引。\r\n\t\t*@param time 缓动时间。\r\n\t\t*@param complete 缓动结束回掉\r\n\t\t*/\r\n\t\t__proto.tweenTo=function(index,time,complete){\r\n\t\t\t(time===void 0)&& (time=200);\r\n\t\t\tif (this._scrollBar){\r\n\t\t\t\tvar numX=this._isVertical ? this.repeatX :this.repeatY;\r\n\t\t\t\tTween.to(this._scrollBar,{value:Math.floor(index / numX)*this._cellSize},time,null,complete,0,true);\r\n\t\t\t\t}else {\r\n\t\t\t\tthis.startIndex=index;\r\n\t\t\t\tif (complete)complete.run();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**@private */\r\n\t\t__proto._setCellChanged=function(){\r\n\t\t\tif (!this._cellChanged){\r\n\t\t\t\tthis._cellChanged=true;\r\n\t\t\t\tthis.callLater(this.changeCells);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__proto.commitMeasure=function(){\r\n\t\t\tthis.runCallLater(this.changeCells);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*列表的数据总个数。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'length',function(){\r\n\t\t\treturn this._array.length;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*当前显示的单元格列表的开始索引。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'startIndex',function(){\r\n\t\t\treturn this._startIndex;\r\n\t\t\t},function(value){\r\n\t\t\tthis._startIndex=value > 0 ? value :0;\r\n\t\t\tthis.callLater(this.renderItems);\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*列表数据源。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'array',function(){\r\n\t\t\treturn this._array;\r\n\t\t\t},function(value){\r\n\t\t\tthis.runCallLater(this.changeCells);\r\n\t\t\tthis._array=value || [];\r\n\t\t\tvar length=this._array.length;\r\n\t\t\tthis.totalPage=Math.ceil(length / (this.repeatX *this.repeatY));\r\n\t\t\tthis._selectedIndex=this._selectedIndex < length ? this._selectedIndex :length-1;\r\n\t\t\tthis.startIndex=this._startIndex;\r\n\t\t\tif (this._scrollBar){\r\n\t\t\t\tvar numX=this._isVertical ? this.repeatX :this.repeatY;\r\n\t\t\t\tvar numY=this._isVertical ? this.repeatY :this.repeatX;\r\n\t\t\t\tvar lineCount=Math.ceil(length / numX);\r\n\t\t\t\tvar total=this._cellOffset > 0 ? this.totalPage+1 :this.totalPage;\r\n\t\t\t\tif (total > 1){\r\n\t\t\t\t\tthis._scrollBar.scrollSize=this._cellSize;\r\n\t\t\t\t\tthis._scrollBar.thumbPercent=numY / lineCount;\r\n\t\t\t\t\tthis._scrollBar.setScroll(0,(lineCount-numY)*this._cellSize+this._cellOffset,this._isVertical ? this._content.scrollRect.y :this._content.scrollRect.x);\r\n\t\t\t\t\tthis._scrollBar.target=this._content;\r\n\t\t\t\t\t}else {\r\n\t\t\t\t\tthis._scrollBar.setScroll(0,0,0);\r\n\t\t\t\t\tthis._scrollBar.target=this._content;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*获取或设置当前选择的单元格对象。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'selection',function(){\r\n\t\t\treturn this.getCell(this._selectedIndex);\r\n\t\t\t},function(value){\r\n\t\t\tthis.selectedIndex=this._startIndex+this._cells.indexOf(value);\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*当前选中的单元格数据源。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'selectedItem',function(){\r\n\t\t\treturn this._selectedIndex !=-1 ? this._array[this._selectedIndex] :null;\r\n\t\t\t},function(value){\r\n\t\t\tthis.selectedIndex=this._array.indexOf(value);\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*单元格集合。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'cells',function(){\r\n\t\t\tthis.runCallLater(this.changeCells);\r\n\t\t\treturn this._cells;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*垂直方向显示的单元格之间的间距（以像素为单位）。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'spaceY',function(){\r\n\t\t\treturn this._spaceY;\r\n\t\t\t},function(value){\r\n\t\t\tthis._spaceY=value;\r\n\t\t\tthis._setCellChanged();\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*列表的当前页码。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'page',function(){\r\n\t\t\treturn this._page;\r\n\t\t\t},function(value){\r\n\t\t\tthis._page=value\r\n\t\t\tif (this._array){\r\n\t\t\t\tthis._page=value > 0 ? value :0;\r\n\t\t\t\tthis._page=this._page < this.totalPage ? this._page :this.totalPage-1;\r\n\t\t\t\tthis.startIndex=this._page *this.repeatX *this.repeatY;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t/**@inheritDoc */\r\n\t\t__getset(0,__proto,'height',_super.prototype._$get_height,function(value){\r\n\t\t\t_super.prototype._$set_height.call(this,value);\r\n\t\t\tthis._setCellChanged();\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*垂直方向显示的单元格数量。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'repeatY',function(){\r\n\t\t\treturn this._repeatY > 0 ? this._repeatY :this._repeatY2 > 0 ? this._repeatY2 :1;\r\n\t\t\t},function(value){\r\n\t\t\tthis._repeatY=value;\r\n\t\t\tthis._setCellChanged();\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*水平方向显示的单元格数量。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'repeatX',function(){\r\n\t\t\treturn this._repeatX > 0 ? this._repeatX :this._repeatX2 > 0 ? this._repeatX2 :1;\r\n\t\t\t},function(value){\r\n\t\t\tthis._repeatX=value;\r\n\t\t\tthis._setCellChanged();\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*水平方向显示的单元格之间的间距（以像素为单位）。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'spaceX',function(){\r\n\t\t\treturn this._spaceX;\r\n\t\t\t},function(value){\r\n\t\t\tthis._spaceX=value;\r\n\t\t\tthis._setCellChanged();\r\n\t\t});\r\n\r\n\t\t/**@inheritDoc */\r\n\t\t__getset(0,__proto,'width',_super.prototype._$get_width,function(value){\r\n\t\t\t_super.prototype._$set_width.call(this,value);\r\n\t\t\tthis._setCellChanged();\r\n\t\t});\r\n\r\n\t\t/**@inheritDoc */\r\n\t\t__getset(0,__proto,'dataSource',_super.prototype._$get_dataSource,function(value){\r\n\t\t\tthis._dataSource=value;\r\n\t\t\tif (((typeof value=='number')&& Math.floor(value)==value)|| (typeof value=='string'))this.selectedIndex=parseInt(value);\r\n\t\t\telse if ((value instanceof Array))this.array=value\r\n\t\t\telse _super.prototype._$set_dataSource.call(this,value);\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*获取对 <code>List</code> 组件所包含的滚动条 <code>ScrollBar</code> 组件的引用。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'scrollBar',function(){\r\n\t\t\treturn this._scrollBar;\r\n\t\t\t},function(value){\r\n\t\t\tif (this._scrollBar !=value){\r\n\t\t\t\tthis._scrollBar=value;\r\n\t\t\t\tif (value){\r\n\t\t\t\t\tthis.addChild(this._scrollBar);\r\n\t\t\t\t\tthis._scrollBar.on(\"change\",this,this.onScrollBarChange);\r\n\t\t\t\t\tthis._isVertical=this._scrollBar.isVertical;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t/**@inheritDoc */\r\n\t\t__getset(0,__proto,'cacheAs',_super.prototype._$get_cacheAs,function(value){\r\n\t\t\t_super.prototype._$set_cacheAs.call(this,value);\r\n\t\t\tif (this._scrollBar){\r\n\t\t\t\tthis._$P.cacheAs=null;\r\n\t\t\t\tif (value!==\"none\")this._scrollBar.on(\"start\",this,this.onScrollStart);\r\n\t\t\t\telse this._scrollBar.off(\"start\",this,this.onScrollStart);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*单元格渲染器。\r\n\t\t*<p><b>取值：</b>\r\n\t\t*<ol>\r\n\t\t*<li>单元格类对象。</li>\r\n\t\t*<li> UI 的 JSON 描述。</li>\r\n\t\t*</ol></p>\r\n\t\t*/\r\n\t\t__getset(0,__proto,'itemRender',function(){\r\n\t\t\treturn this._itemRender;\r\n\t\t\t},function(value){\r\n\t\t\tthis._itemRender=value;\r\n\t\t\tthis._setCellChanged();\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*获取对 <code>List</code> 组件所包含的内容容器 <code>Box</code> 组件的引用。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'content',function(){\r\n\t\t\treturn this._content;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*水平方向滚动条皮肤。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'hScrollBarSkin',function(){\r\n\t\t\treturn this._scrollBar ? this._scrollBar.skin :null;\r\n\t\t\t},function(value){\r\n\t\t\tthis.removeChildByName(\"scrollBar\");\r\n\t\t\tvar scrollBar=new HScrollBar();\r\n\t\t\tscrollBar.name=\"scrollBar\";\r\n\t\t\tscrollBar.bottom=0;\r\n\t\t\tscrollBar.skin=value;\r\n\t\t\tthis.scrollBar=scrollBar;\r\n\t\t\tthis.addChild(scrollBar);\r\n\t\t\tthis._setCellChanged();\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*表示当前选择的项索引。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'selectedIndex',function(){\r\n\t\t\treturn this._selectedIndex;\r\n\t\t\t},function(value){\r\n\t\t\tif (this._selectedIndex !=value){\r\n\t\t\t\tthis._selectedIndex=value;\r\n\t\t\t\tthis.changeSelectStatus();\r\n\t\t\t\tthis.event(\"change\");\r\n\t\t\t\tthis.selectHandler && this.selectHandler.runWith(value);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*垂直方向滚动条皮肤。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'vScrollBarSkin',function(){\r\n\t\t\treturn this._scrollBar ? this._scrollBar.skin :null;\r\n\t\t\t},function(value){\r\n\t\t\tthis.removeChildByName(\"scrollBar\");\r\n\t\t\tvar scrollBar=new VScrollBar();\r\n\t\t\tscrollBar.name=\"scrollBar\";\r\n\t\t\tscrollBar.right=0;\r\n\t\t\tscrollBar.skin=value;\r\n\t\t\tthis.scrollBar=scrollBar;\r\n\t\t\tthis.addChild(scrollBar);\r\n\t\t\tthis._setCellChanged();\r\n\t\t});\r\n\r\n\t\treturn List;\r\n\t})(Box)\r\n\r\n\r\n\t/**\r\n\t*<code>Tree</code> 控件使用户可以查看排列为可扩展树的层次结构数据。\r\n\t*\r\n\t*@example 以下示例代码，创建了一个 <code>Tree</code> 实例。\r\n\t*<listing version=\"3.0\">\r\n\t*package\r\n\t*{\r\n\t\t*import laya.ui.Tree;\r\n\t\t*import laya.utils.Browser;\r\n\t\t*import laya.utils.Handler;\r\n\t\t*public class Tree_Example\r\n\t\t*{\r\n\t\t\t*public function Tree_Example()\r\n\t\t\t*{\r\n\t\t\t\t*Laya.init(640,800);\r\n\t\t\t\t*Laya.stage.bgColor=\"#efefef\";//设置画布的背景颜色。\r\n\t\t\t\t*Laya.loader.load([\"resource/ui/vscroll.png\",\"resource/ui/vscroll$bar.png\",\"resource/ui/vscroll$down.png\",\"resource/ui/vscroll$up.png\",\"resource/ui/clip_selectBox.png\",\"resource/ui/clip_tree_folder.png\",\"resource/ui/clip_tree_arrow.png\"],Handler.create(this,onLoadComplete));\r\n\t\t\t\t*}\r\n\t\t\t*private function onLoadComplete():void\r\n\t\t\t*{\r\n\t\t\t\t*var xmlString:String;//创建一个xml字符串，用于存储树结构数据。\r\n\t\t\t\t*xmlString=\"&lt;root&gt;&lt;item label='box1'&gt;&lt;abc label='child1'/&gt;&lt;abc label='child2'/&gt;&lt;abc label='child3'/&gt;&lt;abc label='child4'/&gt;&lt;abc label='child5'/&gt;&lt;/item&gt;&lt;item label='box2'&gt;&lt;abc label='child1'/&gt;&lt;abc label='child2'/&gt;&lt;abc label='child3'/&gt;&lt;abc label='child4'/&gt;&lt;/item&gt;&lt;/root&gt;\";\r\n\t\t\t\t*var domParser:*=new Browser.window.DOMParser();//创建一个DOMParser实例domParser。\r\n\t\t\t\t*var xml:*=domParser.parseFromString(xmlString,\"text/xml\");//解析xml字符。\r\n\t\t\t\t*var tree:Tree=new Tree();//创建一个 Tree 类的实例对象 tree 。\r\n\t\t\t\t*tree.scrollBarSkin=\"resource/ui/vscroll.png\";//设置 tree 的皮肤。\r\n\t\t\t\t*tree.itemRender=Item;//设置 tree 的项渲染器。\r\n\t\t\t\t*tree.xml=xml;//设置 tree 的树结构数据。\r\n\t\t\t\t*tree.x=100;//设置 tree 对象的属性 x 的值，用于控制 tree 对象的显示位置。\r\n\t\t\t\t*tree.y=100;//设置 tree 对象的属性 y 的值，用于控制 tree 对象的显示位置。\r\n\t\t\t\t*tree.width=200;//设置 tree 的宽度。\r\n\t\t\t\t*tree.height=100;//设置 tree 的高度。\r\n\t\t\t\t*Laya.stage.addChild(tree);//将 tree 添加到显示列表。\r\n\t\t\t\t*}\r\n\t\t\t*}\r\n\t\t*}\r\n\t*import laya.ui.Box;\r\n\t*import laya.ui.Clip;\r\n\t*import laya.ui.Label;\r\n\t*class Item extends Box\r\n\t*{\r\n\t\t*public function Item()\r\n\t\t*{\r\n\t\t\t*this.name=\"render\";\r\n\t\t\t*this.right=0;\r\n\t\t\t*this.left=0;\r\n\t\t\t*var selectBox:Clip=new Clip(\"resource/ui/clip_selectBox.png\",1,2);\r\n\t\t\t*selectBox.name=\"selectBox\";\r\n\t\t\t*selectBox.height=24;\r\n\t\t\t*selectBox.x=13;\r\n\t\t\t*selectBox.y=0;\r\n\t\t\t*selectBox.left=12;\r\n\t\t\t*addChild(selectBox);\r\n\t\t\t*var folder:Clip=new Clip(\"resource/ui/clip_tree_folder.png\",1,3);\r\n\t\t\t*folder.name=\"folder\";\r\n\t\t\t*folder.x=14;\r\n\t\t\t*folder.y=4;\r\n\t\t\t*addChild(folder);\r\n\t\t\t*var label:Label=new Label(\"treeItem\");\r\n\t\t\t*label.name=\"label\";\r\n\t\t\t*label.color=\"#ffff00\";\r\n\t\t\t*label.width=150;\r\n\t\t\t*label.height=22;\r\n\t\t\t*label.x=33;\r\n\t\t\t*label.y=1;\r\n\t\t\t*label.left=33;\r\n\t\t\t*label.right=0;\r\n\t\t\t*addChild(label);\r\n\t\t\t*var arrow:Clip=new Clip(\"resource/ui/clip_tree_arrow.png\",1,2);\r\n\t\t\t*arrow.name=\"arrow\";\r\n\t\t\t*arrow.x=0;\r\n\t\t\t*arrow.y=5;\r\n\t\t\t*addChild(arrow);\r\n\t\t\t*}\r\n\t\t*}\r\n\t*</listing>\r\n\t*<listing version=\"3.0\">\r\n\t*Laya.init(640,800);//设置游戏画布宽高、渲染模式\r\n\t*Laya.stage.bgColor=\"#efefef\";//设置画布的背景颜色\r\n\t*var res=[\"resource/ui/vscroll.png\",\"resource/ui/vscroll$bar.png\",\"resource/ui/vscroll$down.png\",\"resource/ui/vscroll$up.png\",\"resource/ui/clip_selectBox.png\",\"resource/ui/clip_tree_folder.png\",\"resource/ui/clip_tree_arrow.png\"];\r\n\t*Laya.loader.load(res,new laya.utils.Handler(this,onLoadComplete));\r\n\t*function onLoadComplete(){\r\n\t\t*var xmlString;//创建一个xml字符串，用于存储树结构数据。\r\n\t\t*xmlString=\"&lt;root&gt;&lt;item label='box1'&gt;&lt;abc label='child1'/&gt;&lt;abc label='child2'/&gt;&lt;abc label='child3'/&gt;&lt;abc label='child4'/&gt;&lt;abc label='child5'/&gt;&lt;/item&gt;&lt;item label='box2'&gt;&lt;abc label='child1'/&gt;&lt;abc label='child2'/&gt;&lt;abc label='child3'/&gt;&lt;abc label='child4'/&gt;&lt;/item&gt;&lt;/root&gt;\";\r\n\t\t*var domParser=new laya.utils.Browser.window.DOMParser();//创建一个DOMParser实例domParser。\r\n\t\t*var xml=domParser.parseFromString(xmlString,\"text/xml\");//解析xml字符。\r\n\t\t*var tree=new laya.ui.Tree();//创建一个 Tree 类的实例对象 tree 。\r\n\t\t*tree.scrollBarSkin=\"resource/ui/vscroll.png\";//设置 tree 的皮肤。\r\n\t\t*tree.itemRender=mypackage.treeExample.Item;//设置 tree 的项渲染器。\r\n\t\t*tree.xml=xml;//设置 tree 的树结构数据。\r\n\t\t*tree.x=100;//设置 tree 对象的属性 x 的值，用于控制 tree 对象的显示位置。\r\n\t\t*tree.y=100;//设置 tree 对象的属性 y 的值，用于控制 tree 对象的显示位置。\r\n\t\t*tree.width=200;//设置 tree 的宽度。\r\n\t\t*tree.height=100;//设置 tree 的高度。\r\n\t\t*Laya.stage.addChild(tree);//将 tree 添加到显示列表。\r\n\t\t*}\r\n\t*(function (_super){\r\n\t\t*function Item(){\r\n\t\t\t*Item.__super.call(this);//初始化父类。\r\n\t\t\t*this.right=0;\r\n\t\t\t*this.left=0;\r\n\t\t\t*var selectBox=new laya.ui.Clip(\"resource/ui/clip_selectBox.png\",1,2);\r\n\t\t\t*selectBox.name=\"selectBox\";//设置 selectBox 的name 为“selectBox”时，将被识别为树结构的项的背景。2帧：悬停时背景、选中时背景。\r\n\t\t\t*selectBox.height=24;\r\n\t\t\t*selectBox.x=13;\r\n\t\t\t*selectBox.y=0;\r\n\t\t\t*selectBox.left=12;\r\n\t\t\t*this.addChild(selectBox);//需要使用this.访问父类的属性或方法。\r\n\t\t\t*var folder=new laya.ui.Clip(\"resource/ui/clip_tree_folder.png\",1,3);\r\n\t\t\t*folder.name=\"folder\";//设置 folder 的name 为“folder”时，将被识别为树结构的文件夹开启状态图表。2帧：折叠状态、打开状态。\r\n\t\t\t*folder.x=14;\r\n\t\t\t*folder.y=4;\r\n\t\t\t*this.addChild(folder);\r\n\t\t\t*var label=new laya.ui.Label(\"treeItem\");\r\n\t\t\t*label.name=\"label\";//设置 label 的name 为“label”时，此值将用于树结构数据赋值。\r\n\t\t\t*label.color=\"#ffff00\";\r\n\t\t\t*label.width=150;\r\n\t\t\t*label.height=22;\r\n\t\t\t*label.x=33;\r\n\t\t\t*label.y=1;\r\n\t\t\t*label.left=33;\r\n\t\t\t*label.right=0;\r\n\t\t\t*this.addChild(label);\r\n\t\t\t*var arrow=new laya.ui.Clip(\"resource/ui/clip_tree_arrow.png\",1,2);\r\n\t\t\t*arrow.name=\"arrow\";//设置 arrow 的name 为“arrow”时，将被识别为树结构的文件夹开启状态图表。2帧：折叠状态、打开状态。\r\n\t\t\t*arrow.x=0;\r\n\t\t\t*arrow.y=5;\r\n\t\t\t*this.addChild(arrow);\r\n\t\t\t*};\r\n\t\t*Laya.class(Item,\"mypackage.treeExample.Item\",_super);//注册类 Item 。\r\n\t\t*})(laya.ui.Box);\r\n\t*</listing>\r\n\t*<listing version=\"3.0\">\r\n\t*import Tree=laya.ui.Tree;\r\n\t*import Browser=laya.utils.Browser;\r\n\t*import Handler=laya.utils.Handler;\r\n\t*class Tree_Example {\r\n\t\t*constructor(){\r\n\t\t\t*Laya.init(640,800);\r\n\t\t\t*Laya.stage.bgColor=\"#efefef\";//设置画布的背景颜色。\r\n\t\t\t*Laya.loader.load([\"resource/ui/vscroll.png\",\"resource/ui/vscroll$bar.png\",\"resource/ui/vscroll$down.png\",\"resource/ui/vscroll$up.png\",\"resource/ui/vscroll$up.png\",\"resource/ui/clip_selectBox.png\",\"resource/ui/clip_tree_folder * . * png\",\"resource/ui/clip_tree_arrow.png\"],Handler.create(this,this.onLoadComplete));\r\n\t\t\t*}\r\n\t\t*private onLoadComplete():void {\r\n\t\t\t*var xmlString:String;//创建一个xml字符串，用于存储树结构数据。\r\n\t\t\t*xmlString=\"&lt;root&gt;&lt;item label='box1'&gt;&lt;abc label='child1'/&gt;&lt;abc label='child2'/&gt;&lt;abc label='child3'/&gt;&lt;abc label='child4'/&gt;&lt;abc label='child5'/&gt;&lt;/item&gt;&lt;item label='box2'&gt;&lt;abc  * label='child1'/&gt;&lt;abc label='child2'/&gt;&lt;abc label='child3'/&gt;&lt;abc label='child4'/&gt;&lt;/item&gt;&lt;/root&gt;\";\r\n\t\t\t*var domParser:any=new Browser.window.DOMParser();//创建一个DOMParser实例domParser。\r\n\t\t\t*var xml:any=domParser.parseFromString(xmlString,\"text/xml\");//解析xml字符。\r\n\t\t\t*var tree:Tree=new Tree();//创建一个 Tree 类的实例对象 tree 。\r\n\t\t\t*tree.scrollBarSkin=\"resource/ui/vscroll.png\";//设置 tree 的皮肤。\r\n\t\t\t*tree.itemRender=Item;//设置 tree 的项渲染器。\r\n\t\t\t*tree.xml=xml;//设置 tree 的树结构数据。\r\n\t\t\t*tree.x=100;//设置 tree 对象的属性 x 的值，用于控制 tree 对象的显示位置。\r\n\t\t\t*tree.y=100;//设置 tree 对象的属性 y 的值，用于控制 tree 对象的显示位置。\r\n\t\t\t*tree.width=200;//设置 tree 的宽度。\r\n\t\t\t*tree.height=100;//设置 tree 的高度。\r\n\t\t\t*Laya.stage.addChild(tree);//将 tree 添加到显示列表。\r\n\t\t\t*}\r\n\t\t*}\r\n\t*import Box=laya.ui.Box;\r\n\t*import Clip=laya.ui.Clip;\r\n\t*import Label=laya.ui.Label;\r\n\t*class Item extends Box {\r\n\t\t*constructor(){\r\n\t\t\t*super();\r\n\t\t\t*this.name=\"render\";\r\n\t\t\t*this.right=0;\r\n\t\t\t*this.left=0;\r\n\t\t\t*var selectBox:Clip=new Clip(\"resource/ui/clip_selectBox.png\",1,2);\r\n\t\t\t*selectBox.name=\"selectBox\";\r\n\t\t\t*selectBox.height=24;\r\n\t\t\t*selectBox.x=13;\r\n\t\t\t*selectBox.y=0;\r\n\t\t\t*selectBox.left=12;\r\n\t\t\t*this.addChild(selectBox);\r\n\t\t\t*var folder:Clip=new Clip(\"resource/ui/clip_tree_folder.png\",1,3);\r\n\t\t\t*folder.name=\"folder\";\r\n\t\t\t*folder.x=14;\r\n\t\t\t*folder.y=4;\r\n\t\t\t*this.addChild(folder);\r\n\t\t\t*var label:Label=new Label(\"treeItem\");\r\n\t\t\t*label.name=\"label\";\r\n\t\t\t*label.color=\"#ffff00\";\r\n\t\t\t*label.width=150;\r\n\t\t\t*label.height=22;\r\n\t\t\t*label.x=33;\r\n\t\t\t*label.y=1;\r\n\t\t\t*label.left=33;\r\n\t\t\t*label.right=0;\r\n\t\t\t*this.addChild(label);\r\n\t\t\t*var arrow:Clip=new Clip(\"resource/ui/clip_tree_arrow.png\",1,2);\r\n\t\t\t*arrow.name=\"arrow\";\r\n\t\t\t*arrow.x=0;\r\n\t\t\t*arrow.y=5;\r\n\t\t\t*this.addChild(arrow);\r\n\t\t\t*}\r\n\t\t*}\r\n\t*</listing>\r\n\t*/\r\n\t//class laya.ui.Tree extends laya.ui.Box\r\n\tvar Tree=(function(_super){\r\n\t\tfunction Tree(){\r\n\t\t\tthis._list=null;\r\n\t\t\tthis._source=null;\r\n\t\t\tthis._renderHandler=null;\r\n\t\t\tthis._spaceLeft=10;\r\n\t\t\tthis._spaceBottom=0;\r\n\t\t\tthis._keepStatus=true;\r\n\t\t\tTree.__super.call(this);\r\n\t\t\tthis.width=this.height=200;\r\n\t\t}\r\n\r\n\t\t__class(Tree,'laya.ui.Tree',_super);\r\n\t\tvar __proto=Tree.prototype;\r\n\t\tLaya.imps(__proto,{\"laya.ui.IRender\":true})\r\n\t\t/**@inheritDoc */\r\n\t\t__proto.destroy=function(destroyChild){\r\n\t\t\t(destroyChild===void 0)&& (destroyChild=true);\r\n\t\t\tlaya.ui.Component.prototype.destroy.call(this,destroyChild);\r\n\t\t\tthis._list && this._list.destroy(destroyChild);\r\n\t\t\tthis._list=null;\r\n\t\t\tthis._source=null;\r\n\t\t\tthis._renderHandler=null;\r\n\t\t}\r\n\r\n\t\t/**@inheritDoc */\r\n\t\t__proto.createChildren=function(){\r\n\t\t\tthis.addChild(this._list=new List());\r\n\t\t\tthis._list.renderHandler=Handler.create(this,this.renderItem,null,false);\r\n\t\t\tthis._list.repeatX=1;\r\n\t\t\tthis._list.on(\"change\",this,this.onListChange);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*此对象包含的<code>List</code>实例的<code>Event.CHANGE</code>事件侦听处理函数。\r\n\t\t*/\r\n\t\t__proto.onListChange=function(e){\r\n\t\t\tthis.event(\"change\");\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*获取数据源集合。\r\n\t\t*/\r\n\t\t__proto.getArray=function(){\r\n\t\t\tvar arr=[];\r\n\t\t\tvar item;\r\n\t\t\tfor(var $each_item in this._source){\r\n\t\t\t\titem=this._source[$each_item];\r\n\t\t\t\tif (this.getParentOpenStatus(item)){\r\n\t\t\t\t\titem.x=this._spaceLeft *this.getDepth(item);\r\n\t\t\t\t\tarr.push(item);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn arr;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*获取项对象的深度。\r\n\t\t*/\r\n\t\t__proto.getDepth=function(item,num){\r\n\t\t\t(num===void 0)&& (num=0);\r\n\t\t\tif (item.nodeParent==null)return num;\r\n\t\t\telse return this.getDepth(item.nodeParent,num+1);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*获取项对象的上一级的打开状态。\r\n\t\t*/\r\n\t\t__proto.getParentOpenStatus=function(item){\r\n\t\t\tvar parent=item.nodeParent;\r\n\t\t\tif (parent==null){\r\n\t\t\t\treturn true;\r\n\t\t\t\t}else {\r\n\t\t\t\tif (parent.isOpen){\r\n\t\t\t\t\tif (parent.nodeParent !=null)return this.getParentOpenStatus(parent);\r\n\t\t\t\t\telse return true;\r\n\t\t\t\t\t}else {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*渲染一个项对象。\r\n\t\t*@param cell 一个项对象。\r\n\t\t*@param index 项的索引。\r\n\t\t*/\r\n\t\t__proto.renderItem=function(cell,index){\r\n\t\t\tvar item=cell.dataSource;\r\n\t\t\tif (item){\r\n\t\t\t\tcell.left=item.x;\r\n\t\t\t\tvar arrow=cell.getChildByName(\"arrow\");\r\n\t\t\t\tif (arrow){\r\n\t\t\t\t\tif (item.hasChild){\r\n\t\t\t\t\t\tarrow.visible=true;\r\n\t\t\t\t\t\tarrow.index=item.isOpen ? 1 :0;\r\n\t\t\t\t\t\tarrow.tag=index;\r\n\t\t\t\t\t\tarrow.off(\"click\",this,this.onArrowClick);\r\n\t\t\t\t\t\tarrow.on(\"click\",this,this.onArrowClick);\r\n\t\t\t\t\t\t}else {\r\n\t\t\t\t\t\tarrow.visible=false;\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t\tvar folder=cell.getChildByName(\"folder\");\r\n\t\t\t\tif (folder){\r\n\t\t\t\t\tif (folder.clipY==2){\r\n\t\t\t\t\t\tfolder.index=item.isDirectory ? 0 :1;\r\n\t\t\t\t\t\t}else {\r\n\t\t\t\t\t\tfolder.index=item.isDirectory ? item.isOpen ? 1 :0 :2;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis._renderHandler && this._renderHandler.runWith([cell,index]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*/\r\n\t\t__proto.onArrowClick=function(e){\r\n\t\t\tvar arrow=e.currentTarget;\r\n\t\t\tvar index=arrow.tag;\r\n\t\t\tthis._list.array[index].isOpen=!this._list.array[index].isOpen;\r\n\t\t\tthis._list.array=this.getArray();\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*设置指定项索引的项对象的打开状态。\r\n\t\t*@param index 项索引。\r\n\t\t*@param isOpen 是否处于打开状态。\r\n\t\t*/\r\n\t\t__proto.setItemState=function(index,isOpen){\r\n\t\t\tif (!this._list.array[index])return;\r\n\t\t\tthis._list.array[index].isOpen=isOpen;\r\n\t\t\tthis._list.array=this.getArray();\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*刷新项列表。\r\n\t\t*/\r\n\t\t__proto.fresh=function(){\r\n\t\t\tthis._list.array=this.getArray();\r\n\t\t\tthis.repaint();\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*解析并处理XML类型的数据源。\r\n\t\t*/\r\n\t\t__proto.parseXml=function(xml,source,nodeParent,isRoot){\r\n\t\t\tvar obj;\r\n\t\t\tvar list=xml.childNodes;\r\n\t\t\tvar childCount=list.length;\r\n\t\t\tif (!isRoot){\r\n\t\t\t\tobj={};\r\n\t\t\t\tvar list2=xml.attributes;\r\n\t\t\t\tvar attrs;\r\n\t\t\t\tfor(var $each_attrs in list2){\r\n\t\t\t\t\tattrs=list2[$each_attrs];\r\n\t\t\t\t\tvar prop=attrs.nodeName;\r\n\t\t\t\t\tvar value=attrs.nodeValue;\r\n\t\t\t\t\tobj[prop]=value==\"true\" ? true :value==\"false\" ? false :value;\r\n\t\t\t\t}\r\n\t\t\t\tobj.nodeParent=nodeParent;\r\n\t\t\t\tif (childCount > 0)obj.isDirectory=true;\r\n\t\t\t\tobj.hasChild=childCount > 0;\r\n\t\t\t\tsource.push(obj);\r\n\t\t\t}\r\n\t\t\tfor (var i=0;i < childCount;i++){\r\n\t\t\t\tvar node=list[i];\r\n\t\t\t\tthis.parseXml(node,source,obj,false);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*处理数据项的打开状态。\r\n\t\t*/\r\n\t\t__proto.parseOpenStatus=function(oldSource,newSource){\r\n\t\t\tfor (var i=0,n=newSource.length;i < n;i++){\r\n\t\t\t\tvar newItem=newSource[i];\r\n\t\t\t\tif (newItem.isDirectory){\r\n\t\t\t\t\tfor (var j=0,m=oldSource.length;j < m;j++){\r\n\t\t\t\t\t\tvar oldItem=oldSource[j];\r\n\t\t\t\t\t\tif (oldItem.isDirectory && this.isSameParent(oldItem,newItem)&& newItem.label==oldItem.label){\r\n\t\t\t\t\t\t\tnewItem.isOpen=oldItem.isOpen;\r\n\t\t\t\t\t\t\tbreak ;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*判断两个项对象在树结构中的父节点是否相同。\r\n\t\t*@param item1 项对象。\r\n\t\t*@param item2 项对象。\r\n\t\t*@return 如果父节点相同值为true，否则值为false。\r\n\t\t*/\r\n\t\t__proto.isSameParent=function(item1,item2){\r\n\t\t\tif (item1.nodeParent==null && item2.nodeParent==null)return true;\r\n\t\t\telse if (item1.nodeParent==null || item2.nodeParent==null)return false\r\n\t\t\telse {\r\n\t\t\t\tif (item1.nodeParent.label==item2.nodeParent.label)return this.isSameParent(item1.nodeParent,item2.nodeParent);\r\n\t\t\t\telse return false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*更新项列表，显示指定键名的数据项。\r\n\t\t*@param key 键名。\r\n\t\t*/\r\n\t\t__proto.filter=function(key){\r\n\t\t\tif (Boolean(key)){\r\n\t\t\t\tvar result=[];\r\n\t\t\t\tthis.getFilterSource(this._source,result,key);\r\n\t\t\t\tthis._list.array=result;\r\n\t\t\t\t}else {\r\n\t\t\t\tthis._list.array=this.getArray();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*获取数据源中指定键名的值。\r\n\t\t*/\r\n\t\t__proto.getFilterSource=function(array,result,key){\r\n\t\t\tkey=key.toLocaleLowerCase();\r\n\t\t\tvar item;\r\n\t\t\tfor(var $each_item in array){\r\n\t\t\t\titem=array[$each_item];\r\n\t\t\t\tif (!item.isDirectory && String(item.label).toLowerCase().indexOf(key)>-1){\r\n\t\t\t\t\titem.x=0;\r\n\t\t\t\t\tresult.push(item);\r\n\t\t\t\t}\r\n\t\t\t\tif (item.child && item.child.length > 0){\r\n\t\t\t\t\tthis.getFilterSource(item.child,result,key);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*xml结构的数据源。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'xml',null,function(value){\r\n\t\t\tvar arr=[];\r\n\t\t\tthis.parseXml(value.childNodes[0],arr,null,true);\r\n\t\t\tthis.array=arr;\r\n\t\t});\r\n\r\n\t\t/**@inheritDoc */\r\n\t\t__getset(0,__proto,'height',_super.prototype._$get_height,function(value){\r\n\t\t\t_super.prototype._$set_height.call(this,value);\r\n\t\t\tthis._list.height=value;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*@inheritDoc\r\n\t\t*/\r\n\t\t__getset(0,__proto,'width',_super.prototype._$get_width,function(value){\r\n\t\t\t_super.prototype._$set_width.call(this,value);\r\n\t\t\tthis._list.width=value;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*表示当前选择的项索引。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'selectedIndex',function(){\r\n\t\t\treturn this._list.selectedIndex;\r\n\t\t\t},function(value){\r\n\t\t\tthis._list.selectedIndex=value;\r\n\t\t});\r\n\r\n\t\t/**@inheritDoc */\r\n\t\t__getset(0,__proto,'dataSource',_super.prototype._$get_dataSource,function(value){\r\n\t\t\tthis._dataSource=value;\r\n\t\t\t_super.prototype._$set_dataSource.call(this,value);\r\n\t\t});\r\n\r\n\t\t/**滚动条*/\r\n\t\t__getset(0,__proto,'scrollBar',function(){\r\n\t\t\treturn this._list.scrollBar;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*左侧缩进距离（以像素为单位）。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'spaceLeft',function(){\r\n\t\t\treturn this._spaceLeft;\r\n\t\t\t},function(value){\r\n\t\t\tthis._spaceLeft=value;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*<code>Tree</code> 实例的渲染处理器。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'renderHandler',function(){\r\n\t\t\treturn this._renderHandler;\r\n\t\t\t},function(value){\r\n\t\t\tthis._renderHandler=value;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*此对象包含的<code>List</code>实例的单元格渲染器。\r\n\t\t*<p><b>取值：</b>\r\n\t\t*<ol>\r\n\t\t*<li>单元格类对象。</li>\r\n\t\t*<li> UI 的 JSON 描述。</li>\r\n\t\t*</ol></p>\r\n\t\t*/\r\n\t\t__getset(0,__proto,'itemRender',function(){\r\n\t\t\treturn this._list.itemRender;\r\n\t\t\t},function(value){\r\n\t\t\tthis._list.itemRender=value;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*单元格鼠标事件处理器。\r\n\t\t*<p>默认返回参数（e:Event,index:int）。</p>\r\n\t\t*/\r\n\t\t__getset(0,__proto,'mouseHandler',function(){\r\n\t\t\treturn this._list.mouseHandler;\r\n\t\t\t},function(value){\r\n\t\t\tthis._list.mouseHandler=value;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*每一项之间的间隔距离（以像素为单位）。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'spaceBottom',function(){\r\n\t\t\treturn this._list.spaceY;\r\n\t\t\t},function(value){\r\n\t\t\tthis._list.spaceY=value;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*表示选择的树节点项的<code>path</code>属性值。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'selectedPath',function(){\r\n\t\t\tif (this._list.selectedItem){\r\n\t\t\t\treturn this._list.selectedItem.path;\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*滚动条皮肤。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'scrollBarSkin',function(){\r\n\t\t\treturn this._list.vScrollBarSkin;\r\n\t\t\t},function(value){\r\n\t\t\tthis._list.vScrollBarSkin=value;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*数据源，全部节点数据。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'source',function(){\r\n\t\t\treturn this._source;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*列表数据源，只包含当前可视节点数据。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'array',function(){\r\n\t\t\treturn this._list.array;\r\n\t\t\t},function(value){\r\n\t\t\tif (this._keepStatus && this._list.array && value){\r\n\t\t\t\tthis.parseOpenStatus(this._list.array,value);\r\n\t\t\t}\r\n\t\t\tthis._source=value;\r\n\t\t\tthis._list.array=this.getArray();\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*当前选中的项对象的数据源。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'selectedItem',function(){\r\n\t\t\treturn this._list.selectedItem;\r\n\t\t\t},function(value){\r\n\t\t\tthis._list.selectedItem=value;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*此对象包含的<code>List</code>实例对象。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'list',function(){\r\n\t\t\treturn this._list;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*数据源发生变化后，是否保持之前打开状态，默认为true。\r\n\t\t*<p><b>取值：</b>\r\n\t\t*<li>true：保持之前打开状态。</li>\r\n\t\t*<li>false：不保持之前打开状态。</li>\r\n\t\t*</p>\r\n\t\t*/\r\n\t\t__getset(0,__proto,'keepStatus',function(){\r\n\t\t\treturn this._keepStatus;\r\n\t\t\t},function(value){\r\n\t\t\tthis._keepStatus=value;\r\n\t\t});\r\n\r\n\t\treturn Tree;\r\n\t})(Box)\r\n\r\n\r\n\t/**\r\n\t*<code>LayoutBox</code> 是一个布局容器类。\r\n\t*/\r\n\t//class laya.ui.LayoutBox extends laya.ui.Box\r\n\tvar LayoutBox=(function(_super){\r\n\t\tfunction LayoutBox(){\r\n\t\t\tthis._space=0;\r\n\t\t\tthis._align=\"none\";\r\n\t\t\tthis._itemChanged=false;\r\n\t\t\tLayoutBox.__super.call(this);\r\n\t\t}\r\n\r\n\t\t__class(LayoutBox,'laya.ui.LayoutBox',_super);\r\n\t\tvar __proto=LayoutBox.prototype;\r\n\t\t/**@inheritDoc */\r\n\t\t__proto.addChild=function(child){\r\n\t\t\tchild.on(\"resize\",this,this.onResize);\r\n\t\t\tthis._setItemChanged();\r\n\t\t\treturn laya.display.Node.prototype.addChild.call(this,child);\r\n\t\t}\r\n\r\n\t\t__proto.onResize=function(e){\r\n\t\t\tthis._setItemChanged();\r\n\t\t}\r\n\r\n\t\t/**@inheritDoc */\r\n\t\t__proto.addChildAt=function(child,index){\r\n\t\t\tchild.on(\"resize\",this,this.onResize);\r\n\t\t\tthis._setItemChanged();\r\n\t\t\treturn laya.display.Node.prototype.addChildAt.call(this,child,index);\r\n\t\t}\r\n\r\n\t\t/**@inheritDoc */\r\n\t\t__proto.removeChild=function(child){\r\n\t\t\tchild.off(\"resize\",this,this.onResize);\r\n\t\t\tthis._setItemChanged();\r\n\t\t\treturn laya.display.Node.prototype.removeChild.call(this,child);\r\n\t\t}\r\n\r\n\t\t/**@inheritDoc */\r\n\t\t__proto.removeChildAt=function(index){\r\n\t\t\tthis.getChildAt(index).off(\"resize\",this,this.onResize);\r\n\t\t\tthis._setItemChanged();\r\n\t\t\treturn laya.display.Node.prototype.removeChildAt.call(this,index);\r\n\t\t}\r\n\r\n\t\t/**刷新。*/\r\n\t\t__proto.refresh=function(){\r\n\t\t\tthis._setItemChanged();\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*改变子对象的布局。\r\n\t\t*/\r\n\t\t__proto.changeItems=function(){\r\n\t\t\tthis._itemChanged=false;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*排序项目列表。可通过重写改变默认排序规则。\r\n\t\t*@param items 项目列表。\r\n\t\t*/\r\n\t\t__proto.sortItem=function(items){\r\n\t\t\tif (items)items.sort(function(a,b){return a.y > b.y ? 1 :-1\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t__proto._setItemChanged=function(){\r\n\t\t\tif (!this._itemChanged){\r\n\t\t\t\tthis._itemChanged=true;\r\n\t\t\t\tthis.callLater(this.changeItems);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**子对象对齐方式。*/\r\n\t\t__getset(0,__proto,'align',function(){\r\n\t\t\treturn this._align;\r\n\t\t\t},function(value){\r\n\t\t\tthis._align=value;\r\n\t\t\tthis._setItemChanged();\r\n\t\t});\r\n\r\n\t\t/**子对象的间隔。*/\r\n\t\t__getset(0,__proto,'space',function(){\r\n\t\t\treturn this._space;\r\n\t\t\t},function(value){\r\n\t\t\tthis._space=value;\r\n\t\t\tthis._setItemChanged();\r\n\t\t});\r\n\r\n\t\treturn LayoutBox;\r\n\t})(Box)\r\n\r\n\r\n\t/**\r\n\t*<code>Panel</code> 是一个面板容器类。\r\n\t*/\r\n\t//class laya.ui.Panel extends laya.ui.Box\r\n\tvar Panel=(function(_super){\r\n\t\tfunction Panel(){\r\n\t\t\tthis._content=null;\r\n\t\t\tthis._vScrollBar=null;\r\n\t\t\tthis._hScrollBar=null;\r\n\t\t\tthis._scrollChanged=false;\r\n\t\t\tPanel.__super.call(this);\r\n\t\t\tthis.width=this.height=100;\r\n\t\t\tthis._content.optimizeScrollRect=true;\r\n\t\t}\r\n\r\n\t\t__class(Panel,'laya.ui.Panel',_super);\r\n\t\tvar __proto=Panel.prototype;\r\n\t\t/**@inheritDoc */\r\n\t\t__proto.destroy=function(destroyChild){\r\n\t\t\t(destroyChild===void 0)&& (destroyChild=true);\r\n\t\t\tlaya.ui.Component.prototype.destroy.call(this,destroyChild);\r\n\t\t\tthis._content && this._content.destroy(destroyChild);\r\n\t\t\tthis._vScrollBar && this._vScrollBar.destroy(destroyChild);\r\n\t\t\tthis._hScrollBar && this._hScrollBar.destroy(destroyChild);\r\n\t\t\tthis._vScrollBar=null;\r\n\t\t\tthis._hScrollBar=null;\r\n\t\t\tthis._content=null;\r\n\t\t}\r\n\r\n\t\t/**@inheritDoc */\r\n\t\t__proto.destroyChildren=function(){\r\n\t\t\tthis._content.destroyChildren();\r\n\t\t}\r\n\r\n\t\t/**@inheritDoc */\r\n\t\t__proto.createChildren=function(){\r\n\t\t\tlaya.display.Node.prototype.addChild.call(this,this._content=new Box());\r\n\t\t}\r\n\r\n\t\t/**@inheritDoc */\r\n\t\t__proto.addChild=function(child){\r\n\t\t\tchild.on(\"resize\",this,this.onResize);\r\n\t\t\tthis._setScrollChanged();\r\n\t\t\treturn this._content.addChild(child);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*子对象的 <code>Event.RESIZE</code> 事件侦听处理函数。\r\n\t\t*/\r\n\t\t__proto.onResize=function(){\r\n\t\t\tthis._setScrollChanged();\r\n\t\t}\r\n\r\n\t\t/**@inheritDoc */\r\n\t\t__proto.addChildAt=function(child,index){\r\n\t\t\tchild.on(\"resize\",this,this.onResize);\r\n\t\t\tthis._setScrollChanged();\r\n\t\t\treturn this._content.addChildAt(child,index);\r\n\t\t}\r\n\r\n\t\t/**@inheritDoc */\r\n\t\t__proto.removeChild=function(child){\r\n\t\t\tchild.off(\"resize\",this,this.onResize);\r\n\t\t\tthis._setScrollChanged();\r\n\t\t\treturn this._content.removeChild(child);\r\n\t\t}\r\n\r\n\t\t/**@inheritDoc */\r\n\t\t__proto.removeChildAt=function(index){\r\n\t\t\tthis.getChildAt(index).off(\"resize\",this,this.onResize);\r\n\t\t\tthis._setScrollChanged();\r\n\t\t\treturn this._content.removeChildAt(index);\r\n\t\t}\r\n\r\n\t\t/**@inheritDoc */\r\n\t\t__proto.removeChildren=function(beginIndex,endIndex){\r\n\t\t\t(beginIndex===void 0)&& (beginIndex=0);\r\n\t\t\t(endIndex===void 0)&& (endIndex=0x7fffffff);\r\n\t\t\tfor (var i=this._content.numChildren-1;i >-1;i--){\r\n\t\t\t\tthis._content.removeChildAt(i);\r\n\t\t\t}\r\n\t\t\tthis._setScrollChanged();\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\t\t/**@inheritDoc */\r\n\t\t__proto.getChildAt=function(index){\r\n\t\t\treturn this._content.getChildAt(index);\r\n\t\t}\r\n\r\n\t\t/**@inheritDoc */\r\n\t\t__proto.getChildByName=function(name){\r\n\t\t\treturn this._content.getChildByName(name);\r\n\t\t}\r\n\r\n\t\t/**@inheritDoc */\r\n\t\t__proto.getChildIndex=function(child){\r\n\t\t\treturn this._content.getChildIndex(child);\r\n\t\t}\r\n\r\n\t\t/**@private */\r\n\t\t__proto.changeScroll=function(){\r\n\t\t\tthis._scrollChanged=false;\r\n\t\t\tvar contentW=this.contentWidth;\r\n\t\t\tvar contentH=this.contentHeight;\r\n\t\t\tvar vscroll=this._vScrollBar;\r\n\t\t\tvar hscroll=this._hScrollBar;\r\n\t\t\tvar vShow=vscroll && contentH > this._height;\r\n\t\t\tvar hShow=hscroll && contentW > this._width;\r\n\t\t\tvar showWidth=vShow ? this._width-vscroll.width :this._width;\r\n\t\t\tvar showHeight=hShow ? this._height-hscroll.height :this._height;\r\n\t\t\tif (vscroll){\r\n\t\t\t\tvscroll.x=this._width-vscroll.width;\r\n\t\t\t\tvscroll.y=0;\r\n\t\t\t\tvscroll.height=this._height-(hShow ? hscroll.height :0);\r\n\t\t\t\tvscroll.scrollSize=Math.max(this._height *0.033,1);\r\n\t\t\t\tvscroll.thumbPercent=showHeight / contentH;\r\n\t\t\t\tvscroll.setScroll(0,contentH-showHeight,vscroll.value);\r\n\t\t\t}\r\n\t\t\tif (hscroll){\r\n\t\t\t\thscroll.x=0;\r\n\t\t\t\thscroll.y=this._height-hscroll.height;\r\n\t\t\t\thscroll.width=this._width-(vShow ? vscroll.width :0);\r\n\t\t\t\thscroll.scrollSize=Math.max(this._width *0.033,1);\r\n\t\t\t\thscroll.thumbPercent=showWidth / contentW;\r\n\t\t\t\thscroll.setScroll(0,contentW-showWidth,hscroll.value);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**@inheritDoc */\r\n\t\t__proto.changeSize=function(){\r\n\t\t\tlaya.ui.Component.prototype.changeSize.call(this);\r\n\t\t\tthis.setContentSize(this._width,this._height);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*设置内容的宽度、高度（以像素为单位）。\r\n\t\t*@param width 宽度。\r\n\t\t*@param height 高度。\r\n\t\t*/\r\n\t\t__proto.setContentSize=function(width,height){\r\n\t\t\tvar content=this._content;\r\n\t\t\tcontent.width=width;\r\n\t\t\tcontent.height=height;\r\n\t\t\tcontent.scrollRect || (content.scrollRect=new Rectangle());\r\n\t\t\tcontent.scrollRect.setTo(0,0,width,height);\r\n\t\t\tcontent.conchModel&&content.conchModel.scrollRect(0,0,width,height);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*滚动条的<code><code>Event.MOUSE_DOWN</code>事件侦听处理函数。</code>事件侦听处理函数。\r\n\t\t*@param scrollBar 滚动条对象。\r\n\t\t*@param e Event 对象。\r\n\t\t*/\r\n\t\t__proto.onScrollBarChange=function(scrollBar){\r\n\t\t\tvar rect=this._content.scrollRect;\r\n\t\t\tif (rect){\r\n\t\t\t\tvar start=Math.round(scrollBar.value);\r\n\t\t\t\tscrollBar.isVertical ? rect.y=start :rect.x=start;\r\n\t\t\t\tthis._content.conchModel&&this._content.conchModel.scrollRect(rect.x,rect.y,rect.width,rect.height);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*<p>滚动内容容器至设定的垂直、水平方向滚动条位置。</p>\r\n\t\t*@param x 水平方向滚动条属性value值。滚动条位置数字。\r\n\t\t*@param y 垂直方向滚动条属性value值。滚动条位置数字。\r\n\t\t*/\r\n\t\t__proto.scrollTo=function(x,y){\r\n\t\t\t(x===void 0)&& (x=0);\r\n\t\t\t(y===void 0)&& (y=0);\r\n\t\t\tif (this.vScrollBar)this.vScrollBar.value=y;\r\n\t\t\tif (this.hScrollBar)this.hScrollBar.value=x;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*刷新滚动内容。\r\n\t\t*/\r\n\t\t__proto.refresh=function(){\r\n\t\t\tthis.changeScroll();\r\n\t\t}\r\n\r\n\t\t__proto.onScrollStart=function(){\r\n\t\t\tthis._$P.cacheAs || (this._$P.cacheAs=_super.prototype._$get_cacheAs.call(this));\r\n\t\t\t_super.prototype._$set_cacheAs.call(this,\"none\");\r\n\t\t\tthis._hScrollBar && this._hScrollBar.once(\"end\",this,this.onScrollEnd);\r\n\t\t\tthis._vScrollBar && this._vScrollBar.once(\"end\",this,this.onScrollEnd);\r\n\t\t}\r\n\r\n\t\t__proto.onScrollEnd=function(){\r\n\t\t\t_super.prototype._$set_cacheAs.call(this,this._$P.cacheAs);\r\n\t\t}\r\n\r\n\t\t/**@private */\r\n\t\t__proto._setScrollChanged=function(){\r\n\t\t\tif (!this._scrollChanged){\r\n\t\t\t\tthis._scrollChanged=true;\r\n\t\t\t\tthis.callLater(this.changeScroll);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**@inheritDoc */\r\n\t\t__getset(0,__proto,'cacheAs',_super.prototype._$get_cacheAs,function(value){\r\n\t\t\t_super.prototype._$set_cacheAs.call(this,value);\r\n\t\t\tthis._$P.cacheAs=null;\r\n\t\t\tif (value!==\"none\"){\r\n\t\t\t\tthis._hScrollBar && this._hScrollBar.on(\"start\",this,this.onScrollStart);\r\n\t\t\t\tthis._vScrollBar && this._vScrollBar.on(\"start\",this,this.onScrollStart);\r\n\t\t\t\t}else {\r\n\t\t\t\tthis._hScrollBar && this._hScrollBar.off(\"start\",this,this.onScrollStart);\r\n\t\t\t\tthis._vScrollBar && this._vScrollBar.off(\"start\",this,this.onScrollStart);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*获取内容容器对象。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'content',function(){\r\n\t\t\treturn this._content;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*水平方向滚动条对象。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'hScrollBar',function(){\r\n\t\t\treturn this._hScrollBar;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*水平方向滚动条皮肤。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'hScrollBarSkin',function(){\r\n\t\t\treturn this._hScrollBar ? this._hScrollBar.skin :null;\r\n\t\t\t},function(value){\r\n\t\t\tif (this._hScrollBar==null){\r\n\t\t\t\tlaya.display.Node.prototype.addChild.call(this,this._hScrollBar=new HScrollBar());\r\n\t\t\t\tthis._hScrollBar.on(\"change\",this,this.onScrollBarChange,[this._hScrollBar]);\r\n\t\t\t\tthis._hScrollBar.target=this._content;\r\n\t\t\t\tthis._setScrollChanged();\r\n\t\t\t}\r\n\t\t\tthis._hScrollBar.skin=value;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*垂直方向滚动条皮肤。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'vScrollBarSkin',function(){\r\n\t\t\treturn this._vScrollBar ? this._vScrollBar.skin :null;\r\n\t\t\t},function(value){\r\n\t\t\tif (this._vScrollBar==null){\r\n\t\t\t\tlaya.display.Node.prototype.addChild.call(this,this._vScrollBar=new VScrollBar());\r\n\t\t\t\tthis._vScrollBar.on(\"change\",this,this.onScrollBarChange,[this._vScrollBar]);\r\n\t\t\t\tthis._vScrollBar.target=this._content;\r\n\t\t\t\tthis._setScrollChanged();\r\n\t\t\t}\r\n\t\t\tthis._vScrollBar.skin=value;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*获取内容高度（以像素为单位）。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'contentHeight',function(){\r\n\t\t\tvar max=0;\r\n\t\t\tfor (var i=this._content.numChildren-1;i >-1;i--){\r\n\t\t\t\tvar comp=this._content.getChildAt(i);\r\n\t\t\t\tmax=Math.max(comp.y+comp.height *comp.scaleY,max);\r\n\t\t\t}\r\n\t\t\treturn max;\r\n\t\t});\r\n\r\n\t\t/**@inheritDoc */\r\n\t\t__getset(0,__proto,'height',_super.prototype._$get_height,function(value){\r\n\t\t\t_super.prototype._$set_height.call(this,value);\r\n\t\t\tthis._setScrollChanged();\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*垂直方向滚动条对象。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'vScrollBar',function(){\r\n\t\t\treturn this._vScrollBar;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*@inheritDoc\r\n\t\t*/\r\n\t\t__getset(0,__proto,'width',_super.prototype._$get_width,function(value){\r\n\t\t\t_super.prototype._$set_width.call(this,value);\r\n\t\t\tthis._setScrollChanged();\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*获取内容宽度（以像素为单位）。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'contentWidth',function(){\r\n\t\t\tvar max=0;\r\n\t\t\tfor (var i=this._content.numChildren-1;i >-1;i--){\r\n\t\t\t\tvar comp=this._content.getChildAt(i);\r\n\t\t\t\tmax=Math.max(comp.x+comp.width *comp.scaleX,max);\r\n\t\t\t}\r\n\t\t\treturn max;\r\n\t\t});\r\n\r\n\t\t/**@inheritDoc */\r\n\t\t__getset(0,__proto,'numChildren',function(){\r\n\t\t\treturn this._content.numChildren;\r\n\t\t});\r\n\r\n\t\treturn Panel;\r\n\t})(Box)\r\n\r\n\r\n\t/**\r\n\t*<code>Group</code> 是一个可以自动布局的项集合控件。\r\n\t*<p> <code>Group</code> 的默认项对象为 <code>Button</code> 类实例。\r\n\t*<code>Group</code> 是 <code>Tab</code> 和 <code>RadioGroup</code> 的基类。</p>\r\n\t*/\r\n\t//class laya.ui.UIGroup extends laya.ui.Box\r\n\tvar UIGroup=(function(_super){\r\n\t\tfunction UIGroup(labels,skin){\r\n\t\t\tthis.selectHandler=null;\r\n\t\t\tthis._items=null;\r\n\t\t\tthis._selectedIndex=-1;\r\n\t\t\tthis._skin=null;\r\n\t\t\tthis._direction=\"horizontal\";\r\n\t\t\tthis._space=0;\r\n\t\t\tthis._labels=null;\r\n\t\t\tthis._labelColors=null;\r\n\t\t\tthis._labelStrokeColor=null;\r\n\t\t\tthis._strokeColors=null;\r\n\t\t\tthis._labelStroke=NaN;\r\n\t\t\tthis._labelSize=0;\r\n\t\t\tthis._labelBold=false;\r\n\t\t\tthis._labelPadding=null;\r\n\t\t\tthis._labelAlign=null;\r\n\t\t\tthis._stateNum=0;\r\n\t\t\tthis._labelChanged=false;\r\n\t\t\tUIGroup.__super.call(this);\r\n\t\t\tthis.skin=skin;\r\n\t\t\tthis.labels=labels;\r\n\t\t}\r\n\r\n\t\t__class(UIGroup,'laya.ui.UIGroup',_super);\r\n\t\tvar __proto=UIGroup.prototype;\r\n\t\tLaya.imps(__proto,{\"laya.ui.IItem\":true})\r\n\t\t/**@inheritDoc */\r\n\t\t__proto.preinitialize=function(){\r\n\t\t\tthis.mouseEnabled=true;\r\n\t\t}\r\n\r\n\t\t/**@inheritDoc */\r\n\t\t__proto.destroy=function(destroyChild){\r\n\t\t\t(destroyChild===void 0)&& (destroyChild=true);\r\n\t\t\tlaya.ui.Component.prototype.destroy.call(this,destroyChild);\r\n\t\t\tthis._items && (this._items.length=0);\r\n\t\t\tthis._items=null;\r\n\t\t\tthis.selectHandler=null;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*添加一个项对象，返回此项对象的索引id。\r\n\t\t*\r\n\t\t*@param item 需要添加的项对象。\r\n\t\t*@param autoLayOut 是否自动布局，如果为true，会根据 <code>direction</code> 和 <code>space</code> 属性计算item的位置。\r\n\t\t*@return\r\n\t\t*/\r\n\t\t__proto.addItem=function(item,autoLayOut){\r\n\t\t\t(autoLayOut===void 0)&& (autoLayOut=true);\r\n\t\t\tvar display=item;\r\n\t\t\tvar index=this._items.length;\r\n\t\t\tdisplay.name=\"item\"+index;\r\n\t\t\tthis.addChild(display);\r\n\t\t\tthis.initItems();\r\n\t\t\tif (autoLayOut && index > 0){\r\n\t\t\t\tvar preItem=this._items [index-1];\r\n\t\t\t\tif (this._direction==\"horizontal\"){\r\n\t\t\t\t\tdisplay.x=preItem.x+preItem.width+this._space;\r\n\t\t\t\t\t}else {\r\n\t\t\t\t\tdisplay.y=preItem.y+preItem.height+this._space;\r\n\t\t\t\t}\r\n\t\t\t\t}else {\r\n\t\t\t\tif (autoLayOut){\r\n\t\t\t\t\tdisplay.x=0;\r\n\t\t\t\t\tdisplay.y=0;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn index;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*删除一个项对象。\r\n\t\t*@param item 需要删除的项对象。\r\n\t\t*@param autoLayOut 是否自动布局，如果为true，会根据 <code>direction</code> 和 <code>space</code> 属性计算item的位置。\r\n\t\t*/\r\n\t\t__proto.delItem=function(item,autoLayOut){\r\n\t\t\t(autoLayOut===void 0)&& (autoLayOut=true);\r\n\t\t\tvar index=this._items.indexOf(item);\r\n\t\t\tif (index !=-1){\r\n\t\t\t\tvar display=item;\r\n\t\t\t\tthis.removeChild(display);\r\n\t\t\t\tfor (var i=index+1,n=this._items.length;i < n;i++){\r\n\t\t\t\t\tvar child=this._items [i];\r\n\t\t\t\t\tchild.name=\"item\"+(i-1);\r\n\t\t\t\t\tif (autoLayOut){\r\n\t\t\t\t\t\tif (this._direction==\"horizontal\"){\r\n\t\t\t\t\t\t\tchild.x-=display.width+this._space;\r\n\t\t\t\t\t\t\t}else {\r\n\t\t\t\t\t\t\tchild.y-=display.height+this._space;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.initItems();\r\n\t\t\t\tif (this._selectedIndex >-1){\r\n\t\t\t\t\tvar newIndex=0;\r\n\t\t\t\t\tnewIndex=this._selectedIndex < this._items.length ? this._selectedIndex :(this._selectedIndex-1);\r\n\t\t\t\t\tthis._selectedIndex=-1;\r\n\t\t\t\t\tthis.selectedIndex=newIndex;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*初始化项对象们。\r\n\t\t*/\r\n\t\t__proto.initItems=function(){\r\n\t\t\tthis._items || (this._items=[]);\r\n\t\t\tthis._items.length=0;\r\n\t\t\tfor (var i=0;i < 10000;i++){\r\n\t\t\t\tvar item=this.getChildByName(\"item\"+i);\r\n\t\t\t\tif (item==null)break ;\r\n\t\t\t\tthis._items.push(item);\r\n\t\t\t\titem.selected=(i===this._selectedIndex);\r\n\t\t\t\titem.clickHandler=Handler.create(this,this.itemClick,[i],false);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*项对象的点击事件侦听处理函数。\r\n\t\t*@param index 项索引。\r\n\t\t*/\r\n\t\t__proto.itemClick=function(index){\r\n\t\t\tthis.selectedIndex=index;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*通过对象的索引设置项对象的 <code>selected</code> 属性值。\r\n\t\t*@param index 需要设置的项对象的索引。\r\n\t\t*@param selected 表示项对象的选中状态。\r\n\t\t*/\r\n\t\t__proto.setSelect=function(index,selected){\r\n\t\t\tif (this._items && index >-1 && index < this._items.length)this._items[index].selected=selected;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*创建一个项显示对象。\r\n\t\t*@param skin 项对象的皮肤。\r\n\t\t*@param label 项对象标签。\r\n\t\t*/\r\n\t\t__proto.createItem=function(skin,label){\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*更改项对象的属性值。\r\n\t\t*/\r\n\t\t__proto.changeLabels=function(){\r\n\t\t\tthis._labelChanged=false;\r\n\t\t\tif (this._items){\r\n\t\t\t\tvar left=0\r\n\t\t\t\tfor (var i=0,n=this._items.length;i < n;i++){\r\n\t\t\t\t\tvar btn=this._items [i];\r\n\t\t\t\t\tthis._skin && (btn.skin=this._skin);\r\n\t\t\t\t\tthis._labelColors && (btn.labelColors=this._labelColors);\r\n\t\t\t\t\tthis._labelSize && (btn.labelSize=this._labelSize);\r\n\t\t\t\t\tthis._labelStroke && (btn.labelStroke=this._labelStroke);\r\n\t\t\t\t\tthis._labelStrokeColor && (btn.labelStrokeColor=this._labelStrokeColor);\r\n\t\t\t\t\tthis._strokeColors && (btn.strokeColors=this._strokeColors);\r\n\t\t\t\t\tthis._labelBold && (btn.labelBold=this._labelBold);\r\n\t\t\t\t\tthis._labelPadding && (btn.labelPadding=this._labelPadding);\r\n\t\t\t\t\tthis._labelAlign && (btn.labelAlign=this._labelAlign);\r\n\t\t\t\t\tthis._stateNum && (btn.stateNum=this._stateNum);\r\n\t\t\t\t\tif (this._direction===\"horizontal\"){\r\n\t\t\t\t\t\tbtn.y=0;\r\n\t\t\t\t\t\tbtn.x=left;\r\n\t\t\t\t\t\tleft+=btn.width+this._space;\r\n\t\t\t\t\t\t}else {\r\n\t\t\t\t\t\tbtn.x=0;\r\n\t\t\t\t\t\tbtn.y=left;\r\n\t\t\t\t\t\tleft+=btn.height+this._space;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.changeSize();\r\n\t\t}\r\n\r\n\t\t/**@inheritDoc */\r\n\t\t__proto.commitMeasure=function(){\r\n\t\t\tthis.runCallLater(this.changeLabels);\r\n\t\t}\r\n\r\n\t\t/**@private */\r\n\t\t__proto._setLabelChanged=function(){\r\n\t\t\tif (!this._labelChanged){\r\n\t\t\t\tthis._labelChanged=true;\r\n\t\t\t\tthis.callLater(this.changeLabels);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**@inheritDoc */\r\n\t\t__getset(0,__proto,'dataSource',_super.prototype._$get_dataSource,function(value){\r\n\t\t\tthis._dataSource=value;\r\n\t\t\tif (((typeof value=='number')&& Math.floor(value)==value)|| (typeof value=='string'))this.selectedIndex=parseInt(value);\r\n\t\t\telse if ((value instanceof Array))this.labels=(value).join(\",\");\r\n\t\t\telse _super.prototype._$set_dataSource.call(this,value);\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*项对象们的存放数组。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'items',function(){\r\n\t\t\treturn this._items;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*项对象们之间的间隔（以像素为单位）。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'space',function(){\r\n\t\t\treturn this._space;\r\n\t\t\t},function(value){\r\n\t\t\tthis._space=value;\r\n\t\t\tthis._setLabelChanged();\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*获取或设置当前选择的项对象。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'selection',function(){\r\n\t\t\treturn this._selectedIndex >-1 && this._selectedIndex < this._items.length ? this._items[this._selectedIndex] :null;\r\n\t\t\t},function(value){\r\n\t\t\tthis.selectedIndex=this._items.indexOf(value);\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*布局方向。\r\n\t\t*<p>默认值为\"horizontal\"。</p>\r\n\t\t*<p><b>取值：</b>\r\n\t\t*<li>\"horizontal\"：表示水平布局。</li>\r\n\t\t*<li>\"vertical\"：表示垂直布局。</li>\r\n\t\t*</p>\r\n\t\t*/\r\n\t\t__getset(0,__proto,'direction',function(){\r\n\t\t\treturn this._direction;\r\n\t\t\t},function(value){\r\n\t\t\tthis._direction=value;\r\n\t\t\tthis._setLabelChanged();\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*表示按钮文本标签的边距。\r\n\t\t*<p><b>格式：</b>\"上边距,右边距,下边距,左边距\"。</p>\r\n\t\t*/\r\n\t\t__getset(0,__proto,'labelPadding',function(){\r\n\t\t\treturn this._labelPadding;\r\n\t\t\t},function(value){\r\n\t\t\tif (this._labelPadding !=value){\r\n\t\t\t\tthis._labelPadding=value;\r\n\t\t\t\tthis._setLabelChanged();\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*<p>描边颜色，以字符串表示。</p>\r\n\t\t*默认值为 \"#000000\"（黑色）;\r\n\t\t*@see laya.display.Text.strokeColor()\r\n\t\t*/\r\n\t\t__getset(0,__proto,'labelStrokeColor',function(){\r\n\t\t\treturn this._labelStrokeColor;\r\n\t\t\t},function(value){\r\n\t\t\tif (this._labelStrokeColor !=value){\r\n\t\t\t\tthis._labelStrokeColor=value;\r\n\t\t\t\tthis._setLabelChanged();\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*<p>表示各个状态下的描边颜色。</p>\r\n\t\t*@see laya.display.Text.strokeColor()\r\n\t\t*/\r\n\t\t__getset(0,__proto,'strokeColors',function(){\r\n\t\t\treturn this._strokeColors;\r\n\t\t\t},function(value){\r\n\t\t\tif (this._strokeColors !=value){\r\n\t\t\t\tthis._strokeColors=value;\r\n\t\t\t\tthis._setLabelChanged();\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*@copy laya.ui.Button#labelColors()\r\n\t\t*/\r\n\t\t__getset(0,__proto,'labelColors',function(){\r\n\t\t\treturn this._labelColors;\r\n\t\t\t},function(value){\r\n\t\t\tif (this._labelColors !=value){\r\n\t\t\t\tthis._labelColors=value;\r\n\t\t\t\tthis._setLabelChanged();\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*<p>描边宽度（以像素为单位）。</p>\r\n\t\t*默认值0，表示不描边。\r\n\t\t*@see laya.display.Text.stroke()\r\n\t\t*/\r\n\t\t__getset(0,__proto,'labelStroke',function(){\r\n\t\t\treturn this._labelStroke;\r\n\t\t\t},function(value){\r\n\t\t\tif (this._labelStroke !=value){\r\n\t\t\t\tthis._labelStroke=value;\r\n\t\t\t\tthis._setLabelChanged();\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*@copy laya.ui.Image#skin\r\n\t\t*/\r\n\t\t__getset(0,__proto,'skin',function(){\r\n\t\t\treturn this._skin;\r\n\t\t\t},function(value){\r\n\t\t\tif (this._skin !=value){\r\n\t\t\t\tthis._skin=value;\r\n\t\t\t\tthis._setLabelChanged();\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*标签集合字符串。以逗号做分割，如\"item0,item1,item2,item3,item4,item5\"。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'labels',function(){\r\n\t\t\treturn this._labels;\r\n\t\t\t},function(value){\r\n\t\t\tif (this._labels !=value){\r\n\t\t\t\tthis._labels=value;\r\n\t\t\t\tthis.removeChildren();\r\n\t\t\t\tthis._setLabelChanged();\r\n\t\t\t\tif (this._labels){\r\n\t\t\t\t\tvar a=this._labels.split(\",\");\r\n\t\t\t\t\tfor (var i=0,n=a.length;i < n;i++){\r\n\t\t\t\t\t\tvar item=this.createItem(this._skin,a[i]);\r\n\t\t\t\t\t\titem.name=\"item\"+i;\r\n\t\t\t\t\t\tthis.addChild(item);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.initItems();\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*表示按钮文本标签的字体大小。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'stateNum',function(){\r\n\t\t\treturn this._stateNum;\r\n\t\t\t},function(value){\r\n\t\t\tif (this._stateNum !=value){\r\n\t\t\t\tthis._stateNum=value;\r\n\t\t\t\tthis._setLabelChanged();\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*表示按钮文本标签的字体大小。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'labelSize',function(){\r\n\t\t\treturn this._labelSize;\r\n\t\t\t},function(value){\r\n\t\t\tif (this._labelSize !=value){\r\n\t\t\t\tthis._labelSize=value;\r\n\t\t\t\tthis._setLabelChanged();\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*表示按钮文本标签是否为粗体字。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'labelBold',function(){\r\n\t\t\treturn this._labelBold;\r\n\t\t\t},function(value){\r\n\t\t\tif (this._labelBold !=value){\r\n\t\t\t\tthis._labelBold=value;\r\n\t\t\t\tthis._setLabelChanged();\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*表示当前选择的项索引。默认值为-1。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'selectedIndex',function(){\r\n\t\t\treturn this._selectedIndex;\r\n\t\t\t},function(value){\r\n\t\t\tif (this._selectedIndex !=value){\r\n\t\t\t\tthis.setSelect(this._selectedIndex,false);\r\n\t\t\t\tthis._selectedIndex=value;\r\n\t\t\t\tthis.setSelect(value,true);\r\n\t\t\t\tthis.event(\"change\");\r\n\t\t\t\tthis.selectHandler && this.selectHandler.runWith(this._selectedIndex);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn UIGroup;\r\n\t})(Box)\r\n\r\n\r\n\t/**\r\n\t*<code>ViewStack</code> 类用于视图堆栈类，用于视图的显示等设置处理。\r\n\t*/\r\n\t//class laya.ui.ViewStack extends laya.ui.Box\r\n\tvar ViewStack=(function(_super){\r\n\t\tfunction ViewStack(){\r\n\t\t\tthis._items=null;\r\n\t\t\tthis._selectedIndex=0;\r\n\t\t\tViewStack.__super.call(this);\r\n\t\t\tthis._setIndexHandler=Handler.create(this,this.setIndex,null,false);\r\n\t\t}\r\n\r\n\t\t__class(ViewStack,'laya.ui.ViewStack',_super);\r\n\t\tvar __proto=ViewStack.prototype;\r\n\t\tLaya.imps(__proto,{\"laya.ui.IItem\":true})\r\n\t\t/**\r\n\t\t*批量设置视图对象。\r\n\t\t*@param views 视图对象数组。\r\n\t\t*/\r\n\t\t__proto.setItems=function(views){\r\n\t\t\tthis.removeChildren();\r\n\t\t\tvar index=0;\r\n\t\t\tfor (var i=0,n=views.length;i < n;i++){\r\n\t\t\t\tvar item=views[i];\r\n\t\t\t\tif (item){\r\n\t\t\t\t\titem.name=\"item\"+index;\r\n\t\t\t\t\tthis.addChild(item);\r\n\t\t\t\t\tindex++;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.initItems();\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*添加视图。\r\n\t\t*@internal 添加视图对象，并设置此视图对象的<code>name</code> 属性。\r\n\t\t*@param view 需要添加的视图对象。\r\n\t\t*/\r\n\t\t__proto.addItem=function(view){\r\n\t\t\tview.name=\"item\"+this._items.length;\r\n\t\t\tthis.addChild(view);\r\n\t\t\tthis.initItems();\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*初始化视图对象集合。\r\n\t\t*/\r\n\t\t__proto.initItems=function(){\r\n\t\t\tthis._items=[];\r\n\t\t\tfor (var i=0;i < 10000;i++){\r\n\t\t\t\tvar item=this.getChildByName(\"item\"+i);\r\n\t\t\t\tif (item==null){\r\n\t\t\t\t\tbreak ;\r\n\t\t\t\t}\r\n\t\t\t\tthis._items.push(item);\r\n\t\t\t\titem.visible=(i==this._selectedIndex);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*通过对象的索引设置项对象的 <code>selected</code> 属性值。\r\n\t\t*@param index 需要设置的对象的索引。\r\n\t\t*@param selected 表示对象的选中状态。\r\n\t\t*/\r\n\t\t__proto.setSelect=function(index,selected){\r\n\t\t\tif (this._items && index >-1 && index < this._items.length){\r\n\t\t\t\tthis._items[index].visible=selected;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*设置属性<code>selectedIndex</code>的值。\r\n\t\t*@param index 选中项索引值。\r\n\t\t*/\r\n\t\t__proto.setIndex=function(index){\r\n\t\t\tthis.selectedIndex=index;\r\n\t\t}\r\n\r\n\t\t/**@inheritDoc */\r\n\t\t__getset(0,__proto,'dataSource',_super.prototype._$get_dataSource,function(value){\r\n\t\t\tthis._dataSource=value;\r\n\t\t\tif (((typeof value=='number')&& Math.floor(value)==value)|| (typeof value=='string')){\r\n\t\t\t\tthis.selectedIndex=parseInt(value);\r\n\t\t\t\t}else {\r\n\t\t\t\tfor (var prop in this._dataSource){\r\n\t\t\t\t\tif (this.hasOwnProperty(prop)){\r\n\t\t\t\t\t\tthis[prop]=this._dataSource[prop];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*视图集合数组。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'items',function(){\r\n\t\t\treturn this._items;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*索引设置处理器。\r\n\t\t*<p>默认回调参数：index:int</p>\r\n\t\t*/\r\n\t\t__getset(0,__proto,'setIndexHandler',function(){\r\n\t\t\treturn this._setIndexHandler;\r\n\t\t\t},function(value){\r\n\t\t\tthis._setIndexHandler=value;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*获取或设置当前选择的项对象。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'selection',function(){\r\n\t\t\treturn this._selectedIndex >-1 && this._selectedIndex < this._items.length ? this._items[this._selectedIndex] :null;\r\n\t\t\t},function(value){\r\n\t\t\tthis.selectedIndex=this._items.indexOf(value);\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*表示当前视图索引。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'selectedIndex',function(){\r\n\t\t\treturn this._selectedIndex;\r\n\t\t\t},function(value){\r\n\t\t\tif (this._selectedIndex !=value){\r\n\t\t\t\tthis.setSelect(this._selectedIndex,false);\r\n\t\t\t\tthis._selectedIndex=value;\r\n\t\t\t\tthis.setSelect(this._selectedIndex,true);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn ViewStack;\r\n\t})(Box)\r\n\r\n\r\n\t/**\r\n\t*<code>CheckBox</code> 组件显示一个小方框，该方框内可以有选中标记。\r\n\t*<code>CheckBox</code> 组件还可以显示可选的文本标签，默认该标签位于 CheckBox 右侧。\r\n\t*<p><code>CheckBox</code> 使用 <code>dataSource</code>赋值时的的默认属性是：<code>selected</code>。</p>\r\n\t*\r\n\t*@example 以下示例代码，创建了一个 <code>CheckBox</code> 实例。\r\n\t*<listing version=\"3.0\">\r\n\t*package\r\n\t*{\r\n\t\t*import laya.ui.CheckBox;\r\n\t\t*import laya.utils.Handler;\r\n\t\t*public class CheckBox_Example\r\n\t\t*{\r\n\t\t\t*public function CheckBox_Example()\r\n\t\t\t*{\r\n\t\t\t\t*Laya.init(640,800);//设置游戏画布宽高。\r\n\t\t\t\t*Laya.stage.bgColor=\"#efefef\";//设置画布的背景颜色。\r\n\t\t\t\t*Laya.loader.load(\"resource/ui/check.png\",Handler.create(this,onLoadComplete));//加载资源。\r\n\t\t\t\t*}\r\n\t\t\t*private function onLoadComplete():void\r\n\t\t\t*{\r\n\t\t\t\t*trace(\"资源加载完成！\");\r\n\t\t\t\t*var checkBox:CheckBox=new CheckBox(\"resource/ui/check.png\",\"这个是一个CheckBox组件。\");//创建一个 CheckBox 类的实例对象 checkBox ,传入它的皮肤skin和标签label。\r\n\t\t\t\t*checkBox.x=100;//设置 checkBox 对象的属性 x 的值，用于控制 checkBox 对象的显示位置。\r\n\t\t\t\t*checkBox.y=100;//设置 checkBox 对象的属性 y 的值，用于控制 checkBox 对象的显示位置。\r\n\t\t\t\t*checkBox.clickHandler=new Handler(this,onClick,[checkBox]);//设置 checkBox 的点击事件处理器。\r\n\t\t\t\t*Laya.stage.addChild(checkBox);//将此 checkBox 对象添加到显示列表。\r\n\t\t\t\t*}\r\n\t\t\t*private function onClick(checkBox:CheckBox):void\r\n\t\t\t*{\r\n\t\t\t\t*trace(\"输出选中状态: checkBox.selected = \"+checkBox.selected);\r\n\t\t\t\t*}\r\n\t\t\t*}\r\n\t\t*}\r\n\t*</listing>\r\n\t*<listing version=\"3.0\">\r\n\t*Laya.init(640,800);//设置游戏画布宽高\r\n\t*Laya.stage.bgColor=\"#efefef\";//设置画布的背景颜色\r\n\t*Laya.loader.load(\"resource/ui/check.png\",laya.utils.Handler.create(this,loadComplete));//加载资源\r\n\t*function loadComplete()\r\n\t*{\r\n\t\t*console.log(\"资源加载完成！\");\r\n\t\t*var checkBox:laya.ui.CheckBox=new laya.ui.CheckBox(\"resource/ui/check.png\",\"这个是一个CheckBox组件。\");//创建一个 CheckBox 类的类的实例对象 checkBox ,传入它的皮肤skin和标签label。\r\n\t\t*checkBox.x=100;//设置 checkBox 对象的属性 x 的值，用于控制 checkBox 对象的显示位置。\r\n\t\t*checkBox.y=100;//设置 checkBox 对象的属性 y 的值，用于控制 checkBox 对象的显示位置。\r\n\t\t*checkBox.clickHandler=new laya.utils.Handler(this,this.onClick,[checkBox],false);//设置 checkBox 的点击事件处理器。\r\n\t\t*Laya.stage.addChild(checkBox);//将此 checkBox 对象添加到显示列表。\r\n\t\t*}\r\n\t*function onClick(checkBox)\r\n\t*{\r\n\t\t*console.log(\"checkBox.selected = \",checkBox.selected);\r\n\t\t*}\r\n\t*</listing>\r\n\t*<listing version=\"3.0\">\r\n\t*import CheckBox=laya.ui.CheckBox;\r\n\t*import Handler=laya.utils.Handler;\r\n\t*class CheckBox_Example{\r\n\t\t*constructor()\r\n\t\t*{\r\n\t\t\t*Laya.init(640,800);\r\n\t\t\t*Laya.stage.bgColor=\"#efefef\";//设置画布的背景颜色。\r\n\t\t\t*Laya.loader.load(\"resource/ui/check.png\",Handler.create(this,this.onLoadComplete));//加载资源。\r\n\t\t\t*}\r\n\t\t*private onLoadComplete()\r\n\t\t*{\r\n\t\t\t*var checkBox:CheckBox=new CheckBox(\"resource/ui/check.png\",\"这个是一个CheckBox组件。\");//创建一个 CheckBox 类的实例对象 checkBox ,传入它的皮肤skin和标签label。\r\n\t\t\t*checkBox.x=100;//设置 checkBox 对象的属性 x 的值，用于控制 checkBox 对象的显示位置。\r\n\t\t\t*checkBox.y=100;//设置 checkBox 对象的属性 y 的值，用于控制 checkBox 对象的显示位置。\r\n\t\t\t*checkBox.clickHandler=new Handler(this,this.onClick,[checkBox]);//设置 checkBox 的点击事件处理器。\r\n\t\t\t*Laya.stage.addChild(checkBox);//将此 checkBox 对象添加到显示列表。\r\n\t\t\t*}\r\n\t\t*private onClick(checkBox:CheckBox):void\r\n\t\t*{\r\n\t\t\t*console.log(\"输出选中状态: checkBox.selected = \"+checkBox.selected);\r\n\t\t\t*}\r\n\t\t*}\r\n\t*</listing>\r\n\t*/\r\n\t//class laya.ui.CheckBox extends laya.ui.Button\r\n\tvar CheckBox=(function(_super){\r\n\t\t/**\r\n\t\t*创建一个新的 <code>CheckBox</code> 组件实例。\r\n\t\t*@param skin 皮肤资源地址。\r\n\t\t*@param label 文本标签的内容。\r\n\t\t*/\r\n\t\tfunction CheckBox(skin,label){\r\n\t\t\t(label===void 0)&& (label=\"\");\r\n\t\t\tCheckBox.__super.call(this,skin,label);\r\n\t\t}\r\n\r\n\t\t__class(CheckBox,'laya.ui.CheckBox',_super);\r\n\t\tvar __proto=CheckBox.prototype;\r\n\t\t/**@inheritDoc */\r\n\t\t__proto.preinitialize=function(){\r\n\t\t\tlaya.ui.Component.prototype.preinitialize.call(this);\r\n\t\t\tthis.toggle=true;\r\n\t\t\tthis._autoSize=false;\r\n\t\t}\r\n\r\n\t\t/**@inheritDoc */\r\n\t\t__proto.initialize=function(){\r\n\t\t\t_super.prototype.initialize.call(this);\r\n\t\t\tthis.createText();\r\n\t\t\tthis._text.align=\"left\";\r\n\t\t\tthis._text.valign=\"top\";\r\n\t\t\tthis._text.width=0;\r\n\t\t}\r\n\r\n\t\t/**@inheritDoc */\r\n\t\t__getset(0,__proto,'dataSource',_super.prototype._$get_dataSource,function(value){\r\n\t\t\tthis._dataSource=value;\r\n\t\t\tif ((typeof value=='boolean'))this.selected=value;\r\n\t\t\telse if ((typeof value=='string'))this.selected=value===\"true\";\r\n\t\t\telse _super.prototype._$set_dataSource.call(this,value);\r\n\t\t});\r\n\r\n\t\treturn CheckBox;\r\n\t})(Button)\r\n\r\n\r\n\t/**\r\n\t*<code>Radio</code> 控件使用户可在一组互相排斥的选择中做出一种选择。\r\n\t*用户一次只能选择 <code>Radio</code> 组中的一个成员。选择未选中的组成员将取消选择该组中当前所选的 <code>Radio</code> 控件。\r\n\t*@see laya.ui.RadioGroup\r\n\t*/\r\n\t//class laya.ui.Radio extends laya.ui.Button\r\n\tvar Radio1=(function(_super){\r\n\t\tfunction Radio(skin,label){\r\n\t\t\tthis._value=null;\r\n\t\t\t(label===void 0)&& (label=\"\");\r\n\t\t\tRadio.__super.call(this,skin,label);\r\n\t\t}\r\n\r\n\t\t__class(Radio,'laya.ui.Radio',_super,'Radio1');\r\n\t\tvar __proto=Radio.prototype;\r\n\t\t/**@inheritDoc */\r\n\t\t__proto.destroy=function(destroyChild){\r\n\t\t\t(destroyChild===void 0)&& (destroyChild=true);\r\n\t\t\t_super.prototype.destroy.call(this,destroyChild);\r\n\t\t\tthis._value=null;\r\n\t\t}\r\n\r\n\t\t/**@inheritDoc */\r\n\t\t__proto.preinitialize=function(){\r\n\t\t\tlaya.ui.Component.prototype.preinitialize.call(this);\r\n\t\t\tthis.toggle=false;\r\n\t\t\tthis._autoSize=false;\r\n\t\t}\r\n\r\n\t\t/**@inheritDoc */\r\n\t\t__proto.initialize=function(){\r\n\t\t\t_super.prototype.initialize.call(this);\r\n\t\t\tthis.createText();\r\n\t\t\tthis._text.align=\"left\";\r\n\t\t\tthis._text.valign=\"top\";\r\n\t\t\tthis._text.width=0;\r\n\t\t\tthis.on(\"click\",this,this.onClick);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*对象的<code>Event.CLICK</code>事件侦听处理函数。\r\n\t\t*/\r\n\t\t__proto.onClick=function(e){\r\n\t\t\tthis.selected=true;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*获取或设置 <code>Radio</code> 关联的可选用户定义值。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'value',function(){\r\n\t\t\treturn this._value !=null ? this._value :this.label;\r\n\t\t\t},function(obj){\r\n\t\t\tthis._value=obj;\r\n\t\t});\r\n\r\n\t\treturn Radio;\r\n\t})(Button)\r\n\r\n\r\n\t/**\r\n\t*使用 <code>HScrollBar</code> （水平 <code>ScrollBar</code> ）控件，可以在因数据太多而不能在显示区域完全显示时控制显示的数据部分。\r\n\t*@example 以下示例代码，创建了一个 <code>HScrollBar</code> 实例。\r\n\t*<listing version=\"3.0\">\r\n\t*package\r\n\t*{\r\n\t\t*import laya.ui.HScrollBar;\r\n\t\t*import laya.utils.Handler;\r\n\t\t*public class HScrollBar_Example\r\n\t\t*{\r\n\t\t\t*private var hScrollBar:HScrollBar;\r\n\t\t\t*public function HScrollBar_Example()\r\n\t\t\t*{\r\n\t\t\t\t*Laya.init(640,800);//设置游戏画布宽高。\r\n\t\t\t\t*Laya.stage.bgColor=\"#efefef\";//设置画布的背景颜色。\r\n\t\t\t\t*Laya.loader.load([\"resource/ui/hscroll.png\",\"resource/ui/hscroll$bar.png\",\"resource/ui/hscroll$down.png\",\"resource/ui/hscroll$up.png\"],Handler.create(this,onLoadComplete));//加载资源。\r\n\t\t\t\t*}\r\n\t\t\t*private function onLoadComplete():void\r\n\t\t\t*{\r\n\t\t\t\t*hScrollBar=new HScrollBar();//创建一个 HScrollBar 类的实例对象 hScrollBar 。\r\n\t\t\t\t*hScrollBar.skin=\"resource/ui/hscroll.png\";//设置 hScrollBar 的皮肤。\r\n\t\t\t\t*hScrollBar.x=100;//设置 hScrollBar 对象的属性 x 的值，用于控制 hScrollBar 对象的显示位置。\r\n\t\t\t\t*hScrollBar.y=100;//设置 hScrollBar 对象的属性 y 的值，用于控制 hScrollBar 对象的显示位置。\r\n\t\t\t\t*hScrollBar.changeHandler=new Handler(this,onChange);//设置 hScrollBar 的滚动变化处理器。\r\n\t\t\t\t*Laya.stage.addChild(hScrollBar);//将此 hScrollBar 对象添加到显示列表。\r\n\t\t\t\t*}\r\n\t\t\t*private function onChange(value:Number):void\r\n\t\t\t*{\r\n\t\t\t\t*trace(\"滚动条的位置： value=\"+value);\r\n\t\t\t\t*}\r\n\t\t\t*}\r\n\t\t*}\r\n\t*</listing>\r\n\t*<listing version=\"3.0\">\r\n\t*Laya.init(640,800);//设置游戏画布宽高\r\n\t*Laya.stage.bgColor=\"#efefef\";//设置画布的背景颜色\r\n\t*var hScrollBar;\r\n\t*var res=[\"resource/ui/hscroll.png\",\"resource/ui/hscroll$bar.png\",\"resource/ui/hscroll$down.png\",\"resource/ui/hscroll$up.png\"];\r\n\t*Laya.loader.load(res,laya.utils.Handler.create(this,onLoadComplete));//加载资源。\r\n\t*function onLoadComplete(){\r\n\t\t*console.log(\"资源加载完成！\");\r\n\t\t*hScrollBar=new laya.ui.HScrollBar();//创建一个 HScrollBar 类的实例对象 hScrollBar 。\r\n\t\t*hScrollBar.skin=\"resource/ui/hscroll.png\";//设置 hScrollBar 的皮肤。\r\n\t\t*hScrollBar.x=100;//设置 hScrollBar 对象的属性 x 的值，用于控制 hScrollBar 对象的显示位置。\r\n\t\t*hScrollBar.y=100;//设置 hScrollBar 对象的属性 y 的值，用于控制 hScrollBar 对象的显示位置。\r\n\t\t*hScrollBar.changeHandler=new laya.utils.Handler(this,onChange);//设置 hScrollBar 的滚动变化处理器。\r\n\t\t*Laya.stage.addChild(hScrollBar);//将此 hScrollBar 对象添加到显示列表。\r\n\t\t*}\r\n\t*function onChange(value)\r\n\t*{\r\n\t\t*console.log(\"滚动条的位置： value=\"+value);\r\n\t\t*}\r\n\t*</listing>\r\n\t*<listing version=\"3.0\">\r\n\t*import HScrollBar=laya.ui.HScrollBar;\r\n\t*import Handler=laya.utils.Handler;\r\n\t*class HScrollBar_Example {\r\n\t\t*private hScrollBar:HScrollBar;\r\n\t\t*constructor(){\r\n\t\t\t*Laya.init(640,800);//设置游戏画布宽高。\r\n\t\t\t*Laya.stage.bgColor=\"#efefef\";//设置画布的背景颜色。\r\n\t\t\t*Laya.loader.load([\"resource/ui/hscroll.png\",\"resource/ui/hscroll$bar.png\",\"resource/ui/hscroll$down.png\",\"resource/ui/hscroll$up.png\"],Handler.create(this,this.onLoadComplete));//加载资源。\r\n\t\t\t*}\r\n\t\t*private onLoadComplete():void {\r\n\t\t\t*this.hScrollBar=new HScrollBar();//创建一个 HScrollBar 类的实例对象 hScrollBar 。\r\n\t\t\t*this.hScrollBar.skin=\"resource/ui/hscroll.png\";//设置 hScrollBar 的皮肤。\r\n\t\t\t*this.hScrollBar.x=100;//设置 hScrollBar 对象的属性 x 的值，用于控制 hScrollBar 对象的显示位置。\r\n\t\t\t*this.hScrollBar.y=100;//设置 hScrollBar 对象的属性 y 的值，用于控制 hScrollBar 对象的显示位置。\r\n\t\t\t*this.hScrollBar.changeHandler=new Handler(this,this.onChange);//设置 hScrollBar 的滚动变化处理器。\r\n\t\t\t*Laya.stage.addChild(this.hScrollBar);//将此 hScrollBar 对象添加到显示列表。\r\n\t\t\t*}\r\n\t\t*private onChange(value:number):void {\r\n\t\t\t*console.log(\"滚动条的位置： value=\"+value);\r\n\t\t\t*}\r\n\t\t*}\r\n\t*</listing>\r\n\t*/\r\n\t//class laya.ui.HScrollBar extends laya.ui.ScrollBar\r\n\tvar HScrollBar=(function(_super){\r\n\t\tfunction HScrollBar(){HScrollBar.__super.call(this);;\r\n\t\t};\r\n\r\n\t\t__class(HScrollBar,'laya.ui.HScrollBar',_super);\r\n\t\tvar __proto=HScrollBar.prototype;\r\n\t\t/**@inheritDoc */\r\n\t\t__proto.initialize=function(){\r\n\t\t\t_super.prototype.initialize.call(this);\r\n\t\t\tthis.slider.isVertical=false;\r\n\t\t}\r\n\r\n\t\treturn HScrollBar;\r\n\t})(ScrollBar)\r\n\r\n\r\n\t/**\r\n\t*使用 <code>HSlider</code> 控件，用户可以通过在滑块轨道的终点之间移动滑块来选择值。\r\n\t*<p> <code>HSlider</code> 控件采用水平方向。滑块轨道从左向右扩展，而标签位于轨道的顶部或底部。</p>\r\n\t*\r\n\t*@example 以下示例代码，创建了一个 <code>HSlider</code> 实例。\r\n\t*<listing version=\"3.0\">\r\n\t*package\r\n\t*{\r\n\t\t*import laya.ui.HSlider;\r\n\t\t*import laya.utils.Handler;\r\n\t\t*public class HSlider_Example\r\n\t\t*{\r\n\t\t\t*private var hSlider:HSlider;\r\n\t\t\t*public function HSlider_Example()\r\n\t\t\t*{\r\n\t\t\t\t*Laya.init(640,800);//设置游戏画布宽高。\r\n\t\t\t\t*Laya.stage.bgColor=\"#efefef\";//设置画布的背景颜色。\r\n\t\t\t\t*Laya.loader.load([\"resource/ui/hslider.png\",\"resource/ui/hslider$bar.png\"],Handler.create(this,onLoadComplete));//加载资源。\r\n\t\t\t\t*}\r\n\t\t\t*private function onLoadComplete():void\r\n\t\t\t*{\r\n\t\t\t\t*hSlider=new HSlider();//创建一个 HSlider 类的实例对象 hSlider 。\r\n\t\t\t\t*hSlider.skin=\"resource/ui/hslider.png\";//设置 hSlider 的皮肤。\r\n\t\t\t\t*hSlider.min=0;//设置 hSlider 最低位置值。\r\n\t\t\t\t*hSlider.max=10;//设置 hSlider 最高位置值。\r\n\t\t\t\t*hSlider.value=2;//设置 hSlider 当前位置值。\r\n\t\t\t\t*hSlider.tick=1;//设置 hSlider 刻度值。\r\n\t\t\t\t*hSlider.x=100;//设置 hSlider 对象的属性 x 的值，用于控制 hSlider 对象的显示位置。\r\n\t\t\t\t*hSlider.y=100;//设置 hSlider 对象的属性 y 的值，用于控制 hSlider 对象的显示位置。\r\n\t\t\t\t*hSlider.changeHandler=new Handler(this,onChange);//设置 hSlider 位置变化处理器。\r\n\t\t\t\t*Laya.stage.addChild(hSlider);//把 hSlider 添加到显示列表。\r\n\t\t\t\t*}\r\n\t\t\t*private function onChange(value:Number):void\r\n\t\t\t*{\r\n\t\t\t\t*trace(\"滑块的位置： value=\"+value);\r\n\t\t\t\t*}\r\n\t\t\t*}\r\n\t\t*}\r\n\t*</listing>\r\n\t*<listing version=\"3.0\">\r\n\t*Laya.init(640,800,\"canvas\");//设置游戏画布宽高、渲染模式\r\n\t*Laya.stage.bgColor=\"#efefef\";//设置画布的背景颜色\r\n\t*var hSlider;\r\n\t*var res=[\"resource/ui/hslider.png\",\"resource/ui/hslider$bar.png\"];\r\n\t*Laya.loader.load(res,laya.utils.Handler.create(this,onLoadComplete));\r\n\t*function onLoadComplete(){\r\n\t\t*console.log(\"资源加载完成！\");\r\n\t\t*hSlider=new laya.ui.HSlider();//创建一个 HSlider 类的实例对象 hSlider 。\r\n\t\t*hSlider.skin=\"resource/ui/hslider.png\";//设置 hSlider 的皮肤。\r\n\t\t*hSlider.min=0;//设置 hSlider 最低位置值。\r\n\t\t*hSlider.max=10;//设置 hSlider 最高位置值。\r\n\t\t*hSlider.value=2;//设置 hSlider 当前位置值。\r\n\t\t*hSlider.tick=1;//设置 hSlider 刻度值。\r\n\t\t*hSlider.x=100;//设置 hSlider 对象的属性 x 的值，用于控制 hSlider 对象的显示位置。\r\n\t\t*hSlider.y=100;//设置 hSlider 对象的属性 y 的值，用于控制 hSlider 对象的显示位置。\r\n\t\t*hSlider.changeHandler=new laya.utils.Handler(this,onChange);//设置 hSlider 位置变化处理器。\r\n\t\t*Laya.stage.addChild(hSlider);//把 hSlider 添加到显示列表。\r\n\t\t*}\r\n\t*function onChange(value)\r\n\t*{\r\n\t\t*console.log(\"滑块的位置： value=\"+value);\r\n\t\t*}\r\n\t*</listing>\r\n\t*<listing version=\"3.0\">\r\n\t*import Handler=laya.utils.Handler;\r\n\t*import HSlider=laya.ui.HSlider;\r\n\t*class HSlider_Example {\r\n\t\t*private hSlider:HSlider;\r\n\t\t*constructor(){\r\n\t\t\t*Laya.init(640,800);//设置游戏画布宽高。\r\n\t\t\t*Laya.stage.bgColor=\"#efefef\";//设置画布的背景颜色。\r\n\t\t\t*Laya.loader.load([\"resource/ui/hslider.png\",\"resource/ui/hslider$bar.png\"],Handler.create(this,this.onLoadComplete));//加载资源。\r\n\t\t\t*}\r\n\t\t*private onLoadComplete():void {\r\n\t\t\t*this.hSlider=new HSlider();//创建一个 HSlider 类的实例对象 hSlider 。\r\n\t\t\t*this.hSlider.skin=\"resource/ui/hslider.png\";//设置 hSlider 的皮肤。\r\n\t\t\t*this.hSlider.min=0;//设置 hSlider 最低位置值。\r\n\t\t\t*this.hSlider.max=10;//设置 hSlider 最高位置值。\r\n\t\t\t*this.hSlider.value=2;//设置 hSlider 当前位置值。\r\n\t\t\t*this.hSlider.tick=1;//设置 hSlider 刻度值。\r\n\t\t\t*this.hSlider.x=100;//设置 hSlider 对象的属性 x 的值，用于控制 hSlider 对象的显示位置。\r\n\t\t\t*this.hSlider.y=100;//设置 hSlider 对象的属性 y 的值，用于控制 hSlider 对象的显示位置。\r\n\t\t\t*this.hSlider.changeHandler=new Handler(this,this.onChange);//设置 hSlider 位置变化处理器。\r\n\t\t\t*Laya.stage.addChild(this.hSlider);//把 hSlider 添加到显示列表。\r\n\t\t\t*}\r\n\t\t*private onChange(value:number):void {\r\n\t\t\t*console.log(\"滑块的位置： value=\"+value);\r\n\t\t\t*}\r\n\t\t*}\r\n\t*</listing>\r\n\t*\r\n\t*@see laya.ui.Slider\r\n\t*/\r\n\t//class laya.ui.HSlider extends laya.ui.Slider\r\n\tvar HSlider=(function(_super){\r\n\t\t/**\r\n\t\t*创建一个 <code>HSlider</code> 类实例。\r\n\t\t*@param skin 皮肤。\r\n\t\t*/\r\n\t\tfunction HSlider(skin){\r\n\t\t\tHSlider.__super.call(this,skin);\r\n\t\t\tthis.isVertical=false;\r\n\t\t}\r\n\r\n\t\t__class(HSlider,'laya.ui.HSlider',_super);\r\n\t\treturn HSlider;\r\n\t})(Slider)\r\n\r\n\r\n\t/**\r\n\t*\r\n\t*使用 <code>VScrollBar</code> （垂直 <code>ScrollBar</code> ）控件，可以在因数据太多而不能在显示区域完全显示时控制显示的数据部分。\r\n\t*\r\n\t*@example 以下示例代码，创建了一个 <code>VScrollBar</code> 实例。\r\n\t*<listing version=\"3.0\">\r\n\t*package\r\n\t*{\r\n\t\t*import laya.ui.vScrollBar;\r\n\t\t*import laya.ui.VScrollBar;\r\n\t\t*import laya.utils.Handler;\r\n\t\t*public class VScrollBar_Example\r\n\t\t*{\r\n\t\t\t*private var vScrollBar:VScrollBar;\r\n\t\t\t*public function VScrollBar_Example()\r\n\t\t\t*{\r\n\t\t\t\t*Laya.init(640,800);//设置游戏画布宽高、渲染模式。\r\n\t\t\t\t*Laya.stage.bgColor=\"#efefef\";//设置画布的背景颜色。\r\n\t\t\t\t*Laya.loader.load([\"resource/ui/vscroll.png\",\"resource/ui/vscroll$bar.png\",\"resource/ui/vscroll$down.png\",\"resource/ui/vscroll$up.png\"],Handler.create(this,onLoadComplete));\r\n\t\t\t\t*}\r\n\t\t\t*private function onLoadComplete():void\r\n\t\t\t*{\r\n\t\t\t\t*vScrollBar=new VScrollBar();//创建一个 vScrollBar 类的实例对象 hScrollBar 。\r\n\t\t\t\t*vScrollBar.skin=\"resource/ui/vscroll.png\";//设置 vScrollBar 的皮肤。\r\n\t\t\t\t*vScrollBar.x=100;//设置 vScrollBar 对象的属性 x 的值，用于控制 vScrollBar 对象的显示位置。\r\n\t\t\t\t*vScrollBar.y=100;//设置 vScrollBar 对象的属性 y 的值，用于控制 vScrollBar 对象的显示位置。\r\n\t\t\t\t*vScrollBar.changeHandler=new Handler(this,onChange);//设置 vScrollBar 的滚动变化处理器。\r\n\t\t\t\t*Laya.stage.addChild(vScrollBar);//将此 vScrollBar 对象添加到显示列表。\r\n\t\t\t\t*}\r\n\t\t\t*private function onChange(value:Number):void\r\n\t\t\t*{\r\n\t\t\t\t*trace(\"滚动条的位置： value=\"+value);\r\n\t\t\t\t*}\r\n\t\t\t*}\r\n\t\t*}\r\n\t*</listing>\r\n\t*<listing version=\"3.0\">\r\n\t*Laya.init(640,800);//设置游戏画布宽高\r\n\t*Laya.stage.bgColor=\"#efefef\";//设置画布的背景颜色\r\n\t*var vScrollBar;\r\n\t*var res=[\"resource/ui/vscroll.png\",\"resource/ui/vscroll$bar.png\",\"resource/ui/vscroll$down.png\",\"resource/ui/vscroll$up.png\"];\r\n\t*Laya.loader.load(res,laya.utils.Handler.create(this,onLoadComplete));//加载资源。\r\n\t*function onLoadComplete(){\r\n\t\t*vScrollBar=new laya.ui.VScrollBar();//创建一个 vScrollBar 类的实例对象 hScrollBar 。\r\n\t\t*vScrollBar.skin=\"resource/ui/vscroll.png\";//设置 vScrollBar 的皮肤。\r\n\t\t*vScrollBar.x=100;//设置 vScrollBar 对象的属性 x 的值，用于控制 vScrollBar 对象的显示位置。\r\n\t\t*vScrollBar.y=100;//设置 vScrollBar 对象的属性 y 的值，用于控制 vScrollBar 对象的显示位置。\r\n\t\t*vScrollBar.changeHandler=new laya.utils.Handler(this,onChange);//设置 vScrollBar 的滚动变化处理器。\r\n\t\t*Laya.stage.addChild(vScrollBar);//将此 vScrollBar 对象添加到显示列表。\r\n\t\t*}\r\n\t*function onChange(value){\r\n\t\t*console.log(\"滚动条的位置： value=\"+value);\r\n\t\t*}\r\n\t*</listing>\r\n\t*<listing version=\"3.0\">\r\n\t*import VScrollBar=laya.ui.VScrollBar;\r\n\t*import Handler=laya.utils.Handler;\r\n\t*class VScrollBar_Example {\r\n\t\t*private vScrollBar:VScrollBar;\r\n\t\t*constructor(){\r\n\t\t\t*Laya.init(640,800);//设置游戏画布宽高、渲染模式。\r\n\t\t\t*Laya.stage.bgColor=\"#efefef\";//设置画布的背景颜色。\r\n\t\t\t*Laya.loader.load([\"resource/ui/vscroll.png\",\"resource/ui/vscroll$bar.png\",\"resource/ui/vscroll$down.png\",\"resource/ui/vscroll$up.png\"],Handler.create(this,this.onLoadComplete));\r\n\t\t\t*}\r\n\t\t*private onLoadComplete():void {\r\n\t\t\t*this.vScrollBar=new VScrollBar();//创建一个 vScrollBar 类的实例对象 hScrollBar 。\r\n\t\t\t*this.vScrollBar.skin=\"resource/ui/vscroll.png\";//设置 vScrollBar 的皮肤。\r\n\t\t\t*this.vScrollBar.x=100;//设置 vScrollBar 对象的属性 x 的值，用于控制 vScrollBar 对象的显示位置。\r\n\t\t\t*this.vScrollBar.y=100;//设置 vScrollBar 对象的属性 y 的值，用于控制 vScrollBar 对象的显示位置。\r\n\t\t\t*this.vScrollBar.changeHandler=new Handler(this,this.onChange);//设置 vScrollBar 的滚动变化处理器。\r\n\t\t\t*Laya.stage.addChild(this.vScrollBar);//将此 vScrollBar 对象添加到显示列表。\r\n\t\t\t*}\r\n\t\t*private onChange(value:number):void {\r\n\t\t\t*console.log(\"滚动条的位置： value=\"+value);\r\n\t\t\t*}\r\n\t\t*}\r\n\t*</listing>\r\n\t*/\r\n\t//class laya.ui.VScrollBar extends laya.ui.ScrollBar\r\n\tvar VScrollBar=(function(_super){\r\n\t\tfunction VScrollBar(){VScrollBar.__super.call(this);;\r\n\t\t};\r\n\r\n\t\t__class(VScrollBar,'laya.ui.VScrollBar',_super);\r\n\t\treturn VScrollBar;\r\n\t})(ScrollBar)\r\n\r\n\r\n\t/**\r\n\t*<code>TextInput</code> 类用于创建显示对象以显示和输入文本。\r\n\t*\r\n\t*@example 以下示例代码，创建了一个 <code>TextInput</code> 实例。\r\n\t*<listing version=\"3.0\">\r\n\t*package\r\n\t*{\r\n\t\t*import laya.display.Stage;\r\n\t\t*import laya.ui.TextInput;\r\n\t\t*import laya.utils.Handler;\r\n\t\t*public class TextInput_Example\r\n\t\t*{\r\n\t\t\t*public function TextInput_Example()\r\n\t\t\t*{\r\n\t\t\t\t*Laya.init(640,800);//设置游戏画布宽高、渲染模式。\r\n\t\t\t\t*Laya.stage.bgColor=\"#efefef\";//设置画布的背景颜色。\r\n\t\t\t\t*Laya.loader.load([\"resource/ui/input.png\"],Handler.create(this,onLoadComplete));//加载资源。\r\n\t\t\t\t*}\r\n\t\t\t*private function onLoadComplete():void\r\n\t\t\t*{\r\n\t\t\t\t*var textInput:TextInput=new TextInput(\"这是一个TextInput实例。\");//创建一个 TextInput 类的实例对象 textInput 。\r\n\t\t\t\t*textInput.skin=\"resource/ui/input.png\";//设置 textInput 的皮肤。\r\n\t\t\t\t*textInput.sizeGrid=\"4,4,4,4\";//设置 textInput 的网格信息。\r\n\t\t\t\t*textInput.color=\"#008fff\";//设置 textInput 的文本颜色。\r\n\t\t\t\t*textInput.font=\"Arial\";//设置 textInput 的文本字体。\r\n\t\t\t\t*textInput.bold=true;//设置 textInput 的文本显示为粗体。\r\n\t\t\t\t*textInput.fontSize=30;//设置 textInput 的字体大小。\r\n\t\t\t\t*textInput.wordWrap=true;//设置 textInput 的文本自动换行。\r\n\t\t\t\t*textInput.x=100;//设置 textInput 对象的属性 x 的值，用于控制 textInput 对象的显示位置。\r\n\t\t\t\t*textInput.y=100;//设置 textInput 对象的属性 y 的值，用于控制 textInput 对象的显示位置。\r\n\t\t\t\t*textInput.width=300;//设置 textInput 的宽度。\r\n\t\t\t\t*textInput.height=200;//设置 textInput 的高度。\r\n\t\t\t\t*Laya.stage.addChild(textInput);//将 textInput 添加到显示列表。\r\n\t\t\t\t*}\r\n\t\t\t*}\r\n\t\t*}\r\n\t*</listing>\r\n\t*<listing version=\"3.0\">\r\n\t*Laya.init(640,800);//设置游戏画布宽高\r\n\t*Laya.stage.bgColor=\"#efefef\";//设置画布的背景颜色\r\n\t*Laya.loader.load([\"resource/ui/input.png\"],laya.utils.Handler.create(this,onLoadComplete));//加载资源。\r\n\t*function onLoadComplete(){\r\n\t\t*var textInput=new laya.ui.TextInput(\"这是一个TextInput实例。\");//创建一个 TextInput 类的实例对象 textInput 。\r\n\t\t*textInput.skin=\"resource/ui/input.png\";//设置 textInput 的皮肤。\r\n\t\t*textInput.sizeGrid=\"4,4,4,4\";//设置 textInput 的网格信息。\r\n\t\t*textInput.color=\"#008fff\";//设置 textInput 的文本颜色。\r\n\t\t*textInput.font=\"Arial\";//设置 textInput 的文本字体。\r\n\t\t*textInput.bold=true;//设置 textInput 的文本显示为粗体。\r\n\t\t*textInput.fontSize=30;//设置 textInput 的字体大小。\r\n\t\t*textInput.wordWrap=true;//设置 textInput 的文本自动换行。\r\n\t\t*textInput.x=100;//设置 textInput 对象的属性 x 的值，用于控制 textInput 对象的显示位置。\r\n\t\t*textInput.y=100;//设置 textInput 对象的属性 y 的值，用于控制 textInput 对象的显示位置。\r\n\t\t*textInput.width=300;//设置 textInput 的宽度。\r\n\t\t*textInput.height=200;//设置 textInput 的高度。\r\n\t\t*Laya.stage.addChild(textInput);//将 textInput 添加到显示列表。\r\n\t\t*}\r\n\t*</listing>\r\n\t*<listing version=\"3.0\">\r\n\t*import Stage=laya.display.Stage;\r\n\t*import TextInput=laya.ui.TextInput;\r\n\t*import Handler=laya.utils.Handler;\r\n\t*class TextInput_Example {\r\n\t\t*constructor(){\r\n\t\t\t*Laya.init(640,800);//设置游戏画布宽高、渲染模式。\r\n\t\t\t*Laya.stage.bgColor=\"#efefef\";//设置画布的背景颜色。\r\n\t\t\t*Laya.loader.load([\"resource/ui/input.png\"],Handler.create(this,this.onLoadComplete));//加载资源。\r\n\t\t\t*}\r\n\t\t*private onLoadComplete():void {\r\n\t\t\t*var textInput:TextInput=new TextInput(\"这是一个TextInput实例。\");//创建一个 TextInput 类的实例对象 textInput 。\r\n\t\t\t*textInput.skin=\"resource/ui/input.png\";//设置 textInput 的皮肤。\r\n\t\t\t*textInput.sizeGrid=\"4,4,4,4\";//设置 textInput 的网格信息。\r\n\t\t\t*textInput.color=\"#008fff\";//设置 textInput 的文本颜色。\r\n\t\t\t*textInput.font=\"Arial\";//设置 textInput 的文本字体。\r\n\t\t\t*textInput.bold=true;//设置 textInput 的文本显示为粗体。\r\n\t\t\t*textInput.fontSize=30;//设置 textInput 的字体大小。\r\n\t\t\t*textInput.wordWrap=true;//设置 textInput 的文本自动换行。\r\n\t\t\t*textInput.x=100;//设置 textInput 对象的属性 x 的值，用于控制 textInput 对象的显示位置。\r\n\t\t\t*textInput.y=100;//设置 textInput 对象的属性 y 的值，用于控制 textInput 对象的显示位置。\r\n\t\t\t*textInput.width=300;//设置 textInput 的宽度。\r\n\t\t\t*textInput.height=200;//设置 textInput 的高度。\r\n\t\t\t*Laya.stage.addChild(textInput);//将 textInput 添加到显示列表。\r\n\t\t\t*}\r\n\t\t*}\r\n\t*</listing>\r\n\t*/\r\n\t//class laya.ui.TextInput extends laya.ui.Label\r\n\tvar TextInput=(function(_super){\r\n\t\tfunction TextInput(text){\r\n\t\t\tthis._bg=null;\r\n\t\t\tthis._skin=null;\r\n\t\t\tTextInput.__super.call(this);\r\n\t\t\t(text===void 0)&& (text=\"\");\r\n\t\t\tthis.text=text;\r\n\t\t\tthis.skin=this.skin;\r\n\t\t}\r\n\r\n\t\t__class(TextInput,'laya.ui.TextInput',_super);\r\n\t\tvar __proto=TextInput.prototype;\r\n\t\t/**@inheritDoc */\r\n\t\t__proto.preinitialize=function(){\r\n\t\t\tthis.mouseEnabled=true;\r\n\t\t}\r\n\r\n\t\t/**@inheritDoc */\r\n\t\t__proto.destroy=function(destroyChild){\r\n\t\t\t(destroyChild===void 0)&& (destroyChild=true);\r\n\t\t\t_super.prototype.destroy.call(this,destroyChild);\r\n\t\t\tthis._bg && this._bg.destroy();\r\n\t\t\tthis._bg=null;\r\n\t\t}\r\n\r\n\t\t/**@inheritDoc */\r\n\t\t__proto.createChildren=function(){\r\n\t\t\tthis.addChild(this._tf=new Input());\r\n\t\t\tthis._tf.padding=Styles.inputLabelPadding;\r\n\t\t\tthis._tf.on(\"input\",this,this._onInput);\r\n\t\t\tthis._tf.on(\"enter\",this,this._onEnter);\r\n\t\t\tthis._tf.on(\"blur\",this,this._onBlur);\r\n\t\t\tthis._tf.on(\"focus\",this,this._onFocus);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*/\r\n\t\t__proto._onFocus=function(){\r\n\t\t\tthis.event(\"focus\",this);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*/\r\n\t\t__proto._onBlur=function(){\r\n\t\t\tthis.event(\"blur\",this);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*/\r\n\t\t__proto._onInput=function(){\r\n\t\t\tthis.event(\"input\",this);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*/\r\n\t\t__proto._onEnter=function(){\r\n\t\t\tthis.event(\"enter\",this);\r\n\t\t}\r\n\r\n\t\t/**@inheritDoc */\r\n\t\t__proto.initialize=function(){\r\n\t\t\tthis.width=128;\r\n\t\t\tthis.height=22;\r\n\t\t}\r\n\r\n\t\t/**选中输入框内的文本。*/\r\n\t\t__proto.select=function(){\r\n\t\t\t(this._tf).select();\r\n\t\t}\r\n\r\n\t\t__proto.setSelection=function(startIndex,endIndex){\r\n\t\t\t(this._tf).setSelection(startIndex,endIndex);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@copy laya.display.Input#type\r\n\t\t*/\r\n\t\t__getset(0,__proto,'type',function(){\r\n\t\t\treturn (this._tf).type;\r\n\t\t\t},function(value){\r\n\t\t\t(this._tf).type=value;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*@copy laya.display.Input#asPassword\r\n\t\t*/\r\n\t\t__getset(0,__proto,'asPassword',function(){\r\n\t\t\treturn (this._tf).asPassword;\r\n\t\t\t},function(value){\r\n\t\t\t(this._tf).asPassword=value;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*@copy laya.display.Input#maxChars\r\n\t\t*/\r\n\t\t__getset(0,__proto,'maxChars',function(){\r\n\t\t\treturn (this._tf).maxChars;\r\n\t\t\t},function(value){\r\n\t\t\t(this._tf).maxChars=value;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*@copy laya.display.Input#promptColor\r\n\t\t*/\r\n\t\t__getset(0,__proto,'promptColor',function(){\r\n\t\t\treturn (this._tf).promptColor;\r\n\t\t\t},function(value){\r\n\t\t\t(this._tf).promptColor=value;\r\n\t\t});\r\n\r\n\t\t/**@inheritDoc */\r\n\t\t__getset(0,__proto,'height',_super.prototype._$get_height,function(value){\r\n\t\t\t_super.prototype._$set_height.call(this,value);\r\n\t\t\tthis._bg && (this._bg.height=value);\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*设置原生input输入框的y坐标偏移。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'inputElementYAdjuster',function(){\r\n\t\t\treturn (this._tf).inputElementYAdjuster;\r\n\t\t\t},function(value){\r\n\t\t\t(this._tf).inputElementYAdjuster=value;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*表示此对象包含的文本背景 <code>AutoBitmap</code> 组件实例。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'bg',function(){\r\n\t\t\treturn this._bg;\r\n\t\t\t},function(value){\r\n\t\t\tthis.graphics=this._bg=value;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*设置原生input输入框的x坐标偏移。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'inputElementXAdjuster',function(){\r\n\t\t\treturn (this._tf).inputElementXAdjuster;\r\n\t\t\t},function(value){\r\n\t\t\t(this._tf).inputElementXAdjuster=value;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*设置可编辑状态。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'editable',function(){\r\n\t\t\treturn (this._tf).editable;\r\n\t\t\t},function(value){\r\n\t\t\t(this._tf).editable=value;\r\n\t\t});\r\n\r\n\t\t/**@inheritDoc */\r\n\t\t__getset(0,__proto,'width',_super.prototype._$get_width,function(value){\r\n\t\t\t_super.prototype._$set_width.call(this,value);\r\n\t\t\tthis._bg && (this._bg.width=value);\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*<p>指示当前是否是文本域。</p>\r\n\t\t*值为true表示当前是文本域，否则不是文本域。\r\n\t\t*/\r\n\t\t__getset(0,__proto,'multiline',function(){\r\n\t\t\treturn (this._tf).multiline;\r\n\t\t\t},function(value){\r\n\t\t\t(this._tf).multiline=value;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*@copy laya.display.Input#prompt\r\n\t\t*/\r\n\t\t__getset(0,__proto,'prompt',function(){\r\n\t\t\treturn (this._tf).prompt;\r\n\t\t\t},function(value){\r\n\t\t\t(this._tf).prompt=value;\r\n\t\t});\r\n\r\n\t\t/**限制输入的字符。*/\r\n\t\t__getset(0,__proto,'restrict',function(){\r\n\t\t\treturn (this._tf).restrict;\r\n\t\t\t},function(pattern){\r\n\t\t\t(this._tf).restrict=pattern;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*@copy laya.display.Input#focus\r\n\t\t*/\r\n\t\t__getset(0,__proto,'focus',function(){\r\n\t\t\treturn (this._tf).focus;\r\n\t\t\t},function(value){\r\n\t\t\t(this._tf).focus=value;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*@copy laya.ui.Image#skin\r\n\t\t*/\r\n\t\t__getset(0,__proto,'skin',function(){\r\n\t\t\treturn this._skin;\r\n\t\t\t},function(value){\r\n\t\t\tif (this._skin !=value){\r\n\t\t\t\tthis._skin=value;\r\n\t\t\t\tthis._bg || (this.graphics=this._bg=new AutoBitmap());\r\n\t\t\t\tthis._bg.source=Loader.getRes(this._skin);\r\n\t\t\t\tthis._width && (this._bg.width=this._width);\r\n\t\t\t\tthis._height && (this._bg.height=this._height);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*<p>当前实例的背景图（ <code>AutoBitmap</code> ）实例的有效缩放网格数据。</p>\r\n\t\t*<p>数据格式：\"上边距,右边距,下边距,左边距,是否重复填充(值为0：不重复填充，1：重复填充)\"，以逗号分隔。\r\n\t\t*<ul><li>例如：\"4,4,4,4,1\"</li></ul></p>\r\n\t\t*@see laya.ui.AutoBitmap.sizeGrid\r\n\t\t*/\r\n\t\t__getset(0,__proto,'sizeGrid',function(){\r\n\t\t\treturn this._bg && this._bg.sizeGrid ? this._bg.sizeGrid.join(\",\"):null;\r\n\t\t\t},function(value){\r\n\t\t\tthis._bg || (this.graphics=this._bg=new AutoBitmap());\r\n\t\t\tthis._bg.sizeGrid=UIUtils.fillArray(Styles.defaultSizeGrid,value,Number);\r\n\t\t});\r\n\r\n\t\treturn TextInput;\r\n\t})(Label)\r\n\r\n\r\n\t/**\r\n\t*使用 <code>VSlider</code> 控件，用户可以通过在滑块轨道的终点之间移动滑块来选择值。\r\n\t*<p> <code>VSlider</code> 控件采用垂直方向。滑块轨道从下往上扩展，而标签位于轨道的左右两侧。</p>\r\n\t*\r\n\t*@example 以下示例代码，创建了一个 <code>VSlider</code> 实例。\r\n\t*<listing version=\"3.0\">\r\n\t*package\r\n\t*{\r\n\t\t*import laya.ui.HSlider;\r\n\t\t*import laya.ui.VSlider;\r\n\t\t*import laya.utils.Handler;\r\n\t\t*public class VSlider_Example\r\n\t\t*{\r\n\t\t\t*private var vSlider:VSlider;\r\n\t\t\t*public function VSlider_Example()\r\n\t\t\t*{\r\n\t\t\t\t*Laya.init(640,800);//设置游戏画布宽高。\r\n\t\t\t\t*Laya.stage.bgColor=\"#efefef\";//设置画布的背景颜色。\r\n\t\t\t\t*Laya.loader.load([\"resource/ui/vslider.png\",\"resource/ui/vslider$bar.png\"],Handler.create(this,onLoadComplete));//加载资源。\r\n\t\t\t\t*}\r\n\t\t\t*private function onLoadComplete():void\r\n\t\t\t*{\r\n\t\t\t\t*vSlider=new VSlider();//创建一个 VSlider 类的实例对象 vSlider 。\r\n\t\t\t\t*vSlider.skin=\"resource/ui/vslider.png\";//设置 vSlider 的皮肤。\r\n\t\t\t\t*vSlider.min=0;//设置 vSlider 最低位置值。\r\n\t\t\t\t*vSlider.max=10;//设置 vSlider 最高位置值。\r\n\t\t\t\t*vSlider.value=2;//设置 vSlider 当前位置值。\r\n\t\t\t\t*vSlider.tick=1;//设置 vSlider 刻度值。\r\n\t\t\t\t*vSlider.x=100;//设置 vSlider 对象的属性 x 的值，用于控制 vSlider 对象的显示位置。\r\n\t\t\t\t*vSlider.y=100;//设置 vSlider 对象的属性 y 的值，用于控制 vSlider 对象的显示位置。\r\n\t\t\t\t*vSlider.changeHandler=new Handler(this,onChange);//设置 vSlider 位置变化处理器。\r\n\t\t\t\t*Laya.stage.addChild(vSlider);//把 vSlider 添加到显示列表。\r\n\t\t\t\t*}\r\n\t\t\t*private function onChange(value:Number):void\r\n\t\t\t*{\r\n\t\t\t\t*trace(\"滑块的位置： value=\"+value);\r\n\t\t\t\t*}\r\n\t\t\t*}\r\n\t\t*}\r\n\t*</listing>\r\n\t*<listing version=\"3.0\">\r\n\t*Laya.init(640,800);//设置游戏画布宽高\r\n\t*Laya.stage.bgColor=\"#efefef\";//设置画布的背景颜色\r\n\t*var vSlider;\r\n\t*Laya.loader.load([\"resource/ui/vslider.png\",\"resource/ui/vslider$bar.png\"],laya.utils.Handler.create(this,onLoadComplete));//加载资源。\r\n\t*function onLoadComplete(){\r\n\t\t*vSlider=new laya.ui.VSlider();//创建一个 VSlider 类的实例对象 vSlider 。\r\n\t\t*vSlider.skin=\"resource/ui/vslider.png\";//设置 vSlider 的皮肤。\r\n\t\t*vSlider.min=0;//设置 vSlider 最低位置值。\r\n\t\t*vSlider.max=10;//设置 vSlider 最高位置值。\r\n\t\t*vSlider.value=2;//设置 vSlider 当前位置值。\r\n\t\t*vSlider.tick=1;//设置 vSlider 刻度值。\r\n\t\t*vSlider.x=100;//设置 vSlider 对象的属性 x 的值，用于控制 vSlider 对象的显示位置。\r\n\t\t*vSlider.y=100;//设置 vSlider 对象的属性 y 的值，用于控制 vSlider 对象的显示位置。\r\n\t\t*vSlider.changeHandler=new laya.utils.Handler(this,onChange);//设置 vSlider 位置变化处理器。\r\n\t\t*Laya.stage.addChild(vSlider);//把 vSlider 添加到显示列表。\r\n\t\t*}\r\n\t*function onChange(value){\r\n\t\t*console.log(\"滑块的位置： value=\"+value);\r\n\t\t*}\r\n\t*</listing>\r\n\t*<listing version=\"3.0\">\r\n\t*import HSlider=laya.ui.HSlider;\r\n\t*import VSlider=laya.ui.VSlider;\r\n\t*import Handler=laya.utils.Handler;\r\n\t*class VSlider_Example {\r\n\t\t*private vSlider:VSlider;\r\n\t\t*constructor(){\r\n\t\t\t*Laya.init(640,800);//设置游戏画布宽高。\r\n\t\t\t*Laya.stage.bgColor=\"#efefef\";//设置画布的背景颜色。\r\n\t\t\t*Laya.loader.load([\"resource/ui/vslider.png\",\"resource/ui/vslider$bar.png\"],Handler.create(this,this.onLoadComplete));//加载资源。\r\n\t\t\t*}\r\n\t\t*private onLoadComplete():void {\r\n\t\t\t*this.vSlider=new VSlider();//创建一个 VSlider 类的实例对象 vSlider 。\r\n\t\t\t*this.vSlider.skin=\"resource/ui/vslider.png\";//设置 vSlider 的皮肤。\r\n\t\t\t*this.vSlider.min=0;//设置 vSlider 最低位置值。\r\n\t\t\t*this.vSlider.max=10;//设置 vSlider 最高位置值。\r\n\t\t\t*this.vSlider.value=2;//设置 vSlider 当前位置值。\r\n\t\t\t*this.vSlider.tick=1;//设置 vSlider 刻度值。\r\n\t\t\t*this.vSlider.x=100;//设置 vSlider 对象的属性 x 的值，用于控制 vSlider 对象的显示位置。\r\n\t\t\t*this.vSlider.y=100;//设置 vSlider 对象的属性 y 的值，用于控制 vSlider 对象的显示位置。\r\n\t\t\t*this.vSlider.changeHandler=new Handler(this,this.onChange);//设置 vSlider 位置变化处理器。\r\n\t\t\t*Laya.stage.addChild(this.vSlider);//把 vSlider 添加到显示列表。\r\n\t\t\t*}\r\n\t\t*private onChange(value:number):void {\r\n\t\t\t*console.log(\"滑块的位置： value=\"+value);\r\n\t\t\t*}\r\n\t\t*}\r\n\t*</listing>\r\n\t*@see laya.ui.Slider\r\n\t*/\r\n\t//class laya.ui.VSlider extends laya.ui.Slider\r\n\tvar VSlider=(function(_super){\r\n\t\tfunction VSlider(){VSlider.__super.call(this);;\r\n\t\t};\r\n\r\n\t\t__class(VSlider,'laya.ui.VSlider',_super);\r\n\t\treturn VSlider;\r\n\t})(Slider)\r\n\r\n\r\n\t/**\r\n\t*@private\r\n\t*/\r\n\t//class laya.display.GraphicAnimation extends laya.display.FrameAnimation\r\n\tvar GraphicAnimation=(function(_super){\r\n\t\tfunction GraphicAnimation(){\r\n\t\t\tthis.animationList=null;\r\n\t\t\tthis.animationDic=null;\r\n\t\t\tthis._nodeList=null;\r\n\t\t\tthis._nodeDefaultProps=null;\r\n\t\t\tthis._gList=null;\r\n\t\t\tthis._nodeIDAniDic={};\r\n\t\t\tGraphicAnimation.__super.call(this);\r\n\t\t}\r\n\r\n\t\t__class(GraphicAnimation,'laya.display.GraphicAnimation',_super);\r\n\t\tvar __proto=GraphicAnimation.prototype;\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*/\r\n\t\t__proto._parseNodeList=function(uiView){\r\n\t\t\tif (!this._nodeList){\r\n\t\t\t\tthis._nodeList=[];\r\n\t\t\t}\r\n\t\t\tthis._nodeDefaultProps[uiView.compId]=uiView.props;\r\n\t\t\tif (uiView.compId)\r\n\t\t\t\tthis._nodeList.push(uiView.compId);\r\n\t\t\tvar childs=uiView.child;\r\n\t\t\tif (childs){\r\n\t\t\t\tvar i=0,len=childs.length;\r\n\t\t\t\tfor (i=0;i < len;i++){\r\n\t\t\t\t\tthis._parseNodeList(childs[i]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*/\r\n\t\t__proto._calGraphicData=function(aniData){\r\n\t\t\tthis._setUp(null,aniData);\r\n\t\t\tthis._createGraphicData();\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*/\r\n\t\t__proto._createGraphicData=function(){\r\n\t\t\tvar gList=[];\r\n\t\t\tvar i=0,len=this.count;\r\n\t\t\tfor (i=0;i < len;i++){\r\n\t\t\t\tgList.push(this._createFrameGraphic(i));\r\n\t\t\t}\r\n\t\t\tthis._gList=gList;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*/\r\n\t\t__proto._createFrameGraphic=function(frame){\r\n\t\t\tvar g=new Graphics();\r\n\t\t\tvar i=0,len=this._nodeList.length;\r\n\t\t\tvar tNode=0;\r\n\t\t\tfor (i=0;i < len;i++){\r\n\t\t\t\ttNode=this._nodeList[i];\r\n\t\t\t\tthis._addNodeGraphic(tNode,g,frame);\r\n\t\t\t}\r\n\t\t\treturn g;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*/\r\n\t\t__proto._calculateNodeKeyFrames=function(node){\r\n\t\t\t_super.prototype._calculateNodeKeyFrames.call(this,node);\r\n\t\t\tthis._nodeIDAniDic[node.target]=node;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*/\r\n\t\t__proto.getNodeDataByID=function(nodeID){\r\n\t\t\treturn this._nodeIDAniDic[nodeID];\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*/\r\n\t\t__proto._getParams=function(obj,params,frame,obj2){\r\n\t\t\tvar rst=GraphicAnimation._temParam;\r\n\t\t\trst.length=params.length;\r\n\t\t\tvar i=0,len=params.length;\r\n\t\t\tfor (i=0;i < len;i++){\r\n\t\t\t\trst[i]=this._getObjVar(obj,params[i][0],frame,params[i][1],obj2);\r\n\t\t\t}\r\n\t\t\treturn rst;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*/\r\n\t\t__proto._getObjVar=function(obj,key,frame,noValue,obj2){\r\n\t\t\tif (obj.hasOwnProperty(key)){\r\n\t\t\t\tvar vArr=obj[key];\r\n\t\t\t\tif (frame >=vArr.length)\r\n\t\t\t\t\tframe=vArr.length-1;\r\n\t\t\t\treturn obj[key][frame];\r\n\t\t\t}\r\n\t\t\tif (obj2.hasOwnProperty(key)){\r\n\t\t\t\treturn obj2[key];\r\n\t\t\t}\r\n\t\t\treturn noValue;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*/\r\n\t\t__proto._addNodeGraphic=function(nodeID,g,frame){\r\n\t\t\tvar node=this.getNodeDataByID(nodeID);\r\n\t\t\tif (!node)\r\n\t\t\t\treturn;\r\n\t\t\tvar frameData=node.frames;\r\n\t\t\tvar params=this._getParams(frameData,GraphicAnimation._drawTextureCmd,frame,this._nodeDefaultProps[nodeID]);\r\n\t\t\tvar url=params[0];\r\n\t\t\tif (!url)return;\r\n\t\t\tparams[0]=this._getTextureByUrl(url);\r\n\t\t\tif (!params[0]){\r\n\t\t\t\tconsole.log(\"lost:\",url);\r\n\t\t\t\tthrow new Error(\"texture not loaded:\"+url);\r\n\t\t\t\treturn;\r\n\t\t\t};\r\n\t\t\tvar m;\r\n\t\t\tvar px=params[5],py=params[6];\r\n\t\t\tif (px !=0 || py !=0){\r\n\t\t\t\tm=m || new Matrix();\r\n\t\t\t\tm.translate(-px,-py);\r\n\t\t\t};\r\n\t\t\tvar sx=params[7],sy=params[8];\r\n\t\t\tvar rotate=params[9];\r\n\t\t\tif (sx !=1 || sy !=1 || rotate !=0){\r\n\t\t\t\tm=m || new Matrix();\r\n\t\t\t\tm.scale(sx,sy);\r\n\t\t\t\tm.rotate(rotate *0.0174532922222222);\r\n\t\t\t}\r\n\t\t\tif (m){\r\n\t\t\t\tm.translate(params[1],params[2]);\r\n\t\t\t\tparams[1]=params[2]=0;\r\n\t\t\t}\r\n\t\t\tg.drawTexture(params[0],params[1],params[2],params[3],params[4],m,params[10]);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*/\r\n\t\t__proto._getTextureByUrl=function(url){\r\n\t\t\treturn Loader.getRes(url);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*/\r\n\t\t__proto.setAniData=function(uiView){\r\n\t\t\tif (uiView.animations){\r\n\t\t\t\tthis._nodeDefaultProps={};\r\n\t\t\t\tif (this._nodeList)this._nodeList.length=0;\r\n\t\t\t\tthis._parseNodeList(uiView);\r\n\t\t\t\tvar aniDic={};\r\n\t\t\t\tvar anilist=[];\r\n\t\t\t\tvar animations=uiView.animations;\r\n\t\t\t\tvar i=0,len=animations.length;\r\n\t\t\t\tvar tAniO;\r\n\t\t\t\tfor (i=0;i < len;i++){\r\n\t\t\t\t\ttAniO=animations[i];\r\n\t\t\t\t\tif (!tAniO)continue ;\r\n\t\t\t\t\ttry{\r\n\t\t\t\t\t\tthis._calGraphicData(tAniO);\r\n\t\t\t\t\t\t}catch (e){\r\n\t\t\t\t\t\tconsole.log(\"parse animation fail:\"+tAniO.name+\",empty animation created\");\r\n\t\t\t\t\t\tthis._gList=[];\r\n\t\t\t\t\t};\r\n\t\t\t\t\tvar frameO={};\r\n\t\t\t\t\tframeO.interval=1000 / tAniO[\"frameRate\"];\r\n\t\t\t\t\tframeO.frames=this._gList;\r\n\t\t\t\t\tanilist.push(frameO);\r\n\t\t\t\t\taniDic[tAniO.name]=frameO;\r\n\t\t\t\t}\r\n\t\t\t\tthis.animationList=anilist;\r\n\t\t\t\tthis.animationDic=aniDic;\r\n\t\t\t}\r\n\t\t\tGraphicAnimation._temParam.length=0;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*/\r\n\t\t__proto._clear=function(){\r\n\t\t\tthis.animationList=null;\r\n\t\t\tthis.animationDic=null;\r\n\t\t\tthis._gList=null;\r\n\t\t}\r\n\r\n\t\tGraphicAnimation.parseAnimationData=function(aniData){\r\n\t\t\tif (!GraphicAnimation._I)\r\n\t\t\t\tGraphicAnimation._I=new GraphicAnimation();\r\n\t\t\tGraphicAnimation._I.setAniData(aniData);\r\n\t\t\tvar rst;\r\n\t\t\trst={};\r\n\t\t\trst.animationList=GraphicAnimation._I.animationList;\r\n\t\t\trst.animationDic=GraphicAnimation._I.animationDic;\r\n\t\t\tGraphicAnimation._I._clear();\r\n\t\t\treturn rst;\r\n\t\t}\r\n\r\n\t\tGraphicAnimation._temParam=[];\r\n\t\tGraphicAnimation._I=null\r\n\t\t__static(GraphicAnimation,\r\n\t\t['_drawTextureCmd',function(){return this._drawTextureCmd=[[\"skin\",null],[\"x\",0],[\"y\",0],[\"width\",0],[\"height\",0],[\"pivotX\",0],[\"pivotY\",0],[\"scaleX\",1],[\"scaleY\",1],[\"rotation\",0],[\"alpha\",1]];}\r\n\t\t]);\r\n\t\treturn GraphicAnimation;\r\n\t})(FrameAnimation)\r\n\r\n\r\n\t/**\r\n\t*关键帧动画播放类\r\n\t*\r\n\t*/\r\n\t//class laya.ui.FrameClip extends laya.display.FrameAnimation\r\n\tvar FrameClip=(function(_super){\r\n\t\t/**\r\n\t\t*创建一个 <code>FrameClip</code> 实例。\r\n\t\t*/\r\n\t\tfunction FrameClip(){\r\n\t\t\tFrameClip.__super.call(this);\r\n\t\t}\r\n\r\n\t\t__class(FrameClip,'laya.ui.FrameClip',_super);\r\n\t\treturn FrameClip;\r\n\t})(FrameAnimation)\r\n\r\n\r\n\t//class laya.webgl.resource.WebGLImage extends laya.resource.HTMLImage\r\n\tvar WebGLImage=(function(_super){\r\n\t\tfunction WebGLImage(src,def){\r\n\t\t\tthis._image=null;\r\n\t\t\tthis._imageDatas=null;\r\n\t\t\tthis._allowMerageInAtlas=false;\r\n\t\t\tthis._enableMerageInAtlas=false;\r\n\t\t\tthis.repeat=false;\r\n\t\t\tthis.mipmap=false;\r\n\t\t\tthis.minFifter=0;\r\n\t\t\tthis.magFifter=0;\r\n\t\t\tWebGLImage.__super.call(this,src,def);\r\n\t\t\tthis.repeat=false;\r\n\t\t\tthis.mipmap=false;\r\n\t\t\tthis.minFifter=-1;\r\n\t\t\tthis.magFifter=-1;\r\n\t\t\tthis._src=src;\r\n\t\t\tthis._image=new Browser.window.Image();\r\n\t\t\tif (def){\r\n\t\t\t\tdef.onload && (this.onload=def.onload);\r\n\t\t\t\tdef.onerror && (this.onerror=def.onerror);\r\n\t\t\t\tdef.onCreate && def.onCreate(this);\r\n\t\t\t}\r\n\t\t\tthis._image.crossOrigin=(src && (src.indexOf(\"data:\")==0))? null :\"\";\r\n\t\t\t(src)&& (this._image.src=src);\r\n\t\t\tthis._enableMerageInAtlas=true;\r\n\t\t}\r\n\r\n\t\t__class(WebGLImage,'laya.webgl.resource.WebGLImage',_super);\r\n\t\tvar __proto=WebGLImage.prototype;\r\n\t\tLaya.imps(__proto,{\"laya.webgl.resource.IMergeAtlasBitmap\":true})\r\n\t\t__proto._init_=function(src,def){}\r\n\t\t__proto._createWebGlTexture=function(){\r\n\t\t\tif (!this._image && !this._imageDatas){\r\n\t\t\t\tthrow \"create GLTextur err:no data:\"+this._image;\r\n\t\t\t};\r\n\t\t\tvar gl=WebGL.mainContext;\r\n\t\t\tvar glTex=this._source=gl.createTexture();\r\n\t\t\tvar preTarget=WebGLContext.curBindTexTarget;\r\n\t\t\tvar preTexture=WebGLContext.curBindTexValue;\r\n\t\t\tWebGLContext.bindTexture(gl,0x0DE1,glTex);\r\n\t\t\tif (this._imageDatas)\r\n\t\t\t\tgl.texImage2D(0x0DE1,0,0x1908,this._w,this._h,0,0x1908,0x1401,this._imageDatas);\r\n\t\t\telse\r\n\t\t\tgl.texImage2D(0x0DE1,0,0x1908,0x1908,0x1401,this._image);\r\n\t\t\tvar minFifter=this.minFifter;\r\n\t\t\tvar magFifter=this.magFifter;\r\n\t\t\tvar repeat=this.repeat ? 0x2901 :0x812F;\r\n\t\t\tvar isPot=Arith.isPOT(this._w,this._h);\r\n\t\t\tif (isPot){\r\n\t\t\t\tif (this.mipmap)\r\n\t\t\t\t\t(minFifter!==-1)|| (minFifter=0x2703);\r\n\t\t\t\telse\r\n\t\t\t\t(minFifter!==-1)|| (minFifter=0x2601);\r\n\t\t\t\t(magFifter!==-1)|| (magFifter=0x2601);\r\n\t\t\t\tgl.texParameteri(0x0DE1,0x2801,minFifter);\r\n\t\t\t\tgl.texParameteri(0x0DE1,0x2800,magFifter);\r\n\t\t\t\tgl.texParameteri(0x0DE1,0x2802,repeat);\r\n\t\t\t\tgl.texParameteri(0x0DE1,0x2803,repeat);\r\n\t\t\t\tthis.mipmap && gl.generateMipmap(0x0DE1);\r\n\t\t\t\t}else {\r\n\t\t\t\t(minFifter!==-1)|| (minFifter=0x2601);\r\n\t\t\t\t(magFifter!==-1)|| (magFifter=0x2601);\r\n\t\t\t\tgl.texParameteri(0x0DE1,0x2801,minFifter);\r\n\t\t\t\tgl.texParameteri(0x0DE1,0x2800,magFifter);\r\n\t\t\t\tgl.texParameteri(0x0DE1,0x2802,0x812F);\r\n\t\t\t\tgl.texParameteri(0x0DE1,0x2803,0x812F);\r\n\t\t\t}\r\n\t\t\t(preTarget && preTexture)&& (WebGLContext.bindTexture(gl,preTarget,preTexture));\r\n\t\t\t(this._image)&& (this._image.onload=null);\r\n\t\t\tthis._image=null;\r\n\t\t\tthis._imageDatas=null;\r\n\t\t\tif (isPot)\r\n\t\t\t\tthis.memorySize=this._w *this._h *4 *(1+1 / 3);\r\n\t\t\telse\r\n\t\t\tthis.memorySize=this._w *this._h *4;\r\n\t\t\tthis._recreateLock=false;\r\n\t\t}\r\n\r\n\t\t/***重新创建资源，如果异步创建中被强制释放再创建，则需等待释放完成后再重新加载创建。*/\r\n\t\t__proto.recreateResource=function(){\r\n\t\t\tvar _$this=this;\r\n\t\t\tif (this._src==null || this._src===\"\")\r\n\t\t\t\treturn;\r\n\t\t\tthis._needReleaseAgain=false;\r\n\t\t\tif (!this._image && !this._imageDatas){\r\n\t\t\t\tthis._recreateLock=true;\r\n\t\t\t\tthis.startCreate();\r\n\t\t\t\tvar _this=this;\r\n\t\t\t\tthis._image=new Browser.window.Image();\r\n\t\t\t\tthis._image.crossOrigin=this._src.indexOf(\"data:\")==0 ? null :\"\";\r\n\t\t\t\tthis._image.onload=function (){\r\n\t\t\t\t\tif (_this._needReleaseAgain){\r\n\t\t\t\t\t\t_this._needReleaseAgain=false;\r\n\t\t\t\t\t\t_this._image.onload=null;\r\n\t\t\t\t\t\t_this._image=null;\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t(!(_this._allowMerageInAtlas && _this._enableMerageInAtlas))? (_this._createWebGlTexture()):(_$this.memorySize=0,_$this._recreateLock=false);\r\n\t\t\t\t\t_this.completeCreate();\r\n\t\t\t\t};\r\n\t\t\t\tthis._image.src=this._src;\r\n\t\t\t\t}else {\r\n\t\t\t\tif (this._recreateLock){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis.startCreate();\r\n\t\t\t\t(!(this._allowMerageInAtlas && this._enableMerageInAtlas))? (this._createWebGlTexture()):(this.memorySize=0,this._recreateLock=false);\r\n\t\t\t\tthis.completeCreate();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/***销毁资源*/\r\n\t\t__proto.detoryResource=function(){\r\n\t\t\tif (this._recreateLock){\r\n\t\t\t\tthis._needReleaseAgain=true;\r\n\t\t\t}\r\n\t\t\tif (this._source){\r\n\t\t\t\tWebGL.mainContext.deleteTexture(this._source);\r\n\t\t\t\tthis._source=null;\r\n\t\t\t\tthis._image=null;\r\n\t\t\t\tthis.memorySize=0;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/***调整尺寸*/\r\n\t\t__proto.onresize=function(){\r\n\t\t\tthis._w=this._image.width;\r\n\t\t\tthis._h=this._image.height;\r\n\t\t\t(AtlasResourceManager.enabled)&& (this._w < AtlasResourceManager.atlasLimitWidth && this._h < AtlasResourceManager.atlasLimitHeight)? this._allowMerageInAtlas=true :this._allowMerageInAtlas=false;\r\n\t\t\tif (!this._allowMerageInAtlas){\r\n\t\t\t\tBrowser.canvas.size(this._w,this._h);\r\n\t\t\t\tBrowser.canvas.clear();\r\n\t\t\t\tBrowser.context.drawImage(this._image,0,0,this._w,this._h);\r\n\t\t\t\tthis._imageDatas=new Uint8Array(Browser.context.getImageData(0,0,this._w,this._h).data.buffer);\r\n\t\t\t\tthis._image=null;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__proto.clearAtlasSource=function(){\r\n\t\t\tthis._image=null;\r\n\t\t}\r\n\r\n\t\t/***\r\n\t\t*设置onerror函数\r\n\t\t*@param value onerror函数\r\n\t\t*/\r\n\t\t__getset(0,__proto,'onerror',null,function(value){\r\n\t\t\tvar _$this=this;\r\n\t\t\tthis._onerror=value;\r\n\t\t\tthis._image && (this._image.onerror=this._onerror !=null ? (function(){\r\n\t\t\t\t_$this._onerror()\r\n\t\t\t}):null);\r\n\t\t});\r\n\r\n\t\t__getset(0,__proto,'atlasSource',function(){\r\n\t\t\treturn this._image;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*是否创建私有Source,通常禁止修改\r\n\t\t*@param value 是否创建\r\n\t\t*/\r\n\t\t/**\r\n\t\t*是否创建私有Source\r\n\t\t*@return 是否创建\r\n\t\t*/\r\n\t\t__getset(0,__proto,'enableMerageInAtlas',function(){\r\n\t\t\treturn this._enableMerageInAtlas;\r\n\t\t\t},function(value){\r\n\t\t\tthis._enableMerageInAtlas=value;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*是否创建私有Source\r\n\t\t*@return 是否创建\r\n\t\t*/\r\n\t\t__getset(0,__proto,'allowMerageInAtlas',function(){\r\n\t\t\treturn this._allowMerageInAtlas;\r\n\t\t});\r\n\r\n\t\t/***\r\n\t\t*设置onload函数\r\n\t\t*@param value onload函数\r\n\t\t*/\r\n\t\t__getset(0,__proto,'onload',null,function(value){\r\n\t\t\tvar _$this=this;\r\n\t\t\tthis._onload=value;\r\n\t\t\tthis._image && (this._image.onload=this._onload !=null ? (function(){\r\n\t\t\t\t_$this.onresize();\r\n\t\t\t\t_$this._onload();\r\n\t\t\t}):null);\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*返回HTML Image,as3无internal货friend，通常禁止开发者修改image内的任何属性\r\n\t\t*@param HTML Image\r\n\t\t*/\r\n\t\t__getset(0,__proto,'image',function(){\r\n\t\t\treturn this._image;\r\n\t\t});\r\n\r\n\t\treturn WebGLImage;\r\n\t})(HTMLImage)\r\n\r\n\r\n\t//class ui.test.GameTableUI extends laya.ui.View\r\n\tvar GameTableUI=(function(_super){\r\n\t\tfunction GameTableUI(){\r\n\t\t\tthis.bg=null;\r\n\t\t\tthis.bgImage=null;\r\n\t\t\tthis.roomCheckId=null;\r\n\t\t\tthis.logo=null;\r\n\t\t\tthis.leftGameNums=null;\r\n\t\t\tthis.heads=null;\r\n\t\t\tthis.userHead3=null;\r\n\t\t\tthis.userHeadMask3=null;\r\n\t\t\tthis.userHeadIconOut3=null;\r\n\t\t\tthis.userHeadIcon3=null;\r\n\t\t\tthis.userHeadOffline3=null;\r\n\t\t\tthis.userId3=null;\r\n\t\t\tthis.goldBg3=null;\r\n\t\t\tthis.goldIcon3=null;\r\n\t\t\tthis.gold3=null;\r\n\t\t\tthis.userName3=null;\r\n\t\t\tthis.zhuang3=null;\r\n\t\t\tthis.userHead0=null;\r\n\t\t\tthis.userHeadMask0=null;\r\n\t\t\tthis.userHeadIconOut0=null;\r\n\t\t\tthis.userHeadIcon0=null;\r\n\t\t\tthis.userHeadOffline0=null;\r\n\t\t\tthis.userId0=null;\r\n\t\t\tthis.goldBg0=null;\r\n\t\t\tthis.goldIcon0=null;\r\n\t\t\tthis.gold0=null;\r\n\t\t\tthis.userName0=null;\r\n\t\t\tthis.zhuang0=null;\r\n\t\t\tthis.userHead2=null;\r\n\t\t\tthis.userHeadMask2=null;\r\n\t\t\tthis.userHeadIconOut2=null;\r\n\t\t\tthis.userHeadIcon2=null;\r\n\t\t\tthis.userHeadOffline2=null;\r\n\t\t\tthis.userId2=null;\r\n\t\t\tthis.goldBg2=null;\r\n\t\t\tthis.goldIcon2=null;\r\n\t\t\tthis.gold2=null;\r\n\t\t\tthis.userName2=null;\r\n\t\t\tthis.zhuang2=null;\r\n\t\t\tthis.sbSourceBian0=null;\r\n\t\t\tthis.sbSourceBian1=null;\r\n\t\t\tthis.userHead1=null;\r\n\t\t\tthis.userHeadMask1=null;\r\n\t\t\tthis.userHeadIconOut1=null;\r\n\t\t\tthis.userHeadIcon1=null;\r\n\t\t\tthis.userHeadOffline1=null;\r\n\t\t\tthis.userId1=null;\r\n\t\t\tthis.goldBg1=null;\r\n\t\t\tthis.goldIcon1=null;\r\n\t\t\tthis.gold1=null;\r\n\t\t\tthis.userName1=null;\r\n\t\t\tthis.zhuang1=null;\r\n\t\t\tthis.buttons=null;\r\n\t\t\tthis.settingBtn=null;\r\n\t\t\tthis.gameInfoBtn=null;\r\n\t\t\tthis.gameSprite=null;\r\n\t\t\tthis.turntable=null;\r\n\t\t\tthis.turntableCenter=null;\r\n\t\t\tthis.turntable1=null;\r\n\t\t\tthis.turntable2=null;\r\n\t\t\tthis.turntable3=null;\r\n\t\t\tthis.turntable0=null;\r\n\t\t\tthis.turntableNum1=null;\r\n\t\t\tthis.turntableNum0=null;\r\n\t\t\tthis.freePayLength=null;\r\n\t\t\tthis.juName=null;\r\n\t\t\tthis.bianType=null;\r\n\t\t\tthis.shouPai0=null;\r\n\t\t\tthis.chi0=null;\r\n\t\t\tthis.anGangHide0=null;\r\n\t\t\tthis.anGang0=null;\r\n\t\t\tthis.mingGang0=null;\r\n\t\t\tthis.shou0=null;\r\n\t\t\tthis.fa0=null;\r\n\t\t\tthis.shouPai1=null;\r\n\t\t\tthis.chi1=null;\r\n\t\t\tthis.anGang1=null;\r\n\t\t\tthis.anGangHide1=null;\r\n\t\t\tthis.mingGang1=null;\r\n\t\t\tthis.shou1=null;\r\n\t\t\tthis.fa1=null;\r\n\t\t\tthis.shouPai2=null;\r\n\t\t\tthis.chi2=null;\r\n\t\t\tthis.anGangHide2=null;\r\n\t\t\tthis.anGang2=null;\r\n\t\t\tthis.mingGang2=null;\r\n\t\t\tthis.shou2=null;\r\n\t\t\tthis.fa2=null;\r\n\t\t\tthis.out0=null;\r\n\t\t\tthis.outPai2=null;\r\n\t\t\tthis.out3=null;\r\n\t\t\tthis.outPai3=null;\r\n\t\t\tthis.out2=null;\r\n\t\t\tthis.outPai0=null;\r\n\t\t\tthis.out1=null;\r\n\t\t\tthis.outPai1=null;\r\n\t\t\tthis.shouPai3=null;\r\n\t\t\tthis.chi3=null;\r\n\t\t\tthis.anGangHide3=null;\r\n\t\t\tthis.mingGang3=null;\r\n\t\t\tthis.anGang3=null;\r\n\t\t\tthis.shou3=null;\r\n\t\t\tthis.fa3=null;\r\n\t\t\tthis.tingPaiSprite=null;\r\n\t\t\tthis.tingPaiBg=null;\r\n\t\t\tthis.tingPaiPaiSprite=null;\r\n\t\t\tthis.tingPaiPai=null;\r\n\t\t\tthis.waitSprite=null;\r\n\t\t\tthis.inviteBtn=null;\r\n\t\t\tthis.delRoomBtn=null;\r\n\t\t\tthis.isAutoStart=null;\r\n\t\t\tthis.movieSprite=null;\r\n\t\t\tthis.outPaiMovie3=null;\r\n\t\t\tthis.outPaiMovie2=null;\r\n\t\t\tthis.outPaiMovie1=null;\r\n\t\t\tthis.outPaiMovie0=null;\r\n\t\t\tthis.bianMove=null;\r\n\t\t\tthis.sourcePai=null;\r\n\t\t\tthis.sourceBian0=null;\r\n\t\t\tthis.sourceBian1=null;\r\n\t\t\tGameTableUI.__super.call(this);\r\n\t\t}\r\n\r\n\t\t__class(GameTableUI,'ui.test.GameTableUI',_super);\r\n\t\tvar __proto=GameTableUI.prototype;\r\n\t\t__proto.createChildren=function(){\r\n\t\t\tView.regComponent(\"Text\",Text);\r\n\t\t\tlaya.ui.Component.prototype.createChildren.call(this);\r\n\t\t\tthis.createView(GameTableUI.uiView);\r\n\t\t}\r\n\r\n\t\t__static(GameTableUI,\r\n\t\t['uiView',function(){return this.uiView={\"type\":\"View\",\"props\":{\"width\":1920,\"text\":\"剩余：7盘\",\"sizeGrid\":\"70,70,70,70,1\",\"height\":1080},\"child\":[{\"type\":\"Sprite\",\"props\":{\"y\":0,\"x\":0,\"width\":1920,\"var\":\"bg\",\"height\":1080},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"width\":1920,\"var\":\"bgImage\",\"skin\":\"ui/game/bg.png\",\"sizeGrid\":\"150,150,150,150,1\",\"height\":1080}},{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"width\":327,\"skin\":\"ui/game/room_info_bg.png\",\"scaleY\":1.2,\"scaleX\":1.2,\"height\":83},\"child\":[{\"type\":\"Label\",\"props\":{\"y\":13,\"x\":5,\"width\":304,\"var\":\"roomCheckId\",\"text\":\"房间号: 0000000\",\"height\":39,\"fontSize\":38,\"color\":\"#ffffff\",\"align\":\"center\"}}]},{\"type\":\"Image\",\"props\":{\"y\":147,\"x\":426.5,\"width\":1067,\"var\":\"logo\",\"skin\":\"ui/game/game_name.png\",\"height\":786,\"alpha\":0.5}},{\"type\":\"Label\",\"props\":{\"y\":92.4,\"x\":4.799999999999993,\"width\":164,\"var\":\"leftGameNums\",\"text\":\"剩余：7盘\",\"height\":42,\"fontSize\":34,\"color\":\"#ffffff\",\"align\":\"center\"}}]},{\"type\":\"Sprite\",\"props\":{\"y\":0,\"x\":3,\"var\":\"heads\"},\"child\":[{\"type\":\"Sprite\",\"props\":{\"y\":589,\"x\":0,\"width\":153,\"var\":\"userHead3\",\"scaleY\":1.3,\"scaleX\":1.3,\"height\":217},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":57,\"x\":7,\"width\":133,\"skin\":\"ui/game/user_head_bg.png\",\"height\":133,\"sizeGrid\":\"60,60,60,60\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"width\":133,\"var\":\"userHeadMask3\",\"skin\":\"ui/game/user_head_mask.png\",\"height\":133,\"sizeGrid\":\"60,60,60,60\"}},{\"type\":\"Sprite\",\"props\":{\"y\":0,\"x\":0,\"width\":133,\"var\":\"userHeadIconOut3\",\"height\":133},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":4,\"x\":6.999999999999886,\"width\":119,\"var\":\"userHeadIcon3\",\"skin\":\"ui/game/user_head_default.png\",\"pivotY\":0,\"pivotX\":0,\"height\":115}},{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"var\":\"userHeadOffline3\",\"skin\":\"ui/game/user_head_offline.png\"}}]}]},{\"type\":\"Text\",\"props\":{\"y\":32,\"x\":7,\"width\":127,\"var\":\"userId3\",\"text\":\"ID:7777777\",\"height\":19,\"fontSize\":20,\"color\":\"#f8f8f8\",\"align\":\"center\"}},{\"type\":\"Image\",\"props\":{\"y\":185,\"x\":-5,\"width\":193,\"var\":\"goldBg3\",\"skin\":\"ui/game/gold_bg.png\",\"sizeGrid\":\"18,19,19,29\",\"scaleY\":0.8,\"scaleX\":0.8,\"height\":38},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":-1,\"x\":1,\"var\":\"goldIcon3\",\"skin\":\"ui/game/icon_gold.png\"}},{\"type\":\"Text\",\"props\":{\"y\":4,\"x\":42,\"width\":140,\"var\":\"gold3\",\"text\":888888,\"height\":35,\"fontSize\":28,\"color\":\"#ffcc01\",\"align\":\"center\"}}]},{\"type\":\"Text\",\"props\":{\"y\":0,\"x\":-2,\"width\":147,\"var\":\"userName3\",\"text\":\"用户名称\",\"height\":31,\"fontSize\":28,\"color\":\"#ffcc01\",\"align\":\"center\"}},{\"type\":\"Image\",\"props\":{\"y\":39,\"x\":-7,\"var\":\"zhuang3\",\"skin\":\"ui/game/zhangjia.png\"}}]},{\"type\":\"Sprite\",\"props\":{\"y\":261,\"x\":0,\"width\":147,\"var\":\"userHead0\",\"scaleY\":1.3,\"scaleX\":1.3,\"height\":216},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":55,\"x\":7,\"width\":133,\"skin\":\"ui/game/user_head_bg.png\",\"height\":133,\"sizeGrid\":\"60,60,60,60\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"width\":133,\"var\":\"userHeadMask0\",\"skin\":\"ui/game/user_head_mask.png\",\"height\":133,\"sizeGrid\":\"60,60,60,60\"}},{\"type\":\"Sprite\",\"props\":{\"y\":0,\"x\":0,\"width\":133,\"var\":\"userHeadIconOut0\",\"height\":133},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":4,\"x\":7,\"width\":119,\"var\":\"userHeadIcon0\",\"skin\":\"ui/game/user_head_default.png\",\"pivotY\":0,\"pivotX\":0,\"height\":115}},{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"var\":\"userHeadOffline0\",\"skin\":\"ui/game/user_head_offline.png\"}}]}]},{\"type\":\"Text\",\"props\":{\"y\":30,\"x\":8,\"width\":127,\"var\":\"userId0\",\"text\":\"ID:7777777\",\"height\":22,\"fontSize\":20,\"color\":\"#f8f8f8\",\"align\":\"center\"}},{\"type\":\"Image\",\"props\":{\"y\":183,\"x\":-5,\"width\":193,\"var\":\"goldBg0\",\"skin\":\"ui/game/gold_bg.png\",\"sizeGrid\":\"18,19,19,29\",\"scaleY\":0.8,\"scaleX\":0.8,\"height\":38},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":-1,\"x\":1,\"var\":\"goldIcon0\",\"skin\":\"ui/game/icon_gold.png\"}},{\"type\":\"Text\",\"props\":{\"y\":4,\"x\":42,\"width\":140,\"var\":\"gold0\",\"text\":888888,\"height\":35,\"fontSize\":28,\"color\":\"#ffcc01\",\"align\":\"center\"}}]},{\"type\":\"Text\",\"props\":{\"y\":1,\"x\":1,\"width\":142,\"var\":\"userName0\",\"text\":\"用户名称\",\"height\":31,\"fontSize\":28,\"color\":\"#ffcc01\",\"align\":\"center\"}},{\"type\":\"Image\",\"props\":{\"y\":37,\"x\":-7,\"var\":\"zhuang0\",\"skin\":\"ui/game/zhangjia.png\"}}]},{\"type\":\"Sprite\",\"props\":{\"y\":365,\"x\":1693,\"width\":172,\"var\":\"userHead2\",\"scaleY\":1.3,\"scaleX\":1.3,\"height\":220},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":57,\"x\":14,\"width\":133,\"skin\":\"ui/game/user_head_bg.png\",\"height\":133,\"sizeGrid\":\"60,60,60,60\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"width\":133,\"var\":\"userHeadMask2\",\"skin\":\"ui/game/user_head_mask.png\",\"height\":133,\"sizeGrid\":\"60,60,60,60\"}},{\"type\":\"Sprite\",\"props\":{\"y\":0,\"x\":0,\"width\":133,\"var\":\"userHeadIconOut2\",\"height\":133},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":4,\"x\":7,\"width\":119,\"var\":\"userHeadIcon2\",\"skin\":\"ui/game/user_head_default.png\",\"pivotY\":0,\"pivotX\":0,\"height\":115}},{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"var\":\"userHeadOffline2\",\"skin\":\"ui/game/user_head_offline.png\"}}]}]},{\"type\":\"Text\",\"props\":{\"y\":31,\"x\":15,\"width\":127,\"var\":\"userId2\",\"text\":\"ID:7777777\",\"height\":19,\"fontSize\":20,\"color\":\"#f8f8f8\",\"align\":\"center\"}},{\"type\":\"Image\",\"props\":{\"y\":185,\"x\":3,\"width\":193,\"var\":\"goldBg2\",\"skin\":\"ui/game/gold_bg.png\",\"sizeGrid\":\"18,19,19,29\",\"scaleY\":0.8,\"scaleX\":0.8,\"height\":38},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":-1,\"x\":1,\"var\":\"goldIcon2\",\"skin\":\"ui/game/icon_gold.png\"}},{\"type\":\"Text\",\"props\":{\"y\":3,\"x\":42,\"width\":140,\"var\":\"gold2\",\"text\":888888,\"height\":35,\"fontSize\":28,\"color\":\"#ffcc01\",\"align\":\"center\"}}]},{\"type\":\"Text\",\"props\":{\"y\":0,\"x\":9,\"width\":141,\"var\":\"userName2\",\"text\":\"用户名称\",\"height\":31,\"fontSize\":28,\"color\":\"#ffcc01\",\"align\":\"center\"}},{\"type\":\"Image\",\"props\":{\"y\":39,\"x\":0,\"var\":\"zhuang2\",\"skin\":\"ui/game/zhangjia.png\"}},{\"type\":\"Image\",\"props\":{\"y\":228,\"x\":34,\"var\":\"sbSourceBian0\",\"skin\":\"ui/majiang/zheng_bg.png\",\"scaleY\":0.6,\"scaleX\":0.6},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"skin\":\"ui/majiang/zheng_19.png\"}}]},{\"type\":\"Image\",\"props\":{\"y\":228,\"x\":93,\"var\":\"sbSourceBian1\",\"skin\":\"ui/majiang/zheng_bg.png\",\"scaleY\":0.6,\"scaleX\":0.6},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"skin\":\"ui/majiang/zheng_19.png\"}}]}]},{\"type\":\"Sprite\",\"props\":{\"y\":5,\"x\":383,\"width\":169,\"var\":\"userHead1\",\"scaleY\":1.3,\"scaleX\":1.3,\"height\":212},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":56,\"x\":14,\"width\":133,\"skin\":\"ui/game/user_head_bg.png\",\"height\":133,\"sizeGrid\":\"60,60,60,60\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"width\":133,\"var\":\"userHeadMask1\",\"skin\":\"ui/game/user_head_mask.png\",\"height\":133,\"sizeGrid\":\"60,60,60,60\"}},{\"type\":\"Sprite\",\"props\":{\"y\":0,\"x\":0,\"width\":133,\"var\":\"userHeadIconOut1\",\"height\":133},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":4,\"x\":7,\"width\":119,\"var\":\"userHeadIcon1\",\"skin\":\"ui/game/user_head_default.png\",\"pivotY\":0,\"pivotX\":0,\"height\":115}},{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"var\":\"userHeadOffline1\",\"skin\":\"ui/game/user_head_offline.png\"}}]}]},{\"type\":\"Text\",\"props\":{\"y\":29,\"x\":15,\"width\":127,\"var\":\"userId1\",\"text\":\"ID:7777777\",\"height\":19,\"fontSize\":20,\"color\":\"#f8f8f8\",\"align\":\"center\"}},{\"type\":\"Image\",\"props\":{\"y\":184,\"x\":4,\"width\":193,\"var\":\"goldBg1\",\"skin\":\"ui/game/gold_bg.png\",\"sizeGrid\":\"18,19,19,29\",\"scaleY\":0.8,\"scaleX\":0.8,\"height\":38},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":-1,\"x\":1,\"var\":\"goldIcon1\",\"skin\":\"ui/game/icon_gold.png\"}},{\"type\":\"Text\",\"props\":{\"y\":3,\"x\":42,\"width\":140,\"var\":\"gold1\",\"text\":888888,\"height\":35,\"fontSize\":28,\"color\":\"#ffcc01\",\"align\":\"center\"}}]},{\"type\":\"Text\",\"props\":{\"y\":0,\"x\":5,\"width\":146,\"var\":\"userName1\",\"text\":\"用户名称\",\"height\":31,\"fontSize\":28,\"color\":\"#ffcc01\",\"align\":\"center\"}},{\"type\":\"Image\",\"props\":{\"y\":38,\"x\":0,\"var\":\"zhuang1\",\"skin\":\"ui/game/zhangjia.png\"}}]},{\"type\":\"Box\",\"props\":{\"y\":1.9999999999999811,\"x\":1720.9999999999998,\"width\":240,\"var\":\"buttons\",\"scaleY\":0.8,\"scaleX\":0.8,\"height\":150},\"child\":[{\"type\":\"Button\",\"props\":{\"y\":0,\"x\":0,\"width\":120,\"var\":\"settingBtn\",\"stateNum\":\"1\",\"skin\":\"base/shezhi.png\",\"sizeGrid\":\"121,0,0,0\",\"labelSize\":40,\"labelPadding\":\"50,0,0,0\",\"labelColors\":\"#ffffff\",\"label\":\"设置\",\"height\":150}},{\"type\":\"Button\",\"props\":{\"y\":0,\"x\":120,\"width\":120,\"var\":\"gameInfoBtn\",\"stateNum\":\"1\",\"skin\":\"base/history.png\",\"sizeGrid\":\"121,0,0,0\",\"labelSize\":40,\"labelPadding\":\"50,0,0,0\",\"labelColors\":\"#ffffff\",\"label\":\"玩法\",\"height\":150}}]}]},{\"type\":\"Sprite\",\"props\":{\"y\":0,\"x\":0,\"width\":1920,\"var\":\"gameSprite\",\"height\":1080},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":344,\"x\":861,\"width\":130,\"var\":\"turntable\",\"scaleY\":2,\"scaleX\":2,\"height\":130},\"child\":[{\"type\":\"Sprite\",\"props\":{\"y\":0,\"x\":0,\"width\":130,\"var\":\"turntableCenter\",\"height\":130},\"child\":[{\"type\":\"Image\",\"props\":{\"skin\":\"ui/game/frame.png\"}},{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"var\":\"turntable1\",\"skin\":\"ui/game/right.png\"}},{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"var\":\"turntable2\",\"skin\":\"ui/game/up.png\"}},{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"var\":\"turntable3\",\"skin\":\"ui/game/left.png\"}},{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"var\":\"turntable0\",\"skin\":\"ui/game/down.png\"}}]},{\"type\":\"Image\",\"props\":{\"y\":47,\"x\":36,\"width\":30,\"var\":\"turntableNum1\",\"skin\":\"ui/game/0.png\",\"height\":40}},{\"type\":\"Image\",\"props\":{\"y\":47,\"x\":64,\"var\":\"turntableNum0\",\"skin\":\"ui/game/0.png\"}},{\"type\":\"Sprite\",\"props\":{\"y\":112,\"x\":-49,\"scaleY\":0.75,\"scaleX\":0.75},\"child\":[{\"type\":\"Text\",\"props\":{\"y\":21.5,\"x\":143,\"width\":180,\"text\":\"剩余        张\",\"fontSize\":\"32\",\"color\":\"#45d482\",\"align\":\"center\"}},{\"type\":\"Text\",\"props\":{\"y\":21.5,\"x\":207,\"width\":83,\"var\":\"freePayLength\",\"text\":83,\"fontSize\":\"32\",\"color\":\"#ffffff\",\"align\":\"center\"}},{\"type\":\"Text\",\"props\":{\"y\":21.5,\"x\":-31,\"width\":180,\"var\":\"juName\",\"text\":\"东风东局\",\"fontSize\":\"32\",\"color\":\"#45d482\",\"align\":\"center\"}},{\"type\":\"Text\",\"props\":{\"y\":64,\"x\":71.5,\"width\":180,\"var\":\"bianType\",\"text\":\"变化类型\",\"fontSize\":\"32\",\"color\":\"#45d482\",\"align\":\"center\"}}]}]},{\"type\":\"Sprite\",\"props\":{\"y\":93,\"x\":192,\"width\":104,\"var\":\"shouPai0\",\"scaleY\":0.65,\"scaleX\":0.65,\"height\":1102},\"child\":[{\"type\":\"Sprite\",\"props\":{\"y\":0,\"x\":0,\"width\":104,\"var\":\"chi0\",\"height\":212.00000000000006},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"skin\":\"ui/majiang/ce_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":7.105427357601002e-14,\"x\":0,\"skin\":\"ui/majiang/ce_18.png\"}}]},{\"type\":\"Image\",\"props\":{\"y\":60,\"x\":0,\"skin\":\"ui/majiang/ce_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":7.105427357601002e-14,\"x\":0,\"skin\":\"ui/majiang/ce_33.png\"}}]},{\"type\":\"Image\",\"props\":{\"y\":120,\"x\":0,\"skin\":\"ui/majiang/ce_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":7.105427357601002e-14,\"x\":0,\"skin\":\"ui/majiang/ce_18.png\"}}]}]},{\"type\":\"Sprite\",\"props\":{\"y\":412,\"x\":0,\"width\":104,\"var\":\"anGangHide0\",\"height\":207},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"skin\":\"ui/majiang/ce_an.png\"}},{\"type\":\"Image\",\"props\":{\"y\":59,\"x\":0,\"skin\":\"ui/majiang/ce_an.png\"}},{\"type\":\"Image\",\"props\":{\"y\":117,\"x\":0,\"skin\":\"ui/majiang/ce_an.png\"}},{\"type\":\"Image\",\"props\":{\"y\":33,\"x\":0,\"skin\":\"ui/majiang/ce_an.png\"}}]},{\"type\":\"Sprite\",\"props\":{\"y\":208,\"x\":0,\"width\":104,\"var\":\"anGang0\",\"height\":207},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"skin\":\"ui/majiang/ce_an.png\"}},{\"type\":\"Image\",\"props\":{\"y\":59,\"x\":0,\"skin\":\"ui/majiang/ce_an.png\"}},{\"type\":\"Image\",\"props\":{\"y\":117,\"x\":0,\"skin\":\"ui/majiang/ce_an.png\"}},{\"type\":\"Image\",\"props\":{\"y\":32,\"x\":0,\"skin\":\"ui/majiang/ce_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":7.105427357601002e-14,\"x\":0,\"skin\":\"ui/majiang/ce_0.png\"}}]}]},{\"type\":\"Sprite\",\"props\":{\"y\":616,\"x\":0,\"width\":104,\"var\":\"mingGang0\",\"height\":212},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"skin\":\"ui/majiang/ce_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":7.105427357601002e-14,\"x\":0,\"skin\":\"ui/majiang/ce_0.png\"}}]},{\"type\":\"Image\",\"props\":{\"y\":60,\"x\":0,\"skin\":\"ui/majiang/ce_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":7.105427357601002e-14,\"x\":0,\"skin\":\"ui/majiang/ce_0.png\"}}]},{\"type\":\"Image\",\"props\":{\"y\":120,\"x\":0,\"skin\":\"ui/majiang/ce_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":7.105427357601002e-14,\"x\":0,\"skin\":\"ui/majiang/ce_0.png\"}}]},{\"type\":\"Image\",\"props\":{\"y\":33,\"x\":0,\"skin\":\"ui/majiang/ce_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":7.105427357601002e-14,\"x\":0,\"skin\":\"ui/majiang/ce_0.png\"}}]}]},{\"type\":\"Image\",\"props\":{\"y\":828,\"x\":0,\"width\":53,\"var\":\"shou0\",\"skin\":\"ui/majiang/ce_li.png\",\"height\":132}},{\"type\":\"Image\",\"props\":{\"y\":970,\"x\":0,\"width\":53,\"var\":\"fa0\",\"skin\":\"ui/majiang/ce_li.png\",\"height\":132}}]},{\"type\":\"Sprite\",\"props\":{\"y\":0,\"x\":618,\"width\":1227,\"var\":\"shouPai1\",\"scaleY\":0.8,\"scaleX\":0.8,\"height\":194},\"child\":[{\"type\":\"Sprite\",\"props\":{\"y\":72,\"x\":0,\"width\":248,\"var\":\"chi1\",\"height\":128},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"skin\":\"ui/majiang/zheng_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"skin\":\"ui/majiang/zheng_19.png\"}}]},{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":83,\"skin\":\"ui/majiang/zheng_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"skin\":\"ui/majiang/zheng_19.png\"}}]},{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":166,\"skin\":\"ui/majiang/zheng_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"skin\":\"ui/majiang/zheng_19.png\"}}]}]},{\"type\":\"Sprite\",\"props\":{\"y\":72,\"x\":255,\"width\":248,\"var\":\"anGang1\",\"height\":128},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"skin\":\"ui/majiang/zheng_an.png\"}},{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":83,\"skin\":\"ui/majiang/zheng_an.png\"}},{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":166,\"skin\":\"ui/majiang/zheng_an.png\"}},{\"type\":\"Image\",\"props\":{\"y\":-28,\"x\":83,\"skin\":\"ui/majiang/zheng_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"skin\":\"ui/majiang/zheng_19.png\"}}]}]},{\"type\":\"Sprite\",\"props\":{\"y\":73.00000000000004,\"x\":511,\"width\":248,\"var\":\"anGangHide1\",\"height\":128},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"skin\":\"ui/majiang/zheng_an.png\"}},{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":83,\"skin\":\"ui/majiang/zheng_an.png\"}},{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":166,\"skin\":\"ui/majiang/zheng_an.png\"}},{\"type\":\"Image\",\"props\":{\"y\":-29,\"x\":83,\"skin\":\"ui/majiang/zheng_an.png\"}}]},{\"type\":\"Sprite\",\"props\":{\"y\":72,\"x\":766.9999999999998,\"width\":248,\"var\":\"mingGang1\",\"height\":128},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"skin\":\"ui/majiang/zheng_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"skin\":\"ui/majiang/zheng_19.png\"}}]},{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":83,\"skin\":\"ui/majiang/zheng_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"skin\":\"ui/majiang/zheng_19.png\"}}]},{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":166,\"skin\":\"ui/majiang/zheng_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"skin\":\"ui/majiang/zheng_19.png\"}}]},{\"type\":\"Image\",\"props\":{\"y\":-31,\"x\":83,\"skin\":\"ui/majiang/zheng_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"skin\":\"ui/majiang/zheng_19.png\"}}]}]},{\"type\":\"Image\",\"props\":{\"y\":72,\"x\":1028,\"width\":85,\"var\":\"shou1\",\"skin\":\"ui/majiang/zheng_li.png\",\"height\":125}},{\"type\":\"Image\",\"props\":{\"y\":72,\"x\":1142,\"width\":85,\"var\":\"fa1\",\"skin\":\"ui/majiang/zheng_li.png\",\"height\":125}}]},{\"type\":\"Sprite\",\"props\":{\"y\":100,\"x\":1721,\"width\":104,\"var\":\"shouPai2\",\"scaleY\":0.65,\"scaleX\":-0.65,\"height\":1102},\"child\":[{\"type\":\"Sprite\",\"props\":{\"y\":0,\"x\":0,\"width\":104,\"var\":\"chi2\",\"height\":212},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"skin\":\"ui/majiang/ce_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":7.105427357601002e-14,\"x\":0,\"skin\":\"ui/majiang/ce_18.png\"}}]},{\"type\":\"Image\",\"props\":{\"y\":60,\"x\":0,\"skin\":\"ui/majiang/ce_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":7.105427357601002e-14,\"x\":0,\"skin\":\"ui/majiang/ce_33.png\"}}]},{\"type\":\"Image\",\"props\":{\"y\":120,\"x\":0,\"skin\":\"ui/majiang/ce_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":7.105427357601002e-14,\"x\":0,\"skin\":\"ui/majiang/ce_18.png\"}}]}]},{\"type\":\"Sprite\",\"props\":{\"y\":412,\"x\":0,\"width\":104,\"var\":\"anGangHide2\",\"height\":207},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"skin\":\"ui/majiang/ce_an.png\"}},{\"type\":\"Image\",\"props\":{\"y\":59,\"x\":0,\"skin\":\"ui/majiang/ce_an.png\"}},{\"type\":\"Image\",\"props\":{\"y\":117,\"x\":0,\"skin\":\"ui/majiang/ce_an.png\"}},{\"type\":\"Image\",\"props\":{\"y\":33,\"x\":0,\"skin\":\"ui/majiang/ce_an.png\"}}]},{\"type\":\"Sprite\",\"props\":{\"y\":208,\"x\":0,\"width\":104,\"var\":\"anGang2\",\"height\":207},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"skin\":\"ui/majiang/ce_an.png\"}},{\"type\":\"Image\",\"props\":{\"y\":59,\"x\":0,\"skin\":\"ui/majiang/ce_an.png\"}},{\"type\":\"Image\",\"props\":{\"y\":117,\"x\":0,\"skin\":\"ui/majiang/ce_an.png\"}},{\"type\":\"Image\",\"props\":{\"y\":32,\"x\":0,\"skin\":\"ui/majiang/ce_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":7.105427357601002e-14,\"x\":0,\"skin\":\"ui/majiang/ce_0.png\"}}]}]},{\"type\":\"Sprite\",\"props\":{\"y\":616,\"x\":0,\"width\":104,\"var\":\"mingGang2\",\"height\":212},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"skin\":\"ui/majiang/ce_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":7.105427357601002e-14,\"x\":0,\"skin\":\"ui/majiang/ce_0.png\"}}]},{\"type\":\"Image\",\"props\":{\"y\":60,\"x\":0,\"skin\":\"ui/majiang/ce_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":7.105427357601002e-14,\"x\":0,\"skin\":\"ui/majiang/ce_0.png\"}}]},{\"type\":\"Image\",\"props\":{\"y\":120,\"x\":0,\"skin\":\"ui/majiang/ce_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":7.105427357601002e-14,\"x\":0,\"skin\":\"ui/majiang/ce_0.png\"}}]},{\"type\":\"Image\",\"props\":{\"y\":33,\"x\":0,\"skin\":\"ui/majiang/ce_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":7.105427357601002e-14,\"x\":0,\"skin\":\"ui/majiang/ce_0.png\"}}]}]},{\"type\":\"Image\",\"props\":{\"y\":828,\"x\":0,\"width\":53,\"var\":\"shou2\",\"skin\":\"ui/majiang/ce_li.png\",\"height\":132}},{\"type\":\"Image\",\"props\":{\"y\":970,\"x\":0,\"width\":53,\"var\":\"fa2\",\"skin\":\"ui/majiang/ce_li.png\",\"height\":132}}]},{\"type\":\"Sprite\",\"props\":{\"y\":287,\"x\":260,\"width\":177,\"var\":\"out0\",\"height\":477},\"child\":[{\"type\":\"Sprite\",\"props\":{\"y\":0,\"x\":36,\"scaleY\":0.65,\"scaleX\":0.65},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"skin\":\"ui/majiang/ce_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":7.105427357601002e-14,\"x\":0,\"skin\":\"ui/majiang/ce_18.png\"}}]},{\"type\":\"Image\",\"props\":{\"y\":59,\"x\":0,\"skin\":\"ui/majiang/ce_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":7.105427357601002e-14,\"x\":0,\"skin\":\"ui/majiang/ce_18.png\"}}]},{\"type\":\"Image\",\"props\":{\"y\":117,\"x\":0,\"skin\":\"ui/majiang/ce_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":7.105427357601002e-14,\"x\":0,\"skin\":\"ui/majiang/ce_18.png\"}}]},{\"type\":\"Image\",\"props\":{\"y\":175,\"x\":0,\"skin\":\"ui/majiang/ce_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":7.105427357601002e-14,\"x\":0,\"skin\":\"ui/majiang/ce_18.png\"}}]},{\"type\":\"Image\",\"props\":{\"y\":234,\"x\":0,\"skin\":\"ui/majiang/ce_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":7.105427357601002e-14,\"x\":0,\"skin\":\"ui/majiang/ce_18.png\"}}]},{\"type\":\"Image\",\"props\":{\"y\":293,\"x\":0,\"skin\":\"ui/majiang/ce_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":7.105427357601002e-14,\"x\":0,\"skin\":\"ui/majiang/ce_18.png\"}}]},{\"type\":\"Image\",\"props\":{\"y\":351,\"x\":0,\"skin\":\"ui/majiang/ce_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":7.105427357601002e-14,\"x\":0,\"skin\":\"ui/majiang/ce_18.png\"}}]},{\"type\":\"Image\",\"props\":{\"y\":409,\"x\":0,\"skin\":\"ui/majiang/ce_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":7.105427357601002e-14,\"x\":0,\"skin\":\"ui/majiang/ce_18.png\"}}]},{\"type\":\"Image\",\"props\":{\"y\":467,\"x\":0,\"skin\":\"ui/majiang/ce_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":7.105427357601002e-14,\"x\":0,\"skin\":\"ui/majiang/ce_18.png\"}}]},{\"type\":\"Image\",\"props\":{\"y\":526,\"x\":0,\"skin\":\"ui/majiang/ce_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":7.105427357601002e-14,\"x\":0,\"skin\":\"ui/majiang/ce_18.png\"}}]},{\"type\":\"Image\",\"props\":{\"y\":584,\"x\":0,\"skin\":\"ui/majiang/ce_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":7.105427357601002e-14,\"x\":0,\"skin\":\"ui/majiang/ce_18.png\"}}]},{\"type\":\"Image\",\"props\":{\"y\":642,\"x\":0,\"skin\":\"ui/majiang/ce_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":7.105427357601002e-14,\"x\":0,\"skin\":\"ui/majiang/ce_18.png\"}}]},{\"type\":\"Sprite\",\"props\":{}}]},{\"type\":\"Sprite\",\"props\":{\"y\":0,\"x\":106,\"scaleY\":0.65,\"scaleX\":0.65},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"var\":\"outPai2\",\"skin\":\"ui/majiang/ce_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":7.105427357601002e-14,\"x\":0,\"skin\":\"ui/majiang/ce_18.png\"}}]},{\"type\":\"Image\",\"props\":{\"y\":59,\"x\":0,\"skin\":\"ui/majiang/ce_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":7.105427357601002e-14,\"x\":0,\"skin\":\"ui/majiang/ce_18.png\"}}]},{\"type\":\"Image\",\"props\":{\"y\":117,\"x\":0,\"skin\":\"ui/majiang/ce_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":7.105427357601002e-14,\"x\":0,\"skin\":\"ui/majiang/ce_18.png\"}}]},{\"type\":\"Image\",\"props\":{\"y\":175,\"x\":0,\"skin\":\"ui/majiang/ce_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":7.105427357601002e-14,\"x\":0,\"skin\":\"ui/majiang/ce_18.png\"}}]},{\"type\":\"Image\",\"props\":{\"y\":234,\"x\":0,\"skin\":\"ui/majiang/ce_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":7.105427357601002e-14,\"x\":0,\"skin\":\"ui/majiang/ce_18.png\"}}]},{\"type\":\"Image\",\"props\":{\"y\":293,\"x\":0,\"skin\":\"ui/majiang/ce_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":7.105427357601002e-14,\"x\":0,\"skin\":\"ui/majiang/ce_18.png\"}}]},{\"type\":\"Image\",\"props\":{\"y\":351,\"x\":0,\"skin\":\"ui/majiang/ce_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":7.105427357601002e-14,\"x\":0,\"skin\":\"ui/majiang/ce_18.png\"}}]},{\"type\":\"Image\",\"props\":{\"y\":409,\"x\":0,\"skin\":\"ui/majiang/ce_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":7.105427357601002e-14,\"x\":0,\"skin\":\"ui/majiang/ce_18.png\"}}]},{\"type\":\"Image\",\"props\":{\"y\":467,\"x\":0,\"skin\":\"ui/majiang/ce_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":7.105427357601002e-14,\"x\":0,\"skin\":\"ui/majiang/ce_18.png\"}}]},{\"type\":\"Image\",\"props\":{\"y\":526,\"x\":0,\"skin\":\"ui/majiang/ce_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":7.105427357601002e-14,\"x\":0,\"skin\":\"ui/majiang/ce_18.png\"}}]},{\"type\":\"Image\",\"props\":{\"y\":584,\"x\":0,\"skin\":\"ui/majiang/ce_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":7.105427357601002e-14,\"x\":0,\"skin\":\"ui/majiang/ce_18.png\"}}]},{\"type\":\"Image\",\"props\":{\"y\":642,\"x\":0,\"skin\":\"ui/majiang/ce_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":7.105427357601002e-14,\"x\":0,\"skin\":\"ui/majiang/ce_18.png\"}}]},{\"type\":\"Sprite\",\"props\":{}}]}]},{\"type\":\"Sprite\",\"props\":{\"y\":650,\"x\":607.5,\"width\":705,\"var\":\"out3\",\"height\":185},\"child\":[{\"type\":\"Sprite\",\"props\":{\"y\":0,\"x\":0,\"scaleY\":0.7,\"scaleX\":0.7},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":169,\"skin\":\"ui/majiang/zheng_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"skin\":\"ui/majiang/zheng_19.png\"}}]},{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":85,\"skin\":\"ui/majiang/zheng_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"skin\":\"ui/majiang/zheng_19.png\"}}]},{\"type\":\"Image\",\"props\":{\"y\":-8.12048840868686e-14,\"x\":0.9999999999999797,\"var\":\"outPai3\",\"skin\":\"ui/majiang/zheng_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"skin\":\"ui/majiang/zheng_19.png\"}}]},{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":421,\"skin\":\"ui/majiang/zheng_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"skin\":\"ui/majiang/zheng_19.png\"}}]},{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":337,\"skin\":\"ui/majiang/zheng_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"skin\":\"ui/majiang/zheng_19.png\"}}]},{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":253,\"skin\":\"ui/majiang/zheng_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"skin\":\"ui/majiang/zheng_19.png\"}}]},{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":673,\"skin\":\"ui/majiang/zheng_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"skin\":\"ui/majiang/zheng_19.png\"}}]},{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":589,\"skin\":\"ui/majiang/zheng_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"skin\":\"ui/majiang/zheng_19.png\"}}]},{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":505,\"skin\":\"ui/majiang/zheng_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"skin\":\"ui/majiang/zheng_19.png\"}}]},{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":925,\"skin\":\"ui/majiang/zheng_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"skin\":\"ui/majiang/zheng_19.png\"}}]},{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":841,\"skin\":\"ui/majiang/zheng_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"skin\":\"ui/majiang/zheng_19.png\"}}]},{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":757,\"skin\":\"ui/majiang/zheng_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"skin\":\"ui/majiang/zheng_19.png\"}}]}]},{\"type\":\"Sprite\",\"props\":{\"y\":71,\"x\":0,\"scaleY\":0.7,\"scaleX\":0.7},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":169,\"skin\":\"ui/majiang/zheng_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"skin\":\"ui/majiang/zheng_19.png\"}}]},{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":85,\"skin\":\"ui/majiang/zheng_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"skin\":\"ui/majiang/zheng_19.png\"}}]},{\"type\":\"Image\",\"props\":{\"y\":-8.12048840868686e-14,\"x\":0.9999999999999797,\"skin\":\"ui/majiang/zheng_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"skin\":\"ui/majiang/zheng_19.png\"}}]},{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":421,\"skin\":\"ui/majiang/zheng_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"skin\":\"ui/majiang/zheng_19.png\"}}]},{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":337,\"skin\":\"ui/majiang/zheng_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"skin\":\"ui/majiang/zheng_19.png\"}}]},{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":253,\"skin\":\"ui/majiang/zheng_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"skin\":\"ui/majiang/zheng_19.png\"}}]},{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":673,\"skin\":\"ui/majiang/zheng_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"skin\":\"ui/majiang/zheng_19.png\"}}]},{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":589,\"skin\":\"ui/majiang/zheng_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"skin\":\"ui/majiang/zheng_19.png\"}}]},{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":505,\"skin\":\"ui/majiang/zheng_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"skin\":\"ui/majiang/zheng_19.png\"}}]},{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":925,\"skin\":\"ui/majiang/zheng_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"skin\":\"ui/majiang/zheng_19.png\"}}]},{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":841,\"skin\":\"ui/majiang/zheng_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"skin\":\"ui/majiang/zheng_19.png\"}}]},{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":757,\"skin\":\"ui/majiang/zheng_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"skin\":\"ui/majiang/zheng_19.png\"}}]}]}]},{\"type\":\"Sprite\",\"props\":{\"y\":262,\"x\":1653,\"width\":176,\"var\":\"out2\",\"scaleX\":-1,\"height\":477},\"child\":[{\"type\":\"Sprite\",\"props\":{\"y\":0,\"x\":38,\"scaleY\":0.65,\"scaleX\":0.65},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"skin\":\"ui/majiang/ce_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":7.105427357601002e-14,\"x\":0,\"skin\":\"ui/majiang/ce_18.png\"}}]},{\"type\":\"Image\",\"props\":{\"y\":59,\"x\":0,\"skin\":\"ui/majiang/ce_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":7.105427357601002e-14,\"x\":0,\"skin\":\"ui/majiang/ce_18.png\"}}]},{\"type\":\"Image\",\"props\":{\"y\":117,\"x\":0,\"skin\":\"ui/majiang/ce_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":7.105427357601002e-14,\"x\":0,\"skin\":\"ui/majiang/ce_18.png\"}}]},{\"type\":\"Image\",\"props\":{\"y\":175,\"x\":0,\"skin\":\"ui/majiang/ce_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":7.105427357601002e-14,\"x\":0,\"skin\":\"ui/majiang/ce_18.png\"}}]},{\"type\":\"Image\",\"props\":{\"y\":234,\"x\":0,\"skin\":\"ui/majiang/ce_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":7.105427357601002e-14,\"x\":0,\"skin\":\"ui/majiang/ce_18.png\"}}]},{\"type\":\"Image\",\"props\":{\"y\":293,\"x\":0,\"skin\":\"ui/majiang/ce_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":7.105427357601002e-14,\"x\":0,\"skin\":\"ui/majiang/ce_18.png\"}}]},{\"type\":\"Image\",\"props\":{\"y\":351,\"x\":0,\"skin\":\"ui/majiang/ce_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":7.105427357601002e-14,\"x\":0,\"skin\":\"ui/majiang/ce_18.png\"}}]},{\"type\":\"Image\",\"props\":{\"y\":409,\"x\":0,\"skin\":\"ui/majiang/ce_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":7.105427357601002e-14,\"x\":0,\"skin\":\"ui/majiang/ce_18.png\"}}]},{\"type\":\"Image\",\"props\":{\"y\":467,\"x\":0,\"skin\":\"ui/majiang/ce_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":7.105427357601002e-14,\"x\":0,\"skin\":\"ui/majiang/ce_18.png\"}}]},{\"type\":\"Image\",\"props\":{\"y\":526,\"x\":0,\"skin\":\"ui/majiang/ce_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":7.105427357601002e-14,\"x\":0,\"skin\":\"ui/majiang/ce_18.png\"}}]},{\"type\":\"Image\",\"props\":{\"y\":584,\"x\":0,\"skin\":\"ui/majiang/ce_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":7.105427357601002e-14,\"x\":0,\"skin\":\"ui/majiang/ce_18.png\"}}]},{\"type\":\"Image\",\"props\":{\"y\":642,\"x\":0,\"skin\":\"ui/majiang/ce_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":7.105427357601002e-14,\"x\":0,\"skin\":\"ui/majiang/ce_18.png\"}}]},{\"type\":\"Sprite\",\"props\":{}}]},{\"type\":\"Sprite\",\"props\":{\"y\":0,\"x\":108,\"scaleY\":0.65,\"scaleX\":0.65},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"skin\":\"ui/majiang/ce_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":7.105427357601002e-14,\"x\":0,\"skin\":\"ui/majiang/ce_18.png\"}}]},{\"type\":\"Image\",\"props\":{\"y\":59,\"x\":0,\"skin\":\"ui/majiang/ce_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":7.105427357601002e-14,\"x\":0,\"skin\":\"ui/majiang/ce_18.png\"}}]},{\"type\":\"Image\",\"props\":{\"y\":117,\"x\":0,\"skin\":\"ui/majiang/ce_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":7.105427357601002e-14,\"x\":0,\"skin\":\"ui/majiang/ce_18.png\"}}]},{\"type\":\"Image\",\"props\":{\"y\":175,\"x\":0,\"skin\":\"ui/majiang/ce_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":7.105427357601002e-14,\"x\":0,\"skin\":\"ui/majiang/ce_18.png\"}}]},{\"type\":\"Image\",\"props\":{\"y\":234,\"x\":0,\"skin\":\"ui/majiang/ce_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":7.105427357601002e-14,\"x\":0,\"skin\":\"ui/majiang/ce_18.png\"}}]},{\"type\":\"Image\",\"props\":{\"y\":293,\"x\":0,\"skin\":\"ui/majiang/ce_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":7.105427357601002e-14,\"x\":0,\"skin\":\"ui/majiang/ce_18.png\"}}]},{\"type\":\"Image\",\"props\":{\"y\":351,\"x\":0,\"skin\":\"ui/majiang/ce_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":7.105427357601002e-14,\"x\":0,\"skin\":\"ui/majiang/ce_18.png\"}}]},{\"type\":\"Image\",\"props\":{\"y\":409,\"x\":0,\"skin\":\"ui/majiang/ce_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":7.105427357601002e-14,\"x\":0,\"skin\":\"ui/majiang/ce_18.png\"}}]},{\"type\":\"Image\",\"props\":{\"y\":467,\"x\":0,\"skin\":\"ui/majiang/ce_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":7.105427357601002e-14,\"x\":0,\"skin\":\"ui/majiang/ce_18.png\"}}]},{\"type\":\"Image\",\"props\":{\"y\":526,\"x\":0,\"skin\":\"ui/majiang/ce_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":7.105427357601002e-14,\"x\":0,\"skin\":\"ui/majiang/ce_18.png\"}}]},{\"type\":\"Image\",\"props\":{\"y\":584,\"x\":0,\"skin\":\"ui/majiang/ce_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":7.105427357601002e-14,\"x\":0,\"skin\":\"ui/majiang/ce_18.png\"}}]},{\"type\":\"Image\",\"props\":{\"y\":642,\"x\":0,\"var\":\"outPai0\",\"skin\":\"ui/majiang/ce_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":7.105427357601002e-14,\"x\":0,\"skin\":\"ui/majiang/ce_18.png\"}}]},{\"type\":\"Sprite\",\"props\":{}}]}]},{\"type\":\"Sprite\",\"props\":{\"y\":176,\"x\":607.55,\"width\":704.9,\"var\":\"out1\",\"height\":189.6},\"child\":[{\"type\":\"Sprite\",\"props\":{\"y\":28,\"x\":0,\"scaleY\":0.7,\"scaleX\":0.7},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":169,\"skin\":\"ui/majiang/zheng_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"skin\":\"ui/majiang/zheng_19.png\"}}]},{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":85,\"skin\":\"ui/majiang/zheng_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"skin\":\"ui/majiang/zheng_19.png\"}}]},{\"type\":\"Image\",\"props\":{\"y\":-8.12048840868686e-14,\"x\":0.9999999999999797,\"var\":\"outPai1\",\"skin\":\"ui/majiang/zheng_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"skin\":\"ui/majiang/zheng_19.png\"}}]},{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":421,\"skin\":\"ui/majiang/zheng_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"skin\":\"ui/majiang/zheng_19.png\"}}]},{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":337,\"skin\":\"ui/majiang/zheng_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"skin\":\"ui/majiang/zheng_19.png\"}}]},{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":253,\"skin\":\"ui/majiang/zheng_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"skin\":\"ui/majiang/zheng_19.png\"}}]},{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":673,\"skin\":\"ui/majiang/zheng_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"skin\":\"ui/majiang/zheng_19.png\"}}]},{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":589,\"skin\":\"ui/majiang/zheng_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"skin\":\"ui/majiang/zheng_19.png\"}}]},{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":505,\"skin\":\"ui/majiang/zheng_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"skin\":\"ui/majiang/zheng_19.png\"}}]},{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":925,\"skin\":\"ui/majiang/zheng_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"skin\":\"ui/majiang/zheng_19.png\"}}]},{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":841,\"skin\":\"ui/majiang/zheng_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"skin\":\"ui/majiang/zheng_19.png\"}}]},{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":757,\"skin\":\"ui/majiang/zheng_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"skin\":\"ui/majiang/zheng_19.png\"}}]}]},{\"type\":\"Sprite\",\"props\":{\"y\":100,\"x\":0,\"scaleY\":0.7,\"scaleX\":0.7},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":169,\"skin\":\"ui/majiang/zheng_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"skin\":\"ui/majiang/zheng_19.png\"}}]},{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":85,\"skin\":\"ui/majiang/zheng_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"skin\":\"ui/majiang/zheng_19.png\"}}]},{\"type\":\"Image\",\"props\":{\"y\":-8.12048840868686e-14,\"x\":0.9999999999999797,\"skin\":\"ui/majiang/zheng_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"skin\":\"ui/majiang/zheng_19.png\"}}]},{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":421,\"skin\":\"ui/majiang/zheng_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"skin\":\"ui/majiang/zheng_19.png\"}}]},{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":337,\"skin\":\"ui/majiang/zheng_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"skin\":\"ui/majiang/zheng_19.png\"}}]},{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":253,\"skin\":\"ui/majiang/zheng_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"skin\":\"ui/majiang/zheng_19.png\"}}]},{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":673,\"skin\":\"ui/majiang/zheng_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"skin\":\"ui/majiang/zheng_19.png\"}}]},{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":589,\"skin\":\"ui/majiang/zheng_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"skin\":\"ui/majiang/zheng_19.png\"}}]},{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":505,\"skin\":\"ui/majiang/zheng_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"skin\":\"ui/majiang/zheng_19.png\"}}]},{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":925,\"skin\":\"ui/majiang/zheng_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"skin\":\"ui/majiang/zheng_19.png\"}}]},{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":841,\"skin\":\"ui/majiang/zheng_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"skin\":\"ui/majiang/zheng_19.png\"}}]},{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":757,\"skin\":\"ui/majiang/zheng_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"skin\":\"ui/majiang/zheng_19.png\"}}]}]}]},{\"type\":\"Sprite\",\"props\":{\"y\":839,\"x\":54.99999999999999,\"width\":1227,\"var\":\"shouPai3\",\"scaleY\":1.4,\"scaleX\":1.4,\"height\":172},\"child\":[{\"type\":\"Sprite\",\"props\":{\"y\":26,\"x\":0,\"width\":250,\"var\":\"chi3\",\"height\":128},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"skin\":\"ui/majiang/zheng_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"skin\":\"ui/majiang/zheng_19.png\"}}]},{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":84,\"skin\":\"ui/majiang/zheng_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"skin\":\"ui/majiang/zheng_32.png\"}}]},{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":168,\"skin\":\"ui/majiang/zheng_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"skin\":\"ui/majiang/zheng_19.png\"}}]}]},{\"type\":\"Sprite\",\"props\":{\"y\":26,\"x\":508,\"width\":250,\"var\":\"anGangHide3\",\"height\":128},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":84,\"skin\":\"ui/majiang/zheng_an.png\"}},{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"skin\":\"ui/majiang/zheng_an.png\"}},{\"type\":\"Image\",\"props\":{\"y\":-28,\"x\":84,\"skin\":\"ui/majiang/zheng_an.png\"}},{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":168,\"skin\":\"ui/majiang/zheng_an.png\"}}]},{\"type\":\"Sprite\",\"props\":{\"y\":26,\"x\":760,\"width\":248,\"var\":\"mingGang3\",\"height\":128},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"skin\":\"ui/majiang/zheng_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"skin\":\"ui/majiang/zheng_19.png\"}}]},{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":83,\"skin\":\"ui/majiang/zheng_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"skin\":\"ui/majiang/zheng_19.png\"}}]},{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":166,\"skin\":\"ui/majiang/zheng_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"skin\":\"ui/majiang/zheng_19.png\"}}]},{\"type\":\"Image\",\"props\":{\"y\":-31,\"x\":83,\"skin\":\"ui/majiang/zheng_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"skin\":\"ui/majiang/zheng_19.png\"}}]}]},{\"type\":\"Sprite\",\"props\":{\"y\":26,\"x\":254,\"width\":250,\"var\":\"anGang3\",\"height\":128},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":84,\"skin\":\"ui/majiang/zheng_an.png\"}},{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"skin\":\"ui/majiang/zheng_an.png\"}},{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":168,\"skin\":\"ui/majiang/zheng_an.png\"}},{\"type\":\"Image\",\"props\":{\"y\":-28,\"x\":84,\"skin\":\"ui/majiang/zheng_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"skin\":\"ui/majiang/zheng_19.png\"}}]}]},{\"type\":\"Sprite\",\"props\":{\"y\":0,\"x\":1031,\"width\":82,\"var\":\"shou3\",\"pivotY\":-26,\"height\":128},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"skin\":\"ui/majiang/shou_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"skin\":\"ui/majiang/shou_32.png\"}}]}]},{\"type\":\"Sprite\",\"props\":{\"y\":0,\"x\":1144,\"width\":82,\"var\":\"fa3\",\"pivotY\":-26,\"height\":128},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"width\":82,\"skin\":\"ui/majiang/shou_bg.png\",\"height\":128},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"skin\":\"ui/majiang/shou_0.png\"}}]}]}]},{\"type\":\"Sprite\",\"props\":{\"y\":939.9999999999999,\"x\":39.00000000000005,\"var\":\"tingPaiSprite\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"width\":87,\"var\":\"tingPaiBg\",\"skin\":\"ui/game/user_head_bg.png\",\"sizeGrid\":\"26,26,26,26\",\"scaleY\":2,\"scaleX\":2,\"height\":72,\"alpha\":0.8}},{\"type\":\"Text\",\"props\":{\"y\":58,\"x\":25,\"text\":\"牌\",\"fontSize\":\"38\",\"color\":\"#cd5216\"}},{\"type\":\"Text\",\"props\":{\"y\":19,\"x\":25,\"text\":\"听\",\"fontSize\":\"38\",\"color\":\"#cd5216\"}},{\"type\":\"Sprite\",\"props\":{\"y\":19.999999999999773,\"x\":73.00000000000009,\"width\":82,\"var\":\"tingPaiPaiSprite\",\"scaleY\":0.7,\"scaleX\":0.7,\"height\":128},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"width\":82,\"var\":\"tingPaiPai\",\"skin\":\"ui/majiang/zheng_bg.png\",\"height\":128},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"skin\":\"ui/majiang/zheng_19.png\"}}]}]}]}]},{\"type\":\"Sprite\",\"props\":{\"y\":3,\"x\":0,\"width\":1920,\"var\":\"waitSprite\",\"height\":1080},\"child\":[{\"type\":\"Button\",\"props\":{\"y\":512,\"x\":984,\"width\":393,\"var\":\"inviteBtn\",\"skin\":\"base/btn_normal.png\",\"labelSize\":60,\"labelPadding\":\"0,0,6,0\",\"labelColors\":\"#FFFFFF,#FFFFFF,#FFFFFF\",\"label\":\"邀请好友\",\"height\":133,\"sizeGrid\":\"31,71,40,71\"}},{\"type\":\"Button\",\"props\":{\"y\":511,\"x\":508,\"width\":403,\"var\":\"delRoomBtn\",\"skin\":\"base/btn_danger.png\",\"labelSize\":60,\"labelPadding\":\"0,0,6,0\",\"labelColors\":\"#FFFFFF,#FFFFFF,#FFFFFF\",\"label\":\"解散房间\",\"height\":133,\"sizeGrid\":\"31,71,40,71\"}},{\"type\":\"CheckBox\",\"props\":{\"y\":712,\"x\":726,\"width\":390,\"var\":\"isAutoStart\",\"skin\":\"base/checkbox.png\",\"selected\":true,\"scaleY\":1.2,\"scaleX\":1.2,\"labelSize\":52,\"labelColors\":\"#cd5216\",\"label\":\"人满自动开始\",\"height\":70}}]},{\"type\":\"Sprite\",\"props\":{\"var\":\"movieSprite\",\"mouseEnabled\":false},\"child\":[{\"type\":\"Sprite\",\"props\":{\"y\":547,\"x\":888,\"width\":82,\"var\":\"outPaiMovie3\",\"scaleY\":1.6,\"scaleX\":1.6,\"height\":128},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"skin\":\"ui/majiang/zheng_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"skin\":\"ui/majiang/zheng_19.png\"}}]}]},{\"type\":\"Sprite\",\"props\":{\"y\":418,\"x\":1225,\"width\":82,\"var\":\"outPaiMovie2\",\"scaleY\":1.6,\"scaleX\":1.6,\"height\":128},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"skin\":\"ui/majiang/zheng_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"skin\":\"ui/majiang/zheng_19.png\"}}]}]},{\"type\":\"Sprite\",\"props\":{\"y\":290,\"x\":885,\"width\":82,\"var\":\"outPaiMovie1\",\"scaleY\":1.6,\"scaleX\":1.6,\"height\":128},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"skin\":\"ui/majiang/zheng_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"skin\":\"ui/majiang/zheng_19.png\"}}]}]},{\"type\":\"Sprite\",\"props\":{\"y\":418,\"x\":568,\"width\":82,\"var\":\"outPaiMovie0\",\"scaleY\":1.6,\"scaleX\":1.6,\"height\":128},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"skin\":\"ui/majiang/zheng_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"skin\":\"ui/majiang/zheng_19.png\"}}]}]},{\"type\":\"Sprite\",\"props\":{\"y\":441,\"x\":659,\"width\":412,\"var\":\"bianMove\",\"scaleY\":1.6,\"scaleX\":1.6,\"height\":129},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"var\":\"sourcePai\",\"skin\":\"ui/majiang/zheng_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"skin\":\"ui/majiang/zheng_19.png\"}}]},{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":330,\"var\":\"sourceBian0\",\"skin\":\"ui/majiang/zheng_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"skin\":\"ui/majiang/zheng_19.png\"}}]},{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":239,\"var\":\"sourceBian1\",\"skin\":\"ui/majiang/zheng_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"skin\":\"ui/majiang/zheng_19.png\"}}]},{\"type\":\"Text\",\"props\":{\"y\":15,\"x\":123,\"width\":85,\"text\":\"变\",\"height\":83,\"fontSize\":\"80\",\"color\":\"#cd5216\"}}]}]}]};}\r\n\t\t]);\r\n\t\treturn GameTableUI;\r\n\t})(View)\r\n\r\n\r\n\t//class ui.test.LoginUI extends laya.ui.View\r\n\tvar LoginUI=(function(_super){\r\n\t\tfunction LoginUI(){\r\n\t\t\tthis.bg=null;\r\n\t\t\tthis.mainBg=null;\r\n\t\t\tthis.mainSprite=null;\r\n\t\t\tthis.buttonsSprite=null;\r\n\t\t\tthis.anonymousLoginBtn=null;\r\n\t\t\tthis.smsLoginBtn=null;\r\n\t\t\tthis.weixinLoginBtn=null;\r\n\t\t\tthis.agreeCheck=null;\r\n\t\t\tthis.agreeLink=null;\r\n\t\t\tLoginUI.__super.call(this);\r\n\t\t}\r\n\r\n\t\t__class(LoginUI,'ui.test.LoginUI',_super);\r\n\t\tvar __proto=LoginUI.prototype;\r\n\t\t__proto.createChildren=function(){\r\n\t\t\tView.regComponent(\"Text\",Text);\r\n\t\t\tlaya.ui.Component.prototype.createChildren.call(this);\r\n\t\t\tthis.createView(LoginUI.uiView);\r\n\t\t}\r\n\r\n\t\t__static(LoginUI,\r\n\t\t['uiView',function(){return this.uiView={\"type\":\"View\",\"props\":{\"text\":\"ID:3213124\"},\"child\":[{\"type\":\"Sprite\",\"props\":{\"y\":0,\"x\":0,\"var\":\"bg\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"width\":1920,\"var\":\"mainBg\",\"skin\":\"ui/home/bg.jpg\",\"height\":1080}},{\"type\":\"Image\",\"props\":{\"y\":216,\"x\":161,\"width\":419,\"skin\":\"ui/home/mm.png\",\"height\":865}}]},{\"type\":\"Sprite\",\"props\":{\"width\":1920,\"var\":\"mainSprite\",\"height\":1080},\"child\":[{\"type\":\"Sprite\",\"props\":{\"y\":255.5,\"x\":688,\"width\":544,\"var\":\"buttonsSprite\",\"height\":569},\"child\":[{\"type\":\"Button\",\"props\":{\"y\":311.9999999999998,\"x\":0,\"width\":272,\"var\":\"anonymousLoginBtn\",\"skin\":\"base/btn_normal.png\",\"scaleY\":2,\"scaleX\":2,\"labelSize\":38,\"labelPadding\":\"0,0,6,0\",\"labelColors\":\"#FFFFFF,#FFFFFF,#FFFFFF\",\"labelBold\":false,\"label\":\"匿名登录\",\"height\":71,\"sizeGrid\":\"31,71,40,71\"}},{\"type\":\"Button\",\"props\":{\"y\":155.99999999999991,\"x\":0,\"width\":272,\"var\":\"smsLoginBtn\",\"skin\":\"base/btn_normal.png\",\"scaleY\":2,\"scaleX\":2,\"labelSize\":38,\"labelPadding\":\"0,0,6,0\",\"labelColors\":\"#FFFFFF,#FFFFFF,#FFFFFF\",\"labelBold\":false,\"label\":\"短信登录\",\"height\":71,\"sizeGrid\":\"31,71,40,71\"}},{\"type\":\"Button\",\"props\":{\"y\":0,\"x\":0,\"width\":272,\"var\":\"weixinLoginBtn\",\"skin\":\"base/btn_normal.png\",\"scaleY\":2,\"scaleX\":2,\"labelSize\":38,\"labelPadding\":\"0,0,6,0\",\"labelColors\":\"#FFFFFF,#FFFFFF,#FFFFFF\",\"labelBold\":false,\"label\":\"微信登录\",\"height\":71,\"sizeGrid\":\"31,71,40,71\"}},{\"type\":\"CheckBox\",\"props\":{\"y\":488,\"x\":76,\"var\":\"agreeCheck\",\"skin\":\"base/checkbox.png\",\"labelSize\":48,\"labelColors\":\"#ffffff\",\"labelBold\":true,\"label\":\" 同意\"}},{\"type\":\"Label\",\"props\":{\"y\":491,\"x\":272,\"width\":189,\"var\":\"agreeLink\",\"underlineColor\":\"#ff0300\",\"underline\":true,\"text\":\"用户协议\",\"height\":53,\"fontSize\":48,\"color\":\"#ffffff\",\"bold\":true}}]},{\"type\":\"Text\",\"props\":{\"y\":1025.5,\"x\":0,\"wordWrap\":true,\"width\":1920,\"text\":\"抵制不良游戏，拒绝盗版游戏。注意自我保护，谨防上当受骗。\",\"fontSize\":38,\"color\":\"#ffffff\",\"alpha\":0.5,\"align\":\"center\"}},{\"type\":\"Text\",\"props\":{\"y\":978.4999999999999,\"x\":0,\"wordWrap\":true,\"width\":1920,\"text\":\"适度游戏益脑，沉迷游戏伤身。合理安排时间，享受健康生活。\",\"fontSize\":38,\"color\":\"#ffffff\",\"alpha\":0.5,\"align\":\"center\"}}]}]};}\r\n\t\t]);\r\n\t\treturn LoginUI;\r\n\t})(View)\r\n\r\n\r\n\t//class ui.test.MainUI extends laya.ui.View\r\n\tvar MainUI=(function(_super){\r\n\t\tfunction MainUI(){\r\n\t\t\tthis.bg=null;\r\n\t\t\tthis.mainBg=null;\r\n\t\t\tthis.mainSprite=null;\r\n\t\t\tthis.userHead=null;\r\n\t\t\tthis.userHeadOut=null;\r\n\t\t\tthis.userHeadMask=null;\r\n\t\t\tthis.userHeadIconOut=null;\r\n\t\t\tthis.userHeadIcon=null;\r\n\t\t\tthis.addFangkaSprite=null;\r\n\t\t\tthis.userId=null;\r\n\t\t\tthis.gold=null;\r\n\t\t\tthis.userName=null;\r\n\t\t\tthis.addBtn=null;\r\n\t\t\tthis.notice=null;\r\n\t\t\tthis.noticeBg=null;\r\n\t\t\tthis.noticeLabel=null;\r\n\t\t\tthis.crateBtn=null;\r\n\t\t\tthis.joinBtn=null;\r\n\t\t\tthis.quitBtn=null;\r\n\t\t\tthis.settingBtn=null;\r\n\t\t\tthis.historyBtn=null;\r\n\t\t\tthis.newNoticeSprite=null;\r\n\t\t\tthis.newNotice=null;\r\n\t\t\tMainUI.__super.call(this);\r\n\t\t}\r\n\r\n\t\t__class(MainUI,'ui.test.MainUI',_super);\r\n\t\tvar __proto=MainUI.prototype;\r\n\t\t__proto.createChildren=function(){\r\n\t\t\tView.regComponent(\"Text\",Text);\r\n\t\t\tlaya.ui.Component.prototype.createChildren.call(this);\r\n\t\t\tthis.createView(MainUI.uiView);\r\n\t\t}\r\n\r\n\t\t__static(MainUI,\r\n\t\t['uiView',function(){return this.uiView={\"type\":\"View\",\"props\":{\"text\":\"ID:3213124\"},\"child\":[{\"type\":\"Sprite\",\"props\":{\"y\":0,\"x\":3,\"width\":1920,\"var\":\"bg\",\"height\":1080},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"var\":\"mainBg\",\"skin\":\"ui/home/bg.jpg\"}},{\"type\":\"Image\",\"props\":{\"y\":217,\"x\":96,\"width\":419,\"skin\":\"ui/home/mm.png\",\"height\":865}}]},{\"type\":\"Sprite\",\"props\":{\"y\":0,\"x\":3,\"width\":1920,\"var\":\"mainSprite\",\"height\":1080},\"child\":[{\"type\":\"Sprite\",\"props\":{\"y\":9,\"x\":126,\"width\":370,\"var\":\"userHead\",\"scaleY\":1.3,\"scaleX\":1.3,\"height\":168},\"child\":[{\"type\":\"Sprite\",\"props\":{\"y\":12,\"x\":14,\"width\":530,\"var\":\"userHeadOut\",\"scaleY\":0.25,\"scaleX\":0.25,\"height\":534},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":2,\"x\":-2,\"width\":133,\"skin\":\"ui/game/user_head_bg.png\",\"scaleY\":4,\"scaleX\":4,\"height\":133,\"sizeGrid\":\"60,60,60,60\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"width\":133,\"var\":\"userHeadMask\",\"skin\":\"ui/game/user_head_mask.png\",\"height\":133,\"sizeGrid\":\"60,60,60,60\"}},{\"type\":\"Sprite\",\"props\":{\"y\":0,\"x\":0,\"width\":133,\"var\":\"userHeadIconOut\",\"height\":133},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":4,\"x\":7,\"width\":119,\"var\":\"userHeadIcon\",\"skin\":\"ui/game/user_head_default.png\",\"pivotY\":0,\"pivotX\":0,\"height\":115}}]}]}]},{\"type\":\"Sprite\",\"props\":{\"y\":19.00000000000002,\"x\":145.00000000000006,\"width\":219.99999999999983,\"var\":\"addFangkaSprite\",\"mouseThrough\":false,\"mouseEnabled\":true,\"height\":121.99999999999997},\"child\":[{\"type\":\"Text\",\"props\":{\"y\":46.000000000000036,\"x\":-1.0000000000000568,\"width\":204,\"var\":\"userId\",\"text\":\"ID:7777777\",\"height\":35,\"fontSize\":30,\"color\":\"#ffcc01\",\"align\":\"center\"}},{\"type\":\"Image\",\"props\":{\"y\":80.99999999999994,\"x\":5,\"skin\":\"ui/game/gold_bg.png\"}},{\"type\":\"Text\",\"props\":{\"y\":84,\"x\":3,\"width\":183,\"var\":\"gold\",\"text\":\"房卡:888888\",\"height\":35,\"fontSize\":28,\"color\":\"#ffcc01\",\"align\":\"center\"}},{\"type\":\"Text\",\"props\":{\"y\":0,\"x\":0,\"width\":195,\"var\":\"userName\",\"text\":\"用户名称\",\"height\":46,\"fontSize\":40,\"color\":\"#ffcc01\",\"align\":\"center\"}},{\"type\":\"Button\",\"props\":{\"y\":76.99999999999997,\"x\":174.99999999999983,\"var\":\"addBtn\",\"skin\":\"ui/home/btn_add_gold.png\"}}]}]},{\"type\":\"Sprite\",\"props\":{\"y\":215.00000000000003,\"x\":476.99999999999983,\"var\":\"notice\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"var\":\"noticeBg\",\"skin\":\"ui/home/notice_bg.png\"}},{\"type\":\"Image\",\"props\":{\"y\":5,\"x\":3,\"skin\":\"ui/home/notice_icon.png\"}},{\"type\":\"Label\",\"props\":{\"y\":12,\"x\":111,\"width\":897,\"var\":\"noticeLabel\",\"text\":\"我是跑马灯我是跑马灯我是跑马灯我是跑马灯我是跑马灯我是跑马灯我是跑马灯我是跑马灯\",\"overflow\":\"hidden\",\"height\":40,\"fontSize\":40,\"color\":\"#ffcc01\",\"bold\":false,\"align\":\"left\"}}]},{\"type\":\"Sprite\",\"props\":{\"y\":352.25,\"x\":726},\"child\":[{\"type\":\"Button\",\"props\":{\"y\":0,\"x\":0,\"width\":531,\"var\":\"crateBtn\",\"skin\":\"ui/home/btn_create.png\",\"label\":\"label\",\"height\":595}},{\"type\":\"Button\",\"props\":{\"y\":0,\"x\":554.0000000000002,\"width\":531,\"var\":\"joinBtn\",\"skin\":\"ui/home/btn_join.png\",\"label\":\"label\",\"height\":595}}]},{\"type\":\"Button\",\"props\":{\"y\":16,\"x\":1384,\"width\":120,\"var\":\"quitBtn\",\"stateNum\":\"1\",\"skin\":\"base/quit.png\",\"sizeGrid\":\"121,0,0,0\",\"labelSize\":40,\"labelPadding\":\"50,0,0,0\",\"labelColors\":\"#ffffff\",\"label\":\"退出\",\"height\":150}},{\"type\":\"Button\",\"props\":{\"y\":13,\"x\":1523,\"width\":120,\"var\":\"settingBtn\",\"stateNum\":\"1\",\"skin\":\"base/shezhi.png\",\"sizeGrid\":\"121,0,0,0\",\"labelSize\":40,\"labelPadding\":\"50,0,0,0\",\"labelColors\":\"#ffffff\",\"label\":\"设置\",\"height\":150}},{\"type\":\"Button\",\"props\":{\"y\":16,\"x\":1662,\"width\":120,\"var\":\"historyBtn\",\"stateNum\":\"1\",\"skin\":\"base/history.png\",\"sizeGrid\":\"121,0,0,0\",\"labelSize\":40,\"labelPadding\":\"50,0,0,0\",\"labelColors\":\"#ffffff\",\"label\":\"战绩\",\"height\":150}},{\"type\":\"Sprite\",\"props\":{\"y\":316,\"x\":104,\"var\":\"newNoticeSprite\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"width\":373,\"skin\":\"base/dialog_bg.png\",\"scaleY\":1.5,\"scaleX\":1.5,\"height\":445,\"alpha\":0.7,\"sizeGrid\":\"90,37,44,35\"}},{\"type\":\"Text\",\"props\":{\"y\":41,\"x\":127,\"width\":278,\"text\":\"健康游戏公告\",\"height\":56,\"fontSize\":\"50\",\"color\":\"#ffffff\",\"alpha\":0.8}},{\"type\":\"Text\",\"props\":{\"y\":149,\"x\":72,\"wordWrap\":true,\"width\":414,\"var\":\"newNotice\",\"text\":\"健康游戏公告\",\"height\":442,\"fontSize\":\"50\",\"color\":\"#000000\",\"alpha\":0.8}}]},{\"type\":\"Text\",\"props\":{\"y\":1035,\"x\":7,\"wordWrap\":true,\"width\":1920,\"text\":\"抵制不良游戏，拒绝盗版游戏。注意自我保护，谨防上当受骗。\",\"fontSize\":\"35\",\"color\":\"#ffffff\",\"alpha\":0.5,\"align\":\"center\"}},{\"type\":\"Text\",\"props\":{\"y\":988,\"x\":7,\"wordWrap\":true,\"width\":1920,\"text\":\"适度游戏益脑，沉迷游戏伤身。合理安排时间，享受健康生活。\",\"fontSize\":\"35\",\"color\":\"#ffffff\",\"alpha\":0.5,\"align\":\"center\"}}]}]};}\r\n\t\t]);\r\n\t\treturn MainUI;\r\n\t})(View)\r\n\r\n\r\n\t//class ui.test.ChapterResultUI extends laya.ui.View\r\n\tvar ChapterResultUI=(function(_super){\r\n\t\tfunction ChapterResultUI(){\r\n\t\t\tthis.mainSprite=null;\r\n\t\t\tthis.shouPai3=null;\r\n\t\t\tthis.chi3=null;\r\n\t\t\tthis.anGangHide3=null;\r\n\t\t\tthis.mingGang3=null;\r\n\t\t\tthis.anGang3=null;\r\n\t\t\tthis.shou3=null;\r\n\t\t\tthis.fa3=null;\r\n\t\t\tthis.winSprite=null;\r\n\t\t\tthis.winScore=null;\r\n\t\t\tthis.winName=null;\r\n\t\t\tthis.winFan=null;\r\n\t\t\tthis.winFanString=null;\r\n\t\t\tthis.zaMaSprite=null;\r\n\t\t\tthis.maPaiSprite=null;\r\n\t\t\tthis.maPai=null;\r\n\t\t\tthis.yiMaType=null;\r\n\t\t\tthis.yiMaScore=null;\r\n\t\t\tthis.yiMaWu=null;\r\n\t\t\tthis.otherScore=null;\r\n\t\t\tthis.name0=null;\r\n\t\t\tthis.score0=null;\r\n\t\t\tthis.name1=null;\r\n\t\t\tthis.score1=null;\r\n\t\t\tthis.name2=null;\r\n\t\t\tthis.score2=null;\r\n\t\t\tthis.liuju=null;\r\n\t\t\tthis.title=null;\r\n\t\t\tthis.titleIcon=null;\r\n\t\t\tChapterResultUI.__super.call(this);\r\n\t\t}\r\n\r\n\t\t__class(ChapterResultUI,'ui.test.ChapterResultUI',_super);\r\n\t\tvar __proto=ChapterResultUI.prototype;\r\n\t\t__proto.createChildren=function(){\r\n\t\t\tView.regComponent(\"Text\",Text);\r\n\t\t\tlaya.ui.Component.prototype.createChildren.call(this);\r\n\t\t\tthis.createView(ChapterResultUI.uiView);\r\n\t\t}\r\n\r\n\t\t__static(ChapterResultUI,\r\n\t\t['uiView',function(){return this.uiView={\"type\":\"View\",\"props\":{\"width\":1285,\"text\":\"-100\",\"height\":774},\"child\":[{\"type\":\"Sprite\",\"props\":{\"y\":0,\"x\":0,\"width\":1285,\"var\":\"mainSprite\",\"height\":774},\"child\":[{\"type\":\"Sprite\",\"props\":{\"y\":24.999999999999996,\"x\":27.000000000000167,\"width\":1227,\"var\":\"shouPai3\",\"scaleY\":1,\"scaleX\":1,\"height\":172},\"child\":[{\"type\":\"Sprite\",\"props\":{\"y\":26,\"x\":0,\"width\":250,\"var\":\"chi3\",\"height\":128},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"skin\":\"ui/majiang/zheng_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"skin\":\"ui/majiang/zheng_19.png\"}}]},{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":84,\"skin\":\"ui/majiang/zheng_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"skin\":\"ui/majiang/zheng_32.png\"}}]},{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":168,\"skin\":\"ui/majiang/zheng_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"skin\":\"ui/majiang/zheng_19.png\"}}]}]},{\"type\":\"Sprite\",\"props\":{\"y\":26,\"x\":508,\"width\":250,\"var\":\"anGangHide3\",\"height\":128},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":84,\"skin\":\"ui/majiang/zheng_an.png\"}},{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"skin\":\"ui/majiang/zheng_an.png\"}},{\"type\":\"Image\",\"props\":{\"y\":-28,\"x\":84,\"skin\":\"ui/majiang/zheng_an.png\"}},{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":168,\"skin\":\"ui/majiang/zheng_an.png\"}}]},{\"type\":\"Sprite\",\"props\":{\"y\":26,\"x\":760,\"width\":248,\"var\":\"mingGang3\",\"height\":128},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"skin\":\"ui/majiang/zheng_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"skin\":\"ui/majiang/zheng_19.png\"}}]},{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":83,\"skin\":\"ui/majiang/zheng_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"skin\":\"ui/majiang/zheng_19.png\"}}]},{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":166,\"skin\":\"ui/majiang/zheng_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"skin\":\"ui/majiang/zheng_19.png\"}}]},{\"type\":\"Image\",\"props\":{\"y\":-31,\"x\":83,\"skin\":\"ui/majiang/zheng_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"skin\":\"ui/majiang/zheng_19.png\"}}]}]},{\"type\":\"Sprite\",\"props\":{\"y\":26,\"x\":254,\"width\":250,\"var\":\"anGang3\",\"height\":128},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":84,\"skin\":\"ui/majiang/zheng_an.png\"}},{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"skin\":\"ui/majiang/zheng_an.png\"}},{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":168,\"skin\":\"ui/majiang/zheng_an.png\"}},{\"type\":\"Image\",\"props\":{\"y\":-28,\"x\":84,\"skin\":\"ui/majiang/zheng_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"skin\":\"ui/majiang/zheng_19.png\"}}]}]},{\"type\":\"Sprite\",\"props\":{\"y\":0,\"x\":1031,\"width\":82,\"var\":\"shou3\",\"pivotY\":-26,\"height\":128},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"skin\":\"ui/majiang/shou_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"skin\":\"ui/majiang/shou_32.png\"}}]}]},{\"type\":\"Sprite\",\"props\":{\"y\":0,\"x\":1144,\"width\":82,\"var\":\"fa3\",\"pivotY\":-26,\"height\":128},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"width\":82,\"skin\":\"ui/majiang/shou_bg.png\",\"height\":128},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"skin\":\"ui/majiang/shou_0.png\"}}]}]}]},{\"type\":\"Sprite\",\"props\":{\"y\":196,\"x\":29,\"width\":1230,\"var\":\"winSprite\",\"height\":286},\"child\":[{\"type\":\"Label\",\"props\":{\"y\":45,\"x\":1056,\"width\":174,\"var\":\"winScore\",\"text\":\"+100\",\"overflow\":\"hidden\",\"height\":54,\"fontSize\":50,\"color\":\"#cd5216\",\"bold\":true,\"align\":\"right\"}},{\"type\":\"Label\",\"props\":{\"y\":44.5,\"x\":29,\"width\":300,\"var\":\"winName\",\"text\":\"小草小草小草小草小草\",\"overflow\":\"hidden\",\"height\":54,\"fontSize\":50,\"color\":\"#cd5216\",\"bold\":true}},{\"type\":\"Sprite\",\"props\":{\"y\":28,\"x\":396,\"width\":585,\"height\":95},\"child\":[{\"type\":\"Label\",\"props\":{\"y\":47,\"x\":-52,\"width\":749,\"var\":\"winFan\",\"text\":\"(40番)\",\"overflow\":\"hidden\",\"height\":37,\"fontSize\":30,\"color\":\"#cd5216\",\"bold\":true,\"align\":\"center\"}},{\"type\":\"Text\",\"props\":{\"y\":-3,\"x\":-52,\"wordWrap\":false,\"width\":749,\"var\":\"winFanString\",\"text\":\"杠上花  清一色 一条龙\",\"height\":39,\"fontSize\":\"40\",\"color\":\"#cd5216\",\"bold\":true,\"align\":\"center\"}}]},{\"type\":\"Sprite\",\"props\":{\"y\":160,\"x\":-1,\"width\":1242,\"var\":\"zaMaSprite\",\"height\":126},\"child\":[{\"type\":\"Sprite\",\"props\":{\"y\":-1,\"x\":355,\"var\":\"maPaiSprite\",\"height\":119},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":-1.1368683772161603e-13,\"x\":5.684341886080802e-14,\"width\":82,\"var\":\"maPai\",\"skin\":\"ui/majiang/zheng_bg.png\",\"height\":128},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"skin\":\"ui/majiang/zheng_19.png\"}}]}]},{\"type\":\"Label\",\"props\":{\"y\":28,\"x\":-1,\"width\":300,\"var\":\"yiMaType\",\"text\":\"一码全中\",\"overflow\":\"hidden\",\"height\":54,\"fontSize\":50,\"color\":\"#573a1e\",\"bold\":true,\"align\":\"left\"}},{\"type\":\"Label\",\"props\":{\"y\":31,\"x\":1054,\"width\":174,\"var\":\"yiMaScore\",\"text\":\"+100\",\"overflow\":\"hidden\",\"height\":54,\"fontSize\":50,\"color\":\"#573a1e\",\"bold\":true,\"align\":\"right\"}},{\"type\":\"Label\",\"props\":{\"y\":33,\"x\":377,\"width\":629,\"var\":\"yiMaWu\",\"text\":\"全部未中\",\"overflow\":\"hidden\",\"height\":50,\"fontSize\":50,\"color\":\"#573a1e\",\"bold\":true,\"align\":\"center\"}}]}]},{\"type\":\"Sprite\",\"props\":{\"y\":536.9999999999998,\"x\":28.000000000000252,\"var\":\"otherScore\"},\"child\":[{\"type\":\"Sprite\",\"props\":{\"y\":1.1368683772161603e-13,\"x\":0,\"width\":1230.9999999999998,\"height\":54},\"child\":[{\"type\":\"Label\",\"props\":{\"y\":0,\"x\":31,\"width\":349,\"var\":\"name0\",\"text\":\"小草小草小草小草小草\",\"overflow\":\"hidden\",\"height\":54,\"fontSize\":50,\"color\":\"#573a1e\",\"bold\":true}},{\"type\":\"Label\",\"props\":{\"y\":0,\"x\":905,\"width\":325,\"var\":\"score0\",\"text\":\"-100\",\"overflow\":\"hidden\",\"height\":54,\"fontSize\":50,\"color\":\"#573a1e\",\"bold\":true,\"align\":\"right\"}}]},{\"type\":\"Sprite\",\"props\":{\"y\":76.00000000000023,\"x\":0,\"width\":1230.9999999999998,\"height\":54},\"child\":[{\"type\":\"Label\",\"props\":{\"y\":0,\"x\":31,\"width\":349,\"var\":\"name1\",\"text\":\"小草小草小草小草小草\",\"overflow\":\"hidden\",\"height\":54,\"fontSize\":50,\"color\":\"#573a1e\",\"bold\":true}},{\"type\":\"Label\",\"props\":{\"y\":0,\"x\":902,\"width\":328,\"var\":\"score1\",\"text\":\"-100\",\"overflow\":\"hidden\",\"height\":54,\"fontSize\":50,\"color\":\"#573a1e\",\"bold\":true,\"align\":\"right\"}}]},{\"type\":\"Sprite\",\"props\":{\"y\":152.0000000000001,\"x\":0,\"width\":1230.9999999999998,\"height\":54},\"child\":[{\"type\":\"Label\",\"props\":{\"y\":0,\"x\":31,\"width\":349,\"var\":\"name2\",\"text\":\"小草小草小草小草小草\",\"overflow\":\"hidden\",\"height\":54,\"fontSize\":50,\"color\":\"#573a1e\",\"bold\":true}},{\"type\":\"Label\",\"props\":{\"y\":0,\"x\":906,\"width\":325,\"var\":\"score2\",\"text\":\"-100\",\"overflow\":\"hidden\",\"height\":54,\"fontSize\":50,\"color\":\"#573a1e\",\"bold\":true,\"align\":\"right\"}}]}]},{\"type\":\"Label\",\"props\":{\"y\":188,\"x\":60,\"width\":1159,\"var\":\"liuju\",\"text\":\"流局\",\"overflow\":\"hidden\",\"height\":119,\"fontSize\":120,\"color\":\"#1c1c1c\",\"bold\":true,\"align\":\"center\"},\"child\":[{\"type\":\"Label\",\"props\":{\"y\":-4,\"x\":-2,\"width\":1159,\"text\":\"流局\",\"overflow\":\"hidden\",\"height\":119,\"fontSize\":120,\"color\":\"#cd5216\",\"bold\":true,\"align\":\"center\"}}]}]},{\"type\":\"Image\",\"props\":{\"y\":837,\"x\":1,\"var\":\"title\",\"skin\":\"ui/game/result_title_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":-12,\"x\":107.5,\"var\":\"titleIcon\",\"skin\":\"ui/game/result_title_win.png\"}}]}]};}\r\n\t\t]);\r\n\t\treturn ChapterResultUI;\r\n\t})(View)\r\n\r\n\r\n\t//class ui.test.CreateOptUI extends laya.ui.View\r\n\tvar CreateOptUI=(function(_super){\r\n\t\tfunction CreateOptUI(){\r\n\t\t\tthis.content=null;\r\n\t\t\tthis.tabContent=null;\r\n\t\t\tthis.typeRadio=null;\r\n\t\t\tthis.chapterMaxRadio=null;\r\n\t\t\tthis.maiMaRadio=null;\r\n\t\t\tCreateOptUI.__super.call(this);\r\n\t\t}\r\n\r\n\t\t__class(CreateOptUI,'ui.test.CreateOptUI',_super);\r\n\t\tvar __proto=CreateOptUI.prototype;\r\n\t\t__proto.createChildren=function(){\r\n\t\t\tlaya.ui.Component.prototype.createChildren.call(this);\r\n\t\t\tthis.createView(CreateOptUI.uiView);\r\n\t\t}\r\n\r\n\t\t__static(CreateOptUI,\r\n\t\t['uiView',function(){return this.uiView={\"type\":\"View\",\"props\":{\"y\":0,\"x\":0,\"width\":1520,\"labelSize\":42,\"height\":608},\"child\":[{\"type\":\"Sprite\",\"props\":{\"y\":3,\"x\":0,\"width\":1520,\"var\":\"content\",\"height\":608},\"child\":[{\"type\":\"Sprite\",\"props\":{\"y\":23,\"x\":29,\"width\":1207,\"var\":\"tabContent\",\"scaleY\":1.2,\"scaleX\":1.2,\"height\":477},\"child\":[{\"type\":\"Sprite\",\"props\":{\"y\":14,\"x\":12,\"width\":1185,\"height\":62},\"child\":[{\"type\":\"Label\",\"props\":{\"y\":5,\"x\":0,\"width\":167,\"text\":\"类型:\",\"height\":46,\"fontSize\":44,\"color\":\"#000000\"}},{\"type\":\"RadioGroup\",\"props\":{\"y\":-6,\"x\":177,\"width\":807,\"var\":\"typeRadio\",\"space\":40,\"skin\":\"base/radio.png\",\"selectedIndex\":0,\"labels\":\"推倒胡,红中变,白板变,单鬼,双鬼\",\"labelSize\":42,\"labelPadding\":\"7,0,0,0\",\"labelColors\":\"#000000\",\"height\":68,\"direction\":\"horizontal\"}}]},{\"type\":\"Sprite\",\"props\":{\"y\":128,\"x\":12},\"child\":[{\"type\":\"Label\",\"props\":{\"y\":5,\"x\":0,\"width\":167,\"text\":\"局数:\",\"height\":46,\"fontSize\":44,\"color\":\"#000000\"}},{\"type\":\"RadioGroup\",\"props\":{\"y\":-6,\"x\":177,\"width\":643,\"var\":\"chapterMaxRadio\",\"space\":40,\"skin\":\"base/radio.png\",\"selectedIndex\":0,\"labels\":\"8局(1房卡),16局(2房卡)\",\"labelSize\":42,\"labelPadding\":\"7,0,0,0\",\"labelColors\":\"#000000\",\"height\":68,\"direction\":\"horizontal\"}}]},{\"type\":\"Sprite\",\"props\":{\"y\":224,\"x\":12,\"width\":1087,\"height\":139},\"child\":[{\"type\":\"Label\",\"props\":{\"y\":7.000000000000114,\"x\":0,\"width\":167,\"text\":\"马牌:\",\"height\":46,\"fontSize\":44,\"color\":\"#000000\"}},{\"type\":\"RadioGroup\",\"props\":{\"y\":2,\"x\":177,\"var\":\"maiMaRadio\",\"selectedIndex\":1},\"child\":[{\"type\":\"Radio\",\"props\":{\"skin\":\"base/radio.png\",\"name\":\"item0\",\"labelSize\":42,\"labelPadding\":\"7,0,0,0\",\"labelColors\":\"#000000\",\"label\":\"无马\"}},{\"type\":\"Radio\",\"props\":{\"x\":167,\"skin\":\"base/radio.png\",\"name\":\"item1\",\"labelSize\":42,\"labelPadding\":\"7,0,0,0\",\"labelColors\":\"#000000\",\"label\":\"一马全中\"}},{\"type\":\"Radio\",\"props\":{\"x\":420,\"skin\":\"base/radio.png\",\"name\":\"item2\",\"labelSize\":42,\"labelPadding\":\"7,0,0,0\",\"labelColors\":\"#000000\",\"label\":\"买2马\"}},{\"type\":\"Radio\",\"props\":{\"x\":614,\"skin\":\"base/radio.png\",\"name\":\"item3\",\"labelSize\":42,\"labelPadding\":\"7,0,0,0\",\"labelColors\":\"#000000\",\"label\":\"买4马\"}},{\"type\":\"Radio\",\"props\":{\"y\":72,\"skin\":\"base/radio.png\",\"name\":\"item4\",\"labelSize\":42,\"labelPadding\":\"7,0,0,0\",\"labelColors\":\"#000000\",\"label\":\"买6马\"}}]}]}]},{\"type\":\"Image\",\"props\":{\"y\":122,\"x\":1147,\"width\":3,\"skin\":\"base/line_vertical.png\",\"rotation\":90,\"height\":1100}}]}]};}\r\n\t\t]);\r\n\t\treturn CreateOptUI;\r\n\t})(View)\r\n\r\n\r\n\t/**\r\n\t*<code>Dialog</code> 组件是一个弹出对话框。\r\n\t*\r\n\t*@example 以下示例代码，创建了一个 <code>Dialog</code> 实例。\r\n\t*<listing version=\"3.0\">\r\n\t*package\r\n\t*{\r\n\t\t*import laya.ui.Dialog;\r\n\t\t*import laya.utils.Handler;\r\n\t\t*public class Dialog_Example\r\n\t\t*{\r\n\t\t\t*private var dialog:Dialog_Instance;\r\n\t\t\t*public function Dialog_Example()\r\n\t\t\t*{\r\n\t\t\t\t*Laya.init(640,800);//设置游戏画布宽高、渲染模式。\r\n\t\t\t\t*Laya.stage.bgColor=\"#efefef\";//设置画布的背景颜色。\r\n\t\t\t\t*Laya.loader.load(\"resource/ui/btn_close.png\",Handler.create(this,onLoadComplete));//加载资源。\r\n\t\t\t\t*}\r\n\t\t\t*private function onLoadComplete():void\r\n\t\t\t*{\r\n\t\t\t\t*dialog=new Dialog_Instance();//创建一个 Dialog_Instance 类的实例对象 dialog。\r\n\t\t\t\t*dialog.dragArea=\"0,0,150,50\";//设置 dialog 的拖拽区域。\r\n\t\t\t\t*dialog.show();//显示 dialog。\r\n\t\t\t\t*dialog.closeHandler=new Handler(this,onClose);//设置 dialog 的关闭函数处理器。\r\n\t\t\t\t*}\r\n\t\t\t*private function onClose(name:String):void\r\n\t\t\t*{\r\n\t\t\t\t*if (name==Dialog.CLOSE)\r\n\t\t\t\t*{\r\n\t\t\t\t\t*trace(\"通过点击 name 为\"+name+\"的组件，关闭了dialog。\");\r\n\t\t\t\t\t*}\r\n\t\t\t\t*}\r\n\t\t\t*}\r\n\t\t*}\r\n\t*import laya.ui.Button;\r\n\t*import laya.ui.Dialog;\r\n\t*import laya.ui.Image;\r\n\t*class Dialog_Instance extends Dialog\r\n\t*{\r\n\t\t*function Dialog_Instance():void\r\n\t\t*{\r\n\t\t\t*var bg:Image=new Image(\"resource/ui/bg.png\");\r\n\t\t\t*bg.sizeGrid=\"40,10,5,10\";\r\n\t\t\t*bg.width=150;\r\n\t\t\t*bg.height=250;\r\n\t\t\t*addChild(bg);\r\n\t\t\t*var image:Image=new Image(\"resource/ui/image.png\");\r\n\t\t\t*addChild(image);\r\n\t\t\t*var button:Button=new Button(\"resource/ui/btn_close.png\");\r\n\t\t\t*button.name=Dialog.CLOSE;//设置button的name属性值。\r\n\t\t\t*button.x=0;\r\n\t\t\t*button.y=0;\r\n\t\t\t*addChild(button);\r\n\t\t\t*}\r\n\t\t*}\r\n\t*</listing>\r\n\t*<listing version=\"3.0\">\r\n\t*Laya.init(640,800);//设置游戏画布宽高、渲染模式\r\n\t*Laya.stage.bgColor=\"#efefef\";//设置画布的背景颜色\r\n\t*var dialog;\r\n\t*Laya.loader.load(\"resource/ui/btn_close.png\",laya.utils.Handler.create(this,loadComplete));//加载资源\r\n\t*(function (_super){//新建一个类Dialog_Instance继承自laya.ui.Dialog。\r\n\t\t*function Dialog_Instance(){\r\n\t\t\t*Dialog_Instance.__super.call(this);//初始化父类\r\n\t\t\t*var bg=new laya.ui.Image(\"resource/ui/bg.png\");//新建一个 Image 类的实例 bg 。\r\n\t\t\t*bg.sizeGrid=\"10,40,10,5\";//设置 bg 的网格信息。\r\n\t\t\t*bg.width=150;//设置 bg 的宽度。\r\n\t\t\t*bg.height=250;//设置 bg 的高度。\r\n\t\t\t*this.addChild(bg);//将 bg 添加到显示列表。\r\n\t\t\t*var image=new laya.ui.Image(\"resource/ui/image.png\");//新建一个 Image 类的实例 image 。\r\n\t\t\t*this.addChild(image);//将 image 添加到显示列表。\r\n\t\t\t*var button=new laya.ui.Button(\"resource/ui/btn_close.png\");//新建一个 Button 类的实例 bg 。\r\n\t\t\t*button.name=laya.ui.Dialog.CLOSE;//设置 button 的 name 属性值。\r\n\t\t\t*button.x=0;//设置 button 对象的属性 x 的值，用于控制 button 对象的显示位置。\r\n\t\t\t*button.y=0;//设置 button 对象的属性 y 的值，用于控制 button 对象的显示位置。\r\n\t\t\t*this.addChild(button);//将 button 添加到显示列表。\r\n\t\t\t*};\r\n\t\t*Laya.class(Dialog_Instance,\"mypackage.dialogExample.Dialog_Instance\",_super);//注册类Dialog_Instance。\r\n\t\t*})(laya.ui.Dialog);\r\n\t*function loadComplete(){\r\n\t\t*console.log(\"资源加载完成！\");\r\n\t\t*dialog=new mypackage.dialogExample.Dialog_Instance();//创建一个 Dialog_Instance 类的实例对象 dialog。\r\n\t\t*dialog.dragArea=\"0,0,150,50\";//设置 dialog 的拖拽区域。\r\n\t\t*dialog.show();//显示 dialog。\r\n\t\t*dialog.closeHandler=new laya.utils.Handler(this,onClose);//设置 dialog 的关闭函数处理器。\r\n\t\t*}\r\n\t*function onClose(name){\r\n\t\t*if (name==laya.ui.Dialog.CLOSE){\r\n\t\t\t*console.log(\"通过点击 name 为\"+name+\"的组件，关闭了dialog。\");\r\n\t\t\t*}\r\n\t\t*}\r\n\t*</listing>\r\n\t*<listing version=\"3.0\">\r\n\t*import Dialog=laya.ui.Dialog;\r\n\t*import Handler=laya.utils.Handler;\r\n\t*class Dialog_Example {\r\n\t\t*private dialog:Dialog_Instance;\r\n\t\t*constructor(){\r\n\t\t\t*Laya.init(640,800);//设置游戏画布宽高。\r\n\t\t\t*Laya.stage.bgColor=\"#efefef\";//设置画布的背景颜色。\r\n\t\t\t*Laya.loader.load(\"resource/ui/btn_close.png\",Handler.create(this,this.onLoadComplete));//加载资源。\r\n\t\t\t*}\r\n\t\t*private onLoadComplete():void {\r\n\t\t\t*this.dialog=new Dialog_Instance();//创建一个 Dialog_Instance 类的实例对象 dialog。\r\n\t\t\t*this.dialog.dragArea=\"0,0,150,50\";//设置 dialog 的拖拽区域。\r\n\t\t\t*this.dialog.show();//显示 dialog。\r\n\t\t\t*this.dialog.closeHandler=new Handler(this,this.onClose);//设置 dialog 的关闭函数处理器。\r\n\t\t\t*}\r\n\t\t*private onClose(name:string):void {\r\n\t\t\t*if (name==Dialog.CLOSE){\r\n\t\t\t\t*console.log(\"通过点击 name 为\"+name+\"的组件，关闭了dialog。\");\r\n\t\t\t\t*}\r\n\t\t\t*}\r\n\t\t*}\r\n\t*import Button=laya.ui.Button;\r\n\t*class Dialog_Instance extends Dialog {\r\n\t\t*Dialog_Instance():void {\r\n\t\t\t*var bg:laya.ui.Image=new laya.ui.Image(\"resource/ui/bg.png\");\r\n\t\t\t*bg.sizeGrid=\"40,10,5,10\";\r\n\t\t\t*bg.width=150;\r\n\t\t\t*bg.height=250;\r\n\t\t\t*this.addChild(bg);\r\n\t\t\t*var image:laya.ui.Image=new laya.ui.Image(\"resource/ui/image.png\");\r\n\t\t\t*this.addChild(image);\r\n\t\t\t*var button:Button=new Button(\"resource/ui/btn_close.png\");\r\n\t\t\t*button.name=Dialog.CLOSE;//设置button的name属性值。\r\n\t\t\t*button.x=0;\r\n\t\t\t*button.y=0;\r\n\t\t\t*this.addChild(button);\r\n\t\t\t*}\r\n\t\t*}\r\n\t*</listing>\r\n\t*/\r\n\t//class laya.ui.Dialog extends laya.ui.View\r\n\tvar Dialog1=(function(_super){\r\n\t\tvar DialogManager;\r\n\t\tfunction Dialog(){\r\n\t\t\tthis.popupCenter=true;\r\n\t\t\tthis.closeHandler=null;\r\n\t\t\tthis._dragArea=null;\r\n\t\t\tDialog.__super.call(this);\r\n\t\t}\r\n\r\n\t\t__class(Dialog,'laya.ui.Dialog',_super,'Dialog1');\r\n\t\tvar __proto=Dialog.prototype;\r\n\t\t/**@inheritDoc */\r\n\t\t__proto.initialize=function(){\r\n\t\t\tvar dragTarget=this.getChildByName(\"drag\");\r\n\t\t\tif (dragTarget){\r\n\t\t\t\tthis.dragArea=dragTarget.x+\",\"+dragTarget.y+\",\"+dragTarget.width+\",\"+dragTarget.height;\r\n\t\t\t\tdragTarget.removeSelf();\r\n\t\t\t}\r\n\t\t\tthis.on(\"click\",this,this._onClick);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private (protected)\r\n\t\t*对象的 <code>Event.CLICK</code> 点击事件侦听处理函数。\r\n\t\t*/\r\n\t\t__proto._onClick=function(e){\r\n\t\t\tvar btn=e.target;\r\n\t\t\tif (btn){\r\n\t\t\t\tswitch (btn.name){\r\n\t\t\t\t\tcase \"close\":\r\n\t\t\t\t\tcase \"cancel\":\r\n\t\t\t\t\tcase \"sure\":\r\n\t\t\t\t\tcase \"no\":\r\n\t\t\t\t\tcase \"ok\":\r\n\t\t\t\t\tcase \"yes\":\r\n\t\t\t\t\t\tthis.close(btn.name);\r\n\t\t\t\t\t\tbreak ;\r\n\t\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*显示对话框（以非模式窗口方式显示）。\r\n\t\t*@param closeOther 是否关闭其它的对话框。若值为true则关闭其它对话框。\r\n\t\t*/\r\n\t\t__proto.show=function(closeOther){\r\n\t\t\t(closeOther===void 0)&& (closeOther=false);\r\n\t\t\tDialog.manager.show(this,closeOther);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*显示对话框（以模式窗口方式显示）。\r\n\t\t*@param closeOther 是否关闭其它的对话框。若值为true则关闭其它对话框。\r\n\t\t*/\r\n\t\t__proto.popup=function(closeOther){\r\n\t\t\t(closeOther===void 0)&& (closeOther=false);\r\n\t\t\tDialog.manager.popup(this,closeOther);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*关闭对话框。\r\n\t\t*@param type 如果是点击默认关闭按钮触发，则传入关闭按钮的名字(name)，否则为null。\r\n\t\t*/\r\n\t\t__proto.close=function(type){\r\n\t\t\tDialog.manager.close(this);\r\n\t\t\tthis.closeHandler && this.closeHandler.runWith(type);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*/\r\n\t\t__proto._onMouseDown=function(e){\r\n\t\t\tvar point=this.getMousePoint();\r\n\t\t\tif (this._dragArea.contains(point.x,point.y))this.startDrag();\r\n\t\t\telse this.stopDrag();\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*弹出框的显示状态；如果弹框处于显示中，则为true，否则为false;\r\n\t\t*@return\r\n\t\t*/\r\n\t\t__getset(0,__proto,'isPopup',function(){\r\n\t\t\treturn this.parent !=null;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t*用来指定对话框的拖拽区域。默认值为\"0,0,0,0\"。\r\n\t\t*<p><b>格式：</b>构成一个矩形所需的 x,y,width,heith 值，用逗号连接为字符串。\r\n\t\t*例如：\"0,0,100,200\"。\r\n\t\t*</p>\r\n\t\t*\r\n\t\t*@see #includeExamplesSummary 请参考示例\r\n\t\t*@return\r\n\t\t*/\r\n\t\t__getset(0,__proto,'dragArea',function(){\r\n\t\t\tif (this._dragArea)return this._dragArea.toString();\r\n\t\t\treturn null;\r\n\t\t\t},function(value){\r\n\t\t\tif (value){\r\n\t\t\t\tvar a=UIUtils.fillArray([0,0,0,0],value,Number);\r\n\t\t\t\tthis._dragArea=new Rectangle(a[0],a[1],a[2],a[3]);\r\n\t\t\t\tthis.on(\"mousedown\",this,this._onMouseDown);\r\n\t\t\t\t}else {\r\n\t\t\t\tthis._dragArea=null;\r\n\t\t\t\tthis.off(\"mousedown\",this,this._onMouseDown);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t/**@private 获取对话框管理器。*/\r\n\t\t__getset(1,Dialog,'manager',function(){\r\n\t\t\treturn Dialog._manager || (Dialog._manager=new DialogManager());\r\n\t\t},laya.ui.View._$SET_manager);\r\n\r\n\t\tDialog.closeAll=function(){\r\n\t\t\tDialog.manager.closeAll();\r\n\t\t}\r\n\r\n\t\tDialog.CLOSE=\"close\";\r\n\t\tDialog.CANCEL=\"cancel\";\r\n\t\tDialog.SURE=\"sure\";\r\n\t\tDialog.NO=\"no\";\r\n\t\tDialog.OK=\"ok\";\r\n\t\tDialog.YES=\"yes\";\r\n\t\tDialog._manager=null\r\n\t\tDialog.__init$=function(){\r\n\t\t\t/**\r\n\t\t\t*<code>DialogManager</code> 类用来管理对话框。\r\n\t\t\t*/\r\n\t\t\t//class DialogManager extends laya.display.Sprite\r\n\t\t\tDialogManager=(function(_super){\r\n\t\t\t\tfunction DialogManager(){\r\n\t\t\t\t\tthis._stage=null;\r\n\t\t\t\t\tDialogManager.__super.call(this);\r\n\t\t\t\t\tthis.dialogLayer=new Sprite();\r\n\t\t\t\t\tthis.modalLayer=new Sprite();\r\n\t\t\t\t\tthis.maskLayer=new Sprite();\r\n\t\t\t\t\tthis.mouseEnabled=this.dialogLayer.mouseEnabled=this.modalLayer.mouseEnabled=this.maskLayer.mouseEnabled=true;\r\n\t\t\t\t\tthis.addChild(this.dialogLayer);\r\n\t\t\t\t\tthis.addChild(this.modalLayer);\r\n\t\t\t\t\tthis._stage=Laya.stage;\r\n\t\t\t\t\tthis._stage.addChild(this);\r\n\t\t\t\t\tthis._stage.on(\"resize\",this,this.onResize);\r\n\t\t\t\t\tthis.onResize(null);\r\n\t\t\t\t}\r\n\t\t\t\t__class(DialogManager,'',_super);\r\n\t\t\t\tvar __proto=DialogManager.prototype;\r\n\t\t\t\t/**\r\n\t\t\t\t*@private\r\n\t\t\t\t*舞台的 <code>Event.RESIZE</code> 事件侦听处理函数。\r\n\t\t\t\t*@param e\r\n\t\t\t\t*/\r\n\t\t\t\t__proto.onResize=function(e){\r\n\t\t\t\t\tvar width=this.maskLayer.width=this._stage.width;\r\n\t\t\t\t\tvar height=this.maskLayer.height=this._stage.height;\r\n\t\t\t\t\tthis.maskLayer.graphics.clear();\r\n\t\t\t\t\tthis.maskLayer.graphics.drawRect(0,0,width,height,UIConfig.popupBgColor);\r\n\t\t\t\t\tthis.maskLayer.alpha=UIConfig.popupBgAlpha;\r\n\t\t\t\t\tfor (var i=this.dialogLayer.numChildren-1;i >-1;i--){\r\n\t\t\t\t\t\tvar item=this.dialogLayer.getChildAt(i);\r\n\t\t\t\t\t\tif (item.popupCenter)this._centerDialog(item);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfor (i=this.modalLayer.numChildren-1;i >-1;i--){\r\n\t\t\t\t\t\titem=this.modalLayer.getChildAt(i);\r\n\t\t\t\t\t\tif (item.isPopup){\r\n\t\t\t\t\t\t\tif (item.popupCenter)this._centerDialog(item);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t__proto._centerDialog=function(dialog){\r\n\t\t\t\t\tdialog.x=Math.round(((this._stage.width-dialog.width)>> 1)+dialog.pivotX);\r\n\t\t\t\t\tdialog.y=Math.round(((this._stage.height-dialog.height)>> 1)+dialog.pivotY);\r\n\t\t\t\t}\r\n\t\t\t\t/**\r\n\t\t\t\t*显示对话框(非模式窗口类型)。\r\n\t\t\t\t*@param dialog 需要显示的对象框 <code>Dialog</code> 实例。\r\n\t\t\t\t*@param closeOther 是否关闭其它对话框，若值为ture，则关闭其它的对话框。\r\n\t\t\t\t*/\r\n\t\t\t\t__proto.show=function(dialog,closeOther){\r\n\t\t\t\t\t(closeOther===void 0)&& (closeOther=false);\r\n\t\t\t\t\tif (closeOther)this.dialogLayer.removeChildren();\r\n\t\t\t\t\tif (dialog.popupCenter)this._centerDialog(dialog);\r\n\t\t\t\t\tthis.dialogLayer.addChild(dialog);\r\n\t\t\t\t\tthis.event(\"open\");\r\n\t\t\t\t}\r\n\t\t\t\t/**\r\n\t\t\t\t*显示对话框(模式窗口类型)。\r\n\t\t\t\t*@param dialog 需要显示的对象框 <code>Dialog</code> 实例。\r\n\t\t\t\t*@param closeOther 是否关闭其它对话框，若值为ture，则关闭其它的对话框。\r\n\t\t\t\t*/\r\n\t\t\t\t__proto.popup=function(dialog,closeOther){\r\n\t\t\t\t\t(closeOther===void 0)&& (closeOther=false);\r\n\t\t\t\t\tif (closeOther)this.modalLayer.removeChildren();\r\n\t\t\t\t\tif (dialog.popupCenter)this._centerDialog(dialog);\r\n\t\t\t\t\tthis.modalLayer.addChild(this.maskLayer);\r\n\t\t\t\t\tthis.modalLayer.addChild(dialog);\r\n\t\t\t\t\tthis.event(\"open\");\r\n\t\t\t\t}\r\n\t\t\t\t/**\r\n\t\t\t\t*关闭对话框。\r\n\t\t\t\t*@param dialog 需要关闭的对象框 <code>Dialog</code> 实例。\r\n\t\t\t\t*/\r\n\t\t\t\t__proto.close=function(dialog){\r\n\t\t\t\t\tdialog.removeSelf();\r\n\t\t\t\t\tif (this.modalLayer.numChildren < 2){\r\n\t\t\t\t\t\tthis.maskLayer.removeSelf();\r\n\t\t\t\t\t\t}else {\r\n\t\t\t\t\t\tthis.modalLayer.setChildIndex(this.maskLayer,this.modalLayer.numChildren-2);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.event(\"close\");\r\n\t\t\t\t}\r\n\t\t\t\t/**\r\n\t\t\t\t*关闭所有的对话框。\r\n\t\t\t\t*/\r\n\t\t\t\t__proto.closeAll=function(){\r\n\t\t\t\t\tthis.dialogLayer.removeChildren();\r\n\t\t\t\t\tthis.modalLayer.removeChildren();\r\n\t\t\t\t\tthis.maskLayer.removeSelf();\r\n\t\t\t\t\tthis.event(\"close\");\r\n\t\t\t\t}\r\n\t\t\t\treturn DialogManager;\r\n\t\t\t})(Sprite)\r\n\t\t}\r\n\r\n\t\treturn Dialog;\r\n\t})(View)\r\n\r\n\r\n\t//class ui.test.JoinRoomUI extends laya.ui.View\r\n\tvar JoinRoomUI=(function(_super){\r\n\t\tfunction JoinRoomUI(){\r\n\t\t\tthis.mainSprite=null;\r\n\t\t\tthis.inputShow=null;\r\n\t\t\tthis.inputSprite=null;\r\n\t\t\tJoinRoomUI.__super.call(this);\r\n\t\t}\r\n\r\n\t\t__class(JoinRoomUI,'ui.test.JoinRoomUI',_super);\r\n\t\tvar __proto=JoinRoomUI.prototype;\r\n\t\t__proto.createChildren=function(){\r\n\t\t\tlaya.ui.Component.prototype.createChildren.call(this);\r\n\t\t\tthis.createView(JoinRoomUI.uiView);\r\n\t\t}\r\n\r\n\t\t__static(JoinRoomUI,\r\n\t\t['uiView',function(){return this.uiView={\"type\":\"View\",\"props\":{\"x\":0,\"width\":930,\"height\":640},\"child\":[{\"type\":\"Sprite\",\"props\":{\"y\":0,\"x\":0,\"width\":861,\"var\":\"mainSprite\",\"height\":529},\"child\":[{\"type\":\"Sprite\",\"props\":{\"y\":35,\"x\":2,\"var\":\"inputShow\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"width\":110,\"skin\":\"base/number_bg.png\",\"height\":110,\"sizeGrid\":\"12,12,12,12\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":9,\"x\":26,\"skin\":\"base/number/win/0.png\"}}]},{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":148,\"width\":110,\"skin\":\"base/number_bg.png\",\"height\":110,\"sizeGrid\":\"12,12,12,12\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":9,\"x\":26,\"skin\":\"base/number/win/0.png\"}}]},{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":295,\"width\":110,\"skin\":\"base/number_bg.png\",\"height\":110,\"sizeGrid\":\"12,12,12,12\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":9,\"x\":26,\"skin\":\"base/number/win/0.png\"}}]},{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":443,\"width\":110,\"skin\":\"base/number_bg.png\",\"height\":110,\"sizeGrid\":\"12,12,12,12\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":9,\"x\":26,\"skin\":\"base/number/win/0.png\"}}]},{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":590,\"width\":110,\"skin\":\"base/number_bg.png\",\"height\":110,\"sizeGrid\":\"12,12,12,12\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":9,\"x\":26,\"skin\":\"base/number/win/0.png\"}}]},{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":738,\"width\":110,\"skin\":\"base/number_bg.png\",\"height\":110,\"sizeGrid\":\"12,12,12,12\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":9,\"x\":26,\"skin\":\"base/number/win/0.png\"}}]}]},{\"type\":\"Sprite\",\"props\":{\"y\":174,\"x\":0,\"var\":\"inputSprite\"},\"child\":[{\"type\":\"Button\",\"props\":{\"y\":180,\"x\":719,\"width\":140,\"skin\":\"base/btn_basic.png\",\"height\":140,\"sizeGrid\":\"12,10,10,10\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":28,\"x\":42,\"skin\":\"base/number/win/0.png\",\"mouseEnabled\":false}}]},{\"type\":\"Button\",\"props\":{\"y\":0,\"x\":0,\"width\":140,\"skin\":\"base/btn_basic.png\",\"height\":140,\"sizeGrid\":\"12,10,10,10\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":29,\"x\":51,\"skin\":\"base/number/win/1.png\",\"mouseEnabled\":false}}]},{\"type\":\"Button\",\"props\":{\"y\":0,\"x\":180,\"width\":140,\"skin\":\"base/btn_basic.png\",\"height\":140,\"sizeGrid\":\"12,10,10,10\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":28,\"x\":42,\"skin\":\"base/number/win/2.png\",\"mouseEnabled\":false}}]},{\"type\":\"Button\",\"props\":{\"y\":0,\"x\":360,\"width\":140,\"skin\":\"base/btn_basic.png\",\"height\":140,\"sizeGrid\":\"12,10,10,10\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":28,\"x\":42,\"skin\":\"base/number/win/3.png\",\"mouseEnabled\":false}}]},{\"type\":\"Button\",\"props\":{\"y\":0,\"x\":540,\"width\":140,\"skin\":\"base/btn_basic.png\",\"height\":140,\"sizeGrid\":\"12,10,10,10\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":28,\"x\":42,\"skin\":\"base/number/win/4.png\",\"mouseEnabled\":false}}]},{\"type\":\"Button\",\"props\":{\"y\":0,\"x\":715,\"width\":140,\"skin\":\"base/btn_basic.png\",\"height\":140,\"sizeGrid\":\"12,10,10,10\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":28,\"x\":42,\"skin\":\"base/number/win/5.png\",\"mouseEnabled\":false}}]},{\"type\":\"Button\",\"props\":{\"y\":180,\"x\":0,\"width\":140,\"skin\":\"base/btn_basic.png\",\"height\":140,\"sizeGrid\":\"12,10,10,10\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":28,\"x\":42,\"skin\":\"base/number/win/6.png\",\"mouseEnabled\":false}}]},{\"type\":\"Button\",\"props\":{\"y\":180,\"x\":180,\"width\":140,\"skin\":\"base/btn_basic.png\",\"height\":140,\"sizeGrid\":\"12,10,10,10\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":28,\"x\":42,\"skin\":\"base/number/win/7.png\",\"mouseEnabled\":false}}]},{\"type\":\"Button\",\"props\":{\"y\":180,\"x\":360,\"width\":140,\"skin\":\"base/btn_basic.png\",\"height\":140,\"sizeGrid\":\"12,10,10,10\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":28,\"x\":42,\"skin\":\"base/number/win/8.png\",\"mouseEnabled\":false}}]},{\"type\":\"Button\",\"props\":{\"y\":180,\"x\":540,\"width\":140,\"skin\":\"base/btn_basic.png\",\"height\":140,\"sizeGrid\":\"12,10,10,10\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":28,\"x\":42,\"skin\":\"base/number/win/9.png\",\"mouseEnabled\":false}}]}]}]}]};}\r\n\t\t]);\r\n\t\treturn JoinRoomUI;\r\n\t})(View)\r\n\r\n\r\n\t//class ui.test.PhoneDialogUI extends laya.ui.View\r\n\tvar PhoneDialogUI=(function(_super){\r\n\t\tfunction PhoneDialogUI(){\r\n\t\t\tthis.mainSprite=null;\r\n\t\t\tthis.oneStep=null;\r\n\t\t\tthis.phoneInput=null;\r\n\t\t\tthis.twoStep=null;\r\n\t\t\tthis.codeBtn=null;\r\n\t\t\tthis.codeInput=null;\r\n\t\t\tthis.inputSprite=null;\r\n\t\t\tthis.nextBtn=null;\r\n\t\t\tthis.resumeBtn=null;\r\n\t\t\tPhoneDialogUI.__super.call(this);\r\n\t\t}\r\n\r\n\t\t__class(PhoneDialogUI,'ui.test.PhoneDialogUI',_super);\r\n\t\tvar __proto=PhoneDialogUI.prototype;\r\n\t\t__proto.createChildren=function(){\r\n\t\t\tlaya.ui.Component.prototype.createChildren.call(this);\r\n\t\t\tthis.createView(PhoneDialogUI.uiView);\r\n\t\t}\r\n\r\n\t\t__static(PhoneDialogUI,\r\n\t\t['uiView',function(){return this.uiView={\"type\":\"View\",\"props\":{\"y\":0,\"x\":0,\"width\":1435,\"text\":\"手机号：\",\"label\":\"下一步\",\"height\":650},\"child\":[{\"type\":\"Sprite\",\"props\":{\"y\":0,\"x\":0,\"width\":1255,\"var\":\"mainSprite\",\"height\":642},\"child\":[{\"type\":\"Sprite\",\"props\":{\"y\":0,\"x\":151,\"width\":953,\"var\":\"oneStep\",\"height\":167},\"child\":[{\"type\":\"Label\",\"props\":{\"y\":50,\"x\":65,\"width\":230,\"text\":\"手机号：\",\"height\":71,\"fontSize\":64,\"color\":\"#c95a46\",\"bold\":true,\"align\":\"center\"}},{\"type\":\"TextInput\",\"props\":{\"y\":34,\"x\":314,\"width\":581,\"type\":\"text\",\"skin\":\"base/number_bg.png\",\"sizeGrid\":\"11,12,11,12\",\"maxChars\":13,\"height\":102,\"fontSize\":64,\"editable\":false,\"color\":\"#ffffff\",\"align\":\"center\"}},{\"type\":\"Label\",\"props\":{\"y\":52,\"x\":334,\"width\":539,\"var\":\"phoneInput\",\"text\":\"00000000000000\",\"height\":64,\"fontSize\":64,\"color\":\"#ffffff\",\"align\":\"center\"}}]},{\"type\":\"Sprite\",\"props\":{\"y\":0,\"x\":107.5,\"width\":1040,\"var\":\"twoStep\",\"height\":167},\"child\":[{\"type\":\"TextInput\",\"props\":{\"y\":33,\"x\":300,\"width\":472,\"type\":\"text\",\"skin\":\"base/number_bg.png\",\"sizeGrid\":\"11,12,11,12\",\"height\":102,\"fontSize\":64,\"editable\":false,\"color\":\"#ffffff\",\"align\":\"center\"}},{\"type\":\"Label\",\"props\":{\"y\":54,\"x\":50,\"width\":232,\"text\":\"验证码：\",\"height\":63,\"fontSize\":64,\"color\":\"#c95a46\",\"bold\":true,\"align\":\"center\"}},{\"type\":\"Button\",\"props\":{\"y\":37,\"x\":797,\"width\":198,\"var\":\"codeBtn\",\"skin\":\"base/btn_basic.png\",\"labelSize\":40,\"labelPadding\":\"0,0,3,0\",\"labelColors\":\"#FFFFFF,#FFFFFF,#FFFFFF\",\"labelBold\":true,\"label\":\"重新获取\",\"height\":95,\"sizeGrid\":\"12,10,10,10\"}},{\"type\":\"Label\",\"props\":{\"y\":50,\"x\":317,\"width\":443,\"var\":\"codeInput\",\"text\":\"0000\",\"height\":67,\"fontSize\":64,\"color\":\"#000000\",\"align\":\"center\"}}]},{\"type\":\"Sprite\",\"props\":{\"y\":171,\"x\":21,\"var\":\"inputSprite\"},\"child\":[{\"type\":\"Button\",\"props\":{\"y\":149,\"x\":982,\"width\":230,\"skin\":\"base/btn_basic.png\",\"height\":140,\"sizeGrid\":\"12,10,10,10\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":25,\"x\":85,\"skin\":\"base/number/win/0.png\",\"mouseEnabled\":false}}]},{\"type\":\"Button\",\"props\":{\"y\":0,\"x\":0,\"width\":230,\"skin\":\"base/btn_basic.png\",\"height\":140,\"sizeGrid\":\"12,10,10,10\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":25,\"x\":97,\"skin\":\"base/number/win/1.png\",\"mouseEnabled\":false}}]},{\"type\":\"Button\",\"props\":{\"y\":0,\"x\":246,\"width\":230,\"skin\":\"base/btn_basic.png\",\"height\":140,\"sizeGrid\":\"12,10,10,10\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":25,\"x\":87,\"skin\":\"base/number/win/2.png\",\"mouseEnabled\":false}}]},{\"type\":\"Button\",\"props\":{\"y\":0,\"x\":491,\"width\":230,\"skin\":\"base/btn_basic.png\",\"height\":140,\"sizeGrid\":\"12,10,10,10\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":25,\"x\":86,\"skin\":\"base/number/win/3.png\",\"mouseEnabled\":false}}]},{\"type\":\"Button\",\"props\":{\"y\":0,\"x\":735,\"width\":230,\"skin\":\"base/btn_basic.png\",\"height\":140,\"sizeGrid\":\"12,10,10,10\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":25,\"x\":84,\"skin\":\"base/number/win/4.png\",\"mouseEnabled\":false}}]},{\"type\":\"Button\",\"props\":{\"y\":0,\"x\":983,\"width\":230,\"skin\":\"base/btn_basic.png\",\"height\":140,\"sizeGrid\":\"12,10,10,10\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":25,\"x\":87,\"skin\":\"base/number/win/5.png\",\"mouseEnabled\":false}}]},{\"type\":\"Button\",\"props\":{\"y\":149,\"x\":0,\"width\":230,\"skin\":\"base/btn_basic.png\",\"height\":140,\"sizeGrid\":\"12,10,10,10\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":25,\"x\":86,\"skin\":\"base/number/win/6.png\",\"mouseEnabled\":false}}]},{\"type\":\"Button\",\"props\":{\"y\":149,\"x\":247,\"width\":230,\"skin\":\"base/btn_basic.png\",\"height\":140,\"sizeGrid\":\"12,10,10,10\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":25,\"x\":86,\"skin\":\"base/number/win/7.png\",\"mouseEnabled\":false}}]},{\"type\":\"Button\",\"props\":{\"y\":149,\"x\":491,\"width\":230,\"skin\":\"base/btn_basic.png\",\"height\":140,\"sizeGrid\":\"12,10,10,10\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":25,\"x\":86,\"skin\":\"base/number/win/8.png\",\"mouseEnabled\":false}}]},{\"type\":\"Button\",\"props\":{\"y\":149,\"x\":736,\"width\":230,\"skin\":\"base/btn_basic.png\",\"height\":140,\"sizeGrid\":\"12,10,10,10\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":25,\"x\":86,\"skin\":\"base/number/win/9.png\",\"mouseEnabled\":false}}]}]},{\"type\":\"Button\",\"props\":{\"y\":498,\"x\":253,\"width\":300,\"var\":\"nextBtn\",\"skin\":\"base/btn_danger.png\",\"scaleY\":1.2,\"scaleX\":1.2,\"labelSize\":40,\"labelPadding\":\"0,0,6,0\",\"labelColors\":\"#FFFFFF,#FFFFFF,#FFFFFF\",\"labelBold\":\"true\",\"label\":\"下一步\",\"height\":95,\"sizeGrid\":\"31,71,40,71\"}},{\"type\":\"Button\",\"props\":{\"y\":498,\"x\":647,\"width\":300,\"var\":\"resumeBtn\",\"skin\":\"base/btn_normal.png\",\"scaleY\":1.2,\"scaleX\":1.2,\"labelSize\":40,\"labelPadding\":\"0,0,6,0\",\"labelColors\":\"#FFFFFF,#FFFFFF,#FFFFFF\",\"labelBold\":\"true\",\"label\":\"重新输入\",\"height\":95,\"sizeGrid\":\"31,71,40,71\"}}]}]};}\r\n\t\t]);\r\n\t\treturn PhoneDialogUI;\r\n\t})(View)\r\n\r\n\r\n\t//class ui.test.RoomHistoryListUI extends laya.ui.View\r\n\tvar RoomHistoryListUI=(function(_super){\r\n\t\tfunction RoomHistoryListUI(){\r\n\t\t\tthis.mainSprite=null;\r\n\t\t\tthis.row=null;\r\n\t\t\tthis.list=null;\r\n\t\t\tRoomHistoryListUI.__super.call(this);\r\n\t\t}\r\n\r\n\t\t__class(RoomHistoryListUI,'ui.test.RoomHistoryListUI',_super);\r\n\t\tvar __proto=RoomHistoryListUI.prototype;\r\n\t\t__proto.createChildren=function(){\r\n\t\t\tlaya.ui.Component.prototype.createChildren.call(this);\r\n\t\t\tthis.createView(RoomHistoryListUI.uiView);\r\n\t\t}\r\n\r\n\t\t__static(RoomHistoryListUI,\r\n\t\t['uiView',function(){return this.uiView={\"type\":\"View\",\"props\":{\"width\":1285,\"text\":\"6盘\",\"height\":484},\"child\":[{\"type\":\"Sprite\",\"props\":{\"y\":0,\"x\":0,\"width\":1285,\"var\":\"mainSprite\",\"height\":484},\"child\":[{\"type\":\"Sprite\",\"props\":{\"y\":1,\"x\":26,\"width\":907,\"height\":64},\"child\":[{\"type\":\"Label\",\"props\":{\"y\":15,\"x\":-3,\"width\":390,\"text\":\"房间号&日期\",\"overflow\":\"hidden\",\"height\":52,\"fontSize\":48,\"color\":\"#573a1e\",\"bold\":true,\"align\":\"center\"}},{\"type\":\"Label\",\"props\":{\"y\":13,\"x\":431,\"width\":369,\"text\":\"玩家\",\"overflow\":\"hidden\",\"height\":54,\"fontSize\":48,\"color\":\"#573a1e\",\"bold\":true,\"align\":\"center\"}},{\"type\":\"Label\",\"props\":{\"y\":14,\"x\":729,\"width\":489,\"text\":\"得分\",\"overflow\":\"hidden\",\"height\":52,\"fontSize\":48,\"color\":\"#573a1e\",\"bold\":true,\"align\":\"center\"}}]},{\"type\":\"Sprite\",\"props\":{\"y\":81,\"x\":0,\"width\":1255.0000000803848,\"var\":\"row\",\"height\":180.99999999999997},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":2,\"x\":1255,\"width\":3,\"skin\":\"base/line_vertical.png\",\"rotation\":90,\"height\":1230}},{\"type\":\"Label\",\"props\":{\"y\":136,\"x\":32,\"width\":368,\"text\":\"（6盘）\",\"overflow\":\"hidden\",\"name\":\"chapterNums\",\"height\":28,\"fontSize\":30,\"color\":\"#573a1e\",\"bold\":false,\"align\":\"center\"}},{\"type\":\"Label\",\"props\":{\"y\":37,\"x\":32,\"width\":368,\"text\":\"房间号:666666\",\"overflow\":\"hidden\",\"name\":\"roomId\",\"height\":46,\"fontSize\":38,\"color\":\"#cd5216\",\"bold\":true,\"align\":\"center\"}},{\"type\":\"Label\",\"props\":{\"y\":96,\"x\":32,\"width\":368,\"text\":\"2015年05月4日 18:44:23\",\"overflow\":\"hidden\",\"name\":\"date\",\"height\":28,\"fontSize\":30,\"color\":\"#573a1e\",\"bold\":false,\"align\":\"center\"}},{\"type\":\"Sprite\",\"props\":{\"y\":15.499999999999972,\"x\":491,\"name\":\"names\"},\"child\":[{\"type\":\"Label\",\"props\":{\"y\":0,\"x\":0,\"width\":302,\"text\":\"小草\",\"overflow\":\"hidden\",\"name\":\"user0\",\"height\":38,\"fontSize\":34,\"color\":\"#cd5216\",\"bold\":true,\"align\":\"center\"}},{\"type\":\"Label\",\"props\":{\"y\":42.00000000000003,\"x\":0,\"width\":302,\"text\":\"13401039814\",\"overflow\":\"hidden\",\"name\":\"user1\",\"height\":38,\"fontSize\":34,\"color\":\"#cd5216\",\"bold\":true,\"align\":\"center\"}},{\"type\":\"Label\",\"props\":{\"y\":84.00000000000003,\"x\":0,\"width\":302,\"text\":\"13401039814\",\"overflow\":\"hidden\",\"name\":\"user2\",\"height\":38,\"fontSize\":34,\"color\":\"#cd5216\",\"bold\":true,\"align\":\"center\"}},{\"type\":\"Label\",\"props\":{\"y\":126.00000000000003,\"x\":0,\"width\":302,\"text\":\"13401039814\",\"overflow\":\"hidden\",\"name\":\"user3\",\"height\":38,\"fontSize\":34,\"color\":\"#cd5216\",\"bold\":true,\"align\":\"center\"}}]},{\"type\":\"Sprite\",\"props\":{\"y\":14,\"x\":882,\"name\":\"scores\"},\"child\":[{\"type\":\"Label\",\"props\":{\"y\":0,\"x\":0,\"width\":230,\"text\":\"-1\",\"overflow\":\"hidden\",\"name\":\"score0\",\"height\":38,\"fontSize\":34,\"color\":\"#cd5216\",\"bold\":true,\"align\":\"center\"}},{\"type\":\"Label\",\"props\":{\"y\":43.00000000000003,\"x\":0,\"width\":230,\"text\":\"-2\",\"overflow\":\"hidden\",\"name\":\"score1\",\"height\":38,\"fontSize\":34,\"color\":\"#cd5216\",\"bold\":true,\"align\":\"center\"}},{\"type\":\"Label\",\"props\":{\"y\":86.00000000000003,\"x\":0,\"width\":230,\"text\":\"99\",\"overflow\":\"hidden\",\"name\":\"score2\",\"height\":38,\"fontSize\":34,\"color\":\"#cd5216\",\"bold\":true,\"align\":\"center\"}},{\"type\":\"Label\",\"props\":{\"y\":128.99999999999997,\"x\":0,\"width\":230,\"text\":\"999\",\"overflow\":\"hidden\",\"name\":\"score3\",\"height\":38,\"fontSize\":34,\"color\":\"#cd5216\",\"bold\":true,\"align\":\"center\"}}]}]},{\"type\":\"List\",\"props\":{\"y\":81,\"x\":0,\"width\":1287,\"var\":\"list\",\"height\":405}}]}]};}\r\n\t\t]);\r\n\t\treturn RoomHistoryListUI;\r\n\t})(View)\r\n\r\n\r\n\t//class ui.test.SettingDialogUI extends laya.ui.View\r\n\tvar SettingDialogUI=(function(_super){\r\n\t\tfunction SettingDialogUI(){\r\n\t\t\tthis.mainSprite=null;\r\n\t\t\tthis.yinxiaoSlider=null;\r\n\t\t\tthis.yinyueSlider=null;\r\n\t\t\tthis.yinxiaoCheckbox=null;\r\n\t\t\tthis.yinyueCheckbox=null;\r\n\t\t\tSettingDialogUI.__super.call(this);\r\n\t\t}\r\n\r\n\t\t__class(SettingDialogUI,'ui.test.SettingDialogUI',_super);\r\n\t\tvar __proto=SettingDialogUI.prototype;\r\n\t\t__proto.createChildren=function(){\r\n\t\t\tView.regComponent(\"Text\",Text);\r\n\t\t\tlaya.ui.Component.prototype.createChildren.call(this);\r\n\t\t\tthis.createView(SettingDialogUI.uiView);\r\n\t\t}\r\n\r\n\t\t__static(SettingDialogUI,\r\n\t\t['uiView',function(){return this.uiView={\"type\":\"View\",\"props\":{\"y\":0,\"x\":0,\"width\":896,\"text\":\"手机号：\",\"label\":\"下一步\",\"height\":241},\"child\":[{\"type\":\"Sprite\",\"props\":{\"y\":0,\"x\":0,\"width\":896,\"var\":\"mainSprite\",\"height\":241},\"child\":[{\"type\":\"Sprite\",\"props\":{\"y\":0,\"x\":0,\"scaleY\":1.2,\"scaleX\":1.2},\"child\":[{\"type\":\"HSlider\",\"props\":{\"y\":23.999999999999982,\"x\":166.99999999999997,\"var\":\"yinxiaoSlider\",\"value\":50,\"skin\":\"base/hslider.png\",\"scaleY\":1.5,\"scaleX\":1.5}},{\"type\":\"HSlider\",\"props\":{\"y\":113.00000000000001,\"x\":166.99999999999997,\"var\":\"yinyueSlider\",\"value\":50,\"skin\":\"base/hslider.png\",\"scaleY\":1.5,\"scaleX\":1.5}},{\"type\":\"Text\",\"props\":{\"y\":30.999999999999996,\"x\":44.00000000000001,\"width\":91,\"text\":\"音效\",\"fontSize\":\"48\",\"color\":\"#cd5216\",\"bold\":true}},{\"type\":\"CheckBox\",\"props\":{\"y\":19.000000000000004,\"x\":626,\"var\":\"yinxiaoCheckbox\",\"stateNum\":\"2\",\"skin\":\"base/volume.png\",\"scaleY\":1.5,\"scaleX\":1.5}},{\"type\":\"CheckBox\",\"props\":{\"y\":103,\"x\":626,\"var\":\"yinyueCheckbox\",\"stateNum\":\"2\",\"skin\":\"base/volume.png\",\"scaleY\":1.5,\"scaleX\":1.5}},{\"type\":\"Text\",\"props\":{\"y\":125,\"x\":46.00000000000004,\"width\":91,\"text\":\"音乐\",\"fontSize\":\"48\",\"color\":\"#cd5216\",\"bold\":true}}]}]}]};}\r\n\t\t]);\r\n\t\treturn SettingDialogUI;\r\n\t})(View)\r\n\r\n\r\n\t//class ui.test.UserDialogUI extends laya.ui.View\r\n\tvar UserDialogUI=(function(_super){\r\n\t\tfunction UserDialogUI(){\r\n\t\t\tthis.mainSprite=null;\r\n\t\t\tthis.userHead=null;\r\n\t\t\tthis.userHeadMask=null;\r\n\t\t\tthis.userHeadIconOut=null;\r\n\t\t\tthis.userHeadIcon=null;\r\n\t\t\tthis.userId=null;\r\n\t\t\tthis.userName=null;\r\n\t\t\tthis.ip=null;\r\n\t\t\tthis.userInfo0=null;\r\n\t\t\tthis.userInfo1=null;\r\n\t\t\tthis.userInfo2=null;\r\n\t\t\tUserDialogUI.__super.call(this);\r\n\t\t}\r\n\r\n\t\t__class(UserDialogUI,'ui.test.UserDialogUI',_super);\r\n\t\tvar __proto=UserDialogUI.prototype;\r\n\t\t__proto.createChildren=function(){\r\n\t\t\tView.regComponent(\"Text\",Text);\r\n\t\t\tlaya.ui.Component.prototype.createChildren.call(this);\r\n\t\t\tthis.createView(UserDialogUI.uiView);\r\n\t\t}\r\n\r\n\t\t__static(UserDialogUI,\r\n\t\t['uiView',function(){return this.uiView={\"type\":\"View\",\"props\":{\"y\":0,\"x\":0,\"width\":731,\"text\":\"距你：10公里\",\"label\":\"下一步\",\"height\":650},\"child\":[{\"type\":\"Sprite\",\"props\":{\"y\":0,\"x\":0,\"width\":731,\"var\":\"mainSprite\",\"height\":674},\"child\":[{\"type\":\"Sprite\",\"props\":{\"y\":66,\"x\":154.5,\"width\":422,\"var\":\"userHead\",\"height\":168},\"child\":[{\"type\":\"Sprite\",\"props\":{\"y\":-30,\"x\":-20,\"scaleY\":0.4,\"scaleX\":0.4},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":2,\"x\":-2,\"width\":133,\"skin\":\"ui/game/user_head_bg.png\",\"scaleY\":4,\"scaleX\":4,\"height\":133,\"sizeGrid\":\"60,60,60,60\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"width\":133,\"var\":\"userHeadMask\",\"skin\":\"ui/game/user_head_mask.png\",\"height\":133,\"sizeGrid\":\"60,60,60,60\"}},{\"type\":\"Sprite\",\"props\":{\"y\":0,\"x\":0,\"width\":133,\"var\":\"userHeadIconOut\",\"height\":133},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":4,\"x\":7,\"width\":119,\"var\":\"userHeadIcon\",\"skin\":\"ui/game/user_head_default.png\",\"pivotY\":0,\"pivotX\":0,\"height\":115}}]}]},{\"type\":\"Sprite\",\"props\":{\"y\":38,\"x\":550,\"scaleY\":3,\"scaleX\":3},\"child\":[{\"type\":\"Text\",\"props\":{\"y\":65.15384615384613,\"width\":208,\"var\":\"userId\",\"text\":\"ID:7777777\",\"height\":35,\"fontSize\":30,\"color\":\"#573a1e\",\"align\":\"center\"}},{\"type\":\"Text\",\"props\":{\"y\":1.1538461538460965,\"width\":208,\"var\":\"userName\",\"text\":\"用户名称\",\"height\":46,\"fontSize\":40,\"color\":\"#573a1e\",\"align\":\"center\"}},{\"type\":\"Text\",\"props\":{\"y\":117.15384615384616,\"width\":208,\"var\":\"ip\",\"text\":\"IP:192.168.3.2\",\"height\":35,\"fontSize\":30,\"color\":\"#573a1e\",\"align\":\"center\"}}]}]}]},{\"type\":\"Box\",\"props\":{\"y\":289,\"x\":54,\"width\":623,\"var\":\"userInfo0\",\"height\":120},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":618,\"width\":3,\"skin\":\"base/line_vertical.png\",\"rotation\":90,\"height\":620}},{\"type\":\"Text\",\"props\":{\"y\":31.5,\"x\":6,\"width\":246,\"text\":\"小草：\",\"name\":\"name\",\"height\":57,\"fontSize\":\"50\",\"color\":\"#000000\",\"align\":\"left\"}},{\"type\":\"Text\",\"props\":{\"y\":62,\"x\":214,\"width\":433,\"text\":\"距你：10公里\",\"name\":\"distance\",\"fontSize\":\"42\",\"color\":\"#cd5216\",\"align\":\"center\"}},{\"type\":\"Text\",\"props\":{\"y\":11,\"x\":216,\"width\":433,\"text\":\"IP:192.168.3.2\",\"name\":\"ip\",\"fontSize\":\"42\",\"color\":\"#cd5216\",\"align\":\"center\"}}]},{\"type\":\"Box\",\"props\":{\"y\":415,\"x\":54,\"width\":623,\"var\":\"userInfo1\",\"height\":120},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":618,\"width\":3,\"skin\":\"base/line_vertical.png\",\"rotation\":90,\"height\":620}},{\"type\":\"Text\",\"props\":{\"y\":31.5,\"x\":6,\"width\":246,\"text\":\"小草：\",\"name\":\"name\",\"height\":57,\"fontSize\":\"50\",\"color\":\"#000000\",\"align\":\"left\"}},{\"type\":\"Text\",\"props\":{\"y\":62,\"x\":214,\"width\":433,\"text\":\"距你：10公里\",\"name\":\"distance\",\"fontSize\":\"42\",\"color\":\"#cd5216\",\"align\":\"center\"}},{\"type\":\"Text\",\"props\":{\"y\":11,\"x\":216,\"width\":433,\"text\":\"IP:192.168.3.2\",\"name\":\"ip\",\"fontSize\":\"42\",\"color\":\"#cd5216\",\"align\":\"center\"}}]},{\"type\":\"Box\",\"props\":{\"y\":541,\"x\":54,\"width\":623,\"var\":\"userInfo2\",\"height\":120},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":618,\"width\":3,\"skin\":\"base/line_vertical.png\",\"rotation\":90,\"height\":620}},{\"type\":\"Text\",\"props\":{\"y\":31.5,\"x\":6,\"width\":246,\"text\":\"小草：\",\"name\":\"name\",\"height\":57,\"fontSize\":\"50\",\"color\":\"#000000\",\"align\":\"left\"}},{\"type\":\"Text\",\"props\":{\"y\":62,\"x\":214,\"width\":433,\"text\":\"距你：10公里\",\"name\":\"distance\",\"fontSize\":\"42\",\"color\":\"#cd5216\",\"align\":\"center\"}},{\"type\":\"Text\",\"props\":{\"y\":11,\"x\":216,\"width\":433,\"text\":\"IP:192.168.3.2\",\"name\":\"ip\",\"fontSize\":\"42\",\"color\":\"#cd5216\",\"align\":\"center\"}}]}]}]};}\r\n\t\t]);\r\n\t\treturn UserDialogUI;\r\n\t})(View)\r\n\r\n\r\n\t//class ui.test.LoadingUI extends laya.ui.View\r\n\tvar LoadingUI=(function(_super){\r\n\t\tfunction LoadingUI(){\r\n\t\t\tthis.bg=null;\r\n\t\t\tthis.progressBar=null;\r\n\t\t\tthis.progressBarLabel=null;\r\n\t\t\tLoadingUI.__super.call(this);\r\n\t\t}\r\n\r\n\t\t__class(LoadingUI,'ui.test.LoadingUI',_super);\r\n\t\tvar __proto=LoadingUI.prototype;\r\n\t\t__proto.createChildren=function(){\r\n\t\t\tlaya.ui.Component.prototype.createChildren.call(this);\r\n\t\t\tthis.createView(LoadingUI.uiView);\r\n\t\t}\r\n\r\n\t\t__static(LoadingUI,\r\n\t\t['uiView',function(){return this.uiView={\"type\":\"View\",\"props\":{\"width\":600,\"height\":1080},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"width\":1920,\"var\":\"bg\",\"skin\":\"ui/loading/bg.jpg\",\"height\":\"1080\"}},{\"type\":\"ProgressBar\",\"props\":{\"y\":999,\"x\":346,\"var\":\"progressBar\",\"skin\":\"ui/loading/progress.png\",\"sizeGrid\":\"11,7,12,7\"}},{\"type\":\"Label\",\"props\":{\"y\":1002,\"x\":346,\"width\":252,\"var\":\"progressBarLabel\",\"text\":\"加载中 100%\",\"height\":38,\"fontSize\":24,\"color\":\"#ffffff\",\"align\":\"center\"}}]};}\r\n\t\t]);\r\n\t\treturn LoadingUI;\r\n\t})(View)\r\n\r\n\r\n\t/**\r\n\t*<code>VBox</code> 是一个垂直布局容器类。\r\n\t*/\r\n\t//class laya.ui.HBox extends laya.ui.LayoutBox\r\n\tvar HBox=(function(_super){\r\n\t\tfunction HBox(){HBox.__super.call(this);;\r\n\t\t};\r\n\r\n\t\t__class(HBox,'laya.ui.HBox',_super);\r\n\t\tvar __proto=HBox.prototype;\r\n\t\t/**@inheritDoc */\r\n\t\t__proto.sortItem=function(items){\r\n\t\t\tif (items)items.sort(function(a,b){return a.x > b.x ? 1 :-1\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t/**@inheritDoc */\r\n\t\t__proto.changeItems=function(){\r\n\t\t\tthis._itemChanged=false;\r\n\t\t\tvar items=[];\r\n\t\t\tvar maxHeight=0;\r\n\t\t\tfor (var i=0,n=this.numChildren;i < n;i++){\r\n\t\t\t\tvar item=this.getChildAt(i);\r\n\t\t\t\tif (item){\r\n\t\t\t\t\titems.push(item);\r\n\t\t\t\t\tmaxHeight=Math.max(maxHeight,item.height *item.scaleY);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.sortItem(items);\r\n\t\t\tvar left=0;\r\n\t\t\tfor (i=0,n=this.numChildren;i < n;i++){\r\n\t\t\t\titem=items[i];\r\n\t\t\t\titem.x=left;\r\n\t\t\t\tleft+=item.width *item.scaleX+this._space;\r\n\t\t\t\tif (this._align==\"top\"){\r\n\t\t\t\t\titem.y=0;\r\n\t\t\t\t\t}else if (this._align==\"middle\"){\r\n\t\t\t\t\titem.y=(maxHeight-item.height *item.scaleY)*0.5;\r\n\t\t\t\t\t}else if (this._align==\"bottom\"){\r\n\t\t\t\t\titem.y=maxHeight-item.height *item.scaleY;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.changeSize();\r\n\t\t}\r\n\r\n\t\tHBox.NONE=\"none\";\r\n\t\tHBox.TOP=\"top\";\r\n\t\tHBox.MIDDLE=\"middle\";\r\n\t\tHBox.BOTTOM=\"bottom\";\r\n\t\treturn HBox;\r\n\t})(LayoutBox)\r\n\r\n\r\n\t/**\r\n\t*<code>VBox</code> 是一个垂直布局容器类。\r\n\t*/\r\n\t//class laya.ui.VBox extends laya.ui.LayoutBox\r\n\tvar VBox=(function(_super){\r\n\t\tfunction VBox(){VBox.__super.call(this);;\r\n\t\t};\r\n\r\n\t\t__class(VBox,'laya.ui.VBox',_super);\r\n\t\tvar __proto=VBox.prototype;\r\n\t\t/**@inheritDoc */\r\n\t\t__proto.changeItems=function(){\r\n\t\t\tthis._itemChanged=false;\r\n\t\t\tvar items=[];\r\n\t\t\tvar maxWidth=0;\r\n\t\t\tfor (var i=0,n=this.numChildren;i < n;i++){\r\n\t\t\t\tvar item=this.getChildAt(i);\r\n\t\t\t\tif (item){\r\n\t\t\t\t\titems.push(item);\r\n\t\t\t\t\tmaxWidth=Math.max(maxWidth,item.width *item.scaleX);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.sortItem(items);\r\n\t\t\tvar top=0;\r\n\t\t\tfor (i=0,n=this.numChildren;i < n;i++){\r\n\t\t\t\titem=items[i];\r\n\t\t\t\titem.y=top;\r\n\t\t\t\ttop+=item.height *item.scaleY+this._space;\r\n\t\t\t\tif (this._align==\"left\"){\r\n\t\t\t\t\titem.x=0;\r\n\t\t\t\t\t}else if (this._align==\"center\"){\r\n\t\t\t\t\titem.x=(maxWidth-item.width *item.scaleX)*0.5;\r\n\t\t\t\t\t}else if (this._align==\"right\"){\r\n\t\t\t\t\titem.x=maxWidth-item.width *item.scaleX;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.changeSize();\r\n\t\t}\r\n\r\n\t\tVBox.NONE=\"none\";\r\n\t\tVBox.LEFT=\"left\";\r\n\t\tVBox.CENTER=\"center\";\r\n\t\tVBox.RIGHT=\"right\";\r\n\t\treturn VBox;\r\n\t})(LayoutBox)\r\n\r\n\r\n\t/**\r\n\t*<code>RadioGroup</code> 控件定义一组 <code>Radio</code> 控件，这些控件相互排斥；\r\n\t*因此，用户每次只能选择一个 <code>Radio</code> 控件。\r\n\t*\r\n\t*@example 以下示例代码，创建了一个 <code>RadioGroup</code> 实例。\r\n\t*<listing version=\"3.0\">\r\n\t*package\r\n\t*{\r\n\t\t*import laya.ui.Radio;\r\n\t\t*import laya.ui.RadioGroup;\r\n\t\t*import laya.utils.Handler;\r\n\t\t*public class RadioGroup_Example\r\n\t\t*{\r\n\t\t\t*public function RadioGroup_Example()\r\n\t\t\t*{\r\n\t\t\t\t*Laya.init(640,800);//设置游戏画布宽高。\r\n\t\t\t\t*Laya.stage.bgColor=\"#efefef\";//设置画布的背景颜色。\r\n\t\t\t\t*Laya.loader.load([\"resource/ui/radio.png\"],Handler.create(this,onLoadComplete));//加载资源。\r\n\t\t\t\t*}\r\n\t\t\t*private function onLoadComplete():void\r\n\t\t\t*{\r\n\t\t\t\t*var radioGroup:RadioGroup=new RadioGroup();//创建一个 RadioGroup 类的实例对象 radioGroup 。\r\n\t\t\t\t*radioGroup.pos(100,100);//设置 radioGroup 的位置信息。\r\n\t\t\t\t*radioGroup.labels=\"item0,item1,item2\";//设置 radioGroup 的标签集。\r\n\t\t\t\t*radioGroup.skin=\"resource/ui/radio.png\";//设置 radioGroup 的皮肤。\r\n\t\t\t\t*radioGroup.space=10;//设置 radioGroup 的项间隔距离。\r\n\t\t\t\t*radioGroup.selectHandler=new Handler(this,onSelect);//设置 radioGroup 的选择项发生改变时执行的处理器。\r\n\t\t\t\t*Laya.stage.addChild(radioGroup);//将 radioGroup 添加到显示列表。\r\n\t\t\t\t*}\r\n\t\t\t*private function onSelect(index:int):void\r\n\t\t\t*{\r\n\t\t\t\t*trace(\"当前选择的单选按钮索引: index= \",index);\r\n\t\t\t\t*}\r\n\t\t\t*}\r\n\t\t*}\r\n\t*</listing>\r\n\t*<listing version=\"3.0\">\r\n\t*Laya.init(640,800);//设置游戏画布宽高、渲染模式\r\n\t*Laya.stage.bgColor=\"#efefef\";//设置画布的背景颜色\r\n\t*Laya.loader.load([\"resource/ui/radio.png\"],laya.utils.Handler.create(this,onLoadComplete));\r\n\t*function onLoadComplete(){\r\n\t\t*var radioGroup=new laya.ui.RadioGroup();//创建一个 RadioGroup 类的实例对象 radioGroup 。\r\n\t\t*radioGroup.pos(100,100);//设置 radioGroup 的位置信息。\r\n\t\t*radioGroup.labels=\"item0,item1,item2\";//设置 radioGroup 的标签集。\r\n\t\t*radioGroup.skin=\"resource/ui/radio.png\";//设置 radioGroup 的皮肤。\r\n\t\t*radioGroup.space=10;//设置 radioGroup 的项间隔距离。\r\n\t\t*radioGroup.selectHandler=new laya.utils.Handler(this,onSelect);//设置 radioGroup 的选择项发生改变时执行的处理器。\r\n\t\t*Laya.stage.addChild(radioGroup);//将 radioGroup 添加到显示列表。\r\n\t\t*}\r\n\t*function onSelect(index){\r\n\t\t*console.log(\"当前选择的单选按钮索引: index= \",index);\r\n\t\t*}\r\n\t*</listing>\r\n\t*<listing version=\"3.0\">\r\n\t*import Radio=laya.ui.Radio;\r\n\t*import RadioGroup=laya.ui.RadioGroup;\r\n\t*import Handler=laya.utils.Handler;\r\n\t*class RadioGroup_Example {\r\n\t\t*constructor(){\r\n\t\t\t*Laya.init(640,800);//设置游戏画布宽高。\r\n\t\t\t*Laya.stage.bgColor=\"#efefef\";//设置画布的背景颜色。\r\n\t\t\t*Laya.loader.load([\"resource/ui/radio.png\"],Handler.create(this,this.onLoadComplete));//加载资源。\r\n\t\t\t*}\r\n\t\t*private onLoadComplete():void {\r\n\t\t\t*var radioGroup:RadioGroup=new RadioGroup();//创建一个 RadioGroup 类的实例对象 radioGroup 。\r\n\t\t\t*radioGroup.pos(100,100);//设置 radioGroup 的位置信息。\r\n\t\t\t*radioGroup.labels=\"item0,item1,item2\";//设置 radioGroup 的标签集。\r\n\t\t\t*radioGroup.skin=\"resource/ui/radio.png\";//设置 radioGroup 的皮肤。\r\n\t\t\t*radioGroup.space=10;//设置 radioGroup 的项间隔距离。\r\n\t\t\t*radioGroup.selectHandler=new Handler(this,this.onSelect);//设置 radioGroup 的选择项发生改变时执行的处理器。\r\n\t\t\t*Laya.stage.addChild(radioGroup);//将 radioGroup 添加到显示列表。\r\n\t\t\t*}\r\n\t\t*private onSelect(index:number):void {\r\n\t\t\t*console.log(\"当前选择的单选按钮索引: index= \",index);\r\n\t\t\t*}\r\n\t\t*}\r\n\t*</listing>\r\n\t*/\r\n\t//class laya.ui.RadioGroup extends laya.ui.UIGroup\r\n\tvar RadioGroup=(function(_super){\r\n\t\tfunction RadioGroup(){RadioGroup.__super.call(this);;\r\n\t\t};\r\n\r\n\t\t__class(RadioGroup,'laya.ui.RadioGroup',_super);\r\n\t\tvar __proto=RadioGroup.prototype;\r\n\t\t/**@inheritDoc */\r\n\t\t__proto.createItem=function(skin,label){\r\n\t\t\treturn new Radio1(skin,label);\r\n\t\t}\r\n\r\n\t\treturn RadioGroup;\r\n\t})(UIGroup)\r\n\r\n\r\n\t/**\r\n\t*<code>Tab</code> 组件用来定义选项卡按钮组。 *\r\n\t*@internal <p>属性：<code>selectedIndex</code> 的默认值为-1。</p>\r\n\t*\r\n\t*@example 以下示例代码，创建了一个 <code>Tab</code> 实例。\r\n\t*<listing version=\"3.0\">\r\n\t*package\r\n\t*{\r\n\t\t*import laya.ui.Tab;\r\n\t\t*import laya.utils.Handler;\r\n\t\t*public class Tab_Example\r\n\t\t*{\r\n\t\t\t*public function Tab_Example()\r\n\t\t\t*{\r\n\t\t\t\t*Laya.init(640,800);//设置游戏画布宽高。\r\n\t\t\t\t*Laya.stage.bgColor=\"#efefef\";//设置画布的背景颜色。\r\n\t\t\t\t*Laya.loader.load([\"resource/ui/tab.png\"],Handler.create(this,onLoadComplete));//加载资源。\r\n\t\t\t\t*}\r\n\t\t\t*private function onLoadComplete():void\r\n\t\t\t*{\r\n\t\t\t\t*var tab:Tab=new Tab();//创建一个 Tab 类的实例对象 tab 。\r\n\t\t\t\t*tab.skin=\"resource/ui/tab.png\";//设置 tab 的皮肤。\r\n\t\t\t\t*tab.labels=\"item0,item1,item2\";//设置 tab 的标签集。\r\n\t\t\t\t*tab.x=100;//设置 tab 对象的属性 x 的值，用于控制 tab 对象的显示位置。\r\n\t\t\t\t*tab.y=100;//设置 tab 对象的属性 y 的值，用于控制 tab 对象的显示位置。\r\n\t\t\t\t*tab.selectHandler=new Handler(this,onSelect);//设置 tab 的选择项发生改变时执行的处理器。\r\n\t\t\t\t*Laya.stage.addChild(tab);//将 tab 添到显示列表。\r\n\t\t\t\t*}\r\n\t\t\t*private function onSelect(index:int):void\r\n\t\t\t*{\r\n\t\t\t\t*trace(\"当前选择的表情页索引: index= \",index);\r\n\t\t\t\t*}\r\n\t\t\t*}\r\n\t\t*}\r\n\t*</listing>\r\n\t*<listing version=\"3.0\">\r\n\t*Laya.init(640,800);//设置游戏画布宽高\r\n\t*Laya.stage.bgColor=\"#efefef\";//设置画布的背景颜色\r\n\t*Laya.loader.load([\"resource/ui/tab.png\"],laya.utils.Handler.create(this,onLoadComplete));\r\n\t*function onLoadComplete(){\r\n\t\t*var tab=new laya.ui.Tab();//创建一个 Tab 类的实例对象 tab 。\r\n\t\t*tab.skin=\"resource/ui/tab.png\";//设置 tab 的皮肤。\r\n\t\t*tab.labels=\"item0,item1,item2\";//设置 tab 的标签集。\r\n\t\t*tab.x=100;//设置 tab 对象的属性 x 的值，用于控制 tab 对象的显示位置。\r\n\t\t*tab.y=100;//设置 tab 对象的属性 y 的值，用于控制 tab 对象的显示位置。\r\n\t\t*tab.selectHandler=new laya.utils.Handler(this,onSelect);//设置 tab 的选择项发生改变时执行的处理器。\r\n\t\t*Laya.stage.addChild(tab);//将 tab 添到显示列表。\r\n\t\t*}\r\n\t*function onSelect(index){\r\n\t\t*console.log(\"当前选择的标签页索引: index= \",index);\r\n\t\t*}\r\n\t*</listing>\r\n\t*<listing version=\"3.0\">\r\n\t*import Tab=laya.ui.Tab;\r\n\t*import Handler=laya.utils.Handler;\r\n\t*class Tab_Example {\r\n\t\t*constructor(){\r\n\t\t\t*Laya.init(640,800);//设置游戏画布宽高。\r\n\t\t\t*Laya.stage.bgColor=\"#efefef\";//设置画布的背景颜色。\r\n\t\t\t*Laya.loader.load([\"resource/ui/tab.png\"],Handler.create(this,this.onLoadComplete));//加载资源。\r\n\t\t\t*}\r\n\t\t*private onLoadComplete():void {\r\n\t\t\t*var tab:Tab=new Tab();//创建一个 Tab 类的实例对象 tab 。\r\n\t\t\t*tab.skin=\"resource/ui/tab.png\";//设置 tab 的皮肤。\r\n\t\t\t*tab.labels=\"item0,item1,item2\";//设置 tab 的标签集。\r\n\t\t\t*tab.x=100;//设置 tab 对象的属性 x 的值，用于控制 tab 对象的显示位置。\r\n\t\t\t*tab.y=100;//设置 tab 对象的属性 y 的值，用于控制 tab 对象的显示位置。\r\n\t\t\t*tab.selectHandler=new Handler(this,this.onSelect);//设置 tab 的选择项发生改变时执行的处理器。\r\n\t\t\t*Laya.stage.addChild(tab);//将 tab 添到显示列表。\r\n\t\t\t*}\r\n\t\t*private onSelect(index:number):void {\r\n\t\t\t*console.log(\"当前选择的表情页索引: index= \",index);\r\n\t\t\t*}\r\n\t\t*}\r\n\t*</listing>\r\n\t*/\r\n\t//class laya.ui.Tab extends laya.ui.UIGroup\r\n\tvar Tab=(function(_super){\r\n\t\tfunction Tab(){Tab.__super.call(this);;\r\n\t\t};\r\n\r\n\t\t__class(Tab,'laya.ui.Tab',_super);\r\n\t\tvar __proto=Tab.prototype;\r\n\t\t/**\r\n\t\t*@private\r\n\t\t*@inheritDoc\r\n\t\t*/\r\n\t\t__proto.createItem=function(skin,label){\r\n\t\t\treturn new Button(skin,label);\r\n\t\t}\r\n\r\n\t\treturn Tab;\r\n\t})(UIGroup)\r\n\r\n\r\n\t/**\r\n\t*<code>TextArea</code> 类用于创建显示对象以显示和输入文本。\r\n\t*@example 以下示例代码，创建了一个 <code>TextArea</code> 实例。\r\n\t*<listing version=\"3.0\">\r\n\t*package\r\n\t*{\r\n\t\t*import laya.ui.TextArea;\r\n\t\t*import laya.utils.Handler;\r\n\t\t*public class TextArea_Example\r\n\t\t*{\r\n\t\t\t*public function TextArea_Example()\r\n\t\t\t*{\r\n\t\t\t\t*Laya.init(640,800);//设置游戏画布宽高。\r\n\t\t\t\t*Laya.stage.bgColor=\"#efefef\";//设置画布的背景颜色。\r\n\t\t\t\t*Laya.loader.load([\"resource/ui/input.png\"],Handler.create(this,onLoadComplete));//加载资源。\r\n\t\t\t\t*}\r\n\t\t\t*private function onLoadComplete():void\r\n\t\t\t*{\r\n\t\t\t\t*var textArea:TextArea=new TextArea(\"这个一个TextArea实例。\");//创建一个 TextArea 类的实例对象 textArea 。\r\n\t\t\t\t*textArea.skin=\"resource/ui/input.png\";//设置 textArea 的皮肤。\r\n\t\t\t\t*textArea.sizeGrid=\"4,4,4,4\";//设置 textArea 的网格信息。\r\n\t\t\t\t*textArea.color=\"#008fff\";//设置 textArea 的文本颜色。\r\n\t\t\t\t*textArea.font=\"Arial\";//设置 textArea 的字体。\r\n\t\t\t\t*textArea.bold=true;//设置 textArea 的文本显示为粗体。\r\n\t\t\t\t*textArea.fontSize=20;//设置 textArea 的文本字体大小。\r\n\t\t\t\t*textArea.wordWrap=true;//设置 textArea 的文本自动换行。\r\n\t\t\t\t*textArea.x=100;//设置 textArea 对象的属性 x 的值，用于控制 textArea 对象的显示位置。\r\n\t\t\t\t*textArea.y=100;//设置 textArea 对象的属性 y 的值，用于控制 textArea 对象的显示位置。\r\n\t\t\t\t*textArea.width=300;//设置 textArea 的宽度。\r\n\t\t\t\t*textArea.height=200;//设置 textArea 的高度。\r\n\t\t\t\t*Laya.stage.addChild(textArea);//将 textArea 添加到显示列表。\r\n\t\t\t\t*}\r\n\t\t\t*}\r\n\t\t*}\r\n\t*</listing>\r\n\t*<listing version=\"3.0\">\r\n\t*Laya.init(640,800);//设置游戏画布宽高、渲染模式\r\n\t*Laya.stage.bgColor=\"#efefef\";//设置画布的背景颜色\r\n\t*Laya.loader.load([\"resource/ui/input.png\"],laya.utils.Handler.create(this,onLoadComplete));//加载资源。\r\n\t*function onLoadComplete(){\r\n\t\t*var textArea=new laya.ui.TextArea(\"这个一个TextArea实例。\");//创建一个 TextArea 类的实例对象 textArea 。\r\n\t\t*textArea.skin=\"resource/ui/input.png\";//设置 textArea 的皮肤。\r\n\t\t*textArea.sizeGrid=\"4,4,4,4\";//设置 textArea 的网格信息。\r\n\t\t*textArea.color=\"#008fff\";//设置 textArea 的文本颜色。\r\n\t\t*textArea.font=\"Arial\";//设置 textArea 的字体。\r\n\t\t*textArea.bold=true;//设置 textArea 的文本显示为粗体。\r\n\t\t*textArea.fontSize=20;//设置 textArea 的文本字体大小。\r\n\t\t*textArea.wordWrap=true;//设置 textArea 的文本自动换行。\r\n\t\t*textArea.x=100;//设置 textArea 对象的属性 x 的值，用于控制 textArea 对象的显示位置。\r\n\t\t*textArea.y=100;//设置 textArea 对象的属性 y 的值，用于控制 textArea 对象的显示位置。\r\n\t\t*textArea.width=300;//设置 textArea 的宽度。\r\n\t\t*textArea.height=200;//设置 textArea 的高度。\r\n\t\t*Laya.stage.addChild(textArea);//将 textArea 添加到显示列表。\r\n\t\t*}\r\n\t*</listing>\r\n\t*<listing version=\"3.0\">\r\n\t*import TextArea=laya.ui.TextArea;\r\n\t*import Handler=laya.utils.Handler;\r\n\t*class TextArea_Example {\r\n\t\t*constructor(){\r\n\t\t\t*Laya.init(640,800);//设置游戏画布宽高、渲染模式。\r\n\t\t\t*Laya.stage.bgColor=\"#efefef\";//设置画布的背景颜色。\r\n\t\t\t*Laya.loader.load([\"resource/ui/input.png\"],Handler.create(this,this.onLoadComplete));//加载资源。\r\n\t\t\t*}\r\n\t\t*private onLoadComplete():void {\r\n\t\t\t*var textArea:TextArea=new TextArea(\"这个一个TextArea实例。\");//创建一个 TextArea 类的实例对象 textArea 。\r\n\t\t\t*textArea.skin=\"resource/ui/input.png\";//设置 textArea 的皮肤。\r\n\t\t\t*textArea.sizeGrid=\"4,4,4,4\";//设置 textArea 的网格信息。\r\n\t\t\t*textArea.color=\"#008fff\";//设置 textArea 的文本颜色。\r\n\t\t\t*textArea.font=\"Arial\";//设置 textArea 的字体。\r\n\t\t\t*textArea.bold=true;//设置 textArea 的文本显示为粗体。\r\n\t\t\t*textArea.fontSize=20;//设置 textArea 的文本字体大小。\r\n\t\t\t*textArea.wordWrap=true;//设置 textArea 的文本自动换行。\r\n\t\t\t*textArea.x=100;//设置 textArea 对象的属性 x 的值，用于控制 textArea 对象的显示位置。\r\n\t\t\t*textArea.y=100;//设置 textArea 对象的属性 y 的值，用于控制 textArea 对象的显示位置。\r\n\t\t\t*textArea.width=300;//设置 textArea 的宽度。\r\n\t\t\t*textArea.height=200;//设置 textArea 的高度。\r\n\t\t\t*Laya.stage.addChild(textArea);//将 textArea 添加到显示列表。\r\n\t\t\t*}\r\n\t\t*}\r\n\t*</listing>\r\n\t*/\r\n\t//class laya.ui.TextArea extends laya.ui.TextInput\r\n\tvar TextArea=(function(_super){\r\n\t\tfunction TextArea(text){\r\n\t\t\tthis._vScrollBar=null;\r\n\t\t\tthis._hScrollBar=null;\r\n\t\t\t(text===void 0)&& (text=\"\");\r\n\t\t\tTextArea.__super.call(this,text);\r\n\t\t}\r\n\r\n\t\t__class(TextArea,'laya.ui.TextArea',_super);\r\n\t\tvar __proto=TextArea.prototype;\r\n\t\t__proto.destroy=function(destroyChild){\r\n\t\t\t(destroyChild===void 0)&& (destroyChild=true);\r\n\t\t\t_super.prototype.destroy.call(this,destroyChild);\r\n\t\t\tthis._vScrollBar && this._vScrollBar.destroy();\r\n\t\t\tthis._hScrollBar && this._hScrollBar.destroy();\r\n\t\t\tthis._vScrollBar=null;\r\n\t\t\tthis._hScrollBar=null;\r\n\t\t}\r\n\r\n\t\t__proto.initialize=function(){\r\n\t\t\tthis.width=180;\r\n\t\t\tthis.height=150;\r\n\t\t\tthis._tf.wordWrap=true;\r\n\t\t\tthis.multiline=true;\r\n\t\t}\r\n\r\n\t\t__proto.onVBarChanged=function(e){\r\n\t\t\tif (this._tf.scrollY !=this._vScrollBar.value){\r\n\t\t\t\tthis._tf.scrollY=this._vScrollBar.value;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__proto.onHBarChanged=function(e){\r\n\t\t\tif (this._tf.scrollX !=this._hScrollBar.value){\r\n\t\t\t\tthis._tf.scrollX=this._hScrollBar.value;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__proto.changeScroll=function(){\r\n\t\t\tvar vShow=this._vScrollBar && this._tf.maxScrollY > 0;\r\n\t\t\tvar hShow=this._hScrollBar && this._tf.maxScrollX > 0;\r\n\t\t\tvar showWidth=vShow ? this._width-this._vScrollBar.width :this._width;\r\n\t\t\tvar showHeight=hShow ? this._height-this._hScrollBar.height :this._height;\r\n\t\t\tvar padding=this._tf.padding || Styles.labelPadding;\r\n\t\t\tthis._tf.width=showWidth;\r\n\t\t\tthis._tf.height=showHeight;\r\n\t\t\tif (this._vScrollBar){\r\n\t\t\t\tthis._vScrollBar.x=this._width-this._vScrollBar.width-padding[2];\r\n\t\t\t\tthis._vScrollBar.y=padding[1];\r\n\t\t\t\tthis._vScrollBar.height=this._height-(hShow ? this._hScrollBar.height :0)-padding[1]-padding[3];\r\n\t\t\t\tthis._vScrollBar.scrollSize=1;\r\n\t\t\t\tthis._vScrollBar.thumbPercent=showHeight / Math.max(this._tf.textHeight,showHeight);\r\n\t\t\t\tthis._vScrollBar.setScroll(1,this._tf.maxScrollY,this._tf.scrollY);\r\n\t\t\t\tthis._vScrollBar.visible=vShow;\r\n\t\t\t}\r\n\t\t\tif (this._hScrollBar){\r\n\t\t\t\tthis._hScrollBar.x=padding[0];\r\n\t\t\t\tthis._hScrollBar.y=this._height-this._hScrollBar.height-padding[3];\r\n\t\t\t\tthis._hScrollBar.width=this._width-(vShow ? this._vScrollBar.width :0)-padding[0]-padding[2];\r\n\t\t\t\tthis._hScrollBar.scrollSize=Math.max(showWidth *0.033,1);\r\n\t\t\t\tthis._hScrollBar.thumbPercent=showWidth / Math.max(this._tf.textWidth,showWidth);\r\n\t\t\t\tthis._hScrollBar.setScroll(0,this.maxScrollX,this.scrollX);\r\n\t\t\t\tthis._hScrollBar.visible=hShow;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**滚动到某个位置*/\r\n\t\t__proto.scrollTo=function(y){\r\n\t\t\tthis.commitMeasure();\r\n\t\t\tthis._tf.scrollY=y;\r\n\t\t}\r\n\r\n\t\t/**水平滚动值*/\r\n\t\t__getset(0,__proto,'scrollX',function(){\r\n\t\t\treturn this._tf.scrollX;\r\n\t\t});\r\n\r\n\t\t/**水平滚动最大值*/\r\n\t\t__getset(0,__proto,'maxScrollX',function(){\r\n\t\t\treturn this._tf.maxScrollX;\r\n\t\t});\r\n\r\n\t\t/**垂直滚动最大值*/\r\n\t\t__getset(0,__proto,'maxScrollY',function(){\r\n\t\t\treturn this._tf.maxScrollY;\r\n\t\t});\r\n\r\n\t\t/**垂直滚动值*/\r\n\t\t__getset(0,__proto,'scrollY',function(){\r\n\t\t\treturn this._tf.scrollY;\r\n\t\t});\r\n\r\n\t\t__getset(0,__proto,'width',_super.prototype._$get_width,function(value){\r\n\t\t\t_super.prototype._$set_width.call(this,value);\r\n\t\t\tthis.callLater(this.changeScroll);\r\n\t\t});\r\n\r\n\t\t/**垂直滚动条实体*/\r\n\t\t__getset(0,__proto,'vScrollBar',function(){\r\n\t\t\treturn this._vScrollBar;\r\n\t\t});\r\n\r\n\t\t/**水平滚动条实体*/\r\n\t\t__getset(0,__proto,'hScrollBar',function(){\r\n\t\t\treturn this._hScrollBar;\r\n\t\t});\r\n\r\n\t\t/**水平滚动条皮肤*/\r\n\t\t__getset(0,__proto,'hScrollBarSkin',function(){\r\n\t\t\treturn this._hScrollBar ? this._hScrollBar.skin :null;\r\n\t\t\t},function(value){\r\n\t\t\tif (this._hScrollBar==null){\r\n\t\t\t\tthis.addChild(this._hScrollBar=new HScrollBar());\r\n\t\t\t\tthis._hScrollBar.on(\"change\",this,this.onHBarChanged);\r\n\t\t\t\tthis._hScrollBar.mouseWheelEnable=false;\r\n\t\t\t\tthis._hScrollBar.target=this._tf;\r\n\t\t\t\tthis.callLater(this.changeScroll);\r\n\t\t\t}\r\n\t\t\tthis._hScrollBar.skin=value;\r\n\t\t});\r\n\r\n\t\t/**垂直滚动条皮肤*/\r\n\t\t__getset(0,__proto,'vScrollBarSkin',function(){\r\n\t\t\treturn this._vScrollBar ? this._vScrollBar.skin :null;\r\n\t\t\t},function(value){\r\n\t\t\tif (this._vScrollBar==null){\r\n\t\t\t\tthis.addChild(this._vScrollBar=new VScrollBar());\r\n\t\t\t\tthis._vScrollBar.on(\"change\",this,this.onVBarChanged);\r\n\t\t\t\tthis._vScrollBar.target=this._tf;\r\n\t\t\t\tthis.callLater(this.changeScroll);\r\n\t\t\t}\r\n\t\t\tthis._vScrollBar.skin=value;\r\n\t\t});\r\n\r\n\t\t__getset(0,__proto,'height',_super.prototype._$get_height,function(value){\r\n\t\t\t_super.prototype._$set_height.call(this,value);\r\n\t\t\tthis.callLater(this.changeScroll);\r\n\t\t});\r\n\r\n\t\treturn TextArea;\r\n\t})(TextInput)\r\n\r\n\r\n\t/**\r\n\t*@author zuoge85@gmail.com on 2016/11/4.\r\n\t*/\r\n\t//class view.GameTableView extends ui.test.GameTableUI\r\n\tvar GameTableView=(function(_super){\r\n\t\tfunction GameTableView(isMyCreate){\r\n\t\t\tthis.defaultHeadIconSkin=null;\r\n\t\t\tthis.nHeadWidth=NaN;\r\n\t\t\tthis.nHeadHeight=NaN;\r\n\t\t\tthis.nHeadIconLeft=NaN;\r\n\t\t\tthis.nHeadIconTop=NaN;\r\n\t\t\tthis.nTingPaiBgWidth=NaN;\r\n\t\t\tthis.nUserHead0Height=NaN;\r\n\t\t\tthis.nUserHead1Left=NaN;\r\n\t\t\tthis.nUserHead2Height=NaN;\r\n\t\t\tthis.nUserHead3Top=NaN;\r\n\t\t\tthis.nUserHeadRatio=NaN;\r\n\t\t\tthis.nTurntableRatio=NaN;\r\n\t\t\tthis.nLogoBtnLeft=NaN;\r\n\t\t\tthis.nLogoBtnTop=NaN;\r\n\t\t\tthis.nDelRoomBtnLeft=NaN;\r\n\t\t\tthis.nDelRoomBtnTop=NaN;\r\n\t\t\tthis.nInviteBtnLeft=NaN;\r\n\t\t\tthis.nInviteBtnTop=NaN;\r\n\t\t\tthis.nShouPai3Ratio=NaN;\r\n\t\t\tthis.nShouPai2Ratio=NaN;\r\n\t\t\tthis.nShouPai1Ratio=NaN;\r\n\t\t\tthis.nShouPai0Ratio=NaN;\r\n\t\t\tthis.nOutPaiMovieRatio=NaN;\r\n\t\t\tthis.nOutPaiMovie0X=NaN;\r\n\t\t\tthis.nOutPaiMovie0Y=NaN;\r\n\t\t\tthis.nOutPaiMovie1X=NaN;\r\n\t\t\tthis.nOutPaiMovie1Y=NaN;\r\n\t\t\tthis.nOutPaiMovie2X=NaN;\r\n\t\t\tthis.nOutPaiMovie2Y=NaN;\r\n\t\t\tthis.nOutPaiMovie3X=NaN;\r\n\t\t\tthis.nOutPaiMovie3Y=NaN;\r\n\t\t\tthis._isMyCreate=false;\r\n\t\t\tthis.shouPaiWidth=NaN;\r\n\t\t\tthis.shouPaiHeight=NaN;\r\n\t\t\tthis._isWaitOut=false;\r\n\t\t\tGameTableView.__super.call(this);\r\n\t\t\tthis._isMyCreate=isMyCreate;\r\n\t\t\tthis.nTurntableRatio=this.turntable.scaleX;\r\n\t\t\tthis.defaultHeadIconSkin=this.userHeadIcon0.skin;\r\n\t\t\tthis.nHeadWidth=this.userHeadIcon0.width;\r\n\t\t\tthis.nHeadHeight=this.userHeadIcon0.height;\r\n\t\t\tthis.nHeadIconLeft=this.userHeadIcon0.x;\r\n\t\t\tthis.nHeadIconTop=this.userHeadIcon0.y;\r\n\t\t\tthis.nTingPaiBgWidth=this.tingPaiBg.width;\r\n\t\t\tthis.nUserHeadRatio=this.userHead0.scaleX;\r\n\t\t\tthis.nUserHead0Height=this.userHead0.height;\r\n\t\t\tthis.nUserHead1Left=this.userHead1.x;\r\n\t\t\tthis.nUserHead2Height=this.userHead2.height;\r\n\t\t\tthis.nUserHead3Top=this.userHead3.y;\r\n\t\t\tthis.nDelRoomBtnLeft=this.delRoomBtn.x;\r\n\t\t\tthis.nDelRoomBtnTop=this.delRoomBtn.y;\r\n\t\t\tthis.nLogoBtnLeft=this.logo.x;\r\n\t\t\tthis.nLogoBtnTop=this.logo.y;\r\n\t\t\tthis.nInviteBtnLeft=this.inviteBtn.x;\r\n\t\t\tthis.nInviteBtnTop=this.inviteBtn.y;\r\n\t\t\tthis.nShouPai3Ratio=this.shouPai3.scaleX;\r\n\t\t\tthis.nShouPai2Ratio=this.shouPai2.scaleX;\r\n\t\t\tthis.nShouPai1Ratio=this.shouPai1.scaleX;\r\n\t\t\tthis.nShouPai0Ratio=this.shouPai0.scaleX;\r\n\t\t\tthis.shouPaiWidth=this.shou3.width;\r\n\t\t\tthis.shouPaiHeight=this.shou3.height;\r\n\t\t\tthis.gameSprite.visible=false;\r\n\t\t\tfor (var i=0;i < 4;i++){\r\n\t\t\t\tthis[\"userHeadIconOut\"+i].mask=this[\"userHeadMask\"+i];\r\n\t\t\t\tthis.setUserHeadVisible(i,false);\r\n\t\t\t\tvar outPaiMovie=this[\"outPaiMovie\"+i];\r\n\t\t\t\tthis[\"nOutPaiMovie\"+i+\"X\"]=outPaiMovie.x;\r\n\t\t\t\tthis[\"nOutPaiMovie\"+i+\"Y\"]=outPaiMovie.y;\r\n\t\t\t\toutPaiMovie.visible=false;\r\n\t\t\t}\r\n\t\t\tthis.nOutPaiMovieRatio=this.outPaiMovie0.scaleX;\r\n\t\t\tLaya.stage.on(\"resize\",this,this.layout);\r\n\t\t\tLaya.stage.on(\"added\",this,this.layout);\r\n\t\t\tthis.initShou(3);\r\n\t\t\tthis.initShou(2);\r\n\t\t\tthis.initShou(1);\r\n\t\t\tthis.initShou(0);\r\n\t\t\tthis.layout();\r\n\t\t}\r\n\r\n\t\t__class(GameTableView,'view.GameTableView',_super);\r\n\t\tvar __proto=GameTableView.prototype;\r\n\t\t__proto.layout=function(){\r\n\t\t\tvar bWidth=Browser.width;\r\n\t\t\tvar bHeight=Browser.height;\r\n\t\t\tvar ratio=UiHelps.getGameRatio();\r\n\t\t\tvar bgWidth=bWidth / ratio;\r\n\t\t\tvar bgHeight=bHeight / ratio;\r\n\t\t\tvar wChange=bgWidth-1902;\r\n\t\t\tvar hChange=bgHeight-1080;\r\n\t\t\tthis.logo.x=this.nLogoBtnLeft+wChange / 2;\r\n\t\t\tthis.logo.y=this.nLogoBtnTop+hChange / 2;\r\n\t\t\tthis.delRoomBtn.x=this.nDelRoomBtnLeft+wChange / 2;\r\n\t\t\tthis.delRoomBtn.y=this.nDelRoomBtnTop+hChange / 2;\r\n\t\t\tthis.inviteBtn.x=this.nInviteBtnLeft+wChange / 2;\r\n\t\t\tthis.inviteBtn.y=this.nInviteBtnTop+hChange / 2;\r\n\t\t\tthis.bgImage.size(bgWidth,bgHeight);\r\n\t\t\tthis.bg.scale(ratio,ratio);\r\n\t\t\tthis.bg.size(bWidth,bHeight);\r\n\t\t\tthis.waitSprite.scale(ratio,ratio);\r\n\t\t\tthis.waitSprite.size(bWidth+2000,bHeight+2000);\r\n\t\t\tthis.layoutGame();\r\n\t\t\tthis.gameSprite.size(bWidth+2000,bHeight+2000);\r\n\t\t\tthis.heads.size(bWidth+2000,bHeight+2000);\r\n\t\t\tthis.heads.mouseThrough=true;\r\n\t\t\tthis.gameSprite.mouseThrough=true;\r\n\t\t\tthis.waitSprite.mouseThrough=true;\r\n\t\t\tthis.movieSprite.mouseEnabled=false;\r\n\t\t\tfor (var i=0;i < this.gameSprite.numChildren;i++){\r\n\t\t\t\tvar node=(this.gameSprite.getChildAt(i));\r\n\t\t\t\tnode.mouseEnabled=false;\r\n\t\t\t}\r\n\t\t\tthis.shouPai3.mouseEnabled=true;\r\n\t\t\tthis.movieSprite.scale(ratio,ratio);\r\n\t\t\tthis.size(bWidth+2000,bHeight+2000);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*布局正面等！\r\n\t\t*/\r\n\t\t__proto.layoutGame=function(){\r\n\t\t\tvar bWidth=Browser.width;\r\n\t\t\tvar bHeight=Browser.height;\r\n\t\t\tvar ratioX=UiHelps.getGameRatioX();\r\n\t\t\tvar ratioY=UiHelps.getGameRatioY();\r\n\t\t\tvar ratio=UiHelps.getGameRatio();\r\n\t\t\tvar bgWidth=bWidth / ratio;\r\n\t\t\tvar bgHeight=bHeight / ratio;\r\n\t\t\tvar wChange=bgWidth-1902;\r\n\t\t\tvar hChange=bgHeight-1080;\r\n\t\t\tthis.buttons.scale(ratio,ratio);\r\n\t\t\tthis.buttons.x=bWidth-this.buttons.width *ratioX;\r\n\t\t\tconsole.log(this.buttons.x);\r\n\t\t\tvar shouPai3Ratio=this.nShouPai3Ratio *ratioX;\r\n\t\t\tthis.shouPai3.scale(shouPai3Ratio,shouPai3Ratio);\r\n\t\t\tthis.shouPai3.x=(bWidth-(this.shouPai3.width *shouPai3Ratio))/ 2;\r\n\t\t\tvar shouPai3Height=this.shouPai3.height *shouPai3Ratio;\r\n\t\t\tthis.shouPai3.y=(bHeight-(shouPai3Height));\r\n\t\t\tvar headRatio=ratio *this.nUserHeadRatio;\r\n\t\t\tthis.userHead3.scale(headRatio,headRatio);\r\n\t\t\tthis.userHead3.y=this.shouPai3.y-(this.userHead3.height *headRatio);\r\n\t\t\tvar userHead3Height=this.userHead3.height *headRatio;\r\n\t\t\tthis.tingPaiSprite.scale(shouPai3Ratio,shouPai3Ratio);\r\n\t\t\tthis.tingPaiSprite.x=this.shouPai3.x;\r\n\t\t\tthis.tingPaiSprite.y=this.shouPai3.y+shouPai3Height *0.5;\r\n\t\t\tthis.tingPaiPai.removeSelf();\r\n\t\t\tthis.userHead0.scale(headRatio,headRatio);\r\n\t\t\tvar userHead0H=(this.userHead0.height *headRatio);\r\n\t\t\tvar userHead0W=(this.userHead0.width *headRatio);\r\n\t\t\tthis.userHead0.y=(bHeight)/ 2-userHead0H-userHead0H *0.25;\r\n\t\t\tvar shouPai0Space=bHeight-shouPai3Height;\r\n\t\t\tvar shouPai0Height=shouPai0Space *0.85;\r\n\t\t\tvar shouPai0Ratio=shouPai0Height / this.shouPai0.height;\r\n\t\t\tvar shouPai0Width=shouPai0Ratio *this.shouPai0.width;\r\n\t\t\tthis.shouPai0.scale(shouPai0Ratio,shouPai0Ratio);\r\n\t\t\tthis.shouPai0.x=userHead0W;\r\n\t\t\tthis.shouPai0.y=(shouPai0Space-shouPai0Height)/ 2;\r\n\t\t\tthis.userHead2.scale(headRatio,headRatio);\r\n\t\t\tvar userHead2H=(this.userHead2.height *headRatio);\r\n\t\t\tvar userHead2W=(this.userHead2.width *headRatio);\r\n\t\t\tthis.userHead2.x=bWidth-userHead2W;\r\n\t\t\tthis.userHead2.y=(bHeight)/ 2-userHead2H;\r\n\t\t\tvar shouPai2Width=shouPai0Ratio *this.shouPai2.width;\r\n\t\t\tthis.shouPai2.scale(-shouPai0Ratio,shouPai0Ratio);\r\n\t\t\tthis.shouPai2.x=bWidth-userHead2W;\r\n\t\t\tthis.shouPai2.y=(shouPai0Space-shouPai0Height)/ 2;\r\n\t\t\tthis.userHead1.scale(headRatio,headRatio);\r\n\t\t\tvar userHead1Width=(this.userHead1.width *headRatio);\r\n\t\t\tvar userHead1Height=(this.userHead1.height *headRatio);\r\n\t\t\tthis.userHead1.x=this.nUserHead1Left *ratio;\r\n\t\t\tvar shouPai1Space=bWidth-userHead1Width-userHead2W-shouPai2Width-userHead0W-shouPai0Width;\r\n\t\t\tvar shouPai1Width=shouPai1Space *0.85;\r\n\t\t\tvar shouPai1Ratio=shouPai1Width / this.shouPai1.width;\r\n\t\t\tvar shouPai1Height=shouPai1Ratio *this.shouPai1.height;\r\n\t\t\tthis.shouPai1.scale(shouPai1Ratio,shouPai1Ratio);\r\n\t\t\tthis.shouPai1.x=userHead2W+shouPai2Width+userHead1Width+(shouPai1Space-shouPai1Width)/ 2;\r\n\t\t\tvar out0Space=bHeight-userHead1Height-shouPai3Height;\r\n\t\t\tvar out0Height=out0Space *0.9;\r\n\t\t\tvar out0Ratio=out0Height / this.out0.height;\r\n\t\t\tvar out0Width=out0Ratio *this.out0.width;\r\n\t\t\tthis.out0.scale(out0Ratio,out0Ratio);\r\n\t\t\tthis.out0.x=shouPai0Width+userHead0W;\r\n\t\t\tthis.out0.y=userHead1Height+(out0Space-out0Height)/ 2;\r\n\t\t\tvar out2Width=out0Width;\r\n\t\t\tthis.out2.scale(-out0Ratio,out0Ratio);\r\n\t\t\tthis.out2.x=bWidth-userHead2W-shouPai2Width;\r\n\t\t\tthis.out2.y=this.out0.y;\r\n\t\t\tvar out3Space=bWidth-userHead2W-shouPai2Width-out2Width-userHead0W-shouPai0Width-out0Width;\r\n\t\t\tvar out3Width=out3Space *0.95;\r\n\t\t\tvar out3Ratio=Math.min(out3Width / this.out3.width,out0Ratio);\r\n\t\t\tthis.out3.scale(out3Ratio,out3Ratio);\r\n\t\t\tthis.out3.x=(bWidth-(this.out3.width *out3Ratio))/ 2;\r\n\t\t\tthis.out3.y=bHeight-shouPai3Height-(this.out3.height *out3Ratio);\r\n\t\t\tthis.out1.scale(out3Ratio,out3Ratio);\r\n\t\t\tthis.out1.x=Math.max(this.userHead1.x+userHead1Width,(bWidth-(this.out1.width *out3Ratio))/ 2);\r\n\t\t\tthis.out1.y=shouPai1Height;\r\n\t\t\tvar turntableScale=ratio *this.nTurntableRatio;\r\n\t\t\tthis.turntable.scale(turntableScale,turntableScale);\r\n\t\t\tthis.turntable.x=(bWidth-this.turntable.width *turntableScale)/ 2;\r\n\t\t\tvar tempY=shouPai1Height+this.out1.height;\r\n\t\t\tthis.turntable.y=tempY+(((bHeight-shouPai3Height-this.out3.height-tempY))-this.turntable.height *turntableScale)/ 2;\r\n\t\t\tconsole.log(\"layoutGame\",this.shouPai3.width);\r\n\t\t}\r\n\r\n\t\t__proto.initShou=function(index){\r\n\t\t\tthis[\"chi\"+index].removeSelf();\r\n\t\t\tthis[\"anGang\"+index].removeSelf();\r\n\t\t\tthis[\"anGangHide\"+index].removeSelf();\r\n\t\t\tthis[\"mingGang\"+index].removeSelf();\r\n\t\t\tthis[\"shou\"+index].removeSelf();\r\n\t\t\tthis[\"fa\"+index].removeSelf();\r\n\t\t\tthis[\"userHeadOffline\"+index].visible=false;\r\n\t\t\tthis[\"zhuang\"+index].visible=false;\r\n\t\t\tvar outSprite=this[\"out\"+index];\r\n\t\t\tfor (var i=0;i < outSprite.numChildren;i++){\r\n\t\t\t\tvar child=(outSprite.getChildAt(i));\r\n\t\t\t\tchild.removeChildren();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__proto.setUserHeadVisible=function(i,visible){\r\n\t\t\tthis[\"userId\"+i].visible=visible;\r\n\t\t\tthis[\"gold\"+i].visible=visible;\r\n\t\t\tthis[\"goldBg\"+i].visible=visible;\r\n\t\t\tthis[\"goldIcon\"+i].visible=visible;\r\n\t\t\tthis[\"userName\"+i].visible=visible;\r\n\t\t}\r\n\r\n\t\t__proto.gameEnd=function(isEnd){\r\n\t\t\tthis.delRoomBtn.removeSelf();\r\n\t\t\tthis.inviteBtn.offAll(\"click\");\r\n\t\t\tvar bWidth=Browser.width;\r\n\t\t\tvar ratio=UiHelps.getGameRatio();\r\n\t\t\tvar bgWidth=bWidth / ratio;\r\n\t\t\tthis.inviteBtn.width+=this.inviteBtn.width *0.5;\r\n\t\t\tthis.inviteBtn.x=(bgWidth-this.inviteBtn.width)/ 2;\r\n\t\t\tthis.inviteBtn.label=\"(结束)返回大厅\";\r\n\t\t\tthis.inviteBtn.on(\"click\",this,function(){\r\n\t\t\t\tUiManager.instance.goMain();\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t__proto.update=function(msg){\r\n\t\t\tthis.updateTingPai(null);\r\n\t\t\tthis.roomCheckId.text=\"房间号:\"+msg.roomCheckId;\r\n\t\t\tthis.updateLeftGameNums(msg.leftChapterNums);\r\n\t\t}\r\n\r\n\t\t__proto.updateLeftGameNums=function(nums){\r\n\t\t\tthis.leftGameNums.text=\"剩余：\"+nums+\"盘\"\r\n\t\t}\r\n\r\n\t\t__proto.updateUserInfoScore=function(designIndex,score){\r\n\t\t\tthis[\"gold\"+designIndex].text=score.toString();\r\n\t\t}\r\n\r\n\t\t__proto.updateUserInfo=function(designIndex,userInfo){\r\n\t\t\tvar _$this=this;\r\n\t\t\tthis[\"userName\"+designIndex].text=userInfo.userName;\r\n\t\t\tvar image=this[\"userHeadIcon\"+designIndex];\r\n\t\t\tvar maskImage=this[\"userHeadMask\"+designIndex];\r\n\t\t\tif (userInfo.avatar){\r\n\t\t\t\timage.skin=this.defaultHeadIconSkin;\r\n\t\t\t\tLaya.loader.load(userInfo.avatar,Handler.create(this,function(){\r\n\t\t\t\t\tvar t=Laya.loader.getRes(userInfo.avatar);\r\n\t\t\t\t\tif (!t){\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\timage.skin=userInfo.avatar;\r\n\t\t\t\t\tvar radioW=_$this.nHeadWidth / t.width;\r\n\t\t\t\t\tvar radioH=_$this.nHeadHeight / t.height;\r\n\t\t\t\t\tvar radio=radioW > radioH ? radioW :radioH;\r\n\t\t\t\t\timage.width=t.width;\r\n\t\t\t\t\timage.height=t.height;\r\n\t\t\t\t\timage.scale(radio,radio);\r\n\t\t\t\t\tmaskImage.visible=false;\r\n\t\t\t\t\timage.pivotX=-(_$this.nHeadWidth-(t.width *radio))/ 2+_$this.nHeadIconLeft;\r\n\t\t\t\t\timage.pivotY=-(_$this.nHeadHeight-(t.height *radio))/ 2+_$this.nHeadIconTop;\r\n\t\t\t\t\tthis[\"userHeadIconOut\"+designIndex].mask=maskImage;\r\n\t\t\t\t}));\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\timage.skin=this.defaultHeadIconSkin;\r\n\t\t\t}\r\n\t\t\tthis.setUserHeadVisible(designIndex,true);\r\n\t\t\tthis[\"userId\"+designIndex].text=\"ID:\"+userInfo.userId;\r\n\t\t\tthis[\"gold\"+designIndex].text=userInfo.score.toString();\r\n\t\t\tthis[\"userHeadOffline\"+designIndex].visible=!userInfo.online;\r\n\t\t}\r\n\r\n\t\t// console.log(\"userHeadOffline:\",designIndex,!userInfo.online);\r\n\t\t__proto.offlineUser=function(index){\r\n\t\t\tthis[\"userHeadOffline\"+index].visible=true;\r\n\t\t}\r\n\r\n\t\t__proto.delUserInfo=function(designIndex){\r\n\t\t\tthis.setUserHeadVisible(designIndex,false);\r\n\t\t\tthis[\"userHeadOffline\"+designIndex].visible=false;\r\n\t\t\tthis[\"userHeadIcon\"+designIndex].skin=this.defaultHeadIconSkin;\r\n\t\t}\r\n\r\n\t\t__proto.updateTingPai=function(pais){\r\n\t\t\tif (pais && pais.length){\r\n\t\t\t\tthis.tingPaiSprite.visible=true;\r\n\t\t\t\tvar x=this.tingPaiPai.x;\r\n\t\t\t\tvar number=Math.min(8,pais.length);\r\n\t\t\t\tthis.tingPaiPaiSprite.removeChildren();\r\n\t\t\t\tfor (var i=0;i < number;i++){\r\n\t\t\t\t\tvar pai=pais[i];\r\n\t\t\t\t\tvar paiImage=(LayaUtils.clone(this.tingPaiPai));\r\n\t\t\t\t\tpaiImage.x=x;\r\n\t\t\t\t\tthis.tingPaiPaiSprite.addChild(paiImage);\r\n\t\t\t\t\tx+=paiImage.width+4;\r\n\t\t\t\t\tPaiUtils.showPaiIcon((paiImage.getChildAt(0)),pai);\r\n\t\t\t\t}\r\n\t\t\t\tthis.tingPaiBg.width=(this.nTingPaiBgWidth+((this.tingPaiPai.width *this.tingPaiPaiSprite.scaleX+4)*(number)))/this.tingPaiBg.scaleX;\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tthis.tingPaiSprite.visible=false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__proto.handlerWaitOut=function(){\r\n\t\t\tfor (var i=0;i < this.shouPai3.numChildren;i++){\r\n\t\t\t\tvar paiSprite=this.shouPai3.getChildAt(i);\r\n\t\t\t\tif (\"pai\"==paiSprite.name){\r\n\t\t\t\t\t(paiSprite.getChildAt(paiSprite.numChildren-1)).visible=false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__getset(0,__proto,'isWaitOut',null,function(value){\r\n\t\t\tif (this._isWaitOut !=value){\r\n\t\t\t\tthis._isWaitOut=value;\r\n\t\t\t\tthis.handlerWaitOut();\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tGameTableView.PAI_NAME=\"pai\";\r\n\t\tGameTableView.H_PAI_SPACE=4;\r\n\t\tGameTableView.V_PAI_SPACE=0;\r\n\t\tGameTableView.MY_INDEX=3;\r\n\t\treturn GameTableView;\r\n\t})(GameTableUI)\r\n\r\n\r\n\t/**\r\n\t*@author zuoge85@gmail.com on 16/10/12.\r\n\t*/\r\n\t//class mj.scene.LoginScene extends ui.test.LoginUI\r\n\tvar LoginScene=(function(_super){\r\n\t\tfunction LoginScene(){\r\n\t\t\tthis.isHasWeixinLogin=false;\r\n\t\t\tthis.buttonsSpriteY=NaN;\r\n\t\t\tthis.mianRatio=NaN;\r\n\t\t\tLoginScene.__super.call(this);\r\n\t\t\tvar _$this=this;\r\n\t\t\tLaya.stage.on(\"resize\",this,this.layout);\r\n\t\t\tthis.agreeCheck.selected=true;\r\n\t\t\tthis.agreeCheck.clickHandler=new Handler(this,function(){\r\n\t\t\t\tvar disabled=!_$this.agreeCheck.selected;\r\n\t\t\t\t_$this.smsLoginBtn.disabled=disabled;\r\n\t\t\t\t_$this.anonymousLoginBtn.disabled=disabled;\r\n\t\t\t\t_$this.weixinLoginBtn.disabled=disabled;\r\n\t\t\t},[this.agreeCheck]);\r\n\t\t\tthis.isHasWeixinLogin=window.weixinLogin !=null;{\r\n\t\t\t\tvar disabled=!this.agreeCheck.selected;\r\n\t\t\t\tthis.smsLoginBtn.disabled=disabled;\r\n\t\t\t\tthis.anonymousLoginBtn.disabled=disabled;\r\n\t\t\t\tthis.weixinLoginBtn.disabled=disabled;\r\n\t\t\t}\r\n\t\t\tthis.buttonsSpriteY=this.buttonsSprite.y;\r\n\t\t\tthis.smsLoginBtn.on(\"click\",this,LoginScene.onSmsClick);\r\n\t\t\tthis.anonymousLoginBtn.on(\"click\",this,LoginScene.onAnonymousClick);\r\n\t\t\tthis.weixinLoginBtn.on(\"click\",this,LoginScene.onWeixinClick);\r\n\t\t\tthis.agreeLink.on(\"click\",this,function(){\r\n\t\t\t\tDialog.showMessage(\r\n\t\t\t\tUiManager.instance.sysSetting.agreement,\r\n\t\t\t\tnull,\"LARGE\",\"用户协议\");\r\n\t\t\t});\r\n\t\t\tthis.layout();\r\n\t\t}\r\n\r\n\t\t__class(LoginScene,'mj.scene.LoginScene',_super);\r\n\t\tvar __proto=LoginScene.prototype;\r\n\t\tLaya.imps(__proto,{\"mj.scene.GameScene\":true})\r\n\t\t__proto.layout=function(){\r\n\t\t\tvar nWidth=1902;\r\n\t\t\tvar nHeight=1080;\r\n\t\t\tvar bWidth=Browser.width;\r\n\t\t\tvar bHeight=Browser.height;\r\n\t\t\tvar wRatio=bWidth / nWidth;\r\n\t\t\tvar hRatio=bHeight / nHeight;\r\n\t\t\tvar ratio=wRatio > hRatio ? wRatio :hRatio;\r\n\t\t\tthis.bg.scale(ratio,ratio);\r\n\t\t\tvar width=nWidth *ratio;\r\n\t\t\tvar height=nHeight *ratio;\r\n\t\t\tthis.mianRatio=wRatio > hRatio ? hRatio :wRatio;\r\n\t\t\tthis.mainSprite.scale(this.mianRatio,this.mianRatio);\r\n\t\t\tvar mianWidth=nWidth *this.mianRatio;\r\n\t\t\tvar mianHeight=nHeight *this.mianRatio;\r\n\t\t\tthis.mainSprite.x=-(mianWidth-bWidth)/ 2;\r\n\t\t\tthis.mainSprite.y=-(mianHeight-bHeight)/ 3;\r\n\t\t\tif (!this.isHasWeixinLogin){\r\n\t\t\t\tthis.buttonsSprite.y=this.buttonsSpriteY-this.weixinLoginBtn.height;\r\n\t\t\t\tthis.weixinLoginBtn.visible=false;\r\n\t\t\t}\r\n\t\t\tthis.size(width,height);\r\n\t\t}\r\n\r\n\t\t__proto.destroy=function(destroyChild){\r\n\t\t\t(destroyChild===void 0)&& (destroyChild=true);\r\n\t\t\tlaya.ui.View.prototype.destroy.call(this,destroyChild);\r\n\t\t\tLaya.stage.off(\"resize\",this,this.layout);\r\n\t\t}\r\n\r\n\t\t__proto.getDisplayObject=function(){\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\t\t__proto.init=function(){}\r\n\t\tLoginScene.onAnonymousClick=function(e){\r\n\t\t\tWait.show(\"登录中！\");\r\n\t\t\tUserManager.instance.checkAnonymousLogin(Handler.create(null,function(){\r\n\t\t\t\tWait.close();\r\n\t\t\t}));\r\n\t\t}\r\n\r\n\t\tLoginScene.onWeixinClick=function(e){\r\n\t\t\tWait.show(\"微信登陆中！\");\r\n\t\t\twindow.weixinLogin(LoginScene.onWeixinSuccess);\r\n\t\t}\r\n\r\n\t\tLoginScene.onWeixinSuccess=function(userEncrypt){\r\n\t\t\tconsole.log(\"微信登录返回:\",userEncrypt);\r\n\t\t\tif (userEncrypt){\r\n\t\t\t\tUserManager.instance.checkUserEncryptLogin(userEncrypt,Handler.create(null,function(){\r\n\t\t\t\t\tWait.close();\r\n\t\t\t\t}))\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tWait.close();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tLoginScene.onSmsClick=function(e){\r\n\t\t\tPhoneDialog.showDialog(Handler.create(null,function(phone,code){\r\n\t\t\t\tWait.show(\"登录中！\");\r\n\t\t\t\tUserManager.instance.checkSmsLogin(phone,code,Handler.create(null,function(){\r\n\t\t\t\t\tWait.close();\r\n\t\t\t\t}))\r\n\t\t\t}));\r\n\t\t}\r\n\r\n\t\treturn LoginScene;\r\n\t})(LoginUI)\r\n\r\n\r\n\t/**\r\n\t*@author zuoge85@gmail.com on 16/10/12.\r\n\t*/\r\n\t//class mj.scene.MainScene extends ui.test.MainUI\r\n\tvar MainScene=(function(_super){\r\n\t\tfunction MainScene(){\r\n\t\t\tthis.defaultHeadIconSkin=null;\r\n\t\t\tthis.nHeadWidth=NaN;\r\n\t\t\tthis.nHeadHeight=NaN;\r\n\t\t\tthis.nHeadIconLeft=NaN;\r\n\t\t\tthis.nHeadIconTop=NaN;\r\n\t\t\tthis.nNoticeWidth=NaN;\r\n\t\t\tthis.nNoticeHeight=NaN;\r\n\t\t\tthis.noticeWidth=NaN;\r\n\t\t\tthis.mianRatio=NaN;\r\n\t\t\tthis.noticeScrollValue=0;\r\n\t\t\tMainScene.__super.call(this);\r\n\t\t\tthis.noticeRect=new Rectangle();\r\n\t\t\tLaya.stage.on(\"resize\",this,this.layout);\r\n\t\t\tthis.defaultHeadIconSkin=this.userHeadIcon.skin;\r\n\t\t\tthis.nHeadWidth=this.userHeadIcon.width;\r\n\t\t\tthis.nHeadHeight=this.userHeadIcon.height;\r\n\t\t\tthis.nHeadIconLeft=this.userHeadIcon.x;\r\n\t\t\tthis.nHeadIconTop=this.userHeadIcon.y;\r\n\t\t\tthis.nNoticeWidth=this.noticeLabel.width;\r\n\t\t\tthis.nNoticeHeight=this.noticeLabel.height;\r\n\t\t\tthis.userHeadIconOut.mask=this.userHeadMask;\r\n\t\t\tthis.layout();\r\n\t\t\tthis.crateBtn.on(\"click\",this,MainScene.onCrateClick);\r\n\t\t\tthis.joinBtn.on(\"click\",this,MainScene.onJoinClick);\r\n\t\t\tLaya.timer.frameLoop(1,this,this.noticeScroll);\r\n\t\t\tLayaUtils.handlerButton(this.quitBtn);\r\n\t\t\tLayaUtils.handlerButton(this.settingBtn);\r\n\t\t\tLayaUtils.handlerButton(this.historyBtn);\r\n\t\t\tthis.quitBtn.on(\"click\",this,this.onBack);\r\n\t\t\tthis.historyBtn.on(\"click\",this,function(){\r\n\t\t\t\tWait.show();\r\n\t\t\t\tNet.instance.write(new RoomHistoryList());\r\n\t\t\t});\r\n\t\t\tthis.noticeLabel.on(\"click\",this,function(){\r\n\t\t\t\tDialog.showMessage(\r\n\t\t\t\tUiManager.instance.sysSetting.radio,\r\n\t\t\t\tnull,\"LARGE\",\"公告\");\r\n\t\t\t});\r\n\t\t\tthis.addFangkaSprite.on(\"click\",this,function(){\r\n\t\t\t\tDialog.showMessage(UiManager.instance.sysSetting.payInfo,null,\"MEDIUM\")\r\n\t\t\t});\r\n\t\t\tthis.userHeadOut.on(\"click\",this,function(){\r\n\t\t\t\tvar user=UserManager.instance.user;\r\n\t\t\t\tUserDialog.showDialog(user.name,user.avatar,user.ip,user.id,null,null);\r\n\t\t\t});\r\n\t\t\tthis.changeRadio(UiManager.instance.sysSetting.radio);\r\n\t\t\tthis.changeNewNotice();\r\n\t\t\tthis.settingBtn.on(\"click\",this,function(){\r\n\t\t\t\tSettingDialog.showDialog();\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t__class(MainScene,'mj.scene.MainScene',_super);\r\n\t\tvar __proto=MainScene.prototype;\r\n\t\tLaya.imps(__proto,{\"mj.scene.GameScene\":true})\r\n\t\t__proto.onBack=function(){\r\n\t\t\tDialog.confirm(\"是否退出登录用户\",Handler.create(this,function(){\r\n\t\t\t\tUserManager.quitUser()\r\n\t\t\t}));\r\n\t\t}\r\n\r\n\t\t__proto.layout=function(){\r\n\t\t\tvar nWidth=1902;\r\n\t\t\tvar nHeight=1080;\r\n\t\t\tvar bWidth=Browser.width;\r\n\t\t\tvar bHeight=Browser.height;\r\n\t\t\tvar wRatio=bWidth / nWidth;\r\n\t\t\tvar hRatio=bHeight / nHeight;\r\n\t\t\tvar ratio=wRatio > hRatio ? wRatio :hRatio;\r\n\t\t\tthis.bg.scale(ratio,ratio);\r\n\t\t\tvar width=nWidth *ratio;\r\n\t\t\tvar height=nHeight *ratio;\r\n\t\t\tthis.mianRatio=wRatio > hRatio ? hRatio :wRatio;\r\n\t\t\tthis.mainSprite.scale(this.mianRatio,this.mianRatio);\r\n\t\t\tvar mianWidth=nWidth *this.mianRatio;\r\n\t\t\tvar mianHeight=nHeight *this.mianRatio;\r\n\t\t\tthis.mainSprite.x=-(mianWidth-bWidth)/ 2;\r\n\t\t\tthis.mainSprite.y=-(mianHeight-bHeight)/ 3;\r\n\t\t\tthis.size(width,height);\r\n\t\t\tthis.noticeWidth=this.nNoticeWidth *this.mianRatio;\r\n\t\t}\r\n\r\n\t\t__proto.noticeScroll=function(){\r\n\t\t\tif (this.noticeScrollValue > this.noticeWidth){\r\n\t\t\t\tthis.noticeScrollValue=-this.noticeWidth;\r\n\t\t\t}\r\n\t\t\tthis.noticeScrollValue+=(Laya.timer.delta / 10);\r\n\t\t\tthis.noticeRect.setTo(this.noticeScrollValue,0,this.nNoticeWidth,this.nNoticeHeight+20);\r\n\t\t\tthis.noticeLabel.scrollRect=this.noticeRect;\r\n\t\t\tthis.noticeLabel.pivotX=this.noticeScrollValue;\r\n\t\t}\r\n\r\n\t\t__proto.destroy=function(destroyChild){\r\n\t\t\t(destroyChild===void 0)&& (destroyChild=true);\r\n\t\t\tlaya.ui.View.prototype.destroy.call(this,destroyChild);\r\n\t\t\tLaya.timer.clear(this,this.noticeScroll);\r\n\t\t\tLaya.stage.off(\"resize\",this,this.layout);\r\n\t\t}\r\n\r\n\t\t__proto.getDisplayObject=function(){\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\t\t__proto.update=function(user){\r\n\t\t\tvar _$this=this;\r\n\t\t\tthis.userName.text=user.name;\r\n\t\t\tvar image=this.userHeadIcon;\r\n\t\t\tvar maskImage=this.userHeadMask;\r\n\t\t\tif (user.avatar){\r\n\t\t\t\timage.skin=this.defaultHeadIconSkin;\r\n\t\t\t\tLaya.loader.load(user.avatar,Handler.create(this,function(){\r\n\t\t\t\t\tvar t=Laya.loader.getRes(user.avatar);\r\n\t\t\t\t\timage.skin=user.avatar;\r\n\t\t\t\t\tvar radioW=_$this.nHeadWidth / t.width;\r\n\t\t\t\t\tvar radioH=_$this.nHeadHeight / t.height;\r\n\t\t\t\t\tvar radio=radioW > radioH ? radioW :radioH;\r\n\t\t\t\t\timage.width=t.width;\r\n\t\t\t\t\timage.height=t.height;\r\n\t\t\t\t\timage.scale(radio,radio);\r\n\t\t\t\t\tmaskImage.visible=false;\r\n\t\t\t\t\timage.pivotX=-(_$this.nHeadWidth-(t.width *radio))/ 2+_$this.nHeadIconLeft;\r\n\t\t\t\t\timage.pivotY=-(_$this.nHeadHeight-(t.height *radio))/ 2+_$this.nHeadIconTop;\r\n\t\t\t\t\t_$this.userHeadIconOut.mask=maskImage;\r\n\t\t\t\t}));\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\timage.skin=this.defaultHeadIconSkin;\r\n\t\t\t}\r\n\t\t\tthis.userId.text=\"ID:\"+user.id;\r\n\t\t\tthis.gold.text=\"房卡:\"+user.gold.toString();\r\n\t\t}\r\n\r\n\t\t__proto.init=function(){}\r\n\t\t// RoomHistoryListDialog.showDialog();\r\n\t\t__proto.updateGold=function(goldValue){\r\n\t\t\tthis.gold.text=\"房卡:\"+goldValue.toString();\r\n\t\t}\r\n\r\n\t\t__proto.changeRadio=function(radio){\r\n\t\t\tthis.noticeLabel.text=radio.replace(\"\\n\",\"\");\r\n\t\t}\r\n\r\n\t\t__proto.changeNewNotice=function(){\r\n\t\t\tvar notice=UiManager.instance.sysSetting.notice;\r\n\t\t\tthis.newNotice.text=notice;\r\n\t\t\tthis.newNotice.overflow=Text.HIDDEN;\r\n\t\t\tthis.newNotice.offAll(\"click\");\r\n\t\t\tthis.newNotice.on(\"click\",this,function(){\r\n\t\t\t\tDialog.showMessage(\r\n\t\t\t\tnotice,\r\n\t\t\t\tnull,\"LARGE\",\"健康游戏公告\");\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tMainScene.onCrateClick=function(e){\r\n\t\t\tUserManager.instance.showCreateDialog();\r\n\t\t}\r\n\r\n\t\tMainScene.onJoinClick=function(e){\r\n\t\t\tUserManager.instance.showJoinDialog();\r\n\t\t}\r\n\r\n\t\treturn MainScene;\r\n\t})(MainUI)\r\n\r\n\r\n\t/**\r\n\t*@author zuoge85@gmail.com on 2016/11/9.\r\n\t*/\r\n\t//class mj.ui.dialog.ChapterResultDialog extends ui.test.ChapterResultUI\r\n\tvar ChapterResultDialog=(function(_super){\r\n\t\tfunction ChapterResultDialog(msg,gameRoomInfo){\r\n\t\t\tthis.nWidth=NaN;\r\n\t\t\tthis.nHeight=NaN;\r\n\t\t\tthis._gameChapterEnd=null;\r\n\t\t\tthis.paiSpace=[0,0,0,0];\r\n\t\t\tthis.prevPaiSprite=null;\r\n\t\t\tthis.dragStartSprite=null;\r\n\t\t\tthis.dragStartX=-1;\r\n\t\t\tthis._gameRoomInfo\r\n\t\t\tthis._gameChapterEnd=msg;\r\n\t\t\tthis._gameRoomInfo=gameRoomInfo;\r\n\t\t\tChapterResultDialog.__super.call(this);\r\n\t\t\tthis.nWidth=this.width;\r\n\t\t\tthis.nHeight=this.height;\r\n\t\t}\r\n\r\n\t\t__class(ChapterResultDialog,'mj.ui.dialog.ChapterResultDialog',_super);\r\n\t\tvar __proto=ChapterResultDialog.prototype;\r\n\t\tLaya.imps(__proto,{\"mj.ui.dialog.DialogContent\":true})\r\n\t\t__proto.layout=function(){\r\n\t\t\tthis.title.scaleX=0.85;\r\n\t\t\tthis.title.scaleY=0.85;\r\n\t\t\tthis.title.x=(this.nWidth-this.title.width *0.8)/ 2;\r\n\t\t\tthis.title.y=-this.title.height *0.85;\r\n\t\t\tthis.chi3.removeSelf();\r\n\t\t\tthis.anGang3.removeSelf();\r\n\t\t\tthis.mingGang3.removeSelf();\r\n\t\t\tthis.anGangHide3.removeSelf();\r\n\t\t\tthis.shou3.removeSelf();\r\n\t\t\tthis.fa3.removeSelf();\r\n\t\t\tthis.init();\r\n\t\t\tthis.initZaMa();\r\n\t\t}\r\n\r\n\t\t__proto.initZaMa=function(){\r\n\t\t\tvar zaMaType=this._gameChapterEnd.zaMaType;\r\n\t\t\tif (zaMaType==0){\r\n\t\t\t\tthis.height-=this.zaMaSprite.height;\r\n\t\t\t\tthis.otherScore.y-=this.zaMaSprite.height;\r\n\t\t\t\tthis.zaMaSprite.removeSelf();\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tvar zaMaFan=this._gameChapterEnd.zaMaFan;\r\n\t\t\t\tthis.yiMaScore.text=\"+\"+zaMaFan;\r\n\t\t\t\tif (zaMaType==-1){\r\n\t\t\t\t\tthis.yiMaType.text=\"一马全中\"\r\n\t\t\t\t}\r\n\t\t\t\telse{\r\n\t\t\t\t\tthis.yiMaType.text=\"买\"+zaMaType+\"马\"\r\n\t\t\t\t}\r\n\t\t\t\tif (zaMaFan > 0){\r\n\t\t\t\t\tthis.yiMaWu.removeSelf();\r\n\t\t\t\t}\r\n\t\t\t\tthis.maPai.removeSelf();\r\n\t\t\t\tvar x=0;\r\n\t\t\t\tfor (var i=0;i < this._gameChapterEnd.zaMaPai.length;i++){\r\n\t\t\t\t\tvar pai=this._gameChapterEnd.zaMaPai[i];\r\n\t\t\t\t\tvar paiImage=(LayaUtils.clone(this.maPai));\r\n\t\t\t\t\tthis.showPaiIcon((paiImage.getChildAt(0)),pai);\r\n\t\t\t\t\tpaiImage.x=x+2;\r\n\t\t\t\t\tthis.maPaiSprite.addChild(paiImage);\r\n\t\t\t\t\tx+=this.maPai.width;\r\n\t\t\t\t}\r\n\t\t\t\tthis.maPaiSprite.x+=((((this.maPai.width+2)*8)-x)/ 2);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__proto.init=function(){\r\n\t\t\tvar gameManager=GameManager.instance;\r\n\t\t\tthis.clearPai(3);\r\n\t\t\tthis.paiSpace=[0,0,0,0];\r\n\t\t\tvar fanResults=this._gameChapterEnd.fanResults;\r\n\t\t\tif (this._gameChapterEnd.huPaiIndex >-1){\r\n\t\t\t\tthis.liuju.visible=false;\r\n\t\t\t\tvar winResult=fanResults[this._gameChapterEnd.huPaiIndex];\r\n\t\t\t\tthis.showPai(3,PaiUtils.toUserPlace(winResult),true);\r\n\t\t\t\tthis.winName.text=winResult.userName;\r\n\t\t\t\tthis.winFanString.text=winResult.fanString;\r\n\t\t\t\tif (this._gameChapterEnd.zaMaFan){\r\n\t\t\t\t\tthis.winFan.text=\"(\"+(winResult.fan-this._gameChapterEnd.zaMaFan)\r\n\t\t\t\t\t+\"番 + 中码\"+this._gameChapterEnd.zaMaFan+\"番)\";\r\n\t\t\t\t}\r\n\t\t\t\telse{\r\n\t\t\t\t\tthis.winFan.text=\"(\"+winResult.fan+\"番)\";\r\n\t\t\t\t}\r\n\t\t\t\tif(winResult.guaFengXiaYu !=0){\r\n\t\t\t\t\tthis.winFan.text+=\"(杠:\"+winResult.guaFengXiaYu+\")\";\r\n\t\t\t\t}\r\n\t\t\t\tthis.winScore.text=\"+\"+winResult.score;\r\n\t\t\t\tif (this._gameChapterEnd.huPaiIndex !=gameManager.myLocationIndex){\r\n\t\t\t\t\tif (this._gameChapterEnd.fangPaoIndex==-1 || this._gameChapterEnd.fangPaoIndex==gameManager.myLocationIndex){\r\n\t\t\t\t\t\tthis.titleIcon.skin=\"ui/game/result_title_lost.png\";\r\n\t\t\t\t\t\tAudioManager.lose();\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\tthis.titleIcon.skin=\"ui/game/result_title_nor.png\";\r\n\t\t\t\t\t\tAudioManager.liuJu();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse{\r\n\t\t\t\t\tif (this._gameChapterEnd.huPaiIndex==-1){\r\n\t\t\t\t\t\tthis.titleIcon.skin=\"ui/game/result_title_nor.png\";\r\n\t\t\t\t\t\tAudioManager.liuJu();\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\tvar sceneUser=this._gameRoomInfo.sceneUser[this._gameChapterEnd.huPaiIndex];\r\n\t\t\t\t\t\tAudioManager.win(sceneUser.sex,this._gameChapterEnd.fangPaoIndex,winResult.fan);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tfor (var i=0,j=0;i < fanResults.length;i++){\r\n\t\t\t\t\tif (i !=this._gameChapterEnd.huPaiIndex){\r\n\t\t\t\t\t\tvar result=fanResults[i];\r\n\t\t\t\t\t\tthis[\"name\"+j].text=result.userName;\r\n\t\t\t\t\t\tvar score=this[\"score\"+j];\r\n\t\t\t\t\t\tif (this._gameChapterEnd.fangPaoIndex < 0){\r\n\t\t\t\t\t\t\tscore.text=\"\"+result.score;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\tif (this._gameChapterEnd.fangPaoIndex==i){\r\n\t\t\t\t\t\t\t\tscore.text=\"\"+result.score;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\t\tscore.text=\"0\";\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(result.guaFengXiaYu !=0){\r\n\t\t\t\t\t\t\tscore.text+=\"(杠:\"+result.guaFengXiaYu+\")\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tj++;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tthis.titleIcon.skin=\"ui/game/result_title_lost.png\";\r\n\t\t\t\tAudioManager.lose();\r\n\t\t\t\tthis.shouPai3.visible=false;\r\n\t\t\t\tthis.otherScore.visible=false;\r\n\t\t\t\tthis.winSprite.visible=false;\r\n\t\t\t\tthis.height=100;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*清除牌\r\n\t\t*/\r\n\t\t__proto.clearPai=function(index){\r\n\t\t\tvar i=0;\r\n\t\t\tvar shouPai=this[\"shouPai\"+index];\r\n\t\t\twhile (shouPai.numChildren > 0){\r\n\t\t\t\tshouPai.getChildAt(0).removeSelf().destroy(true);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__proto.getDisplayObject=function(){\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\t\t__proto.getContentWidth=function(){\r\n\t\t\treturn this.nWidth *this.scaleX;\r\n\t\t}\r\n\r\n\t\t__proto.getContentHeight=function(){\r\n\t\t\tvar zaMaType=this._gameChapterEnd.zaMaType;\r\n\t\t\tif (zaMaType==0){\r\n\t\t\t\treturn (this.nHeight-this.zaMaSprite.height)*this.scaleY;\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\treturn this.nHeight *this.scaleY;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__proto.showPai=function(index,userPlace,isShowEndResult){\r\n\t\t\t(isShowEndResult===void 0)&& (isShowEndResult=false);\r\n\t\t\tvar isHorizontal=index % 2==1;\r\n\t\t\tif (userPlace.anGang){\r\n\t\t\t\tthis.showAnGang(index,userPlace.anGang,isHorizontal);\r\n\t\t\t}\r\n\t\t\tif (userPlace.daMingGang){\r\n\t\t\t\tthis.showMingGangOrPeng(index,userPlace.daMingGang,this[\"mingGang\"+index],isHorizontal);\r\n\t\t\t}\r\n\t\t\tif (userPlace.xiaoMingGang){\r\n\t\t\t\tthis.showMingGangOrPeng(index,userPlace.xiaoMingGang,this[\"mingGang\"+index],isHorizontal);\r\n\t\t\t}\r\n\t\t\tif (userPlace.peng){\r\n\t\t\t\tthis.showMingGangOrPeng(index,userPlace.peng,this[\"chi\"+index],isHorizontal);\r\n\t\t\t}\r\n\t\t\tif (userPlace.chi){\r\n\t\t\t\tthis.showChi(index,userPlace.chi,this[\"chi\"+index],isHorizontal);\r\n\t\t\t}\r\n\t\t\tif (this[\"shouPai\"+index].numChildren > 0){\r\n\t\t\t\tthis.paiSpace[index]+=16;\r\n\t\t\t}\r\n\t\t\tif (isShowEndResult){\r\n\t\t\t\tvar chi=this[\"chi\"+index];\r\n\t\t\t\tvar source=(LayaUtils.clone(chi));\r\n\t\t\t\tsource.removeChildAt(1);\r\n\t\t\t\tsource.removeChildAt(1);\r\n\t\t\t\tsource.width=(source.getChildAt(0)).width;\r\n\t\t\t\tsource.height=(source.getChildAt(0)).height;\r\n\t\t\t\tfor (var j=0;j < userPlace.shouPai.length;j++){\r\n\t\t\t\t\tthis.showPaiGroup(\r\n\t\t\t\t\tindex,userPlace.shouPai[j],source,isHorizontal,\r\n\t\t\t\t\tisHorizontal ? 1 :-30);\r\n\t\t\t\t}\r\n\t\t\t\tsource.destroy(true);\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tthis.showShouPai(userPlace,index,isHorizontal);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__proto.showShouPai=function(userPlace,index,isHorizontal){\r\n\t\t\tvar len=0;\r\n\t\t\tvar isFaPai=false;\r\n\t\t\tif (userPlace.shouPai){\r\n\t\t\t\tlen=userPlace.shouPai.length;\r\n\t\t\t\tisFaPai=ChapterResultDialog.checkIsFaPai(len);\r\n\t\t\t\tvar shouPai=isFaPai ? userPlace.shouPai.slice(0,len-1):userPlace.shouPai.slice();\r\n\t\t\t\tshouPai.sort(function(a,b){\r\n\t\t\t\t\treturn a-b;\r\n\t\t\t\t});\r\n\t\t\t\tthis.showShouPaiGroup(index,shouPai,this[\"shou\"+index],isHorizontal);\r\n\t\t\t\tif (isFaPai){\r\n\t\t\t\t\tvar fa=userPlace.shouPai[len-1];\r\n\t\t\t\t\tthis.paiSpace[index]+=(isHorizontal ? 26 :106);\r\n\t\t\t\t\tvar sprite=this.showPaiGroup(index,fa,this[\"fa\"+index],isHorizontal,isHorizontal ? 4 :0);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__proto.showShouPaiGroup=function(index,pais,source,isHorizontal){\r\n\t\t\tfor (var i=0;i < pais.length;i++){\r\n\t\t\t\tvar paiSprite=this.showPaiGroup(index,pais[i],source,isHorizontal,isHorizontal ? 1 :-80);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__proto.showChi=function(index,pais,source,isHorizontal){\r\n\t\t\tfor (var i=0;i < pais.length;i+=3){\r\n\t\t\t\tthis.showPaiGroup(index,[pais[i],pais[i+1],pais[i+2]],source,isHorizontal,isHorizontal ? 4 :0);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__proto.showMingGangOrPeng=function(index,pais,source,isHorizontal){\r\n\t\t\tfor (var i=0;i < pais.length;i++){\r\n\t\t\t\tthis.showPaiGroup(index,pais[i],source,isHorizontal,isHorizontal ? 4 :0);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__proto.showAnGang=function(index,pais,isHorizontal){\r\n\t\t\tfor (var i=0;i < pais.length;i++){\r\n\t\t\t\tvar pai=pais[i];\r\n\t\t\t\tif (pai==PaiUtils.HAS_PAI_INDEX){\r\n\t\t\t\t\tthis.showPaiGroup(index,pai,this[\"anGangHide\"+index],isHorizontal,isHorizontal ? 4 :0);\r\n\t\t\t\t}\r\n\t\t\t\telse{\r\n\t\t\t\t\tthis.showPaiGroup(index,pai,this[\"anGang\"+index],isHorizontal,isHorizontal ? 4 :0);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__proto.showPaiGroup=function(index,pai,source,isHorizontal,space){\r\n\t\t\tvar dist=(LayaUtils.clone(source));\r\n\t\t\tif (isHorizontal){\r\n\t\t\t\tdist.x=this.paiSpace[index];\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tdist.y=this.paiSpace[index];\r\n\t\t\t}\r\n\t\t\tthis[\"shouPai\"+index].addChild(dist);\r\n\t\t\tif (isHorizontal){\r\n\t\t\t\tthis.paiSpace[index]+=(space+source.width);\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tthis.paiSpace[index]+=(space+source.height);\r\n\t\t\t}\r\n\t\t\tfor (var i=0,j=0;i < dist.numChildren;i++){\r\n\t\t\t\tvar childAt=dist.getChildAt(i);\r\n\t\t\t\tif ((childAt instanceof laya.ui.Image )){\r\n\t\t\t\t\tvar paiImage=(childAt.getChildAt(0));\r\n\t\t\t\t\tif (paiImage){\r\n\t\t\t\t\t\tif ((pai instanceof Array)){\r\n\t\t\t\t\t\t\tthis.showPaiIcon(paiImage,pai[j]);\r\n\t\t\t\t\t\t\tj++;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\tif (pai > PaiUtils.NOT_PAI_INDEX){\r\n\t\t\t\t\t\t\t\tthis.showPaiIcon(paiImage,pai);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn dist;\r\n\t\t}\r\n\r\n\t\t__proto.showPaiIcon=function(paiImage,pai){\r\n\t\t\tPaiUtils.showPaiIcon(paiImage,pai);\r\n\t\t}\r\n\r\n\t\tChapterResultDialog.showDialog=function(msg,gameRoomInfo,confirmHandler){\r\n\t\t\tif (ChapterResultDialog.dialog){\r\n\t\t\t\tChapterResultDialog.close();\r\n\t\t\t};\r\n\t\t\tvar chapterResultDialog=new ChapterResultDialog(msg,gameRoomInfo);\r\n\t\t\tChapterResultDialog.dialog=Dialog.showDialog(\r\n\t\t\t\"AUTO\",chapterResultDialog,\"\",null,confirmHandler,\"确定\");\r\n\t\t\treturn ChapterResultDialog.dialog;\r\n\t\t}\r\n\r\n\t\tChapterResultDialog.close=function(){\r\n\t\t\tif (ChapterResultDialog.dialog){\r\n\t\t\t\tChapterResultDialog.dialog.close();\r\n\t\t\t\tChapterResultDialog.dialog=null;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tChapterResultDialog.checkIsFaPai=function(len){\r\n\t\t\treturn (len-2)% 3==0;\r\n\t\t}\r\n\r\n\t\tChapterResultDialog.H_PAI_SPACE=4;\r\n\t\tChapterResultDialog.V_PAI_SPACE=0;\r\n\t\tChapterResultDialog.dialog=null\r\n\t\treturn ChapterResultDialog;\r\n\t})(ChapterResultUI)\r\n\r\n\r\n\t//class mj.ui.dialog.CreateOptDialog extends ui.test.CreateOptUI\r\n\tvar CreateOptDialog=(function(_super){\r\n\t\tfunction CreateOptDialog(confirmHandler){\r\n\t\t\tthis.nWidth=NaN;\r\n\t\t\tthis.nHeight=NaN;\r\n\t\t\tthis.confirmHandler=null;\r\n\t\t\tCreateOptDialog.__super.call(this);\r\n\t\t\tthis.confirmHandler=confirmHandler;\r\n\t\t\tthis.nWidth=this.width;\r\n\t\t\tthis.nHeight=this.height;\r\n\t\t}\r\n\r\n\t\t__class(CreateOptDialog,'mj.ui.dialog.CreateOptDialog',_super);\r\n\t\tvar __proto=CreateOptDialog.prototype;\r\n\t\tLaya.imps(__proto,{\"mj.ui.dialog.DialogContent\":true})\r\n\t\t__proto.layout=function(){}\r\n\t\t__proto.onConfirmHandler=function(){\r\n\t\t\tthis.chapterMaxRadio.selectedIndex;\r\n\t\t\tvar options=[\r\n\t\t\tOptionEntry.create(\"chapterMax\",CreateOptDialog.CHAPTER_MAX_VALUES[this.chapterMaxRadio.selectedIndex]),\r\n\t\t\tOptionEntry.create(\"maiMa\",CreateOptDialog.MAI_MA_VALUES[this.maiMaRadio.selectedIndex]),\r\n\t\t\tOptionEntry.create(\"bianType\",CreateOptDialog.TYPE_VALUES[this.typeRadio.selectedIndex]),];\r\n\t\t\tthis.confirmHandler.runWith([options]);\r\n\t\t}\r\n\r\n\t\t__proto.getDisplayObject=function(){\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\t\t__proto.getContentWidth=function(){\r\n\t\t\treturn this.content.width *this.scaleX;\r\n\t\t}\r\n\r\n\t\t__proto.getContentHeight=function(){\r\n\t\t\treturn this.content.height *this.scaleY;\r\n\t\t}\r\n\r\n\t\tCreateOptDialog.showDialog=function(confirmHandler){\r\n\t\t\tvar createOptDialog=new CreateOptDialog(confirmHandler);\r\n\t\t\tvar createDialog=Dialog.showDialog(\r\n\t\t\t\"LARGE\",createOptDialog,\"创建房间\",null,\r\n\t\t\tHandler.create(createOptDialog,createOptDialog.onConfirmHandler),\"创建房间\");\r\n\t\t\treturn createDialog;\r\n\t\t}\r\n\r\n\t\t__static(CreateOptDialog,\r\n\t\t['CHAPTER_MAX_VALUES',function(){return this.CHAPTER_MAX_VALUES=[\"8\",\"16\"];},'MAI_MA_VALUES',function(){return this.MAI_MA_VALUES=[\"0\",\"-1\",\"2\",\"4\",\"6\"];},'TYPE_VALUES',function(){return this.TYPE_VALUES=[\"tuiDaoHu\",\"hongZhongBian\",\"baiBanBian\",\"danGui\",\"shuangGui\"];}\r\n\t\t]);\r\n\t\treturn CreateOptDialog;\r\n\t})(CreateOptUI)\r\n\r\n\r\n\t//class ui.test.DialogUI extends laya.ui.Dialog\r\n\tvar DialogUI=(function(_super){\r\n\t\tfunction DialogUI(){\r\n\t\t\tthis.mainSprite=null;\r\n\t\t\tthis.bg=null;\r\n\t\t\tthis.icon1=null;\r\n\t\t\tthis.icon2=null;\r\n\t\t\tthis.title=null;\r\n\t\t\tthis.closeBtn=null;\r\n\t\t\tthis.contentSprite=null;\r\n\t\t\tthis.contentText=null;\r\n\t\t\tthis.buttonSprite=null;\r\n\t\t\tthis.cancelBtn=null;\r\n\t\t\tthis.confirmBtn=null;\r\n\t\t\tDialogUI.__super.call(this);\r\n\t\t}\r\n\r\n\t\t__class(DialogUI,'ui.test.DialogUI',_super);\r\n\t\tvar __proto=DialogUI.prototype;\r\n\t\t__proto.createChildren=function(){\r\n\t\t\tView.regComponent(\"Text\",Text);\r\n\t\t\tlaya.ui.Component.prototype.createChildren.call(this);\r\n\t\t\tthis.createView(DialogUI.uiView);\r\n\t\t}\r\n\r\n\t\t__static(DialogUI,\r\n\t\t['uiView',function(){return this.uiView={\"type\":\"Dialog\",\"props\":{\"width\":702,\"text\":\"提示信息111\",\"labelPadding\":\"0,0,5,0\",\"labelColors\":\"#FFFFFF,#FFFFFF,#FFFFFF\",\"labelBold\":true,\"label\":\"确定\",\"height\":543},\"child\":[{\"type\":\"Sprite\",\"props\":{\"y\":0,\"x\":0,\"width\":702,\"var\":\"mainSprite\",\"height\":543},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"width\":702,\"var\":\"bg\",\"skin\":\"base/dialog_bg.png\",\"height\":543,\"sizeGrid\":\"90,37,44,35\"}},{\"type\":\"Image\",\"props\":{\"y\":27,\"x\":96.00000000000004,\"var\":\"icon1\",\"skin\":\"base/dialog_icon.png\",\"mouseEnabled\":true}},{\"type\":\"Image\",\"props\":{\"y\":27,\"x\":554,\"var\":\"icon2\",\"skin\":\"base/dialog_icon.png\",\"scaleX\":-1,\"mouseEnabled\":true}},{\"type\":\"Label\",\"props\":{\"y\":20,\"x\":91,\"width\":509,\"var\":\"title\",\"text\":\"标题\",\"overflow\":\"hidden\",\"mouseEnabled\":true,\"height\":62,\"fontSize\":48,\"color\":\"#ffffff\",\"align\":\"center\"}},{\"type\":\"Button\",\"props\":{\"y\":-6,\"x\":610,\"var\":\"closeBtn\",\"skin\":\"base/btn_close.png\"}},{\"type\":\"Sprite\",\"props\":{\"y\":96,\"x\":31,\"width\":\"640\",\"var\":\"contentSprite\",\"height\":307},\"child\":[{\"type\":\"Text\",\"props\":{\"y\":15,\"x\":19,\"width\":599,\"var\":\"contentText\",\"text\":\"提示信息\",\"height\":272,\"fontSize\":\"48\",\"align\":\"left\"}}]},{\"type\":\"Sprite\",\"props\":{\"y\":417,\"x\":0,\"width\":702,\"var\":\"buttonSprite\",\"height\":89},\"child\":[{\"type\":\"Button\",\"props\":{\"y\":0,\"x\":27,\"width\":300,\"var\":\"cancelBtn\",\"skin\":\"base/btn_normal.png\",\"labelSize\":40,\"labelPadding\":\"0,0,6,0\",\"labelColors\":\"#FFFFFF,#FFFFFF,#FFFFFF\",\"labelBold\":\"true\",\"label\":\"取消\",\"height\":95,\"sizeGrid\":\"31,71,40,71\"}},{\"type\":\"Button\",\"props\":{\"y\":0,\"x\":373,\"width\":300,\"var\":\"confirmBtn\",\"skin\":\"base/btn_danger.png\",\"labelSize\":40,\"labelPadding\":\"0,0,6,0\",\"labelColors\":\"#FFFFFF,#FFFFFF,#FFFFFF\",\"labelBold\":\"true\",\"label\":\"确定\",\"height\":95,\"sizeGrid\":\"31,71,40,71\"}}]}]}]};}\r\n\t\t]);\r\n\t\treturn DialogUI;\r\n\t})(Dialog1)\r\n\r\n\r\n\t//class ui.test.OptDialogUI extends laya.ui.Dialog\r\n\tvar OptDialogUI=(function(_super){\r\n\t\tfunction OptDialogUI(){\r\n\t\t\tthis.hu=null;\r\n\t\t\tthis.peng=null;\r\n\t\t\tthis.guo=null;\r\n\t\t\tthis.gang=null;\r\n\t\t\tthis.chi=null;\r\n\t\t\tOptDialogUI.__super.call(this);\r\n\t\t}\r\n\r\n\t\t__class(OptDialogUI,'ui.test.OptDialogUI',_super);\r\n\t\tvar __proto=OptDialogUI.prototype;\r\n\t\t__proto.createChildren=function(){\r\n\t\t\tlaya.ui.Component.prototype.createChildren.call(this);\r\n\t\t\tthis.createView(OptDialogUI.uiView);\r\n\t\t}\r\n\r\n\t\t__static(OptDialogUI,\r\n\t\t['uiView',function(){return this.uiView={\"type\":\"Dialog\",\"props\":{\"width\":1920,\"height\":1080},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"var\":\"hu\",\"skin\":\"ui/game/operat_hu.png\"}},{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":560,\"var\":\"peng\",\"skin\":\"ui/game/operat_peng.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":28,\"x\":162,\"skin\":\"ui/majiang/zheng_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"skin\":\"ui/majiang/zheng_19.png\"}}]}]},{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":1188,\"var\":\"guo\",\"skin\":\"ui/game/operat_guo.png\"}},{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":273,\"var\":\"gang\",\"skin\":\"ui/game/operat_gang.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":28,\"x\":157,\"skin\":\"ui/majiang/zheng_bg.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"skin\":\"ui/majiang/zheng_19.png\"}}]}]},{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":881,\"var\":\"chi\",\"skin\":\"ui/game/operat_chi.png\"},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":66,\"x\":154,\"skin\":\"ui/majiang/zheng_bg.png\",\"scaleY\":0.5,\"scaleX\":0.5},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"skin\":\"ui/majiang/zheng_19.png\"}}]},{\"type\":\"Image\",\"props\":{\"y\":66,\"x\":199,\"skin\":\"ui/majiang/zheng_bg.png\",\"scaleY\":0.5,\"scaleX\":0.5},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"skin\":\"ui/majiang/zheng_19.png\"}}]},{\"type\":\"Image\",\"props\":{\"y\":66,\"x\":243,\"skin\":\"ui/majiang/zheng_bg.png\",\"scaleY\":0.5,\"scaleX\":0.5},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"skin\":\"ui/majiang/zheng_19.png\"}}]}]}]};}\r\n\t\t]);\r\n\t\treturn OptDialogUI;\r\n\t})(Dialog1)\r\n\r\n\r\n\t//class mj.ui.dialog.JoinRoomDialog extends ui.test.JoinRoomUI\r\n\tvar JoinRoomDialog=(function(_super){\r\n\t\tfunction JoinRoomDialog(confirmCallback){\r\n\t\t\tthis._input=\"\";\r\n\t\t\tthis.confirmCallback=null;\r\n\t\t\tJoinRoomDialog.__super.call(this);\r\n\t\t\tthis.confirmCallback=confirmCallback;\r\n\t\t\tfor (var i=0;i < this.inputSprite.numChildren;i++){\r\n\t\t\t\tvar child=this.inputSprite.getChildAt(i);\r\n\t\t\t\tchild.on(\"click\",this,this.onInputClick,[i]);\r\n\t\t\t}\r\n\t\t\tthis.onInputChange();\r\n\t\t}\r\n\r\n\t\t__class(JoinRoomDialog,'mj.ui.dialog.JoinRoomDialog',_super);\r\n\t\tvar __proto=JoinRoomDialog.prototype;\r\n\t\tLaya.imps(__proto,{\"mj.ui.dialog.DialogContent\":true})\r\n\t\t__proto.onInputClick=function(index){\r\n\t\t\tif (this._input.length < 6){\r\n\t\t\t\tthis._input+=index;\r\n\t\t\t\tif (this._input.length==6){\r\n\t\t\t\t\tthis.confirmCallback(this._input);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.onInputChange();\r\n\t\t}\r\n\r\n\t\t__proto.clearInput=function(){\r\n\t\t\tthis._input=\"\";\r\n\t\t\tthis.onInputChange();\r\n\t\t}\r\n\r\n\t\t__proto.backInput=function(){\r\n\t\t\tif (this._input.length > 0){\r\n\t\t\t\tthis._input=this._input.substring(0,this._input.length-1);\r\n\t\t\t}\r\n\t\t\tthis.onInputChange();\r\n\t\t}\r\n\r\n\t\t__proto.onInputChange=function(){\r\n\t\t\tfor (var i=0;i < 6;i++){\r\n\t\t\t\tvar inputChar=i < this._input.length ? this._input.charAt(i):null;\r\n\t\t\t\tvar node=(this.inputShow.getChildAt(i));\r\n\t\t\t\tvar numberImage=(node.getChildAt(0));\r\n\t\t\t\tif (inputChar==null){\r\n\t\t\t\t\tnumberImage.visible=false;\r\n\t\t\t\t}\r\n\t\t\t\telse{\r\n\t\t\t\t\tnumberImage.visible=true;\r\n\t\t\t\t\tnumberImage.skin=\"base/number/win/\"+inputChar+\".png\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__proto.layout=function(){}\r\n\t\t__proto.getDisplayObject=function(){\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\t\t__proto.getContentWidth=function(){\r\n\t\t\treturn this.mainSprite.width;\r\n\t\t}\r\n\r\n\t\t__proto.getContentHeight=function(){\r\n\t\t\treturn this.mainSprite.height;\r\n\t\t}\r\n\r\n\t\t__getset(0,__proto,'input',function(){\r\n\t\t\treturn this._input;\r\n\t\t});\r\n\r\n\t\tJoinRoomDialog.showDialog=function(confirmCallback){\r\n\t\t\tvar joinRoomDialog=new JoinRoomDialog(confirmCallback);\r\n\t\t\tvar createDialog=Dialog.showDialog(\r\n\t\t\t\"AUTO\",joinRoomDialog,\r\n\t\t\t\"进入房间\",null,\r\n\t\t\tHandler.create(joinRoomDialog,joinRoomDialog.clearInput),\"重输\",\r\n\t\t\tHandler.create(joinRoomDialog,joinRoomDialog.backInput),\"删除\");\r\n\t\t\treturn createDialog;\r\n\t\t}\r\n\r\n\t\tJoinRoomDialog.INPUT_MAX=6;\r\n\t\treturn JoinRoomDialog;\r\n\t})(JoinRoomUI)\r\n\r\n\r\n\t//class mj.ui.dialog.PhoneDialog extends ui.test.PhoneDialogUI\r\n\tvar PhoneDialog=(function(_super){\r\n\t\tfunction PhoneDialog(confirmHandler){\r\n\t\t\tthis.codeBtnText=null;\r\n\t\t\tthis._dialog=null;\r\n\t\t\tthis.confirmHandler=null;\r\n\t\t\tthis.phone=null;\r\n\t\t\tthis.leftTime=60;\r\n\t\t\tvar _$this=this;\r\n\t\t\tPhoneDialog.__super.call(this);\r\n\t\t\tthis.confirmHandler=confirmHandler;\r\n\t\t\tthis.phoneInput.on(\"input\",this,function(){\r\n\t\t\t\t_$this.codeBtn.disabled=_$this.phoneInput.text.length===0;\r\n\t\t\t\t_$this.stopCodeBtn();\r\n\t\t\t});\r\n\t\t\tthis.codeBtn.disabled=true;\r\n\t\t\tthis.phoneInput.changeText(\"\");\r\n\t\t\tthis.codeInput.changeText(\"\");\r\n\t\t\tthis.codeBtnText=this.codeBtn.text.text;\r\n\t\t\tthis.codeBtn.on(\"click\",this,function(){\r\n\t\t\t\t_$this.handlerCode();\r\n\t\t\t});\r\n\t\t\tfor (var i=0;i < this.inputSprite.numChildren;i++){\r\n\t\t\t\tvar child=this.inputSprite.getChildAt(i);\r\n\t\t\t\tchild.on(\"click\",this,this.onInputClick,[i]);\r\n\t\t\t}\r\n\t\t\tthis.nextBtn.on(\"click\",this,this.onNext);\r\n\t\t\tthis.resumeBtn.on(\"click\",this,this.onResume);\r\n\t\t}\r\n\r\n\t\t__class(PhoneDialog,'mj.ui.dialog.PhoneDialog',_super);\r\n\t\tvar __proto=PhoneDialog.prototype;\r\n\t\tLaya.imps(__proto,{\"mj.ui.dialog.DialogContent\":true})\r\n\t\t__proto.setDialog=function(_dialog){\r\n\t\t\tthis._dialog=_dialog;\r\n\t\t}\r\n\r\n\t\t__proto.onNext=function(){\r\n\t\t\tif (this.oneStep.visible){\r\n\t\t\t\tthis.handlerCode();\r\n\t\t\t\tthis.phone=this.input;\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tthis.confirmHandler.runWith([this.phone,this.input]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__proto.sendRet=function(success){\r\n\t\t\tWait.close();\r\n\t\t\tif (!success){\r\n\t\t\t\tthis.stopCodeBtn();\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tthis.gotoTwo();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__proto.handlerCode=function(){\r\n\t\t\tNet.instance.write(SendAuthCode.create(this.phoneInput.text));\r\n\t\t\tWait.show(\"发送中...\");\r\n\t\t\tthis.codeBtn.disabled=true;\r\n\t\t\tthis.startCodeBtn();\r\n\t\t}\r\n\r\n\t\t__proto.onResume=function(){\r\n\t\t\tthis.clearInput();\r\n\t\t}\r\n\r\n\t\t__proto.onInputClick=function(index){\r\n\t\t\tvar input=this.input;\r\n\t\t\tif (input.length < this.inputMax){\r\n\t\t\t\tthis.input+=index;\r\n\t\t\t}\r\n\t\t\tthis.onInputChange();\r\n\t\t}\r\n\r\n\t\t__proto.backInput=function(){\r\n\t\t\tif (this.input.length > 0){\r\n\t\t\t\tthis.input=this.input.substring(0,this.input.length-1);\r\n\t\t\t}\r\n\t\t\tthis.onInputChange();\r\n\t\t}\r\n\r\n\t\t__proto.onInputChange=function(){}\r\n\t\t__proto.clearInput=function(){\r\n\t\t\tthis.input=\"\";\r\n\t\t}\r\n\r\n\t\t__proto.startCodeBtn=function(){\r\n\t\t\tLaya.timer.loop(1000,this,this.codeBtnChange);\r\n\t\t}\r\n\r\n\t\t__proto.stopCodeBtn=function(){\r\n\t\t\tthis.codeBtn.text.changeText(this.codeBtnText);\r\n\t\t\tthis.codeBtn.disabled=false;\r\n\t\t\tLaya.timer.clear(this,this.codeBtnChange);\r\n\t\t}\r\n\r\n\t\t__proto.codeBtnChange=function(){\r\n\t\t\tthis.codeBtn.text.changeText(\"(\"+this.leftTime+\")\");\r\n\t\t\tif (this.leftTime==0){\r\n\t\t\t\tthis.stopCodeBtn();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.leftTime--;\r\n\t\t}\r\n\r\n\t\t__proto.layout=function(){}\r\n\t\t__proto.getDisplayObject=function(){\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\t\t__proto.getContentWidth=function(){\r\n\t\t\treturn this.mainSprite.width;\r\n\t\t}\r\n\r\n\t\t__proto.getContentHeight=function(){\r\n\t\t\treturn this.mainSprite.height;\r\n\t\t}\r\n\r\n\t\t__proto.getPhone=function(){\r\n\t\t\treturn this.phoneInput.text;\r\n\t\t}\r\n\r\n\t\t__proto.getCode=function(){\r\n\t\t\treturn this.codeInput.text;\r\n\t\t}\r\n\r\n\t\t__proto.destroy=function(destroyChild){\r\n\t\t\t(destroyChild===void 0)&& (destroyChild=true);\r\n\t\t\tthis.stopCodeBtn();\r\n\t\t\tlaya.ui.View.prototype.destroy.call(this,destroyChild);\r\n\t\t}\r\n\r\n\t\t__proto.gotoOne=function(){\r\n\t\t\tthis.oneStep.visible=true;\r\n\t\t\tthis.twoStep.visible=false;\r\n\t\t\tthis._dialog.setTitle(\"第一步  输入手机号！\");\r\n\t\t\tthis.input=\"\";\r\n\t\t}\r\n\r\n\t\t__proto.gotoTwo=function(){\r\n\t\t\tthis.oneStep.visible=false;\r\n\t\t\tthis.twoStep.visible=true;\r\n\t\t\tthis._dialog.setTitle(\"第二步  输入验证码！\");\r\n\t\t\tthis.input=\"\";\r\n\t\t}\r\n\r\n\t\t__getset(0,__proto,'inputMax',function(){\r\n\t\t\treturn this.oneStep.visible ? 13 :6;\r\n\t\t});\r\n\r\n\t\t__getset(0,__proto,'input',function(){\r\n\t\t\treturn this.oneStep.visible ? this.phoneInput.text :this.codeInput.text;\r\n\t\t\t},function(v){\r\n\t\t\treturn this.oneStep.visible ? this.phoneInput.changeText(v):this.codeInput.changeText(v);\r\n\t\t});\r\n\r\n\t\tPhoneDialog.showDialog=function(confirmHandler){\r\n\t\t\tif (PhoneDialog.dialog==null){\r\n\t\t\t\tPhoneDialog.phoneDialog=new PhoneDialog(confirmHandler);\r\n\t\t\t\tPhoneDialog.dialog=Dialog.showDialog(\r\n\t\t\t\t\"AUTO\",PhoneDialog.phoneDialog,\"\",null,null,null);\r\n\t\t\t\tPhoneDialog.phoneDialog.setDialog(PhoneDialog.dialog)\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tif (PhoneDialog.dialog.confirmHandler){\r\n\t\t\t\t\tPhoneDialog.dialog.confirmHandler.recover();\r\n\t\t\t\t}\r\n\t\t\t\tPhoneDialog.dialog.confirmHandler=confirmHandler;\r\n\t\t\t\tPhoneDialog.dialog.popup(true);\r\n\t\t\t}\r\n\t\t\tPhoneDialog.phoneDialog.gotoOne();\r\n\t\t\treturn PhoneDialog.dialog;\r\n\t\t}\r\n\r\n\t\tPhoneDialog.close=function(){\r\n\t\t\tif (PhoneDialog.dialog){\r\n\t\t\t\tPhoneDialog.dialog.close();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tPhoneDialog.dialog=null\r\n\t\tPhoneDialog.phoneDialog=null\r\n\t\tPhoneDialog.INPUT_MAX=7;\r\n\t\treturn PhoneDialog;\r\n\t})(PhoneDialogUI)\r\n\r\n\r\n\t//class ui.test.WaitUI extends laya.ui.Dialog\r\n\tvar WaitUI=(function(_super){\r\n\t\tfunction WaitUI(){\r\n\t\t\tthis.main=null;\r\n\t\t\tthis.text=null;\r\n\t\t\tWaitUI.__super.call(this);\r\n\t\t}\r\n\r\n\t\t__class(WaitUI,'ui.test.WaitUI',_super);\r\n\t\tvar __proto=WaitUI.prototype;\r\n\t\t__proto.createChildren=function(){\r\n\t\t\tView.regComponent(\"Text\",Text);\r\n\t\t\tlaya.ui.Component.prototype.createChildren.call(this);\r\n\t\t\tthis.createView(WaitUI.uiView);\r\n\t\t}\r\n\r\n\t\t__static(WaitUI,\r\n\t\t['uiView',function(){return this.uiView={\"type\":\"Dialog\",\"props\":{\"width\":314,\"height\":263},\"child\":[{\"type\":\"Image\",\"props\":{\"y\":0,\"x\":0,\"width\":314,\"var\":\"main\",\"skin\":\"base/wait_bg.png\",\"height\":263,\"alpha\":1,\"sizeGrid\":\"24,24,24,24\"},\"child\":[{\"type\":\"Text\",\"props\":{\"y\":204,\"x\":17,\"width\":281,\"var\":\"text\",\"text\":\"正在加载\",\"height\":33,\"fontSize\":\"30\",\"color\":\"#ffffff\",\"align\":\"center\"}}]}]};}\r\n\t\t]);\r\n\t\treturn WaitUI;\r\n\t})(Dialog1)\r\n\r\n\r\n\t/**\r\n\t*@author zuoge85@gmail.com on 2016/11/9.\r\n\t*/\r\n\t//class mj.ui.dialog.RoomHistoryListDialog extends ui.test.RoomHistoryListUI\r\n\tvar RoomHistoryListDialog=(function(_super){\r\n\t\tfunction RoomHistoryListDialog(msg){\r\n\t\t\tthis.nWidth=NaN;\r\n\t\t\tthis.nHeight=NaN;\r\n\t\t\tthis.msg=null;\r\n\t\t\tRoomHistoryListDialog.__super.call(this);\r\n\t\t\tthis.nWidth=this.width;\r\n\t\t\tthis.nHeight=this.height;\r\n\t\t\tthis.msg=msg;\r\n\t\t\tthis.row.removeSelf();\r\n\t\t}\r\n\r\n\t\t__class(RoomHistoryListDialog,'mj.ui.dialog.RoomHistoryListDialog',_super);\r\n\t\tvar __proto=RoomHistoryListDialog.prototype;\r\n\t\tLaya.imps(__proto,{\"mj.ui.dialog.DialogContent\":true})\r\n\t\t__proto.layout=function(){\r\n\t\t\tthis.init();\r\n\t\t}\r\n\r\n\t\t__proto.init=function(){\r\n\t\t\tthis.list.itemRender=RoomHistoryListUI.uiView.child[0].child[1];\r\n\t\t\tthis.list.repeatX=1;\r\n\t\t\tthis.list.repeatY=this.msg.list.length;\r\n\t\t\tthis.list.vScrollBarSkin=\"\";\r\n\t\t\tthis.list.renderHandler=new Handler(this,this.updateItem);\r\n\t\t\tthis.list.array=this.msg.list;\r\n\t\t}\r\n\r\n\t\t__proto.updateItem=function(cell,index){\r\n\t\t\tif (!cell.dataSource){\r\n\t\t\t\treturn;\r\n\t\t\t};\r\n\t\t\tvar item=cell.dataSource;\r\n\t\t\tvar childByName=(cell.getChildByName(\"roomId\"));\r\n\t\t\tchildByName.text=\"房间号:\"+item.roomCheckId;\r\n\t\t\tvar chapterNums=(cell.getChildByName(\"chapterNums\"));\r\n\t\t\tchapterNums.text=\"(\"+item.chapterNums+\"盘)\";\r\n\t\t\tvar date=(cell.getChildByName(\"date\"));\r\n\t\t\tdate.text=item.startDate;\r\n\t\t\tfor (var i=0;i < item.userNames.length;i++){\r\n\t\t\t\tvar name=item.userNames[i];\r\n\t\t\t\t(cell.getChildByName(\"names\").getChildByName(\"user\"+i)).text=name ? name :\"\";\r\n\t\t\t\tvar score=item.scores[i];\r\n\t\t\t\t(cell.getChildByName(\"scores\").getChildByName(\"score\"+i)).text=score ? score :\"0\";\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__proto.getDisplayObject=function(){\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\t\t__proto.getContentWidth=function(){\r\n\t\t\treturn this.nWidth *this.scaleX;\r\n\t\t}\r\n\r\n\t\t__proto.getContentHeight=function(){\r\n\t\t\treturn this.nHeight *this.scaleY;\r\n\t\t}\r\n\r\n\t\tRoomHistoryListDialog.showDialog=function(msg){\r\n\t\t\tif (RoomHistoryListDialog.dialog){\r\n\t\t\t\tRoomHistoryListDialog.close();\r\n\t\t\t};\r\n\t\t\tvar roomHistoryListDialog=new RoomHistoryListDialog(msg);\r\n\t\t\tRoomHistoryListDialog.dialog=Dialog.showDialog(\r\n\t\t\t\"AUTO\",roomHistoryListDialog,\"战   绩\",null,Handler.create(\r\n\t\t\tnull,RoomHistoryListDialog.close),\"确定\");\r\n\t\t\treturn RoomHistoryListDialog.dialog;\r\n\t\t}\r\n\r\n\t\tRoomHistoryListDialog.close=function(){\r\n\t\t\tif (RoomHistoryListDialog.dialog){\r\n\t\t\t\tRoomHistoryListDialog.dialog.close();\r\n\t\t\t\tRoomHistoryListDialog.dialog=null;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tRoomHistoryListDialog.H_PAI_SPACE=4;\r\n\t\tRoomHistoryListDialog.V_PAI_SPACE=0;\r\n\t\tRoomHistoryListDialog.dialog=null\r\n\t\treturn RoomHistoryListDialog;\r\n\t})(RoomHistoryListUI)\r\n\r\n\r\n\t/**\r\n\t*@author zuoge85@gmail.com on 2016/11/9.\r\n\t*/\r\n\t//class mj.ui.dialog.SettingDialog extends ui.test.SettingDialogUI\r\n\tvar SettingDialog=(function(_super){\r\n\t\tfunction SettingDialog(){\r\n\t\t\tthis.nWidth=NaN;\r\n\t\t\tthis.nHeight=NaN;\r\n\t\t\tthis.msg=null;\r\n\t\t\tvar _$this=this;\r\n\t\t\tSettingDialog.__super.call(this);\r\n\t\t\tthis.nWidth=this.width;\r\n\t\t\tthis.nHeight=this.height;\r\n\t\t\tthis.msg=this.msg;\r\n\t\t\tthis.yinxiaoSlider.changeHandler=new Handler(this,function(value){\r\n\t\t\t\tAudioManager.changeYinxiao(value / 100);\r\n\t\t\t\t_$this.update();\r\n\t\t\t});\r\n\t\t\tthis.yinyueSlider.changeHandler=new Handler(this,function(value){\r\n\t\t\t\tAudioManager.changeYinyue(value / 100);\r\n\t\t\t\t_$this.update();\r\n\t\t\t});\r\n\t\t\tthis.yinxiaoCheckbox.clickHandler=new Handler(this,function(value){\r\n\t\t\t\tAudioManager.changeYinxiaoMuted(_$this.yinxiaoCheckbox.selected);\r\n\t\t\t\t_$this.update();\r\n\t\t\t});\r\n\t\t\tthis.yinyueCheckbox.clickHandler=new Handler(this,function(value){\r\n\t\t\t\tAudioManager.changeYinyueMuted(_$this.yinyueCheckbox.selected);\r\n\t\t\t\t_$this.update();\r\n\t\t\t});\r\n\t\t\tthis.mainSprite.mouseEnabled=true;\r\n\t\t\tvar count=0;\r\n\t\t\tthis.mainSprite.on(\"click\",this,function(){\r\n\t\t\t\tcount++;\r\n\t\t\t\tif (count % 10==0){\r\n\t\t\t\t\tSettingDialog.showState=!SettingDialog.showState;\r\n\t\t\t\t\tif (SettingDialog.showState){\r\n\t\t\t\t\t\tStat.show(0,100);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\tStat.hide();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tthis.update();\r\n\t\t}\r\n\r\n\t\t__class(SettingDialog,'mj.ui.dialog.SettingDialog',_super);\r\n\t\tvar __proto=SettingDialog.prototype;\r\n\t\tLaya.imps(__proto,{\"mj.ui.dialog.DialogContent\":true})\r\n\t\t__proto.update=function(){\r\n\t\t\tthis.yinxiaoSlider.value=AudioManager.getYinxiaoVolume()*100;\r\n\t\t\tthis.yinyueSlider.value=AudioManager.getYinyueVolume()*100;\r\n\t\t\tthis.yinxiaoCheckbox.selected=AudioManager.getYinxiaoMuted();\r\n\t\t\tthis.yinyueCheckbox.selected=AudioManager.getYinyueMuted();\r\n\t\t}\r\n\r\n\t\t__proto.layout=function(){\r\n\t\t\tthis.init();\r\n\t\t}\r\n\r\n\t\t__proto.init=function(){}\r\n\t\t__proto.getDisplayObject=function(){\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\t\t__proto.getContentWidth=function(){\r\n\t\t\treturn this.nWidth *this.scaleX;\r\n\t\t}\r\n\r\n\t\t__proto.getContentHeight=function(){\r\n\t\t\treturn this.nHeight *this.scaleY;\r\n\t\t}\r\n\r\n\t\tSettingDialog.showDialog=function(){\r\n\t\t\tif (SettingDialog.dialog){\r\n\t\t\t\tSettingDialog.close();\r\n\t\t\t};\r\n\t\t\tvar settingDialog=new SettingDialog();\r\n\t\t\tSettingDialog.dialog=Dialog.showDialog(\r\n\t\t\t\"AUTO\",settingDialog,\"用户信息\",null,Handler.create(\r\n\t\t\tnull,SettingDialog.close),\"确定\");\r\n\t\t\treturn SettingDialog.dialog;\r\n\t\t}\r\n\r\n\t\tSettingDialog.showQuitDialog=function(confirmHandler,nameTxt){\r\n\t\t\tif (SettingDialog.dialog){\r\n\t\t\t\tSettingDialog.close();\r\n\t\t\t};\r\n\t\t\tvar settingDialog=new SettingDialog();\r\n\t\t\tSettingDialog.dialog=Dialog.showDialog(\r\n\t\t\t\"AUTO\",settingDialog,\"用户信息\",null,confirmHandler,nameTxt);\r\n\t\t\treturn SettingDialog.dialog;\r\n\t\t}\r\n\r\n\t\tSettingDialog.close=function(){\r\n\t\t\tif (SettingDialog.dialog){\r\n\t\t\t\tSettingDialog.dialog.close();\r\n\t\t\t\tSettingDialog.dialog=null;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tSettingDialog.dialog=null\r\n\t\tSettingDialog.showState=false;\r\n\t\treturn SettingDialog;\r\n\t})(SettingDialogUI)\r\n\r\n\r\n\t/**\r\n\t*@author zuoge85@gmail.com on 2016/11/9.\r\n\t*/\r\n\t//class mj.ui.dialog.UserDialog extends ui.test.UserDialogUI\r\n\tvar UserDialog=(function(_super){\r\n\t\tfunction UserDialog(name,avatar,ip,id,user,sceneUsers){\r\n\t\t\tthis.nWidth=NaN;\r\n\t\t\tthis.nHeight=NaN;\r\n\t\t\tthis.msg=null;\r\n\t\t\tvar _$this=this;\r\n\t\t\tUserDialog.__super.call(this);\r\n\t\t\tthis.nWidth=this.width;\r\n\t\t\tthis.nHeight=this.height;\r\n\t\t\tthis.msg=this.msg;\r\n\t\t\tthis.userName.text=name;\r\n\t\t\tthis.userId.text=\"ID:\"+id;\r\n\t\t\tthis.ip.text=\"IP:\"+ip;\r\n\t\t\tvar image=this.userHeadIcon;\r\n\t\t\tvar maskImage=this.userHeadMask;\r\n\t\t\tthis.userHeadIconOut.mask=this.userHeadMask;\r\n\t\t\tif (avatar){\r\n\t\t\t\tLaya.loader.load(avatar,Handler.create(this,function(){\r\n\t\t\t\t\tvar t=Laya.loader.getRes(avatar);\r\n\t\t\t\t\timage.skin=avatar;\r\n\t\t\t\t\tvar radioW=_$this.userHeadIcon.width / t.width;\r\n\t\t\t\t\tvar radioH=_$this.userHeadIcon.height / t.height;\r\n\t\t\t\t\tvar radio=radioW > radioH ? radioW :radioH;\r\n\t\t\t\t\timage.width=t.width;\r\n\t\t\t\t\timage.height=t.height;\r\n\t\t\t\t\timage.scale(radio,radio);\r\n\t\t\t\t\tmaskImage.visible=false;\r\n\t\t\t\t\timage.pivotX=-(_$this.userHeadIcon.width-(t.width *radio))/ 2+_$this.userHeadIcon.x;\r\n\t\t\t\t\timage.pivotY=-(_$this.userHeadIcon.width-(t.height *radio))/ 2+_$this.userHeadIcon.y;\r\n\t\t\t\t\t_$this.userHeadIconOut.mask=maskImage;\r\n\t\t\t\t}));\r\n\t\t\t}\r\n\t\t\tthis.userInfo0.visible=false;\r\n\t\t\tthis.userInfo1.visible=false;\r\n\t\t\tthis.userInfo2.visible=false;\r\n\t\t\tif (user){\r\n\t\t\t\tfor (var i=0,l=0;i < sceneUsers.length;i++){\r\n\t\t\t\t\tvar curUser=sceneUsers[i];\r\n\t\t\t\t\tif (curUser !=null && user.locationIndex !=curUser.locationIndex){\r\n\t\t\t\t\t\tvar userInfo=this[\"userInfo\"+l];\r\n\t\t\t\t\t\t(userInfo.getChildByName(\"name\")).text=curUser.userName;\r\n\t\t\t\t\t\tvar distance=curUser[\"user\"+i+\"Distance\"];\r\n\t\t\t\t\t\t(userInfo.getChildByName(\"distance\")).text=\"距离：\"+(distance !=null ? distance :\"未知\");\r\n\t\t\t\t\t\t(userInfo.getChildByName(\"ip\")).text=\"IP:\"+curUser.ip;\r\n\t\t\t\t\t\tuserInfo.visible=true;\r\n\t\t\t\t\t\tl++;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__class(UserDialog,'mj.ui.dialog.UserDialog',_super);\r\n\t\tvar __proto=UserDialog.prototype;\r\n\t\tLaya.imps(__proto,{\"mj.ui.dialog.DialogContent\":true})\r\n\t\t__proto.layout=function(){\r\n\t\t\tthis.init();\r\n\t\t}\r\n\r\n\t\t__proto.init=function(){}\r\n\t\t__proto.getDisplayObject=function(){\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\t\t__proto.getContentWidth=function(){\r\n\t\t\treturn this.nWidth *this.scaleX;\r\n\t\t}\r\n\r\n\t\t__proto.getContentHeight=function(){\r\n\t\t\treturn this.nHeight *this.scaleY;\r\n\t\t}\r\n\r\n\t\tUserDialog.showDialog=function(name,avatar,ip,id,user,sceneUsers){\r\n\t\t\tif (UserDialog.dialog){\r\n\t\t\t\tUserDialog.close();\r\n\t\t\t};\r\n\t\t\tvar userDialog=new UserDialog(name,avatar,ip,id,user,sceneUsers);\r\n\t\t\tUserDialog.dialog=Dialog.showDialog(\r\n\t\t\t\"AUTO\",userDialog,\"用户信息\",null,Handler.create(\r\n\t\t\tnull,UserDialog.close),\"确定\");\r\n\t\t\treturn UserDialog.dialog;\r\n\t\t}\r\n\r\n\t\tUserDialog.close=function(){\r\n\t\t\tif (UserDialog.dialog){\r\n\t\t\t\tUserDialog.dialog.close();\r\n\t\t\t\tUserDialog.dialog=null;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tUserDialog.dialog=null\r\n\t\treturn UserDialog;\r\n\t})(UserDialogUI)\r\n\r\n\r\n\t/**\r\n\t*加载界面,单例!\r\n\t*@author zuoge85@gmail.com on 16/10/11.\r\n\t*/\r\n\t//class mj.ui.Loading extends ui.test.LoadingUI\r\n\tvar Loading=(function(_super){\r\n\t\tfunction Loading(){\r\n\t\t\tthis.vector=[];\r\n\t\t\tthis.nWidth=NaN;\r\n\t\t\tthis.nHeight=NaN;\r\n\t\t\tthis.nProgressBarWidth=NaN;\r\n\t\t\tthis.nProgressBarHeigth=NaN;\r\n\t\t\tLoading.__super.call(this);\r\n\t\t\tif (Loading.instance !=null){\r\n\t\t\t\tthrow new SingletonError(\"ResourceManager 是单例模式\");\r\n\t\t\t}\r\n\t\t\tLaya.stage.on(\"resize\",this,this.layout);\r\n\t\t\tthis.nWidth=this.bg.width;\r\n\t\t\tthis.nHeight=this.bg.height;\r\n\t\t\tthis.nProgressBarWidth=this.progressBar.width;\r\n\t\t\tthis.nProgressBarHeigth=this.progressBar.height;\r\n\t\t\tthis.layout();\r\n\t\t}\r\n\r\n\t\t__class(Loading,'mj.ui.Loading',_super);\r\n\t\tvar __proto=Loading.prototype;\r\n\t\t__proto.layout=function(){\r\n\t\t\tvar bWidth=Browser.width;\r\n\t\t\tvar bHeight=Browser.height;\r\n\t\t\tvar wRatio=bWidth / this.nWidth;\r\n\t\t\tvar hRatio=bHeight / this.nHeight;\r\n\t\t\tvar ratio=wRatio > hRatio ? wRatio :hRatio;\r\n\t\t\tthis.bg.scale(ratio,ratio);\r\n\t\t\tvar width=this.bg.width *ratio;\r\n\t\t\tvar height=this.bg.height *ratio;\r\n\t\t\tthis.bg.x=(bWidth-width)/ 2;\r\n\t\t\tthis.bg.y=(bHeight-height)/ 2;\r\n\t\t\tvar progressWidth=bWidth *0.7;\r\n\t\t\tprogressWidth=progressWidth > this.nProgressBarWidth ? this.nProgressBarWidth :progressWidth;\r\n\t\t\tthis.progressBar.width=progressWidth;\r\n\t\t\tthis.progressBar.x=-(progressWidth-bWidth)/ 2;\r\n\t\t\tthis.progressBar.y=bHeight *0.9-this.nProgressBarHeigth;\r\n\t\t\tthis.progressBarLabel.width=progressWidth;\r\n\t\t\tthis.progressBarLabel.x=this.progressBar.x;\r\n\t\t\tthis.progressBarLabel.y=this.progressBar.y+2;\r\n\t\t\tthis.progress=0;\r\n\t\t\tthis.size(width,height);\r\n\t\t}\r\n\r\n\t\t__proto.show=function(){\r\n\t\t\tUiManager.instance.topLayer.addChild(this);\r\n\t\t}\r\n\r\n\t\t__proto.hide=function(){\r\n\t\t\tUiManager.instance.topLayer.removeChild(this);\r\n\t\t}\r\n\r\n\t\t__proto.destroy=function(destroyChild){\r\n\t\t\t(destroyChild===void 0)&& (destroyChild=true);\r\n\t\t\tlaya.ui.View.prototype.destroy.call(this,destroyChild);\r\n\t\t\tLaya.stage.off(\"resize\",this,this.layout);\r\n\t\t}\r\n\r\n\t\t__getset(0,__proto,'progress',null,function(progress){\r\n\t\t\tthis.progressBar.value=progress;\r\n\t\t\tif (progress==1.0){\r\n\t\t\t\tthis.progressBarLabel.text=\"加载完成等待初始化\";\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tthis.progressBarLabel.text=\"加载中 \"+Math.ceil(progress *100)+\"%\";\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t__static(Loading,\r\n\t\t['instance',function(){return this.instance=new Loading();}\r\n\t\t]);\r\n\t\treturn Loading;\r\n\t})(LoadingUI)\r\n\r\n\r\n\t//class mj.scene.GameTableScene extends view.GameTableView\r\n\tvar GameTableScene=(function(_super){\r\n\t\tfunction GameTableScene(isMyCreate,observer){\r\n\t\t\tthis.observer=null;\r\n\t\t\tthis.shaziAni=null;\r\n\t\t\tthis.startFaPai=false;\r\n\t\t\tthis.chapterMsg=null;\r\n\t\t\tthis.turntableSecond=0;\r\n\t\t\tthis.turntableIndex=-1;\r\n\t\t\tthis.currentTurntable=null;\r\n\t\t\tthis.turntableStartTime=NaN;\r\n\t\t\tthis.faPaiIndex=0;\r\n\t\t\tthis.faPaiStart=NaN;\r\n\t\t\tthis.paiSpace=[0,0,0,0];\r\n\t\t\tthis.prevPaiSprite=null;\r\n\t\t\tthis.dragStartSprite=null;\r\n\t\t\tthis.dragStartX=-1;\r\n\t\t\tthis.outPaiMoviePrev=null;\r\n\t\t\tthis._targetPoll=new TweenTargetPoll();\r\n\t\t\tthis.startPoint=new Point();\r\n\t\t\tthis.startRB=new Point();\r\n\t\t\tGameTableScene.__super.call(this,isMyCreate);\r\n\t\t\tthis.observer=observer;\r\n\t\t\tthis.undateDelButton();\r\n\t\t\tfor (var i=0;i < 4;i++){\r\n\t\t\t\tthis._targetPoll.add(this[\"outPaiMovie\"+i])\r\n\t\t\t}\r\n\t\t\tthis.sbSourceBian0.visible=false;\r\n\t\t\tthis.sbSourceBian1.visible=false;\r\n\t\t\tthis.isAutoStart.visible=false;\r\n\t\t\tthis.userHead0.hitTestPrior=true;\r\n\t\t\tthis.userHead1.hitTestPrior=true;\r\n\t\t\tthis.userHead2.hitTestPrior=true;\r\n\t\t\tthis.userHead3.hitTestPrior=true;\r\n\t\t\tthis.userHead0.on(\"click\",this,this.getOnHeadClick(0));\r\n\t\t\tthis.userHead1.on(\"click\",this,this.getOnHeadClick(1));\r\n\t\t\tthis.userHead2.on(\"click\",this,this.getOnHeadClick(2));\r\n\t\t\tthis.userHead3.on(\"click\",this,this.getOnHeadClick(3));\r\n\t\t\tthis.bianMove.visible=false;\r\n\t\t\tLayaUtils.handlerButton(this.settingBtn);\r\n\t\t\tLayaUtils.handlerButton(this.gameInfoBtn);\r\n\t\t\tthis.settingBtn.on(\"click\",this,function(){\r\n\t\t\t\tif (isMyCreate){\r\n\t\t\t\t\tSettingDialog.showQuitDialog(Handler.create(this,function(){\r\n\t\t\t\t\t\tSettingDialog.close();\r\n\t\t\t\t\t\tGameTableScene.voteDelRoomClick();\r\n\t\t\t\t\t}),\"解散房间\");\r\n\t\t\t\t}\r\n\t\t\t\telse{\r\n\t\t\t\t\tSettingDialog.showQuitDialog(Handler.create(this,function(){\r\n\t\t\t\t\t\tSettingDialog.close();\r\n\t\t\t\t\t\tGameTableScene.voteDelRoomClick();\r\n\t\t\t\t\t}),\"解散房间\");\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tthis.gameInfoBtn.on(\"click\",this,function(){\r\n\t\t\t\tDialog.showMessage(\"规则\\n\"+\r\n\t\t\t\t\"共一百四十四张：筒、索、万、东、南、西、北风、中、发、白， 有 梅、兰、竹、菊、春、夏、秋、冬这八个皆为花。\\n\"+\r\n\t\t\t\t\"打法\\n\"+\r\n\t\t\t\t\"与网上打法有许多不同，玩家开始时，庄家可得到十四张牌，其余的人十三张。庄家从牌中选出一张牌丢出。其他家只能“碰”或者“杠”，当玩家定胡时，可以吃任何一家出道你要的牌，同时有多家吃胡时，只有胡大牌的一家才算胡，而剩下的一家也就被称为截胡。胡法分（由小到大）：鸡胡、杂色、清一色、大哥、十三幺。开台时玩家都会说明玩的大小，常见的有1 2 3 、3个5、10 20 30等。第一个数是指花多少，第二个数是共杠或者暗杠是多少，第三个数是指最小的鸡胡是多少。其他胡法就是按倍数计算。玩家摸到花时，到牌堆尾摸牌进行补牌。有时候有些玩家还有买马这个玩法，买马是玩家买哪家赢，而买到哪家是看你拿到的麻将和上盘的赢家也就是这盘的庄家。庄家为1，逆时针算起，马的牌数是多少，进行计算，算到哪家那哪家就是你买到的人，买到的那家赢了，买马者就可以拿与赢家一样的数，相反你买的那家输了，他要出多少你就出多少。\\n\"+\r\n\t\t\t\t\"摸牌\\n\"+\r\n\t\t\t\t\"游戏在一开始，只有庄家可得到十四张牌，其余的人十三张。庄家从牌中选出一张牌丢出。此时，其它三家都有权力要那张丢出的牌。庄家的下家（右手边的玩者），有权力吃或碰那张牌，其它两家则只可碰或杠那张牌。 “ 碰 ” 比 “ 吃 ” 优先。\\n\"+\r\n\t\t\t\t\"庄家\\n\"+\r\n\t\t\t\t\"1、如果庄家胡牌或和牌（流局）则下盘依然由该庄家做庄。\\n\"+\r\n\t\t\t\t\"2、如果非庄家胡牌则下一盘由庄家的下家玩家做庄。\\n\"+\r\n\t\t\t\t\"3、第一盘庄家由系统随机分配风位，东风位玩家为庄家。\",\r\n\t\t\t\tnull,\"LARGE\",\"规则\");\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t__class(GameTableScene,'mj.scene.GameTableScene',_super);\r\n\t\tvar __proto=GameTableScene.prototype;\r\n\t\tLaya.imps(__proto,{\"mj.scene.GameScene\":true})\r\n\t\t__proto.undateDelButton=function(){\r\n\t\t\tif (this._isMyCreate || GameManager.instance.isStart()){\r\n\t\t\t\tthis.delRoomBtn.label=\"解散房间\";\r\n\t\t\t\tthis.delRoomBtn.offAll(\"click\");\r\n\t\t\t\tthis.delRoomBtn.on(\"click\",this,GameTableScene.onDelRoomClick);\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tthis.delRoomBtn.label=\"退出房间\";\r\n\t\t\t\tthis.delRoomBtn.offAll(\"click\");\r\n\t\t\t\tthis.delRoomBtn.on(\"click\",this,GameTableScene.onQuitRoomClick);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__proto.getOnHeadClick=function(index){\r\n\t\t\treturn function (){\r\n\t\t\t\tvar gameRoomInfo=GameManager.instance.roomInfo();\r\n\t\t\t\tif (gameRoomInfo){\r\n\t\t\t\t\tvar user=gameRoomInfo.sceneUser[GameManager.instance.transformToIndex(index)];\r\n\t\t\t\t\tif (user){\r\n\t\t\t\t\t\tUserDialog.showDialog(\r\n\t\t\t\t\t\tuser.userName,user.avatar,user.ip,user.userId,\r\n\t\t\t\t\t\tuser,gameRoomInfo.sceneUser);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\t__proto.onBack=function(){\r\n\t\t\tif (this._isMyCreate || GameManager.instance.isStart()){\r\n\t\t\t\tGameTableScene.voteDelRoomClick();\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tGameTableScene.onQuitRoomClick();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__proto.getDisplayObject=function(){\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\t\t__proto.destroy=function(destroyChild){\r\n\t\t\t(destroyChild===void 0)&& (destroyChild=true);\r\n\t\t\tlaya.ui.View.prototype.destroy.call(this,destroyChild);\r\n\t\t\tLaya.timer.clearAll(this);\r\n\t\t\tLaya.stage.off(\"resize\",this,this.layout);\r\n\t\t\tif (this.shaziAni){\r\n\t\t\t\tthis.shaziAni.removeSelf();\r\n\t\t\t\tthis.shaziAni.destroy(true);\r\n\t\t\t}\r\n\t\t\tif (this.currentTurntable){\r\n\t\t\t\tTween.clearAll(this.currentTurntable)\r\n\t\t\t}\r\n\t\t\tthis._targetPoll.clear();\r\n\t\t}\r\n\r\n\t\t__proto.updateFullUser=function(isFull,isMyCreate){\r\n\t\t\tthis.inviteBtn.offAll(\"click\");\r\n\t\t\tif (isFull && isMyCreate){\r\n\t\t\t\tthis.inviteBtn.label=\"开始游戏\";\r\n\t\t\t\tthis.inviteBtn.on(\"click\",this,this.onStartChapterClick);\r\n\t\t\t\tif (this.isAutoStart.selected && !GameManager.instance.isStart()){\r\n\t\t\t\t\tthis.onStartChapterClick(null);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tthis.inviteBtn.label=\"邀请好友\";\r\n\t\t\t\tthis.inviteBtn.on(\"click\",this,this.onInviteBtnClick);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__proto.onStartChapterClick=function(e){\r\n\t\t\tUserManager.instance.startChapter();\r\n\t\t}\r\n\r\n\t\t__proto.onInviteBtnClick=function(e){\r\n\t\t\tvar roomCheckId=GameManager.instance.roomInfo().roomCheckId;\r\n\t\t\tif(window.shareInviteUser)window.shareInviteUser(roomCheckId);;\r\n\t\t}\r\n\r\n\t\t__proto.startChapter=function(chapterMsg){\r\n\t\t\tthis.chapterMsg=chapterMsg;\r\n\t\t\tthis.updateTingPai(null);\r\n\t\t\tthis.undateDelButton();\r\n\t\t\tthis.sbSourceBian0.visible=false;\r\n\t\t\tthis.sbSourceBian1.visible=false;\r\n\t\t\tthis.waitSprite.visible=false;\r\n\t\t\tvar ratio=UiHelps.getGameRatio();\r\n\t\t\tif (this.shaziAni){\r\n\t\t\t\tthis.shaziAni.removeSelf();\r\n\t\t\t\tthis.shaziAni.destroy();\r\n\t\t\t\tthis.shaziAni=null;\r\n\t\t\t}\r\n\t\t\tthis.shaziAni=new Animation();\r\n\t\t\tthis.shaziAni.source=\"res/atlas/movie/shazi.json\";\r\n\t\t\tthis.shaziAni.interval=60;\r\n\t\t\tthis.shaziAni.loop=false;\r\n\t\t\tvar bounds=this.shaziAni.getGraphicBounds();\r\n\t\t\tvar bWidth=Browser.width;\r\n\t\t\tvar bHeight=Browser.height;\r\n\t\t\tthis.shaziAni.pos(\r\n\t\t\t(bWidth-(bounds.width+bounds.x)*ratio)/ 2-bounds.x,\r\n\t\t\t(bHeight-(bounds.height *ratio))/ 2-bounds.y);\r\n\t\t\tUiManager.instance.dialogLayer.addChild(this.shaziAni);\r\n\t\t\tthis.shaziAni.play(0,false);\r\n\t\t\tthis.shaziAni.scale(ratio,ratio);\r\n\t\t\tthis.updateLeftGameNums((chapterMsg.chapterNumsMax-chapterMsg.chapterNums));\r\n\t\t\tthis.startFaPai=true;\r\n\t\t\tthis.binaGuiMoveMovie();\r\n\t\t}\r\n\r\n\t\t__proto.startTime=function(turntableSecond){\r\n\t\t\tthis.turntableSecond=turntableSecond;\r\n\t\t\tthis.turntableStartTime=Laya.timer.currTimer;\r\n\t\t}\r\n\r\n\t\t__proto.isWaitStart=function(){\r\n\t\t\treturn this.startFaPai;\r\n\t\t}\r\n\r\n\t\t__proto.stopFaPai=function(chapter){\r\n\t\t\tif (this.startFaPai){\r\n\t\t\t\tthis.startFaPai=false;\r\n\t\t\t\tthis.updateChapter(this.chapterMsg);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__proto.frame=function(){\r\n\t\t\tif (this.startFaPai){\r\n\t\t\t\tif (this.shaziAni !=null && !this.shaziAni.isPlaying){\r\n\t\t\t\t\tthis.shaziAni.removeSelf();\r\n\t\t\t\t\tthis.shaziAni.destroy();\r\n\t\t\t\t\tthis.shaziAni=null;\r\n\t\t\t\t\tthis.faPaiIndex=0;\r\n\t\t\t\t}\r\n\t\t\t\telse if (this.shaziAni==null){\r\n\t\t\t\t\tthis.chapterFaPai();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (this.turntableSecond >-1){\r\n\t\t\t\tvar leftTime=Laya.timer.currTimer-this.turntableStartTime;\r\n\t\t\t\tif (this.turntableSecond==2){\r\n\t\t\t\t\tthis.observer.onTimeupAlarm();\r\n\t\t\t\t}\r\n\t\t\t\tif ((leftTime)> 1000){\r\n\t\t\t\t\tthis.updateTurntableTime(this.turntableSecond);\r\n\t\t\t\t\tthis.turntableStartTime=Laya.timer.currTimer-(leftTime-1000);\r\n\t\t\t\t\tthis.turntableSecond--;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__proto.startFrame=function(){\r\n\t\t\tLaya.timer.frameLoop(1,this,this.frame);\r\n\t\t}\r\n\r\n\t\t__proto.stopOptTime=function(){\r\n\t\t\tthis.observer.onStopTimeupAlarm();\r\n\t\t\tif (this.currentTurntable){\r\n\t\t\t\tthis.currentTurntable.visible=false;\r\n\t\t\t}\r\n\t\t\tthis.updateTurntableTime(0);\r\n\t\t\tthis.turntableSecond=-1;\r\n\t\t}\r\n\r\n\t\t__proto.syncOptTime=function(index,leftTime){\r\n\t\t\tvar _$this=this;\r\n\t\t\tthis.observer.onStopTimeupAlarm();\r\n\t\t\tthis.startTime(Math.ceil(leftTime / 1000));\r\n\t\t\tthis.turntableIndex=index;\r\n\t\t\tfor (var i=0;i < 4;i++){\r\n\t\t\t\tthis[\"turntable\"+i].visible=false;\r\n\t\t\t}\r\n\t\t\tif (this.currentTurntable){\r\n\t\t\t\tTween.clearAll(this.currentTurntable)\r\n\t\t\t}\r\n\t\t\tthis.currentTurntable=this[\"turntable\"+index];\r\n\t\t\tthis.currentTurntable.visible=true;\r\n\t\t\tthis.currentTurntable.alpha=1.0;\r\n\t\t\tto0();\r\n\t\t\tfunction to0 (){\r\n\t\t\t\tTween.to(_$this.currentTurntable,{\r\n\t\t\t\t\talpha:0.5\r\n\t\t\t\t},500,null,Handler.create(_$this,to1));\r\n\t\t\t}\r\n\t\t\tfunction to1 (){\r\n\t\t\t\tTween.to(_$this.currentTurntable,{\r\n\t\t\t\t\talpha:1\r\n\t\t\t\t},500,null,Handler.create(_$this,to0));\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__proto.chapterFaPai=function(){\r\n\t\t\tthis.chapterMsg=this.chapterMsg;\r\n\t\t\tif (this.faPaiIndex==0){\r\n\t\t\t\tthis.faPaiStart=Laya.timer.currTimer;\r\n\t\t\t\tthis.initChapter();\r\n\t\t\t\tthis.turntable.visible=false;\r\n\t\t\t}\r\n\t\t\tif ((Laya.timer.currTimer-this.faPaiStart)>=this.faPaiIndex *500){\r\n\t\t\t\tvar gameManager=GameManager.instance;\r\n\t\t\t\tthis.chapterFaPaiItem(gameManager.transformToDesignIndex(3),this.chapterMsg.userPlace[3]);\r\n\t\t\t\tthis.chapterFaPaiItem(gameManager.transformToDesignIndex(2),this.chapterMsg.userPlace[2]);\r\n\t\t\t\tthis.chapterFaPaiItem(gameManager.transformToDesignIndex(1),this.chapterMsg.userPlace[1]);\r\n\t\t\t\tthis.chapterFaPaiItem(gameManager.transformToDesignIndex(0),this.chapterMsg.userPlace[0]);\r\n\t\t\t\tif (this.faPaiIndex > 4){\r\n\t\t\t\t\tthis.updateChapter(this.chapterMsg);\r\n\t\t\t\t\tthis.startFaPai=false;\r\n\t\t\t\t\tthis.observer.onEnter();\r\n\t\t\t\t}\r\n\t\t\t\telse{\r\n\t\t\t\t\tthis.observer.onDealCard();\r\n\t\t\t\t}\r\n\t\t\t\tthis.faPaiIndex++;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__proto.chapterFaPaiItem=function(index,userPlace){\r\n\t\t\tvar isHorizontal=index % 2==1;\r\n\t\t\tvar startIndex=this.faPaiIndex *4;\r\n\t\t\tvar shouPai=userPlace.shouPai;\r\n\t\t\tvar shouPaiLen=userPlace.shouPaiLen;\r\n\t\t\tif (shouPai){\r\n\t\t\t\tif (shouPai.length > startIndex){\r\n\t\t\t\t\tvar pais=shouPai.slice(startIndex,Math.min((this.faPaiIndex+1)*4,shouPai.length));\r\n\t\t\t\t\tthis.showShouPaiGroup(index,pais,this[\"shou\"+index],isHorizontal);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse if (shouPaiLen){\r\n\t\t\t\tif (shouPaiLen > startIndex){\r\n\t\t\t\t\tvar array=[];\r\n\t\t\t\t\tarray.length=Math.min(shouPaiLen-startIndex,4);\r\n\t\t\t\t\tthis.showShouPaiGroup(index,array,this[\"shou\"+index],isHorizontal);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*更新牌桌信息\r\n\t\t*@param chapterMsg\r\n\t\t*/\r\n\t\t__proto.updateChapter=function(chapterMsg){\r\n\t\t\tthis.chapterMsg=chapterMsg;\r\n\t\t\tthis.initChapter();\r\n\t\t\tvar gameManager=GameManager.instance;\r\n\t\t\tthis.showPai(gameManager.transformToDesignIndex(3),chapterMsg.userPlace[3]);\r\n\t\t\tthis.showPai(gameManager.transformToDesignIndex(2),chapterMsg.userPlace[2]);\r\n\t\t\tthis.showPai(gameManager.transformToDesignIndex(1),chapterMsg.userPlace[1]);\r\n\t\t\tthis.showPai(gameManager.transformToDesignIndex(0),chapterMsg.userPlace[0]);\r\n\t\t\tthis.updateLeftGameNums((chapterMsg.chapterNumsMax-chapterMsg.chapterNums));\r\n\t\t}\r\n\r\n\t\t__proto.initZhuang=function(chapterMsg){\r\n\t\t\tvar gameManager=GameManager.instance;\r\n\t\t\tvar zhuangIndex=gameManager.transformToDesignIndex(chapterMsg.zhuangIndex);\r\n\t\t\tfor (var i=0;i < 4;i++){\r\n\t\t\t\tthis[\"zhuang\"+zhuangIndex].visible=zhuangIndex==i;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__proto.initChapter=function(){\r\n\t\t\tif (this.shaziAni){\r\n\t\t\t\tthis.shaziAni.removeSelf();\r\n\t\t\t\tthis.shaziAni.destroy();\r\n\t\t\t\tthis.shaziAni=null;\r\n\t\t\t}\r\n\t\t\tthis.clearPai(3);\r\n\t\t\tthis.clearPai(2);\r\n\t\t\tthis.clearPai(1);\r\n\t\t\tthis.clearPai(0);\r\n\t\t\tthis.waitSprite.visible=false;\r\n\t\t\tthis.turntable.visible=true;\r\n\t\t\tthis.gameSprite.visible=true;\r\n\t\t\tthis.paiSpace=[0,0,0,0];\r\n\t\t\tthis.updateTurntable();\r\n\t\t\tvar hw=this.turntableCenter.width / 2;\r\n\t\t\tvar hh=this.turntableCenter.height / 2;\r\n\t\t\tthis.turntableCenter.pivot(hw,hh);\r\n\t\t\tthis.turntableCenter.pos(hw,hh);\r\n\t\t\tvar gameManager=GameManager.instance;\r\n\t\t\tvar dongIndex=gameManager.transformToDesignIndex(0);\r\n\t\t\tvar myIndex=gameManager.transformToDesignIndex(gameManager.myLocationIndex);\r\n\t\t\tthis.turntableCenter.rotation=-90 *(myIndex-dongIndex);\r\n\t\t}\r\n\r\n\t\t// turntableCenter.r\r\n\t\t__proto.updateTurntable=function(){\r\n\t\t\tthis.freePayLength.text=this.chapterMsg.freeLength.toString();\r\n\t\t\tthis.juName.text=GameTableScene.indexName[this.chapterMsg.quanIndex]+\"风\"+GameTableScene.indexName[this.chapterMsg.zhuangIndex]+\"局\";\r\n\t\t\tif (this.chapterMsg.bianType==\"danGui\"){\r\n\t\t\t\tthis.bianType.text=\"单鬼变：\"+PaiUtils.toString(this.chapterMsg.huiEr[0]);\r\n\t\t\t\tthis.sbSourceBian0.visible=true;\r\n\t\t\t\tthis.showPaiIcon((this.sbSourceBian0.getChildAt(0)),this.chapterMsg.huiEr[0]);\r\n\t\t\t}\r\n\t\t\telse if (this.chapterMsg.bianType==\"shuangGui\"){\r\n\t\t\t\tthis.bianType.text=\"双鬼变：\"+PaiUtils.toString(this.chapterMsg.huiEr[0])+\" \"+PaiUtils.toString(this.chapterMsg.huiEr[1]);\r\n\t\t\t\tthis.sbSourceBian0.visible=true;\r\n\t\t\t\tthis.sbSourceBian1.visible=true;\r\n\t\t\t\tthis.showPaiIcon((this.sbSourceBian0.getChildAt(0)),this.chapterMsg.huiEr[0]);\r\n\t\t\t\tthis.showPaiIcon((this.sbSourceBian1.getChildAt(0)),this.chapterMsg.huiEr[1]);\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tthis.bianType.text=\"\";\r\n\t\t\t\tthis.sbSourceBian0.visible=false;\r\n\t\t\t\tthis.sbSourceBian1.visible=false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__proto.showPai=function(index,userPlace,isShowEndResult){\r\n\t\t\t(isShowEndResult===void 0)&& (isShowEndResult=false);\r\n\t\t\tvar isHorizontal=index % 2==1;\r\n\t\t\tif (userPlace.anGang){\r\n\t\t\t\tthis.showAnGang(index,userPlace.anGang,isHorizontal);\r\n\t\t\t}\r\n\t\t\tif (userPlace.daMingGang){\r\n\t\t\t\tthis.showMingGangOrPeng(index,userPlace.daMingGang,this[\"mingGang\"+index],isHorizontal);\r\n\t\t\t}\r\n\t\t\tif (userPlace.xiaoMingGang){\r\n\t\t\t\tthis.showMingGangOrPeng(index,userPlace.xiaoMingGang,this[\"mingGang\"+index],isHorizontal);\r\n\t\t\t}\r\n\t\t\tif (userPlace.peng){\r\n\t\t\t\tthis.showMingGangOrPeng(index,userPlace.peng,this[\"chi\"+index],isHorizontal);\r\n\t\t\t}\r\n\t\t\tif (userPlace.chi){\r\n\t\t\t\tthis.showChi(index,userPlace.chi,this[\"chi\"+index],isHorizontal);\r\n\t\t\t}\r\n\t\t\tif (this[\"shouPai\"+index].numChildren > 0){\r\n\t\t\t\tthis.paiSpace[index]+=16;\r\n\t\t\t}\r\n\t\t\tif (isShowEndResult){\r\n\t\t\t\tvar chi=this[\"chi\"+index];\r\n\t\t\t\tvar source=(LayaUtils.clone(chi));\r\n\t\t\t\tsource.removeChildAt(1);\r\n\t\t\t\tsource.removeChildAt(1);\r\n\t\t\t\tsource.width=(source.getChildAt(0)).width;\r\n\t\t\t\tsource.height=(source.getChildAt(0)).height;\r\n\t\t\t\tfor (var j=0;j < userPlace.shouPai.length;j++){\r\n\t\t\t\t\tthis.showPaiGroup(\r\n\t\t\t\t\tindex,userPlace.shouPai[j],source,isHorizontal,\r\n\t\t\t\t\tisHorizontal ? 1 :-30);\r\n\t\t\t\t}\r\n\t\t\t\tsource.destroy(true);\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tthis.showShouPai(userPlace,index,isHorizontal);\r\n\t\t\t}\r\n\t\t\tif (userPlace.outPai){\r\n\t\t\t\tfor (var i=0;i < userPlace.outPai.length;i++){\r\n\t\t\t\t\tvar pai=userPlace.outPai[i];\r\n\t\t\t\t\tthis.showOut(index,pai,isHorizontal,i);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__proto.showShouPai=function(userPlace,index,isHorizontal){\r\n\t\t\tvar len=0;\r\n\t\t\tvar isFaPai=false;\r\n\t\t\tif (userPlace.shouPai){\r\n\t\t\t\tlen=userPlace.shouPai.length;\r\n\t\t\t\tisFaPai=GameTableScene.checkIsFaPai(len);\r\n\t\t\t\tvar shouPai=isFaPai ? userPlace.shouPai.slice(0,len-1):userPlace.shouPai.slice();\r\n\t\t\t\tshouPai.sort(function(a,b){\r\n\t\t\t\t\treturn a-b;\r\n\t\t\t\t});\r\n\t\t\t\tthis.showShouPaiGroup(index,shouPai,this[\"shou\"+index],isHorizontal);\r\n\t\t\t\tif (isFaPai){\r\n\t\t\t\t\tvar fa=userPlace.shouPai[len-1];\r\n\t\t\t\t\tthis.paiSpace[index]+=(isHorizontal ? 26 :106);\r\n\t\t\t\t\tvar sprite=this.showPaiGroup(index,fa,this[\"fa\"+index],isHorizontal,isHorizontal ? 4 :0);\r\n\t\t\t\t\tthis.initPaiButton(sprite,fa);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse if (userPlace.shouPaiLen){\r\n\t\t\t\tlen=userPlace.shouPaiLen;\r\n\t\t\t\tisFaPai=GameTableScene.checkIsFaPai(len);\r\n\t\t\t\tvar array=[];\r\n\t\t\t\tarray.length=isFaPai ? len-1 :len;\r\n\t\t\t\tthis.showShouPaiGroup(index,array,this[\"shou\"+index],isHorizontal);\r\n\t\t\t\tthis.paiSpace[index]+=(isHorizontal ? 26 :106);\r\n\t\t\t\tif (isFaPai){\r\n\t\t\t\t\tthis.showPaiGroup(index,PaiUtils.HAS_PAI_INDEX,this[\"fa\"+index],isHorizontal,isHorizontal ? 4 :0);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__proto.showShouPaiGroup=function(index,pais,source,isHorizontal){\r\n\t\t\tfor (var i=0;i < pais.length;i++){\r\n\t\t\t\tvar paiSprite=this.showPaiGroup(index,pais[i],source,isHorizontal,isHorizontal ? 1 :-80);\r\n\t\t\t\tif (index===3){\r\n\t\t\t\t\tthis.initPaiButton(paiSprite,pais[i]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__proto.initPaiButton=function(paiSprite,pai){\r\n\t\t\tvar _$this=this;\r\n\t\t\tvar changeHeight=(this.shouPaiHeight / 2);\r\n\t\t\tvar time=0;\r\n\t\t\tinitDragArea();\r\n\t\t\tvar sourceX=paiSprite.x;\r\n\t\t\tvar sourceY=paiSprite.y;\r\n\t\t\tvar isDrag=false;\r\n\t\t\tvar _lastX=NaN,_lastY=NaN,_yChange=0;\r\n\t\t\tpaiSprite.on(\"mousedown\",this,function(e){\r\n\t\t\t\tstartDrag();\r\n\t\t\t});\r\n\t\t\tpaiSprite.on(\"mouseover\",this,function(e){\r\n\t\t\t});\r\n\t\t\tpaiSprite.on(\"dragmove\",this,function(e){\r\n\t\t\t\tconsole.log(\"paiSprite.MOUSE_OVER\");\r\n\t\t\t});\r\n\t\t\tpaiSprite.on(\"mouseout\",this,function(e){\r\n\t\t\t\tconsole.log(\"paiSprite.MOUSE_OUT\");\r\n\t\t\t\tstopDrag();\r\n\t\t\t});\r\n\t\t\tpaiSprite.on(\"mouseup\",this,function(e){\r\n\t\t\t\tconsole.log(\"paiSprite.MOUSE_UP\");\r\n\t\t\t\tstopDrag();\r\n\t\t\t\tclick(e);\r\n\t\t\t\tif (_$this.prevPaiSprite && _$this.prevPaiSprite==paiSprite && (Laya.timer.currTimer-time)> 100){\r\n\t\t\t\t\toutPai();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tpaiSprite.on(\"mousemove\",this,function(e){\r\n\t\t\t\tif (isDrag){\r\n\t\t\t\t\tvar point=paiSprite.getMousePoint();\r\n\t\t\t\t\tvar mouseX=point.x;\r\n\t\t\t\t\tvar mouseY=point.y;\r\n\t\t\t\t\tvar offsetX=mouseX-_lastX;\r\n\t\t\t\t\tvar offsetY=mouseY-_lastY;\r\n\t\t\t\t\tif (_$this.prevPaiSprite){\r\n\t\t\t\t\t\t_$this.prevPaiSprite.y=sourceY;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t_$this.prevPaiSprite=null;\r\n\t\t\t\t\tif ((sourceY-(paiSprite.y+_yChange))< changeHeight){\r\n\t\t\t\t\t\tpaiSprite.y+=offsetY;\r\n\t\t\t\t\t\tpaiSprite.x=sourceX;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\tpaiSprite.y+=offsetY;\r\n\t\t\t\t\t\tpaiSprite.x+=offsetX;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t_yChange+=offsetY;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tpaiSprite.on(\"click\",this,function(e){\r\n\t\t\t\tclick(e);\r\n\t\t\t});\r\n\t\t\tpaiSprite.on(\"doubleclick\",this,function(e){\r\n\t\t\t\toutPai();\r\n\t\t\t});\r\n\t\t\tpaiSprite.on(\"mouseover\",this,function(e){\r\n\t\t\t\tconsole.log(\"paiSprite.MOUSE_DOWN\");\r\n\t\t\t});\r\n\t\t\tfunction startDrag (){\r\n\t\t\t\tisDrag=true;\r\n\t\t\t\t_lastX=paiSprite.mouseX;\r\n\t\t\t\t_lastY=paiSprite.mouseY;\r\n\t\t\t\t_yChange=0;\r\n\t\t\t}\r\n\t\t\tfunction stopDrag (){\r\n\t\t\t\tisDrag=false;\r\n\t\t\t\tconsole.log(paiSprite.y-sourceY,_$this.shouPaiHeight);\r\n\t\t\t\tif ((sourceY-paiSprite.y)> _$this.shouPaiHeight){\r\n\t\t\t\t\toutPai();\r\n\t\t\t\t}\r\n\t\t\t\tpaiSprite.x=sourceX;\r\n\t\t\t\tpaiSprite.y=sourceY;\r\n\t\t\t}\r\n\t\t\tfunction click (e){\r\n\t\t\t\tif (_$this.prevPaiSprite !=paiSprite){\r\n\t\t\t\t\tif (paiSprite.y < 0){\r\n\t\t\t\t\t\tpaiSprite.y=0;\r\n\t\t\t\t\t\t_$this.prevPaiSprite=null;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\tpaiSprite.height=_$this.shouPaiHeight+changeHeight;\r\n\t\t\t\t\t\tpaiSprite.y=-changeHeight;\r\n\t\t\t\t\t\tinitDragArea();\r\n\t\t\t\t\t\t_$this.observer.onPaiClick(pai);\r\n\t\t\t\t\t\tif (_$this.prevPaiSprite && _$this.prevPaiSprite !=paiSprite){\r\n\t\t\t\t\t\t\t_$this.prevPaiSprite.y=sourceY;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t_$this.prevPaiSprite=paiSprite;\r\n\t\t\t\t\t\ttime=Laya.timer.currTimer;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tfunction outPai (){\r\n\t\t\t\t_$this.prevPaiSprite=null;\r\n\t\t\t\tConsole.log(\"outPai\");\r\n\t\t\t\tGameManager.instance.putPai(pai)\r\n\t\t\t}\r\n\t\t\tfunction initDragArea (){\r\n\t\t\t\tpaiSprite.hitArea=new Rectangle(0,0,paiSprite.width,paiSprite.height);\r\n\t\t\t\tpaiSprite[\"_$dragArea\"]=new Rectangle(0,0,paiSprite.width,_$this.shouPaiHeight);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__proto.showChi=function(index,pais,source,isHorizontal){\r\n\t\t\tfor (var i=0;i < pais.length;i+=3){\r\n\t\t\t\tthis.showPaiGroup(index,[pais[i],pais[i+1],pais[i+2]],source,isHorizontal,isHorizontal ? 4 :0);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__proto.showMingGangOrPeng=function(index,pais,source,isHorizontal){\r\n\t\t\tfor (var i=0;i < pais.length;i++){\r\n\t\t\t\tthis.showPaiGroup(index,pais[i],source,isHorizontal,isHorizontal ? 4 :0);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__proto.showAnGang=function(index,pais,isHorizontal){\r\n\t\t\tfor (var i=0;i < pais.length;i++){\r\n\t\t\t\tvar pai=pais[i];\r\n\t\t\t\tif (pai==PaiUtils.HAS_PAI_INDEX){\r\n\t\t\t\t\tthis.showPaiGroup(index,pai,this[\"anGangHide\"+index],isHorizontal,isHorizontal ? 4 :0);\r\n\t\t\t\t}\r\n\t\t\t\telse{\r\n\t\t\t\t\tthis.showPaiGroup(index,pai,this[\"anGang\"+index],isHorizontal,isHorizontal ? 4 :0);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__proto.showOut=function(index,pai,isHorizontal,outIndex){\r\n\t\t\tvar childSprite=(this[\"out\"+index].getChildAt(outIndex > 11 ? 0 :1));\r\n\t\t\tvar outPai=this[\"outPai\"+index];\r\n\t\t\tvar dist=(LayaUtils.clone(outPai));\r\n\t\t\toutIndex=outIndex % 12;\r\n\t\t\tif (isHorizontal){\r\n\t\t\t\tdist.x=outIndex *(outPai.width+2);\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tdist.y=outIndex *(outPai.height-35);\r\n\t\t\t};\r\n\t\t\tvar icon=(dist.getChildAt(0));\r\n\t\t\tthis.showPaiIcon(icon,pai);\r\n\t\t\tchildSprite.addChild(dist);\r\n\t\t}\r\n\r\n\t\t__proto.showPaiGroup=function(index,pai,source,isHorizontal,space){\r\n\t\t\tvar dist=(LayaUtils.clone(source));\r\n\t\t\tif (isHorizontal){\r\n\t\t\t\tdist.x=this.paiSpace[index];\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tdist.y=this.paiSpace[index];\r\n\t\t\t}\r\n\t\t\tthis[\"shouPai\"+index].addChild(dist);\r\n\t\t\tif (isHorizontal){\r\n\t\t\t\tthis.paiSpace[index]+=(space+source.width);\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tthis.paiSpace[index]+=(space+source.height);\r\n\t\t\t}\r\n\t\t\tfor (var i=0,j=0;i < dist.numChildren;i++){\r\n\t\t\t\tvar childAt=dist.getChildAt(i);\r\n\t\t\t\tif ((childAt instanceof laya.ui.Image )){\r\n\t\t\t\t\tvar paiImage=(childAt.getChildAt(0));\r\n\t\t\t\t\tif (paiImage){\r\n\t\t\t\t\t\tif ((pai instanceof Array)){\r\n\t\t\t\t\t\t\tthis.showPaiIcon(paiImage,pai[j]);\r\n\t\t\t\t\t\t\tj++;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\tif (pai > PaiUtils.NOT_PAI_INDEX){\r\n\t\t\t\t\t\t\t\tthis.showPaiIcon(paiImage,pai);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn dist;\r\n\t\t}\r\n\r\n\t\t__proto.showPaiIcon=function(paiImage,pai){\r\n\t\t\tPaiUtils.showPaiIcon(paiImage,pai);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t*清除牌\r\n\t\t*/\r\n\t\t__proto.clearPai=function(index,isClearOut){\r\n\t\t\t(isClearOut===void 0)&& (isClearOut=true);\r\n\t\t\tvar i=0;\r\n\t\t\tvar shouPai=this[\"shouPai\"+index];\r\n\t\t\twhile (shouPai.numChildren > 0){\r\n\t\t\t\tshouPai.getChildAt(0).removeSelf().destroy(true);\r\n\t\t\t}\r\n\t\t\tif (!isClearOut){\r\n\t\t\t\treturn;\r\n\t\t\t};\r\n\t\t\tvar outSprite=this[\"out\"+index];\r\n\t\t\tfor (i=0;i < outSprite.numChildren;i++){\r\n\t\t\t\tvar child=(outSprite.getChildAt(i));\r\n\t\t\t\twhile (child.numChildren > 0){\r\n\t\t\t\t\tchild.getChildAt(0).removeSelf().destroy(true);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__proto.updateTurntableTime=function(turntableSecond){\r\n\t\t\tvar n0=(turntableSecond % 10).toString();\r\n\t\t\tvar n1=Math.floor(turntableSecond / 10).toString();\r\n\t\t\tthis.turntableNum0.skin=\"ui/game/\"+n0+\".png\";\r\n\t\t\tthis.turntableNum1.skin=\"ui/game/\"+n1+\".png\";\r\n\t\t}\r\n\r\n\t\t__proto.updateEndResult=function(msg,gameRoomInfo){\r\n\t\t\tthis.waitSprite.visible=true;\r\n\t\t\tvar gameManager=GameManager.instance;\r\n\t\t\tthis.updateLeftGameNums(gameRoomInfo.leftChapterNums);\r\n\t\t\tthis.clearPai(3,false);\r\n\t\t\tthis.clearPai(2,false);\r\n\t\t\tthis.clearPai(1,false);\r\n\t\t\tthis.clearPai(0,false);\r\n\t\t\tthis.paiSpace=[0,0,0,0];\r\n\t\t\tthis.showPai(gameManager.transformToDesignIndex(3),PaiUtils.toUserPlace(msg.fanResults[3]),true);\r\n\t\t\tthis.showPai(gameManager.transformToDesignIndex(2),PaiUtils.toUserPlace(msg.fanResults[2]),true);\r\n\t\t\tthis.showPai(gameManager.transformToDesignIndex(1),PaiUtils.toUserPlace(msg.fanResults[1]),true);\r\n\t\t\tthis.showPai(gameManager.transformToDesignIndex(0),PaiUtils.toUserPlace(msg.fanResults[0]),true);\r\n\t\t\tthis.stopOptTime();\r\n\t\t\tfor (var i=3;i >-1;i--){\r\n\t\t\t\tvar fanResult=msg.fanResults[i];\r\n\t\t\t\tvar designIndex=gameManager.transformToDesignIndex(i);\r\n\t\t\t\tvar sceneUser=gameRoomInfo.sceneUser[i];\r\n\t\t\t\tif (sceneUser){\r\n\t\t\t\t\tsceneUser.score+=fanResult.score;\r\n\t\t\t\t\tthis.updateUserInfoScore(designIndex,sceneUser.score);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__proto.init=function(){\r\n\t\t\tthis.startFrame();\r\n\t\t}\r\n\r\n\t\t__proto.binaGuiMoveMovie=function(){\r\n\t\t\tif (this.chapterMsg.bianType==\"danGui\"){\r\n\t\t\t\tthis.goBinaGuiMoveMovie(\"danGui\");\r\n\t\t\t}\r\n\t\t\telse if (this.chapterMsg.bianType==\"shuangGui\"){\r\n\t\t\t\tthis.goBinaGuiMoveMovie(\"shuangGui\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__proto.goBinaGuiMoveMovie=function(type){\r\n\t\t\tvar _$this=this;\r\n\t\t\tLaya.timer.once(1000,this,function(){\r\n\t\t\t\tvar bWidth=Browser.width;\r\n\t\t\t\tvar bHeight=Browser.height;\r\n\t\t\t\tvar ratio=UiHelps.getGameRatio();\r\n\t\t\t\tvar bgWidth=bWidth / ratio;\r\n\t\t\t\tvar bgHeight=bHeight / ratio;\r\n\t\t\t\t_$this.bianMove.visible=true;\r\n\t\t\t\t_$this.guiOptMovie(3,type+\"QueDing\",close);\r\n\t\t\t\t_$this.bianMove.pivot(_$this.bianMove.width / 2,_$this.bianMove.height / 2);\r\n\t\t\t\t_$this.bianMove.pos(bgWidth / 2,bgHeight / 2-_$this.bianMove.height *0.5);\r\n\t\t\t\t_$this.showPaiIcon((_$this.sourcePai.getChildAt(0)),_$this.chapterMsg.bianSource);\r\n\t\t\t\t_$this.showPaiIcon((_$this.sourceBian0.getChildAt(0)),_$this.chapterMsg.huiEr[0]);\r\n\t\t\t\tif (\"shuangGui\"==type){\r\n\t\t\t\t\t_$this.sourceBian1.visible=true;\r\n\t\t\t\t\t_$this.showPaiIcon((_$this.sourceBian1.getChildAt(0)),_$this.chapterMsg.huiEr[1]);\r\n\t\t\t\t}\r\n\t\t\t\telse{\r\n\t\t\t\t\t_$this.sourceBian1.visible=false;\r\n\t\t\t\t}\r\n\t\t\t\tfunction close (){\r\n\t\t\t\t\t_$this.bianMove.visible=false;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t__proto.guiOptMovie=function(designIndex,opt,encCallback){\r\n\t\t\tvar _$this=this;\r\n\t\t\tvar outPaiMovie=this[\"outPaiMovie\"+designIndex];\r\n\t\t\tvar targetX=this[\"nOutPaiMovie\"+designIndex+\"X\"];\r\n\t\t\tvar targetY=this[\"nOutPaiMovie\"+designIndex+\"Y\"];\r\n\t\t\tvar skin=\"ui/game/\"+opt+\".png\";\r\n\t\t\tvar image=new Image();\r\n\t\t\timage.skin=skin;\r\n\t\t\timage.pivot(image.width / 2,image.height / 2);\r\n\t\t\timage.x=targetX+outPaiMovie.width / 2;\r\n\t\t\timage.y=targetY+outPaiMovie.height / 2;\r\n\t\t\tvar centerImage=new Image();\r\n\t\t\tcenterImage.skin=skin;\r\n\t\t\tcenterImage.pivot(image.pivotX,image.pivotY);\r\n\t\t\tcenterImage.x=image.x;\r\n\t\t\tcenterImage.y=image.y;\r\n\t\t\tcenterImage.filters=[GameTableScene.glowFilter];\r\n\t\t\timage.filters=[GameTableScene.glowFilter];\r\n\t\t\tthis.movieSprite.addChildAt(centerImage,0);\r\n\t\t\timage.alpha=0.8;\r\n\t\t\tTween.to(centerImage,{\r\n\t\t\t\tscaleX:1.5,\r\n\t\t\t\tscaleY:1.5\r\n\t\t\t\t},1000,null,Handler.create(this,function(){\r\n\t\t\t\tTween.to(centerImage,{\r\n\t\t\t\t\tscaleX:1,\r\n\t\t\t\t\tscaleY:1\r\n\t\t\t\t\t},1000,null,Handler.create(this,function(){\r\n\t\t\t\t\tLaya.timer.once(3000,this,function(){\r\n\t\t\t\t\t\timage.skin=null;\r\n\t\t\t\t\t\timage.removeSelf();\r\n\t\t\t\t\t\timage.dispose();\r\n\t\t\t\t\t\tcenterImage.skin=null;\r\n\t\t\t\t\t\tcenterImage.removeSelf();\r\n\t\t\t\t\t\tcenterImage.dispose();\r\n\t\t\t\t\t\t_$this._targetPoll.remove(centerImage);\r\n\t\t\t\t\t\tif (encCallback){\r\n\t\t\t\t\t\t\tencCallback();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t}))\r\n\t\t\t}));\r\n\t\t\treturn centerImage;\r\n\t\t}\r\n\r\n\t\t__proto.optMovie=function(designIndex,opt,encCallback){\r\n\t\t\tvar _$this=this;\r\n\t\t\tvar outPaiMovie=this[\"outPaiMovie\"+designIndex];\r\n\t\t\tvar targetX=this[\"nOutPaiMovie\"+designIndex+\"X\"];\r\n\t\t\tvar targetY=this[\"nOutPaiMovie\"+designIndex+\"Y\"];\r\n\t\t\tvar skin=\"ui/game/\"+opt+\".png\";\r\n\t\t\tvar image=new Image();\r\n\t\t\timage.skin=skin;\r\n\t\t\timage.pivot(image.width / 2,image.height / 2);\r\n\t\t\timage.x=targetX+outPaiMovie.width / 2;\r\n\t\t\timage.y=targetY+outPaiMovie.height / 2;\r\n\t\t\tvar centerImage=new Image();\r\n\t\t\tcenterImage.skin=skin;\r\n\t\t\tcenterImage.pivot(image.pivotX,image.pivotY);\r\n\t\t\tcenterImage.x=image.x;\r\n\t\t\tcenterImage.y=image.y;\r\n\t\t\tcenterImage.filters=[GameTableScene.glowFilter];\r\n\t\t\timage.filters=[GameTableScene.glowFilter];\r\n\t\t\tthis.movieSprite.addChild(image);\r\n\t\t\tthis.movieSprite.addChild(centerImage);\r\n\t\t\timage.alpha=0.8;\r\n\t\t\tthis._targetPoll.add(image);\r\n\t\t\tTween.to(image,{\r\n\t\t\t\tscaleX:3,\r\n\t\t\t\tscaleY:3,\r\n\t\t\t\talpha:0.4\r\n\t\t\t\t},1000,null,Handler.create(this,function(){\r\n\t\t\t\tTween.to(image,{\r\n\t\t\t\t\talpha:0\r\n\t\t\t\t\t},500,null,Handler.create(this,function(){\r\n\t\t\t\t\t_$this._targetPoll.remove(image);\r\n\t\t\t\t}))\r\n\t\t\t}));\r\n\t\t\tTween.to(centerImage,{\r\n\t\t\t\tscaleX:1.5,\r\n\t\t\t\tscaleY:1.5\r\n\t\t\t\t},1000,null,Handler.create(this,function(){\r\n\t\t\t\tTween.to(centerImage,{\r\n\t\t\t\t\tscaleX:1,\r\n\t\t\t\t\tscaleY:1\r\n\t\t\t\t\t},500,null,Handler.create(this,function(){\r\n\t\t\t\t\tLaya.timer.once(500,this,function(){\r\n\t\t\t\t\t\timage.skin=null;\r\n\t\t\t\t\t\timage.removeSelf();\r\n\t\t\t\t\t\timage.dispose();\r\n\t\t\t\t\t\tcenterImage.skin=null;\r\n\t\t\t\t\t\tcenterImage.removeSelf();\r\n\t\t\t\t\t\tcenterImage.dispose();\r\n\t\t\t\t\t\t_$this._targetPoll.remove(centerImage);\r\n\t\t\t\t\t\tif (encCallback){\r\n\t\t\t\t\t\t\tencCallback();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t}))\r\n\t\t\t}));\r\n\t\t\treturn centerImage;\r\n\t\t}\r\n\r\n\t\t__proto.outMovie=function(designIndex,pai){\r\n\t\t\tvar shouPai=this[\"shouPai\"+designIndex];\r\n\t\t\tvar outPaiMovie=this[\"outPaiMovie\"+designIndex];\r\n\t\t\tif (this.outPaiMoviePrev !=null){\r\n\t\t\t\tthis.outPaiMoviePrev.visible=false;\r\n\t\t\t}\r\n\t\t\tthis.outPaiMoviePrev=outPaiMovie;\r\n\t\t\tvar fa=shouPai.getChildAt(shouPai.numChildren-1);\r\n\t\t\tif (!fa){\r\n\t\t\t\tConsole.log(\"错误？：{0}\",fa);\r\n\t\t\t\treturn;\r\n\t\t\t};\r\n\t\t\tvar targetX=this[\"nOutPaiMovie\"+designIndex+\"X\"];\r\n\t\t\tvar targetY=this[\"nOutPaiMovie\"+designIndex+\"Y\"];\r\n\t\t\toutPaiMovie.visible=true;\r\n\t\t\tthis.startPoint.setTo(0,0);\r\n\t\t\tthis.startRB.setTo(fa.width,fa.height);\r\n\t\t\tfa.localToGlobal(this.startPoint);\r\n\t\t\tfa.localToGlobal(this.startRB);\r\n\t\t\tthis.movieSprite.globalToLocal(this.startPoint);\r\n\t\t\tthis.movieSprite.globalToLocal(this.startRB);\r\n\t\t\tthis.startRB.setTo(this.startRB.x-this.startPoint.x,this.startRB.y-this.startPoint.y);\r\n\t\t\tvar scale=Math.abs(this.startRB.x / outPaiMovie.width);\r\n\t\t\toutPaiMovie.scale(scale,scale);\r\n\t\t\toutPaiMovie.pos(this.startPoint.x,this.startPoint.y);\r\n\t\t\tthis.showPaiIcon(outPaiMovie.getChildAt(0).getChildAt(0),pai);\r\n\t\t\tTween.to(outPaiMovie,{\r\n\t\t\t\tx:targetX,\r\n\t\t\t\ty:targetY,\r\n\t\t\t\tscaleX:this.nOutPaiMovieRatio,\r\n\t\t\t\tscaleY:this.nOutPaiMovieRatio\r\n\t\t\t\t},0,null,Handler.create(this,function(){\r\n\t\t\t}));\r\n\t\t}\r\n\r\n\t\t// })\r\n\t\t__proto.hideOutMovie=function(){\r\n\t\t\tif (this.outPaiMoviePrev){\r\n\t\t\t\tvar close=this.outPaiMoviePrev;\r\n\t\t\t\tthis.outPaiMoviePrev=null;\r\n\t\t\t\tLaya.timer.once(1000,this,function(){\r\n\t\t\t\t\tclose.visible=false;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tGameTableScene.onDelRoomClick=function(e){\r\n\t\t\tif (GameManager.instance.isStart()){\r\n\t\t\t\tUserManager.instance.delVoteRoom();\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tUserManager.instance.delRoom();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tGameTableScene.voteDelRoomClick=function(){\r\n\t\t\tUserManager.instance.delVoteRoom();\r\n\t\t}\r\n\r\n\t\tGameTableScene.onQuitRoomClick=function(){\r\n\t\t\tUserManager.instance.quitRoom();\r\n\t\t}\r\n\r\n\t\tGameTableScene.checkIsFaPai=function(len){\r\n\t\t\treturn (len-2)% 3==0;\r\n\t\t}\r\n\r\n\t\t__static(GameTableScene,\r\n\t\t['indexName',function(){return this.indexName=[\"东\",\"南\",\"西\",\"北\"];},'glowFilter',function(){return this.glowFilter=new GlowFilter(\"#F0C048\",12,0,0);}\r\n\t\t]);\r\n\t\treturn GameTableScene;\r\n\t})(GameTableView)\r\n\r\n\r\n\t//class view.DialogView extends ui.test.DialogUI\r\n\tvar DialogView=(function(_super){\r\n\t\tfunction DialogView(size,w,h,content,title,closeHandler,confirmHandler,confirmText,cancelHandler,cancelText){\r\n\t\t\tthis.myWidth=NaN;\r\n\t\t\tthis.myHeight=NaN;\r\n\t\t\tthis.designWidth=NaN;\r\n\t\t\tthis.designHeight=NaN;\r\n\t\t\tthis.inWidth=NaN;\r\n\t\t\tthis.inHeight=NaN;\r\n\t\t\tthis.nTitlePadding=NaN;\r\n\t\t\tthis.nCloseLeft=NaN;\r\n\t\t\tthis.nContentWidth=NaN;\r\n\t\t\tthis.nContentHeight=NaN;\r\n\t\t\tthis.nContentWidthDiff=NaN;\r\n\t\t\tthis.nContentHeightDiff=NaN;\r\n\t\t\tthis.nContentTextHeight=NaN;\r\n\t\t\tthis.nContentTextWidth=NaN;\r\n\t\t\tthis.nConfirmBtnTop=NaN;\r\n\t\t\tthis.nConfirmBtnLeft=NaN;\r\n\t\t\tthis.nCancelBtnTop=NaN;\r\n\t\t\tthis.nCancelBtnLeft=NaN;\r\n\t\t\tthis.nIcon2Left=NaN;\r\n\t\t\tthis.dialogSize=null;\r\n\t\t\tthis.content=null;\r\n\t\t\tthis.cancelHandler=null;\r\n\t\t\tthis.confirmHandler=null;\r\n\t\t\tthis.prevX=0;\r\n\t\t\tthis.prevY=0;\r\n\t\t\tDialogView.__super.call(this);\r\n\t\t\tthis.content=content;\r\n\t\t\tthis.dialogSize=size;\r\n\t\t\tthis.title.text=title;\r\n\t\t\tthis.nContentWidth=this.contentSprite.width;\r\n\t\t\tif (cancelText==null && confirmText==null){\r\n\t\t\t\tthis.nContentHeight=this.contentSprite.height+this.buttonSprite.height;\r\n\t\t\t\tthis.buttonSprite.visible=false;\r\n\t\t\t\tthis.buttonSprite.height=0;\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tthis.nContentHeight=this.contentSprite.height;\r\n\t\t\t}\r\n\t\t\tthis.nContentTextHeight=this.contentText.height;\r\n\t\t\tthis.nContentTextWidth=this.contentText.width;\r\n\t\t\tthis.confirmHandler=confirmHandler;\r\n\t\t\tthis.closeHandler=closeHandler;\r\n\t\t\tthis.confirmBtn.label=confirmText;\r\n\t\t\tthis.designWidth=this.width;\r\n\t\t\tthis.designHeight=this.height;\r\n\t\t\tthis.inWidth=w;\r\n\t\t\tthis.inHeight=h;\r\n\t\t\tthis.nTitlePadding=this.title.x;\r\n\t\t\tthis.nCloseLeft=this.closeBtn.x;\r\n\t\t\tthis.nContentWidthDiff=this.designWidth-this.nContentWidth;\r\n\t\t\tthis.nContentHeightDiff=this.designHeight-this.nContentHeight;\r\n\t\t\tthis.nConfirmBtnTop=this.confirmBtn.y;\r\n\t\t\tthis.nConfirmBtnLeft=this.confirmBtn.x;\r\n\t\t\tthis.nCancelBtnTop=this.cancelBtn.y;\r\n\t\t\tthis.nCancelBtnLeft=this.cancelBtn.x;\r\n\t\t\tthis.nIcon2Left=this.icon2.x;\r\n\t\t\tif ((content instanceof laya.display.Sprite )){\r\n\t\t\t\tthis.contentSprite.removeChildren();\r\n\t\t\t\tthis.contentSprite.addChild(content.getDisplayObject());\r\n\t\t\t\t}else{\r\n\t\t\t\tthis.contentText.overflow=Text.SCROLL;\r\n\t\t\t\tthis.contentText.wordWrap=true;\r\n\t\t\t\tthis.contentText.on(\"mousedown\",this,this.startScrollText);\r\n\t\t\t}\r\n\t\t\tthis.confirmBtn.on(\"click\",this,this.onConfirmClick);\r\n\t\t\tif (cancelText==null){\r\n\t\t\t\tthis.cancelBtn.removeSelf();\r\n\t\t\t\tthis.cancelBtn.destroy();\r\n\t\t\t\tthis.cancelBtn=null;\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tthis.cancelBtn.label=cancelText;\r\n\t\t\t\tthis.cancelBtn.on(\"click\",this,this.onCancelClick);\r\n\t\t\t\tthis.cancelHandler=cancelHandler;\r\n\t\t\t}\r\n\t\t\tthis.closeBtn.on(\"click\",this,this.onCloseClick);\r\n\t\t\tLaya.stage.on(\"resize\",this,this.layout);\r\n\t\t\tLaya.stage.on(\"added\",this,this.layout);\r\n\t\t\tthis.layout();\r\n\t\t}\r\n\r\n\t\t__class(DialogView,'view.DialogView',_super);\r\n\t\tvar __proto=DialogView.prototype;\r\n\t\t/*开始滚动文本 */\r\n\t\t__proto.startScrollText=function(e){\r\n\t\t\tthis.prevX=this.contentText.mouseX;\r\n\t\t\tthis.prevY=this.contentText.mouseY;\r\n\t\t\tLaya.stage.on(\"mousemove\",this,this.scrollText);\r\n\t\t\tLaya.stage.on(\"mouseup\",this,this.finishScrollText);\r\n\t\t}\r\n\r\n\t\t/*停止滚动文本 */\r\n\t\t__proto.finishScrollText=function(e){\r\n\t\t\tLaya.stage.off(\"mousemove\",this,this.scrollText);\r\n\t\t\tLaya.stage.off(\"mouseup\",this,this.finishScrollText);\r\n\t\t}\r\n\r\n\t\t/*鼠标滚动文本 */\r\n\t\t__proto.scrollText=function(e){\r\n\t\t\tvar nowX=this.contentText.mouseX;\r\n\t\t\tvar nowY=this.contentText.mouseY;\r\n\t\t\tthis.contentText.scrollX+=this.prevX-nowX;\r\n\t\t\tthis.contentText.scrollY+=this.prevY-nowY;\r\n\t\t\tthis.prevX=nowX;\r\n\t\t\tthis.prevY=nowY;\r\n\t\t}\r\n\r\n\t\t__proto.onCancelClick=function(){\r\n\t\t\tif (this.cancelHandler){\r\n\t\t\t\tthis.cancelHandler.once=false;\r\n\t\t\t\tthis.cancelHandler.run();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__proto.onConfirmClick=function(){\r\n\t\t\tif (this.confirmHandler){\r\n\t\t\t\tthis.confirmHandler.once=false;\r\n\t\t\t\tthis.confirmHandler.run();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__proto.destroy=function(destroyChild){\r\n\t\t\t(destroyChild===void 0)&& (destroyChild=true);\r\n\t\t\tif (this.cancelHandler){\r\n\t\t\t\tthis.cancelHandler.recover();\r\n\t\t\t}\r\n\t\t\tif (this.confirmHandler){\r\n\t\t\t\tthis.confirmHandler.recover();\r\n\t\t\t}\r\n\t\t\tLaya.stage.off(\"resize\",this,this.layout);\r\n\t\t}\r\n\r\n\t\t__proto.onCloseClick=function(){\r\n\t\t\tthis.close();\r\n\t\t}\r\n\r\n\t\t__proto.layout=function(){\r\n\t\t\tvar bWidth=Browser.width;\r\n\t\t\tvar bHeight=Browser.height;\r\n\t\t\tvar ratio=UiHelps.getRatio();\r\n\t\t\tif (this.inWidth==-1 || this.inHeight==-1){\r\n\t\t\t\tswitch (this.dialogSize){\r\n\t\t\t\t\tcase \"LARGE\":{\r\n\t\t\t\t\t\t\tthis.myWidth=bWidth *0.9;\r\n\t\t\t\t\t\t\tthis.myHeight=bHeight *0.9;\r\n\t\t\t\t\t\t\tbreak ;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\tcase \"MEDIUM\":{\r\n\t\t\t\t\t\t\tthis.myWidth=bWidth *0.7;\r\n\t\t\t\t\t\t\tthis.myHeight=bHeight *0.7;\r\n\t\t\t\t\t\t\tbreak ;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\tcase \"SMALL\":{\r\n\t\t\t\t\t\t\tthis.myWidth=bWidth *0.5;\r\n\t\t\t\t\t\t\tthis.myHeight=bHeight *0.5;\r\n\t\t\t\t\t\t\tbreak ;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\tcase \"AUTO\":{\r\n\t\t\t\t\t\t\tif (this.content !=null){\r\n\t\t\t\t\t\t\t\tvar curWidth=bWidth-bHeight *0.15;\r\n\t\t\t\t\t\t\t\tvar curHeight=bHeight-bHeight *0.15;\r\n\t\t\t\t\t\t\t\tthis.content.layout();\r\n\t\t\t\t\t\t\t\tthis.myWidth=(this.content.getContentWidth()+this.nContentWidthDiff)*ratio;\r\n\t\t\t\t\t\t\t\tif (this.myWidth > curWidth){\r\n\t\t\t\t\t\t\t\t\tratio=curWidth / (this.content.getContentWidth()+this.nContentWidthDiff);\r\n\t\t\t\t\t\t\t\t\tthis.myWidth=curWidth;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tthis.myHeight=(this.content.getContentHeight()+this.nContentHeightDiff)*ratio;\r\n\t\t\t\t\t\t\t\tif (this.myHeight > curHeight){\r\n\t\t\t\t\t\t\t\t\tratio=curHeight / (this.content.getContentHeight()+this.nContentHeightDiff);\r\n\t\t\t\t\t\t\t\t\tthis.myWidth=(this.content.getContentWidth()+this.nContentWidthDiff)*ratio;\r\n\t\t\t\t\t\t\t\t\tthis.myHeight=curHeight;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\t\tthrow new Error(\"DialogSize.AUTO  content 不能为空\");\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tbreak ;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\tdefault :{\r\n\t\t\t\t\t\t\tthrow new Error(\"错误的大小!\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tthis.myWidth=this.inWidth;\r\n\t\t\t\tthis.myHeight=this.inHeight;\r\n\t\t\t};\r\n\t\t\tvar bgWidth=this.myWidth / ratio;\r\n\t\t\tvar bgHeight=this.myHeight / ratio;\r\n\t\t\tvar wChange=bgWidth-this.designWidth;\r\n\t\t\tvar hChange=bgHeight-this.designHeight;\r\n\t\t\tthis.x=(bWidth-this.myWidth)/ 2;\r\n\t\t\tthis.y=(bHeight-this.myHeight)/ 2;\r\n\t\t\tthis.bg.size(bgWidth,bgHeight);\r\n\t\t\tthis.title.width=(this.myWidth / ratio-(this.nTitlePadding *2));\r\n\t\t\tthis.closeBtn.x=this.nCloseLeft+wChange;\r\n\t\t\tthis.icon2.x=this.nIcon2Left+wChange;\r\n\t\t\tthis.contentText.size(this.nContentTextWidth+wChange,this.nContentTextHeight+hChange);\r\n\t\t\tif (this.cancelHandler==null){\r\n\t\t\t\tthis.confirmBtn.x=(bgWidth-this.confirmBtn.width)/ 2;\r\n\t\t\t\tthis.confirmBtn.y=this.nConfirmBtnTop+hChange;\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tthis.confirmBtn.y=this.nConfirmBtnTop+hChange;\r\n\t\t\t\tthis.confirmBtn.x=this.nConfirmBtnLeft+wChange;\r\n\t\t\t\tthis.cancelBtn.y=this.nConfirmBtnTop+hChange;\r\n\t\t\t}\r\n\t\t\tthis.mainSprite.scale(ratio,ratio);\r\n\t\t\tthis.dragArea=\"0,0,\"+this.myWidth+\",\"+93 *ratio;\r\n\t\t\tthis.size(this.myWidth,this.myHeight);\r\n\t\t}\r\n\r\n\t\t__proto.setText=function(text){\r\n\t\t\tthis.contentText.text=text;\r\n\t\t}\r\n\r\n\t\treturn DialogView;\r\n\t})(DialogUI)\r\n\r\n\r\n\t/**\r\n\t*@author zuoge85@gmail.com on 16/10/10.\r\n\t*/\r\n\t//class mj.ui.dialog.OptDialog extends ui.test.OptDialogUI\r\n\tvar OptDialog=(function(_super){\r\n\t\tfunction OptDialog(){\r\n\t\t\tthis.optHandler=null;\r\n\t\t\tthis.opts=[];\r\n\t\t\tOptDialog.__super.call(this);\r\n\t\t}\r\n\r\n\t\t__class(OptDialog,'mj.ui.dialog.OptDialog',_super);\r\n\t\tvar __proto=OptDialog.prototype;\r\n\t\t__proto.initCPGH=function(isShowHu,gangValue,pengValue,chiValues,optHandler){\r\n\t\t\tthis.optHandler=optHandler;\r\n\t\t\tthis.initButton(isShowHu,this.hu,\"HU\");\r\n\t\t\tthis.initButton(gangValue !=PaiUtils.NOT_PAI_INDEX,this.gang,\"DA_MING_GANG\",gangValue);\r\n\t\t\tthis.initButton(pengValue !=PaiUtils.NOT_PAI_INDEX,this.peng,\"PENG\",pengValue);\r\n\t\t\tthis.chi.removeSelf();\r\n\t\t\tif (chiValues){\r\n\t\t\t\tfor (var i=0;i < chiValues.length;i+=3){\r\n\t\t\t\t\tvar curButton=LayaUtils.clone(this.chi);\r\n\t\t\t\t\tthis.addChild(curButton);\r\n\t\t\t\t\tthis.initButton(true,curButton,\"CHI\",chiValues.slice(i,i+3));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.initButton(true,this.guo,\"GUO\");\r\n\t\t\tthis.init();\r\n\t\t}\r\n\r\n\t\t__proto.initFaPai=function(isShowHu,anGang,mingGang,optHandler){\r\n\t\t\tthis.optHandler=optHandler;\r\n\t\t\tthis.initButton(isShowHu,this.hu,\"HU\");\r\n\t\t\tthis.gang.removeSelf();\r\n\t\t\tvar i=0;\r\n\t\t\tvar curButton;\r\n\t\t\tif (anGang){\r\n\t\t\t\tfor (i=0;i < anGang.length;i++){\r\n\t\t\t\t\tcurButton=LayaUtils.clone(this.gang);\r\n\t\t\t\t\tthis.addChild(curButton);\r\n\t\t\t\t\tthis.initButton(true,curButton,\"AN_GANG\",anGang[i]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (mingGang){\r\n\t\t\t\tfor (i=0;i < mingGang.length;i++){\r\n\t\t\t\t\tcurButton=LayaUtils.clone(this.gang);\r\n\t\t\t\t\tthis.addChild(curButton);\r\n\t\t\t\t\tthis.initButton(true,curButton,\"XIAO_MING_GANG\",mingGang[i]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.initButton(true,this.guo,\"GUO\");\r\n\t\t\tthis.peng.removeSelf();\r\n\t\t\tthis.chi.removeSelf();\r\n\t\t\tthis.init();\r\n\t\t}\r\n\r\n\t\t__proto.init=function(){\r\n\t\t\tLaya.stage.on(\"resize\",this,this.layout);\r\n\t\t\tLaya.stage.on(\"added\",this,this.layout);\r\n\t\t\tthis.layout();\r\n\t\t}\r\n\r\n\t\t__proto.initButton=function(isShow,button,optName,value){\r\n\t\t\tvar _$this=this;\r\n\t\t\tif (isShow){\r\n\t\t\t\tthis.opts.push(button);\r\n\t\t\t\tif (value !=null){\r\n\t\t\t\t\tif ((value instanceof Array)){\r\n\t\t\t\t\t\tPaiUtils.showPaiIcon(button.getChildAt(0).getChildAt(0),value[0]);\r\n\t\t\t\t\t\tPaiUtils.showPaiIcon(button.getChildAt(1).getChildAt(0),value[1]);\r\n\t\t\t\t\t\tPaiUtils.showPaiIcon(button.getChildAt(2).getChildAt(0),value[2]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\tPaiUtils.showPaiIcon(button.getChildAt(0).getChildAt(0),value);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tbutton.removeSelf();\r\n\t\t\t\tbutton.destroy();\r\n\t\t\t}\r\n\t\t\tbutton.on(\"mouseover\",this,function(){\r\n\t\t\t\tbutton.filters=OptDialog.btnGlowFilters;\r\n\t\t\t});\r\n\t\t\tbutton.on(\"mouseout\",this,function(){\r\n\t\t\t\tbutton.filters=null;\r\n\t\t\t});\r\n\t\t\tbutton.on(\"mousedown\",this,function(){\r\n\t\t\t\tbutton.filters=OptDialog.downBtnGlowFilters;\r\n\t\t\t});\r\n\t\t\tbutton.on(\"click\",this,function(){\r\n\t\t\t\tif (_$this.optHandler){\r\n\t\t\t\t\t_$this.optHandler.runWith([optName,value]);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t__proto.layout=function(){\r\n\t\t\tvar bWidth=Browser.width;\r\n\t\t\tvar bHeight=Browser.height;\r\n\t\t\tvar ratio=UiHelps.getGameRatio();\r\n\t\t\tvar x=0;\r\n\t\t\tvar height=0;\r\n\t\t\tfor (var i=0;i < this.opts.length;i++){\r\n\t\t\t\tvar btn=this.opts[i];\r\n\t\t\t\tbtn.x=x;\r\n\t\t\t\tx+=btn.width;\r\n\t\t\t\theight=Math.max(height,btn.height);\r\n\t\t\t}\r\n\t\t\tif (x > bWidth){\r\n\t\t\t\tratio=bWidth / x *0.9;\r\n\t\t\t}\r\n\t\t\tthis.x=(bWidth-x *ratio)/ 2;\r\n\t\t\tthis.y=(bHeight-(172+height-20)*ratio);\r\n\t\t\tthis.scale(ratio,ratio);\r\n\t\t}\r\n\r\n\t\t__proto.destroy=function(destroyChild){\r\n\t\t\t(destroyChild===void 0)&& (destroyChild=true);\r\n\t\t\tlaya.ui.View.prototype.destroy.call(this,destroyChild);\r\n\t\t\tLaya.stage.off(\"resize\",this,this.layout);\r\n\t\t\tif (this.optHandler){\r\n\t\t\t\tthis.optHandler.recover();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t__proto.close=function(type){\r\n\t\t\tlaya.ui.Dialog.prototype.close.call(this,type);\r\n\t\t\tthis.destroy(true);\r\n\t\t\tDialog1.manager.maskLayer.alpha=UIConfig.popupBgAlpha;\r\n\t\t}\r\n\r\n\t\tOptDialog.showCPGH=function(hu,gang,peng,chi,optHandler){\r\n\t\t\tif (OptDialog.optDialog !=null){\r\n\t\t\t\tthis.close();\r\n\t\t\t}\r\n\t\t\tOptDialog.optDialog=new OptDialog();\r\n\t\t\tOptDialog.optDialog.initCPGH(hu,gang,peng,chi,optHandler);\r\n\t\t\tOptDialog.optDialog.popupCenter=false;\r\n\t\t\tDialog1.manager.maskLayer.alpha=0;\r\n\t\t\tOptDialog.optDialog.popup();\r\n\t\t}\r\n\r\n\t\tOptDialog.showFaPai=function(hu,anGang,mingGang,optHandler){\r\n\t\t\tif (OptDialog.optDialog !=null){\r\n\t\t\t\tthis.close();\r\n\t\t\t}\r\n\t\t\tOptDialog.optDialog=new OptDialog();\r\n\t\t\tOptDialog.optDialog.initFaPai(hu,anGang,mingGang,optHandler);\r\n\t\t\tOptDialog.optDialog.popupCenter=false;\r\n\t\t\tDialog1.manager.maskLayer.alpha=0;\r\n\t\t\tOptDialog.optDialog.popup();\r\n\t\t}\r\n\r\n\t\tOptDialog.close=function(){\r\n\t\t\tif (OptDialog.optDialog){\r\n\t\t\t\tOptDialog.optDialog.close();\r\n\t\t\t\tOptDialog.optDialog=null;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tOptDialog.optDialog=null\r\n\t\t__static(OptDialog,\r\n\t\t['btnGlowFilters',function(){return this.btnGlowFilters=[new GlowFilter(\"#ebb531\",8,4,4)];},'downBtnGlowFilters',function(){return this.downBtnGlowFilters=[new GlowFilter(\"#ebb531\",14,4,4)];}\r\n\t\t]);\r\n\t\treturn OptDialog;\r\n\t})(OptDialogUI)\r\n\r\n\r\n\t/**\r\n\t*@author zuoge85@gmail.com on 16/10/10.\r\n\t*/\r\n\t//class mj.ui.dialog.Wait extends ui.test.WaitUI\r\n\tvar Wait=(function(_super){\r\n\t\tfunction Wait(message){\r\n\t\t\tthis._message=null;\r\n\t\t\tthis._waitAni=null;\r\n\t\t\tWait.__super.call(this);\r\n\t\t\tLaya.stage.on(\"resize\",this,this.layout);\r\n\t\t\tLaya.stage.on(\"added\",this,this.layout);\r\n\t\t\tthis.layout();\r\n\t\t\tthis.message=message;\r\n\t\t\tthis._waitAni=new Animation();\r\n\t\t\tthis._waitAni.source=\"res/atlas/movie/wait.json\";\r\n\t\t\tthis._waitAni.interval=60;\r\n\t\t\tthis._waitAni.loop=false;\r\n\t\t\tthis._waitAni.scale(2,2);\r\n\t\t\tthis._waitAni.x=this.main.width / 2;\r\n\t\t\tthis._waitAni.y=this.main.height / 2;\r\n\t\t\tvar bounds=this._waitAni.getGraphicBounds();\r\n\t\t\tthis._waitAni.pivot(bounds.width / 2,bounds.height *0.7);\r\n\t\t\tthis._waitAni.play(0,true);\r\n\t\t\tthis.main.addChild(this._waitAni);\r\n\t\t}\r\n\r\n\t\t__class(Wait,'mj.ui.dialog.Wait',_super);\r\n\t\tvar __proto=Wait.prototype;\r\n\t\t__proto.layout=function(){\r\n\t\t\tvar bWidth=Browser.width;\r\n\t\t\tvar bHeight=Browser.height;\r\n\t\t\tvar ratio=UiHelps.getRatio();\r\n\t\t\tthis.x=(bWidth-this.width *ratio)/ 2;\r\n\t\t\tthis.y=(bHeight-this.height *ratio)/ 2;\r\n\t\t\tthis.scale(ratio,ratio);\r\n\t\t}\r\n\r\n\t\t// }\r\n\t\t__proto.destroy=function(destroyChild){\r\n\t\t\t(destroyChild===void 0)&& (destroyChild=true);\r\n\t\t\tlaya.ui.View.prototype.destroy.call(this,destroyChild);\r\n\t\t\tLaya.stage.off(\"resize\",this,this.layout);\r\n\t\t}\r\n\r\n\t\t__proto.close=function(type){\r\n\t\t\tvar _$this=this;\r\n\t\t\tLaya.timer.once(300,this,function(){\r\n\t\t\t\tUiManager.instance.hideMask();\r\n\t\t\t\t_$this.superClose(type);\r\n\t\t\t\t_$this.destroy(true);\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t__proto.superClose=function(type){\r\n\t\t\tlaya.ui.Dialog.prototype.close.call(this,type);\r\n\t\t}\r\n\r\n\t\t// Laya.timer.frameLoop(1,this,iconTurn);\r\n\t\t__getset(0,__proto,'message',null,function(message){\r\n\t\t\tthis._message=message;\r\n\t\t\tthis.text.text=message;\r\n\t\t});\r\n\r\n\t\tWait.show=function(message){\r\n\t\t\t(message===void 0)&& (message=\"正在加载\");\r\n\t\t\tif (Wait.wait !=null){\r\n\t\t\t\tthis.close();\r\n\t\t\t}\r\n\t\t\tWait.wait=new Wait(message);\r\n\t\t\tUiManager.instance.showMask();\r\n\t\t\tUiManager.instance.topLayer.addChild(Wait.wait)\r\n\t\t}\r\n\r\n\t\tWait.close=function(){\r\n\t\t\tif (Wait.wait){\r\n\t\t\t\tWait.wait.close();\r\n\t\t\t\tWait.wait=null;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tWait.wait=null\r\n\t\treturn Wait;\r\n\t})(WaitUI)\r\n\r\n\r\n\t/**\r\n\t*@author zuoge85@gmail.com on 16/10/10.\r\n\t*/\r\n\t//class mj.ui.dialog.Dialog extends view.DialogView\r\n\tvar Dialog=(function(_super){\r\n\t\tfunction Dialog(size,w,h,content,title,closeHandler,confirmHandler,confirmText,cancelHandler,cancelText){\r\n\t\t\t(confirmText===void 0)&& (confirmText=\"确定\");\r\n\t\t\tDialog.__super.call(this,size,w,h,content,title,closeHandler,confirmHandler,confirmText,cancelHandler,cancelText);\r\n\t\t}\r\n\r\n\t\t__class(Dialog,'mj.ui.dialog.Dialog',_super);\r\n\t\tvar __proto=Dialog.prototype;\r\n\t\t__proto.close=function(type){\r\n\t\t\tlaya.ui.Dialog.prototype.close.call(this,type);\r\n\t\t\tthis.destroy(true)\r\n\t\t}\r\n\r\n\t\t__proto.sendRet=function(success){}\r\n\t\t__proto.setTitle=function(title){\r\n\t\t\tthis.title.changeText(title);\r\n\t\t}\r\n\r\n\t\tDialog.showDialog=function(size,content,title,closeHandler,confirmHandler,confirmText,cancelHandler,cancelText){\r\n\t\t\t(confirmText===void 0)&& (confirmText=\"确定\");\r\n\t\t\tvar dialog=new Dialog(\r\n\t\t\tsize,-1,-1,content,title,closeHandler,\r\n\t\t\tconfirmHandler,confirmText,cancelHandler,cancelText);\r\n\t\t\tdialog.popupCenter=false;\r\n\t\t\tdialog.popup();\r\n\t\t\treturn dialog;\r\n\t\t}\r\n\r\n\t\tDialog.showMessage=function(message,closeHandler,size,title){\r\n\t\t\t(size===void 0)&& (size=\"SMALL\");\r\n\t\t\t(title===void 0)&& (title=\"提示!\");\r\n\t\t\tvar dialog=Dialog.showDialog(size,null,title,closeHandler,Handler.create(null,function(){\r\n\t\t\t\tdialog.close();\r\n\t\t\t}));\r\n\t\t\tdialog.setText(message);\r\n\t\t\treturn dialog;\r\n\t\t}\r\n\r\n\t\tDialog.confirm=function(message,confirmHandler,closeHandler){\r\n\t\t\tvar dialog=Dialog.showDialog(\r\n\t\t\t\"SMALL\",null,\"确定\",null,\r\n\t\t\tHandler.create(null,function(){\r\n\t\t\t\tdialog.close();\r\n\t\t\t\tif (confirmHandler){\r\n\t\t\t\t\tconfirmHandler.run();\r\n\t\t\t\t}\r\n\t\t\t}),\"确定\",\r\n\t\t\tHandler.create(null,function(){\r\n\t\t\t\tdialog.close();\r\n\t\t\t\tif (closeHandler){\r\n\t\t\t\t\tcloseHandler.run();\r\n\t\t\t\t}\r\n\t\t\t}),\"取消\");\r\n\t\t\tdialog.setText(message);\r\n\t\t\treturn dialog;\r\n\t\t}\r\n\r\n\t\treturn Dialog;\r\n\t})(DialogView)\r\n\r\n\r\n\tLaya.__init([EventDispatcher,LoaderManager,WebGLFilter,Timer,AtlasGrid,DrawText,RenderTargetMAX,View,WebGLContext2D,ShaderCompile,Render,Browser,Dialog1,LocalStorage]);\r\n\tnew LayaUISample();\r\n\r\n})(window,document,Laya);\r\n"],"file":"myLaya.min.js"}